{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"STACK STACK es el sistema de evaluaci\u00f3n autom\u00e1tica de c\u00f3digo abierto (GPL) l\u00edder en el mundo para matem\u00e1ticas, ciencias y disciplinas relacionadas. Los estudiantes escriben expresiones matem\u00e1ticas y no est\u00e1n restringidos a opciones m\u00faltiples. Validaci\u00f3n y evaluaci\u00f3n separadas con \u00e9nfasis en la evaluaci\u00f3n formativa. Generaci\u00f3n aleatoria de preguntas. Una amplia variedad de tipos de entrada, incluido el trabajo l\u00ednea por l\u00ednea. Soporte para preguntas de varias partes. Soporte a unidades cient\u00edficas y cifras significativas. Esta es la documentaci\u00f3n de usuario oficial de STACK. El sitio web principal de la comunidad de STACK es https://stack-assessment.org/ Hay un servidor de demostraci\u00f3n disponible en Edimburgo: https://stack-demo.maths.ed.ac.uk/demo/ La discusi\u00f3n comunitaria se lleva a cabo en https://stack-assessment.zulipchat.com/ Autor\u00eda Documentaci\u00f3n para autores de preguntas, que incluye: Una gu\u00eda de inicio r\u00e1pido de creaci\u00f3n , que se puede utilizar junto con la [gu\u00eda] \"C\u00f3mo empezar con STACK\" (../content/2019-STACK-Guide.pdf). Informaci\u00f3n sobre varios temas de autor\u00eda , como pruebas de respuesta , entradas , posibles \u00e1rboles de respuesta y traducciones . Preguntas frecuentes . Informaci\u00f3n sobre el uso de CAS Maxima para la creaci\u00f3n de preguntas, incluida aleatorizaci\u00f3n , trazado de gr\u00e1ficos y expresi\u00f3n simplificaci\u00f3n . Estudiantes Informaci\u00f3n para estudiantes que usan STACK, que incluye: Instrucciones de entrada . C\u00f3mo se eval\u00faan las respuestas . Preguntas frecuentes . Instalaci\u00f3n Instrucciones de instalaci\u00f3n . Desarrolladores Temas para desarrolladores, que incluyen: Un historial de desarrollo . Traducci\u00f3n de la interfaz STACK . Creando un tipo de entrada .","title":"Home"},{"location":"#stack","text":"STACK es el sistema de evaluaci\u00f3n autom\u00e1tica de c\u00f3digo abierto (GPL) l\u00edder en el mundo para matem\u00e1ticas, ciencias y disciplinas relacionadas. Los estudiantes escriben expresiones matem\u00e1ticas y no est\u00e1n restringidos a opciones m\u00faltiples. Validaci\u00f3n y evaluaci\u00f3n separadas con \u00e9nfasis en la evaluaci\u00f3n formativa. Generaci\u00f3n aleatoria de preguntas. Una amplia variedad de tipos de entrada, incluido el trabajo l\u00ednea por l\u00ednea. Soporte para preguntas de varias partes. Soporte a unidades cient\u00edficas y cifras significativas. Esta es la documentaci\u00f3n de usuario oficial de STACK. El sitio web principal de la comunidad de STACK es https://stack-assessment.org/ Hay un servidor de demostraci\u00f3n disponible en Edimburgo: https://stack-demo.maths.ed.ac.uk/demo/ La discusi\u00f3n comunitaria se lleva a cabo en https://stack-assessment.zulipchat.com/","title":"STACK"},{"location":"#autoria","text":"Documentaci\u00f3n para autores de preguntas, que incluye: Una gu\u00eda de inicio r\u00e1pido de creaci\u00f3n , que se puede utilizar junto con la [gu\u00eda] \"C\u00f3mo empezar con STACK\" (../content/2019-STACK-Guide.pdf). Informaci\u00f3n sobre varios temas de autor\u00eda , como pruebas de respuesta , entradas , posibles \u00e1rboles de respuesta y traducciones . Preguntas frecuentes . Informaci\u00f3n sobre el uso de CAS Maxima para la creaci\u00f3n de preguntas, incluida aleatorizaci\u00f3n , trazado de gr\u00e1ficos y expresi\u00f3n simplificaci\u00f3n .","title":"Autor\u00eda"},{"location":"#estudiantes","text":"Informaci\u00f3n para estudiantes que usan STACK, que incluye: Instrucciones de entrada . C\u00f3mo se eval\u00faan las respuestas . Preguntas frecuentes .","title":"Estudiantes"},{"location":"#instalacion","text":"Instrucciones de instalaci\u00f3n .","title":"Instalaci\u00f3n"},{"location":"#desarrolladores","text":"Temas para desarrolladores, que incluyen: Un historial de desarrollo . Traducci\u00f3n de la interfaz STACK . Creando un tipo de entrada .","title":"Desarrolladores"},{"location":"Site_map/","text":"Mapa del sitio Un directorio con una lista de todos los documentos.","title":"Mapa del sitio"},{"location":"Site_map/#mapa-del-sitio","text":"Un directorio con una lista de todos los documentos.","title":"Mapa del sitio"},{"location":"AbInitio/","text":"Autor\u00eda inicio r\u00e1pido Aquellos nuevos en STACK probablemente preferir\u00e1n comenzar con la Gu\u00eda de Autor\u00eda inicio r\u00e1pido . Estas gu\u00edas cubren los temas m\u00e1s importantes de la creaci\u00f3n de preguntas e incluyen videos de screencast integrados para guiarlo. Autor\u00eda inicio r\u00e1pido 1 : Una pregunta b\u00e1sica. Autor\u00eda inicio r\u00e1pido 2 : Variables de la pregunta. Autor\u00eda inicio r\u00e1pido 3 : Mejorando la retroalimentaci\u00f3n. Autor\u00eda inicio r\u00e1pido 4 : Aleatorizaci\u00f3n. Autor\u00eda inicio r\u00e1pido 5 : Test de Preguntas. Autor\u00eda inicio r\u00e1pido 6 : Preguntas matem\u00e1ticas de varias partes. Autor\u00eda inicio r\u00e1pido 7 : Desactivar la simplificaci\u00f3n. Autor\u00eda inicio r\u00e1pido 8 : Importaci\u00f3n y cuestionarios.","title":"Gu\u00eda Autor\u00eda inicio r\u00e1pido"},{"location":"AbInitio/#autoria-inicio-rapido","text":"Aquellos nuevos en STACK probablemente preferir\u00e1n comenzar con la Gu\u00eda de Autor\u00eda inicio r\u00e1pido . Estas gu\u00edas cubren los temas m\u00e1s importantes de la creaci\u00f3n de preguntas e incluyen videos de screencast integrados para guiarlo. Autor\u00eda inicio r\u00e1pido 1 : Una pregunta b\u00e1sica. Autor\u00eda inicio r\u00e1pido 2 : Variables de la pregunta. Autor\u00eda inicio r\u00e1pido 3 : Mejorando la retroalimentaci\u00f3n. Autor\u00eda inicio r\u00e1pido 4 : Aleatorizaci\u00f3n. Autor\u00eda inicio r\u00e1pido 5 : Test de Preguntas. Autor\u00eda inicio r\u00e1pido 6 : Preguntas matem\u00e1ticas de varias partes. Autor\u00eda inicio r\u00e1pido 7 : Desactivar la simplificaci\u00f3n. Autor\u00eda inicio r\u00e1pido 8 : Importaci\u00f3n y cuestionarios.","title":"Autor\u00eda inicio r\u00e1pido"},{"location":"AbInitio/Authoring_quick_start_1/","text":"Autor\u00eda inicio r\u00e1pido 1: una pregunta m\u00ednima de trabajo 1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios La gu\u00eda de inicio r\u00e1pido de creaci\u00f3n le muestra c\u00f3mo escribir preguntas STACK. La parte 1 hace que funcione una pregunta m\u00ednima. El siguiente v\u00eddeo explica el proceso: Antes de que empieces Suponemos lo siguiente: Tienes acceso a un curso con STACK instalado. Est\u00e1 familiarizado con el formato (\\LaTeX) simple para matem\u00e1ticas. Algunos ejemplos b\u00e1sicos se proporcionan en la documentaci\u00f3n CASText . Creando una pregunta STACK m\u00ednima Vaya a su curso, navegue hasta el banco de preguntas y cree una nueva pregunta con el tipo de pregunta \"STACK\". Hay muchos campos, pero solo unos pocos son obligatorios: El \"Nombre de la pregunta\", El \"Enunciado de la pregunta\", que se muestra al alumno, La \"Respuesta modelo\" del profesor (dentro de \"Entrada: ans1\" en una pregunta predeterminada), Una prueba de \"correcci\u00f3n\". De forma predeterminada, una nueva pregunta tiene autom\u00e1ticamente una entrada y un algoritmo para probar la exactitud de la respuesta. Nombre de la pregunta Debes darle un nombre a la pregunta, por ejemplo pregunta1 . Enunciado de la pregunta Centr\u00e9monos en el problema de derivar ((x-1)^3) con respecto a (x). Necesitamos escribir el texto de la pregunta en s\u00ed. Copie lo siguiente en el cuadro de texto Pregunta: Diferenciar \\((x-1)^3\\) con respecto a x. [[input:ans1]] [[validation:ans1]] Notas: Moodle tiene una amplia variedad de editores de texto, por lo que las capturas de pantalla de esta gu\u00eda de inicio r\u00e1pido pueden verse ligeramente diferentes a su variante de Moodle. Adem\u00e1s, el proceso de cortar y pegar puede incluir o no parte del formato. El texto contiene entornos matem\u00e1ticos LaTeX. No utilizar entornos matem\u00e1ticos $..$ y $$..$$ . En su lugar debes usar \\(..\\) y \\[..\\] para matem\u00e1ticas en l\u00ednea y mostradas respectivamente. (Hay un convertidor masivo autom\u00e1tico si tiene muchos materiales heredados). Internamente la respuesta del estudiante ser\u00e1 asignada a una variable ans1 . La etiqueta [[input:ans1]] denota la posici\u00f3n del cuadro en el que el estudiante pone su respuesta. La etiqueta [[validation:ans1]] ser\u00e1 reemplazado por cualquier comentario relacionado con la validez de la entrada ans1 , e.g. errores de sintaxis causados por la falta de corchetes. Estas etiquetas se pueden colocar en cualquier parte del texto de la pregunta. Entrada: ans1 Despl\u00e1cese hacia abajo: habr\u00e1 una secci\u00f3n de Entrada en el formulario de edici\u00f3n. Haga clic en el encabezado Input: ans1 para revelar la configuraci\u00f3n relevante. Para una pregunta m\u00ednima, debemos especificar la Respuesta modelo . Haciendo esto 3*(x-1)^2 Notas La respuesta del estudiante se almacena en la variable de respuesta ans1 . La respuesta del modelo debe ser una expresi\u00f3n sint\u00e1cticamente v\u00e1lida en sintaxis CAS (Maxima), no en LaTeX. Esto significa que la multiplicaci\u00f3n debe especificarse expl\u00edcitamente, usando * . Entrada puede tener una variedad de tipos seleccionados por el men\u00fa desplejable tipo de Entrada . La Algebraica est\u00e1 por defecto, y es lo que necesitamos aqu\u00ed. Una pregunta puede tener muchas entradas para varias partes. Estos se analizan m\u00e1s adelante en una parte posterior. Evaluaci\u00f3n de la exactitud de una respuesta: el \u00c1rbol de respuestas potenciales (ARP) A continuaci\u00f3n tenemos que decidir si la respuesta del estudiante es correcta. Para calificar la respuesta del estudiante, necesitamos determinar sus propiedades matem\u00e1ticas usando un algoritmo conocido como \u00e1rbol de respuestas potenciales . De forma predeterminada, una pregunta nueva contiene un \u00e1rbol de respuesta potencial llamado prt1 . Los comentarios generados por el \u00e1rbol reemplazan la etiqueta [[feedback:prt1]] en el momento adecuado. Configurar un nodo de respuesta potencial Un \u00e1rbol de respuesta potencial es un gr\u00e1fico dirigido ac\u00edclico no vac\u00edo de nodos de respuesta potencial . De forma predeterminada, tenemos un nodo de respuesta potencial. en cada nodo SAns es comparado con TAns con la prueba de respuesta, posiblemente con una opci\u00f3n, Si true , luego ejecutamos la rama true , Si false , luego ejecutamos la rama false . Cada rama puede entonces Asignar/actualizar la puntuaci\u00f3n, Asignar comentarios formativos al estudiante, Deje una nota de respuesta para fines de informes estad\u00edsticos, Contin\u00fae con el siguiente nodo de respuesta potencial o finalice el proceso con [stop] . Configuremos el primer nodo para determinar si el estudiante ha diferenciado correctamente. Especifique la variable ans1 en la entrada SAns . Especifique la respuesta correcta en la entrada TAns haciendo: 3*(x-1)^2 . Confirmar que tenemos AlgEquiv en el men\u00fa desplegable de Prueba (este es el predeterminado). Guardando la pregunta Ahora despl\u00e1cese hasta el final de la p\u00e1gina y presione [Guarde cambios y contin\u00fae editando] . Si la pregunta no se guarda, verifique cuidadosamente si hay errores, corr\u00edjalos y gu\u00e1rdelos nuevamente.. Ahora tenemos una pregunta m\u00ednima. Para resumir, tenemos El \"Nombre de la pregunta\", El \"Enunciado de la pregunta\", La \"respuesta modelo\" del profesor, Una prueba de \"exactitud\". A continuaci\u00f3n deber\u00edamos probar nuestra pregunta presionando el bot\u00f3n de enlace Vista previa en la parte inferior de la p\u00e1gina. Vista previa de la pregunta Para acelerar el proceso de prueba, despl\u00e1cese hacia abajo en la ventana de vista previa y en \"Opciones de intento\" u \"Opciones de vista previa\" (dependiendo de la versi\u00f3n de moodle) aseg\u00farese de que tiene \"C\u00f3mo se comportan las preguntas\" en \"Modo adaptativo\". Si es necesario, \"Empezar de nuevo con estas opciones\". Esto le permitir\u00e1 comprobar sus respuestas sin tener que Enviar y Empezar de nuevo repetidamente. Con la vista previa abierta, prueba a teclear 3*(x-1)^2 en el cuadro de respuesta. El sistema establece en primer lugar la validez sint\u00e1ctica de esta respuesta. Presione el boton [Comprobar] . El sistema ejecuta el \u00e1rbol de respuestas potenciales y establece si tu respuesta es equivalente a la respuesta modelo 3*(x-1)^2 . Validaci\u00f3n de los estudiantes Observe que hay un proceso de dos pasos para que el estudiante introduzca su respuesta. La primera es la \"validaci\u00f3n\", y normalmente los servidores tienen activada la \"validaci\u00f3n instant\u00e1nea\". Si la expresi\u00f3n es v\u00e1lida, STACK muestra al estudiante \"Su \u00faltima respuesta fue interpretada como:\" y muestra su expresi\u00f3n. Una respuesta no v\u00e1lida crea un mensaje de error. La segunda etapa se ejecuta cuando se introduce una expresi\u00f3n v\u00e1lida, y \u00e9sta eval\u00faa el \u00e1rbol de respuestas potenciales para valorar la respuesta del alumno. Este proceso en dos fases es una caracter\u00edstica \u00fanica y esencial de STACK. Hay muchas opciones de validaci\u00f3n para ayudar al estudiante. Por ejemplo, en el ejemplo anterior, todas las expresiones de ejemplo tienen una sintaxis estricta. Aqu\u00ed utilizamos expresiones como 3*(x-1)^2 , con s\u00edmbolos * para denotar multiplicaci\u00f3n. Puede dejar que los alumnos escriban expresiones como 3(x-1)^2 y aceptar la multiplicaci\u00f3n impl\u00edcita. Tenga en cuenta, sin embargo, que la entrada del profesor siempre tendr\u00e1 que ser estricta para evitar ambig\u00fcedades. La documentaci\u00f3n sobre estas opciones se encuentra en la secci\u00f3n entradas . Pr\u00f3ximo paso Ahora deber\u00eda poder escribir una pregunta sencilla en STACK. La siguiente parte de la gu\u00eda de inicio r\u00e1pido de creaci\u00f3n se centra en el uso de variables de pregunta .","title":"Autor\u00eda inicio r\u00e1pido 1: una pregunta m\u00ednima de trabajo"},{"location":"AbInitio/Authoring_quick_start_1/#autoria-inicio-rapido-1-una-pregunta-minima-de-trabajo","text":"1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios La gu\u00eda de inicio r\u00e1pido de creaci\u00f3n le muestra c\u00f3mo escribir preguntas STACK. La parte 1 hace que funcione una pregunta m\u00ednima. El siguiente v\u00eddeo explica el proceso:","title":"Autor\u00eda inicio r\u00e1pido 1: una pregunta m\u00ednima de trabajo"},{"location":"AbInitio/Authoring_quick_start_1/#antes-de-que-empieces","text":"Suponemos lo siguiente: Tienes acceso a un curso con STACK instalado. Est\u00e1 familiarizado con el formato (\\LaTeX) simple para matem\u00e1ticas. Algunos ejemplos b\u00e1sicos se proporcionan en la documentaci\u00f3n CASText .","title":"Antes de que empieces"},{"location":"AbInitio/Authoring_quick_start_1/#creando-una-pregunta-stack-minima","text":"Vaya a su curso, navegue hasta el banco de preguntas y cree una nueva pregunta con el tipo de pregunta \"STACK\". Hay muchos campos, pero solo unos pocos son obligatorios: El \"Nombre de la pregunta\", El \"Enunciado de la pregunta\", que se muestra al alumno, La \"Respuesta modelo\" del profesor (dentro de \"Entrada: ans1\" en una pregunta predeterminada), Una prueba de \"correcci\u00f3n\". De forma predeterminada, una nueva pregunta tiene autom\u00e1ticamente una entrada y un algoritmo para probar la exactitud de la respuesta.","title":"Creando una pregunta STACK m\u00ednima"},{"location":"AbInitio/Authoring_quick_start_1/#nombre-de-la-pregunta","text":"Debes darle un nombre a la pregunta, por ejemplo pregunta1 .","title":"Nombre de la pregunta"},{"location":"AbInitio/Authoring_quick_start_1/#enunciado-de-la-pregunta","text":"Centr\u00e9monos en el problema de derivar ((x-1)^3) con respecto a (x). Necesitamos escribir el texto de la pregunta en s\u00ed. Copie lo siguiente en el cuadro de texto Pregunta: Diferenciar \\((x-1)^3\\) con respecto a x. [[input:ans1]] [[validation:ans1]] Notas: Moodle tiene una amplia variedad de editores de texto, por lo que las capturas de pantalla de esta gu\u00eda de inicio r\u00e1pido pueden verse ligeramente diferentes a su variante de Moodle. Adem\u00e1s, el proceso de cortar y pegar puede incluir o no parte del formato. El texto contiene entornos matem\u00e1ticos LaTeX. No utilizar entornos matem\u00e1ticos $..$ y $$..$$ . En su lugar debes usar \\(..\\) y \\[..\\] para matem\u00e1ticas en l\u00ednea y mostradas respectivamente. (Hay un convertidor masivo autom\u00e1tico si tiene muchos materiales heredados). Internamente la respuesta del estudiante ser\u00e1 asignada a una variable ans1 . La etiqueta [[input:ans1]] denota la posici\u00f3n del cuadro en el que el estudiante pone su respuesta. La etiqueta [[validation:ans1]] ser\u00e1 reemplazado por cualquier comentario relacionado con la validez de la entrada ans1 , e.g. errores de sintaxis causados por la falta de corchetes. Estas etiquetas se pueden colocar en cualquier parte del texto de la pregunta.","title":"Enunciado de la pregunta"},{"location":"AbInitio/Authoring_quick_start_1/#entrada-ans1","text":"Despl\u00e1cese hacia abajo: habr\u00e1 una secci\u00f3n de Entrada en el formulario de edici\u00f3n. Haga clic en el encabezado Input: ans1 para revelar la configuraci\u00f3n relevante. Para una pregunta m\u00ednima, debemos especificar la Respuesta modelo . Haciendo esto 3*(x-1)^2 Notas La respuesta del estudiante se almacena en la variable de respuesta ans1 . La respuesta del modelo debe ser una expresi\u00f3n sint\u00e1cticamente v\u00e1lida en sintaxis CAS (Maxima), no en LaTeX. Esto significa que la multiplicaci\u00f3n debe especificarse expl\u00edcitamente, usando * . Entrada puede tener una variedad de tipos seleccionados por el men\u00fa desplejable tipo de Entrada . La Algebraica est\u00e1 por defecto, y es lo que necesitamos aqu\u00ed. Una pregunta puede tener muchas entradas para varias partes. Estos se analizan m\u00e1s adelante en una parte posterior.","title":"Entrada: ans1"},{"location":"AbInitio/Authoring_quick_start_1/#evaluacion-de-la-exactitud-de-una-respuesta-el-arbol-de-respuestas-potenciales-arp","text":"A continuaci\u00f3n tenemos que decidir si la respuesta del estudiante es correcta. Para calificar la respuesta del estudiante, necesitamos determinar sus propiedades matem\u00e1ticas usando un algoritmo conocido como \u00e1rbol de respuestas potenciales . De forma predeterminada, una pregunta nueva contiene un \u00e1rbol de respuesta potencial llamado prt1 . Los comentarios generados por el \u00e1rbol reemplazan la etiqueta [[feedback:prt1]] en el momento adecuado.","title":"Evaluaci\u00f3n de la exactitud de una respuesta: el \u00c1rbol de respuestas potenciales (ARP)"},{"location":"AbInitio/Authoring_quick_start_1/#configurar-un-nodo-de-respuesta-potencial","text":"Un \u00e1rbol de respuesta potencial es un gr\u00e1fico dirigido ac\u00edclico no vac\u00edo de nodos de respuesta potencial . De forma predeterminada, tenemos un nodo de respuesta potencial. en cada nodo SAns es comparado con TAns con la prueba de respuesta, posiblemente con una opci\u00f3n, Si true , luego ejecutamos la rama true , Si false , luego ejecutamos la rama false . Cada rama puede entonces Asignar/actualizar la puntuaci\u00f3n, Asignar comentarios formativos al estudiante, Deje una nota de respuesta para fines de informes estad\u00edsticos, Contin\u00fae con el siguiente nodo de respuesta potencial o finalice el proceso con [stop] . Configuremos el primer nodo para determinar si el estudiante ha diferenciado correctamente. Especifique la variable ans1 en la entrada SAns . Especifique la respuesta correcta en la entrada TAns haciendo: 3*(x-1)^2 . Confirmar que tenemos AlgEquiv en el men\u00fa desplegable de Prueba (este es el predeterminado).","title":"Configurar un nodo de respuesta potencial"},{"location":"AbInitio/Authoring_quick_start_1/#guardando-la-pregunta","text":"Ahora despl\u00e1cese hasta el final de la p\u00e1gina y presione [Guarde cambios y contin\u00fae editando] . Si la pregunta no se guarda, verifique cuidadosamente si hay errores, corr\u00edjalos y gu\u00e1rdelos nuevamente.. Ahora tenemos una pregunta m\u00ednima. Para resumir, tenemos El \"Nombre de la pregunta\", El \"Enunciado de la pregunta\", La \"respuesta modelo\" del profesor, Una prueba de \"exactitud\". A continuaci\u00f3n deber\u00edamos probar nuestra pregunta presionando el bot\u00f3n de enlace Vista previa en la parte inferior de la p\u00e1gina.","title":"Guardando la pregunta"},{"location":"AbInitio/Authoring_quick_start_1/#vista-previa-de-la-pregunta","text":"Para acelerar el proceso de prueba, despl\u00e1cese hacia abajo en la ventana de vista previa y en \"Opciones de intento\" u \"Opciones de vista previa\" (dependiendo de la versi\u00f3n de moodle) aseg\u00farese de que tiene \"C\u00f3mo se comportan las preguntas\" en \"Modo adaptativo\". Si es necesario, \"Empezar de nuevo con estas opciones\". Esto le permitir\u00e1 comprobar sus respuestas sin tener que Enviar y Empezar de nuevo repetidamente. Con la vista previa abierta, prueba a teclear 3*(x-1)^2 en el cuadro de respuesta. El sistema establece en primer lugar la validez sint\u00e1ctica de esta respuesta. Presione el boton [Comprobar] . El sistema ejecuta el \u00e1rbol de respuestas potenciales y establece si tu respuesta es equivalente a la respuesta modelo 3*(x-1)^2 .","title":"Vista previa de la pregunta"},{"location":"AbInitio/Authoring_quick_start_1/#validacion-de-los-estudiantes","text":"Observe que hay un proceso de dos pasos para que el estudiante introduzca su respuesta. La primera es la \"validaci\u00f3n\", y normalmente los servidores tienen activada la \"validaci\u00f3n instant\u00e1nea\". Si la expresi\u00f3n es v\u00e1lida, STACK muestra al estudiante \"Su \u00faltima respuesta fue interpretada como:\" y muestra su expresi\u00f3n. Una respuesta no v\u00e1lida crea un mensaje de error. La segunda etapa se ejecuta cuando se introduce una expresi\u00f3n v\u00e1lida, y \u00e9sta eval\u00faa el \u00e1rbol de respuestas potenciales para valorar la respuesta del alumno. Este proceso en dos fases es una caracter\u00edstica \u00fanica y esencial de STACK. Hay muchas opciones de validaci\u00f3n para ayudar al estudiante. Por ejemplo, en el ejemplo anterior, todas las expresiones de ejemplo tienen una sintaxis estricta. Aqu\u00ed utilizamos expresiones como 3*(x-1)^2 , con s\u00edmbolos * para denotar multiplicaci\u00f3n. Puede dejar que los alumnos escriban expresiones como 3(x-1)^2 y aceptar la multiplicaci\u00f3n impl\u00edcita. Tenga en cuenta, sin embargo, que la entrada del profesor siempre tendr\u00e1 que ser estricta para evitar ambig\u00fcedades. La documentaci\u00f3n sobre estas opciones se encuentra en la secci\u00f3n entradas .","title":"Validaci\u00f3n de los estudiantes"},{"location":"AbInitio/Authoring_quick_start_1/#proximo-paso","text":"Ahora deber\u00eda poder escribir una pregunta sencilla en STACK.","title":"Pr\u00f3ximo paso"},{"location":"AbInitio/Authoring_quick_start_1/#la-siguiente-parte-de-la-guia-de-inicio-rapido-de-creacion-se-centra-en-el-uso-de-variables-de-pregunta","text":"","title":"La siguiente parte de la gu\u00eda de inicio r\u00e1pido de creaci\u00f3n se centra en el uso de variables de pregunta."},{"location":"AbInitio/Authoring_quick_start_2/","text":"Autor\u00eda inicio r\u00e1pido 2: variables de la pregunta 1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios Esta parte de la gu\u00eda r\u00e1pida de creaci\u00f3n trata sobre el uso de variables de pregunta. El siguiente v\u00eddeo explica el proceso: Pregunta de Ejemplo Para este ejemplo, trabajaremos con un sencillo problema de integraci\u00f3n. A continuaci\u00f3n se muestra un conjunto t\u00edpico de ejercicios de pr\u00e1ctica. Centr\u00e9monos en el problema de encontrar (\\int 3(x-1)^{-4} \\mathrm{d}x). Cree una nueva pregunta STACK. Como antes, daremos a nuestra pregunta un nombre de pregunta , digamos \"Ejemplo de integraci\u00f3n\". Uso de variables de pregunta Los siguientes pasos ser\u00edan a\u00f1adir el texto de la pregunta y, a continuaci\u00f3n, a\u00f1adir la respuesta del profesor -1*(x-1)^(-3)+c al campo respuesta modelo y al \u00e1rbol de respuestas potenciales . Sin embargo, normalmente se har\u00e1 referencia a la expresi\u00f3n y a la respuesta modelo m\u00e1s de una vez, por lo que suele ser m\u00e1s f\u00e1cil asignarlas a \"variables de pregunta\" utilizando el campo opcional Variables de la pregunta . A\u00f1ada lo siguiente a las variables de la pregunta exp: 3*(x-1)^(-4); ta: int(exp,x)+c; La codificaci\u00f3n de las variables en cuesti\u00f3n se basa en Maxima, que tiene una sintaxis inusual para la asignaci\u00f3n. En particular, los dos puntos : se utilizan para asignar un valor a una variable. As\u00ed, para asignar el valor 5 a a1 , utilizamos la sintaxis a1:5 . En general, es una buena pr\u00e1ctica asignar nombres de varios caracteres a las variables, ya que los nombres de un solo car\u00e1cter est\u00e1n pensados para ser introducidos por los alumnos. Esto se debe a que las variables de varios caracteres definidas por el autor no pueden ser introducidas por defecto por los alumnos. Adem\u00e1s, a\u00f1adir punto y coma al final de cada l\u00ednea es opcional, pero una buena pr\u00e1ctica. Observe que estamos utilizando el CAS para determinar la respuesta del modelo llamando a la funci\u00f3n int() para encontrar la antiderivada. Cuando el CAS determina una antiderivada, no incluye una constante de integraci\u00f3n, por lo que tenemos que a\u00f1adirla nosotros mismos. Ahora ser\u00e1 mucho m\u00e1s r\u00e1pido rellenar el resto de la pregunta. A\u00f1ade lo siguiente al texto de la pregunta: Encuentre \\(\\int{@exp@} \\mathrm{d}x\\) [[input:ans1]] [[validation:ans1]] Observe que hemos definido una variable local exp , y utilizado el valor de la misma en el texto de la Pregunta. Hay una diferencia entre las matem\u00e1ticas encerradas entre s\u00edmbolos \\(..\\) y s\u00edmbolos {@..@} . Todos los campos basados en texto de la pregunta, incluida la retroalimentaci\u00f3n, son texto CAS . Se trata de HTML en el que se pueden insertar las matem\u00e1ticas. LaTeX se coloca entre \\(..\\) s, y las expresiones CAS (incluyendo sus variables) entre s\u00edmbolos coincidentes {@..@} . Las expresiones CAS se eval\u00faan en el contexto de las variables de la pregunta y se muestran como LaTeX. Dado que aqu\u00ed hemos utilizado {@exp@} , el usuario no ver\u00e1 un (exp) en la pantalla cuando se instancie la pregunta, sino el valor mostrado de exp : (\\frac{3}{(x-1)^{-4}}) En la entrada ans1 , especifica la respuesta modelo como la variable ta . En el \u00e1rbol de respuestas potenciales, ponga Answer test en AlgEquiv , ponga SAns en ans1 y ponga TAns en ta . Es una buena pr\u00e1ctica utilizar variables de pregunta a menudo, ya que ahorran tiempo y le permiten cambiar las propiedades de la pregunta f\u00e1cilmente en el futuro. Pr\u00f3ximo paso Ahora deber\u00eda poder utilizar variables de pregunta en STACK. La siguiente parte de la gu\u00eda Autor\u00eda inicio r\u00e1pido se centra en mejorar la retroalimentaci\u00f3n .","title":"Autor\u00eda inicio r\u00e1pido 2: variables de la pregunta"},{"location":"AbInitio/Authoring_quick_start_2/#autoria-inicio-rapido-2-variables-de-la-pregunta","text":"1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios Esta parte de la gu\u00eda r\u00e1pida de creaci\u00f3n trata sobre el uso de variables de pregunta. El siguiente v\u00eddeo explica el proceso:","title":"Autor\u00eda inicio r\u00e1pido 2: variables de la pregunta"},{"location":"AbInitio/Authoring_quick_start_2/#pregunta-de-ejemplo","text":"Para este ejemplo, trabajaremos con un sencillo problema de integraci\u00f3n. A continuaci\u00f3n se muestra un conjunto t\u00edpico de ejercicios de pr\u00e1ctica. Centr\u00e9monos en el problema de encontrar (\\int 3(x-1)^{-4} \\mathrm{d}x). Cree una nueva pregunta STACK. Como antes, daremos a nuestra pregunta un nombre de pregunta , digamos \"Ejemplo de integraci\u00f3n\".","title":"Pregunta de Ejemplo"},{"location":"AbInitio/Authoring_quick_start_2/#uso-de-variables-de-pregunta","text":"Los siguientes pasos ser\u00edan a\u00f1adir el texto de la pregunta y, a continuaci\u00f3n, a\u00f1adir la respuesta del profesor -1*(x-1)^(-3)+c al campo respuesta modelo y al \u00e1rbol de respuestas potenciales . Sin embargo, normalmente se har\u00e1 referencia a la expresi\u00f3n y a la respuesta modelo m\u00e1s de una vez, por lo que suele ser m\u00e1s f\u00e1cil asignarlas a \"variables de pregunta\" utilizando el campo opcional Variables de la pregunta . A\u00f1ada lo siguiente a las variables de la pregunta exp: 3*(x-1)^(-4); ta: int(exp,x)+c; La codificaci\u00f3n de las variables en cuesti\u00f3n se basa en Maxima, que tiene una sintaxis inusual para la asignaci\u00f3n. En particular, los dos puntos : se utilizan para asignar un valor a una variable. As\u00ed, para asignar el valor 5 a a1 , utilizamos la sintaxis a1:5 . En general, es una buena pr\u00e1ctica asignar nombres de varios caracteres a las variables, ya que los nombres de un solo car\u00e1cter est\u00e1n pensados para ser introducidos por los alumnos. Esto se debe a que las variables de varios caracteres definidas por el autor no pueden ser introducidas por defecto por los alumnos. Adem\u00e1s, a\u00f1adir punto y coma al final de cada l\u00ednea es opcional, pero una buena pr\u00e1ctica. Observe que estamos utilizando el CAS para determinar la respuesta del modelo llamando a la funci\u00f3n int() para encontrar la antiderivada. Cuando el CAS determina una antiderivada, no incluye una constante de integraci\u00f3n, por lo que tenemos que a\u00f1adirla nosotros mismos. Ahora ser\u00e1 mucho m\u00e1s r\u00e1pido rellenar el resto de la pregunta. A\u00f1ade lo siguiente al texto de la pregunta: Encuentre \\(\\int{@exp@} \\mathrm{d}x\\) [[input:ans1]] [[validation:ans1]] Observe que hemos definido una variable local exp , y utilizado el valor de la misma en el texto de la Pregunta. Hay una diferencia entre las matem\u00e1ticas encerradas entre s\u00edmbolos \\(..\\) y s\u00edmbolos {@..@} . Todos los campos basados en texto de la pregunta, incluida la retroalimentaci\u00f3n, son texto CAS . Se trata de HTML en el que se pueden insertar las matem\u00e1ticas. LaTeX se coloca entre \\(..\\) s, y las expresiones CAS (incluyendo sus variables) entre s\u00edmbolos coincidentes {@..@} . Las expresiones CAS se eval\u00faan en el contexto de las variables de la pregunta y se muestran como LaTeX. Dado que aqu\u00ed hemos utilizado {@exp@} , el usuario no ver\u00e1 un (exp) en la pantalla cuando se instancie la pregunta, sino el valor mostrado de exp : (\\frac{3}{(x-1)^{-4}}) En la entrada ans1 , especifica la respuesta modelo como la variable ta . En el \u00e1rbol de respuestas potenciales, ponga Answer test en AlgEquiv , ponga SAns en ans1 y ponga TAns en ta . Es una buena pr\u00e1ctica utilizar variables de pregunta a menudo, ya que ahorran tiempo y le permiten cambiar las propiedades de la pregunta f\u00e1cilmente en el futuro.","title":"Uso de variables de pregunta"},{"location":"AbInitio/Authoring_quick_start_2/#proximo-paso","text":"Ahora deber\u00eda poder utilizar variables de pregunta en STACK.","title":"Pr\u00f3ximo paso"},{"location":"AbInitio/Authoring_quick_start_2/#la-siguiente-parte-de-la-guia-autoria-inicio-rapido-se-centra-en-mejorar-la-retroalimentacion","text":"","title":"La siguiente parte de la gu\u00eda Autor\u00eda inicio r\u00e1pido se centra en mejorar la retroalimentaci\u00f3n."},{"location":"AbInitio/Authoring_quick_start_3/","text":"Autor\u00eda inicio r\u00e1pido 3: mejorar la retroalimentaci\u00f3n 1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios Esta parte de la Gu\u00eda Autor\u00eda inicio r\u00e1pido trata de la mejora de la retroalimentaci\u00f3n. El siguiente v\u00eddeo explica el proceso: Introducci\u00f3n En la \u00faltima parte empezamos a trabajar con variables de pregunta. En concreto, definimos la variable exp para la expresi\u00f3n a integrar, y ta para la respuesta del profesor. Luego pedimos al alumno que hallara (\\int 3(x-1)^{-4}dx). Prueba a previsualizar esta pregunta y escribe -1*(x-1)^(-3)+c . El sistema deber\u00eda aceptarlo como correcto. A continuaci\u00f3n, escribe -1*(x-1)^(-3)+C . Se comparar\u00e1 con la respuesta del profesor -1*(x-1)^(-3)+c por equivalencia algebraica (recuerde que especificamos AlgEquiv en el \u00e1rbol de respuestas potenciales), y no se aceptar\u00e1 como equivalente. La raz\u00f3n es que \"c\" y \"C\" son diferentes. A un profesor razonable probablemente no le importar\u00e1 qu\u00e9 letra se utiliza para la constante de integraci\u00f3n. Solucionemos este problema. Test de respuestas: Int Tendremos que editar el \u00e1rbol de respuestas potenciales para utilizar una mejor prueba de respuesta . Vuelva a la p\u00e1gina \"Editar una pregunta STACK\". Busque la configuraci\u00f3n de su \u00e1rbol de respuesta potencial, haga clic en el men\u00fa desplegable donde seleccionamos AlgEquiv y seleccione Int de la lista. Escriba x (la variable) en la opci\u00f3n Opciones de prueba. Ahora pulse el bot\u00f3n [Guardar cambios y continuar editando] y una vez m\u00e1s pulse el bot\u00f3n vista previa. Acabamos de seleccionar un test de respuesta especial para tratar las preguntas de integraci\u00f3n. La prueba de respuesta Int aceptar\u00e1 cualquier nombre de variable para la constante de integraci\u00f3n. Por ejemplo, intente escribir -(x-1)^(-3)+k . El sistema deber\u00eda aceptarlo como correcto. Tambi\u00e9n dar\u00e1 una respuesta est\u00e1ndar si el estudiante olvida una constante de integraci\u00f3n o accidentalmente diferencia en su lugar. Para probarlo, escriba -12*(x-1)^(-5) . Si no desea que los estudiantes vean la respuesta autom\u00e1tica, seleccione la opci\u00f3n Silencio en el nodo de respuesta potencial. La Nota de respuesta de un resultado es un nombre dado a ese resultado espec\u00edfico. STACK las generar\u00e1 autom\u00e1ticamente con informaci\u00f3n sobre el \u00e1rbol de respuesta potencial, el n\u00famero de nodo y el resultado del nodo. Consideraciones Al comprobar la respuesta de un alumno con STACK, un profesor debe preguntarse \"\u00bfCu\u00e1les son las propiedades matem\u00e1ticas que hacen que la respuesta de un alumno sea correcta/incorrecta?\" En nuestro caso, estas preguntas incluyen: \u00bfEs la respuesta del alumno una antiderivada simb\u00f3lica del integrando? \u00bfTiene el alumno una constante de integraci\u00f3n de forma adecuada? El test de respuesta int incorporado responde a estas preguntas, por lo que un profesor no tiene que escribir c\u00f3digo para hacerlo en cada pregunta de integraci\u00f3n. A continuaci\u00f3n, el profesor debe preguntarse: \"\u00bfQu\u00e9 podr\u00eda hacer un alumno de forma incorrecta y qu\u00e9 le dar\u00eda esto como respuesta? La respuesta puede venir de la experiencia o de las preguntas de diagn\u00f3stico. Suele ser sensato revisar las respuestas de los alumnos a las preguntas STACK al cabo de un a\u00f1o e incorporar una mejor retroalimentaci\u00f3n a la luz de las experiencias. Mejorar a\u00fan m\u00e1s la retroalimentaci\u00f3n Para cada error que pensemos que pueden cometer los alumnos, podemos crear una prueba de respuesta. Por ejemplo, podemos esperar que los alumnos dejen su respuesta en forma expandida. Por supuesto, \u00e9sta seguir\u00eda siendo una respuesta correcta, pero queremos evitar que los alumnos ampl\u00eden innecesariamente su respuesta. Creemos otro nodo que compruebe si el alumno ha dejado su respuesta final en forma factorizada. Hacemos esto a\u00f1adiendo otro nodo de respuesta potencial. Vaya al \u00e1rbol de respuestas potenciales y pulse [Agregar otro nodo] . A continuaci\u00f3n, en la rama True del Nodo 1, cambie en el campo Siguiente por Nodo 2 . Si entramos en el Nodo 2, sabemos que el alumno tiene la respuesta correcta y s\u00f3lo necesitamos establecer si est\u00e1 factorizada o no. Para establecer esto necesitamos usar el FacForm answer test . Este test comprueba que SAns y TAns son equivalentes y que SAns est\u00e1 factorizado. En este caso ya sabemos que la respuesta del alumno es equivalente a la respuesta del profesor (usando el algoritmo mejor adaptado de Int ). Por lo tanto, podemos comprobar la respuesta del alumno contra s\u00ed misma. Actualiza el formulario para que el Nodo 2 tenga Prueba = FacForm SAns = strip_int_const(ans1,x) TAns = strip_int_const(ans1,x) Opciones = x STACK proporciona una funci\u00f3n strip_int_const para eliminar cualquier constante de integraci\u00f3n que el alumno haya podido utilizar. De nuevo tenemos que especificar la variable en Opciones . Aseg\u00farese de que los resultados de Verdadero y Falso no cambian la puntuaci\u00f3n. Por defecto se establecer\u00e1n en +0 y -0 , respectivamente. Al no cambiar la puntuaci\u00f3n, nos aseguramos de que los estudiantes no son penalizados por dar su respuesta en forma expandida. FacForm da feedback autom\u00e1tico, pero si quieres escribir el tuyo propio puedes poner Silencio en S\u00ed y escribir algo como lo siguiente en Retroalimentaci\u00f3n rama falsa : Tu respuesta no est\u00e1 factorizada. Bien hecho por obtener la respuesta correcta, pero recuerda que no es necesario ampliar los par\u00e9ntesis. Puede seguir ampliando su posible \u00e1rbol de respuestas, comprobando tantos errores comunes como desee. Consulte la documentaci\u00f3n para obtener informaci\u00f3n sobre m\u00e1s pruebas de respuesta. A\u00f1adir un comentario general La Retroalimentaci\u00f3n general se muestra a todos los estudiantes, independientemente de si han acertado o no la pregunta. Este es un buen lugar para a\u00f1adir una soluci\u00f3n completa. Suguiente paso Ahora deber\u00eda poder crear comentarios espec\u00edficos en STACK. La siguiente parte de la gu\u00eda Autor\u00eda inicio r\u00e1pido se centra en la aleatorizaci\u00f3n .","title":"Autor\u00eda inicio r\u00e1pido 3: mejorar la retroalimentaci\u00f3n"},{"location":"AbInitio/Authoring_quick_start_3/#autoria-inicio-rapido-3-mejorar-la-retroalimentacion","text":"1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios Esta parte de la Gu\u00eda Autor\u00eda inicio r\u00e1pido trata de la mejora de la retroalimentaci\u00f3n. El siguiente v\u00eddeo explica el proceso:","title":"Autor\u00eda inicio r\u00e1pido 3: mejorar la retroalimentaci\u00f3n"},{"location":"AbInitio/Authoring_quick_start_3/#introduccion","text":"En la \u00faltima parte empezamos a trabajar con variables de pregunta. En concreto, definimos la variable exp para la expresi\u00f3n a integrar, y ta para la respuesta del profesor. Luego pedimos al alumno que hallara (\\int 3(x-1)^{-4}dx). Prueba a previsualizar esta pregunta y escribe -1*(x-1)^(-3)+c . El sistema deber\u00eda aceptarlo como correcto. A continuaci\u00f3n, escribe -1*(x-1)^(-3)+C . Se comparar\u00e1 con la respuesta del profesor -1*(x-1)^(-3)+c por equivalencia algebraica (recuerde que especificamos AlgEquiv en el \u00e1rbol de respuestas potenciales), y no se aceptar\u00e1 como equivalente. La raz\u00f3n es que \"c\" y \"C\" son diferentes. A un profesor razonable probablemente no le importar\u00e1 qu\u00e9 letra se utiliza para la constante de integraci\u00f3n. Solucionemos este problema.","title":"Introducci\u00f3n"},{"location":"AbInitio/Authoring_quick_start_3/#test-de-respuestas-int","text":"Tendremos que editar el \u00e1rbol de respuestas potenciales para utilizar una mejor prueba de respuesta . Vuelva a la p\u00e1gina \"Editar una pregunta STACK\". Busque la configuraci\u00f3n de su \u00e1rbol de respuesta potencial, haga clic en el men\u00fa desplegable donde seleccionamos AlgEquiv y seleccione Int de la lista. Escriba x (la variable) en la opci\u00f3n Opciones de prueba. Ahora pulse el bot\u00f3n [Guardar cambios y continuar editando] y una vez m\u00e1s pulse el bot\u00f3n vista previa. Acabamos de seleccionar un test de respuesta especial para tratar las preguntas de integraci\u00f3n. La prueba de respuesta Int aceptar\u00e1 cualquier nombre de variable para la constante de integraci\u00f3n. Por ejemplo, intente escribir -(x-1)^(-3)+k . El sistema deber\u00eda aceptarlo como correcto. Tambi\u00e9n dar\u00e1 una respuesta est\u00e1ndar si el estudiante olvida una constante de integraci\u00f3n o accidentalmente diferencia en su lugar. Para probarlo, escriba -12*(x-1)^(-5) . Si no desea que los estudiantes vean la respuesta autom\u00e1tica, seleccione la opci\u00f3n Silencio en el nodo de respuesta potencial. La Nota de respuesta de un resultado es un nombre dado a ese resultado espec\u00edfico. STACK las generar\u00e1 autom\u00e1ticamente con informaci\u00f3n sobre el \u00e1rbol de respuesta potencial, el n\u00famero de nodo y el resultado del nodo.","title":"Test de respuestas: Int"},{"location":"AbInitio/Authoring_quick_start_3/#consideraciones","text":"Al comprobar la respuesta de un alumno con STACK, un profesor debe preguntarse \"\u00bfCu\u00e1les son las propiedades matem\u00e1ticas que hacen que la respuesta de un alumno sea correcta/incorrecta?\" En nuestro caso, estas preguntas incluyen: \u00bfEs la respuesta del alumno una antiderivada simb\u00f3lica del integrando? \u00bfTiene el alumno una constante de integraci\u00f3n de forma adecuada? El test de respuesta int incorporado responde a estas preguntas, por lo que un profesor no tiene que escribir c\u00f3digo para hacerlo en cada pregunta de integraci\u00f3n. A continuaci\u00f3n, el profesor debe preguntarse: \"\u00bfQu\u00e9 podr\u00eda hacer un alumno de forma incorrecta y qu\u00e9 le dar\u00eda esto como respuesta? La respuesta puede venir de la experiencia o de las preguntas de diagn\u00f3stico. Suele ser sensato revisar las respuestas de los alumnos a las preguntas STACK al cabo de un a\u00f1o e incorporar una mejor retroalimentaci\u00f3n a la luz de las experiencias.","title":"Consideraciones"},{"location":"AbInitio/Authoring_quick_start_3/#mejorar-aun-mas-la-retroalimentacion","text":"Para cada error que pensemos que pueden cometer los alumnos, podemos crear una prueba de respuesta. Por ejemplo, podemos esperar que los alumnos dejen su respuesta en forma expandida. Por supuesto, \u00e9sta seguir\u00eda siendo una respuesta correcta, pero queremos evitar que los alumnos ampl\u00eden innecesariamente su respuesta. Creemos otro nodo que compruebe si el alumno ha dejado su respuesta final en forma factorizada. Hacemos esto a\u00f1adiendo otro nodo de respuesta potencial. Vaya al \u00e1rbol de respuestas potenciales y pulse [Agregar otro nodo] . A continuaci\u00f3n, en la rama True del Nodo 1, cambie en el campo Siguiente por Nodo 2 . Si entramos en el Nodo 2, sabemos que el alumno tiene la respuesta correcta y s\u00f3lo necesitamos establecer si est\u00e1 factorizada o no. Para establecer esto necesitamos usar el FacForm answer test . Este test comprueba que SAns y TAns son equivalentes y que SAns est\u00e1 factorizado. En este caso ya sabemos que la respuesta del alumno es equivalente a la respuesta del profesor (usando el algoritmo mejor adaptado de Int ). Por lo tanto, podemos comprobar la respuesta del alumno contra s\u00ed misma. Actualiza el formulario para que el Nodo 2 tenga Prueba = FacForm SAns = strip_int_const(ans1,x) TAns = strip_int_const(ans1,x) Opciones = x STACK proporciona una funci\u00f3n strip_int_const para eliminar cualquier constante de integraci\u00f3n que el alumno haya podido utilizar. De nuevo tenemos que especificar la variable en Opciones . Aseg\u00farese de que los resultados de Verdadero y Falso no cambian la puntuaci\u00f3n. Por defecto se establecer\u00e1n en +0 y -0 , respectivamente. Al no cambiar la puntuaci\u00f3n, nos aseguramos de que los estudiantes no son penalizados por dar su respuesta en forma expandida. FacForm da feedback autom\u00e1tico, pero si quieres escribir el tuyo propio puedes poner Silencio en S\u00ed y escribir algo como lo siguiente en Retroalimentaci\u00f3n rama falsa : Tu respuesta no est\u00e1 factorizada. Bien hecho por obtener la respuesta correcta, pero recuerda que no es necesario ampliar los par\u00e9ntesis. Puede seguir ampliando su posible \u00e1rbol de respuestas, comprobando tantos errores comunes como desee. Consulte la documentaci\u00f3n para obtener informaci\u00f3n sobre m\u00e1s pruebas de respuesta.","title":"Mejorar a\u00fan m\u00e1s la retroalimentaci\u00f3n"},{"location":"AbInitio/Authoring_quick_start_3/#anadir-un-comentario-general","text":"La Retroalimentaci\u00f3n general se muestra a todos los estudiantes, independientemente de si han acertado o no la pregunta. Este es un buen lugar para a\u00f1adir una soluci\u00f3n completa.","title":"A\u00f1adir un comentario general"},{"location":"AbInitio/Authoring_quick_start_3/#suguiente-paso","text":"Ahora deber\u00eda poder crear comentarios espec\u00edficos en STACK.","title":"Suguiente paso"},{"location":"AbInitio/Authoring_quick_start_3/#la-siguiente-parte-de-la-guia-autoria-inicio-rapido-se-centra-en-la-aleatorizacion","text":"","title":"La siguiente parte de la gu\u00eda Autor\u00eda inicio r\u00e1pido se centra en la aleatorizaci\u00f3n."},{"location":"AbInitio/Authoring_quick_start_4/","text":"Autor\u00eda inicio r\u00e1pido 4: aleatorizaci\u00f3n 1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios This part of the authoring quick start guide deals with randomisation. The following video explains the process: Introduction In the last part, we worked with a problem about integrating (3(x-1)^{-4}) with respect to x. However, we do not want every student to get the exact same question, as that would allow them to share answers! To solve this problem, we need to randomise the question. Random questions Let's take a look again at the question variables we declared: exp: 3*(x-1)^(-4); ta: int(exp,x)+c; We defined two local variables exp and ta , and used these values in other places such as the question text, input and potential response tree. We are now in a position to generate a random question. To do this, modify the question variables to be a1 : 1+rand(6); a2 : 1+rand(6); nn : 1+rand(4); exp : a1*(x-a2)^(-nn); ta: int(exp, x)+c; In this new question we are asking the student to find the anti-derivative of a question with a definite form ( a_1(x-a_2)^{-nn} ). a1 , a2 and nn are all variables which are assigned random positive integers. These are then used to define the variable exp , used in the question itself. We also have the CAS integrate the expression exp and store the result in the variable ta . It is good practice to use variables names with more than one character as single-character variables, like x , are meant for student input. Remember that when generating random questions in STACK we talk about random numbers when we really mean pseudo-random numbers . To keep track of which random numbers are generated for each user, there is a special rand command in STACK, which you should use instead of Maxima 's random command. The rand command is a general \"random thing\" generator, see the page on random generation for full details. rand can be used to generate random numbers and also to make selections from a list. rand(n) will select a random integer from 0 up to, and not including , n . So rand(3) will select a random number from the list [0,1,2] . Question note Now that as our question contains random numbers, we need to record the actual question variant seen by a particular student. As soon as we use the rand function, STACK forces us to add a Question note . Fill the question note in as \\[ \\int {@exp@} \\mathrm{d}x = {@ta@}.\\] Two question variants are considered to be the same if and only if the question note is the same. It is the teacher's responsibility to create sensible notes. Deploying random variants Before a student sees the questions, it is sensible to deploy random variants. This controls exactly which variants are shown to a student and lets you check that the randomisation is sensible. Scroll to the top of your question and click on the link No variants of this question have been deployed yet . This link might say Question tests & deployed variants in older versions of STACK, and once you have deployed some variants. To ask STACK to generate a number of question variants, you need Attempt to automatically deploy the following number of variants: . Select, for example, 10 and press Go . You should then be able to see 10 random variants of the question. Now students will only be shown one of these. You also have the option to remove any variants that you don't like. For example, you might not like the variants where nn=1, as these have answers involving logarithms. Hence, you could cross out all these variants. Perhaps a better solution is to return to your Question variables and change nn to 2+rand(4) . When you save and go back to Question tests & deployed variants , you will see your variants changed. This illustrates a key use of deployed variants: checking for unintentional consequences of the randomisation. Preview options Try previewing your question. As previously mentioned (in part 1 of the Quick Start tutorial), under Attempt options (or Preview options ), you have the option to change the question behaviour. Adaptive mode is the most useful one for question testing, as it allows you to check questions repeatedly. We will discuss question behaviours in more detail later. However, notice also that you can choose which deployed Question variant you are answering. This is useful if you want to test a specific variant. Next step You should now be able to make and deploy random questions in STACK. The next part of the authoring quick start guide looks at question tests .","title":"Autor\u00eda inicio r\u00e1pido 4: aleatorizaci\u00f3n"},{"location":"AbInitio/Authoring_quick_start_4/#autoria-inicio-rapido-4-aleatorizacion","text":"1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios This part of the authoring quick start guide deals with randomisation. The following video explains the process:","title":"Autor\u00eda inicio r\u00e1pido 4: aleatorizaci\u00f3n"},{"location":"AbInitio/Authoring_quick_start_4/#introduction","text":"In the last part, we worked with a problem about integrating (3(x-1)^{-4}) with respect to x. However, we do not want every student to get the exact same question, as that would allow them to share answers! To solve this problem, we need to randomise the question.","title":"Introduction"},{"location":"AbInitio/Authoring_quick_start_4/#random-questions","text":"Let's take a look again at the question variables we declared: exp: 3*(x-1)^(-4); ta: int(exp,x)+c; We defined two local variables exp and ta , and used these values in other places such as the question text, input and potential response tree. We are now in a position to generate a random question. To do this, modify the question variables to be a1 : 1+rand(6); a2 : 1+rand(6); nn : 1+rand(4); exp : a1*(x-a2)^(-nn); ta: int(exp, x)+c; In this new question we are asking the student to find the anti-derivative of a question with a definite form ( a_1(x-a_2)^{-nn} ). a1 , a2 and nn are all variables which are assigned random positive integers. These are then used to define the variable exp , used in the question itself. We also have the CAS integrate the expression exp and store the result in the variable ta . It is good practice to use variables names with more than one character as single-character variables, like x , are meant for student input. Remember that when generating random questions in STACK we talk about random numbers when we really mean pseudo-random numbers . To keep track of which random numbers are generated for each user, there is a special rand command in STACK, which you should use instead of Maxima 's random command. The rand command is a general \"random thing\" generator, see the page on random generation for full details. rand can be used to generate random numbers and also to make selections from a list. rand(n) will select a random integer from 0 up to, and not including , n . So rand(3) will select a random number from the list [0,1,2] .","title":"Random questions"},{"location":"AbInitio/Authoring_quick_start_4/#question-note","text":"Now that as our question contains random numbers, we need to record the actual question variant seen by a particular student. As soon as we use the rand function, STACK forces us to add a Question note . Fill the question note in as \\[ \\int {@exp@} \\mathrm{d}x = {@ta@}.\\] Two question variants are considered to be the same if and only if the question note is the same. It is the teacher's responsibility to create sensible notes.","title":"Question note"},{"location":"AbInitio/Authoring_quick_start_4/#deploying-random-variants","text":"Before a student sees the questions, it is sensible to deploy random variants. This controls exactly which variants are shown to a student and lets you check that the randomisation is sensible. Scroll to the top of your question and click on the link No variants of this question have been deployed yet . This link might say Question tests & deployed variants in older versions of STACK, and once you have deployed some variants. To ask STACK to generate a number of question variants, you need Attempt to automatically deploy the following number of variants: . Select, for example, 10 and press Go . You should then be able to see 10 random variants of the question. Now students will only be shown one of these. You also have the option to remove any variants that you don't like. For example, you might not like the variants where nn=1, as these have answers involving logarithms. Hence, you could cross out all these variants. Perhaps a better solution is to return to your Question variables and change nn to 2+rand(4) . When you save and go back to Question tests & deployed variants , you will see your variants changed. This illustrates a key use of deployed variants: checking for unintentional consequences of the randomisation.","title":"Deploying random variants"},{"location":"AbInitio/Authoring_quick_start_4/#preview-options","text":"Try previewing your question. As previously mentioned (in part 1 of the Quick Start tutorial), under Attempt options (or Preview options ), you have the option to change the question behaviour. Adaptive mode is the most useful one for question testing, as it allows you to check questions repeatedly. We will discuss question behaviours in more detail later. However, notice also that you can choose which deployed Question variant you are answering. This is useful if you want to test a specific variant.","title":"Preview options"},{"location":"AbInitio/Authoring_quick_start_4/#next-step","text":"You should now be able to make and deploy random questions in STACK.","title":"Next step"},{"location":"AbInitio/Authoring_quick_start_4/#the-next-part-of-the-authoring-quick-start-guide-looks-at-question-tests","text":"","title":"The next part of the authoring quick start guide looks at question tests."},{"location":"AbInitio/Authoring_quick_start_5/","text":"Autor\u00eda inicio r\u00e1pido 5: test de preguntas 1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios This part of the authoring quick start guide deals with using question tests. The following video explains the process: Introduction In the last couple of parts, we have been working with a simple integration question. Before you continue, confirm that your question variables are set up as follows: a1 : 1+rand(6); a2 : 1+rand(6); nn : 2+rand(4); exp : a1*(x-a2)^(-nn); ta: int(exp, x)+c; Testing questions is time consuming and tedious, but important to ensure questions work. To help with this process, STACK enables teachers to define \"question tests\". The principle is the same as \"unit testing\" in software engineering. Question testing Scroll to the top of your question in the preview window and click on Question tests & deployed variants . In the last part we used this window to deploy random variants. Click Add a test case to add a test to your question. A test case takes a student input. You then specify what the expected outcome is for that input, namely the score, penalty and answer note you expect to land on. Recall from the last part that the Answer note is the name for a specific outcome on a potential response tree. The penalty is a number deducted from the total mark for each incorrect attempt the student has. By default, it is set to 0.1. You can change the penalty in the General section under Penalty . Note that this feature is only used in the question behaviours Interactive with multiple tries and Adaptive mode , as they are the only ones that allow multiple attempts. We will discuss question behaviours in a later part. Fill in the following information for your first test case: ans1 = ta score = 1 penalty = 0 answernote = prt1-2-T I.e., if the student puts in the model answer they should pass the first node (checks if they have integrated correctly) and pass the second node (tests that their answer is factored) and end up with a score of 1 and no penalty. Note that the input is evaluated before the test is conducted. Students are not allowed to enter the variable ta because it is a teacher-defined variable, however the evaluated form, fx. -1*(x-1)^(-3)+c , is an allowed input. For each test case, you can see the un-evaluated input under Test input , and the actual input tested under Value entered . You can run the test on all deployed versions by clicking on Run all tests on all deployed variants . You can add as many tests as you think is needed, and it is usually a sensible idea to add one for each case you anticipate. Add in another test case for ans1 = int(exp,x) score = 0 penalty = 0.1 answernote = prt1-1-F Here we create a test case without a constant of integration. In this case STACK should fail to give students any marks, indicating the test passes! You should also use question tests to check that solving every variant requires the competences that you desire. For example, in this question we want students to know (1) increase the power by 1 and (2) divide by the new power. They should not be able to get away with, for example, increasing the power and multiplying by the new power. Let's add a test case to check this. ans1 = (a1*(-nn+1))*(x-a2)^(-nn+1)+c score = 0 penalty = 0.1 answernote = prt1-F We are testing that if we multiply by (-nn+1) instead of dividing, we should be given a score of 0. If students are required this knowledge for all variants, then all variants should pass this test. Click Run all tests on all deployed variants to check this. You will see that not all deployed versions pass all tests, and if you click on a variant that failed a test, you will see why! Essentially, when (nn=2), (-nn+1=-1) multiplication and division are equivalent. Essentially, these random variants are \"easier\" than the others. This illustrates another key use of question tests - ensuring that all variants are the same difficulty and test the knowledge they are supposed to. In light of this, you may want to change nn again to 3+rand(4) . Now all variants should pass all question tests. Quality control is essential, and more information is given in the page on testing . Aside: forbidden words STACK allows students to use standard mathematical functions, such as sin , cos , etc. Perhaps surprisingly, it also allows students to use int . So in theory, students could input int(...)+c , and the system would mark it correct! To stop this, go to input:ans1 and under forbidden words, enter int . Forbidden words will render words that are normally allowed invalid. This example nicely illustrates the way validity can be used to help students. An answer int(p,x)+c is a correct response to the question, but it is invalid. In this example we want them to perform integration, not have the CAS do it! Next step You should now be able to use question tests in STACK. The next part of the authoring quick start guide looks at multipart questions .","title":"Autor\u00eda inicio r\u00e1pido 5: test de preguntas"},{"location":"AbInitio/Authoring_quick_start_5/#autoria-inicio-rapido-5-test-de-preguntas","text":"1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios This part of the authoring quick start guide deals with using question tests. The following video explains the process:","title":"Autor\u00eda inicio r\u00e1pido 5: test de preguntas"},{"location":"AbInitio/Authoring_quick_start_5/#introduction","text":"In the last couple of parts, we have been working with a simple integration question. Before you continue, confirm that your question variables are set up as follows: a1 : 1+rand(6); a2 : 1+rand(6); nn : 2+rand(4); exp : a1*(x-a2)^(-nn); ta: int(exp, x)+c; Testing questions is time consuming and tedious, but important to ensure questions work. To help with this process, STACK enables teachers to define \"question tests\". The principle is the same as \"unit testing\" in software engineering.","title":"Introduction"},{"location":"AbInitio/Authoring_quick_start_5/#question-testing","text":"Scroll to the top of your question in the preview window and click on Question tests & deployed variants . In the last part we used this window to deploy random variants. Click Add a test case to add a test to your question. A test case takes a student input. You then specify what the expected outcome is for that input, namely the score, penalty and answer note you expect to land on. Recall from the last part that the Answer note is the name for a specific outcome on a potential response tree. The penalty is a number deducted from the total mark for each incorrect attempt the student has. By default, it is set to 0.1. You can change the penalty in the General section under Penalty . Note that this feature is only used in the question behaviours Interactive with multiple tries and Adaptive mode , as they are the only ones that allow multiple attempts. We will discuss question behaviours in a later part. Fill in the following information for your first test case: ans1 = ta score = 1 penalty = 0 answernote = prt1-2-T I.e., if the student puts in the model answer they should pass the first node (checks if they have integrated correctly) and pass the second node (tests that their answer is factored) and end up with a score of 1 and no penalty. Note that the input is evaluated before the test is conducted. Students are not allowed to enter the variable ta because it is a teacher-defined variable, however the evaluated form, fx. -1*(x-1)^(-3)+c , is an allowed input. For each test case, you can see the un-evaluated input under Test input , and the actual input tested under Value entered . You can run the test on all deployed versions by clicking on Run all tests on all deployed variants . You can add as many tests as you think is needed, and it is usually a sensible idea to add one for each case you anticipate. Add in another test case for ans1 = int(exp,x) score = 0 penalty = 0.1 answernote = prt1-1-F Here we create a test case without a constant of integration. In this case STACK should fail to give students any marks, indicating the test passes! You should also use question tests to check that solving every variant requires the competences that you desire. For example, in this question we want students to know (1) increase the power by 1 and (2) divide by the new power. They should not be able to get away with, for example, increasing the power and multiplying by the new power. Let's add a test case to check this. ans1 = (a1*(-nn+1))*(x-a2)^(-nn+1)+c score = 0 penalty = 0.1 answernote = prt1-F We are testing that if we multiply by (-nn+1) instead of dividing, we should be given a score of 0. If students are required this knowledge for all variants, then all variants should pass this test. Click Run all tests on all deployed variants to check this. You will see that not all deployed versions pass all tests, and if you click on a variant that failed a test, you will see why! Essentially, when (nn=2), (-nn+1=-1) multiplication and division are equivalent. Essentially, these random variants are \"easier\" than the others. This illustrates another key use of question tests - ensuring that all variants are the same difficulty and test the knowledge they are supposed to. In light of this, you may want to change nn again to 3+rand(4) . Now all variants should pass all question tests. Quality control is essential, and more information is given in the page on testing .","title":"Question testing"},{"location":"AbInitio/Authoring_quick_start_5/#aside-forbidden-words","text":"STACK allows students to use standard mathematical functions, such as sin , cos , etc. Perhaps surprisingly, it also allows students to use int . So in theory, students could input int(...)+c , and the system would mark it correct! To stop this, go to input:ans1 and under forbidden words, enter int . Forbidden words will render words that are normally allowed invalid. This example nicely illustrates the way validity can be used to help students. An answer int(p,x)+c is a correct response to the question, but it is invalid. In this example we want them to perform integration, not have the CAS do it!","title":"Aside: forbidden words"},{"location":"AbInitio/Authoring_quick_start_5/#next-step","text":"You should now be able to use question tests in STACK.","title":"Next step"},{"location":"AbInitio/Authoring_quick_start_5/#the-next-part-of-the-authoring-quick-start-guide-looks-at-multipart-questions","text":"","title":"The next part of the authoring quick start guide looks at multipart questions."},{"location":"AbInitio/Authoring_quick_start_6/","text":"Autor\u00eda inicio r\u00e1pido 6: preguntas de varias partes 1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios This part of the authoring quick start guide deals with authoring multipart questions. The following video explains the process: Consider the following examples: Example 1 Find the equation of the line tangent to (x^3-2x^2+x) at the point (x=2). Differentiate (x^3-2x^2+x) with respect to (x). Evaluate your derivative at (x=2). Hence, find the equation of the tangent line. (y=...) Since all three parts refer to one polynomial, if randomly generated questions are being used, then each of these parts needs to reference a single randomly generated equation. Hence parts 1.-3. really form one item. Notice here that part 1. is independent of the others. Part 2. requires both the first and second inputs. Part 3. could easily be marked independently, or take into account parts 1 & 2. Notice also that the teacher may choose to award \"follow on\" marking. Example 2 Consider the following question, asked to relatively young school students. Expand ((x+1)(x+2)). In the context it is to be used, it is appropriate to provide students with the opportunity to \"fill in the blanks\" in the following equation: (x+1)(x+2) = [?] x2 + [?] x + [?]. We argue this is really \"one question\" with \"three inputs\". Furthermore, it is likely that the teacher will want the student to complete all boxes before any feedback is assigned, even if separate feedback is generated for each input (i.e. coefficient). This feedback should all be grouped in one place on the screen. Furthermore, in order to identify the possible causes of algebraic mistakes, an automatic marking procedure will require all coefficients simultaneously. It is not satisfactory to have three totally independent marking procedures. These two examples illustrate two extreme positions. All inputs within a single multipart item can be assessed independently. All inputs within a single multipart item must be completed before the item can be scored. Devising multipart questions which satisfy these two extreme positions would be relatively straightforward. However, it is more common to have multipart questions which are between these extremes, as in the case of our first example. Authoring a multipart question Start a new STACK question, and give the question a name, e.g. \"Tangent lines\". This question will have three parts. Start by copying the question variables and question text as follows. Notice that we have not included any randomisation, but we have used variable names at the outset to facilitate this at a later stage. Question variables: exp:x^3-2*x^2+x; pt:2; ta1:diff(exp,x); ta2:subst(x=pt,ta1); ta3:remainder(exp,(x-pt)^2); Question text Copy the following text into the editor. Find the equation of the line tangent to {@exp@} at the point \\(x={@pt@}\\). 1. Differentiate {@exp@} with respect to \\(x\\). [[input:ans1]] [[validation:ans1]] [[feedback:prt1]] 2. Evaluate your derivative at \\(x={@pt@}\\). [[input:ans2]] [[validation:ans2]] [[feedback:prt2]] 3. Hence, find the equation of the tangent line. \\(y=\\)[[input:ans3]] [[validation:ans3]] [[feedback:prt3]] Fill in the answer for ans1 (which exists by default) and remove the feedback tag from the \"specific feedback\" section. We choose to embed feedback within parts of this question, so that relevant feedback is shown directly underneath the relevant part. Notice there is one potential response tree for each \"part\". Update the form by saving your changes, and then ensure the Model Answers are filled in as ta1 , ta2 and ta3 . STACK creates three potential response trees by detecting the feedback tags automatically. Next we need to edit potential response trees. These will establish the properties of the student's answers. Stage 1: a working potential response tree The first stage is to include the simplest potential response trees. These will simply ensure that answers are \"correct\". In each potential response tree, make sure to test that (\\mbox{ans}_i) is algebraically equivalent to (\\mbox{ta}_i), for (i=1,2,3). At this stage we have a working question. Save it and preview the question. For reference, the correct answers are ta1 = 3*x^2-4*x+1 ta2 = 5 ta3 = 5*x-8 Stage 2: follow-through marking Next we will implement simple follow-through marking. Look carefully at part 2. This does not ask for the \"correct answer\", only that the student has evaluated the expression in part 1 correctly at the right point. So the first task is to establish this property by evaluating the answer given in the first part, and comparing it with the second part. Update node 1 of prt2 to the following: Answer test: AlgEquiv SAns: ans2 TAns: subst(x=pt,ans1) Next, add a single node (to prt2 ) with the following: Answer test: AlgEquiv SAns: ans1 TAns: ta1 We now link the true branch of node 1 to node 2 (of prt2 ). This gives us three outcomes. Node 1: did they evaluate their expression in part 1 correctly? If \"yes\", then go to node 2, else if \"no\", then exit with no marks. Node 2: did they get part 1 correct? if \"yes\" then this is the ideal situation, full marks. If \"no\" then choose marks as suit your taste in this situation, and add some feedback, such as the following: You have correctly evaluated your answer to part 1 at the given point, but your answer to part 1 is wrong. Please try both parts again. Next step You should now be able to make a multipart question in STACK. If you have been following this quick-start guide, you should already know some steps you can take to improve this question. For example, you could add more specific feedback , randomise your question and add question tests . The next part of the authoring quick start guide looks at turning simplification off .","title":"Autor\u00eda inicio r\u00e1pido 6: preguntas de varias partes"},{"location":"AbInitio/Authoring_quick_start_6/#autoria-inicio-rapido-6-preguntas-de-varias-partes","text":"1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios This part of the authoring quick start guide deals with authoring multipart questions. The following video explains the process: Consider the following examples:","title":"Autor\u00eda inicio r\u00e1pido 6: preguntas de varias partes"},{"location":"AbInitio/Authoring_quick_start_6/#example-1","text":"Find the equation of the line tangent to (x^3-2x^2+x) at the point (x=2). Differentiate (x^3-2x^2+x) with respect to (x). Evaluate your derivative at (x=2). Hence, find the equation of the tangent line. (y=...) Since all three parts refer to one polynomial, if randomly generated questions are being used, then each of these parts needs to reference a single randomly generated equation. Hence parts 1.-3. really form one item. Notice here that part 1. is independent of the others. Part 2. requires both the first and second inputs. Part 3. could easily be marked independently, or take into account parts 1 & 2. Notice also that the teacher may choose to award \"follow on\" marking.","title":"Example 1"},{"location":"AbInitio/Authoring_quick_start_6/#example-2","text":"Consider the following question, asked to relatively young school students. Expand ((x+1)(x+2)). In the context it is to be used, it is appropriate to provide students with the opportunity to \"fill in the blanks\" in the following equation: (x+1)(x+2) = [?] x2 + [?] x + [?]. We argue this is really \"one question\" with \"three inputs\". Furthermore, it is likely that the teacher will want the student to complete all boxes before any feedback is assigned, even if separate feedback is generated for each input (i.e. coefficient). This feedback should all be grouped in one place on the screen. Furthermore, in order to identify the possible causes of algebraic mistakes, an automatic marking procedure will require all coefficients simultaneously. It is not satisfactory to have three totally independent marking procedures. These two examples illustrate two extreme positions. All inputs within a single multipart item can be assessed independently. All inputs within a single multipart item must be completed before the item can be scored. Devising multipart questions which satisfy these two extreme positions would be relatively straightforward. However, it is more common to have multipart questions which are between these extremes, as in the case of our first example.","title":"Example 2"},{"location":"AbInitio/Authoring_quick_start_6/#authoring-a-multipart-question","text":"Start a new STACK question, and give the question a name, e.g. \"Tangent lines\". This question will have three parts. Start by copying the question variables and question text as follows. Notice that we have not included any randomisation, but we have used variable names at the outset to facilitate this at a later stage. Question variables: exp:x^3-2*x^2+x; pt:2; ta1:diff(exp,x); ta2:subst(x=pt,ta1); ta3:remainder(exp,(x-pt)^2); Question text Copy the following text into the editor. Find the equation of the line tangent to {@exp@} at the point \\(x={@pt@}\\). 1. Differentiate {@exp@} with respect to \\(x\\). [[input:ans1]] [[validation:ans1]] [[feedback:prt1]] 2. Evaluate your derivative at \\(x={@pt@}\\). [[input:ans2]] [[validation:ans2]] [[feedback:prt2]] 3. Hence, find the equation of the tangent line. \\(y=\\)[[input:ans3]] [[validation:ans3]] [[feedback:prt3]] Fill in the answer for ans1 (which exists by default) and remove the feedback tag from the \"specific feedback\" section. We choose to embed feedback within parts of this question, so that relevant feedback is shown directly underneath the relevant part. Notice there is one potential response tree for each \"part\". Update the form by saving your changes, and then ensure the Model Answers are filled in as ta1 , ta2 and ta3 . STACK creates three potential response trees by detecting the feedback tags automatically. Next we need to edit potential response trees. These will establish the properties of the student's answers.","title":"Authoring a multipart question"},{"location":"AbInitio/Authoring_quick_start_6/#stage-1-a-working-potential-response-tree","text":"The first stage is to include the simplest potential response trees. These will simply ensure that answers are \"correct\". In each potential response tree, make sure to test that (\\mbox{ans}_i) is algebraically equivalent to (\\mbox{ta}_i), for (i=1,2,3). At this stage we have a working question. Save it and preview the question. For reference, the correct answers are ta1 = 3*x^2-4*x+1 ta2 = 5 ta3 = 5*x-8","title":"Stage 1: a working potential response tree"},{"location":"AbInitio/Authoring_quick_start_6/#stage-2-follow-through-marking","text":"Next we will implement simple follow-through marking. Look carefully at part 2. This does not ask for the \"correct answer\", only that the student has evaluated the expression in part 1 correctly at the right point. So the first task is to establish this property by evaluating the answer given in the first part, and comparing it with the second part. Update node 1 of prt2 to the following: Answer test: AlgEquiv SAns: ans2 TAns: subst(x=pt,ans1) Next, add a single node (to prt2 ) with the following: Answer test: AlgEquiv SAns: ans1 TAns: ta1 We now link the true branch of node 1 to node 2 (of prt2 ). This gives us three outcomes. Node 1: did they evaluate their expression in part 1 correctly? If \"yes\", then go to node 2, else if \"no\", then exit with no marks. Node 2: did they get part 1 correct? if \"yes\" then this is the ideal situation, full marks. If \"no\" then choose marks as suit your taste in this situation, and add some feedback, such as the following: You have correctly evaluated your answer to part 1 at the given point, but your answer to part 1 is wrong. Please try both parts again.","title":"Stage 2: follow-through marking"},{"location":"AbInitio/Authoring_quick_start_6/#next-step","text":"You should now be able to make a multipart question in STACK. If you have been following this quick-start guide, you should already know some steps you can take to improve this question. For example, you could add more specific feedback , randomise your question and add question tests .","title":"Next step"},{"location":"AbInitio/Authoring_quick_start_6/#the-next-part-of-the-authoring-quick-start-guide-looks-at-turning-simplification-off","text":"","title":"The next part of the authoring quick start guide looks at turning simplification off."},{"location":"AbInitio/Authoring_quick_start_7/","text":"Autor\u00eda inicio r\u00e1pido 7: desactivar la simplificaci\u00f3n 1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios This part of the authoring quick start guide deals with turning simplification off. The following video explains the process: Example question Given a complex number (z=ae^{ib}), determine (z^{n}). Where (a), (b) and (n) are randomly generated numbers. Simplification off It is tempting when writing questions such as this to operate at the level of display. We could randomly generate (a), (b) and (n) and insert them into the question text. For example: \\(({@aa@}e^{{@bb@} i})^{@nn@}\\) What we are doing here is treating every variable separately instead of creating a single CAS object for the complex number. This is ok, but causes problems and is difficult to read because it mixes CAS and LaTeX. Hence, we would much rather have everything in one CAS object that is not simplified. The following is a single Maxima expression: {@(aa*%e^(bb*%i))^nn@} (Notice that we are using variables names with more than one character. This is good practice, as single-character variables are meant for student input. Notice also that we precede standard mathematical variables with % when writing in Maxima. This is not mandatory, but is considered good practice.) Of course, we don't want Maxima to actually calculate the power just to represent it! To see the difference, copy the following a STACK question's question variables: simp:true; a1: (3*%e^(%i*%pi/2))^4; simp:false; a2: (3*%e^(%i*%pi/2))^4; Then type Simplified: {@a1@} Not simplified: {@a2@} somewhere in the question text. Preview to see the difference. Solving problems at the level of the CAS instead at the level of the display is often better. To tell STACK to set simp:false throughout the question, scroll towards the bottom of the form and under Options , set Question-level simplify to No . Now Maxima will not simplify expressions before displaying them, so {@2+5@} will display as 2+5 instead of 7 . This does have some drawbacks. Having switched off all simplification, we now need to turn it back on selectively! There are two ways to do this. Firstly, we can use commands of the following type: aa : ev(2+rand(10),simp); In particular, we can define the question variables as follows. aa : ev(2+rand(10),simp); bb : ev(2+rand(10),simp); nn : ev(2+rand(5),simp); qq : (aa*%e^(bb*%i))^nn; An alternative, when many consecutive expressions need to be simplified, is the following: simp : true; aa : 2+rand(10); bb : 2+rand(10); nn : 2+rand(5); simp : false; qq : (aa*%e^(bb*%i))^nn; Unary minus The particular circumstances will dictate if it is better to have lots of variables and use the display, or whether to turn simp:false and work with this. A common problem arises with the unary minus. Consider a question text such as Find {@aa@}+{@bb@} . If ( bb <0), the expression will be displayed as (3+-5), for example. While simplification is \"off\", the display routines in Maxima will (often) cope with the unary minus in a sensible way. Next step You should now be able to determine when it is sensible to turn off simplification. If you have been following this quick-start guide, you should already know some steps you can take to improve this question. For example, you could add more specific feedback , randomise your question and add question tests . The next part of the authoring quick start guide looks at setting up a quiz .","title":"Autor\u00eda inicio r\u00e1pido 7: desactivar la simplificaci\u00f3n"},{"location":"AbInitio/Authoring_quick_start_7/#autoria-inicio-rapido-7-desactivar-la-simplificacion","text":"1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios This part of the authoring quick start guide deals with turning simplification off. The following video explains the process:","title":"Autor\u00eda inicio r\u00e1pido 7: desactivar la simplificaci\u00f3n"},{"location":"AbInitio/Authoring_quick_start_7/#example-question","text":"Given a complex number (z=ae^{ib}), determine (z^{n}). Where (a), (b) and (n) are randomly generated numbers.","title":"Example question"},{"location":"AbInitio/Authoring_quick_start_7/#simplification-off","text":"It is tempting when writing questions such as this to operate at the level of display. We could randomly generate (a), (b) and (n) and insert them into the question text. For example: \\(({@aa@}e^{{@bb@} i})^{@nn@}\\) What we are doing here is treating every variable separately instead of creating a single CAS object for the complex number. This is ok, but causes problems and is difficult to read because it mixes CAS and LaTeX. Hence, we would much rather have everything in one CAS object that is not simplified. The following is a single Maxima expression: {@(aa*%e^(bb*%i))^nn@} (Notice that we are using variables names with more than one character. This is good practice, as single-character variables are meant for student input. Notice also that we precede standard mathematical variables with % when writing in Maxima. This is not mandatory, but is considered good practice.) Of course, we don't want Maxima to actually calculate the power just to represent it! To see the difference, copy the following a STACK question's question variables: simp:true; a1: (3*%e^(%i*%pi/2))^4; simp:false; a2: (3*%e^(%i*%pi/2))^4; Then type Simplified: {@a1@} Not simplified: {@a2@} somewhere in the question text. Preview to see the difference. Solving problems at the level of the CAS instead at the level of the display is often better. To tell STACK to set simp:false throughout the question, scroll towards the bottom of the form and under Options , set Question-level simplify to No . Now Maxima will not simplify expressions before displaying them, so {@2+5@} will display as 2+5 instead of 7 . This does have some drawbacks. Having switched off all simplification, we now need to turn it back on selectively! There are two ways to do this. Firstly, we can use commands of the following type: aa : ev(2+rand(10),simp); In particular, we can define the question variables as follows. aa : ev(2+rand(10),simp); bb : ev(2+rand(10),simp); nn : ev(2+rand(5),simp); qq : (aa*%e^(bb*%i))^nn; An alternative, when many consecutive expressions need to be simplified, is the following: simp : true; aa : 2+rand(10); bb : 2+rand(10); nn : 2+rand(5); simp : false; qq : (aa*%e^(bb*%i))^nn;","title":"Simplification off"},{"location":"AbInitio/Authoring_quick_start_7/#unary-minus","text":"The particular circumstances will dictate if it is better to have lots of variables and use the display, or whether to turn simp:false and work with this. A common problem arises with the unary minus. Consider a question text such as Find {@aa@}+{@bb@} . If ( bb <0), the expression will be displayed as (3+-5), for example. While simplification is \"off\", the display routines in Maxima will (often) cope with the unary minus in a sensible way.","title":"Unary minus"},{"location":"AbInitio/Authoring_quick_start_7/#next-step","text":"You should now be able to determine when it is sensible to turn off simplification. If you have been following this quick-start guide, you should already know some steps you can take to improve this question. For example, you could add more specific feedback , randomise your question and add question tests .","title":"Next step"},{"location":"AbInitio/Authoring_quick_start_7/#the-next-part-of-the-authoring-quick-start-guide-looks-at-setting-up-a-quiz","text":"","title":"The next part of the authoring quick start guide looks at setting up a quiz."},{"location":"AbInitio/Authoring_quick_start_8/","text":"Autor\u00eda inicio r\u00e1pido 8: crear un cuestionario 1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios This part of the authoring quick start guide deals with setting up a Moodle quiz. The following video explains the process: Introduction Once you have authored questions, you will want to include these in a quiz. Alternatively, you might like to set up a quiz using the sample questions. The purpose of this document is to provide a guide, from a beginner's point of view, to some of the steps that need to be taken when setting up mathematics questions in a Moodle quiz, using the computer aided assessment package STACK. Note, this guide risks duplicating the Moodle quiz documentation, which should also be consulted. These have been edited from notes created by Dr Maureen McIver, Department of Mathematical Sciences, Loughborough University, UK, July 2016. Finding questions You need to start by identifying questions for the quiz and the easiest way to do this is to start with a question that is already written and modify it to meet your needs. If you have been following the quick start guide so far, you should also know how to write your own question from scratch. Importing questions from an existing server Let us look at how you import questions from an existing server into your server. First, you must export the existing questions: log into the module on the Moodle server from which you wish to export questions, and click on Question bank in the Administration block. Then click on Export , Click on Moodle XML format , then choose the category you want to export. Moodle only lets you export individual categories. Click on Export questions to file . This will download a file with the all the questions that category. To import these questions into your course: Log into your module on the Moodle server and click on Question bank in the Administration block, Click on Import , Click on Moodle XML format then drag and drop the ?.xml file from your Downloads folder on your desktop, and click Import and then Continue . A copy of the questions should then appear in the question bank for your module and you can modify them as you want. Constructing a Moodle quiz Once you have constructed a question bank (either by importing them or writing them yourselves) you can put them into a Moodle quiz. Included within the STACK sample materials is a \"Syntax quiz\", and it is recommended that you put a copy of this on your own page. This lets students can practice the syntax of how to enter answers into a STACK quiz before they try a specific quiz for your module, and also checks that they can read the mathematics on their machine. Question behaviours Question behaviours dictate how many attempts students are given and how penalties are distributed. There are a number of question behaviours available for a Moodle quiz. The most important are: Immediate feedback , which only lets students have one try at each question, but gives feedback either immediately after answering a question, or only when all questions are answered and submitted. This is useful for standard formative/summative quizzes. Deferred feedback , which only lets students have one try at each question, and does not give feedback until after some given date. This is useful for examinations and coursework quizzes where you don't want students to share worked solutions. Interactive with multiple tries , which lets students have a finite amount of tries to solve the question, with a hint being displayed after each. It deducts a penalty mark for each incorrect attempt. This is useful for formative quizzes where you want to give hints. Note that the amount of attempts is set as one more than the amount of Hints given in each question. Hints are found under the Options section when editing a question. Adaptive , which lets the student have as many tries as they want, but deducts a penalty from the total score of the question for each time the student got the answer wrong. This is useful for testing questions and for informal practice quizzes. Setting up the quiz Go to the Moodle page and click Turn editing on . Go to the block where you want to put the quiz or add an additional block and click Add an activity or resource , click Quiz and then Add . Give the quiz a name and put any description you want in the Description box. LaTeX can be used here if you want. Click on Timing and fix the opening and closing times. Click on Grade and fix the Attempts allowed . E.g. you could use Unlimited for a practice quiz and 1 for a coursework quiz. Click on Question behaviour and choose your desired question behaviour, as discussed above. Under Review options , you can choose what students are allowed to see during or after the quiz. This includes options such as whether their answer is correct, their mark and feedback. We recommend turning off Right answer for both practice and coursework quizzes, and allowing General feedback (worked solution) to be on for a practice quiz, but off for coursework quizzes. Finish by clicking Save and return to course . You can toggle whether students can see the quiz/topic by clicking Edit and Show . Note, the Moodle question bank will automatically create a category for the quiz. It is sometimes sensible to put all the questions used in the quiz into this category, but note that you will only see the category if you have previously navigated to the quiz. Adding questions Click on the quiz, and then Edit quiz . Click Add then click from question bank , select a category then one or more of the STACK questions you have created. Click Add selected questions to the quiz then click Save and return to the main module page. To preview the quiz, click on it, then click Preview quiz now . Extra time If you have students who need extra time you need to set up Groups with these students in. Here is an example for a group of students who need 25% extra time. Under Course Adminstration , click on Users , then Groups , then Create group . Give the group a name, e.g. \"25% extra time\". You can put more details of who the group is for in the Group description box. Click Save changes . Add/remove users , then click on the ID for a particular student for this group and click Add to put them in the group. Repeat for each student who needs to be in this group. Go back and click on the Moodle quiz. In the Quiz Adminstration , click on Group overrides , then click Add group override , choose the relevant group, set the appropriate Time limit for the quiz for that group and click Save . Viewing results To see the students' results in for a particular quiz, go the the quiz, then under Quiz adminstration click on Results , then Grades . This will let you see all attempts, with the overall grade and the grade for each question. You can choose to download the results in Excel here as well. Next steps You should now be able to work with quizzes in Moodle. This concludes the authoring quick start guide. The STACK documentation is comprehensive, and there are many things you might want to look at next. For example, you can learn about more input types , learn about more answer tests , add plots to your CASText fields, add support for multiple languages , learn about using equivalence reasoning , read about Curve sketching . look at more information on Maxima , particularly the Maxima documentation if you are not very familiar with Maxima's syntax and function names. A graphical Maxima interface like wxMaxima can also be very helpful for finding the appropriate Maxima commands easily.","title":"Autor\u00eda inicio r\u00e1pido 8: crear un cuestionario"},{"location":"AbInitio/Authoring_quick_start_8/#autoria-inicio-rapido-8-crear-un-cuestionario","text":"1 - Primera pregunta | 2 - Variables de pregunta | 3 - Retroalimentaci\u00f3n | 4 - Aleatorizaci\u00f3n | 5 - Test de preguntas | 6 - Preguntas de varias partes | 7 - Simplificaci\u00f3n | 8 - Cuestionarios This part of the authoring quick start guide deals with setting up a Moodle quiz. The following video explains the process:","title":"Autor\u00eda inicio r\u00e1pido 8: crear un cuestionario"},{"location":"AbInitio/Authoring_quick_start_8/#introduction","text":"Once you have authored questions, you will want to include these in a quiz. Alternatively, you might like to set up a quiz using the sample questions. The purpose of this document is to provide a guide, from a beginner's point of view, to some of the steps that need to be taken when setting up mathematics questions in a Moodle quiz, using the computer aided assessment package STACK. Note, this guide risks duplicating the Moodle quiz documentation, which should also be consulted. These have been edited from notes created by Dr Maureen McIver, Department of Mathematical Sciences, Loughborough University, UK, July 2016.","title":"Introduction"},{"location":"AbInitio/Authoring_quick_start_8/#finding-questions","text":"You need to start by identifying questions for the quiz and the easiest way to do this is to start with a question that is already written and modify it to meet your needs. If you have been following the quick start guide so far, you should also know how to write your own question from scratch.","title":"Finding questions"},{"location":"AbInitio/Authoring_quick_start_8/#importing-questions-from-an-existing-server","text":"Let us look at how you import questions from an existing server into your server. First, you must export the existing questions: log into the module on the Moodle server from which you wish to export questions, and click on Question bank in the Administration block. Then click on Export , Click on Moodle XML format , then choose the category you want to export. Moodle only lets you export individual categories. Click on Export questions to file . This will download a file with the all the questions that category. To import these questions into your course: Log into your module on the Moodle server and click on Question bank in the Administration block, Click on Import , Click on Moodle XML format then drag and drop the ?.xml file from your Downloads folder on your desktop, and click Import and then Continue . A copy of the questions should then appear in the question bank for your module and you can modify them as you want.","title":"Importing questions from an existing server"},{"location":"AbInitio/Authoring_quick_start_8/#constructing-a-moodle-quiz","text":"Once you have constructed a question bank (either by importing them or writing them yourselves) you can put them into a Moodle quiz. Included within the STACK sample materials is a \"Syntax quiz\", and it is recommended that you put a copy of this on your own page. This lets students can practice the syntax of how to enter answers into a STACK quiz before they try a specific quiz for your module, and also checks that they can read the mathematics on their machine.","title":"Constructing a Moodle quiz"},{"location":"AbInitio/Authoring_quick_start_8/#question-behaviours","text":"Question behaviours dictate how many attempts students are given and how penalties are distributed. There are a number of question behaviours available for a Moodle quiz. The most important are: Immediate feedback , which only lets students have one try at each question, but gives feedback either immediately after answering a question, or only when all questions are answered and submitted. This is useful for standard formative/summative quizzes. Deferred feedback , which only lets students have one try at each question, and does not give feedback until after some given date. This is useful for examinations and coursework quizzes where you don't want students to share worked solutions. Interactive with multiple tries , which lets students have a finite amount of tries to solve the question, with a hint being displayed after each. It deducts a penalty mark for each incorrect attempt. This is useful for formative quizzes where you want to give hints. Note that the amount of attempts is set as one more than the amount of Hints given in each question. Hints are found under the Options section when editing a question. Adaptive , which lets the student have as many tries as they want, but deducts a penalty from the total score of the question for each time the student got the answer wrong. This is useful for testing questions and for informal practice quizzes.","title":"Question behaviours"},{"location":"AbInitio/Authoring_quick_start_8/#setting-up-the-quiz","text":"Go to the Moodle page and click Turn editing on . Go to the block where you want to put the quiz or add an additional block and click Add an activity or resource , click Quiz and then Add . Give the quiz a name and put any description you want in the Description box. LaTeX can be used here if you want. Click on Timing and fix the opening and closing times. Click on Grade and fix the Attempts allowed . E.g. you could use Unlimited for a practice quiz and 1 for a coursework quiz. Click on Question behaviour and choose your desired question behaviour, as discussed above. Under Review options , you can choose what students are allowed to see during or after the quiz. This includes options such as whether their answer is correct, their mark and feedback. We recommend turning off Right answer for both practice and coursework quizzes, and allowing General feedback (worked solution) to be on for a practice quiz, but off for coursework quizzes. Finish by clicking Save and return to course . You can toggle whether students can see the quiz/topic by clicking Edit and Show . Note, the Moodle question bank will automatically create a category for the quiz. It is sometimes sensible to put all the questions used in the quiz into this category, but note that you will only see the category if you have previously navigated to the quiz.","title":"Setting up the quiz"},{"location":"AbInitio/Authoring_quick_start_8/#adding-questions","text":"Click on the quiz, and then Edit quiz . Click Add then click from question bank , select a category then one or more of the STACK questions you have created. Click Add selected questions to the quiz then click Save and return to the main module page. To preview the quiz, click on it, then click Preview quiz now .","title":"Adding questions"},{"location":"AbInitio/Authoring_quick_start_8/#extra-time","text":"If you have students who need extra time you need to set up Groups with these students in. Here is an example for a group of students who need 25% extra time. Under Course Adminstration , click on Users , then Groups , then Create group . Give the group a name, e.g. \"25% extra time\". You can put more details of who the group is for in the Group description box. Click Save changes . Add/remove users , then click on the ID for a particular student for this group and click Add to put them in the group. Repeat for each student who needs to be in this group. Go back and click on the Moodle quiz. In the Quiz Adminstration , click on Group overrides , then click Add group override , choose the relevant group, set the appropriate Time limit for the quiz for that group and click Save .","title":"Extra time"},{"location":"AbInitio/Authoring_quick_start_8/#viewing-results","text":"To see the students' results in for a particular quiz, go the the quiz, then under Quiz adminstration click on Results , then Grades . This will let you see all attempts, with the overall grade and the grade for each question. You can choose to download the results in Excel here as well.","title":"Viewing results"},{"location":"AbInitio/Authoring_quick_start_8/#next-steps","text":"You should now be able to work with quizzes in Moodle. This concludes the authoring quick start guide. The STACK documentation is comprehensive, and there are many things you might want to look at next. For example, you can learn about more input types , learn about more answer tests , add plots to your CASText fields, add support for multiple languages , learn about using equivalence reasoning , read about Curve sketching . look at more information on Maxima , particularly the Maxima documentation if you are not very familiar with Maxima's syntax and function names. A graphical Maxima interface like wxMaxima can also be very helpful for finding the appropriate Maxima commands easily.","title":"Next steps"},{"location":"About/","text":"About the STACK Project STACK is an assessment system for mathematics, science and related disciplines, designed to enable students to answer questions with a mathematical expression, such as a polynomial. STACK uses a Computer Algebra System and students are not limited to multiple choice. There is a large, and growing, community of STACK users in many languages. The main community website for STACK is https://stack-assessment.org/ General community discussion takes place on https://stack-assessment.zulipchat.com/ For specific platforms ILIAS users see https://docu.ilias.de/goto_docu_cat_4119.html . Moodle users see the Mathematics tools forum. A demonstration server is available in Edinburgh: https://stack-demo.maths.ed.ac.uk/demo/ The source code, and development discussion, is on github , with an additional ILIAS site. Main STACK Features Equivalent answers of the right form STACK can accept equivalent expressions, for example ((x+1)^2 = x^2+2x+1). STACK can also establish the form of an answer, for example if it is factorised. STACK is designed to let teachers specify independent properties required in an answer. Ask for examples The system can mark questions that ask the student to provide an example. Give an example of a function f(x) with a minimum at x=0 and a maximum at x=2. Rather than comparing the student's answer to the teacher's answer, STACK checks that the answer has the required properties. Giving examples is a higher-order skill that is impossible to assess with conventional Computer Aided Assessment (CAA) systems. Intelligent randomisation Randomising questions is invaluable in ensuring students can practice and reducing sharing of answers. The trick is to reverse-engineer the randomised question from a randomised answer. Computer algebra is invaluable to support this process. Give feedback and partial credit Consider a question like: Give an example of a cubic polynomial with the following properties: (p(0)=1), (p(x)=0) at (x=2) and at (x=3). Here, STACK can check each condition separately on the student's answer and assign partial credit accordingly. If the student gave the answer (p(x) = x^2-5x+6) for example, then STACK could reply: Your answer does have zeros at the required points but its value at zero is not equal to 1. You received 2 out of 3 points. Please try again. There are a variety of ways in which feedback can be given, including plotting the students' answer against the teacher's answer. Multipart questions STACK supports multipart questions, like the following: (a) differentiate (x^2+5x) with respect to x. (b) substitute (x=5) into your answer. You can have follow-through marking for situations where, for example, the student enters a wrong expression to part (a), but correctly substitutes in values into their expression in part (b). Here, STACK can recognise the work the student put into part (b), even though their answer is different from the \"correct\" answer. Support for many types of questions STACK has a large number of inputs and answer tests to support the diverse needs of users across mathematics and science. This includes support for questions about numerical accuracy , significant figures and scientific units . You can also assess students' ability to reason line-by-line with equivalence reasoning . Further information The main community website https://stack-assessment.org/ The philosophy of STACK . Associated publications . The mathematics behind the STACK logo .","title":"About"},{"location":"About/#about-the-stack-project","text":"STACK is an assessment system for mathematics, science and related disciplines, designed to enable students to answer questions with a mathematical expression, such as a polynomial. STACK uses a Computer Algebra System and students are not limited to multiple choice. There is a large, and growing, community of STACK users in many languages. The main community website for STACK is https://stack-assessment.org/ General community discussion takes place on https://stack-assessment.zulipchat.com/ For specific platforms ILIAS users see https://docu.ilias.de/goto_docu_cat_4119.html . Moodle users see the Mathematics tools forum. A demonstration server is available in Edinburgh: https://stack-demo.maths.ed.ac.uk/demo/ The source code, and development discussion, is on github , with an additional ILIAS site.","title":"About the STACK Project"},{"location":"About/#main-stack-features","text":"","title":"Main STACK Features"},{"location":"About/#equivalent-answers-of-the-right-form","text":"STACK can accept equivalent expressions, for example ((x+1)^2 = x^2+2x+1). STACK can also establish the form of an answer, for example if it is factorised. STACK is designed to let teachers specify independent properties required in an answer.","title":"Equivalent answers of the right form"},{"location":"About/#ask-for-examples","text":"The system can mark questions that ask the student to provide an example. Give an example of a function f(x) with a minimum at x=0 and a maximum at x=2. Rather than comparing the student's answer to the teacher's answer, STACK checks that the answer has the required properties. Giving examples is a higher-order skill that is impossible to assess with conventional Computer Aided Assessment (CAA) systems.","title":"Ask for examples"},{"location":"About/#intelligent-randomisation","text":"Randomising questions is invaluable in ensuring students can practice and reducing sharing of answers. The trick is to reverse-engineer the randomised question from a randomised answer. Computer algebra is invaluable to support this process.","title":"Intelligent randomisation"},{"location":"About/#give-feedback-and-partial-credit","text":"Consider a question like: Give an example of a cubic polynomial with the following properties: (p(0)=1), (p(x)=0) at (x=2) and at (x=3). Here, STACK can check each condition separately on the student's answer and assign partial credit accordingly. If the student gave the answer (p(x) = x^2-5x+6) for example, then STACK could reply: Your answer does have zeros at the required points but its value at zero is not equal to 1. You received 2 out of 3 points. Please try again. There are a variety of ways in which feedback can be given, including plotting the students' answer against the teacher's answer.","title":"Give feedback and partial credit"},{"location":"About/#multipart-questions","text":"STACK supports multipart questions, like the following: (a) differentiate (x^2+5x) with respect to x. (b) substitute (x=5) into your answer. You can have follow-through marking for situations where, for example, the student enters a wrong expression to part (a), but correctly substitutes in values into their expression in part (b). Here, STACK can recognise the work the student put into part (b), even though their answer is different from the \"correct\" answer.","title":"Multipart questions"},{"location":"About/#support-for-many-types-of-questions","text":"STACK has a large number of inputs and answer tests to support the diverse needs of users across mathematics and science. This includes support for questions about numerical accuracy , significant figures and scientific units . You can also assess students' ability to reason line-by-line with equivalence reasoning .","title":"Support for many types of questions"},{"location":"About/#further-information","text":"The main community website https://stack-assessment.org/ The philosophy of STACK . Associated publications . The mathematics behind the STACK logo .","title":"Further information"},{"location":"About/Credits/","text":"Contributors to the STACK Project More details of our development history are given in the development track . Chris Sangwin of the University of Edinburgh. STACK is the brainchild of Chris Sangwin. Tim Hunt and Tim Lowe of the Open University. Matti Harjula of Aalto University, Finland. Previous developers have included John Beedell Simon Hammond Jonathan Hart Ben Holmes Maksim Kraev Mikael Kurula Matti Pauna Malthe Sporring Dan Williams STACK is an open source project and many others have made contributions of various sizes. Translation of the STACK Project STACK is designed to support the straightforward addition of other language packs. If you have translated STACK into other languages - or would be interested in doing so - please let us know ! Likewise, if you would really like to see STACK in another language please contact us. Details of how to add language packs, translate STACK, and forthcoming translations, are given on the Language packs developers page. STACK is released in many languages, using Moodle's ATOS language system. EN: English (British), by Chris Sangwin (and others) FI: Finnish, by Matti Pauna SV: Swedish, by Mikael Kurula DA: Danish, by Malthe Sporring ES: Spanish, by Victor Hugo Huerta JA: Japanese, by Yasuyuki Nakamura and Takahiro Nakahara German documentation was added in Jan 2019 by Eva Mix and Mario Josupeit of University of Cologne, Germany. Other implementations and projects STACK has been ported to the plugin assStackQuestion for the Learning Management System ILIAS by: Jesus Copado Fred Neumann This project received a lot of moral support from the ILIAS association and its product manager Matthias Kunkel, as well as funding from various institutions: Duale Hochschule Baden W\u00fcrttemberg Hochschule Bremen Helmut-Schmidt-Universit\u00e4t Hamburg Fachhochschule Aachen Hochschule Karlsruhe Fachhochschule M\u00fcnster Universit\u00e4t Freiburg Universit\u00e4t Erlangen-N\u00fcrnberg Universit\u00e4t zu K\u00f6ln User list The following institutions made use of previous versions of STACK. If you are actively using STACK and would like to be listed below then please contact the developers. School of Mathematics, The University of Edinburgh : The home of STACK. Contact Chris Sangwin . School of Mathematics and Statistics, The Open University, : Contact Tim Hunt and Tim Lowe School of Science, Aalto University, Helsinki, Finland : Contact Matti Harjula and Antti Rasila Department of Mathematics Education, Loughborough University : Contact Ian Jones School of Informatics and Sciences, Nagoya University, Japan : Contact Yasuyuki Nakamura Ja STACK Community : Contact Ja STACK.org Polytechnic Institute of Leiria, Leiria, Portugal : Contact Rui Paiva School of Computing, Information and Mathematical Sciences, The University of the South Pacific : Contact Dhiraj Bhartu Gymnasium Himmelsth\u00fcr, Hildesheim, Deutschland : Contact Frank Sch\u00fctte Universidad Michoacana de San Nicolas de Hidalgo : Contact Victor Hugo Huerta e-MAIO project, Coimbra Institute of Engineering, Portugal : Contact e_MAIO@isec.pt Maseno University, Kenya : Contact Michael Oyengo IDEMS International : Contact Santiago Borio ETH Z\u00fcrich, Switzerland : Contact Meike Akveld , George Ionita , Andreas Steiger","title":"Contributors to the STACK Project"},{"location":"About/Credits/#contributors-to-the-stack-project","text":"More details of our development history are given in the development track . Chris Sangwin of the University of Edinburgh. STACK is the brainchild of Chris Sangwin. Tim Hunt and Tim Lowe of the Open University. Matti Harjula of Aalto University, Finland. Previous developers have included John Beedell Simon Hammond Jonathan Hart Ben Holmes Maksim Kraev Mikael Kurula Matti Pauna Malthe Sporring Dan Williams STACK is an open source project and many others have made contributions of various sizes.","title":"Contributors to the STACK Project"},{"location":"About/Credits/#translation-of-the-stack-project","text":"STACK is designed to support the straightforward addition of other language packs. If you have translated STACK into other languages - or would be interested in doing so - please let us know ! Likewise, if you would really like to see STACK in another language please contact us. Details of how to add language packs, translate STACK, and forthcoming translations, are given on the Language packs developers page. STACK is released in many languages, using Moodle's ATOS language system. EN: English (British), by Chris Sangwin (and others) FI: Finnish, by Matti Pauna SV: Swedish, by Mikael Kurula DA: Danish, by Malthe Sporring ES: Spanish, by Victor Hugo Huerta JA: Japanese, by Yasuyuki Nakamura and Takahiro Nakahara German documentation was added in Jan 2019 by Eva Mix and Mario Josupeit of University of Cologne, Germany.","title":"Translation of the STACK Project"},{"location":"About/Credits/#other-implementations-and-projects","text":"STACK has been ported to the plugin assStackQuestion for the Learning Management System ILIAS by: Jesus Copado Fred Neumann This project received a lot of moral support from the ILIAS association and its product manager Matthias Kunkel, as well as funding from various institutions: Duale Hochschule Baden W\u00fcrttemberg Hochschule Bremen Helmut-Schmidt-Universit\u00e4t Hamburg Fachhochschule Aachen Hochschule Karlsruhe Fachhochschule M\u00fcnster Universit\u00e4t Freiburg Universit\u00e4t Erlangen-N\u00fcrnberg Universit\u00e4t zu K\u00f6ln","title":"Other implementations and projects"},{"location":"About/Credits/#user-list","text":"The following institutions made use of previous versions of STACK. If you are actively using STACK and would like to be listed below then please contact the developers. School of Mathematics, The University of Edinburgh : The home of STACK. Contact Chris Sangwin . School of Mathematics and Statistics, The Open University, : Contact Tim Hunt and Tim Lowe School of Science, Aalto University, Helsinki, Finland : Contact Matti Harjula and Antti Rasila Department of Mathematics Education, Loughborough University : Contact Ian Jones School of Informatics and Sciences, Nagoya University, Japan : Contact Yasuyuki Nakamura Ja STACK Community : Contact Ja STACK.org Polytechnic Institute of Leiria, Leiria, Portugal : Contact Rui Paiva School of Computing, Information and Mathematical Sciences, The University of the South Pacific : Contact Dhiraj Bhartu Gymnasium Himmelsth\u00fcr, Hildesheim, Deutschland : Contact Frank Sch\u00fctte Universidad Michoacana de San Nicolas de Hidalgo : Contact Victor Hugo Huerta e-MAIO project, Coimbra Institute of Engineering, Portugal : Contact e_MAIO@isec.pt Maseno University, Kenya : Contact Michael Oyengo IDEMS International : Contact Santiago Borio ETH Z\u00fcrich, Switzerland : Contact Meike Akveld , George Ionita , Andreas Steiger","title":"User list"},{"location":"About/Logo/","text":"The mathematics of the STACK logo The STACK logo is based on the following problem. If you stack identical blocks one on top of the other, how far can it lean before it falls over? You have a potentially unlimited supply of blocks. The answer is that there is no limit to how far it can lean! A physical model is shown below. Model made by Dr John Bryant. The mathematics of this problem To see why the STACK of blocks doesn't fall over assume that the width of each domino is (2) \"units\". Our strategy is this: at each stage we consider an existing balancing stack of (n) dominoes which has its centre of mass a distance (c_n) from its left-hand edge. Obviously (c_n\\leq 2) for all (n) as the centre of mass is to be above the bottom domino! We then place this stack on top of a new domino a distance (\\delta_n) from the left of the domino. There will clearly be no toppling if [ \\delta_n+c_n\\leq 2.] That is to say we maintain balance if we don't displace the top stack so far that the displacement plus the distance of the centre of mass from the left pushes the centre of mass over the edge of the bottom domino - which has width (2). The new centre of mass of the whole stack of (n+1) dominoes will be (c_{n+1}) from the left of the bottom domino where [ c_{n+1} = \\frac{(\\delta_n+c_n)n+1}{n+1} \\mbox{ with } c_1=1.] Using the first inequality the maximum displacement without toppling is (\\delta_n=s-c_n). Combining this with the formula for (c_{n+1}) and solving for (\\delta_n) gives [ \\delta_{n+1} = 2-c_{n+1} = 2-\\frac{(\\delta_n+c_n)n+1}{n+1} = 2-\\frac{(\\delta_n+2-\\delta_n)n+1}{n+1} = \\frac{1}{n+1} \\mbox{ with } \\delta_1=1. ] So that for all (n), (\\delta_n = \\frac{1}{n}). How big does the displacement become? The question becomes, what is the value of [ 1 +\\frac{1}{2} +\\frac{1}{3} +\\frac{1}{4} + \\cdots +\\frac{1}{N}= \\sum_{n=1}^N \\frac{1}{n} ] for large N? If (N\\rightarrow \\infty), this is a particularly famous infinite series - the harmonic series . Actually, this diverges. That is to say it is possible to make the sum as large as one would wish. To see this, we group the terms as follows, [ \\sum_{n=1}^N \\frac{1}{n} = \\left(1+\\cdots+\\frac{1}{9}\\right) + \\left(\\frac{1}{10}+\\cdots+\\frac{1}{99}\\right) + \\left(\\frac{1}{100}+\\cdots+\\frac{1}{999}\\right) + \\cdots ] [ \\geq 9\\frac{1}{10} + 90\\frac{1}{100} + 900\\frac{1}{1000} + \\cdots ] [ = \\frac{9}{10}+\\frac{9}{10}+\\frac{9}{10}+\\cdots] which shows that the series keeps getting larger as we continue to add terms. That is to say it does not converge. In terms of the domino problem: we can choose displacements (\\delta_n) so that (i) the stack does not topple over, and (ii) we can produce an arbitrarily large horizontal displacement. Bizarre indeed!","title":"The mathematics of the STACK logo"},{"location":"About/Logo/#the-mathematics-of-the-stack-logo","text":"The STACK logo is based on the following problem. If you stack identical blocks one on top of the other, how far can it lean before it falls over? You have a potentially unlimited supply of blocks. The answer is that there is no limit to how far it can lean! A physical model is shown below. Model made by Dr John Bryant.","title":"The mathematics of the STACK logo"},{"location":"About/Logo/#the-mathematics-of-this-problem","text":"To see why the STACK of blocks doesn't fall over assume that the width of each domino is (2) \"units\". Our strategy is this: at each stage we consider an existing balancing stack of (n) dominoes which has its centre of mass a distance (c_n) from its left-hand edge. Obviously (c_n\\leq 2) for all (n) as the centre of mass is to be above the bottom domino! We then place this stack on top of a new domino a distance (\\delta_n) from the left of the domino. There will clearly be no toppling if [ \\delta_n+c_n\\leq 2.] That is to say we maintain balance if we don't displace the top stack so far that the displacement plus the distance of the centre of mass from the left pushes the centre of mass over the edge of the bottom domino - which has width (2). The new centre of mass of the whole stack of (n+1) dominoes will be (c_{n+1}) from the left of the bottom domino where [ c_{n+1} = \\frac{(\\delta_n+c_n)n+1}{n+1} \\mbox{ with } c_1=1.] Using the first inequality the maximum displacement without toppling is (\\delta_n=s-c_n). Combining this with the formula for (c_{n+1}) and solving for (\\delta_n) gives [ \\delta_{n+1} = 2-c_{n+1} = 2-\\frac{(\\delta_n+c_n)n+1}{n+1} = 2-\\frac{(\\delta_n+2-\\delta_n)n+1}{n+1} = \\frac{1}{n+1} \\mbox{ with } \\delta_1=1. ] So that for all (n), (\\delta_n = \\frac{1}{n}).","title":"The mathematics of this problem"},{"location":"About/Logo/#how-big-does-the-displacement-become","text":"The question becomes, what is the value of [ 1 +\\frac{1}{2} +\\frac{1}{3} +\\frac{1}{4} + \\cdots +\\frac{1}{N}= \\sum_{n=1}^N \\frac{1}{n} ] for large N? If (N\\rightarrow \\infty), this is a particularly famous infinite series - the harmonic series . Actually, this diverges. That is to say it is possible to make the sum as large as one would wish. To see this, we group the terms as follows, [ \\sum_{n=1}^N \\frac{1}{n} = \\left(1+\\cdots+\\frac{1}{9}\\right) + \\left(\\frac{1}{10}+\\cdots+\\frac{1}{99}\\right) + \\left(\\frac{1}{100}+\\cdots+\\frac{1}{999}\\right) + \\cdots ] [ \\geq 9\\frac{1}{10} + 90\\frac{1}{100} + 900\\frac{1}{1000} + \\cdots ] [ = \\frac{9}{10}+\\frac{9}{10}+\\frac{9}{10}+\\cdots] which shows that the series keeps getting larger as we continue to add terms. That is to say it does not converge. In terms of the domino problem: we can choose displacements (\\delta_n) so that (i) the stack does not topple over, and (ii) we can produce an arbitrarily large horizontal displacement. Bizarre indeed!","title":"How big does the displacement become?"},{"location":"About/Publications/","text":"Publications STACK is a very popular online assessment system, used by many groups in a variety of languages. STACK has been the subject of research, and has itself enabled research projects to take place. This page contains a selection of publications. Publicity materials. We have a booklet of case studies , and a PDF flyer about the STACK project . We have a \"Getting started with STACK\" guide ( Spanish ). Computer aided assessment of mathematics Computer Aided Assessment of Mathematics , Chris Sangwin, Oxford University Press, 2013. This book provides an Introduction to Computer Aided Assessment using STACK as the main working example. Nakamura (2010) Y. Nakamura, The STACK e-Learning and Assessment System for mathematics, science and engineering education through Moodle , Tokyo Denki University Press, 2010, (In Japanese) ISBN 978-4-501-54820-9. Papers about STACK Proceedings of the 1st International STACK Conference can be found can be found on the open access publication server Zenodo here: https://zenodo.org/communities/stack These recent papers about STACK are a good place to start: C. J. Sangwin, R. Bickerton, R. (2023). Practical Online Assessment of Mathematical Proof , International Journal of Mathematical Education in Science and Technology}, 53(10) doi:10.1080/0020739X.2021.1896813. C. J. Sangwin and I. Jones (2017). Asymmetry in student achievement on multiple choice and constructed response items in reversible mathematics processes . Educational Studies in Mathematics, 94:205-222. C. J. Sangwin and N. Kocher (2016). Automation of mathematics examinations . Computers and Education, 94:215-227. A comprehensive bibliography is available here: STACK bibliography , with the entries in BiBTeX format .","title":"Publications"},{"location":"About/Publications/#publications","text":"STACK is a very popular online assessment system, used by many groups in a variety of languages. STACK has been the subject of research, and has itself enabled research projects to take place. This page contains a selection of publications.","title":"Publications"},{"location":"About/Publications/#publicity-materials","text":"We have a booklet of case studies , and a PDF flyer about the STACK project . We have a \"Getting started with STACK\" guide ( Spanish ).","title":"Publicity materials."},{"location":"About/Publications/#computer-aided-assessment-of-mathematics","text":"Computer Aided Assessment of Mathematics , Chris Sangwin, Oxford University Press, 2013. This book provides an Introduction to Computer Aided Assessment using STACK as the main working example.","title":"Computer aided assessment of mathematics"},{"location":"About/Publications/#nakamura-2010","text":"Y. Nakamura, The STACK e-Learning and Assessment System for mathematics, science and engineering education through Moodle , Tokyo Denki University Press, 2010, (In Japanese) ISBN 978-4-501-54820-9.","title":"Nakamura (2010)"},{"location":"About/Publications/#papers-about-stack","text":"Proceedings of the 1st International STACK Conference can be found can be found on the open access publication server Zenodo here: https://zenodo.org/communities/stack These recent papers about STACK are a good place to start: C. J. Sangwin, R. Bickerton, R. (2023). Practical Online Assessment of Mathematical Proof , International Journal of Mathematical Education in Science and Technology}, 53(10) doi:10.1080/0020739X.2021.1896813. C. J. Sangwin and I. Jones (2017). Asymmetry in student achievement on multiple choice and constructed response items in reversible mathematics processes . Educational Studies in Mathematics, 94:205-222. C. J. Sangwin and N. Kocher (2016). Automation of mathematics examinations . Computers and Education, 94:215-227. A comprehensive bibliography is available here: STACK bibliography , with the entries in BiBTeX format .","title":"Papers about STACK"},{"location":"About/The_philosophy_of_STACK/","text":"Philosophy of STACK One of the key advantages over traditional hand-marking is that, when done correctly, online assessment can effectively assess and give feedback to a large number of students. This frees up marking time and resources that would normally have to be spent by several tutors. Additionally, it can be frustrating for students when their tutors are not consistent in how they mark. The traditional form of CAA is teacher-provided answer questions . In these questions, a student makes a selection from, or interacts with, potential answers which the teacher has selected. Examples include multiple choice questions and multiple response questions. These types of questions have a number of limitations, including: Only finite answers are possible. The teacher can put in \"dummy responses\" for common mistakes and give feedback based on those mistakes, but it is impossible to give feedback on student errors outside the given examples. You can only assess lower-order skills. \"Give an example of...\" type questions are impossible. It encourages strategic learning, i.e. instead of solving the problem, students will think about how to \"trick the system\" and find the right answer. Question distortion is especially problematic in mathematics. You may ask students to integrate a complicated function, and then give a list of potential answers. Differentiating the answers to get the original expression is a much easier process, and sensible students are likely to take the easier route, which is not what we wanted the student to practice. The alternative is to focus on student-provided answer questions . In these questions, the student's answer contains the content. For example, a student could be asked to input an algebraic expression, like a polynomial. This system is harder to implement, but responds to all the shortcomings of teacher-provided answer questions listed above. STACK was designed to be such a system. Design choices STACK is not the first CAA system to focus on student-provided answer questions. However, STACK has a number of key design choices that make it stand out. Teachers should be able to write their own questions, with minimal coding skill Teachers should take responsibility for their assessments. When assessing students' answers, STACK asks teachers to focus on the properties of students' answers, such as \"algebraically equivalent to the teacher's answer\", \"factorised\", etc. Focusing on mathematical properties, such as equivalence, is a unique design feature of STACK. Teachers can then pick suitable answer tests in a potential response tree and give marks and feedback accordingly. STACK does not require teachers to learn a coding language and assess students' answers by writing code such as : If simplify(student_answer - teacher_answer) = 0 then mark = 1, else mark = 0. Students should not be penalised for poor computer skills Online assessment should assess mathematics skills, not how well students know the specific syntax. For example, penalising a student for answering sinx instead of sin(x) is not fair. Separating validity from assessment is a key design feature pioneered by STACK. To ensure that students are marked for mathematical skills instead of computer skills , STACK separates \"validity\" and \"correctness\". When a student types an answer, it is interpreted by the CAS and a \"validation box\" is shown displaying how the student's answer is interpreted. This gives the student a chance to fix any syntax errors before their answer is marked. Multipart questions should be possible Multipart questions can be very helpful for students, for example to help guide a student through a new topic. STACK completely separates input and assessment with a unique and flexible design. A question can have unlimited input boxes, and unlimited potential response trees to handle the assessment. Each tree is not limited to a particular input, but instead has access to all the student's inputs. Hence, a tree assessing the correctness of part (b) of a question can use the student's answer to part (a) in its algorithm. This allows for follow-through marking, where a student be penalised for a wrong expression in part (a) but given credit for correctly substituting in values in part (b). STACK is rich in features STACK is designed to cover the needs of a large variety of users across mathematics and science. Questions can be randomised to ensure different students see different variants of a question. There are many different kinds of inputs . These are, for example, where the student enters a mathematical expression, or makes a true/false selection. Partial credit is possible when an expression only satisfies some of the required properties. Plots can be dynamically generated and included within any part of the question, including feedback in the form of a plot of the student's expression. Students can work line by line reasoning by equivalence until they have a final answer in the correct form. STACK supports working with significant figures and scientific units . STACK is open source The problems faced by teachers, particularly in University, are the same the world over. The developers of STACK wanted to make sure students do not have to pay for access codes to published books and that institutions are not locked into an expensive system. At the same time, they wanted a system that encourages other developers to collaborate on improving STACK. STACK is the leading open souce online assessment system for mathematics and STEM. The business model for STACK relies on institutions collaborating on the infrustricture, remaining free to use the resulting system as the please, including in commercially as needed. Many design decisions for STACK are a direct result of choosing the GPL license for the codebase, for example the choice of Maxima as its Computer Algebra System (CAS), Moodle and ILIAS to take care of identity management, LaTeX/MathJax to filter and display mathematics. The documentation for STACK is available under the Creative Commons Attribution-ShareAlike 4.0 International License .","title":"Philosophy of STACK"},{"location":"About/The_philosophy_of_STACK/#philosophy-of-stack","text":"One of the key advantages over traditional hand-marking is that, when done correctly, online assessment can effectively assess and give feedback to a large number of students. This frees up marking time and resources that would normally have to be spent by several tutors. Additionally, it can be frustrating for students when their tutors are not consistent in how they mark. The traditional form of CAA is teacher-provided answer questions . In these questions, a student makes a selection from, or interacts with, potential answers which the teacher has selected. Examples include multiple choice questions and multiple response questions. These types of questions have a number of limitations, including: Only finite answers are possible. The teacher can put in \"dummy responses\" for common mistakes and give feedback based on those mistakes, but it is impossible to give feedback on student errors outside the given examples. You can only assess lower-order skills. \"Give an example of...\" type questions are impossible. It encourages strategic learning, i.e. instead of solving the problem, students will think about how to \"trick the system\" and find the right answer. Question distortion is especially problematic in mathematics. You may ask students to integrate a complicated function, and then give a list of potential answers. Differentiating the answers to get the original expression is a much easier process, and sensible students are likely to take the easier route, which is not what we wanted the student to practice. The alternative is to focus on student-provided answer questions . In these questions, the student's answer contains the content. For example, a student could be asked to input an algebraic expression, like a polynomial. This system is harder to implement, but responds to all the shortcomings of teacher-provided answer questions listed above. STACK was designed to be such a system.","title":"Philosophy of STACK"},{"location":"About/The_philosophy_of_STACK/#design-choices","text":"STACK is not the first CAA system to focus on student-provided answer questions. However, STACK has a number of key design choices that make it stand out.","title":"Design choices"},{"location":"About/The_philosophy_of_STACK/#teachers-should-be-able-to-write-their-own-questions-with-minimal-coding-skill","text":"Teachers should take responsibility for their assessments. When assessing students' answers, STACK asks teachers to focus on the properties of students' answers, such as \"algebraically equivalent to the teacher's answer\", \"factorised\", etc. Focusing on mathematical properties, such as equivalence, is a unique design feature of STACK. Teachers can then pick suitable answer tests in a potential response tree and give marks and feedback accordingly. STACK does not require teachers to learn a coding language and assess students' answers by writing code such as : If simplify(student_answer - teacher_answer) = 0 then mark = 1, else mark = 0.","title":"Teachers should be able to write their own questions, with minimal coding skill"},{"location":"About/The_philosophy_of_STACK/#students-should-not-be-penalised-for-poor-computer-skills","text":"Online assessment should assess mathematics skills, not how well students know the specific syntax. For example, penalising a student for answering sinx instead of sin(x) is not fair. Separating validity from assessment is a key design feature pioneered by STACK. To ensure that students are marked for mathematical skills instead of computer skills , STACK separates \"validity\" and \"correctness\". When a student types an answer, it is interpreted by the CAS and a \"validation box\" is shown displaying how the student's answer is interpreted. This gives the student a chance to fix any syntax errors before their answer is marked.","title":"Students should not be penalised for poor computer skills"},{"location":"About/The_philosophy_of_STACK/#multipart-questions-should-be-possible","text":"Multipart questions can be very helpful for students, for example to help guide a student through a new topic. STACK completely separates input and assessment with a unique and flexible design. A question can have unlimited input boxes, and unlimited potential response trees to handle the assessment. Each tree is not limited to a particular input, but instead has access to all the student's inputs. Hence, a tree assessing the correctness of part (b) of a question can use the student's answer to part (a) in its algorithm. This allows for follow-through marking, where a student be penalised for a wrong expression in part (a) but given credit for correctly substituting in values in part (b).","title":"Multipart questions should be possible"},{"location":"About/The_philosophy_of_STACK/#stack-is-rich-in-features","text":"STACK is designed to cover the needs of a large variety of users across mathematics and science. Questions can be randomised to ensure different students see different variants of a question. There are many different kinds of inputs . These are, for example, where the student enters a mathematical expression, or makes a true/false selection. Partial credit is possible when an expression only satisfies some of the required properties. Plots can be dynamically generated and included within any part of the question, including feedback in the form of a plot of the student's expression. Students can work line by line reasoning by equivalence until they have a final answer in the correct form. STACK supports working with significant figures and scientific units .","title":"STACK is rich in features"},{"location":"About/The_philosophy_of_STACK/#stack-is-open-source","text":"The problems faced by teachers, particularly in University, are the same the world over. The developers of STACK wanted to make sure students do not have to pay for access codes to published books and that institutions are not locked into an expensive system. At the same time, they wanted a system that encourages other developers to collaborate on improving STACK. STACK is the leading open souce online assessment system for mathematics and STEM. The business model for STACK relies on institutions collaborating on the infrustricture, remaining free to use the resulting system as the please, including in commercially as needed. Many design decisions for STACK are a direct result of choosing the GPL license for the codebase, for example the choice of Maxima as its Computer Algebra System (CAS), Moodle and ILIAS to take care of identity management, LaTeX/MathJax to filter and display mathematics. The documentation for STACK is available under the Creative Commons Attribution-ShareAlike 4.0 International License .","title":"STACK is open source"},{"location":"Authoring/","text":"Autor\u00eda La documentaci\u00f3n de creaci\u00f3n proporciona informaci\u00f3n sobre temas de creaci\u00f3n comunes. Estructura de pregunta en STACK Una PreguntaStack es el objeto b\u00e1sico del sistema. La siguiente tabla muestra los campos que componen una pregunta, con enlaces a la documentaci\u00f3n de cada uno. Nombre Detalles Nombre de Pregunta Nombra una pregunta Variables de Pregunta Estas son variables potencialmente aleatorias que pueden usarse para generar una pregunta. Texto de Pregunta Esta es la pregunta que realmente ve el estudiante. Retroalimentaci\u00f3n general La soluci\u00f3n trabajada solo est\u00e1 disponible despu\u00e9s de cerrar un elemento. Nota de pregunta Dos variantes de preguntas generadas aleatoriamente son diferentes si y s\u00f3lo si la nota de la pregunta es diferente. Utilice este campo para almacenar informaci\u00f3n \u00fatil que distinga variantes. Entradas Las entradas son las cosas, como los cuadros de formulario, con las que el estudiante realmente interact\u00faa. \u00c1rboles de respuesta potencial Estos son los algoritmos que establecen las propiedades matem\u00e1ticas de las respuestas de los estudiantes y generan retroalimentaci\u00f3n. Opciones Se pueden cambiar muchos comportamientos con las opciones. Otros temas de autor\u00eda La documentaci\u00f3n de creaci\u00f3n tambi\u00e9n cubre temas sobre: CASText Hojas de Hechos Conocidos , Bloques de preguntas , Usando JSXGraph . Tipos de entrada Entrada num\u00e9rica , Unidades en entrada , Razonamiento de equivalencia , Preguntas de respuestas m\u00faltiples , Dar retroalimentaci\u00f3n con \u00e1rboles de respuesta potencial Informaci\u00f3n sobre los tipos de retroalimentaci\u00f3n en STACK , Usando Responder pruebas . Test e informes Crear Test de Preguntas , Implementaci\u00f3n de variantes , Informes , Garantizar que las preguntas funcionen en el futuro . Temas de matematicas Demostraciones Dibujo de curvas . Otros Creando preguntas multilenguajes . \u00bfD\u00f3nde encontrar preguntas de ejemplo? . Preguntas frecuentes . Tambi\u00e9n ver Si no puede encontrar documentaci\u00f3n sobre el tema que est\u00e1 buscando, es posible que la encuentre en la secci\u00f3n CAS de la documentaci\u00f3n. Esto incluye documentaci\u00f3n sobre c\u00f3mo trabajar con Maxima en una pregunta y, por lo tanto, cubre temas como Desigualdades , Aleatorizaci\u00f3n , Trazar gr\u00e1ficos , Simplificaci\u00f3n .","title":"Autor\u00eda"},{"location":"Authoring/#autoria","text":"La documentaci\u00f3n de creaci\u00f3n proporciona informaci\u00f3n sobre temas de creaci\u00f3n comunes.","title":"Autor\u00eda"},{"location":"Authoring/#estructura-de-pregunta-en-stack","text":"Una PreguntaStack es el objeto b\u00e1sico del sistema. La siguiente tabla muestra los campos que componen una pregunta, con enlaces a la documentaci\u00f3n de cada uno. Nombre Detalles Nombre de Pregunta Nombra una pregunta Variables de Pregunta Estas son variables potencialmente aleatorias que pueden usarse para generar una pregunta. Texto de Pregunta Esta es la pregunta que realmente ve el estudiante. Retroalimentaci\u00f3n general La soluci\u00f3n trabajada solo est\u00e1 disponible despu\u00e9s de cerrar un elemento. Nota de pregunta Dos variantes de preguntas generadas aleatoriamente son diferentes si y s\u00f3lo si la nota de la pregunta es diferente. Utilice este campo para almacenar informaci\u00f3n \u00fatil que distinga variantes. Entradas Las entradas son las cosas, como los cuadros de formulario, con las que el estudiante realmente interact\u00faa. \u00c1rboles de respuesta potencial Estos son los algoritmos que establecen las propiedades matem\u00e1ticas de las respuestas de los estudiantes y generan retroalimentaci\u00f3n. Opciones Se pueden cambiar muchos comportamientos con las opciones.","title":"Estructura de pregunta en STACK"},{"location":"Authoring/#otros-temas-de-autoria","text":"La documentaci\u00f3n de creaci\u00f3n tambi\u00e9n cubre temas sobre:","title":"Otros temas de autor\u00eda"},{"location":"Authoring/#castext","text":"Hojas de Hechos Conocidos , Bloques de preguntas , Usando JSXGraph .","title":"CASText"},{"location":"Authoring/#tipos-de-entrada","text":"Entrada num\u00e9rica , Unidades en entrada , Razonamiento de equivalencia , Preguntas de respuestas m\u00faltiples ,","title":"Tipos de entrada"},{"location":"Authoring/#dar-retroalimentacion-con-arboles-de-respuesta-potencial","text":"Informaci\u00f3n sobre los tipos de retroalimentaci\u00f3n en STACK , Usando Responder pruebas .","title":"Dar retroalimentaci\u00f3n con \u00e1rboles de respuesta potencial"},{"location":"Authoring/#test-e-informes","text":"Crear Test de Preguntas , Implementaci\u00f3n de variantes , Informes , Garantizar que las preguntas funcionen en el futuro .","title":"Test e informes"},{"location":"Authoring/#temas-de-matematicas","text":"Demostraciones Dibujo de curvas .","title":"Temas de matematicas"},{"location":"Authoring/#otros","text":"Creando preguntas multilenguajes . \u00bfD\u00f3nde encontrar preguntas de ejemplo? . Preguntas frecuentes .","title":"Otros"},{"location":"Authoring/#tambien-ver","text":"Si no puede encontrar documentaci\u00f3n sobre el tema que est\u00e1 buscando, es posible que la encuentre en la secci\u00f3n CAS de la documentaci\u00f3n. Esto incluye documentaci\u00f3n sobre c\u00f3mo trabajar con Maxima en una pregunta y, por lo tanto, cubre temas como Desigualdades , Aleatorizaci\u00f3n , Trazar gr\u00e1ficos , Simplificaci\u00f3n .","title":"Tambi\u00e9n ver"},{"location":"Authoring/Author_FAQ/","text":"Author FAQ Which version of STACK do I have? If you navigate to the front page of the STACK documentation on your server then you can find the version number of the STACK plugin at the bottom of the page. If your site is https://maths.assessment/site then the URL of the STACK documentation is probably https://maths.assessment/site/question/type/stack/doc/doc.php . We distribute the documentation with the source code so you can check the STACK features you have available on your site by referring to this version of the documentation (rather than the docs on https://docs.stack-assessment.org/ which documents the latest release.). The version number is given in the form used by all Moodle plugins, e.g. 2022052300 which is basically a release date of the plugin you are using. How can I report a bug or make a suggestion? General community discussion takes place on https://stack-assessment.zulipchat.com/ The source code, and development discussion, is on github , with an additional ILIAS site. Can I write questions in multiple languages? Yes, see support for multiple languages . What is LaTeX? Where can I get help learning LaTeX? LaTeX is a document preparation system. For STACK questions we only need some simple LaTeX, so please do not be put off. In particular STACK only really makes use of LaTeX for mathematical markup, and does not use the document structure tags. An introduction for those totally new to LaTeX is found here . The mathematics environment is described here . Details about LaTeX are available from http://www.latex-project.org/guides/ . Note that some of the more complex examples will not work on STACK. Just keep things simple. Can I add HTML to CAS-enabled text? Yes. You can use HTML tags as usual. For example, you can use these tags to insert references to images etc. It's even possible to embed question values within image tags to allow calls to third-party dynamic graph generators. The Simple Venn sample question demonstrates using the Google charts API: How can I test out STACK specific functions in a Maxima session? Details of how to load STACK functions into a command line Maxima session are given in the STACK-Maxima sandbox . Why does a Maxima function not work in STACK? Not all Maxima functions are enabled by STACK, for obvious security reasons. It may be that your function belongs to a library which STACK does not load by default. Do you need to use Maxima's load command to use it? If so, you will need to ask your system administrator or the developers to add a load command so that this library becomes available. Some libraries are optional and may not be included by your local installation. You should also be aware that there are also a number of functions defined by STACK which are not standard Maxima functions. The command you need may well not be enabled since you should use one STACK provides instead. How can I change which Maxima functions STACK allows? This is a job for a developer. Please contact us. How can I use subscripts in STACK More information on subscripts is given in the atoms and subscripts section of the more general Maxima documentation. Also see the inputs extra option consolidatesubscripts . How can I confirm my student's answer is fully simplified? The philosophy of STACK is to establish properties of the student's answer. \"Simplify\" is an ambiguous notion. For example, (1) is simpler than (2^0) but (2^{2^{10}}) is probably simpler than writing the integer it represents in decimals. Everyone would agree that (x+2) is simpler than (\\frac{x^2-4}{x-2}), but we might argue that the first expression below is simpler. [ \\frac{x^{12}-1}{x-1} = x^{11}+x^{10}+x^9+x^8+x^7+x^6+x^5+x^4+x^3+x^2+x+1.] Simplify is often taken implicitly to mean \"the shortest equivalent expression\", but this issue is often not discussed. To avoid these problems, STACK expects teachers to specify the properties they want. For example, if you want the factored form you should test for this, not describe it as \"simplified\". In STACK a very useful test is equivalence up to associativity and commutativity of the basic arithmetic operations of addition and multiplication. This is often what teachers need in this case. Why doesn't Maxima give int(1/x,x)=log(abs(x)) ? Because ( \\int \\frac{1}{x}dx = \\log(|x|) ) is OK on either the negative or positive real axis, but it is not OK in the complex plane. There is a switch that controls this, however. (%i199) integrate(1/x,x); (%o199) log(x) (%i200) integrate(1/x,x), logabs : true; (%o200) log(abs(x)) Furthermore, the integration answer test will allow teachers to accept either log(x) or log(abs(x)) (or both) from a student. Why don't I get anything back from the CAS? Debugging questions can be difficult. We have not written a full parser, so we cannot trap all the errors. If all else fails, you may need to examine exactly the expression which is being sent to Maxima. To do this go to Site administration -> Plugins -> Question types -> STACK Ensure that CAS debugging is checked. Then, you should get error reporting. As an example navigate to Site administration -> Plugins -> Question types -> STACK -> Healthcheck There you can see an example of an expression sent to Maxima. Expressions such as this can be copied into the STACK-Maxima sandbox and evaluated. The errors returned here might help track down the problem. The issue is normally that you have tried to create a syntactically invalid maxima command. For example [a,,b] will crash Maxima. Since we have not created a full parser, all syntax errors like this are not yet trapped.","title":"Author FAQ"},{"location":"Authoring/Author_FAQ/#author-faq","text":"","title":"Author FAQ"},{"location":"Authoring/Author_FAQ/#which-version-of-stack-do-i-have","text":"If you navigate to the front page of the STACK documentation on your server then you can find the version number of the STACK plugin at the bottom of the page. If your site is https://maths.assessment/site then the URL of the STACK documentation is probably https://maths.assessment/site/question/type/stack/doc/doc.php . We distribute the documentation with the source code so you can check the STACK features you have available on your site by referring to this version of the documentation (rather than the docs on https://docs.stack-assessment.org/ which documents the latest release.). The version number is given in the form used by all Moodle plugins, e.g. 2022052300 which is basically a release date of the plugin you are using.","title":"Which version of STACK do I have?"},{"location":"Authoring/Author_FAQ/#how-can-i-report-a-bug-or-make-a-suggestion","text":"General community discussion takes place on https://stack-assessment.zulipchat.com/ The source code, and development discussion, is on github , with an additional ILIAS site.","title":"How can I report a bug or make a suggestion?"},{"location":"Authoring/Author_FAQ/#can-i-write-questions-in-multiple-languages","text":"Yes, see support for multiple languages .","title":"Can I write questions in multiple languages?"},{"location":"Authoring/Author_FAQ/#what-is-latex-where-can-i-get-help-learning-latex","text":"LaTeX is a document preparation system. For STACK questions we only need some simple LaTeX, so please do not be put off. In particular STACK only really makes use of LaTeX for mathematical markup, and does not use the document structure tags. An introduction for those totally new to LaTeX is found here . The mathematics environment is described here . Details about LaTeX are available from http://www.latex-project.org/guides/ . Note that some of the more complex examples will not work on STACK. Just keep things simple.","title":"What is LaTeX? Where can I get help learning LaTeX?"},{"location":"Authoring/Author_FAQ/#can-i-add-html-to-cas-enabled-text","text":"Yes. You can use HTML tags as usual. For example, you can use these tags to insert references to images etc. It's even possible to embed question values within image tags to allow calls to third-party dynamic graph generators. The Simple Venn sample question demonstrates using the Google charts API:","title":"Can I add HTML to CAS-enabled text?"},{"location":"Authoring/Author_FAQ/#how-can-i-test-out-stack-specific-functions-in-a-maxima-session","text":"Details of how to load STACK functions into a command line Maxima session are given in the STACK-Maxima sandbox .","title":"How can I test out STACK specific functions in a Maxima session?"},{"location":"Authoring/Author_FAQ/#why-does-a-maxima-function-not-work-in-stack","text":"Not all Maxima functions are enabled by STACK, for obvious security reasons. It may be that your function belongs to a library which STACK does not load by default. Do you need to use Maxima's load command to use it? If so, you will need to ask your system administrator or the developers to add a load command so that this library becomes available. Some libraries are optional and may not be included by your local installation. You should also be aware that there are also a number of functions defined by STACK which are not standard Maxima functions. The command you need may well not be enabled since you should use one STACK provides instead.","title":"Why does a Maxima function not work in STACK?"},{"location":"Authoring/Author_FAQ/#how-can-i-change-which-maxima-functions-stack-allows","text":"This is a job for a developer. Please contact us.","title":"How can I change which Maxima functions STACK allows?"},{"location":"Authoring/Author_FAQ/#how-can-i-use-subscripts-in-stack","text":"More information on subscripts is given in the atoms and subscripts section of the more general Maxima documentation. Also see the inputs extra option consolidatesubscripts .","title":"How can I use subscripts in STACK"},{"location":"Authoring/Author_FAQ/#how-can-i-confirm-my-students-answer-is-fully-simplified","text":"The philosophy of STACK is to establish properties of the student's answer. \"Simplify\" is an ambiguous notion. For example, (1) is simpler than (2^0) but (2^{2^{10}}) is probably simpler than writing the integer it represents in decimals. Everyone would agree that (x+2) is simpler than (\\frac{x^2-4}{x-2}), but we might argue that the first expression below is simpler. [ \\frac{x^{12}-1}{x-1} = x^{11}+x^{10}+x^9+x^8+x^7+x^6+x^5+x^4+x^3+x^2+x+1.] Simplify is often taken implicitly to mean \"the shortest equivalent expression\", but this issue is often not discussed. To avoid these problems, STACK expects teachers to specify the properties they want. For example, if you want the factored form you should test for this, not describe it as \"simplified\". In STACK a very useful test is equivalence up to associativity and commutativity of the basic arithmetic operations of addition and multiplication. This is often what teachers need in this case.","title":"How can I confirm my student's answer is fully simplified?"},{"location":"Authoring/Author_FAQ/#why-doesnt-maxima-give-int1xxlogabsx","text":"Because ( \\int \\frac{1}{x}dx = \\log(|x|) ) is OK on either the negative or positive real axis, but it is not OK in the complex plane. There is a switch that controls this, however. (%i199) integrate(1/x,x); (%o199) log(x) (%i200) integrate(1/x,x), logabs : true; (%o200) log(abs(x)) Furthermore, the integration answer test will allow teachers to accept either log(x) or log(abs(x)) (or both) from a student.","title":"Why doesn't Maxima give int(1/x,x)=log(abs(x))?"},{"location":"Authoring/Author_FAQ/#why-dont-i-get-anything-back-from-the-cas","text":"Debugging questions can be difficult. We have not written a full parser, so we cannot trap all the errors. If all else fails, you may need to examine exactly the expression which is being sent to Maxima. To do this go to Site administration -> Plugins -> Question types -> STACK Ensure that CAS debugging is checked. Then, you should get error reporting. As an example navigate to Site administration -> Plugins -> Question types -> STACK -> Healthcheck There you can see an example of an expression sent to Maxima. Expressions such as this can be copied into the STACK-Maxima sandbox and evaluated. The errors returned here might help track down the problem. The issue is normally that you have tried to create a syntactically invalid maxima command. For example [a,,b] will crash Maxima. Since we have not created a full parser, all syntax errors like this are not yet trapped.","title":"Why don't I get anything back from the CAS?"},{"location":"Authoring/Authoring_quick_start/","text":"Authoring quick start STACK provides a structured author quick start guide for new users. This guide has been used by many people, but we accept that authoring questions is a complex process. Developing expertise in authoring STACK questions will require some commitement.","title":"Authoring quick start"},{"location":"Authoring/Authoring_quick_start/#authoring-quick-start","text":"STACK provides a structured author quick start guide for new users. This guide has been used by many people, but we accept that authoring questions is a complex process. Developing expertise in authoring STACK questions will require some commitement.","title":"Authoring quick start"},{"location":"Authoring/CASText/","text":"CASText Introduction CASText is CAS-enabled text. CASText is simply HTML into which LaTeX mathematics and CAS commands can be embedded. These CAS commands are executed before the question is displayed to the user. Use only simple LaTeX mathematics structures . Only a small part of core LaTeX is supported. Many of the fields in a STACK question, such as the question text, are of this type. Information about Basic HTML is available elsewhere. Currently STACK does not process the LaTeX itself. It is displayed on the user's browser in a variety of ways, such as using MathJax . If you do not know how to use LaTeX, some simple examples are given in the author FAQ . Anything enclosed between \\( .... \\) symbols is treated as an inline equation , as is the case with normal LaTeX. Anything enclosed between matching \\[ and \\] is treated as a displayed equation , in the centre of a new line. We do not support the use of dollar symbols such as $...$ and $$...$$ for denoting LaTeX mathematics environments. See the notes on currency below and also the page on MathJax for more information. Don't use LaTeX text formatting features such as \\\\ , instead use the HTML versions. Anything enclosed between {@ and @} delimiters is evaluated by the CAS and replaced by the LaTeX representing the result. Some notes. By default this is displayed as an inline equation . This is analogous to using LaTeX symbols. Note however, that you don't need to use \\({@ stuff @}\\) , and that {@ stuff @} is sufficient. To get a displayed equation centred on a line of its own, you must use \\[{@ stuff @}\\] , as in LaTeX. The outer {} characters of {@ stuff @} will be left in the output to ensure that the output is considered as a single group by LaTeX. Anything enclosed between {# and #} delimiters is evaluated by the CAS and replaced by the Maxima representing the result. Basically, raw values usable in other tools or examples on how to input the value. If the Maxima variable x is a string then {@x@} produces the string contents without quote marks or LaTeX environment, while {#x#} produces the string contents enclosed by quote marks. If you want comma separated values without the list brackets then use {@stack_disp_comma_separate( list )@} . This function turns a list into a string representation of its arguments, without braces. Multiple CAS expressions may appear in a single LaTeX equation, as needed. For example \\[ \\frac{@p@}{@q@} \\] . Note that many problems are best solved at the level of the CAS, e.g. by defining a variable p/q in the CAS, not at the level of display. This is a design decision which needs experience to resolve efficiently in each case. For an example of this, see the example showing working . Here is an example The derivative of {@sin(1/(1+x^2))@} is \\[ \\frac{\\mathrm{d}}{\\mathrm{d}x} \\sin \\left( \\frac{1}{x^2+1} \\right) = {@diff(sin(1/(1+x^2)),x)@} \\] You can input this as <code>{#diff(sin(1/(1+x^2)),x)#}</code> Variables ## {#Variables} CASText may depend on variables previously defined in the question variables field. Where the CASText appears in the fields of a potential response trees , the variables in the feedback variables may also be included. To control whether or not the CAS expressions are simplified, see the details about selective simplification . Question text {#question_text} The question text what the student actually sees. This was called \"question text\" in previous versions. It is a slightly modified form of CAS text. To allow a student to answer a question you must include an inputs in the question text. For example, students need a box into which their answer will be put. To place an input into the question enclose the name of the Maxima variable to which the student's answer is assigned between inside the following tag. If the student's answer is going to be assigned to the variable ans1 then use the tag [[input:ans1]] . You will also be required to place a corresponding tag to indicate the position of any validation feedback (whether or not this is shown to the student): [[validation:ans1]] . You can use any legitimate variable name. When the question is created this is replaced with the appropriate input . When the student answers, this variable name is available to each potential response trees . Inputs are created and deleted by adding appropriate tags to the question text. Therefore, beware if you delete the tags as this will also delete the input from the question. To place another potential response tree in the question just choose a sensible name and add in a tag [[feedback:prt1]] . These tags are replaced by appropriate feedback as necessary. Note, if you add the feedback to the question text this will always be shown by the STACK question, regardless of the quiz settings. You may prefer to place the tags in the \"specific feedback\" block of the editing form. Availability of the specific feedback is controlled by the Moodle quiz settings. There is some compromise here between the ability to position the feedback tags anywhere in the question text (e.g. next to a particular input) and control over when it is shown. This is most difficult in questions with many parts. For a single part question we recommend you use the specific feedback block. Tags can be moved anywhere within the question text. Do not place feedback tags within LaTeX equations! PRTs are created and deleted by adding appropriate tags to the question text. Therefore, beware if you delete the tags as this will also delete the PRT from the question, which may result in lost work. Some sites use a database which is not case sensitive (!), so please ensure tags differ by more than case sensitivity. E.g. avoid [[input:ans_m]] and [[input:ans_M]] in questions. Similarly with feedback tags. Because most databases are case sensitive we do not check for this issue. General feedback/Worked solution {#general_feedback} General feedback (called \"worked solution\" in previous versions) is shown to the student after they have attempted the question. Unlike feedback, which depends on the response the student gave, the same general feedback text is shown to all students. The general feedback may depend on any question variables, but may not depend on any of the inputs. While this design decision is restrictive, it is a deliberate separation of feedback which should be done via potential response trees, from a model solution to this problem which can be written before a question is deployed. CASText and currency {#currency} It is common to want to use the dollar sign for currency. However, this conflicts with the use of the dollar sign for delimiters for mathematics. For this reason we discourage the use of dollars to delimit mathematics in STACK. If you are using dollars for currency then you must protect them with a backslash, i.e. \\$ , otherwise the CASText validation will fail. Facts STACK has an in-built formula sheet. This used to be called a \"hints\" system, but the word hint is used elsewhere in Moodle so this is now called \"facts\". Parts of this can be added to CASText using the fact sheet Reference materials HTML and LaTeX are needed for authoring STACK questions, and some basic reference materials is give elsewhere. Some basic HTML examples. Some basic LaTeX examples. There is a specific page for actuarial notation . CASText generating functions If a CASText area is to include several copies of repeatative content, for instance several versions of some text (or a SVG graphic) containing different parameters, it is possible to define a CASText generating function within the Question variables using the STACK function castext . For example, within the Question variables section, define explanation(x,y):=castext(\"Substituting {@x@} into the expression gives {@y@}.\"); This can then be used several times within any CASText area: [[ comment ]] Generated text [[/ comment ]] {@explanation(a,b)@} {@explanation(c,d)@} Notes The argument of castext must be a single atomic string, not a reference to one but a static string value. Since Maxima does not require new lines to be escaped, new lines can be started within the castext string argument. Care needs to be taken with any quotation marks within the castext argument. For HTML attributes within such text, use '...' . Two castext objects can be joined with castext_concat() Google Charts The Google charts API can be used to create a URL based on the random variables.","title":"CASText"},{"location":"Authoring/CASText/#castext","text":"","title":"CASText"},{"location":"Authoring/CASText/#introduction","text":"CASText is CAS-enabled text. CASText is simply HTML into which LaTeX mathematics and CAS commands can be embedded. These CAS commands are executed before the question is displayed to the user. Use only simple LaTeX mathematics structures . Only a small part of core LaTeX is supported. Many of the fields in a STACK question, such as the question text, are of this type. Information about Basic HTML is available elsewhere. Currently STACK does not process the LaTeX itself. It is displayed on the user's browser in a variety of ways, such as using MathJax . If you do not know how to use LaTeX, some simple examples are given in the author FAQ . Anything enclosed between \\( .... \\) symbols is treated as an inline equation , as is the case with normal LaTeX. Anything enclosed between matching \\[ and \\] is treated as a displayed equation , in the centre of a new line. We do not support the use of dollar symbols such as $...$ and $$...$$ for denoting LaTeX mathematics environments. See the notes on currency below and also the page on MathJax for more information. Don't use LaTeX text formatting features such as \\\\ , instead use the HTML versions. Anything enclosed between {@ and @} delimiters is evaluated by the CAS and replaced by the LaTeX representing the result. Some notes. By default this is displayed as an inline equation . This is analogous to using LaTeX symbols. Note however, that you don't need to use \\({@ stuff @}\\) , and that {@ stuff @} is sufficient. To get a displayed equation centred on a line of its own, you must use \\[{@ stuff @}\\] , as in LaTeX. The outer {} characters of {@ stuff @} will be left in the output to ensure that the output is considered as a single group by LaTeX. Anything enclosed between {# and #} delimiters is evaluated by the CAS and replaced by the Maxima representing the result. Basically, raw values usable in other tools or examples on how to input the value. If the Maxima variable x is a string then {@x@} produces the string contents without quote marks or LaTeX environment, while {#x#} produces the string contents enclosed by quote marks. If you want comma separated values without the list brackets then use {@stack_disp_comma_separate( list )@} . This function turns a list into a string representation of its arguments, without braces. Multiple CAS expressions may appear in a single LaTeX equation, as needed. For example \\[ \\frac{@p@}{@q@} \\] . Note that many problems are best solved at the level of the CAS, e.g. by defining a variable p/q in the CAS, not at the level of display. This is a design decision which needs experience to resolve efficiently in each case. For an example of this, see the example showing working . Here is an example The derivative of {@sin(1/(1+x^2))@} is \\[ \\frac{\\mathrm{d}}{\\mathrm{d}x} \\sin \\left( \\frac{1}{x^2+1} \\right) = {@diff(sin(1/(1+x^2)),x)@} \\] You can input this as <code>{#diff(sin(1/(1+x^2)),x)#}</code>","title":"Introduction"},{"location":"Authoring/CASText/#variables-variables","text":"CASText may depend on variables previously defined in the question variables field. Where the CASText appears in the fields of a potential response trees , the variables in the feedback variables may also be included. To control whether or not the CAS expressions are simplified, see the details about selective simplification .","title":"Variables ##   {#Variables}"},{"location":"Authoring/CASText/#question-text-question_text","text":"The question text what the student actually sees. This was called \"question text\" in previous versions. It is a slightly modified form of CAS text. To allow a student to answer a question you must include an inputs in the question text. For example, students need a box into which their answer will be put. To place an input into the question enclose the name of the Maxima variable to which the student's answer is assigned between inside the following tag. If the student's answer is going to be assigned to the variable ans1 then use the tag [[input:ans1]] . You will also be required to place a corresponding tag to indicate the position of any validation feedback (whether or not this is shown to the student): [[validation:ans1]] . You can use any legitimate variable name. When the question is created this is replaced with the appropriate input . When the student answers, this variable name is available to each potential response trees . Inputs are created and deleted by adding appropriate tags to the question text. Therefore, beware if you delete the tags as this will also delete the input from the question. To place another potential response tree in the question just choose a sensible name and add in a tag [[feedback:prt1]] . These tags are replaced by appropriate feedback as necessary. Note, if you add the feedback to the question text this will always be shown by the STACK question, regardless of the quiz settings. You may prefer to place the tags in the \"specific feedback\" block of the editing form. Availability of the specific feedback is controlled by the Moodle quiz settings. There is some compromise here between the ability to position the feedback tags anywhere in the question text (e.g. next to a particular input) and control over when it is shown. This is most difficult in questions with many parts. For a single part question we recommend you use the specific feedback block. Tags can be moved anywhere within the question text. Do not place feedback tags within LaTeX equations! PRTs are created and deleted by adding appropriate tags to the question text. Therefore, beware if you delete the tags as this will also delete the PRT from the question, which may result in lost work. Some sites use a database which is not case sensitive (!), so please ensure tags differ by more than case sensitivity. E.g. avoid [[input:ans_m]] and [[input:ans_M]] in questions. Similarly with feedback tags. Because most databases are case sensitive we do not check for this issue.","title":"Question text {#question_text}"},{"location":"Authoring/CASText/#general-feedbackworked-solution-general_feedback","text":"General feedback (called \"worked solution\" in previous versions) is shown to the student after they have attempted the question. Unlike feedback, which depends on the response the student gave, the same general feedback text is shown to all students. The general feedback may depend on any question variables, but may not depend on any of the inputs. While this design decision is restrictive, it is a deliberate separation of feedback which should be done via potential response trees, from a model solution to this problem which can be written before a question is deployed.","title":"General feedback/Worked solution {#general_feedback}"},{"location":"Authoring/CASText/#castext-and-currency-currency","text":"It is common to want to use the dollar sign for currency. However, this conflicts with the use of the dollar sign for delimiters for mathematics. For this reason we discourage the use of dollars to delimit mathematics in STACK. If you are using dollars for currency then you must protect them with a backslash, i.e. \\$ , otherwise the CASText validation will fail.","title":"CASText and currency {#currency}"},{"location":"Authoring/CASText/#facts","text":"STACK has an in-built formula sheet. This used to be called a \"hints\" system, but the word hint is used elsewhere in Moodle so this is now called \"facts\". Parts of this can be added to CASText using the fact sheet","title":"Facts"},{"location":"Authoring/CASText/#reference-materials","text":"HTML and LaTeX are needed for authoring STACK questions, and some basic reference materials is give elsewhere. Some basic HTML examples. Some basic LaTeX examples. There is a specific page for actuarial notation .","title":"Reference materials"},{"location":"Authoring/CASText/#castext-generating-functions","text":"If a CASText area is to include several copies of repeatative content, for instance several versions of some text (or a SVG graphic) containing different parameters, it is possible to define a CASText generating function within the Question variables using the STACK function castext . For example, within the Question variables section, define explanation(x,y):=castext(\"Substituting {@x@} into the expression gives {@y@}.\"); This can then be used several times within any CASText area: [[ comment ]] Generated text [[/ comment ]] {@explanation(a,b)@} {@explanation(c,d)@}","title":"CASText generating functions"},{"location":"Authoring/CASText/#notes","text":"The argument of castext must be a single atomic string, not a reference to one but a static string value. Since Maxima does not require new lines to be escaped, new lines can be started within the castext string argument. Care needs to be taken with any quotation marks within the castext argument. For HTML attributes within such text, use '...' . Two castext objects can be joined with castext_concat()","title":"Notes"},{"location":"Authoring/CASText/#google-charts","text":"The Google charts API can be used to create a URL based on the random variables.","title":"Google Charts"},{"location":"Authoring/Deploying/","text":"Deploying Questions in STACK can contain randomly generated elements. A student will be given a random variant of a question generated by a pseudo-random seed. It is best if questions are not randomly generated on the fly. Instead the teacher is strongly advised to pre-generate and \"deploy\" variants of a question. When a student attempts the question they will be given a random selection from the deployed variants. We have chosen to add the extra deploy step, instead of generating on the fly, for a number of reasons. STACK runs all the question tests on each deployed variant to establish each variant of the question is working. This aids quality control. By using question tests it is unlikely a student will be given a random variant which does not work correctly. The teacher can decide if each deployed variant appears to be of equal difficulty. The teacher can easily delete variants they do not like. Experience suggests there are unanticipated consequences of randomly generating questions. Really only statistics generated by real use can establish fairness amongst variants. The pre-generation combined with a cache helps minimise server load during the start of a large class which aids robustness of the whole experience. This helps STACK to optimize its use of the CAS for efficiency and reliability via a dynamic cache . Notes: If an author does not deploy any variants (not advised!) then the student gets any random variant. Questions that don't use randomization cannot be deployed explicitly. STACK automatically detects randomization. Variants are different if and only if the evaluated question note is different. Any number of instances can be requested and deployed but only one instance of each question note can be deployed. It is possible to deploy (n) variants in one go, but the system will give up if too many duplicate question notes are generated. The teacher is responsible to ensure question variants are different if and only if the question notes are different. The deployment management also allows specific variants to be dropped. You can also return to the question preview window and try a specific deployed variant. Deployment is not required for authors to test questions: an instance is generated on-the-fly. Once a quiz is underway it is still possible in Moodle to edit a question, and to re-grade students' attempts. This is useful in rare cases where there is a mistake, you want to improve the worked solution, you would like to add better feedback/partial credit for a particular etc. However, do not change anything related to the random generation of questions! Results are unpredictable, and may well result in a situation when the modified question is different to that answered by students taking the test prior to modifications... How to deploy question variants The deployment interface can be found by editing a question and clicking on question tests and deployed variants. This link can also be found in the top right corner when previewing a question. This page contains the list of currently deployed variants, and links to un-deploy a variant. Notes: You can click on the seed numbers to view a particular random variant. The testing page lists values of all the variables, displays the question and the worked solution. The testing page is a very efficient way to look at your random variants. When you deploy new variants STACK will run all the question tests. If a test fails, the generation process will stop with an error message, showing the failing test. Limitations There is currently no way to loop systematically over all variants and deploy them all.","title":"Deploying"},{"location":"Authoring/Deploying/#deploying","text":"Questions in STACK can contain randomly generated elements. A student will be given a random variant of a question generated by a pseudo-random seed. It is best if questions are not randomly generated on the fly. Instead the teacher is strongly advised to pre-generate and \"deploy\" variants of a question. When a student attempts the question they will be given a random selection from the deployed variants. We have chosen to add the extra deploy step, instead of generating on the fly, for a number of reasons. STACK runs all the question tests on each deployed variant to establish each variant of the question is working. This aids quality control. By using question tests it is unlikely a student will be given a random variant which does not work correctly. The teacher can decide if each deployed variant appears to be of equal difficulty. The teacher can easily delete variants they do not like. Experience suggests there are unanticipated consequences of randomly generating questions. Really only statistics generated by real use can establish fairness amongst variants. The pre-generation combined with a cache helps minimise server load during the start of a large class which aids robustness of the whole experience. This helps STACK to optimize its use of the CAS for efficiency and reliability via a dynamic cache . Notes: If an author does not deploy any variants (not advised!) then the student gets any random variant. Questions that don't use randomization cannot be deployed explicitly. STACK automatically detects randomization. Variants are different if and only if the evaluated question note is different. Any number of instances can be requested and deployed but only one instance of each question note can be deployed. It is possible to deploy (n) variants in one go, but the system will give up if too many duplicate question notes are generated. The teacher is responsible to ensure question variants are different if and only if the question notes are different. The deployment management also allows specific variants to be dropped. You can also return to the question preview window and try a specific deployed variant. Deployment is not required for authors to test questions: an instance is generated on-the-fly. Once a quiz is underway it is still possible in Moodle to edit a question, and to re-grade students' attempts. This is useful in rare cases where there is a mistake, you want to improve the worked solution, you would like to add better feedback/partial credit for a particular etc. However, do not change anything related to the random generation of questions! Results are unpredictable, and may well result in a situation when the modified question is different to that answered by students taking the test prior to modifications...","title":"Deploying"},{"location":"Authoring/Deploying/#how-to-deploy-question-variants","text":"The deployment interface can be found by editing a question and clicking on question tests and deployed variants. This link can also be found in the top right corner when previewing a question. This page contains the list of currently deployed variants, and links to un-deploy a variant. Notes: You can click on the seed numbers to view a particular random variant. The testing page lists values of all the variables, displays the question and the worked solution. The testing page is a very efficient way to look at your random variants. When you deploy new variants STACK will run all the question tests. If a test fails, the generation process will stop with an error message, showing the failing test.","title":"How to deploy question variants"},{"location":"Authoring/Deploying/#limitations","text":"There is currently no way to loop systematically over all variants and deploy them all.","title":"Limitations"},{"location":"Authoring/Equivalence_reasoning/","text":"Getting started with equivalence reasoning This guide shows you how to write STACK questions using the line by line equivalence reasoning input type. As an example, we want the students to expand the cubic ((x+2)^3) showing their working in a stepwise fashion, line by line. The student's response to this question will allow us to test their knowledge and competency in the following: Expanding brackets Simplifying by collecting like terms Therefore we need them to show their working. Minimal working question Create a new STACK question, give it a suitable name and then copy the following into the Question variables box: p:(x+2)^3; taf:ev(expand(p),simp); ta:[(x+2)^3,stackeq((x+2)*(x+2)^2),stackeq((x+2)*(x^2+4*x+4)),stackeq(x^3+4*x^2+4*x+2*x^2+8*x+8),stackeq(taf)]; The first variable, p , is the expression in the question. The variable taf is the final model answer. The variable ta is a list containing each step we are expecting our students to express as they work towards the final answer: ((x+2)^{3}) (=(x+2)(x+2)^{2}) (=(x+2)(x^{2}+4x+4)) (=x^{3}+4x^{2}+4x+2x^{2}+8x+8) (=x^{3}+6x^{2}+12x+8) Notes: We use the CAS functions expand() and ev(...,simp) to simply the output of expand() , to determine the model answer. The special function stackeq is replaced by unary equals. Maxima expects equality to be an infix (a=b) not unary prefix (=b), so STACK needs this special operator. Students using the input area can just start a line with (=), but teachers cannot! In this context the teacher's answer and the student's answer is a list. The whole answer is a single object, which we assess. Copy the following text into the Question text box: Expand {@p@}, remembering to show your working. [[input:ans1]] [[validation:ans1]] Setting the input options Under the Input:ans1 header specify Equivalence reasoning from the Input type drop-down and ta as the model answer. We want students to work through the expansion one line at a time, so let's include a hint. Copy the following into the Syntax hint box, within the Input:ans1 header:: [(x+2)^3,stackeq(?)] This is a list, and uses stackeq . For students in this context, it is probably sensible to \"insert stars\" and provide the most forgiving input syntax available, but that is optional. We need to tell STACK to compare the first line of the student's working to the first line of the question. This makes sure the student \"answers the right question\". Type firstline into the Extra options box within the Input:ans1 header. This ensures a student's response will be invalid if they don't have the correct first line. firstline can also be used in the Syntax hint box. The first line is then already written in the answer-field when the student opens the question. Setting the potential response tree As a minimal potential response tree have one node, with Answer test = EquivFirst SAns = ans1 TAns = ta Auto-simplify = no Note, the Auto-simplify field is not in the node of the PRT, but a PRT option. Setting the question options Under the options section, turn off simplification by setting Auto-simplify = no Save the question. This should be a minimal working question, so preview it and add in at least one question test. More specific feedback At this point the question only checks Has the student started from the right expression, specifically is the first line of their argument equivalent to the first line of ta using EqualComAss test (commutativity and associativity)? Are all the lines in the student's answer algebraically equivalent? Clearly, more is needed for a complete sensible question. At this point please read the equivalence reasoning input type documentation. Getting to the right place We probably want the student to end up at the expression (x^{3}+6x^{2}+12x+8). To check is the student has reached this point, add another node to the PRT. If node 1 is true (i.e. the student started in the correct place and didn't make a mistake) then connect to node 2. Node 2 should be set up as SAns = last(ans1) TAns = last(ta) answer test = EqualComAss Auto-simplify = no This node adds in feedback to check the student has reached the right place. Note, by using EqualComAss both (x^{3}+6x^{2}+12x+8) and (x^{3}+x^{2}6+8+12x) will be accepted. If you really want the term order as well, as in, (x^{3}+6x^{2}+12x+8) then you need to use CasEqual as the answer test instead. What is a legitimate step? At this point, any expressions which are equivalent are considered to be a legitimate step. Clearly this is not entirely satisfactory. At this point in the development there is no concept of \"a step\" and indeed this appears to be very hard to define. In the future we will develop better tools for checking \"step size\", and any contributions in this direction are welcome. Teachers can check the students answer is long enough or not too long by looking at length(ta) . Teachers can check if specific expressions appear somewhere inside the student's answer. To facilitate this search we provide the function stack_equiv_find_step(ex, exl) . This looks for expression ex in the list exl using ATEqualComAss . It returns the list of indices of the position. If you just want to know if the expression is missing use the predicate emptyp . As an alternative you can check that the factored form exists somewhere in the student's answers using the following code in the feedback variables . foundfac:sublist(ans1,lambda([ex], equationp(ex) and is(rhs(ex)=0))); foundfac:ev(any_listp(lambda([ex], second(ATFacForm(lhs(ex),lhs(ex),x))), foundfac), simp); At this stage there are few in-built features within STACK. A lot is possible, but as the above example illustrates, this requires question authors to write more Maxima code than with other question types. This feature will be developed by use over the next few years. If you have experience, and views, on how this should work please contact the developers.","title":"Getting started with equivalence reasoning"},{"location":"Authoring/Equivalence_reasoning/#getting-started-with-equivalence-reasoning","text":"This guide shows you how to write STACK questions using the line by line equivalence reasoning input type. As an example, we want the students to expand the cubic ((x+2)^3) showing their working in a stepwise fashion, line by line. The student's response to this question will allow us to test their knowledge and competency in the following: Expanding brackets Simplifying by collecting like terms Therefore we need them to show their working.","title":"Getting started with equivalence reasoning"},{"location":"Authoring/Equivalence_reasoning/#minimal-working-question","text":"Create a new STACK question, give it a suitable name and then copy the following into the Question variables box: p:(x+2)^3; taf:ev(expand(p),simp); ta:[(x+2)^3,stackeq((x+2)*(x+2)^2),stackeq((x+2)*(x^2+4*x+4)),stackeq(x^3+4*x^2+4*x+2*x^2+8*x+8),stackeq(taf)]; The first variable, p , is the expression in the question. The variable taf is the final model answer. The variable ta is a list containing each step we are expecting our students to express as they work towards the final answer: ((x+2)^{3}) (=(x+2)(x+2)^{2}) (=(x+2)(x^{2}+4x+4)) (=x^{3}+4x^{2}+4x+2x^{2}+8x+8) (=x^{3}+6x^{2}+12x+8) Notes: We use the CAS functions expand() and ev(...,simp) to simply the output of expand() , to determine the model answer. The special function stackeq is replaced by unary equals. Maxima expects equality to be an infix (a=b) not unary prefix (=b), so STACK needs this special operator. Students using the input area can just start a line with (=), but teachers cannot! In this context the teacher's answer and the student's answer is a list. The whole answer is a single object, which we assess. Copy the following text into the Question text box: Expand {@p@}, remembering to show your working. [[input:ans1]] [[validation:ans1]]","title":"Minimal working question"},{"location":"Authoring/Equivalence_reasoning/#setting-the-input-options","text":"Under the Input:ans1 header specify Equivalence reasoning from the Input type drop-down and ta as the model answer. We want students to work through the expansion one line at a time, so let's include a hint. Copy the following into the Syntax hint box, within the Input:ans1 header:: [(x+2)^3,stackeq(?)] This is a list, and uses stackeq . For students in this context, it is probably sensible to \"insert stars\" and provide the most forgiving input syntax available, but that is optional. We need to tell STACK to compare the first line of the student's working to the first line of the question. This makes sure the student \"answers the right question\". Type firstline into the Extra options box within the Input:ans1 header. This ensures a student's response will be invalid if they don't have the correct first line. firstline can also be used in the Syntax hint box. The first line is then already written in the answer-field when the student opens the question.","title":"Setting the input options"},{"location":"Authoring/Equivalence_reasoning/#setting-the-potential-response-tree","text":"As a minimal potential response tree have one node, with Answer test = EquivFirst SAns = ans1 TAns = ta Auto-simplify = no Note, the Auto-simplify field is not in the node of the PRT, but a PRT option.","title":"Setting the potential response tree"},{"location":"Authoring/Equivalence_reasoning/#setting-the-question-options","text":"Under the options section, turn off simplification by setting Auto-simplify = no Save the question. This should be a minimal working question, so preview it and add in at least one question test.","title":"Setting the question options"},{"location":"Authoring/Equivalence_reasoning/#more-specific-feedback","text":"At this point the question only checks Has the student started from the right expression, specifically is the first line of their argument equivalent to the first line of ta using EqualComAss test (commutativity and associativity)? Are all the lines in the student's answer algebraically equivalent? Clearly, more is needed for a complete sensible question. At this point please read the equivalence reasoning input type documentation.","title":"More specific feedback"},{"location":"Authoring/Equivalence_reasoning/#getting-to-the-right-place","text":"We probably want the student to end up at the expression (x^{3}+6x^{2}+12x+8). To check is the student has reached this point, add another node to the PRT. If node 1 is true (i.e. the student started in the correct place and didn't make a mistake) then connect to node 2. Node 2 should be set up as SAns = last(ans1) TAns = last(ta) answer test = EqualComAss Auto-simplify = no This node adds in feedback to check the student has reached the right place. Note, by using EqualComAss both (x^{3}+6x^{2}+12x+8) and (x^{3}+x^{2}6+8+12x) will be accepted. If you really want the term order as well, as in, (x^{3}+6x^{2}+12x+8) then you need to use CasEqual as the answer test instead.","title":"Getting to the right place"},{"location":"Authoring/Equivalence_reasoning/#what-is-a-legitimate-step","text":"At this point, any expressions which are equivalent are considered to be a legitimate step. Clearly this is not entirely satisfactory. At this point in the development there is no concept of \"a step\" and indeed this appears to be very hard to define. In the future we will develop better tools for checking \"step size\", and any contributions in this direction are welcome. Teachers can check the students answer is long enough or not too long by looking at length(ta) . Teachers can check if specific expressions appear somewhere inside the student's answer. To facilitate this search we provide the function stack_equiv_find_step(ex, exl) . This looks for expression ex in the list exl using ATEqualComAss . It returns the list of indices of the position. If you just want to know if the expression is missing use the predicate emptyp . As an alternative you can check that the factored form exists somewhere in the student's answers using the following code in the feedback variables . foundfac:sublist(ans1,lambda([ex], equationp(ex) and is(rhs(ex)=0))); foundfac:ev(any_listp(lambda([ex], second(ATFacForm(lhs(ex),lhs(ex),x))), foundfac), simp); At this stage there are few in-built features within STACK. A lot is possible, but as the above example illustrates, this requires question authors to write more Maxima code than with other question types. This feature will be developed by use over the next few years. If you have experience, and views, on how this should work please contact the developers.","title":"What is a legitimate step?"},{"location":"Authoring/Error_trapping/","text":"Error trapping How to I trap errors generated from a student's answer? Errors are generated for a number of reasons. Mostly, they are important and should not be ignored! Normally, students should not be penalised if a question \"does not work\" because the PRT generated an error. Any runtime error during traversing a PRT will cause an error. This error will stop further exectution of the tree, and students will see a runtime error message. This will be flagged in the response summary as [RUNTIME_ERROR] . A student's answer can generate mathematical errors for a number of reasons, but the most common is evaluating a function outside its mathematical domain. Common elementary examples are Division by zero. Evaluating (\\tan(x)) at points like (\\pi/2). (Try tan(%pi/2) in Maxima). Sometimes you need to trap and ignore errors like this in the student's answer, or create a \"guard clause\" to decide if part of a PRT should be executed or not. Sometimes these are inevitable and need to be ignored. If one of the feedback variables throws an error then this will not stop the PRT executing. If there is an error, this will be flagged in the response summary as [RUNTIME_FV_ERROR] (fv here means feedback variables). You can, and should use the feedback variables to trap any errors you would like to condone. E.g. you could define the following in the feedback variables. sa1:errcatch(tan(ans1)); If ans1:%pi/2 then sa1 will be the empty list [] . Otherwise, sa1 will be the list containg the result, and you can use first(sa1) in a PRT. To trap a runtime error, or create a guard clause, you do need extra node in your tree (e.g. is sa1 empty) or an if statement in your feedback variables. The default is to show errors, so if you choose to test for and condone errors you need extra clauses.","title":"Error trapping"},{"location":"Authoring/Error_trapping/#error-trapping","text":"How to I trap errors generated from a student's answer? Errors are generated for a number of reasons. Mostly, they are important and should not be ignored! Normally, students should not be penalised if a question \"does not work\" because the PRT generated an error. Any runtime error during traversing a PRT will cause an error. This error will stop further exectution of the tree, and students will see a runtime error message. This will be flagged in the response summary as [RUNTIME_ERROR] . A student's answer can generate mathematical errors for a number of reasons, but the most common is evaluating a function outside its mathematical domain. Common elementary examples are Division by zero. Evaluating (\\tan(x)) at points like (\\pi/2). (Try tan(%pi/2) in Maxima). Sometimes you need to trap and ignore errors like this in the student's answer, or create a \"guard clause\" to decide if part of a PRT should be executed or not. Sometimes these are inevitable and need to be ignored. If one of the feedback variables throws an error then this will not stop the PRT executing. If there is an error, this will be flagged in the response summary as [RUNTIME_FV_ERROR] (fv here means feedback variables). You can, and should use the feedback variables to trap any errors you would like to condone. E.g. you could define the following in the feedback variables. sa1:errcatch(tan(ans1)); If ans1:%pi/2 then sa1 will be the empty list [] . Otherwise, sa1 will be the list containg the result, and you can use first(sa1) in a PRT. To trap a runtime error, or create a guard clause, you do need extra node in your tree (e.g. is sa1 empty) or an if statement in your feedback variables. The default is to show errors, so if you choose to test for and condone errors you need extra clauses.","title":"Error trapping"},{"location":"Authoring/Errors/","text":"Authoring validation errors This document aims to explain certain errors that may appear during authoring, specifically during validation/saving of a question. We are constantly improving the error trapping for question authors and so some of these errors might be new and appear during upgrades, and break, previously functional materials. In some cases we have good reasons for now preventing actions which may have been permitted in the past. For some situations one can do things differently to lift the suspicions of the validation system. Summary of advice. Do not attempt to redefine function names or constants which are already defined as part of Maxima. Avoid using the same name for functions and variables. Avoid complex substitutions. Do not attempt to redefine the variables which are the names of inputs. Use subst or at to do substitutions instead of ev . Forbidden functions and variables Some functions affecting the underlying system are forbidden to protect the environment, others are forbidden due to excessive load, and finally some have been disabled due to the way they return their values. Likewise, some variables/constants representing the state of the underlying system have been either marked as forbbiden to access or to modify. Use other names if this was just a collision of identifiers, otherwise this is just the way it is. Redefining internal-functions Some functions are part of the core functionality and the system relies on their behaviour. For example redefining what append() does for lists would have significant effects around the system, this is why (re)defining functions with some specific names is forbidden. You are free to use other names for your functions. Note that not all internal functions or functions they use are blocked by this, they might get blocked in the future or some might be left as something that can be redefined to tune the logic. We suggest you do not attempt to redefine function names or constants which are already defined as part of Maxima. Substitutions unclear or otherwise Should you do substitutions of values in your code and the target of the substitution is an identifier that is later used as a function-name, things may become difficult. Avoid using the same name for functions and variables. Also if you use complex means to construct the substitutions themselves the system may need to assume that all possible identifiers in the expression that the substitutions are applied to are being targetted by unknown values, this can be avoided by avoiding complex construction of the substs itself. Note, these issues are now much rarer after the security system changed in 4.4. Yo should not even see these errors with the new system. Example 1 v:1; /* particular case of rand([1,2]) */ trig:[sin,cos][v]; sub:[(sin(x))^2=1-(cos(x))^2,(cos(x))^2=1-(sin(x))^2][v]; f:(trig(x))^3; df:diff(f,x); df_simp:subst(sub,df); This produces the error message The function name \"sin\" is potentially redefined in unclear substitutions. The function name \"diff\" is potentially redefined in unclear substitutions. The issue is that sub is a complicated expression here, so the validation system is not able to check that this code is not doing something suspicious. It may be worth trying to use ev rather than subst - for this example, the question works again if we change the final line to the following: df_simp:ev(df, sub); Example 2 solution : rhs(ode2(eqn,y,x)); vars : delete(x,listofvars(solution)); TAns11 : subst([vars[1]=A,vars[2]=B],solution); TAns12 : subst([vars[2]=A,vars[1]=B],solution); Here the error messsages will claim that pretty much everything that goes into solution is potentially redefined in unclear substitutions. What the code above does is that it solves a differential equation with CAS and then asks the CAS for the names of the constants being used. Depending on the shape of the equation there might be more than one but in this case there are always exactly two of them. %k1 and %k2 , if there were only one it would probably get called %c so there is a reason for checking what they are. Why the example asks for those constants names is because the author has chosen to force the student to use A and B as the constants and constructs different correct answers for the two ways of selecting the order of the constants. The problem arises from the substitution of the constants which now finds the names of them from a list ( vars ) that is not directly visible to the validation system. There are two ways forward from this. Firstly, the question could use the SubstEquiv test that allows any names for those constants to be used and then just confirms that the correct ones were used if that matters, however then the teachers answer might look silly with those CAS-style constants so you would still need to replace them. Secondly, one can hard-code the names of the constants, in this case they are always the same so that should not be a problem: solution : rhs(ode2(eqn,y,x)); TAns11 : subst([%k1=A,%k2=B],solution); TAns12 : subst([%k2=A,%k1=B],solution); Use of the students answer Since 4.3 you have been forbidden from writing to the variable storing the students answer, feel free to simply store whatever you wanted to store in any other valid variable. You are now also forbidden from using the students input directly as a function-name, if you need to do so rewrite the logic as a \"switch\", unfortunately this also applies to MCQ inputs: /* Not like this. */ val: ans1(4); /* Instead write it like this to restrict the set of possible names. */ if is(ans1=sqrt) then val: sqrt(4) else if(ans1=sin) then val: sin(4) ... ev in 4.4 The new security model of STACK 4.4 modifies the order of execution in such a way that ev does not quite match the behaviour of ev in Maxima. For most use cases you will not notice this but there are situations where things won't work as expected. In general, these are the situations currently known: Placing expand inside of ev and doing a substitution in the same ev : ``` / This might lead to the expansion happening before the substitution. / simp:false; tmp:ev(expand(x^3),x=x+1); / Instead do the substitution before the expansion. / tmp: ev(x^3,x=x+1); tmp: ev(expand(tmp)); `` 2. Substitutions in general may happen too late if the target expression contains calls requiring security validation. The recommended method for dealing with this is to do the substitutions using subst or at and applying any evaluation related modifications with ev separately. 3. Use of the noeval` evaluation flag might not work, in general this flag is unlikely to be useful in the context of STACK and if you believe you need it look into nounification and other means of doing similar things. In some cases, it is possible to simply add eval as an extra flag to the ev -call, however this is only possible if all substitutions in the call are such that the LHS of the substitution is not present in the RHS. Do note that all this also applies to evaluation flags. /* These are equivalent: */ tmp: a+1,a=2; tmp: ev(a+1,a=2); Some recomendations The validation of certain things evaluates dependency graphs of identifiers so if you can keep those graphs small things tend to work faster. To do so avoid redefining the same variable if at all possible and just create a new variable when needed, i.e. do not reuse some tmp -var for all the calculations, if you do then the graph of that variable will become quite large and that may slow things down. Many small graphs tend to be faster to deal with than few large ones and a large graph may mean that features of node in the graph may block other nodes from doing certain things, e.g. being used as function identifiers. Likewise, avoid reusing same variable names for multiple different types of things in the question, i.e. if A is a matrix let it stay as such and don't turn it into a list or a function if you wish the validation during saving and first execution after import/upgrade to be fast. If you are using local() to define local-scope variables always call it as the first thing in a block (if you use the list of identifiers logic then you should not use local() in the same block) or in a lambda (after arguments). This allows the graph building to identify the point of disconnection of the graphs and to separate the scopes. Calling local after any variables have been used will confuse the logic and we do not want to invest into dealign with that special case.","title":"Authoring validation errors"},{"location":"Authoring/Errors/#authoring-validation-errors","text":"This document aims to explain certain errors that may appear during authoring, specifically during validation/saving of a question. We are constantly improving the error trapping for question authors and so some of these errors might be new and appear during upgrades, and break, previously functional materials. In some cases we have good reasons for now preventing actions which may have been permitted in the past. For some situations one can do things differently to lift the suspicions of the validation system. Summary of advice. Do not attempt to redefine function names or constants which are already defined as part of Maxima. Avoid using the same name for functions and variables. Avoid complex substitutions. Do not attempt to redefine the variables which are the names of inputs. Use subst or at to do substitutions instead of ev .","title":"Authoring validation errors"},{"location":"Authoring/Errors/#forbidden-functions-and-variables","text":"Some functions affecting the underlying system are forbidden to protect the environment, others are forbidden due to excessive load, and finally some have been disabled due to the way they return their values. Likewise, some variables/constants representing the state of the underlying system have been either marked as forbbiden to access or to modify. Use other names if this was just a collision of identifiers, otherwise this is just the way it is.","title":"Forbidden functions and variables"},{"location":"Authoring/Errors/#redefining-internal-functions","text":"Some functions are part of the core functionality and the system relies on their behaviour. For example redefining what append() does for lists would have significant effects around the system, this is why (re)defining functions with some specific names is forbidden. You are free to use other names for your functions. Note that not all internal functions or functions they use are blocked by this, they might get blocked in the future or some might be left as something that can be redefined to tune the logic. We suggest you do not attempt to redefine function names or constants which are already defined as part of Maxima.","title":"Redefining internal-functions"},{"location":"Authoring/Errors/#substitutions-unclear-or-otherwise","text":"Should you do substitutions of values in your code and the target of the substitution is an identifier that is later used as a function-name, things may become difficult. Avoid using the same name for functions and variables. Also if you use complex means to construct the substitutions themselves the system may need to assume that all possible identifiers in the expression that the substitutions are applied to are being targetted by unknown values, this can be avoided by avoiding complex construction of the substs itself. Note, these issues are now much rarer after the security system changed in 4.4. Yo should not even see these errors with the new system.","title":"Substitutions unclear or otherwise"},{"location":"Authoring/Errors/#example-1","text":"v:1; /* particular case of rand([1,2]) */ trig:[sin,cos][v]; sub:[(sin(x))^2=1-(cos(x))^2,(cos(x))^2=1-(sin(x))^2][v]; f:(trig(x))^3; df:diff(f,x); df_simp:subst(sub,df); This produces the error message The function name \"sin\" is potentially redefined in unclear substitutions. The function name \"diff\" is potentially redefined in unclear substitutions. The issue is that sub is a complicated expression here, so the validation system is not able to check that this code is not doing something suspicious. It may be worth trying to use ev rather than subst - for this example, the question works again if we change the final line to the following: df_simp:ev(df, sub);","title":"Example 1"},{"location":"Authoring/Errors/#example-2","text":"solution : rhs(ode2(eqn,y,x)); vars : delete(x,listofvars(solution)); TAns11 : subst([vars[1]=A,vars[2]=B],solution); TAns12 : subst([vars[2]=A,vars[1]=B],solution); Here the error messsages will claim that pretty much everything that goes into solution is potentially redefined in unclear substitutions. What the code above does is that it solves a differential equation with CAS and then asks the CAS for the names of the constants being used. Depending on the shape of the equation there might be more than one but in this case there are always exactly two of them. %k1 and %k2 , if there were only one it would probably get called %c so there is a reason for checking what they are. Why the example asks for those constants names is because the author has chosen to force the student to use A and B as the constants and constructs different correct answers for the two ways of selecting the order of the constants. The problem arises from the substitution of the constants which now finds the names of them from a list ( vars ) that is not directly visible to the validation system. There are two ways forward from this. Firstly, the question could use the SubstEquiv test that allows any names for those constants to be used and then just confirms that the correct ones were used if that matters, however then the teachers answer might look silly with those CAS-style constants so you would still need to replace them. Secondly, one can hard-code the names of the constants, in this case they are always the same so that should not be a problem: solution : rhs(ode2(eqn,y,x)); TAns11 : subst([%k1=A,%k2=B],solution); TAns12 : subst([%k2=A,%k1=B],solution);","title":"Example 2"},{"location":"Authoring/Errors/#use-of-the-students-answer","text":"Since 4.3 you have been forbidden from writing to the variable storing the students answer, feel free to simply store whatever you wanted to store in any other valid variable. You are now also forbidden from using the students input directly as a function-name, if you need to do so rewrite the logic as a \"switch\", unfortunately this also applies to MCQ inputs: /* Not like this. */ val: ans1(4); /* Instead write it like this to restrict the set of possible names. */ if is(ans1=sqrt) then val: sqrt(4) else if(ans1=sin) then val: sin(4) ...","title":"Use of the students answer"},{"location":"Authoring/Errors/#ev-in-44","text":"The new security model of STACK 4.4 modifies the order of execution in such a way that ev does not quite match the behaviour of ev in Maxima. For most use cases you will not notice this but there are situations where things won't work as expected. In general, these are the situations currently known: Placing expand inside of ev and doing a substitution in the same ev : ``` / This might lead to the expansion happening before the substitution. / simp:false; tmp:ev(expand(x^3),x=x+1); / Instead do the substitution before the expansion. / tmp: ev(x^3,x=x+1); tmp: ev(expand(tmp)); `` 2. Substitutions in general may happen too late if the target expression contains calls requiring security validation. The recommended method for dealing with this is to do the substitutions using subst or at and applying any evaluation related modifications with ev separately. 3. Use of the noeval` evaluation flag might not work, in general this flag is unlikely to be useful in the context of STACK and if you believe you need it look into nounification and other means of doing similar things. In some cases, it is possible to simply add eval as an extra flag to the ev -call, however this is only possible if all substitutions in the call are such that the LHS of the substitution is not present in the RHS. Do note that all this also applies to evaluation flags. /* These are equivalent: */ tmp: a+1,a=2; tmp: ev(a+1,a=2);","title":"ev in 4.4"},{"location":"Authoring/Errors/#some-recomendations","text":"The validation of certain things evaluates dependency graphs of identifiers so if you can keep those graphs small things tend to work faster. To do so avoid redefining the same variable if at all possible and just create a new variable when needed, i.e. do not reuse some tmp -var for all the calculations, if you do then the graph of that variable will become quite large and that may slow things down. Many small graphs tend to be faster to deal with than few large ones and a large graph may mean that features of node in the graph may block other nodes from doing certain things, e.g. being used as function identifiers. Likewise, avoid reusing same variable names for multiple different types of things in the question, i.e. if A is a matrix let it stay as such and don't turn it into a list or a function if you wish the validation during saving and first execution after import/upgrade to be fast. If you are using local() to define local-scope variables always call it as the first thing in a block (if you use the list of identifiers logic then you should not use local() in the same block) or in a lambda (after arguments). This allows the graph building to identify the point of disconnection of the graphs and to separate the scopes. Calling local after any variables have been used will confuse the logic and we do not want to invest into dealign with that special case.","title":"Some recomendations"},{"location":"Authoring/Fact_sheets/","text":"Hints STACK contains a \"formula sheet\" of useful fragments which a teacher may wish to include in a consistent way. This is achieved through the \"hints\" system. Hints can be included in any CASText . To include a hint, use the syntax [[facts:tag]] The \"tag\" is chosen from the list below. All supported fact sheets The Greek Alphabet [[facts:greek_alphabet]] Upper case, (\\quad) lower case, (\\quad) name (A) (\\alpha) alpha (B) (\\beta) beta (\\Gamma) (\\gamma) gamma (\\Delta) (\\delta) delta (E) (\\epsilon) epsilon (Z) (\\zeta) zeta (H) (\\eta) eta (\\Theta) (\\theta) theta (K) (\\kappa) kappa (M) (\\mu) mu (N) ( u) nu (\\Xi) (\\xi) xi (O) (o) omicron (\\Pi) (\\pi) pi (I) (\\iota) iota (P) (\\rho) rho (\\Sigma) (\\sigma) sigma (\\Lambda) (\\lambda) lambda (T) (\\tau) tau (\\Upsilon) (\\upsilon) upsilon (\\Phi) (\\phi) phi (X) (\\chi) chi (\\Psi) (\\psi) psi (\\Omega) (\\omega) omega Inequalities [[facts:alg_inequalities]] [a>b \\hbox{ means } a \\hbox{ is greater than } b.] [ a < b \\hbox{ means } a \\hbox{ is less than } b.] [a\\geq b \\hbox{ means } a \\hbox{ is greater than or equal to } b.] [a\\leq b \\hbox{ means } a \\hbox{ is less than or equal to } b.] The Laws of Indices [[facts:alg_indices]] The following laws govern index manipulation: [a^ma^n = a^{m+n}] [\\frac{a^m}{a^n} = a^{m-n}] [(a^m)^n = a^{mn}] [a^0 = 1] [a^{-m} = \\frac{1}{a^m}] [a^{\\frac{1}{n}} = \\sqrt[n]{a}] [a^{\\frac{m}{n}} = \\left(\\sqrt[n]{a}\\right)^m] The Laws of Logarithms [[facts:alg_logarithms]] For any base (c>0) with (c \\neq 1): [\\log_c(a) = b \\mbox{, means } a = c^b] [\\log_c(a) + \\log_c(b) = \\log_c(ab)] [\\log_c(a) - \\log_c(b) = \\log_c\\left(\\frac{a}{b}\\right)] [n\\log_c(a) = \\log_c\\left(a^n\\right)] [\\log_c(1) = 0] [\\log_c(c) = 1] The formula for a change of base is: [\\log_a(x) = \\frac{\\log_b(x)}{\\log_b(a)}] Logarithms to base (e), denoted (\\log_e) or alternatively (\\ln) are called natural logarithms. The letter (e) represents the exponential constant which is approximately (2.718). The Quadratic Formula [[facts:alg_quadratic_formula]] If we have a quadratic equation of the form: [ax^2 + bx + c = 0,] then the solution(s) to that equation given by the quadratic formula are: [x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}.] Partial Fractions [[facts:alg_partial_fractions]] Proper fractions occur with [{\\frac{P(x)}{Q(x)}}] when (P) and (Q) are polynomials with the degree of (P) less than the degree of (Q). This this case, we proceed as follows: write (Q(x)) in factored form, a linear factor (ax+b) in the denominator produces a partial fraction of the form [{\\frac{A}{ax+b}}.] a repeated linear factors ((ax+b)^2) in the denominator produce partial fractions of the form [{A\\over ax+b}+{B\\over (ax+b)^2}.] a quadratic factor (ax^2+bx+c) in the denominator produces a partial fraction of the form [{Ax+B\\over ax^2+bx+c}] Improper fractions require an additional term which is a polynomial of degree (n-d) where (n) is the degree of the numerator (i.e. (P(x))) and (d) is the degree of the denominator (i.e. (Q(x))). Degrees and Radians [[facts:trig_degrees_radians]] [ 360^\\circ= 2\\pi \\hbox{ radians},\\quad 1^\\circ={2\\pi\\over 360}={\\pi\\over 180}\\hbox{ radians} ] [ 1 \\hbox{ radian} = {180\\over \\pi} \\hbox{ degrees} \\approx 57.3^\\circ ] Standard Trigonometric Values [[facts:trig_standard_values]] [\\sin(45^\\circ)={1\\over \\sqrt{2}}, \\qquad \\cos(45^\\circ) = {1\\over \\sqrt{2}},\\qquad \\tan( 45^\\circ)=1 ] [ \\sin (30^\\circ)={1\\over 2}, \\qquad \\cos (30^\\circ)={\\sqrt{3}\\over 2},\\qquad \\tan (30^\\circ)={1\\over \\sqrt{3}} ] [ \\sin (60^\\circ)={\\sqrt{3}\\over 2}, \\qquad \\cos (60^\\circ)={1\\over 2},\\qquad \\tan (60^\\circ)={ \\sqrt{3}} ] Standard Trigonometric Identities [[facts:trig_standard_identities]] [\\sin(a\\pm b)\\ = \\ \\sin(a)\\cos(b)\\ \\pm\\ \\cos(a)\\sin(b)] [\\cos(a\\ \\pm\\ b)\\ = \\ \\cos(a)\\cos(b)\\ \\mp \\sin(a)\\sin(b)] [\\tan (a\\ \\pm\\ b)\\ = \\ {\\tan (a)\\ \\pm\\ \\tan (b)\\over1\\ \\mp\\ \\tan (a)\\tan (b)}] [ 2\\sin(a)\\cos(b)\\ = \\ \\sin(a+b)\\ +\\ \\sin(a-b)] [ 2\\cos(a)\\cos(b)\\ = \\ \\cos(a-b)\\ +\\ \\cos(a+b)] [ 2\\sin(a)\\sin(b) \\ = \\ \\cos(a-b)\\ -\\ \\cos(a+b)] [ \\sin^2(a)+\\cos^2(a)\\ = \\ 1] [ 1+{\\rm cot}^2(a)\\ = \\ {\\rm cosec}^2(a),\\quad \\tan^2(a) +1 \\ = \\ \\sec^2(a)] [ \\cos(2a)\\ = \\ \\cos^2(a)-\\sin^2(a)\\ = \\ 2\\cos^2(a)-1\\ = \\ 1-2\\sin^2(a)] [ \\sin(2a)\\ = \\ 2\\sin(a)\\cos(a)] [ \\sin^2(a) \\ = \\ {1-\\cos (2a)\\over 2}, \\qquad \\cos^2(a)\\ = \\ {1+\\cos(2a)\\over 2}] Hyperbolic Functions [[facts:hyp_functions]] Hyperbolic functions have similar properties to trigonometric functions but can be represented in exponential form as follows: [ \\cosh(x) = \\frac{e^x+e^{-x}}{2}, \\qquad \\sinh(x)=\\frac{e^x-e^{-x}}{2} ] [ \\tanh(x) = \\frac{\\sinh(x)}{\\cosh(x)} = \\frac{{e^x-e^{-x}}}{e^x+e^{-x}} ] [ {\\rm sech}(x) ={1\\over \\cosh(x)}={2\\over {\\rm e}^x+{\\rm e}^{-x}}, \\qquad {\\rm cosech}(x)= {1\\over \\sinh(x)}={2\\over {\\rm e}^x-{\\rm e}^{-x}} ] [ {\\rm coth}(x) ={\\cosh(x)\\over \\sinh(x)} = {1\\over {\\rm tanh}(x)} ={{\\rm e}^x+{\\rm e}^{-x}\\over {\\rm e}^x-{\\rm e}^{-x}}] Hyperbolic Identities [[facts:hyp_identities]] The similarity between the way hyperbolic and trigonometric functions behave is apparent when observing some basic hyperbolic identities: [{\\rm e}^x=\\cosh(x)+\\sinh(x), \\quad {\\rm e}^{-x}=\\cosh(x)-\\sinh(x)] [\\cosh^2(x) -\\sinh^2(x) = 1] [1-{\\rm tanh}^2(x)={\\rm sech}^2(x)] [{\\rm coth}^2(x)-1={\\rm cosech}^2(x)] [\\sinh(x\\pm y)=\\sinh(x)\\ \\cosh(y)\\ \\pm\\ \\cosh(x)\\ \\sinh(y)] [\\cosh(x\\pm y)=\\cosh(x)\\ \\cosh(y)\\ \\pm\\ \\sinh(x)\\ \\sinh(y)] [\\sinh(2x)=2\\,\\sinh(x)\\cosh(x)] [\\cosh(2x)=\\cosh^2(x)+\\sinh^2(x)] [\\cosh^2(x)={\\cosh(2x)+1\\over 2}] [\\sinh^2(x)={\\cosh(2x)-1\\over 2}] Inverse Hyperbolic Functions [[facts:hyp_inverse_functions]] [\\cosh^{-1}(x)=\\ln\\left(x+\\sqrt{x^2-1}\\right) \\quad \\mbox{ for } x\\geq 1] [\\sinh^{-1}(x)=\\ln\\left(x+\\sqrt{x^2+1}\\right)] [\\tanh^{-1}(x) = \\frac{1}{2}\\ln\\left({1+x\\over 1-x}\\right) \\quad \\mbox{ for } -1< x < 1] Standard Derivatives [[facts:calc_diff_standard_derivatives]] The following table displays the derivatives of some standard functions. It is useful to learn these standard derivatives as they are used frequently in calculus. (f(x)) (f'(x)) (k), constant (0) (x^n), any constant (n) (nx^{n-1}) (e^x) (e^x) (\\ln(x)=\\log_{\\rm e}(x)) (\\frac{1}{x}) (\\sin(x)) (\\cos(x)) (\\cos(x)) (-\\sin(x)) (\\tan(x) = \\frac{\\sin(x)}{\\cos(x)}) (\\sec^2(x)) (cosec(x)=\\frac{1}{\\sin(x)}) (-cosec(x)\\cot(x)) (\\sec(x)=\\frac{1}{\\cos(x)}) (\\sec(x)\\tan(x)) (\\cot(x)=\\frac{\\cos(x)}{\\sin(x)}) (-cosec^2(x)) (\\cosh(x)) (\\sinh(x)) (\\sinh(x)) (\\cosh(x)) (\\tanh(x)) (sech^2(x)) (sech(x)) (-sech(x)\\tanh(x)) (cosech(x)) (-cosech(x)\\coth(x)) (coth(x)) (-cosech^2(x)) [ \\frac{d}{dx}\\left(\\sin^{-1}(x)\\right) = \\frac{1}{\\sqrt{1-x^2}}] [ \\frac{d}{dx}\\left(\\cos^{-1}(x)\\right) = \\frac{-1}{\\sqrt{1-x^2}}] [ \\frac{d}{dx}\\left(\\tan^{-1}(x)\\right) = \\frac{1}{1+x^2}] [ \\frac{d}{dx}\\left(\\cosh^{-1}(x)\\right) = \\frac{1}{\\sqrt{x^2-1}}] [ \\frac{d}{dx}\\left(\\sinh^{-1}(x)\\right) = \\frac{1}{\\sqrt{x^2+1}}] [ \\frac{d}{dx}\\left(\\tanh^{-1}(x)\\right) = \\frac{1}{1-x^2}] The Linearity Rule for Differentiation [[facts:calc_diff_linearity_rule]] [{{\\rm d}\\,\\over {\\rm d}x}\\big(af(x)+bg(x)\\big)=a{{\\rm d}f(x)\\over {\\rm d}x}+b{{\\rm d}g(x)\\over {\\rm d}x}\\quad a,b {\\rm\\ constant.}] The Product Rule [[facts:calc_product_rule]] The following rule allows one to differentiate functions which are multiplied together. Assume that we wish to differentiate (f(x)g(x)) with respect to (x). [ \\frac{\\mathrm{d}}{\\mathrm{d}{x}} \\big(f(x)g(x)\\big) = f(x) \\cdot \\frac{\\mathrm{d} g(x)}{\\mathrm{d}{x}} + g(x)\\cdot \\frac{\\mathrm{d} f(x)}{\\mathrm{d}{x}},] or, using alternative notation, [ (f(x)g(x))' = f'(x)g(x)+f(x)g'(x). ] The Quotient Rule [[facts:calc_quotient_rule]] The quotient rule for differentiation states that for any two differentiable functions (f(x)) and (g(x)), [\\frac{d}{dx}\\left(\\frac{f(x)}{g(x)}\\right)=\\frac{g(x)\\cdot\\frac{df(x)}{dx}\\ \\ - \\ \\ f(x)\\cdot \\frac{dg(x)}{dx}}{g(x)^2}. ] The Chain Rule [[facts:calc_chain_rule]] The following rule allows one to find the derivative of a composition of two functions. Assume we have a function (f(g(x))), then defining (u=g(x)), the derivative with respect to (x) is given by: [\\frac{df(g(x))}{dx} = \\frac{dg(x)}{dx}\\cdot\\frac{df(u)}{du}.] Alternatively, we can write: [\\frac{df(x)}{dx} = f'(g(x))\\cdot g'(x).] Calculus rules [[facts:calc_rules]] The Product Rule The following rule allows one to differentiate functions which are multiplied together. Assume that we wish to differentiate (f(x)g(x)) with respect to (x). [ \\frac{\\mathrm{d}}{\\mathrm{d}{x}} \\big(f(x)g(x)\\big) = f(x) \\cdot \\frac{\\mathrm{d} g(x)}{\\mathrm{d}{x}} + g(x)\\cdot \\frac{\\mathrm{d} f(x)}{\\mathrm{d}{x}},] or, using alternative notation, [ (f(x)g(x))' = f'(x)g(x)+f(x)g'(x). ] The Quotient Rule The quotient rule for differentiation states that for any two differentiable functions (f(x)) and (g(x)), [\\frac{d}{dx}\\left(\\frac{f(x)}{g(x)}\\right)=\\frac{g(x)\\cdot\\frac{df(x)}{dx}\\ \\ - \\ \\ f(x)\\cdot \\frac{dg(x)}{dx}}{g(x)^2}. ] The Chain Rule The following rule allows one to find the derivative of a composition of two functions. Assume we have a function (f(g(x))), then defining (u=g(x)), the derivative with respect to (x) is given by: [\\frac{df(g(x))}{dx} = \\frac{dg(x)}{dx}\\cdot\\frac{df(u)}{du}.] Alternatively, we can write: [\\frac{df(x)}{dx} = f'(g(x))\\cdot g'(x).] Standard Integrals [[facts:calc_int_standard_integrals]] [\\int k\\ dx = kx +c, \\mbox{ where k is constant.}] [\\int x^n\\ dx = \\frac{x^{n+1}}{n+1}+c, \\quad (n\\ne -1)] [\\int x^{-1}\\ dx = \\int {\\frac{1}{x}}\\ dx = \\ln(|x|)+c = \\ln(k|x|) = \\left{\\matrix{\\ln(x)+c & x>0\\cr \\ln(-x)+c & x<0\\cr}\\right.] (f(x)) (\\int f(x)\\ dx) (e^x) (e^x+c) (\\cos(x)) (\\sin(x)+c) (\\sin(x)) (-\\cos(x)+c) (\\tan(x)) (\\ln(\\sec(x))+c) (-\\frac{\\pi}{2} < x < \\frac{\\pi}{2}) (\\sec x) (\\ln (\\sec(x)+\\tan(x))+c) ( -{\\pi\\over 2}< x < {\\frac{\\pi}{2}}) (\\mbox{cosec}(x)) (\\ln (\\mbox{cose}c(x)-\\cot(x))+c\\quad) (0 < x < \\pi) cot(\\,x) (\\ln(\\sin(x))+c) (0< x< \\pi) (\\cosh(x)) (\\sinh(x)+c) (\\sinh(x)) (\\cosh(x) + c) (\\tanh(x)) (\\ln(\\cosh(x))+c) (\\mbox{coth}(x)) (\\ln(\\sinh(x))+c ) (x>0) ({1\\over x^2+a^2}) ({1\\over a}\\tan^{-1}{x\\over a}+c) (a>0) ({1\\over x^2-a^2}) ({1\\over 2a}\\ln{x-a\\over x+a}+c) ( ({1\\over a^2-x^2}) ({1\\over 2a}\\ln{a+x\\over a-x}+c) ( (\\frac{1}{\\sqrt{x^2+a^2}}) (\\sinh^{-1}\\left(\\frac{x}{a}\\right) + c) (a>0) ({1\\over \\sqrt{x^2-a^2}}) (\\cosh^{-1}\\left(\\frac{x}{a}\\right) + c) (x\\geq a > 0) ({1\\over \\sqrt{x^2+k}}) (\\ln (x+\\sqrt{x^2+k})+c) ({1\\over \\sqrt{a^2-x^2}}) (\\sin^{-1}\\left(\\frac{x}{a}\\right)+c) (-a\\leq x\\leq a) The Linearity Rule for Integration [[facts:calc_int_linearity_rule]] [\\int \\left(af(x)+bg(x)\\right){\\rm d}x = a\\int!!f(x)\\,{\\rm d}x \\,+\\,b\\int !!g(x)\\,{\\rm d}x, \\quad (a,b \\, \\, {\\rm constant.}) ] Integration by Substitution [[facts:calc_int_methods_substitution]] [ \\int f(u){{\\rm d}u\\over {\\rm d}x}{\\rm d}x=\\int f(u){\\rm d}u \\quad\\hbox{and}\\quad \\int_a^bf(u){{\\rm d}u\\over {\\rm d}x}\\,{\\rm d}x = \\int_{u(a)}^{u(b)}f(u){\\rm d}u. ] Integration by Parts [[facts:calc_int_methods_parts]] [ \\int_a^b u{{\\rm d}v\\over {\\rm d}x}{\\rm d}x=\\left[uv\\right]_a^b- \\int_a^b{{\\rm d}u\\over {\\rm d}x}v\\,{\\rm d}x] or alternatively: [\\int_a^bf(x)g(x)\\,{\\rm d}x=\\left[f(x)\\,\\int g(x){\\rm d}x\\right]_a^b -\\int_a^b{{\\rm d}f\\over {\\rm d}x}\\left{\\int g(x){\\rm d}x\\right}{\\rm d}x.] Integration by Parts [[facts:calc_int_methods_parts_indefinite]] [ \\int u{{\\rm d}v\\over {\\rm d}x}{\\rm d}x=uv- \\int{{\\rm d}u\\over {\\rm d}x}v\\,{\\rm d}x] or alternatively: [\\int f(x)g(x)\\,{\\rm d}x=f(x)\\,\\int g(x){\\rm d}x -\\int {{\\rm d}f\\over {\\rm d}x}\\left{\\int g(x){\\rm d}x\\right}{\\rm d}x.]","title":"Hints"},{"location":"Authoring/Fact_sheets/#hints","text":"STACK contains a \"formula sheet\" of useful fragments which a teacher may wish to include in a consistent way. This is achieved through the \"hints\" system. Hints can be included in any CASText . To include a hint, use the syntax [[facts:tag]] The \"tag\" is chosen from the list below.","title":"Hints"},{"location":"Authoring/Fact_sheets/#all-supported-fact-sheets","text":"","title":"All supported fact sheets"},{"location":"Authoring/Fact_sheets/#the-greek-alphabet","text":"[[facts:greek_alphabet]] Upper case, (\\quad) lower case, (\\quad) name (A) (\\alpha) alpha (B) (\\beta) beta (\\Gamma) (\\gamma) gamma (\\Delta) (\\delta) delta (E) (\\epsilon) epsilon (Z) (\\zeta) zeta (H) (\\eta) eta (\\Theta) (\\theta) theta (K) (\\kappa) kappa (M) (\\mu) mu (N) ( u) nu (\\Xi) (\\xi) xi (O) (o) omicron (\\Pi) (\\pi) pi (I) (\\iota) iota (P) (\\rho) rho (\\Sigma) (\\sigma) sigma (\\Lambda) (\\lambda) lambda (T) (\\tau) tau (\\Upsilon) (\\upsilon) upsilon (\\Phi) (\\phi) phi (X) (\\chi) chi (\\Psi) (\\psi) psi (\\Omega) (\\omega) omega","title":"The Greek Alphabet"},{"location":"Authoring/Fact_sheets/#inequalities","text":"[[facts:alg_inequalities]] [a>b \\hbox{ means } a \\hbox{ is greater than } b.] [ a < b \\hbox{ means } a \\hbox{ is less than } b.] [a\\geq b \\hbox{ means } a \\hbox{ is greater than or equal to } b.] [a\\leq b \\hbox{ means } a \\hbox{ is less than or equal to } b.]","title":"Inequalities"},{"location":"Authoring/Fact_sheets/#the-laws-of-indices","text":"[[facts:alg_indices]] The following laws govern index manipulation: [a^ma^n = a^{m+n}] [\\frac{a^m}{a^n} = a^{m-n}] [(a^m)^n = a^{mn}] [a^0 = 1] [a^{-m} = \\frac{1}{a^m}] [a^{\\frac{1}{n}} = \\sqrt[n]{a}] [a^{\\frac{m}{n}} = \\left(\\sqrt[n]{a}\\right)^m]","title":"The Laws of Indices"},{"location":"Authoring/Fact_sheets/#the-laws-of-logarithms","text":"[[facts:alg_logarithms]] For any base (c>0) with (c \\neq 1): [\\log_c(a) = b \\mbox{, means } a = c^b] [\\log_c(a) + \\log_c(b) = \\log_c(ab)] [\\log_c(a) - \\log_c(b) = \\log_c\\left(\\frac{a}{b}\\right)] [n\\log_c(a) = \\log_c\\left(a^n\\right)] [\\log_c(1) = 0] [\\log_c(c) = 1] The formula for a change of base is: [\\log_a(x) = \\frac{\\log_b(x)}{\\log_b(a)}] Logarithms to base (e), denoted (\\log_e) or alternatively (\\ln) are called natural logarithms. The letter (e) represents the exponential constant which is approximately (2.718).","title":"The Laws of Logarithms"},{"location":"Authoring/Fact_sheets/#the-quadratic-formula","text":"[[facts:alg_quadratic_formula]] If we have a quadratic equation of the form: [ax^2 + bx + c = 0,] then the solution(s) to that equation given by the quadratic formula are: [x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}.]","title":"The Quadratic Formula"},{"location":"Authoring/Fact_sheets/#partial-fractions","text":"[[facts:alg_partial_fractions]] Proper fractions occur with [{\\frac{P(x)}{Q(x)}}] when (P) and (Q) are polynomials with the degree of (P) less than the degree of (Q). This this case, we proceed as follows: write (Q(x)) in factored form, a linear factor (ax+b) in the denominator produces a partial fraction of the form [{\\frac{A}{ax+b}}.] a repeated linear factors ((ax+b)^2) in the denominator produce partial fractions of the form [{A\\over ax+b}+{B\\over (ax+b)^2}.] a quadratic factor (ax^2+bx+c) in the denominator produces a partial fraction of the form [{Ax+B\\over ax^2+bx+c}] Improper fractions require an additional term which is a polynomial of degree (n-d) where (n) is the degree of the numerator (i.e. (P(x))) and (d) is the degree of the denominator (i.e. (Q(x))).","title":"Partial Fractions"},{"location":"Authoring/Fact_sheets/#degrees-and-radians","text":"[[facts:trig_degrees_radians]] [ 360^\\circ= 2\\pi \\hbox{ radians},\\quad 1^\\circ={2\\pi\\over 360}={\\pi\\over 180}\\hbox{ radians} ] [ 1 \\hbox{ radian} = {180\\over \\pi} \\hbox{ degrees} \\approx 57.3^\\circ ]","title":"Degrees and Radians"},{"location":"Authoring/Fact_sheets/#standard-trigonometric-values","text":"[[facts:trig_standard_values]] [\\sin(45^\\circ)={1\\over \\sqrt{2}}, \\qquad \\cos(45^\\circ) = {1\\over \\sqrt{2}},\\qquad \\tan( 45^\\circ)=1 ] [ \\sin (30^\\circ)={1\\over 2}, \\qquad \\cos (30^\\circ)={\\sqrt{3}\\over 2},\\qquad \\tan (30^\\circ)={1\\over \\sqrt{3}} ] [ \\sin (60^\\circ)={\\sqrt{3}\\over 2}, \\qquad \\cos (60^\\circ)={1\\over 2},\\qquad \\tan (60^\\circ)={ \\sqrt{3}} ]","title":"Standard Trigonometric Values"},{"location":"Authoring/Fact_sheets/#standard-trigonometric-identities","text":"[[facts:trig_standard_identities]] [\\sin(a\\pm b)\\ = \\ \\sin(a)\\cos(b)\\ \\pm\\ \\cos(a)\\sin(b)] [\\cos(a\\ \\pm\\ b)\\ = \\ \\cos(a)\\cos(b)\\ \\mp \\sin(a)\\sin(b)] [\\tan (a\\ \\pm\\ b)\\ = \\ {\\tan (a)\\ \\pm\\ \\tan (b)\\over1\\ \\mp\\ \\tan (a)\\tan (b)}] [ 2\\sin(a)\\cos(b)\\ = \\ \\sin(a+b)\\ +\\ \\sin(a-b)] [ 2\\cos(a)\\cos(b)\\ = \\ \\cos(a-b)\\ +\\ \\cos(a+b)] [ 2\\sin(a)\\sin(b) \\ = \\ \\cos(a-b)\\ -\\ \\cos(a+b)] [ \\sin^2(a)+\\cos^2(a)\\ = \\ 1] [ 1+{\\rm cot}^2(a)\\ = \\ {\\rm cosec}^2(a),\\quad \\tan^2(a) +1 \\ = \\ \\sec^2(a)] [ \\cos(2a)\\ = \\ \\cos^2(a)-\\sin^2(a)\\ = \\ 2\\cos^2(a)-1\\ = \\ 1-2\\sin^2(a)] [ \\sin(2a)\\ = \\ 2\\sin(a)\\cos(a)] [ \\sin^2(a) \\ = \\ {1-\\cos (2a)\\over 2}, \\qquad \\cos^2(a)\\ = \\ {1+\\cos(2a)\\over 2}]","title":"Standard Trigonometric Identities"},{"location":"Authoring/Fact_sheets/#hyperbolic-functions","text":"[[facts:hyp_functions]] Hyperbolic functions have similar properties to trigonometric functions but can be represented in exponential form as follows: [ \\cosh(x) = \\frac{e^x+e^{-x}}{2}, \\qquad \\sinh(x)=\\frac{e^x-e^{-x}}{2} ] [ \\tanh(x) = \\frac{\\sinh(x)}{\\cosh(x)} = \\frac{{e^x-e^{-x}}}{e^x+e^{-x}} ] [ {\\rm sech}(x) ={1\\over \\cosh(x)}={2\\over {\\rm e}^x+{\\rm e}^{-x}}, \\qquad {\\rm cosech}(x)= {1\\over \\sinh(x)}={2\\over {\\rm e}^x-{\\rm e}^{-x}} ] [ {\\rm coth}(x) ={\\cosh(x)\\over \\sinh(x)} = {1\\over {\\rm tanh}(x)} ={{\\rm e}^x+{\\rm e}^{-x}\\over {\\rm e}^x-{\\rm e}^{-x}}]","title":"Hyperbolic Functions"},{"location":"Authoring/Fact_sheets/#hyperbolic-identities","text":"[[facts:hyp_identities]] The similarity between the way hyperbolic and trigonometric functions behave is apparent when observing some basic hyperbolic identities: [{\\rm e}^x=\\cosh(x)+\\sinh(x), \\quad {\\rm e}^{-x}=\\cosh(x)-\\sinh(x)] [\\cosh^2(x) -\\sinh^2(x) = 1] [1-{\\rm tanh}^2(x)={\\rm sech}^2(x)] [{\\rm coth}^2(x)-1={\\rm cosech}^2(x)] [\\sinh(x\\pm y)=\\sinh(x)\\ \\cosh(y)\\ \\pm\\ \\cosh(x)\\ \\sinh(y)] [\\cosh(x\\pm y)=\\cosh(x)\\ \\cosh(y)\\ \\pm\\ \\sinh(x)\\ \\sinh(y)] [\\sinh(2x)=2\\,\\sinh(x)\\cosh(x)] [\\cosh(2x)=\\cosh^2(x)+\\sinh^2(x)] [\\cosh^2(x)={\\cosh(2x)+1\\over 2}] [\\sinh^2(x)={\\cosh(2x)-1\\over 2}]","title":"Hyperbolic Identities"},{"location":"Authoring/Fact_sheets/#inverse-hyperbolic-functions","text":"[[facts:hyp_inverse_functions]] [\\cosh^{-1}(x)=\\ln\\left(x+\\sqrt{x^2-1}\\right) \\quad \\mbox{ for } x\\geq 1] [\\sinh^{-1}(x)=\\ln\\left(x+\\sqrt{x^2+1}\\right)] [\\tanh^{-1}(x) = \\frac{1}{2}\\ln\\left({1+x\\over 1-x}\\right) \\quad \\mbox{ for } -1< x < 1]","title":"Inverse Hyperbolic Functions"},{"location":"Authoring/Fact_sheets/#standard-derivatives","text":"[[facts:calc_diff_standard_derivatives]] The following table displays the derivatives of some standard functions. It is useful to learn these standard derivatives as they are used frequently in calculus. (f(x)) (f'(x)) (k), constant (0) (x^n), any constant (n) (nx^{n-1}) (e^x) (e^x) (\\ln(x)=\\log_{\\rm e}(x)) (\\frac{1}{x}) (\\sin(x)) (\\cos(x)) (\\cos(x)) (-\\sin(x)) (\\tan(x) = \\frac{\\sin(x)}{\\cos(x)}) (\\sec^2(x)) (cosec(x)=\\frac{1}{\\sin(x)}) (-cosec(x)\\cot(x)) (\\sec(x)=\\frac{1}{\\cos(x)}) (\\sec(x)\\tan(x)) (\\cot(x)=\\frac{\\cos(x)}{\\sin(x)}) (-cosec^2(x)) (\\cosh(x)) (\\sinh(x)) (\\sinh(x)) (\\cosh(x)) (\\tanh(x)) (sech^2(x)) (sech(x)) (-sech(x)\\tanh(x)) (cosech(x)) (-cosech(x)\\coth(x)) (coth(x)) (-cosech^2(x)) [ \\frac{d}{dx}\\left(\\sin^{-1}(x)\\right) = \\frac{1}{\\sqrt{1-x^2}}] [ \\frac{d}{dx}\\left(\\cos^{-1}(x)\\right) = \\frac{-1}{\\sqrt{1-x^2}}] [ \\frac{d}{dx}\\left(\\tan^{-1}(x)\\right) = \\frac{1}{1+x^2}] [ \\frac{d}{dx}\\left(\\cosh^{-1}(x)\\right) = \\frac{1}{\\sqrt{x^2-1}}] [ \\frac{d}{dx}\\left(\\sinh^{-1}(x)\\right) = \\frac{1}{\\sqrt{x^2+1}}] [ \\frac{d}{dx}\\left(\\tanh^{-1}(x)\\right) = \\frac{1}{1-x^2}]","title":"Standard Derivatives"},{"location":"Authoring/Fact_sheets/#the-linearity-rule-for-differentiation","text":"[[facts:calc_diff_linearity_rule]] [{{\\rm d}\\,\\over {\\rm d}x}\\big(af(x)+bg(x)\\big)=a{{\\rm d}f(x)\\over {\\rm d}x}+b{{\\rm d}g(x)\\over {\\rm d}x}\\quad a,b {\\rm\\ constant.}]","title":"The Linearity Rule for Differentiation"},{"location":"Authoring/Fact_sheets/#the-product-rule","text":"[[facts:calc_product_rule]] The following rule allows one to differentiate functions which are multiplied together. Assume that we wish to differentiate (f(x)g(x)) with respect to (x). [ \\frac{\\mathrm{d}}{\\mathrm{d}{x}} \\big(f(x)g(x)\\big) = f(x) \\cdot \\frac{\\mathrm{d} g(x)}{\\mathrm{d}{x}} + g(x)\\cdot \\frac{\\mathrm{d} f(x)}{\\mathrm{d}{x}},] or, using alternative notation, [ (f(x)g(x))' = f'(x)g(x)+f(x)g'(x). ]","title":"The Product Rule"},{"location":"Authoring/Fact_sheets/#the-quotient-rule","text":"[[facts:calc_quotient_rule]] The quotient rule for differentiation states that for any two differentiable functions (f(x)) and (g(x)), [\\frac{d}{dx}\\left(\\frac{f(x)}{g(x)}\\right)=\\frac{g(x)\\cdot\\frac{df(x)}{dx}\\ \\ - \\ \\ f(x)\\cdot \\frac{dg(x)}{dx}}{g(x)^2}. ]","title":"The Quotient Rule"},{"location":"Authoring/Fact_sheets/#the-chain-rule","text":"[[facts:calc_chain_rule]] The following rule allows one to find the derivative of a composition of two functions. Assume we have a function (f(g(x))), then defining (u=g(x)), the derivative with respect to (x) is given by: [\\frac{df(g(x))}{dx} = \\frac{dg(x)}{dx}\\cdot\\frac{df(u)}{du}.] Alternatively, we can write: [\\frac{df(x)}{dx} = f'(g(x))\\cdot g'(x).]","title":"The Chain Rule"},{"location":"Authoring/Fact_sheets/#calculus-rules","text":"[[facts:calc_rules]] The Product Rule The following rule allows one to differentiate functions which are multiplied together. Assume that we wish to differentiate (f(x)g(x)) with respect to (x). [ \\frac{\\mathrm{d}}{\\mathrm{d}{x}} \\big(f(x)g(x)\\big) = f(x) \\cdot \\frac{\\mathrm{d} g(x)}{\\mathrm{d}{x}} + g(x)\\cdot \\frac{\\mathrm{d} f(x)}{\\mathrm{d}{x}},] or, using alternative notation, [ (f(x)g(x))' = f'(x)g(x)+f(x)g'(x). ] The Quotient Rule The quotient rule for differentiation states that for any two differentiable functions (f(x)) and (g(x)), [\\frac{d}{dx}\\left(\\frac{f(x)}{g(x)}\\right)=\\frac{g(x)\\cdot\\frac{df(x)}{dx}\\ \\ - \\ \\ f(x)\\cdot \\frac{dg(x)}{dx}}{g(x)^2}. ] The Chain Rule The following rule allows one to find the derivative of a composition of two functions. Assume we have a function (f(g(x))), then defining (u=g(x)), the derivative with respect to (x) is given by: [\\frac{df(g(x))}{dx} = \\frac{dg(x)}{dx}\\cdot\\frac{df(u)}{du}.] Alternatively, we can write: [\\frac{df(x)}{dx} = f'(g(x))\\cdot g'(x).]","title":"Calculus rules"},{"location":"Authoring/Fact_sheets/#standard-integrals","text":"[[facts:calc_int_standard_integrals]] [\\int k\\ dx = kx +c, \\mbox{ where k is constant.}] [\\int x^n\\ dx = \\frac{x^{n+1}}{n+1}+c, \\quad (n\\ne -1)] [\\int x^{-1}\\ dx = \\int {\\frac{1}{x}}\\ dx = \\ln(|x|)+c = \\ln(k|x|) = \\left{\\matrix{\\ln(x)+c & x>0\\cr \\ln(-x)+c & x<0\\cr}\\right.] (f(x)) (\\int f(x)\\ dx) (e^x) (e^x+c) (\\cos(x)) (\\sin(x)+c) (\\sin(x)) (-\\cos(x)+c) (\\tan(x)) (\\ln(\\sec(x))+c) (-\\frac{\\pi}{2} < x < \\frac{\\pi}{2}) (\\sec x) (\\ln (\\sec(x)+\\tan(x))+c) ( -{\\pi\\over 2}< x < {\\frac{\\pi}{2}}) (\\mbox{cosec}(x)) (\\ln (\\mbox{cose}c(x)-\\cot(x))+c\\quad) (0 < x < \\pi) cot(\\,x) (\\ln(\\sin(x))+c) (0< x< \\pi) (\\cosh(x)) (\\sinh(x)+c) (\\sinh(x)) (\\cosh(x) + c) (\\tanh(x)) (\\ln(\\cosh(x))+c) (\\mbox{coth}(x)) (\\ln(\\sinh(x))+c ) (x>0) ({1\\over x^2+a^2}) ({1\\over a}\\tan^{-1}{x\\over a}+c) (a>0) ({1\\over x^2-a^2}) ({1\\over 2a}\\ln{x-a\\over x+a}+c) ( ({1\\over a^2-x^2}) ({1\\over 2a}\\ln{a+x\\over a-x}+c) ( (\\frac{1}{\\sqrt{x^2+a^2}}) (\\sinh^{-1}\\left(\\frac{x}{a}\\right) + c) (a>0) ({1\\over \\sqrt{x^2-a^2}}) (\\cosh^{-1}\\left(\\frac{x}{a}\\right) + c) (x\\geq a > 0) ({1\\over \\sqrt{x^2+k}}) (\\ln (x+\\sqrt{x^2+k})+c) ({1\\over \\sqrt{a^2-x^2}}) (\\sin^{-1}\\left(\\frac{x}{a}\\right)+c) (-a\\leq x\\leq a)","title":"Standard Integrals"},{"location":"Authoring/Fact_sheets/#the-linearity-rule-for-integration","text":"[[facts:calc_int_linearity_rule]] [\\int \\left(af(x)+bg(x)\\right){\\rm d}x = a\\int!!f(x)\\,{\\rm d}x \\,+\\,b\\int !!g(x)\\,{\\rm d}x, \\quad (a,b \\, \\, {\\rm constant.}) ]","title":"The Linearity Rule for Integration"},{"location":"Authoring/Fact_sheets/#integration-by-substitution","text":"[[facts:calc_int_methods_substitution]] [ \\int f(u){{\\rm d}u\\over {\\rm d}x}{\\rm d}x=\\int f(u){\\rm d}u \\quad\\hbox{and}\\quad \\int_a^bf(u){{\\rm d}u\\over {\\rm d}x}\\,{\\rm d}x = \\int_{u(a)}^{u(b)}f(u){\\rm d}u. ]","title":"Integration by Substitution"},{"location":"Authoring/Fact_sheets/#integration-by-parts","text":"[[facts:calc_int_methods_parts]] [ \\int_a^b u{{\\rm d}v\\over {\\rm d}x}{\\rm d}x=\\left[uv\\right]_a^b- \\int_a^b{{\\rm d}u\\over {\\rm d}x}v\\,{\\rm d}x] or alternatively: [\\int_a^bf(x)g(x)\\,{\\rm d}x=\\left[f(x)\\,\\int g(x){\\rm d}x\\right]_a^b -\\int_a^b{{\\rm d}f\\over {\\rm d}x}\\left{\\int g(x){\\rm d}x\\right}{\\rm d}x.]","title":"Integration by Parts"},{"location":"Authoring/Fact_sheets/#integration-by-parts_1","text":"[[facts:calc_int_methods_parts_indefinite]] [ \\int u{{\\rm d}v\\over {\\rm d}x}{\\rm d}x=uv- \\int{{\\rm d}u\\over {\\rm d}x}v\\,{\\rm d}x] or alternatively: [\\int f(x)g(x)\\,{\\rm d}x=f(x)\\,\\int g(x){\\rm d}x -\\int {{\\rm d}f\\over {\\rm d}x}\\left{\\int g(x){\\rm d}x\\right}{\\rm d}x.]","title":"Integration by Parts"},{"location":"Authoring/Feedback/","text":"Feedback The purpose of STACK is to assess students' answers to mathematical questions, and on the basis of the properties we establish to assign feedback . This document describes the ways STACK provides feedback to students. It will not go into much depth on creating the feedback, which is documented under potential response trees . Types of assessment Formative assessment is to support and inform students' learning. Feedback here could be qualitative , e.g. written comments tailored to the student's answer and designed to help them improve their performance on the task. Summative assessment is to establish the achievement of the student. In mathematics, summative feedback is most often quantitative , either a mark or a percentage. Evaluative assessment is to measure the effectiveness of the teaching or the assessment of students. Such assessments could have quality enhancement or quality audit functions. See reporting . The ability to automatically generate data about an individual student or across a cohort is one particular strength of CAA, potentially enabling regular, detailed evaluative assessment. In STACK multi-part questions there is a complete separation between two important components. a list of inputs a list of potential response trees Specific feedback is associated with each input and each potential response tree. Typically, it is placed in the Specific feedback section, as that gives Moodle more control over when it is shown. However, the feedback tags can be positioned anywhere within the question text . Validation Before an input is available to a potential response trees , it must be validated. In particular, at each attempt, each input is assigned a status. NULL, which indicates the field has not been previously given a value by the student, or the field is now empty since the student has deleted an answer. new, indicates an answer has not been validated or assessed, but has been changed from a previous attempt. invalid, which indicates that the field is not valid. valid, a response which is valid but not scored. score. In this case, the answer is available to any potential response tree requiring it. Normally a student will view a displayed form of their expression and submit it again. This default behaviour is inappropriate for multiple choice/selection interactions, and can be changed for each input using the option \"Student must verify\". Whether the student's answer is echoed back and shown is controlled by a separate option \"Show the validation\". Validation errors are always shown. Whether a string entered by the student is valid or invalid does not depend on the question. I.e. there should be a consistent mechanism for what constitutes a syntactically valid expression. However, in practice things are not quite so clean! Some input options do affect validity, such as forbid floats . Some symbols, e.g. (i) and (j) change meaning in different contexts, e.g. (\\sqrt{-1}) or vector components. See details about options . Potential response trees Each potential response tree returns three outcomes: a numerical score, text for the students, an answer note for use by the teacher during reporting . These correspond approximately to summative, formative and evaluative functions of assessment respectively. The general feedback (known as worked solution in previous versions) is fixed and may not depend on the student's answers. Hence it is not considered to be feedback to the student's work in the strict sense. However, it remains a very useful outcome for students. The amount of feedback available in each question is governed by the question behaviours. Numerical score Each potential response tree calculates a numerical score between 0 and 1. This is then multiplied by the question value for each potential response tree. The final score for the question is the sum over all potential response trees. The numerical scores are assembled by traversing each potential response tree. Each branch of each node can add, subtract or set an absolute, score. The outcome at the end should be between 0 and 1. If the score, (s), lies outside this range it is taken to be ( \\min(\\max(s,0),1) ) to bring it within range, then it is scaled by multiplying by the question value for that potential response tree. A \"penalty\" may also set in the potential response tree for this attempt. Normally the penalty field in each branch of the potential response tree is empty, in which case the question level penalty value is used. However, these fields are useful to remove any penalty for this outcome, by setting it to zero explicitly. After the whole tree has been traversed, if the score is 1 then the penalty is always assigned to 0. STACK adjusts the score for each potential response tree, based on the number of valid, different attempts. The penalty scheme deducts from the score a small amount (default is (0.1=10\\%)) for each different and valid attempt which is not completely correct. It is designed to reward persistence and diligence when students initially get a question wrong, but they try again. It works in the following way. For each attempt (k), we let (s_k) be the score from the potential response tree. (p_k) be the \"penalty\" as follows: If (s_k=1) then (p_k=0), else If the penalty (p) set in the last branch traversed before exiting the potential response tree is not NULL then (p_k=p), else (p_k) is the penalty set in the question options, (default (0.1=10\\%) ). The default penalty scheme takes the maximum score for each attempt, so that by accruing further penalties a student may never be worse off. To be specific Let ( (s_i,p_i) ) for (i=1,\\cdots n) be the list of scores and penalties for a particular potential response tree, for each different valid attempt. The score for attempt (k) is defined to be [ \\mbox{Question value} \\times \\max\\left{ s_i-\\sum_{j=1}^i p_j,\\ i=1,\\cdots k \\right}.] Notice that this is purely a function of a list of (score, penalty) pairs. The score for that attempt is the sum of the marks for each potential response tree once penalties have been deducted from each tree. Text for the student The text-based feedback for students is a concatenation of the following elements. Answer test feedback. Many of the answer tests generate feedback of their own. This can be suppressed using the quiet option. While this feedback is often not needed, it would be very difficult for the teacher to re-create this. Bespoke feedback. Each branch of the potential response trees generates some feedback. Generic feedback. Once the potential response trees has been traversed and all feedback assigned, the score is used to generate some generic feedback. If the raw score equals (0) then the default feedback is Incorrect answer . If the raw score equals (1) then the default feedback is Correct answer, well done . Otherwise the generic feedback is Your answer is partially correct . These strings can be modified in the options .","title":"Feedback"},{"location":"Authoring/Feedback/#feedback","text":"The purpose of STACK is to assess students' answers to mathematical questions, and on the basis of the properties we establish to assign feedback . This document describes the ways STACK provides feedback to students. It will not go into much depth on creating the feedback, which is documented under potential response trees .","title":"Feedback"},{"location":"Authoring/Feedback/#types-of-assessment","text":"Formative assessment is to support and inform students' learning. Feedback here could be qualitative , e.g. written comments tailored to the student's answer and designed to help them improve their performance on the task. Summative assessment is to establish the achievement of the student. In mathematics, summative feedback is most often quantitative , either a mark or a percentage. Evaluative assessment is to measure the effectiveness of the teaching or the assessment of students. Such assessments could have quality enhancement or quality audit functions. See reporting . The ability to automatically generate data about an individual student or across a cohort is one particular strength of CAA, potentially enabling regular, detailed evaluative assessment. In STACK multi-part questions there is a complete separation between two important components. a list of inputs a list of potential response trees Specific feedback is associated with each input and each potential response tree. Typically, it is placed in the Specific feedback section, as that gives Moodle more control over when it is shown. However, the feedback tags can be positioned anywhere within the question text .","title":"Types of assessment"},{"location":"Authoring/Feedback/#validation","text":"Before an input is available to a potential response trees , it must be validated. In particular, at each attempt, each input is assigned a status. NULL, which indicates the field has not been previously given a value by the student, or the field is now empty since the student has deleted an answer. new, indicates an answer has not been validated or assessed, but has been changed from a previous attempt. invalid, which indicates that the field is not valid. valid, a response which is valid but not scored. score. In this case, the answer is available to any potential response tree requiring it. Normally a student will view a displayed form of their expression and submit it again. This default behaviour is inappropriate for multiple choice/selection interactions, and can be changed for each input using the option \"Student must verify\". Whether the student's answer is echoed back and shown is controlled by a separate option \"Show the validation\". Validation errors are always shown. Whether a string entered by the student is valid or invalid does not depend on the question. I.e. there should be a consistent mechanism for what constitutes a syntactically valid expression. However, in practice things are not quite so clean! Some input options do affect validity, such as forbid floats . Some symbols, e.g. (i) and (j) change meaning in different contexts, e.g. (\\sqrt{-1}) or vector components. See details about options .","title":"Validation"},{"location":"Authoring/Feedback/#potential-response-trees","text":"Each potential response tree returns three outcomes: a numerical score, text for the students, an answer note for use by the teacher during reporting . These correspond approximately to summative, formative and evaluative functions of assessment respectively. The general feedback (known as worked solution in previous versions) is fixed and may not depend on the student's answers. Hence it is not considered to be feedback to the student's work in the strict sense. However, it remains a very useful outcome for students. The amount of feedback available in each question is governed by the question behaviours.","title":"Potential response trees"},{"location":"Authoring/Feedback/#numerical-score","text":"Each potential response tree calculates a numerical score between 0 and 1. This is then multiplied by the question value for each potential response tree. The final score for the question is the sum over all potential response trees. The numerical scores are assembled by traversing each potential response tree. Each branch of each node can add, subtract or set an absolute, score. The outcome at the end should be between 0 and 1. If the score, (s), lies outside this range it is taken to be ( \\min(\\max(s,0),1) ) to bring it within range, then it is scaled by multiplying by the question value for that potential response tree. A \"penalty\" may also set in the potential response tree for this attempt. Normally the penalty field in each branch of the potential response tree is empty, in which case the question level penalty value is used. However, these fields are useful to remove any penalty for this outcome, by setting it to zero explicitly. After the whole tree has been traversed, if the score is 1 then the penalty is always assigned to 0. STACK adjusts the score for each potential response tree, based on the number of valid, different attempts. The penalty scheme deducts from the score a small amount (default is (0.1=10\\%)) for each different and valid attempt which is not completely correct. It is designed to reward persistence and diligence when students initially get a question wrong, but they try again. It works in the following way. For each attempt (k), we let (s_k) be the score from the potential response tree. (p_k) be the \"penalty\" as follows: If (s_k=1) then (p_k=0), else If the penalty (p) set in the last branch traversed before exiting the potential response tree is not NULL then (p_k=p), else (p_k) is the penalty set in the question options, (default (0.1=10\\%) ). The default penalty scheme takes the maximum score for each attempt, so that by accruing further penalties a student may never be worse off. To be specific Let ( (s_i,p_i) ) for (i=1,\\cdots n) be the list of scores and penalties for a particular potential response tree, for each different valid attempt. The score for attempt (k) is defined to be [ \\mbox{Question value} \\times \\max\\left{ s_i-\\sum_{j=1}^i p_j,\\ i=1,\\cdots k \\right}.] Notice that this is purely a function of a list of (score, penalty) pairs. The score for that attempt is the sum of the marks for each potential response tree once penalties have been deducted from each tree.","title":"Numerical score"},{"location":"Authoring/Feedback/#text-for-the-student","text":"The text-based feedback for students is a concatenation of the following elements. Answer test feedback. Many of the answer tests generate feedback of their own. This can be suppressed using the quiet option. While this feedback is often not needed, it would be very difficult for the teacher to re-create this. Bespoke feedback. Each branch of the potential response trees generates some feedback. Generic feedback. Once the potential response trees has been traversed and all feedback assigned, the score is used to generate some generic feedback. If the raw score equals (0) then the default feedback is Incorrect answer . If the raw score equals (1) then the default feedback is Correct answer, well done . Otherwise the generic feedback is Your answer is partially correct . These strings can be modified in the options .","title":"Text for the student"},{"location":"Authoring/Fixing_broken_questions/","text":"I have a misbehaving STACK question in a live Moodle quiz. What should I do? You can't remove or add a question to a live Moodle quiz, but you can modify it. If you edit a live STACK question then students will see the updates. Did you add any question tests to your question? If not, add these now. The testing page has a lot of information, including values of the question variables, and gives specific information of what is going into the answer tests and what values are returned. This page will also show some runtime errors, not all of which are displayed to students (and so are invisible on the preview testing page). Duplicate the question, rather than editing a live question in a quiz. Decide what changes need to be made before editing the broken live question. The database has no \"undo\" so you cannot revert once the question is saved, and you can only test a saved question... There are \"regrade\" and \"dry-run regrade\" options in the Moodle quiz. If you are happy with the new behaviour of the question you can regrade. You can also manually assign a mark in the Moodle quiz. It is ok to add nodes to an existing PRT and \"regrade\". However, the Moodle DB caches outcomes, so unless the score changes you will not see new stats. If you are using the basic question usage report to generate stats you might need to change the marks, regrade, change the marks back and regrade again to update the usage report stats. If you cannot apply a patch, then create a copy of the question and put it in a new category \"for next year\". It is normally best to fix it now! It is possible to change the weight of an individual question within a live quiz and re-grade. If the live question is impossible to fix you do have the option to disregard the question by assigning it a mark of (0) in the quiz. Fixing broken MathJax and Javascript A relatively common problem is that MathJax stops working half way through a question resulting in an equation showing up as a [Math Error] or similar error message, (or just showing the source). MathJax is a javascript library, and sometimes when it encounters malformed HTML it gives up. The first place to look is to check the integrity of the HTML in your question. Do not use the WYSIWYG editors in Moodle. The editors cut and paste all sorts of HTML formatting into LaTeX equations, e.g. \"span\" tags, which break MathJax. Choose the Moodle \"plain textarea\" editor from the user preferences. Edit your question and carefully tidy up your html. Things to look for: span tags inside LaTeX equations. Make sure your LaTeX has no HTML inside it, (entities like &lt; are fine). the [[input:....]] and other tags should not be inside random span tags either. If your javascript code, e.g. JSXGraph, also stops working this is almost certainly because it has been edited with a WYSIWYG editor which has \"protected\" your code and so broken it. Check with the plain textarea editor. Sorting out broken random versions. Do not change anything which alters the randomisation of variants. In particular, do not add, remove or re-order rand statements or other statement which will increment the state of the pseudo random number generation. Students get a \"seed\" which starts the pseudo-random number generator. If your changes change the random version, then the students' previous answers will still stand, and will now most likely be \"wrong\". Minor typographical mistakes can be fixed, but often there is nothing you can do to fix seriously bad random versions. This is why we have the \"deploy\" system and question tests so question variants can be checked in advance.... Modifying the question variables in a way which does not alter random versions should be fine. E.g. adding variables for test case consturction or improving a worked solution. If you have a single mis-behaving random variant, you can try the following type of approach. Imagine your question variables are n1:rand(10); and your question says _ `Find a numerical approximation to {@1/n1@} to three decimal places''_. Clearly the case n1=0 will throw a division by zero error, n1=1` will be (basically) pointless from an educational perspective and so on. However, the other students who have already taken a live quiz will have been given, and answered, the question you intended. It is tempting to change the question variables to n1:2+rand(8); but of course this will change the question for everyone. Instead you could just change the question variables to the following. n1:rand(10); n1:if is(n1<2) then 3 else n1; This will fix the broken variants, without changing all the others. Of course, you still have to deal with students who originally got a broken variant (grant an extra attempt at the quiz using the user override feature of the quiz?) and your n1=3 version will be three times as likely to occur. If you use n1:if is(n1<2) then (2+rand(8)) else n1; then any subsequent random number generation will be changed as well. Indeed, since the pseudo-random number generation is not really random then the second rand statement will only return a single value anyway because random variants are seeded from a single seed. To generate a second random number you would need to have n1:rand(10); n2:2+rand(8); n1:if is(n1<2) then n2 else n1; and make the question note include both n1 and n2 to show there are distinct random versions including both n1 and n2 as random variables. Of course, if the question author has created question tests in the first place, and deployed random variants to check in advance, this problem would never have occured! I forgot to deploy random variants. Moodle creates a random integer to seed the random number generation for each question. The seed is stored in the question-attempt and it is picked at the initiation of the quiz either from deployed ones or, if no variants have been deployed, is chosen freely. Students will therefore have their seed picked at the moment they start their quiz. The seed remains unchanged regardless of whether any variants are subsequenetly deployed, removed etc. Hence, deploying or undeploying variants will have no effect on students who already started the quiz.","title":"I have a misbehaving STACK question in a live Moodle quiz.  What should I do?"},{"location":"Authoring/Fixing_broken_questions/#i-have-a-misbehaving-stack-question-in-a-live-moodle-quiz-what-should-i-do","text":"You can't remove or add a question to a live Moodle quiz, but you can modify it. If you edit a live STACK question then students will see the updates. Did you add any question tests to your question? If not, add these now. The testing page has a lot of information, including values of the question variables, and gives specific information of what is going into the answer tests and what values are returned. This page will also show some runtime errors, not all of which are displayed to students (and so are invisible on the preview testing page). Duplicate the question, rather than editing a live question in a quiz. Decide what changes need to be made before editing the broken live question. The database has no \"undo\" so you cannot revert once the question is saved, and you can only test a saved question... There are \"regrade\" and \"dry-run regrade\" options in the Moodle quiz. If you are happy with the new behaviour of the question you can regrade. You can also manually assign a mark in the Moodle quiz. It is ok to add nodes to an existing PRT and \"regrade\". However, the Moodle DB caches outcomes, so unless the score changes you will not see new stats. If you are using the basic question usage report to generate stats you might need to change the marks, regrade, change the marks back and regrade again to update the usage report stats. If you cannot apply a patch, then create a copy of the question and put it in a new category \"for next year\". It is normally best to fix it now! It is possible to change the weight of an individual question within a live quiz and re-grade. If the live question is impossible to fix you do have the option to disregard the question by assigning it a mark of (0) in the quiz.","title":"I have a misbehaving STACK question in a live Moodle quiz.  What should I do?"},{"location":"Authoring/Fixing_broken_questions/#fixing-broken-mathjax-and-javascript","text":"A relatively common problem is that MathJax stops working half way through a question resulting in an equation showing up as a [Math Error] or similar error message, (or just showing the source). MathJax is a javascript library, and sometimes when it encounters malformed HTML it gives up. The first place to look is to check the integrity of the HTML in your question. Do not use the WYSIWYG editors in Moodle. The editors cut and paste all sorts of HTML formatting into LaTeX equations, e.g. \"span\" tags, which break MathJax. Choose the Moodle \"plain textarea\" editor from the user preferences. Edit your question and carefully tidy up your html. Things to look for: span tags inside LaTeX equations. Make sure your LaTeX has no HTML inside it, (entities like &lt; are fine). the [[input:....]] and other tags should not be inside random span tags either. If your javascript code, e.g. JSXGraph, also stops working this is almost certainly because it has been edited with a WYSIWYG editor which has \"protected\" your code and so broken it. Check with the plain textarea editor.","title":"Fixing broken MathJax and Javascript"},{"location":"Authoring/Fixing_broken_questions/#sorting-out-broken-random-versions","text":"Do not change anything which alters the randomisation of variants. In particular, do not add, remove or re-order rand statements or other statement which will increment the state of the pseudo random number generation. Students get a \"seed\" which starts the pseudo-random number generator. If your changes change the random version, then the students' previous answers will still stand, and will now most likely be \"wrong\". Minor typographical mistakes can be fixed, but often there is nothing you can do to fix seriously bad random versions. This is why we have the \"deploy\" system and question tests so question variants can be checked in advance.... Modifying the question variables in a way which does not alter random versions should be fine. E.g. adding variables for test case consturction or improving a worked solution. If you have a single mis-behaving random variant, you can try the following type of approach. Imagine your question variables are n1:rand(10); and your question says _ `Find a numerical approximation to {@1/n1@} to three decimal places''_. Clearly the case n1=0 will throw a division by zero error, n1=1` will be (basically) pointless from an educational perspective and so on. However, the other students who have already taken a live quiz will have been given, and answered, the question you intended. It is tempting to change the question variables to n1:2+rand(8); but of course this will change the question for everyone. Instead you could just change the question variables to the following. n1:rand(10); n1:if is(n1<2) then 3 else n1; This will fix the broken variants, without changing all the others. Of course, you still have to deal with students who originally got a broken variant (grant an extra attempt at the quiz using the user override feature of the quiz?) and your n1=3 version will be three times as likely to occur. If you use n1:if is(n1<2) then (2+rand(8)) else n1; then any subsequent random number generation will be changed as well. Indeed, since the pseudo-random number generation is not really random then the second rand statement will only return a single value anyway because random variants are seeded from a single seed. To generate a second random number you would need to have n1:rand(10); n2:2+rand(8); n1:if is(n1<2) then n2 else n1; and make the question note include both n1 and n2 to show there are distinct random versions including both n1 and n2 as random variables. Of course, if the question author has created question tests in the first place, and deployed random variants to check in advance, this problem would never have occured!","title":"Sorting out broken random versions."},{"location":"Authoring/Fixing_broken_questions/#i-forgot-to-deploy-random-variants","text":"Moodle creates a random integer to seed the random number generation for each question. The seed is stored in the question-attempt and it is picked at the initiation of the quiz either from deployed ones or, if no variants have been deployed, is chosen freely. Students will therefore have their seed picked at the moment they start their quiz. The seed remains unchanged regardless of whether any variants are subsequenetly deployed, removed etc. Hence, deploying or undeploying variants will have no effect on students who already started the quiz.","title":"I forgot to deploy random variants."},{"location":"Authoring/Future_proof/","text":"Guidelines for ensuring that a question works in the future Creating a great STACK question takes effort and often people worry about how updating STACK or Moodle or other components running those questions might affect their questions. While there are no guarantees you can increase the ongoing reliability of your questions by taking the following things into account. In some parts of this document we mention \"Abacus\". The Abacus project is a STACK material sharing organisation that seeks to develop high-quality materials to be implemented following these guidelines. This document ends with additional guidelines adopted by Abacus. This is both good practice, and will be relevant if you ever intend to join Abacus. The most important things are listed here. More detail is below. Build questions so that it is possible to detect changes in the platform. All questions must have \"question tests\", which allow unit testing of each question variant. Use simple correct HTML with all closing tags, avoiding explicit style of your own. Use only simple core LaTeX Maths environments/commands, with only \\(...\\) and \\[...\\] as the maths delimiters. Avoid linking to externally hosted content, such as pictures and applets. End Maxima commands with a semi-colon ; . Add comments to your Maxima code. Writing CASText CASText is the definition of the visible parts of the question, the bit where you pose the problem to the student lay out the equations and inputs and possibly draw fancy graphics. Technically, CASText is an HTML-document fragment with inline LaTeX equations and possible logic in the form of CASText blocks. To ease parsing of CASText you should ensure that you are writing valid (X)HTML i.e. make sure that all the tags get closed and that you are not placing block level elements in places where they do not belong. <span><div>...</div></span> is bad while <div><span>...</span></div> might be less bad. In the case of LaTeX using \\(...\\) instead of $...$ and \\[...\\] instead of $$...$$ , in Abacus $ -delimiters for LaTeX are strictly forbidden . (There is a simplistic auto-convert to help with a one-time conversion.) To ensure consistent presentation you should avoid using inline CSS styles in your CASText, as the styles of the surrounding system may change and cause conflicts. In general all styles are bad with the sole exception being text-align in the context of table cells. Otherwise: If at all possible remove all styles and the <span> tags related to them from the CASText. Most WYSIWYG editors have some clear formatting feature to do just that. You cannot have block level HTML elements inside a span tag, which is an inline element. You should not define font-size anywhere. If you need a heading with big text then use the <hX>...</hX> tags, but not with too small or large values of X. In Abacus <h3> and <h4> are recommended especially in model solutions. Likewise all other font stylings should be left to the surrounding system but feel free to use <i> , <b> , <em> , and <strong> if you need and assume that the surrounding system handles them correctly. You can use the <code> tag to explain how to type in answers. The top level of your CASText document should consist of <p> , <table> , <div> , or CASText block elements not of raw text. For the PRT be careful about using <p> tags (which editors hide). If you use the compact PRT style then STACK then puts this into span tags, and you cannot have block level HTML elements such as <p> inside a span tag. In the case of tables and images you may use a bit of styling, e.g. borders, paddings, margins, and sizes, but you should always use relative units when describing those sizes. Scale to match the current font-size or maybe to the width of the viewport or even to the maximum dimension of the display not to pixels as pixels have very different actual sizes on different screens and we cannot assume that the software displaying things will make the same scaling assumptions for them in the future. STACK now uses SVG, and this is preferred if you can embed this within the CASText. Only use supported JavaScript libraries, like JSXGraph. Avoid complex LaTeX constructions where you inject values into multiple places, instead try to tune Maxima LaTeX generation to meet your needs, e.g. showing working , using texput , or changing other features of Maxima constructs. If your CASText document contains scripts like JSXGraph content definitions you should ensure that if they require some external files to be evaluated you include those files with the question as links to external files will be broken at some point or the external files themselves change. In the case of JSXGraph use the jsxgraph CASText block which will handle the scripts at STACK level. All external files/links are bad! If you have images or other documents related to the question they should be included in the question. Avoid embedded frames, applets and other interactive content. To test inclusion you should be able to export the question and import it to a freshly installed raw system on a computer not connected to the internet and those questions should work. There is nothing wrong with internal files of any type, as long as they come with the question. Use of the include feature from 4.4 is also a bad thing, but you can make it less bad if the included file is present on a public server and if it is versioned so that one can link to a version that never changes. Writing CAS code The CAS code (internally keyvals and CASStrings) consists of Maxima assignment statements. Occasionally, Maxima's behaviour changes, and occasionally there are changes in the STACK provided Maxima functions. Changes cannot be avoided, but you can try to develop your questions based on as new as possible Maxima version to give them longer life. Otherwise there are some details that should be noted: End your statements with semicolons ( ; ) this will ease your life if you ever need to copy code to Maxima for testing. In the future semicolons may become mandatory, automatic conversion will however handle that change. Avoid interesting chars in your variable names e.g. _ has meaning and it is reasonable to assume that other chars might have new meanings in the future. Never write to a variable sharing a name with an input! You should also heed to these general guidelines: Teachers answers are generally stored in variables named tAns , tans1 , or maybe TAns3 this is a pretty widely spread convention and should be followed, in general the question variables should end with a listing of assignments defining the teachers answers for each input. Should there be need to process the students answer it might make sense to store it to sAns... . texput instead of manual string construction when generating LaTeX representations will keep your code readable. Write comments! More complex code is more likely to break at some point and someone, probably you, will need to understand it and provide a replacement logic for it. Especially, long oneliners have tendency to mystically break. Question tests & teacher's answers To detect broken questions we need to be able to test them and the only reasonable way to that is through the question tests. You must define some tests: at least one for each PRT in your question. Preferably provide one correct answer test for each PRT, tests for each branch in the PRTs, and some nonsense inputs to check for 'false positive' style failures. For manual testing it is important to provide each input with the correct teacher's answer and that teacher's answer must be in a form that matches input requirements. For example, if you require a floating-point number with a specific number of significant figures then do not specify the teacher's answer as a rational number! Note that you will need to do the same output formatting for the question tests if your question cares about the formatting of the answer. Please note that the system administrator has access to a \"bulk test\" script which runs all the tests on a category. You can use this when you upgrade your site. Things that have broken or will break There have been some changes, which have created broken questions between versions. List instantiation in Maxima is now required by Maxima and writing to an uninstantiated list gives errors like 'ARRSTORE: use_fast_arrays=false; allocate a new property hash table'. Basically, this means that you cannot say TAns[1]:x; without first saying TAns:[]; . So do not assume that Maxima knows you want to create a list by simply assigning to an index on an undefined variable. Maxima has its own addrow command, that differs from STACKs version. Please check any questions using addrow . Eventually, a conversion will be made that will switch the arguments of function calls in old questions using the old STACK version of that function but the change process will be long. Abacus guidelines Abacus materials are assumed to take into account the future proofing related comments above. In addition to this there are some other rules: Naming of questions The question names are to be in English and the question name is then suffixed with the language codes of the localisations present in the question e.g. 'Eigenvalues and eigenvectors [FI,SV]'. While uniqueness of the naming of questions might be desirable it makes more sense to name the collection (category for those dealing with Moodle) of questions uniquely and keep the individual question names short. As a special rule if your question contains scripting inside CASText section that would suffer from being opened and saved with a helpful WYSIWYG editor do note that in the name. Maybe a suffix of '[NO WYSIWYG]' or a prefix if you fear that it would not be displayed in the question list due to a long question name. Use lexicographical ordering to your advantage, so questions are listed in an order which might be helpful when using them in a quiz or a course. Keywords & author attribution 'Tags' i.e. keywords can be connected to questions and you are encouraged to use them. You may try to gain access to a listing of most common ones and see if your ideas about them might have been typed slightly differently over there but worry not about creating a new one. Author attribution in Abacus happens through keys/tags. Your questions should have a tag referencing your home organisation and one for your name. As some platforms do not support spaces in their keywords you may want to play it safe by writing the author tag as 'LastnameFirstname'. If you are significantly modifying an existing question feel free to add your author tag there but do not remove the existing ones. HTML All HTML needs to be valid XHTML. Empty <p></p> -tags and <br/> -tags are to be eliminated on sight. All content should go through clear formatting . Editing using the plain text area editor is strongly recommended, at the minimum authors should take a look at the source code view of their WYSIWYG editor and prune every now and then. Model solution Abacus materials are expected to contain model solutions in the 'general feedback'-field and that solution is expected to apply to the random variables present in the student's question. Feel free to use conditional rendering available through CASText blocks to handle differences in the solution process if the random variables require it. However, in general questions should aim to have the same solution process for all values of the parameters to avoid differences in difficulty. Naturally, questions with wildly different solutions are also useful. Question note The question note must be filled correctly, i.e. all random variables must be present in it. It is also recommended that the note provides a summary of the question and answer, if multiple differing solution processes are possible the note should tell which of those is required in the variant. Question notes are used if one selects specific variants for use and all that information will help then. Localisation Questions are to be localised within the question i.e. there must not exist more than one instance of the same question only differing by the language of the CASText portions. Currently, the localisation is to be done with the multilang filter of Moodle; once better or higher-level solutions are made possible we will automatically convert to them. PRT feedback It is perfectly acceptable to place the PRT-feedback marker within the question text, as opposed to the specific feedback field in Moodle, and it is recommended when dealing with questions with multiple PRTs and inputs. Try to place the feedback near to the things it applies to e.g. feedback for part A at the end of part A before part B starts. CAS Code & input and PRT naming Abacus materials should aim to use English names for the CAS variables, inputs and PRTs to ease debugging by other members. Realistically, when generating new localisations for an existing question the variables should be renamed at the same time unless they are already in English. If a variable name could cause confusion you should describe the variable in inline comments. You should use verbose internal variable names but not too verbose, try to aim for less than 10 characters. PascalCase/camelCase is the recommended way of dealing with multi word verbose names. Naming of PRTs is highly recommended, even partA and partB will be more descriptive names than prt1 and prt2 , naming of PRTs happens when you create them i.e. when you create that PRT-feedback marker.","title":"Guidelines for ensuring that a question works in the future"},{"location":"Authoring/Future_proof/#guidelines-for-ensuring-that-a-question-works-in-the-future","text":"Creating a great STACK question takes effort and often people worry about how updating STACK or Moodle or other components running those questions might affect their questions. While there are no guarantees you can increase the ongoing reliability of your questions by taking the following things into account. In some parts of this document we mention \"Abacus\". The Abacus project is a STACK material sharing organisation that seeks to develop high-quality materials to be implemented following these guidelines. This document ends with additional guidelines adopted by Abacus. This is both good practice, and will be relevant if you ever intend to join Abacus. The most important things are listed here. More detail is below. Build questions so that it is possible to detect changes in the platform. All questions must have \"question tests\", which allow unit testing of each question variant. Use simple correct HTML with all closing tags, avoiding explicit style of your own. Use only simple core LaTeX Maths environments/commands, with only \\(...\\) and \\[...\\] as the maths delimiters. Avoid linking to externally hosted content, such as pictures and applets. End Maxima commands with a semi-colon ; . Add comments to your Maxima code.","title":"Guidelines for ensuring that a question works in the future"},{"location":"Authoring/Future_proof/#writing-castext","text":"CASText is the definition of the visible parts of the question, the bit where you pose the problem to the student lay out the equations and inputs and possibly draw fancy graphics. Technically, CASText is an HTML-document fragment with inline LaTeX equations and possible logic in the form of CASText blocks. To ease parsing of CASText you should ensure that you are writing valid (X)HTML i.e. make sure that all the tags get closed and that you are not placing block level elements in places where they do not belong. <span><div>...</div></span> is bad while <div><span>...</span></div> might be less bad. In the case of LaTeX using \\(...\\) instead of $...$ and \\[...\\] instead of $$...$$ , in Abacus $ -delimiters for LaTeX are strictly forbidden . (There is a simplistic auto-convert to help with a one-time conversion.) To ensure consistent presentation you should avoid using inline CSS styles in your CASText, as the styles of the surrounding system may change and cause conflicts. In general all styles are bad with the sole exception being text-align in the context of table cells. Otherwise: If at all possible remove all styles and the <span> tags related to them from the CASText. Most WYSIWYG editors have some clear formatting feature to do just that. You cannot have block level HTML elements inside a span tag, which is an inline element. You should not define font-size anywhere. If you need a heading with big text then use the <hX>...</hX> tags, but not with too small or large values of X. In Abacus <h3> and <h4> are recommended especially in model solutions. Likewise all other font stylings should be left to the surrounding system but feel free to use <i> , <b> , <em> , and <strong> if you need and assume that the surrounding system handles them correctly. You can use the <code> tag to explain how to type in answers. The top level of your CASText document should consist of <p> , <table> , <div> , or CASText block elements not of raw text. For the PRT be careful about using <p> tags (which editors hide). If you use the compact PRT style then STACK then puts this into span tags, and you cannot have block level HTML elements such as <p> inside a span tag. In the case of tables and images you may use a bit of styling, e.g. borders, paddings, margins, and sizes, but you should always use relative units when describing those sizes. Scale to match the current font-size or maybe to the width of the viewport or even to the maximum dimension of the display not to pixels as pixels have very different actual sizes on different screens and we cannot assume that the software displaying things will make the same scaling assumptions for them in the future. STACK now uses SVG, and this is preferred if you can embed this within the CASText. Only use supported JavaScript libraries, like JSXGraph. Avoid complex LaTeX constructions where you inject values into multiple places, instead try to tune Maxima LaTeX generation to meet your needs, e.g. showing working , using texput , or changing other features of Maxima constructs. If your CASText document contains scripts like JSXGraph content definitions you should ensure that if they require some external files to be evaluated you include those files with the question as links to external files will be broken at some point or the external files themselves change. In the case of JSXGraph use the jsxgraph CASText block which will handle the scripts at STACK level. All external files/links are bad! If you have images or other documents related to the question they should be included in the question. Avoid embedded frames, applets and other interactive content. To test inclusion you should be able to export the question and import it to a freshly installed raw system on a computer not connected to the internet and those questions should work. There is nothing wrong with internal files of any type, as long as they come with the question. Use of the include feature from 4.4 is also a bad thing, but you can make it less bad if the included file is present on a public server and if it is versioned so that one can link to a version that never changes.","title":"Writing CASText"},{"location":"Authoring/Future_proof/#writing-cas-code","text":"The CAS code (internally keyvals and CASStrings) consists of Maxima assignment statements. Occasionally, Maxima's behaviour changes, and occasionally there are changes in the STACK provided Maxima functions. Changes cannot be avoided, but you can try to develop your questions based on as new as possible Maxima version to give them longer life. Otherwise there are some details that should be noted: End your statements with semicolons ( ; ) this will ease your life if you ever need to copy code to Maxima for testing. In the future semicolons may become mandatory, automatic conversion will however handle that change. Avoid interesting chars in your variable names e.g. _ has meaning and it is reasonable to assume that other chars might have new meanings in the future. Never write to a variable sharing a name with an input! You should also heed to these general guidelines: Teachers answers are generally stored in variables named tAns , tans1 , or maybe TAns3 this is a pretty widely spread convention and should be followed, in general the question variables should end with a listing of assignments defining the teachers answers for each input. Should there be need to process the students answer it might make sense to store it to sAns... . texput instead of manual string construction when generating LaTeX representations will keep your code readable. Write comments! More complex code is more likely to break at some point and someone, probably you, will need to understand it and provide a replacement logic for it. Especially, long oneliners have tendency to mystically break.","title":"Writing CAS code"},{"location":"Authoring/Future_proof/#question-tests-teachers-answers","text":"To detect broken questions we need to be able to test them and the only reasonable way to that is through the question tests. You must define some tests: at least one for each PRT in your question. Preferably provide one correct answer test for each PRT, tests for each branch in the PRTs, and some nonsense inputs to check for 'false positive' style failures. For manual testing it is important to provide each input with the correct teacher's answer and that teacher's answer must be in a form that matches input requirements. For example, if you require a floating-point number with a specific number of significant figures then do not specify the teacher's answer as a rational number! Note that you will need to do the same output formatting for the question tests if your question cares about the formatting of the answer. Please note that the system administrator has access to a \"bulk test\" script which runs all the tests on a category. You can use this when you upgrade your site.","title":"Question tests &amp; teacher's answers"},{"location":"Authoring/Future_proof/#things-that-have-broken-or-will-break","text":"There have been some changes, which have created broken questions between versions. List instantiation in Maxima is now required by Maxima and writing to an uninstantiated list gives errors like 'ARRSTORE: use_fast_arrays=false; allocate a new property hash table'. Basically, this means that you cannot say TAns[1]:x; without first saying TAns:[]; . So do not assume that Maxima knows you want to create a list by simply assigning to an index on an undefined variable. Maxima has its own addrow command, that differs from STACKs version. Please check any questions using addrow . Eventually, a conversion will be made that will switch the arguments of function calls in old questions using the old STACK version of that function but the change process will be long.","title":"Things that have broken or will break"},{"location":"Authoring/Future_proof/#abacus-guidelines","text":"Abacus materials are assumed to take into account the future proofing related comments above. In addition to this there are some other rules:","title":"Abacus guidelines"},{"location":"Authoring/Future_proof/#naming-of-questions","text":"The question names are to be in English and the question name is then suffixed with the language codes of the localisations present in the question e.g. 'Eigenvalues and eigenvectors [FI,SV]'. While uniqueness of the naming of questions might be desirable it makes more sense to name the collection (category for those dealing with Moodle) of questions uniquely and keep the individual question names short. As a special rule if your question contains scripting inside CASText section that would suffer from being opened and saved with a helpful WYSIWYG editor do note that in the name. Maybe a suffix of '[NO WYSIWYG]' or a prefix if you fear that it would not be displayed in the question list due to a long question name. Use lexicographical ordering to your advantage, so questions are listed in an order which might be helpful when using them in a quiz or a course.","title":"Naming of questions"},{"location":"Authoring/Future_proof/#keywords-author-attribution","text":"'Tags' i.e. keywords can be connected to questions and you are encouraged to use them. You may try to gain access to a listing of most common ones and see if your ideas about them might have been typed slightly differently over there but worry not about creating a new one. Author attribution in Abacus happens through keys/tags. Your questions should have a tag referencing your home organisation and one for your name. As some platforms do not support spaces in their keywords you may want to play it safe by writing the author tag as 'LastnameFirstname'. If you are significantly modifying an existing question feel free to add your author tag there but do not remove the existing ones.","title":"Keywords &amp; author attribution"},{"location":"Authoring/Future_proof/#html","text":"All HTML needs to be valid XHTML. Empty <p></p> -tags and <br/> -tags are to be eliminated on sight. All content should go through clear formatting . Editing using the plain text area editor is strongly recommended, at the minimum authors should take a look at the source code view of their WYSIWYG editor and prune every now and then.","title":"HTML"},{"location":"Authoring/Future_proof/#model-solution","text":"Abacus materials are expected to contain model solutions in the 'general feedback'-field and that solution is expected to apply to the random variables present in the student's question. Feel free to use conditional rendering available through CASText blocks to handle differences in the solution process if the random variables require it. However, in general questions should aim to have the same solution process for all values of the parameters to avoid differences in difficulty. Naturally, questions with wildly different solutions are also useful.","title":"Model solution"},{"location":"Authoring/Future_proof/#question-note","text":"The question note must be filled correctly, i.e. all random variables must be present in it. It is also recommended that the note provides a summary of the question and answer, if multiple differing solution processes are possible the note should tell which of those is required in the variant. Question notes are used if one selects specific variants for use and all that information will help then.","title":"Question note"},{"location":"Authoring/Future_proof/#localisation","text":"Questions are to be localised within the question i.e. there must not exist more than one instance of the same question only differing by the language of the CASText portions. Currently, the localisation is to be done with the multilang filter of Moodle; once better or higher-level solutions are made possible we will automatically convert to them.","title":"Localisation"},{"location":"Authoring/Future_proof/#prt-feedback","text":"It is perfectly acceptable to place the PRT-feedback marker within the question text, as opposed to the specific feedback field in Moodle, and it is recommended when dealing with questions with multiple PRTs and inputs. Try to place the feedback near to the things it applies to e.g. feedback for part A at the end of part A before part B starts.","title":"PRT feedback"},{"location":"Authoring/Future_proof/#cas-code-input-and-prt-naming","text":"Abacus materials should aim to use English names for the CAS variables, inputs and PRTs to ease debugging by other members. Realistically, when generating new localisations for an existing question the variables should be renamed at the same time unless they are already in English. If a variable name could cause confusion you should describe the variable in inline comments. You should use verbose internal variable names but not too verbose, try to aim for less than 10 characters. PascalCase/camelCase is the recommended way of dealing with multi word verbose names. Naming of PRTs is highly recommended, even partA and partB will be more descriptive names than prt1 and prt2 , naming of PRTs happens when you create them i.e. when you create that PRT-feedback marker.","title":"CAS Code &amp; input and PRT naming"},{"location":"Authoring/Inclusions/","text":"Inclusions This is an expert level topic, please avoid this feature unless you feel that you understand the implications and concecuences of it. Note that using this feature goes against the self-contained material principle present in the guidelines . That being said, a common request on the wish-list has been to provide some means of sharing code between questions. The inclusion-feature is the first step towards such a feature, however, it is not perfect nor do we expect it to be the solution that will finally be selected. But we provide it now that the backend has the tools to provide it, for those adventurous enough. Technical note: Currently, inclusions within inclusions are not supportted, due to loop detection and security validation reasons. Inclusions life-cycle For all current types of inclusions the inclusion happens at the time of compilation, which means that the source will be fetched when the question gets compiled and will stay in the cached compilation product. Compilation happens during the first use of the question after it has been saved or the cache has been purged. The logic will not track changes to the source material, if one wants to fetch it again one must re-compile the question, either by purging the caches or by editing the question. Note that in the current solution during export we export only the source address and the exported material will only work if the address is accessible at the end that imports it. Inclusions within text The simpler inclusion type is the CASText2 include-block, which will simply place CASText2-code from a given address at the blocks location. Note that one may need to be careful with the format of the context and included code, the include logic assumes that the code is of the same format as the context, so if your included content is in Markdown-format including it directly to HTML-context may cause trouble. Typical use case would be to have a JSXGraph plotting logic that expect that certain variables contain parameters for plotting and one would then simply make sure that one would populate those parameters before inclusion of the plotting logic for example like this: First plot the first plot with the values defined earlier. [[include src=\"http://example.com/fragments/myplot.txt\"/]] Then include the same plotting logic but change the parameters to plot something else. [[define plot_fun=\"theotherfun\" plot_param1=\"something\"/]] [[include src=\"http://example.com/fragments/myplot.txt\"/]] As the included content can be of a different format (Markdown etc.) than the context into which it gets included it is recommended that the included content defines its own format. For example, wrapping itself in one of the new format controlling blocks [[moodleformat]] , [[htmlformat]] or [[markdownformat]] , thus allowing whatever format content to be included within another formats content. Note, that at this time identification of math-mode is not quite ready to understand all of these context switches. Inclusions within CAS-logic You can also include code into keyvals, i.e. question-variables or into feedback-variables. This type of an inclusion will again act just as if written directly by the question author at that place in the code. If one writes this type of an inclusion within an if-statement it will simply get written open within an if-statement, the if will only decide if it executes, but it will still take that space and bandwidth. The included material must follow all the rules of normal STACK keyvals. Large amounts of code will affect performance. The internal Maxima code is pre-compiled but question variables are interpreted at runtime. All the identifiers bound in included code will subject to checks just as if you typed them in. Identifiers in your code will be marked as forbidden-words for the students. So particular care should be taken when choosing identifiers in such shared logic between questions. Do not use names a student might need to type in another, un-related, question! Code is loaded when you save the question, not when a student uses the question. Hence code is cached in the question. Updates to an external library will therefore not affect existing questions. That cache will not invalidate unless you (a) update the STACK plugin (which clears all cached/compiled questions), (b) save the question (which again downloads the code). Note that we do not do \"tree-shaking\" at this point to remove unnecessary code. If you include a massive library of functions that you do not use the question will still have to load those functions into the CAS and that may take some time. If you have libraries, used in many questions, please consider contibuting these to the core of STACK. To include external CAS code call the stack_include() -function with a string argument. The argument must be a raw string, containing the URL of the code. You cannot reference a variable containing such a string. For example, a: rand(3)+2; /* Load logic to tune the presentation. */ stack_include(\"http://example.com/fragments/mytexputrules.txt\"); /* Load some special randomisation functions. */ stack_include(\"http://example.com/fragments/mymatrixrand.txt\"); m: mymatrix_rand_integer_invertible(a); You may not use evaluation flags with stack_include() while the code included may have them the inclusion call cannot be used to apply flags to all the included content. The function stack_include_contrib() will load the files contained in the STACK maxima contrib folder in the master branch in github. In particular the argument of stack_include_contrib() has this URL prepended: https://raw.githubusercontent.com/maths/moodle-qtype_stack/master/stack/maxima/contrib/ Hence, the following are completely equivalent stack_include(\"https://raw.githubusercontent.com/maths/moodle-qtype_stack/master/stack/maxima/contrib/validators.mac\"); stack_include_contrib(\"validators.mac\"); Notes. We will try to keep files in the contrib folder small, and stable. We intend to move commonly used contributed code into the core in due course. At that point we will localise language strings for automatic translation. Please contact the developers about naming conventions. For example, external validators should start the function name with validator_ . Sandbox testing Note, that stack_include() and has no Maxima-side equivalent so you cannot simply copy-paste your question-variables into Maxima to debug things. You will need to manually do that inclusion. stack_include_contrib() will load the packages from the local STACK files, when you set up the sandbox. Make sure you have the latest code in your sandbox as you may have stale versions of contributed (and other core) files on your local machine.","title":"Inclusions"},{"location":"Authoring/Inclusions/#inclusions","text":"This is an expert level topic, please avoid this feature unless you feel that you understand the implications and concecuences of it. Note that using this feature goes against the self-contained material principle present in the guidelines . That being said, a common request on the wish-list has been to provide some means of sharing code between questions. The inclusion-feature is the first step towards such a feature, however, it is not perfect nor do we expect it to be the solution that will finally be selected. But we provide it now that the backend has the tools to provide it, for those adventurous enough. Technical note: Currently, inclusions within inclusions are not supportted, due to loop detection and security validation reasons.","title":"Inclusions"},{"location":"Authoring/Inclusions/#inclusions-life-cycle","text":"For all current types of inclusions the inclusion happens at the time of compilation, which means that the source will be fetched when the question gets compiled and will stay in the cached compilation product. Compilation happens during the first use of the question after it has been saved or the cache has been purged. The logic will not track changes to the source material, if one wants to fetch it again one must re-compile the question, either by purging the caches or by editing the question. Note that in the current solution during export we export only the source address and the exported material will only work if the address is accessible at the end that imports it.","title":"Inclusions life-cycle"},{"location":"Authoring/Inclusions/#inclusions-within-text","text":"The simpler inclusion type is the CASText2 include-block, which will simply place CASText2-code from a given address at the blocks location. Note that one may need to be careful with the format of the context and included code, the include logic assumes that the code is of the same format as the context, so if your included content is in Markdown-format including it directly to HTML-context may cause trouble. Typical use case would be to have a JSXGraph plotting logic that expect that certain variables contain parameters for plotting and one would then simply make sure that one would populate those parameters before inclusion of the plotting logic for example like this: First plot the first plot with the values defined earlier. [[include src=\"http://example.com/fragments/myplot.txt\"/]] Then include the same plotting logic but change the parameters to plot something else. [[define plot_fun=\"theotherfun\" plot_param1=\"something\"/]] [[include src=\"http://example.com/fragments/myplot.txt\"/]] As the included content can be of a different format (Markdown etc.) than the context into which it gets included it is recommended that the included content defines its own format. For example, wrapping itself in one of the new format controlling blocks [[moodleformat]] , [[htmlformat]] or [[markdownformat]] , thus allowing whatever format content to be included within another formats content. Note, that at this time identification of math-mode is not quite ready to understand all of these context switches.","title":"Inclusions within text"},{"location":"Authoring/Inclusions/#inclusions-within-cas-logic","text":"You can also include code into keyvals, i.e. question-variables or into feedback-variables. This type of an inclusion will again act just as if written directly by the question author at that place in the code. If one writes this type of an inclusion within an if-statement it will simply get written open within an if-statement, the if will only decide if it executes, but it will still take that space and bandwidth. The included material must follow all the rules of normal STACK keyvals. Large amounts of code will affect performance. The internal Maxima code is pre-compiled but question variables are interpreted at runtime. All the identifiers bound in included code will subject to checks just as if you typed them in. Identifiers in your code will be marked as forbidden-words for the students. So particular care should be taken when choosing identifiers in such shared logic between questions. Do not use names a student might need to type in another, un-related, question! Code is loaded when you save the question, not when a student uses the question. Hence code is cached in the question. Updates to an external library will therefore not affect existing questions. That cache will not invalidate unless you (a) update the STACK plugin (which clears all cached/compiled questions), (b) save the question (which again downloads the code). Note that we do not do \"tree-shaking\" at this point to remove unnecessary code. If you include a massive library of functions that you do not use the question will still have to load those functions into the CAS and that may take some time. If you have libraries, used in many questions, please consider contibuting these to the core of STACK. To include external CAS code call the stack_include() -function with a string argument. The argument must be a raw string, containing the URL of the code. You cannot reference a variable containing such a string. For example, a: rand(3)+2; /* Load logic to tune the presentation. */ stack_include(\"http://example.com/fragments/mytexputrules.txt\"); /* Load some special randomisation functions. */ stack_include(\"http://example.com/fragments/mymatrixrand.txt\"); m: mymatrix_rand_integer_invertible(a); You may not use evaluation flags with stack_include() while the code included may have them the inclusion call cannot be used to apply flags to all the included content. The function stack_include_contrib() will load the files contained in the STACK maxima contrib folder in the master branch in github. In particular the argument of stack_include_contrib() has this URL prepended: https://raw.githubusercontent.com/maths/moodle-qtype_stack/master/stack/maxima/contrib/ Hence, the following are completely equivalent stack_include(\"https://raw.githubusercontent.com/maths/moodle-qtype_stack/master/stack/maxima/contrib/validators.mac\"); stack_include_contrib(\"validators.mac\"); Notes. We will try to keep files in the contrib folder small, and stable. We intend to move commonly used contributed code into the core in due course. At that point we will localise language strings for automatic translation. Please contact the developers about naming conventions. For example, external validators should start the function name with validator_ .","title":"Inclusions within CAS-logic"},{"location":"Authoring/Inclusions/#sandbox-testing","text":"Note, that stack_include() and has no Maxima-side equivalent so you cannot simply copy-paste your question-variables into Maxima to debug things. You will need to manually do that inclusion. stack_include_contrib() will load the packages from the local STACK files, when you set up the sandbox. Make sure you have the latest code in your sandbox as you may have stale versions of contributed (and other core) files on your local machine.","title":"Sandbox testing"},{"location":"Authoring/Inputs/","text":"Inputs Inputs are the points at which the student interacts with the question. The default (and prototype) is an HTML input box into which a student is expected to type an algebraic expression. Only the question text may have inputs. Inputs are not required. Hence it is possible for the teacher to make a statement which asks for no response from the student, i.e. a rhetorical question. A question may have as many inputs as needed. Inputs can be positioned anywhere within the question text . MathJax does not currently support the inclusion of inputs within equations. All inputs return a Maxima expression. This might be just the student's answer (in the case of an algebraic input). MCQ inputs also return a valid Maxima expression. In a multi-part question avoid having inputs which differ only by case sensitivity. E.g. do not have [[input:a]] and [[input:A]] in the same question. (Some database defaults have case insensitive unique keys (!) and in that case this will cause a database error. See the installation instructions ). The position of an input in the question text is denoted by [[input:ans1]] Here ans1 is the name of a Maxima variable to which the student's answer is to be assigned. This must only be letters followed (optionally) by numbers, as in this example. No special characters are permitted. The input name cannot be more than 18 characters long. Feedback as to the syntactic validity of a response is positioned using a corresponding tag [[validation:ans1]] This tag must be included even if validation is suppressed with an option (see below) and is automatically generated after the input if it does not exist. We expose the exact behaviour of the validation by giving registered users access to STACK's test suite validation of student's answers. This can be found on a live server at https://stack-demo.maths.ed.ac.uk/demo/question/type/stack/adminui/studentinputs.php Each input may have a number of options and this is potentially complex area with a large range of possibilities. The basic idea is to reject things as \"invalid\" to stop students being penalized on a technicality. This might be requiring an equation, or making floating-point numbers within an expression forbidden. Basic options Student's Answer Key ### {#Answer_Key} Every input must have a unique answer key. This is set in the Question text using the following tag, where ans1 is the variable name to which the student's answer is assigned. [[input:ans1]] Internally you can refer to the student's answer using the variable name ans1 in the potential response tree, feedback variables and feedback text. The worked solution (general feedback) may not depend on the inputs. Model answer ### {#model_answer} This field is compulsory. Every input must have an answer, although this answer is not necessarily the unique correct answer, or even \"correct\"! This value be displayed to the student as the correct answer. We recommend you use a question variable for this field so it can be used in the other parts of the question, e.g. the potential response trees. Input type Currently STACK supports the following kinds of inputs. These have a variety of options, as explained below. Algebraic input The default: a form box into which a student is expected to type an algebraic expression. Numerical This input type requires the student to type in a number of some kind. Any expression with a variable will be rejected as invalid. Note, some things (like forbid floats) can be applied to any numbers in an algebraic input; other tests (like require n decimal places) cannot and can only be applied to a single number in this input type. See the specific documentation for more information: Numerical input . Scientific units The support for scientific units includes an input type which enables teachers to check units as valid/invalid. See the separate documentation for units . Matrix The size of the matrix is inferred from the model answer. STACK then adds an appropriate grid of boxes (of size Box Size) for the student to fill in. This is easier than typing in Maxima 's matrix command, but does give the game away about the size of the required matrix. The student may not fill in part of a matrix. If they do so, the remaining entries will be completed with ? characters which render the attempt invalid. STACK cannot cope with empty boxes here. We cannot use the EMPTYANSWER tag for the teacher's answer with the matrix input, because the size of the matrix is inferred from the model answer. If a teacher really wants a correct answer to be empty inputs then they must use a correctly formatted matrix with null values ta:transpose(matrix([null,null,null])); Text area This input allows the user to type in multiple lines, where each line must be a valid algebraic expression. STACK passes the result to Maxima as a list. Note, the teacher's answer and any syntax hint must be a list, of valid Maxima exprssions! If you just pass in an expression strange behaviour may result. If the allowempty tag is used the student's answer will be [EMPTYANSWER] to ensure the type of the student's answer is always a list. Equivalence reasoning input The purpose of this input type is to enable students to work line by line and reason by equivalence. See the specific documentation for more information: Equivalence reasoning . Note, the teacher's answer and any syntax hint must be a list! If you just pass in an expression strange behaviour may result. If the allowempty tag is used the student's answer will be [EMPTYANSWER] to ensure the type of the student's answer is always a list. True/False Simple drop down. A Boolean value is assigned to the variable name. If the teacher's correct answer should leave this blank (e.g. not answered at all) then use the tag EMPTYANSWER . (There are some edge cases where only some inputs are used in the correct answer to a question, so not answering is correct here). If you use the extra option allowempty then empty answers are considered valid, and the value of this input is EMPTYANSWER . Dropdown/Checkbox/Radio The dropdown, checkbox and radio input types enable teachers to create multiple-choice questions. See the separate documentation. String input This is a normal input into which students may type whatever they choose. It is always converted into a Maxima string internally. Notes There is no way whatsoever to parse the student's string into a Maxima expression. If you accept a string, then it will always remain a string! You can't later check for algebraic equivalence. The only tests available will be simple string matches, etc. An empty answer will be blank unless you use the allowempty option in which case the answer will be interpreted as an empty string, i.e. \"\" rather than EMPTYANSWER as would be the case with other inputs. STACK does some sanitation on students' input within strings to stop students typing in HTML code. For example, you may find that a string \"a<b\" actually ends up in Maxima with the less-than sign inside the string changed into an html entity &lt; , so your string inside Maxima becomes \"a&lt;b\" . In cases where string matches unexpectedly fail, look at the testing page to see what is actually being compared within the PRT and re-build the teacher's answer to match. Notes input This input is a text area into which students may type whatever they choose. It can be used to gather their notes or \"working\". However, this input is always considered as \"invalid\", so that any potential response tree which relies on this input will never get evaluated! This input type can be used for surveys; answers which are not automatically marked, contributing to semi-automatic marking . The notes input has a special extra option manualgraded , and the default option value is manualgraded:false . If you specify manualgraded:true then the whole STACK quesion will require manual grading! Single Character A single letter can be entered. This is useful for creating multiple-choice questions, but is not used regularly. Options Input Box Size ### {#Box_Size} The width of the input box. Insert Stars ### {#Insert_Stars} Insert Stars affect the way STACK treats the validation of CAS strings. Some patterns must always be wrong. For example )( must be missing a star, and so this pattern is always included. There are six options. Don't insert stars: This does not insert * characters automatically. If there are any pattern identified the result will be an invalid expression. Insert * s for implied multiplication. If any patterns are identified as needing * s then they will automatically be inserted into the expression quietly. Insert * s assuming single character variable names. In many situations we know that a student will only have single character variable names. Identify variables in the student's answer made up of more than one character then replace these with the product of the letters. Note, the student's formula is interpreted and variables identified, so (\\sin(ax)) will not end up as s*i*n*(a*x) but as sin(a*x) . Note, in interpreting the student's formula we build an internal tree in order to identify variable names and function names. Hence (xe^x) is interpreted as ( (xe)^x ). We then identify the variable name xe and replace this as x*e . Hence, using this option we have xe^x is interpreted as (x*e)^x NOT as x*e^x which you might expect. There are also additional options to insert multiplication signs for spaces. Insert stars for spaces only Insert stars for implied multiplication and for spaces Insert stars assuming single-character variable names and for spaces If a space is taken for multiplication what should we do with (\\sin\\ x)? Currently this is transformed to (\\sin \\times x) and then rejected as invalid as you can't multiply the function name by its argument. Use these latter options with caution: in the long run students are likely to need to use a strict syntax with machines, and letting them use spaces now might be a disservice. It is often very important to have some on-screen representation of multiplication, e.g. as a dot, so the student can see at the validation that xe^x is interpreted as ( (x\\cdot e)^x) if we assume single character variable names, and as ( xe^x) if we just \"Insert * s for implied multiplication\". The absence of the dot here is key. Syntax Hint {#Syntax_Hint} A syntax hint allows the teacher to give the student a pro-forma in the input box. This can include '?' characters. The syntax hint will appear in the answer box whenever this is left blank by the student. For example, rather than having to type matrix([1,2],[3,4]) the teacher may want to provide an answer box which already contains the string matrix([?,?],[?,?]) instead. The student then need only to edit this, to replace ?s with their values. This helps reduce syntax error problems with more difficult syntax issues. The ? may also be used to give partial credit. Of course it could also be used for general expressions such as: x^2+?*x+1 Forbidden words ### {#Forbidden_Words} This is a comma-separated list of text strings which are forbidden in a student's answer. If one of these strings is present then the student's attempt will be considered invalid, and no penalties will be given. This is an unsophisticated string match. Note, any question variable names used in the question variables are automatically forbidden (otherwise the student could potentially use the variable name you have defined, which might be the correct answer). If you want to allow question variables, you must explicitly use the allowed words field, see below. Note that the string * is literally taken as * and is not a wild card. Teachers may ask a student to calculate 2*3 and hence need to forbid multiplication in an answer. If you wish to forbid commas, then escape it with a backslash. There are groups of common keywords which you can forbid simply as [[BASIC-ALGEBRA]] common algebraic operations such as simplify , factor , expand , solve , etc. [[BASIC-CALCULUS]] common calculus operations such as int , diff , taylor , etc. [[BASIC-MATRIX]] common matrix operations such as transpose , invert , charpoly , etc. If you have suggestions for more lists, or additional operations which should be added to the existing lists, please contact the developers. Allowed words ### {#Allowed_Words} By default, arbitrary function or variable names of more than two characters in length are not permitted. This is a comma-separated list of function or variable names which are permitted in a student's answer. Note the allowed words permit the teacher to override some (but not all) of the strings which are considered to be invalid by default for student input. For example, Sin (capital \"S\") has specific feedback. If you need this in a question you have to allow it here. Similarly In (\"India November\") is mistakenly used by students for the natural logarithm rather than ln (\"Lima November\"). Hence by default this triggers specific feedback. You can allow In here. Forbid Floats ### {#Forbid_Floats} If set to yes , then any answer of the student which has a floating-point number will be rejected as invalid. Students sometimes use floating-point numbers when they should use fractions. This option prevents problems with approximations being used. Require lowest terms ### {#Require_lowest_terms} When this option is set to yes , any coefficients or other rational numbers in an expression, must be written in lowest terms. Otherwise the answer is rejected as \"invalid\". This enables the teacher to reject answers, and not consider them further. Note that at most one number can have a minus sign and two unary minus signs are considered to be something which should be cancelled. Check Students answer's type ### {#Check_Type} If this option is set to yes then unless the student's expression is the same Maxima as the teacher's correct answer, then the attempt will be rejected as invalid. Type checking here is very simple, basically checking the student's answer is an equation, inequality, list, set, matrix to match that of the teacher. The intention is not to be completely comprehensive, but to avoid obvious type mismatch. E.g. this is very useful for ensuring the student has typed in an \"equation\", such as (y=mx+c) and not an expression such as (mx+c). Remember, you can't compare an expression with an equation! Another useful way of avoiding this problem is to put a LaTeX string such as (y=) just before the input. E.g. \\(y=\\)[[input:ans1]]. Student must verify ### {#Student_must_verify} Specifies whether the student's input is presented back to them before scoring as part of a two-step validation process. Typically the student's mathematical expression is displayed in traditional form. This is useful for complex algebraic expressions but not needed for constrained input like yes / no . Experience strongly supports the use of this two-step verification process. Errors will always be displayed and expressions with errors rejected as invalid. Potential response trees will not execute with invalid input. The next option controls how the validation feedback is displayed. Note, it is not possible to require a two-step validation but not show some validation feedback. Show validation ### {#Show_validation} Feedback to students is in two forms. feedback tied to inputs, in particular if the answer is invalid. feedback tied to each potential response tree. Setting this option displays any feedback from this input, including echoing back their expression in traditional two-dimensional notation. Generally, feedback and verification are used in conjunction. Errors will always be displayed. In addition to simply displaying the student's expression, the teacher can display the list of variables which occurs in the expression. From experience, this is helpful in letting students understand the idea of variable and to spot case insensitivity or wrong variable problems. The \"compact\" version removes most of the styling. This is needed when the answer is part of a table. Extra option: hideanswer Users are increasingly using inputs to store state , which makes no sense for a user to see. For example, when using JSXGraph users transfer the configuration of the diagram into an input via JavaScript. In many situations, it makes no sense for the student to see anything about this input. The validation can be switched off with the regular \"show validation\" option, the input box itself can be hidden with JavaScript/CSS. Putting hideanswer in the extra options stops displaying the \"teacher's answer\", e.g. at the end of the process. All input types should support this extra option. Do not use this option in questions in place of the normal quiz settings. Extra option: allowempty Normally a blank , i.e. empty, answer has a special status and are not considered \"valid\". Hence, a PRT relying on an input left blank will not be traversed. Answers consisting only of whitespace are also considered as empty. The extra option allowempty allows the input to be empty. Internally an empty answer will be replaced by the Maxima atom EMPTYANSWER . Internally it is essential that the variable name of the input, (e.g. ans1 ) is really assigned a specific value. The teacher will need to deal with EMPTYANSWER tags in the PRT. We strongly recommend (with many years of experience) that teachers do not use this option without very careful thought! For example, if you don't want to give away how many answers you expect, then ask the student to provide a set of answers. Another option is to use the \"TextArea\" input type. Each line of the TextArea is validated separately, and the resulting mathematical expression is a list. The student is therefore free to choose how many expressions to type in, as the circumstances require, without a pre-defined number of input boxes. By design, it is better to use these methods than trying to combine separate inputs, some of which are empty, in the PRT later. Our experience strongly suggests this option should only be used for edge cases, and not for routine use. If you use this option when students navigate away from a page the system will \"validate\" the inputs, and hence any empty boxes will be considered an active empty choice by the student and will be assessed. If you use this option there is no way to distinguish between an active empty answer choice, and a student who deletes their answer. (The same problem occurs with radio buttons....) There are (unfortunately) some edge cases where it is useful to permit the execution of a PRT without all the inputs containing significant content. Assume you have three inputs ans1 , ans2 , ans3 contributing to a PRT, all of which have the allowempty option set because you don't want to tell the student which might be empty. Assume the correct answer has at least one entry non-empty. Then, make the first node of the PRT check ATAlgEquiv({ans1,ans2,ans3},{EMPTYANSWER}) This checks if all inputs are empty, so if true set the score and the penalty to be zero and stop. This prevents the student accruing a penalty if they navigate away with all the boxes empty, but the PRT will still execute an \"attempt\". If a teacher has three inputs ans1 , ans2 , ans3 , then they can define a set in the feedback variables as follows sa:setdifference({ans1,ans2,ans3},{EMPTYANSWER}) The variable sa will be a set containing the non-empty answers (if any). The teacher can use the EMPTYANSWER tag as a \"correct answer\". Extra option: simp Actually simplify the student's answer during the validation process. This will allow students to type in something like makelist(k^2,k,1,8) If teacher's want this kind of thing, then a syntax hint is probably in order as well. You may need to ev(ans1,simp) explicitly in any potential response tree. It makes no sense to simplify the equivalence reasoning input type, so this has been omitted. Extra option: align Controls if the student's answer is aligned 'left' or 'right' within the input box. Extra option: nounits As of STACK 4.3, if units are declared in a question then the whole question will use a units context for parsing inputs. For example, in a multi-part question you may use a matrix input. If you do so, and use variable names, then these will be parsed expecting them to be usits. To prevent this in a particular input, use the nounits option Extra option: consolidatesubscripts As of STACK 4.3.10, there is an option to \"consolidate subscripts\". There is a subtle (and perhaps confusing) difference between atoms in Maxima. The strings a1 and a_1 are both atoms in Maxima, and are different. Hence, the atoms a1 and a_1 are not considered to be algebraically equivalent. To avoid penalising students on a technicality, if you include the extra option consolidatesubscripts or consolidatesubscripts:true then students' input will be converted to the form without the underscore. In students' input M_1 is converted to M1 . Teachers are expected to use the correct pattern M1 in the correct answer and in PRTs. We only filter a very limited pattern, namely ^[a-zA-Z]+_[0-9]+$ which is an atom starting with one or more letters, then an underscore _ then one or more digits. This is the only pattern currently replaced. Specifically double subscripts or non-numeric subscripts are ignored. (If you have genuine use for more patterns please contact the developers with examples!) More information on subscripts is given in the atoms and subscripts section of the more general Maxima documentation. Extra option: checkvars As of STACK 4.4.0, there is an option to check, or allow comparison between, variables which occur in the student's answer and the teacher's answer. This option takes the form of checkvars:n , where n is an integer. Ommiting this option is equivalent to setting n=0 . The binary bits are used to set this options. If the 1st binary bit of n is 1 (i.e. n is odd) then we flag up spurious variables. If the 2nd binary bit of n is 1 then we flag up missing variables. So, to check both set checkvars:3 . The numerical argument provides potential for future-proofing features (e.g. case sensitivity). Extra option: validator This allows an input to add additional bespoke validation, based on a function defined by the question author. For example, you can define a function which checks if the student's answer is a list of exactly three floating point numbers . See the validator documetation for more details. Writing bespoke validators is an advanced feature, but offers two significant benefits. Students are less likely to be penalised on a technicality, especially in high-stakes situations; Potential response tree authoring becomes much easier and more reliable because the validation acts as a \"guard clause\" only allowing correctly structured information through to the PRT. This means type-checking need not be done in the PRT before assessment. Extra options In the future we are likely to add additional functionality via the extra options fields. This is because the form-based support becomes ever more complex, intimidating and difficult to navigate. Input tips and tricks It is often sensible to use a prefix just in front of the form box. For example \\(f(x)=\\) [[input:ans1]]. This avoids all kinds of problems with students also trying to enter the prefix themselves. You could also specify units afterwards, but you might also want the student to type these in! In Maxima the input (a,b,c) is a programmatic block element (see Maxima's manual for block ). Hence we cannot use this directly for the input of coordinates. Instead, have the students type in an unnamed function like P(x,y) This technique can be used to enter a set of points {A(1,2), B(2,3)} as an answer. The op command can be used to filter out a particular point, and the args command becomes a list of coordinates. Options summary table This table lists all options, and which inputs use/respect them. The . means the option is ignored. Options Alg Num Units Matrix Check Radio Drop T/F TextArea Equiv String Notes Box size Y Y Y Y . . . . Y Y Y Y Strict Syn Y (1) (1) Y . . . . Y Y . . Insert stars Y Y Y Y . . . . Y Y . . Syntax hint Y Y Y Y . . . . Y Y Y Y Hint att Y Y Y Y . . . . Y Y Y Y Forbidden words Y Y Y Y . . . . Y Y . . Allowed words Y Y Y Y . . . . Y Y . . Forbid float Y Y Y Y . . . . Y Y . . Lowest terms Y Y Y Y . . . . Y Y . . Check type Y Y Y Y . . . . . . . . Must verify Y Y Y Y Y Y Y Y Y Y Y . Show validation Y Y Y Y Y Y Y Y Y Y Y . Extra options: rationalize Y Y . . . . . . . . . . min/max sf/dp . Y Y . . . . . . . . . floatnum . Y . . . . . . . . . . intnum . Y . . . . . . . . . . rationalnum . Y . . . . . . . . . . consolidatesubscripts Y . Y Y . . . . . . . . negpow . . Y . . . . . . . . . simp Y Y Y Y . . . . Y . . . align Y Y Y . . . . . . . . . nounits Y Y Y Y Y Y Y . . Y . . checkvars Y . . Y . . . . . Y . . validator Y Y Y Y . . . . . . Y . For documentation about the various options not documented on this page look at the pages for the specific inputs in which each option is used. Notes: The numerical and units input type ignore the strict syntax option and always assume strict syntax is \"true\". Otherwise patterns for scientific numbers such as 2.23e4 will have multiplication characters inserted. Other input types Adding new inputs, or options for existing inputs, is a job for the developers. The only essential requirement is that the result is a valid CAS expression, which includes of course a string data type, or a list.","title":"Inputs"},{"location":"Authoring/Inputs/#inputs","text":"Inputs are the points at which the student interacts with the question. The default (and prototype) is an HTML input box into which a student is expected to type an algebraic expression. Only the question text may have inputs. Inputs are not required. Hence it is possible for the teacher to make a statement which asks for no response from the student, i.e. a rhetorical question. A question may have as many inputs as needed. Inputs can be positioned anywhere within the question text . MathJax does not currently support the inclusion of inputs within equations. All inputs return a Maxima expression. This might be just the student's answer (in the case of an algebraic input). MCQ inputs also return a valid Maxima expression. In a multi-part question avoid having inputs which differ only by case sensitivity. E.g. do not have [[input:a]] and [[input:A]] in the same question. (Some database defaults have case insensitive unique keys (!) and in that case this will cause a database error. See the installation instructions ). The position of an input in the question text is denoted by [[input:ans1]] Here ans1 is the name of a Maxima variable to which the student's answer is to be assigned. This must only be letters followed (optionally) by numbers, as in this example. No special characters are permitted. The input name cannot be more than 18 characters long. Feedback as to the syntactic validity of a response is positioned using a corresponding tag [[validation:ans1]] This tag must be included even if validation is suppressed with an option (see below) and is automatically generated after the input if it does not exist. We expose the exact behaviour of the validation by giving registered users access to STACK's test suite validation of student's answers. This can be found on a live server at https://stack-demo.maths.ed.ac.uk/demo/question/type/stack/adminui/studentinputs.php Each input may have a number of options and this is potentially complex area with a large range of possibilities. The basic idea is to reject things as \"invalid\" to stop students being penalized on a technicality. This might be requiring an equation, or making floating-point numbers within an expression forbidden.","title":"Inputs"},{"location":"Authoring/Inputs/#basic-options","text":"","title":"Basic options"},{"location":"Authoring/Inputs/#students-answer-key-answer_key","text":"Every input must have a unique answer key. This is set in the Question text using the following tag, where ans1 is the variable name to which the student's answer is assigned. [[input:ans1]] Internally you can refer to the student's answer using the variable name ans1 in the potential response tree, feedback variables and feedback text. The worked solution (general feedback) may not depend on the inputs.","title":"Student's Answer Key ###  {#Answer_Key}"},{"location":"Authoring/Inputs/#model-answer-model_answer","text":"This field is compulsory. Every input must have an answer, although this answer is not necessarily the unique correct answer, or even \"correct\"! This value be displayed to the student as the correct answer. We recommend you use a question variable for this field so it can be used in the other parts of the question, e.g. the potential response trees.","title":"Model answer ###  {#model_answer}"},{"location":"Authoring/Inputs/#input-type","text":"Currently STACK supports the following kinds of inputs. These have a variety of options, as explained below.","title":"Input type"},{"location":"Authoring/Inputs/#algebraic-input","text":"The default: a form box into which a student is expected to type an algebraic expression.","title":"Algebraic input"},{"location":"Authoring/Inputs/#numerical","text":"This input type requires the student to type in a number of some kind. Any expression with a variable will be rejected as invalid. Note, some things (like forbid floats) can be applied to any numbers in an algebraic input; other tests (like require n decimal places) cannot and can only be applied to a single number in this input type. See the specific documentation for more information: Numerical input .","title":"Numerical"},{"location":"Authoring/Inputs/#scientific-units","text":"The support for scientific units includes an input type which enables teachers to check units as valid/invalid. See the separate documentation for units .","title":"Scientific units"},{"location":"Authoring/Inputs/#matrix","text":"The size of the matrix is inferred from the model answer. STACK then adds an appropriate grid of boxes (of size Box Size) for the student to fill in. This is easier than typing in Maxima 's matrix command, but does give the game away about the size of the required matrix. The student may not fill in part of a matrix. If they do so, the remaining entries will be completed with ? characters which render the attempt invalid. STACK cannot cope with empty boxes here. We cannot use the EMPTYANSWER tag for the teacher's answer with the matrix input, because the size of the matrix is inferred from the model answer. If a teacher really wants a correct answer to be empty inputs then they must use a correctly formatted matrix with null values ta:transpose(matrix([null,null,null]));","title":"Matrix"},{"location":"Authoring/Inputs/#text-area","text":"This input allows the user to type in multiple lines, where each line must be a valid algebraic expression. STACK passes the result to Maxima as a list. Note, the teacher's answer and any syntax hint must be a list, of valid Maxima exprssions! If you just pass in an expression strange behaviour may result. If the allowempty tag is used the student's answer will be [EMPTYANSWER] to ensure the type of the student's answer is always a list.","title":"Text area"},{"location":"Authoring/Inputs/#equivalence-reasoning-input","text":"The purpose of this input type is to enable students to work line by line and reason by equivalence. See the specific documentation for more information: Equivalence reasoning . Note, the teacher's answer and any syntax hint must be a list! If you just pass in an expression strange behaviour may result. If the allowempty tag is used the student's answer will be [EMPTYANSWER] to ensure the type of the student's answer is always a list.","title":"Equivalence reasoning input"},{"location":"Authoring/Inputs/#truefalse","text":"Simple drop down. A Boolean value is assigned to the variable name. If the teacher's correct answer should leave this blank (e.g. not answered at all) then use the tag EMPTYANSWER . (There are some edge cases where only some inputs are used in the correct answer to a question, so not answering is correct here). If you use the extra option allowempty then empty answers are considered valid, and the value of this input is EMPTYANSWER .","title":"True/False"},{"location":"Authoring/Inputs/#dropdowncheckboxradio","text":"The dropdown, checkbox and radio input types enable teachers to create multiple-choice questions. See the separate documentation.","title":"Dropdown/Checkbox/Radio"},{"location":"Authoring/Inputs/#string-input","text":"This is a normal input into which students may type whatever they choose. It is always converted into a Maxima string internally. Notes There is no way whatsoever to parse the student's string into a Maxima expression. If you accept a string, then it will always remain a string! You can't later check for algebraic equivalence. The only tests available will be simple string matches, etc. An empty answer will be blank unless you use the allowempty option in which case the answer will be interpreted as an empty string, i.e. \"\" rather than EMPTYANSWER as would be the case with other inputs. STACK does some sanitation on students' input within strings to stop students typing in HTML code. For example, you may find that a string \"a<b\" actually ends up in Maxima with the less-than sign inside the string changed into an html entity &lt; , so your string inside Maxima becomes \"a&lt;b\" . In cases where string matches unexpectedly fail, look at the testing page to see what is actually being compared within the PRT and re-build the teacher's answer to match.","title":"String input"},{"location":"Authoring/Inputs/#notes-input","text":"This input is a text area into which students may type whatever they choose. It can be used to gather their notes or \"working\". However, this input is always considered as \"invalid\", so that any potential response tree which relies on this input will never get evaluated! This input type can be used for surveys; answers which are not automatically marked, contributing to semi-automatic marking . The notes input has a special extra option manualgraded , and the default option value is manualgraded:false . If you specify manualgraded:true then the whole STACK quesion will require manual grading!","title":"Notes input"},{"location":"Authoring/Inputs/#single-character","text":"A single letter can be entered. This is useful for creating multiple-choice questions, but is not used regularly.","title":"Single Character"},{"location":"Authoring/Inputs/#options","text":"","title":"Options"},{"location":"Authoring/Inputs/#input-box-size-box_size","text":"The width of the input box.","title":"Input Box Size ### {#Box_Size}"},{"location":"Authoring/Inputs/#insert-stars-insert_stars","text":"Insert Stars affect the way STACK treats the validation of CAS strings. Some patterns must always be wrong. For example )( must be missing a star, and so this pattern is always included. There are six options. Don't insert stars: This does not insert * characters automatically. If there are any pattern identified the result will be an invalid expression. Insert * s for implied multiplication. If any patterns are identified as needing * s then they will automatically be inserted into the expression quietly. Insert * s assuming single character variable names. In many situations we know that a student will only have single character variable names. Identify variables in the student's answer made up of more than one character then replace these with the product of the letters. Note, the student's formula is interpreted and variables identified, so (\\sin(ax)) will not end up as s*i*n*(a*x) but as sin(a*x) . Note, in interpreting the student's formula we build an internal tree in order to identify variable names and function names. Hence (xe^x) is interpreted as ( (xe)^x ). We then identify the variable name xe and replace this as x*e . Hence, using this option we have xe^x is interpreted as (x*e)^x NOT as x*e^x which you might expect. There are also additional options to insert multiplication signs for spaces. Insert stars for spaces only Insert stars for implied multiplication and for spaces Insert stars assuming single-character variable names and for spaces If a space is taken for multiplication what should we do with (\\sin\\ x)? Currently this is transformed to (\\sin \\times x) and then rejected as invalid as you can't multiply the function name by its argument. Use these latter options with caution: in the long run students are likely to need to use a strict syntax with machines, and letting them use spaces now might be a disservice. It is often very important to have some on-screen representation of multiplication, e.g. as a dot, so the student can see at the validation that xe^x is interpreted as ( (x\\cdot e)^x) if we assume single character variable names, and as ( xe^x) if we just \"Insert * s for implied multiplication\". The absence of the dot here is key.","title":"Insert Stars ### {#Insert_Stars}"},{"location":"Authoring/Inputs/#syntax-hint-syntax_hint","text":"A syntax hint allows the teacher to give the student a pro-forma in the input box. This can include '?' characters. The syntax hint will appear in the answer box whenever this is left blank by the student. For example, rather than having to type matrix([1,2],[3,4]) the teacher may want to provide an answer box which already contains the string matrix([?,?],[?,?]) instead. The student then need only to edit this, to replace ?s with their values. This helps reduce syntax error problems with more difficult syntax issues. The ? may also be used to give partial credit. Of course it could also be used for general expressions such as: x^2+?*x+1","title":"Syntax Hint {#Syntax_Hint}"},{"location":"Authoring/Inputs/#forbidden-words-forbidden_words","text":"This is a comma-separated list of text strings which are forbidden in a student's answer. If one of these strings is present then the student's attempt will be considered invalid, and no penalties will be given. This is an unsophisticated string match. Note, any question variable names used in the question variables are automatically forbidden (otherwise the student could potentially use the variable name you have defined, which might be the correct answer). If you want to allow question variables, you must explicitly use the allowed words field, see below. Note that the string * is literally taken as * and is not a wild card. Teachers may ask a student to calculate 2*3 and hence need to forbid multiplication in an answer. If you wish to forbid commas, then escape it with a backslash. There are groups of common keywords which you can forbid simply as [[BASIC-ALGEBRA]] common algebraic operations such as simplify , factor , expand , solve , etc. [[BASIC-CALCULUS]] common calculus operations such as int , diff , taylor , etc. [[BASIC-MATRIX]] common matrix operations such as transpose , invert , charpoly , etc. If you have suggestions for more lists, or additional operations which should be added to the existing lists, please contact the developers.","title":"Forbidden words ### {#Forbidden_Words}"},{"location":"Authoring/Inputs/#allowed-words-allowed_words","text":"By default, arbitrary function or variable names of more than two characters in length are not permitted. This is a comma-separated list of function or variable names which are permitted in a student's answer. Note the allowed words permit the teacher to override some (but not all) of the strings which are considered to be invalid by default for student input. For example, Sin (capital \"S\") has specific feedback. If you need this in a question you have to allow it here. Similarly In (\"India November\") is mistakenly used by students for the natural logarithm rather than ln (\"Lima November\"). Hence by default this triggers specific feedback. You can allow In here.","title":"Allowed words ### {#Allowed_Words}"},{"location":"Authoring/Inputs/#forbid-floats-forbid_floats","text":"If set to yes , then any answer of the student which has a floating-point number will be rejected as invalid. Students sometimes use floating-point numbers when they should use fractions. This option prevents problems with approximations being used.","title":"Forbid Floats ### {#Forbid_Floats}"},{"location":"Authoring/Inputs/#require-lowest-terms-require_lowest_terms","text":"When this option is set to yes , any coefficients or other rational numbers in an expression, must be written in lowest terms. Otherwise the answer is rejected as \"invalid\". This enables the teacher to reject answers, and not consider them further. Note that at most one number can have a minus sign and two unary minus signs are considered to be something which should be cancelled.","title":"Require lowest terms ### {#Require_lowest_terms}"},{"location":"Authoring/Inputs/#check-students-answers-type-check_type","text":"If this option is set to yes then unless the student's expression is the same Maxima as the teacher's correct answer, then the attempt will be rejected as invalid. Type checking here is very simple, basically checking the student's answer is an equation, inequality, list, set, matrix to match that of the teacher. The intention is not to be completely comprehensive, but to avoid obvious type mismatch. E.g. this is very useful for ensuring the student has typed in an \"equation\", such as (y=mx+c) and not an expression such as (mx+c). Remember, you can't compare an expression with an equation! Another useful way of avoiding this problem is to put a LaTeX string such as (y=) just before the input. E.g. \\(y=\\)[[input:ans1]].","title":"Check Students answer's type ### {#Check_Type}"},{"location":"Authoring/Inputs/#student-must-verify-student_must_verify","text":"Specifies whether the student's input is presented back to them before scoring as part of a two-step validation process. Typically the student's mathematical expression is displayed in traditional form. This is useful for complex algebraic expressions but not needed for constrained input like yes / no . Experience strongly supports the use of this two-step verification process. Errors will always be displayed and expressions with errors rejected as invalid. Potential response trees will not execute with invalid input. The next option controls how the validation feedback is displayed. Note, it is not possible to require a two-step validation but not show some validation feedback.","title":"Student must verify ### {#Student_must_verify}"},{"location":"Authoring/Inputs/#show-validation-show_validation","text":"Feedback to students is in two forms. feedback tied to inputs, in particular if the answer is invalid. feedback tied to each potential response tree. Setting this option displays any feedback from this input, including echoing back their expression in traditional two-dimensional notation. Generally, feedback and verification are used in conjunction. Errors will always be displayed. In addition to simply displaying the student's expression, the teacher can display the list of variables which occurs in the expression. From experience, this is helpful in letting students understand the idea of variable and to spot case insensitivity or wrong variable problems. The \"compact\" version removes most of the styling. This is needed when the answer is part of a table.","title":"Show validation ### {#Show_validation}"},{"location":"Authoring/Inputs/#extra-option-hideanswer","text":"Users are increasingly using inputs to store state , which makes no sense for a user to see. For example, when using JSXGraph users transfer the configuration of the diagram into an input via JavaScript. In many situations, it makes no sense for the student to see anything about this input. The validation can be switched off with the regular \"show validation\" option, the input box itself can be hidden with JavaScript/CSS. Putting hideanswer in the extra options stops displaying the \"teacher's answer\", e.g. at the end of the process. All input types should support this extra option. Do not use this option in questions in place of the normal quiz settings.","title":"Extra option: hideanswer"},{"location":"Authoring/Inputs/#extra-option-allowempty","text":"Normally a blank , i.e. empty, answer has a special status and are not considered \"valid\". Hence, a PRT relying on an input left blank will not be traversed. Answers consisting only of whitespace are also considered as empty. The extra option allowempty allows the input to be empty. Internally an empty answer will be replaced by the Maxima atom EMPTYANSWER . Internally it is essential that the variable name of the input, (e.g. ans1 ) is really assigned a specific value. The teacher will need to deal with EMPTYANSWER tags in the PRT. We strongly recommend (with many years of experience) that teachers do not use this option without very careful thought! For example, if you don't want to give away how many answers you expect, then ask the student to provide a set of answers. Another option is to use the \"TextArea\" input type. Each line of the TextArea is validated separately, and the resulting mathematical expression is a list. The student is therefore free to choose how many expressions to type in, as the circumstances require, without a pre-defined number of input boxes. By design, it is better to use these methods than trying to combine separate inputs, some of which are empty, in the PRT later. Our experience strongly suggests this option should only be used for edge cases, and not for routine use. If you use this option when students navigate away from a page the system will \"validate\" the inputs, and hence any empty boxes will be considered an active empty choice by the student and will be assessed. If you use this option there is no way to distinguish between an active empty answer choice, and a student who deletes their answer. (The same problem occurs with radio buttons....) There are (unfortunately) some edge cases where it is useful to permit the execution of a PRT without all the inputs containing significant content. Assume you have three inputs ans1 , ans2 , ans3 contributing to a PRT, all of which have the allowempty option set because you don't want to tell the student which might be empty. Assume the correct answer has at least one entry non-empty. Then, make the first node of the PRT check ATAlgEquiv({ans1,ans2,ans3},{EMPTYANSWER}) This checks if all inputs are empty, so if true set the score and the penalty to be zero and stop. This prevents the student accruing a penalty if they navigate away with all the boxes empty, but the PRT will still execute an \"attempt\". If a teacher has three inputs ans1 , ans2 , ans3 , then they can define a set in the feedback variables as follows sa:setdifference({ans1,ans2,ans3},{EMPTYANSWER}) The variable sa will be a set containing the non-empty answers (if any). The teacher can use the EMPTYANSWER tag as a \"correct answer\".","title":"Extra option: allowempty"},{"location":"Authoring/Inputs/#extra-option-simp","text":"Actually simplify the student's answer during the validation process. This will allow students to type in something like makelist(k^2,k,1,8) If teacher's want this kind of thing, then a syntax hint is probably in order as well. You may need to ev(ans1,simp) explicitly in any potential response tree. It makes no sense to simplify the equivalence reasoning input type, so this has been omitted.","title":"Extra option: simp"},{"location":"Authoring/Inputs/#extra-option-align","text":"Controls if the student's answer is aligned 'left' or 'right' within the input box.","title":"Extra option: align"},{"location":"Authoring/Inputs/#extra-option-nounits","text":"As of STACK 4.3, if units are declared in a question then the whole question will use a units context for parsing inputs. For example, in a multi-part question you may use a matrix input. If you do so, and use variable names, then these will be parsed expecting them to be usits. To prevent this in a particular input, use the nounits option","title":"Extra option: nounits"},{"location":"Authoring/Inputs/#extra-option-consolidatesubscripts","text":"As of STACK 4.3.10, there is an option to \"consolidate subscripts\". There is a subtle (and perhaps confusing) difference between atoms in Maxima. The strings a1 and a_1 are both atoms in Maxima, and are different. Hence, the atoms a1 and a_1 are not considered to be algebraically equivalent. To avoid penalising students on a technicality, if you include the extra option consolidatesubscripts or consolidatesubscripts:true then students' input will be converted to the form without the underscore. In students' input M_1 is converted to M1 . Teachers are expected to use the correct pattern M1 in the correct answer and in PRTs. We only filter a very limited pattern, namely ^[a-zA-Z]+_[0-9]+$ which is an atom starting with one or more letters, then an underscore _ then one or more digits. This is the only pattern currently replaced. Specifically double subscripts or non-numeric subscripts are ignored. (If you have genuine use for more patterns please contact the developers with examples!) More information on subscripts is given in the atoms and subscripts section of the more general Maxima documentation.","title":"Extra option: consolidatesubscripts"},{"location":"Authoring/Inputs/#extra-option-checkvars","text":"As of STACK 4.4.0, there is an option to check, or allow comparison between, variables which occur in the student's answer and the teacher's answer. This option takes the form of checkvars:n , where n is an integer. Ommiting this option is equivalent to setting n=0 . The binary bits are used to set this options. If the 1st binary bit of n is 1 (i.e. n is odd) then we flag up spurious variables. If the 2nd binary bit of n is 1 then we flag up missing variables. So, to check both set checkvars:3 . The numerical argument provides potential for future-proofing features (e.g. case sensitivity).","title":"Extra option: checkvars"},{"location":"Authoring/Inputs/#extra-option-validator","text":"This allows an input to add additional bespoke validation, based on a function defined by the question author. For example, you can define a function which checks if the student's answer is a list of exactly three floating point numbers . See the validator documetation for more details. Writing bespoke validators is an advanced feature, but offers two significant benefits. Students are less likely to be penalised on a technicality, especially in high-stakes situations; Potential response tree authoring becomes much easier and more reliable because the validation acts as a \"guard clause\" only allowing correctly structured information through to the PRT. This means type-checking need not be done in the PRT before assessment.","title":"Extra option: validator"},{"location":"Authoring/Inputs/#extra-options","text":"In the future we are likely to add additional functionality via the extra options fields. This is because the form-based support becomes ever more complex, intimidating and difficult to navigate.","title":"Extra options"},{"location":"Authoring/Inputs/#input-tips-and-tricks","text":"It is often sensible to use a prefix just in front of the form box. For example \\(f(x)=\\) [[input:ans1]]. This avoids all kinds of problems with students also trying to enter the prefix themselves. You could also specify units afterwards, but you might also want the student to type these in! In Maxima the input (a,b,c) is a programmatic block element (see Maxima's manual for block ). Hence we cannot use this directly for the input of coordinates. Instead, have the students type in an unnamed function like P(x,y) This technique can be used to enter a set of points {A(1,2), B(2,3)} as an answer. The op command can be used to filter out a particular point, and the args command becomes a list of coordinates.","title":"Input tips and tricks"},{"location":"Authoring/Inputs/#options-summary-table","text":"This table lists all options, and which inputs use/respect them. The . means the option is ignored. Options Alg Num Units Matrix Check Radio Drop T/F TextArea Equiv String Notes Box size Y Y Y Y . . . . Y Y Y Y Strict Syn Y (1) (1) Y . . . . Y Y . . Insert stars Y Y Y Y . . . . Y Y . . Syntax hint Y Y Y Y . . . . Y Y Y Y Hint att Y Y Y Y . . . . Y Y Y Y Forbidden words Y Y Y Y . . . . Y Y . . Allowed words Y Y Y Y . . . . Y Y . . Forbid float Y Y Y Y . . . . Y Y . . Lowest terms Y Y Y Y . . . . Y Y . . Check type Y Y Y Y . . . . . . . . Must verify Y Y Y Y Y Y Y Y Y Y Y . Show validation Y Y Y Y Y Y Y Y Y Y Y . Extra options: rationalize Y Y . . . . . . . . . . min/max sf/dp . Y Y . . . . . . . . . floatnum . Y . . . . . . . . . . intnum . Y . . . . . . . . . . rationalnum . Y . . . . . . . . . . consolidatesubscripts Y . Y Y . . . . . . . . negpow . . Y . . . . . . . . . simp Y Y Y Y . . . . Y . . . align Y Y Y . . . . . . . . . nounits Y Y Y Y Y Y Y . . Y . . checkvars Y . . Y . . . . . Y . . validator Y Y Y Y . . . . . . Y . For documentation about the various options not documented on this page look at the pages for the specific inputs in which each option is used. Notes: The numerical and units input type ignore the strict syntax option and always assume strict syntax is \"true\". Otherwise patterns for scientific numbers such as 2.23e4 will have multiplication characters inserted.","title":"Options summary table"},{"location":"Authoring/Inputs/#other-input-types","text":"Adding new inputs, or options for existing inputs, is a job for the developers. The only essential requirement is that the result is a valid CAS expression, which includes of course a string data type, or a list.","title":"Other input types"},{"location":"Authoring/JSXGraph/","text":"JSXGraph This page documents use of JSXGraph to display visuals. This is a somewhat advanced topic. For basic plots and visuals you may prefer to use Maxima to plot graphs . STACK supports inclusion of dynamic graphs using JSXGraph: http://jsxgraph.uni-bayreuth.de/wiki/ . Note, we strongly recommend you do not use an HTML-aware editor when using JSXGraph questions. Instead turn off the editor within Moodle and edit the raw HTML. Site administration > Plugins > Text editors > Manage editors Individual users can also set their editor preferences: User Dashboard > Preferences > Editor preferences > Manage editors Include basic plots This example is based on the documentation for curve and the even simpler function plotter example. To include a basic dynamically-generated sketch into a STACK question, first define the expression of the graph to be plotted in the question variables. For example a:rand(6)-3; fx:sin(x)+a; Then include the following question text, which includes a simple [[jsxgraph]] block . In particular note the lack of <script> tags which you might expect to include. <p>Type in an algebraic expression which has the graph shown below.</p> [[jsxgraph]] // boundingbox:[left, top, right, bottom] var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-10, 5, 10, -5], axis: true, showCopyright: false}); var f = board.jc.snippet('{#fx#}', true, 'x', true); board.create('functiongraph', [f,-10,10]); [[/jsxgraph]] <p>\\(f(x)=\\) [[input:ans1]] [[validation:ans1]]</p> Note the code board.jc.snippet('{#fx#}', true, 'x', true); which turns a reasonable expression for a function into the JavaScript function. You cannot just plot the functiongraph on its own. To make a working question, you will then need to add in fx as the model answer to input ans1 , a question note (e.g. \\({@fx@}\\) ) and an appropriate potential response tree. Block options You can control the size of the JSXGraph board with the width and height options. E.g. [[jsxgraph width=\"200px\" height=\"200px\"]] The option aspect-ratio combinet with the ability to use relative dimensions allows for graphs to resize and maintain its shape if the viewport changes. When using aspect-ratio it is necessary to define one and only one of the above lengths. [[jsxgraph width=\"80%\" aspect-ratio=\"3/2\"]] If no size is defined the default is to have width=\"500px\" height=\"400px\" and these are also the dimensions used if values are missing and no aspect-ratio has been defined. Automatic identifier for the div-element As initialisation of the JSXGraph board requires you to give it a reference to the div-element that will contain the graph you will need to know what that id is. With the JSXGraph-block that identifier is present in a variable named divid . Since, 4.3.3 we also provide that same identifier in a variable named BOARDID to match the behaviour of the JSXGraph Moodle filter. We generate that identifier automatically to allow one to have multiple plots even multiple copies of the same question on the same page without anyone having to worry about accidental identifier clashing. Interactive elements In this example define the question variables as fx:int(expand((x-1)*(x+1)*(x-2)),x); This question contains an interactive sliding element. <p>A graph, together with the tangent line and its slope, are shown below. Find an algebraic expression for the graph shown below.</p> [[jsxgraph]] // boundingbox:[left, top, right, bottom] var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-5, 10, 5, -10], axis: true, showCopyright: false}); var f = board.jc.snippet('{#fx#}', true, 'x', true); var curve = board.create('functiongraph', [f,-10,10], {strokeWidth:2}); var dcurve = board.create('functiongraph', [JXG.Math.Numerics.D(f),-10,10], {strokeColor:'#ff0000', strokeWidth:1, dash:2}); var p = board.create('glider',[1,0,curve], {name:'Drag me'}); board.create('tangent',[p], {name:'Drag me'}); var q = board.create('point', [function(){return p.X();}, function(){return JXG.Math.Numerics.D(f)(p.X());} ], {withLabel:false}); board.unsuspendUpdate(); [[/jsxgraph]] <p>\\(f(x)=\\) [[input:ans1]] [[validation:ans1]]</p> In this example the student can interact with a dynamic diagram to help them understand what is going on. An example with a slider In this example we provide a simple slider. Notice in this example we use the JavaScript notation a**x for (a^x) and not Maxima's a^x . [[jsxgraph]] // boundingbox:[left, top, right, bottom] var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-5, 10, 5, -10], axis: true, showCopyright: false}); var a = board.create('slider',[[-3,6],[2,6],[0,2,6]],{name:'a'}); var curve = board.create('functiongraph', [function(x) {return a.Value()**x}], {strokeWidth:2}); board.unsuspendUpdate(); [[/jsxgraph]] General considerations when building interactive graphs In general you should pay attention on how your graph reacts to the student returning to the page/question later. For example, will your graph reset to display the original situation or will it at least move all movable things to the positions the student last left them? If the student can do things that are not actually considered as part of the answer, e.g. zoom out or pan the view, do you also remember those actions? If your graph is not used for inputting answers then this is not a major issue but if it is then you will need to solve this issue. Basically, storing the state of the interactive graph is a key thing that the author of that graph needs to deal with. The basic structure of such graph logic is as follows: Load existing state or if not found initialise with defaults. Draw the graph based on that state. Attach listeners to everything that can be changed in the graph and store those changes into the state in those listeners. The simplest solution for storing state is to add a string type input field to the question. Create and hide an input with CSS, e.g. <p style=\"display:none\">[[input:stateStore]] [[validation:stateStore]]</p> (but probably not while you develop the question!) Make the input a \"string\" type. Turn off the validation and verification of the field. Use the extra option hideanswer to make sure the teacher's answer is not shown to students. That input field should not be connected to any PRTs. You can use the syntax hint feature to pass in a default value but only if that is not parametric (currently the syntax hint is not CASText: see the todo list). You can use that input field to store the state of the graph as a string, for example as a JSON-encoded structure. For example, assuming the name of the String input is named stateStore , we can store the position of a point as follows: [[jsxgraph input-ref-stateStore=\"stateRef\"]] // Note that the input-ref-X attribute above will store the element identifier of the input X in // a variable named in the attribute, you can have multiple references to multiple inputs. // Create a normal board. var board = JXG.JSXGraph.initBoard(divid, {axis: true, showCopyright: false}); // State represented as a JS-object, first define default then try loading the stored values. var state = {'x':4, 'y':3}; var stateInput = document.getElementById(stateRef); if (stateInput.value && stateInput.value != '') { state = JSON.parse(stateInput.value); } // Then make the graph represent the state var p = board.create('point',[state['x'],state['y']]); // And finally the most important thing, update the stored state when things change. p.on('drag', function() { var newState = {'x':p.X(), 'y':p.Y()}; // Encode the state as JSON for storage and store it stateInput.value = JSON.stringify(newState); // Since the STACK-JS system one needs to also remember to tell others // about the changed value. Do this by dispatching an event. stateInput.dispatchEvent(new Event('change')); }); // As a side note, you typically do not want the state storing input to be directly visible to the user // although it may be handy during development to see what happens in it. You might hide it like this: stateInput.style.display = 'none'; [[/jsxgraph]] Note, in the above example in [[jsxgraph input-ref-stateStore=\"stateRef\"]] the stateStore part of this tag directly relates to, and must match, the name of the input. In that trivial example you only have one point that you can drag around but the position of that point will be stored and it will be where you left it when you return to the page. However, the position has been stored in a String encoded in JSON format and cannot directly be used in STACK-side logic. The JSON format is however very handy if you create objects to store dynamically and want to represent things of more complex nature, but in this example we could have just as well have had two separate Numeric inputs storing just the raw 'x' and 'y' coordinates separately as raw numbers and in that case we could have used them directly in STACK's grading logic. If needed, JSON is not impossible to parse in STACK, but it is not easy (as in JavaScript) because Maxima has no map data-structures and is not object oriented. In any case, the JSON string generated in the previous example would look like this: stateStore:\"{\\\"x\\\":4,\\\"y\\\":3}\"; To parse and manipulate it you can use STACK's custom JSON parsing functions: tmp:stackjson_parse(stateStore); /* This returns a STACK-map: [\"stack_map\", [\"x\", 4], [\"y\", 3]] */ x:stackmap_get(tmp,\"x\"); /* 4 */ y:stackmap_get(tmp,\"y\"); /* 3 */ tmp:stackmap_set(tmp,\"z\",x*y); /* [\"stack_map\", [\"x\", 4], [\"y\", 3], [\"z\", 12]] */ json:stackjson_stringify(tmp); /* \"{\\\"x\\\":4,\\\"y\\\":3,\\\"z\\\":12}\" */ Convenience tools for building graphs The previous section covered the general case of storing the state of the graph and acting on it. Typically, you only need to handle a few points and maybe some sliders and for this task we provide ready-made functions that bind those primitive objects to STACK input fields. As these binding functions only deal with singular sliders and points they will also use simpler forms of passing around the values. The example in the previous section about moving the point around and storing the points position as an JSON object can be redone with the convenience functions in much simpler form. The only major differences being that the value is stored as a raw list of float values, and the input field should not be of the String type instead we can store it as Algebraic input and directly access the values, just make sure you allow float values in that input. [[jsxgraph input-ref-stateStore=\"stateRef\"]] // Create a board like normal. var board = JXG.JSXGraph.initBoard(divid, {axis: true, showCopyright: false}); // Create a point, its initial position will be the default position if no state is present. var p = board.create('point', [4, 3]); // Bind it to the input and state stored in it. stack_jxg.bind_point(stateRef, p); // As a side note, you typically do not want the state storing input to be directly visible to the user // although it may be handy during development to see what happens in it. You might hide it like this: var stateInput = document.getElementById(stateRef); stateInput.style.display = 'none'; [[/jsxgraph]] For sliders you use the function stack_jxg.bind_slider(inputRef, slider) and it stores the sliders value as a raw float. Sliders will however require that you call board.update() after binding to them, otherwise the graph may not display the stored state after reload. You should check the sample questions about JSXGraph binding for examples of these functions in action. Starting from version 4.3 there are three functions for dealing with pairs of points. Basically, if you want to represent vectors, lines or circles or anything that can be defined with just two points. stack_jxg.bind_point_dual(inputRef, point1, point2) will store the positions of the points into a single input as a list of lists, stack_jxg.bind_point_relative(inputRef, point1, point2) will also generate a list but in it the second point is represented relative to the first, and finally stack_jxg.bind_point_direction(inputRef, point1, point2) will provide the first point as coordinates and the second point as an angle and distance from the first. Starting from 4.4 there is only one new bind function stack_jxg.bind_list_of(inputRef, list) which takes a list of points and/or sliders and stores it into a single input. It only works if he size or order of the list does not change during page loads, however the list can change its shape for variants of the question. The primary use target for this are the vertices of polygons, but one can probably come up with something else as well, it does work as a quick and dirty way of storing the whole graph state if the graph can be defined just by points and sliders. There are also two new functions realted to dealing with groups of objects and matching inputs. For situations where the answer consists of multiple elements and it is possible that not all get moved one can use stack_jxg.define_group(list) which takes a list of points and/or sliders and makes it so that touching any one of them will trigger them all to be considered as touched and thus generates inputs. There is also stack_jxg.starts_moved(object) which takes a point or a slider and marks it as touched from the start, this may be of use if the graph is an optional part and the actual grading depends of other parts or if one wants to use PRT feedback as a way for describing the status of the graph and needs the objects to be transferred onto the CAS side without interaction from the student. Convenience tools for generating lists of values. If you want to output a list of values without Maxima's normal bracket symbols you can use stack_disp_comma_separate([a,b,sin(pi)]); This function turns a list into a string representation of its arguments, without braces. Internally, it applies string to the list of values (not TeX!). However, you might still get things like %pi in the output. You can use this with mathematical input: {@stack_disp_comma_separate([a,b,sin(pi)])@} and you will get the result a, b, sin(%pi/7) (without the string quotes) because when a Maxima variable is a string we strip off the outside quotes and don't typeset this in maths mode. Discrete mathematics and graph theory. A graph can be displayed with JSXGraph, see discrete mathematics for examples.","title":"JSXGraph"},{"location":"Authoring/JSXGraph/#jsxgraph","text":"This page documents use of JSXGraph to display visuals. This is a somewhat advanced topic. For basic plots and visuals you may prefer to use Maxima to plot graphs . STACK supports inclusion of dynamic graphs using JSXGraph: http://jsxgraph.uni-bayreuth.de/wiki/ . Note, we strongly recommend you do not use an HTML-aware editor when using JSXGraph questions. Instead turn off the editor within Moodle and edit the raw HTML. Site administration > Plugins > Text editors > Manage editors Individual users can also set their editor preferences: User Dashboard > Preferences > Editor preferences > Manage editors","title":"JSXGraph"},{"location":"Authoring/JSXGraph/#include-basic-plots","text":"This example is based on the documentation for curve and the even simpler function plotter example. To include a basic dynamically-generated sketch into a STACK question, first define the expression of the graph to be plotted in the question variables. For example a:rand(6)-3; fx:sin(x)+a; Then include the following question text, which includes a simple [[jsxgraph]] block . In particular note the lack of <script> tags which you might expect to include. <p>Type in an algebraic expression which has the graph shown below.</p> [[jsxgraph]] // boundingbox:[left, top, right, bottom] var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-10, 5, 10, -5], axis: true, showCopyright: false}); var f = board.jc.snippet('{#fx#}', true, 'x', true); board.create('functiongraph', [f,-10,10]); [[/jsxgraph]] <p>\\(f(x)=\\) [[input:ans1]] [[validation:ans1]]</p> Note the code board.jc.snippet('{#fx#}', true, 'x', true); which turns a reasonable expression for a function into the JavaScript function. You cannot just plot the functiongraph on its own. To make a working question, you will then need to add in fx as the model answer to input ans1 , a question note (e.g. \\({@fx@}\\) ) and an appropriate potential response tree.","title":"Include basic plots"},{"location":"Authoring/JSXGraph/#block-options","text":"You can control the size of the JSXGraph board with the width and height options. E.g. [[jsxgraph width=\"200px\" height=\"200px\"]] The option aspect-ratio combinet with the ability to use relative dimensions allows for graphs to resize and maintain its shape if the viewport changes. When using aspect-ratio it is necessary to define one and only one of the above lengths. [[jsxgraph width=\"80%\" aspect-ratio=\"3/2\"]] If no size is defined the default is to have width=\"500px\" height=\"400px\" and these are also the dimensions used if values are missing and no aspect-ratio has been defined.","title":"Block options"},{"location":"Authoring/JSXGraph/#automatic-identifier-for-the-div-element","text":"As initialisation of the JSXGraph board requires you to give it a reference to the div-element that will contain the graph you will need to know what that id is. With the JSXGraph-block that identifier is present in a variable named divid . Since, 4.3.3 we also provide that same identifier in a variable named BOARDID to match the behaviour of the JSXGraph Moodle filter. We generate that identifier automatically to allow one to have multiple plots even multiple copies of the same question on the same page without anyone having to worry about accidental identifier clashing.","title":"Automatic identifier for the div-element"},{"location":"Authoring/JSXGraph/#interactive-elements","text":"In this example define the question variables as fx:int(expand((x-1)*(x+1)*(x-2)),x); This question contains an interactive sliding element. <p>A graph, together with the tangent line and its slope, are shown below. Find an algebraic expression for the graph shown below.</p> [[jsxgraph]] // boundingbox:[left, top, right, bottom] var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-5, 10, 5, -10], axis: true, showCopyright: false}); var f = board.jc.snippet('{#fx#}', true, 'x', true); var curve = board.create('functiongraph', [f,-10,10], {strokeWidth:2}); var dcurve = board.create('functiongraph', [JXG.Math.Numerics.D(f),-10,10], {strokeColor:'#ff0000', strokeWidth:1, dash:2}); var p = board.create('glider',[1,0,curve], {name:'Drag me'}); board.create('tangent',[p], {name:'Drag me'}); var q = board.create('point', [function(){return p.X();}, function(){return JXG.Math.Numerics.D(f)(p.X());} ], {withLabel:false}); board.unsuspendUpdate(); [[/jsxgraph]] <p>\\(f(x)=\\) [[input:ans1]] [[validation:ans1]]</p> In this example the student can interact with a dynamic diagram to help them understand what is going on.","title":"Interactive elements"},{"location":"Authoring/JSXGraph/#an-example-with-a-slider","text":"In this example we provide a simple slider. Notice in this example we use the JavaScript notation a**x for (a^x) and not Maxima's a^x . [[jsxgraph]] // boundingbox:[left, top, right, bottom] var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-5, 10, 5, -10], axis: true, showCopyright: false}); var a = board.create('slider',[[-3,6],[2,6],[0,2,6]],{name:'a'}); var curve = board.create('functiongraph', [function(x) {return a.Value()**x}], {strokeWidth:2}); board.unsuspendUpdate(); [[/jsxgraph]]","title":"An example with a slider"},{"location":"Authoring/JSXGraph/#general-considerations-when-building-interactive-graphs","text":"In general you should pay attention on how your graph reacts to the student returning to the page/question later. For example, will your graph reset to display the original situation or will it at least move all movable things to the positions the student last left them? If the student can do things that are not actually considered as part of the answer, e.g. zoom out or pan the view, do you also remember those actions? If your graph is not used for inputting answers then this is not a major issue but if it is then you will need to solve this issue. Basically, storing the state of the interactive graph is a key thing that the author of that graph needs to deal with. The basic structure of such graph logic is as follows: Load existing state or if not found initialise with defaults. Draw the graph based on that state. Attach listeners to everything that can be changed in the graph and store those changes into the state in those listeners. The simplest solution for storing state is to add a string type input field to the question. Create and hide an input with CSS, e.g. <p style=\"display:none\">[[input:stateStore]] [[validation:stateStore]]</p> (but probably not while you develop the question!) Make the input a \"string\" type. Turn off the validation and verification of the field. Use the extra option hideanswer to make sure the teacher's answer is not shown to students. That input field should not be connected to any PRTs. You can use the syntax hint feature to pass in a default value but only if that is not parametric (currently the syntax hint is not CASText: see the todo list). You can use that input field to store the state of the graph as a string, for example as a JSON-encoded structure. For example, assuming the name of the String input is named stateStore , we can store the position of a point as follows: [[jsxgraph input-ref-stateStore=\"stateRef\"]] // Note that the input-ref-X attribute above will store the element identifier of the input X in // a variable named in the attribute, you can have multiple references to multiple inputs. // Create a normal board. var board = JXG.JSXGraph.initBoard(divid, {axis: true, showCopyright: false}); // State represented as a JS-object, first define default then try loading the stored values. var state = {'x':4, 'y':3}; var stateInput = document.getElementById(stateRef); if (stateInput.value && stateInput.value != '') { state = JSON.parse(stateInput.value); } // Then make the graph represent the state var p = board.create('point',[state['x'],state['y']]); // And finally the most important thing, update the stored state when things change. p.on('drag', function() { var newState = {'x':p.X(), 'y':p.Y()}; // Encode the state as JSON for storage and store it stateInput.value = JSON.stringify(newState); // Since the STACK-JS system one needs to also remember to tell others // about the changed value. Do this by dispatching an event. stateInput.dispatchEvent(new Event('change')); }); // As a side note, you typically do not want the state storing input to be directly visible to the user // although it may be handy during development to see what happens in it. You might hide it like this: stateInput.style.display = 'none'; [[/jsxgraph]] Note, in the above example in [[jsxgraph input-ref-stateStore=\"stateRef\"]] the stateStore part of this tag directly relates to, and must match, the name of the input. In that trivial example you only have one point that you can drag around but the position of that point will be stored and it will be where you left it when you return to the page. However, the position has been stored in a String encoded in JSON format and cannot directly be used in STACK-side logic. The JSON format is however very handy if you create objects to store dynamically and want to represent things of more complex nature, but in this example we could have just as well have had two separate Numeric inputs storing just the raw 'x' and 'y' coordinates separately as raw numbers and in that case we could have used them directly in STACK's grading logic. If needed, JSON is not impossible to parse in STACK, but it is not easy (as in JavaScript) because Maxima has no map data-structures and is not object oriented. In any case, the JSON string generated in the previous example would look like this: stateStore:\"{\\\"x\\\":4,\\\"y\\\":3}\"; To parse and manipulate it you can use STACK's custom JSON parsing functions: tmp:stackjson_parse(stateStore); /* This returns a STACK-map: [\"stack_map\", [\"x\", 4], [\"y\", 3]] */ x:stackmap_get(tmp,\"x\"); /* 4 */ y:stackmap_get(tmp,\"y\"); /* 3 */ tmp:stackmap_set(tmp,\"z\",x*y); /* [\"stack_map\", [\"x\", 4], [\"y\", 3], [\"z\", 12]] */ json:stackjson_stringify(tmp); /* \"{\\\"x\\\":4,\\\"y\\\":3,\\\"z\\\":12}\" */","title":"General considerations when building interactive graphs"},{"location":"Authoring/JSXGraph/#convenience-tools-for-building-graphs","text":"The previous section covered the general case of storing the state of the graph and acting on it. Typically, you only need to handle a few points and maybe some sliders and for this task we provide ready-made functions that bind those primitive objects to STACK input fields. As these binding functions only deal with singular sliders and points they will also use simpler forms of passing around the values. The example in the previous section about moving the point around and storing the points position as an JSON object can be redone with the convenience functions in much simpler form. The only major differences being that the value is stored as a raw list of float values, and the input field should not be of the String type instead we can store it as Algebraic input and directly access the values, just make sure you allow float values in that input. [[jsxgraph input-ref-stateStore=\"stateRef\"]] // Create a board like normal. var board = JXG.JSXGraph.initBoard(divid, {axis: true, showCopyright: false}); // Create a point, its initial position will be the default position if no state is present. var p = board.create('point', [4, 3]); // Bind it to the input and state stored in it. stack_jxg.bind_point(stateRef, p); // As a side note, you typically do not want the state storing input to be directly visible to the user // although it may be handy during development to see what happens in it. You might hide it like this: var stateInput = document.getElementById(stateRef); stateInput.style.display = 'none'; [[/jsxgraph]] For sliders you use the function stack_jxg.bind_slider(inputRef, slider) and it stores the sliders value as a raw float. Sliders will however require that you call board.update() after binding to them, otherwise the graph may not display the stored state after reload. You should check the sample questions about JSXGraph binding for examples of these functions in action. Starting from version 4.3 there are three functions for dealing with pairs of points. Basically, if you want to represent vectors, lines or circles or anything that can be defined with just two points. stack_jxg.bind_point_dual(inputRef, point1, point2) will store the positions of the points into a single input as a list of lists, stack_jxg.bind_point_relative(inputRef, point1, point2) will also generate a list but in it the second point is represented relative to the first, and finally stack_jxg.bind_point_direction(inputRef, point1, point2) will provide the first point as coordinates and the second point as an angle and distance from the first. Starting from 4.4 there is only one new bind function stack_jxg.bind_list_of(inputRef, list) which takes a list of points and/or sliders and stores it into a single input. It only works if he size or order of the list does not change during page loads, however the list can change its shape for variants of the question. The primary use target for this are the vertices of polygons, but one can probably come up with something else as well, it does work as a quick and dirty way of storing the whole graph state if the graph can be defined just by points and sliders. There are also two new functions realted to dealing with groups of objects and matching inputs. For situations where the answer consists of multiple elements and it is possible that not all get moved one can use stack_jxg.define_group(list) which takes a list of points and/or sliders and makes it so that touching any one of them will trigger them all to be considered as touched and thus generates inputs. There is also stack_jxg.starts_moved(object) which takes a point or a slider and marks it as touched from the start, this may be of use if the graph is an optional part and the actual grading depends of other parts or if one wants to use PRT feedback as a way for describing the status of the graph and needs the objects to be transferred onto the CAS side without interaction from the student.","title":"Convenience tools for building graphs"},{"location":"Authoring/JSXGraph/#convenience-tools-for-generating-lists-of-values","text":"If you want to output a list of values without Maxima's normal bracket symbols you can use stack_disp_comma_separate([a,b,sin(pi)]); This function turns a list into a string representation of its arguments, without braces. Internally, it applies string to the list of values (not TeX!). However, you might still get things like %pi in the output. You can use this with mathematical input: {@stack_disp_comma_separate([a,b,sin(pi)])@} and you will get the result a, b, sin(%pi/7) (without the string quotes) because when a Maxima variable is a string we strip off the outside quotes and don't typeset this in maths mode.","title":"Convenience tools for generating lists of values."},{"location":"Authoring/JSXGraph/#discrete-mathematics-and-graph-theory","text":"A graph can be displayed with JSXGraph, see discrete mathematics for examples.","title":"Discrete mathematics and graph theory."},{"location":"Authoring/Languages/","text":"Producing multilingual content There are many ways for, the multilang-filter that comes with Moodle is often preferred as it is available. But people do seem to prefer multilang2 when dealign with richer content that needs to work with scripting and other syntax. As dealing with the localisation can also affect the way STACK does some special things we have added yet another way as a built-in alternative for those cases where the language needs to be passed into places that traditional Moodle-filters do not see. Using the built-in castext block in STACK In STACK 4.4 we made it simpler to mix languages in the CAS logic, for example MCQ-labels. The logic includes a special language-code other which will be used if no matching language can be found. We also support defining multiple language codes as comma separated lists. The order of languages is defined by the order they appear in the question-text. The block is used like this: [[lang code='fi']]...Teksti suomeksi...[[/lang]] [[lang code=\"en,other\"]]...Text in English...[[/lang]] It is also usable in inline CASText2: lbls: [castext(\"[[lang code='en']]Like this {@...@}[[/lang]]...\"),...]; Nested language blocks will not get displayed unless they have matching codes, so you may not use en wrapper and en_gb , en_us within it to fine tune things. Only one code will match in the whole question so if the VLE uses en_us and it is found in the question at any place then that is the only code that matches. If you are dealing with localisation in JSXGraph or MCQ-label style situations you might want to use the new lang -blocks, but do note that while they do not require any additional filters to be installed they still require that the system has language-packs and the users have the ability to select the language. Translating text in pictures The STACK built-in castext block will translate tags embedded into inline SVG images in documents. Here is a very basic SVG example with language blocks embedded. <svg height=\"210\" width=\"500\"> <title>[[lang code='en,other']]Circles and triangles[[/lang]][[lang code='no']]Sirkler og trekanter[[/lang]]</title> <polygon points=\"200,10 350,90 160,210\" style=\"fill:white;stroke:black;stroke-width:2\" /> <circle cx=\"239\" cy=\"94\" r=\"55\" stroke=\"red\" stroke-width=\"1\" fill=\"white\" /> <text x=\"200\" y=\"80\" fill=\"red\">[[lang code='en,other']]Circumference[[/lang]][[lang code='no']]Omkrets[[/lang]]</text> </svg> Remember to add alternative text as the title or description for the inline SVG using the <title> and <desc> tags. The title or description can also be translated. Using the Moodle filter multilang STACK questions can be easily localized for different languages using the multi-language content filter. http://docs.moodle.org/en/Multi-language_content_filter . That is to say, a single question can exist in multiple languages and the user can choose the language they use. This page deals with translating text within individual questions. It does not deal with translating the Moodle and STACK interface. See the page on Language packs and translating STACK . Installation of the Moodle multilang filter Your site administrator must enable the Moodle multi-language content filter . The multi-language content filter must be applied before the MathJax filter, otherwise strange results will occur. Authoring questions The filter works by searching the document for all multilang blocks and displaying the block that matches the selected language. <span lang=\"en\" class=\"multilang\">...Text in English...</span> <span lang=\"fi\" class=\"multilang\">...Text in Finnish...</span> If no block matching the user's language can be found, the block encountered first is displayed. In the above example the English block would be displayed if the user's language was not either English or Finnish. The English block should be the first block in the documents in order for it to be the default language in case no matching language can be found. When translating STACK assignments into different languages, it should be noted that the question text field may not contain multiple instances of input or validation fields of the same name. This means that the input and validations fields must be placed outside multilang blocks in order for them to be visible in all the available languages. The following example will illustrate this. STACK would not accept the following question text: <span lang=\"en\" class=\"multilang\"> <p> Let \\( {\\bf a} = ({@a@}, {@b@}) \\). Find a vector \\({\\bf b}\\neq {\\bf 0}\\) such that it is perpendicular to \\(\\mathbf{a}\\) </p> <p> \\({\\bf b} = \\Big(\\)[[input:ans1]]\\(,\\) [[input:ans2]]\\(\\Big)\\) </p> <div> [[validation:ans1]] </div> <div> [[validation:ans2]] </div> </span> <span lang=\"fi\" class=\"multilang\"> <p> Olkoon vektori \\( {\\bf a} = ({@a@}, {@b@}) \\). Anna vektori \\({\\bf b}\\neq {\\bf 0}\\) siten, ett\u00e4 vektorit ovat kohtisuorassa toisiaan vastaan. </p> <p> \\({\\bf b} = \\Big(\\)[[input:ans1]]\\(,\\) [[input:ans2]]\\(\\Big)\\) </p> <div> [[validation:ans1]] </div> <div> [[validation:ans2]] </div> </span> But this question text causes no issues: <span lang=\"en\" class=\"multilang\"> <p> Let \\( {\\bf a} = ({@a@}, {@b@}) \\). Find a vector \\({\\bf b}\\neq {\\bf 0}\\) such that it is perpendicular to \\(\\mathbf{a}\\) </p> </span> <span lang=\"fi\" class=\"multilang\"> <p> Olkoon vektori \\( {\\bf a} = ({@a@}, {@b@}) \\). Anna vektori \\({\\bf b}\\neq {\\bf 0}\\) siten, ett\u00e4 vektorit ovat kohtisuorassa toisiaan vastaan. </p> </span> <p> \\({\\bf b} = \\Big(\\)[[input:ans1]]\\(,\\) [[input:ans2]]\\(\\Big)\\) </p> <div>[[validation:ans1]]</div> <div>[[validation:ans2]]</div> Changing STACK's language If you have written a multilingual question, and a student wants to see it in a certain language, they have to change their preferred language. In Moodle, this is done by clicking on their profile, and then going to Preferences , Preferred language and selecting the language. This will not only change the language of all question text (where multilingual blocks have been used), but also the language of the default Moodle and STACK interface (if this translation is available). The specific language pack has to be installed on your server by the server administrator to allow this. More information is available in the developer docs under Translating STACK . Further reading The STACK project has been translated to many languages. Information on specific languages, installing language packs and how to contribute to translations can be found here .","title":"Producing multilingual content"},{"location":"Authoring/Languages/#producing-multilingual-content","text":"There are many ways for, the multilang-filter that comes with Moodle is often preferred as it is available. But people do seem to prefer multilang2 when dealign with richer content that needs to work with scripting and other syntax. As dealing with the localisation can also affect the way STACK does some special things we have added yet another way as a built-in alternative for those cases where the language needs to be passed into places that traditional Moodle-filters do not see.","title":"Producing multilingual content"},{"location":"Authoring/Languages/#using-the-built-in-castext-block-in-stack","text":"In STACK 4.4 we made it simpler to mix languages in the CAS logic, for example MCQ-labels. The logic includes a special language-code other which will be used if no matching language can be found. We also support defining multiple language codes as comma separated lists. The order of languages is defined by the order they appear in the question-text. The block is used like this: [[lang code='fi']]...Teksti suomeksi...[[/lang]] [[lang code=\"en,other\"]]...Text in English...[[/lang]] It is also usable in inline CASText2: lbls: [castext(\"[[lang code='en']]Like this {@...@}[[/lang]]...\"),...]; Nested language blocks will not get displayed unless they have matching codes, so you may not use en wrapper and en_gb , en_us within it to fine tune things. Only one code will match in the whole question so if the VLE uses en_us and it is found in the question at any place then that is the only code that matches. If you are dealing with localisation in JSXGraph or MCQ-label style situations you might want to use the new lang -blocks, but do note that while they do not require any additional filters to be installed they still require that the system has language-packs and the users have the ability to select the language.","title":"Using the built-in castext block in STACK"},{"location":"Authoring/Languages/#translating-text-in-pictures","text":"The STACK built-in castext block will translate tags embedded into inline SVG images in documents. Here is a very basic SVG example with language blocks embedded. <svg height=\"210\" width=\"500\"> <title>[[lang code='en,other']]Circles and triangles[[/lang]][[lang code='no']]Sirkler og trekanter[[/lang]]</title> <polygon points=\"200,10 350,90 160,210\" style=\"fill:white;stroke:black;stroke-width:2\" /> <circle cx=\"239\" cy=\"94\" r=\"55\" stroke=\"red\" stroke-width=\"1\" fill=\"white\" /> <text x=\"200\" y=\"80\" fill=\"red\">[[lang code='en,other']]Circumference[[/lang]][[lang code='no']]Omkrets[[/lang]]</text> </svg> Remember to add alternative text as the title or description for the inline SVG using the <title> and <desc> tags. The title or description can also be translated.","title":"Translating text in pictures"},{"location":"Authoring/Languages/#using-the-moodle-filter-multilang","text":"STACK questions can be easily localized for different languages using the multi-language content filter. http://docs.moodle.org/en/Multi-language_content_filter . That is to say, a single question can exist in multiple languages and the user can choose the language they use. This page deals with translating text within individual questions. It does not deal with translating the Moodle and STACK interface. See the page on Language packs and translating STACK .","title":"Using the Moodle filter multilang"},{"location":"Authoring/Languages/#installation-of-the-moodle-multilang-filter","text":"Your site administrator must enable the Moodle multi-language content filter . The multi-language content filter must be applied before the MathJax filter, otherwise strange results will occur.","title":"Installation of the Moodle multilang filter"},{"location":"Authoring/Languages/#authoring-questions","text":"The filter works by searching the document for all multilang blocks and displaying the block that matches the selected language. <span lang=\"en\" class=\"multilang\">...Text in English...</span> <span lang=\"fi\" class=\"multilang\">...Text in Finnish...</span> If no block matching the user's language can be found, the block encountered first is displayed. In the above example the English block would be displayed if the user's language was not either English or Finnish. The English block should be the first block in the documents in order for it to be the default language in case no matching language can be found. When translating STACK assignments into different languages, it should be noted that the question text field may not contain multiple instances of input or validation fields of the same name. This means that the input and validations fields must be placed outside multilang blocks in order for them to be visible in all the available languages. The following example will illustrate this. STACK would not accept the following question text: <span lang=\"en\" class=\"multilang\"> <p> Let \\( {\\bf a} = ({@a@}, {@b@}) \\). Find a vector \\({\\bf b}\\neq {\\bf 0}\\) such that it is perpendicular to \\(\\mathbf{a}\\) </p> <p> \\({\\bf b} = \\Big(\\)[[input:ans1]]\\(,\\) [[input:ans2]]\\(\\Big)\\) </p> <div> [[validation:ans1]] </div> <div> [[validation:ans2]] </div> </span> <span lang=\"fi\" class=\"multilang\"> <p> Olkoon vektori \\( {\\bf a} = ({@a@}, {@b@}) \\). Anna vektori \\({\\bf b}\\neq {\\bf 0}\\) siten, ett\u00e4 vektorit ovat kohtisuorassa toisiaan vastaan. </p> <p> \\({\\bf b} = \\Big(\\)[[input:ans1]]\\(,\\) [[input:ans2]]\\(\\Big)\\) </p> <div> [[validation:ans1]] </div> <div> [[validation:ans2]] </div> </span> But this question text causes no issues: <span lang=\"en\" class=\"multilang\"> <p> Let \\( {\\bf a} = ({@a@}, {@b@}) \\). Find a vector \\({\\bf b}\\neq {\\bf 0}\\) such that it is perpendicular to \\(\\mathbf{a}\\) </p> </span> <span lang=\"fi\" class=\"multilang\"> <p> Olkoon vektori \\( {\\bf a} = ({@a@}, {@b@}) \\). Anna vektori \\({\\bf b}\\neq {\\bf 0}\\) siten, ett\u00e4 vektorit ovat kohtisuorassa toisiaan vastaan. </p> </span> <p> \\({\\bf b} = \\Big(\\)[[input:ans1]]\\(,\\) [[input:ans2]]\\(\\Big)\\) </p> <div>[[validation:ans1]]</div> <div>[[validation:ans2]]</div>","title":"Authoring questions"},{"location":"Authoring/Languages/#changing-stacks-language","text":"If you have written a multilingual question, and a student wants to see it in a certain language, they have to change their preferred language. In Moodle, this is done by clicking on their profile, and then going to Preferences , Preferred language and selecting the language. This will not only change the language of all question text (where multilingual blocks have been used), but also the language of the default Moodle and STACK interface (if this translation is available). The specific language pack has to be installed on your server by the server administrator to allow this. More information is available in the developer docs under Translating STACK .","title":"Changing STACK's language"},{"location":"Authoring/Languages/#further-reading","text":"The STACK project has been translated to many languages. Information on specific languages, installing language packs and how to contribute to translations can be found here .","title":"Further reading"},{"location":"Authoring/Multiple_choice_questions/","text":"Multiple choice questions The whole point of STACK is not to use multiple-choice questions, but instead to have the student enter an algebraic expression! That said there are occasions where it is very useful, if not necessary, to use multiple-choice questions in their various forms. STACK's use of a CAS is then very helpful to generate random variants of multiple-choice questions based on the mathematical values. This can also be one input in a multi-part randomly generated question. E.g. you might say \"which method do you need to integrate ( \\sin(x)\\cos(x) )?\" and give students the choice of (i) trig functions first, (ii) parts, (iii) substitution, (iv) replace with complex exponentials. (Yes, this is a joke: all these methods can be made to work here!) Another algebraic input can then be used for the answer. Please read the section on inputs first. If you are new to STACK please note that in STACK MCQs are not the place to start learning how to author questions. Please look at the authoring quick-start guide . Multiple choice input types return a CAS object which is then assessed by the potential response tree. For this reason, these inputs do not provide \"feedback\" fields for each possible answer, as does the Moodle multiple choice input type. Checkbox inputs return a list of the CAS objects selected; Dropdown inputs and radio inputs return a single expression , which is the CAS object selected. The goal of these input types is to provide modest facilities for MCQ. An early design decision was to restrict each of the possible answers to be a CAS expression. In particular, we decided NOT to make each possible answer CASText . Adopting CASText would have provided more flexibility but would have significantly increased the complexity of the internal code. If these features are extensively used we will consider a different input type. Model answer This input type uses the \"model answer\" both to input the teacher's answer and the other options. In this respect, this input type is unique, and the \"model answer\" field does not contain just the teacher's model answer. Constructing a correctly formed model answer is complex, and so this input type should be considered \"advanced\". New users are advised to gain confidence writing questions with algebraic inputs first, and gain experience in using Maxima lists. The \"model answer\" must be supplied in a particular form as a list of lists [[value, correct(, display)], ... ] . value is the value of the teacher's answer. correct must be either true or false . If it is not true then it will be considered to be false ! (optional) display is another CAS expression to be displayed in place of value . This can be a string value here, but it will be passed through the CAS if you choose the LaTeX display option below. display is only used in constructing the question. STACK will take value as the student's answer internally, regardless of what is set here. For example ta:[[diff(p,x),true],[p,false],[int(p,x),false]] At least one of the choices must be considered correct . However, the true and false values are only used to construct the \"teacher's correct answer\". You must still use a potential response tree to assess the student's answer as normal. STACK provides some helper functions mcq_correct(ta) takes the \"model answer\" list and returns a list of values for which correct is true. mcq_incorrect(ta) takes the \"model answer\" list and returns a list of values for which correct is false. Note, that the optional display field is only used when constructing the choices seen by the student when displaying the question. The student's answer will be the value , and this value is normally displayed to the student using the validation feedback, i.e. \"Your last answer was interpreted as...\". A fundamental design principal of STACK is that the student's answer should be a mathematical expression, and this input type is no exception. In situations where there is a significant difference between the optional display and the value which would be confusing, the only current option is to turn off validation feedback. After all, this should not be needed anyway with this input type. In the example above when a student is asked to choose the right method the value could be an integer and the display is some kind of string. An example which includes the display option is tacp:[[A, false, \"A. Direct proof\"], [B, false, \"B. Definition-chasing\"], [C, false, \"C. If and only if\"], [D, false, \"D. Exhaustive cases\"], [E, false, \"E. Induction\"], [F, false, \"F. Contrapositive\"], [G, true, \"G. Contradiction\"]]; Note in this example the value of the student's answer will be a letter which is literally a Maxima variable name. In this situation you can't really randomize the letters used easily. (Not impossible with some cunning code, but a lot of work....) If you choose to use an integer, and randomly suffle the answers then the validation feedback would be confusing, since an integer (which might be shuffled) has no correspondence to the choices selected. This behaviour is a design decision and not a bug! It may change in the future if there is sufficient demand, but it requires a significant change in STACK's internals to have parallel \"real answer\" and \"indicated answer\". Such a change might have other unintended and confusing consequences. Normally we don't permit duplicate values in the values of the teacher's answer. If the input type receives duplicate values STACK will throw an error. This probably arises from poor randomization. However it may be needed. If duplicate entries are permitted use the display option to create unique value keys with the same display. This behaviour is a design decision may change in the future. When STACK displays the \"teacher's answer\", e.g. after a quiz is due, this will be constructed from the display fields corresponding to those elements for which correct is true . I.e. the \"teacher's answer\" will be a list of things which the student could actually select. Whether the student is able to select more than one, or if more than one is actually included, is not checked. The teacher must indicate at least one choice as true . If you need \"none of these\" you must include this as an explicit option, and not rely on the student not checking any boxes in the checkbox type. Indeed, it would be impossible to distinguish the active selection of \"none of these\" from a passive failure to respond to the question. If one of the responses is (x=1 \\mbox{ or } x=2) then it is probably best to use nounor which is commutative and associative. Do not use or which always simplifies its arguments. In this example x=1 or x=2 evaluates to false . HTML dropdowns cannot display LaTeX within the options. This is a restriction of HTML/MathJax (not of STACK). You can use HTML-entities within a string field. For example ta1:[[0,false,\"n/a\"],[1,true,\"&ge;\"],[2,false,\"&le;\"],[3,false,\"=\"],[4,false,\"?\"]]; Note here that an integer will returned internally. Similarly, you can include logical symbols. For example ta1:[[0, false, \"&#8658;\"], [1, true, \"&#8656;\"], [2, false, \"&#8660;\"]]; will give a choice, e.g. a dropdown, from \u21d2, \u21d0 and \u21d4 and an integer will returned internally. ta1:[[0, false, \"&#8704;\"], [1, true, \"&#8707;\"]]; will give a choice, e.g. a dropdown, from \u2200 and \u2203. ta1:[[0, true, \"c &#8712;\"], [1, false, \"c &#8713;\"]]; will give a choice, e.g. a dropdown, from \"c \u2208\" and \"c \u2209\". ta1:[[N, false, \"&#8469;\"], [Z, true, \"&#8484;\"], [Q, false, \"&#8474;\"], [R, false, \"&#8477;\"], [C, false, \"&#8450;\"]]; will give a choice between sets of numbers \u2115, \u2124, \u211a, \u211d, and \u2102. Example: degree of a polynomial Here is an example where the teacher would like the student to state the degree of a polynomial using the adjectives, rather than a number. pol:sum(rand_with_prohib(-9,9,[0])*x^k,k,0,1+rand(5)); deg:hipow(pol,x); /* Use strings, and not keywords. */ l1:[\"constant\", \"linear\", \"quadratic\", \"cubic\", \"quartic\", \"quintic\"]; /* Create a matching list of true/false values as to whether each option is correct. */ a1:maplist(lambda([ex], is(ex=deg)), makelist(k,k,0,length(l1))); /* Basic answer list for MCQ in the correct format. This returns the string to the PRT. */ ta1:zip_with(\"[\",l1,a1); /* Since lists index at one, you need this for the correct answer! */ tac:l1[deg+1]; /* Returns the degree as the student's answer, not the word. */ ta2:maplist(flatten, zip_with(\"[\",makelist(k,k,0,length(l1)), zip_with(\"[\",a1,l1))); /* Feedback can turn this into a word using indexing, e.g. l1[ans1+1] in the PRT. */ Either ta1 or ta2 can be used with the MCQ inputs, in this case dropdown probably makes most sense and checkbox least sense! With the ta2 option you probably want to hide the validation feedback. Internals The dropdown and radio inputs return the value , but the checkbox type returns the student's answer as Maxima list , even if they have only chosen one option. The function mcq_correct returns a list, so for dropdown and radio you might need to take the first element when using this function to extract values from the list of teacher's answers. If, when authoring a question, you switch from radio/dropdown to checkboxes or back, you will probably break a PRT because of mismatched types. For the select and radio types the first option on the list will always be \"Not answered\". This enables a student to retract an answer and return a \"blank\" response. For the checkbox type there is a fundamental ambiguity between a blank response and actively not selecting any of the provided choices, which indicates \"none of the others\". Internally STACK has a number of \"states\" for a student's answer, including blank , valid , invalid , score etc. A student who has not answered will be considered blank , which is different from invalid. Potential response trees which rely on this input type will not activate until the state is score . To enable a student to indicate \"none of the others\", the teacher must add this as an explicit option in all MCQ types. If you add an option \"none of the others\" then it will return the value of that selection: you could give this the value of null , for example, which is a Maxima atom. We did not add support for a special internal \"none of the others\" because the teacher still needs to indicate whether this is the true or false answer to the question. To support randomisation, this needs to be done as an option in the teacher's answer list. The radio and dropdown types always add a \"not answered\" option as the first option. This allows a student to retract their choice, otherwise they will be unable to \"uncheck\" a radio button, which will be stored, validated and possibly assessed (to their potential detriment). If you want to remove this then use the extra option nonotanswered , but keep in mind the possible effect when using the penalty scheme. If one of the items in the teacher's answer list is is the special variable name notanswered , and then default mesage (No answer given) will be replaced by the display value. If no display value is given (and it is optional) then the original message will remain. notanswered will not appear in the list of valid choices for a user and value for this input is ingored. Extra options These input types make use of the \"Extra options\" field of the input type to pass in options. These options are not case sensitive. This must be a comma-separated list of values as follows, but currently the only option is to control the display of mathematical expressions. The way the items are displayed can be controlled by the following options. LaTeX The default option is to use LaTeX to display the options, using an inline maths environment \\(...\\) . This is probably better for radio and checkboxes. It sometimes works in dropdowns, but not always and we need to test this in a wider variety of browsers. LaTeXdisplay use LaTeX to display the options, using the display maths environment \\[...\\] . LaTeXinline use LaTeX to display the options, using the inline maths environment \\(...\\) . LaTeXdisplaystyle use LaTeX to display the options, using the inline maths environment and the displaystyle option \\(\\displaystyle...\\) . casstring does not use the LaTeX value, but just prints the casstring value in <code>...</code> tags. nonotanswered removes the ``Not answered'' option from radio and dropdown. This is not recommended as it means a student has no opportunity to \"uncheck\" a radio button once selected. They may wish not to answer, rather than save an incorrect answer. Randomly shuffling the options To randomly shuffle the options create the list in the question variables and use the Maxima command random_permutation in the question variables. For example, the question variables might look like the following. /* Create a list of potential answers. */ p:sin(2*x); ta:[[diff(p,x),true],[p,false],[int(p,x),false],[cos(2*x)+c,false]]; /* The actual correct answer. */ tac:diff(p,x) /* Randomly shuffle the list \"ta\". */ ta:random_permutation(ta); /* Add in a \"None of these\" to the end of the list. The Maxima value is the atom null. */ tao:[null, false, \"None of these\"]; ta:append(ta,[tao]); These commands ensure (1) the substantive options are in a random order, and (2) that the None of these always comes at the end of the list. Note, the value for the None of these is the CAS atom null . In Maxima null has no special significance but it is a useful atom to use in this situation. As the Question Note, you might like to consider just taking the first item from each list, for example: {@maplist(first,ta)@}. The correct answer is {@tac@}. This note stores both the correct answer and the order shown to the student without the clutter of the true/false values or the optional display strings. Remember, random variants of a question are considered to be the same if and only if the question note is the same, so the random order must be part of the question note if you shuffle the options. Constructing MCQ arrays in Maxima It is not easy to construct MCQ arrays in Maxima. This section contains some tips for creating them, using Maxima's lambda command. Below is an example of a correctly constructed teacher's answer. ta:[[x^2-1,true],[x^2+1,false],[(x-1)*(x+1),true],[(x-i)*(x+i),false]] To create a list of correct answers you could use the function mcq_correct(ta) . This essentially consists of the following code. maplist(first, sublist(ta, lambda([ex], second(ex)))); The function sublist \"filters\" out those entries of ta for which the second element of the list is true. We then \"map\" first onto these entries to pull out the value. It is relatively simple to modify this code to extract the incorrect entries, the displayed forms of the correct entries etc. To go in the other direction, the first list ta1 is considered \"correct\" and the second ta2 is considered incorrect. ta1:[x^2-1,(x-1)*(x+1)]; ta1:maplist(lambda([ex],[ex, true]), ta1); ta2:[x^2+1,(x-i)*(x+i)]; ta2:maplist(lambda([ex],[ex, false]), ta2); ta:append(ta1,ta2); /* If you want to shuffle the responses then use the next line. */ ta:random_permutation(ta); Also, you can use STACK's rand_selection(L, n) to select (n) different elements from the list (L). Say you have the following list of wrong answers and you want to take only 3 out of 5. ta2:[x^2,w^2,w^6,z^4,2*z^4]; ta2:rand_selection(ta2, 3); /* Then, as before. */ ta2:maplist(lambda([ex],[ex, false]), ta2); Another way to create an MCQ answer list is to have Maxima decide which of the answers are true. For example, in this question the student has to choose which of the answers are integers. L:[1,4/2,3.0,2.7,1/4,%pi,10028]; /* Map the appropriate predicate to the list to create the true/false list. */ A:maplist(integerp,L); /* Note the use of zip_with together with the list constructing function \"[\". */ ta:zip_with(\"[\",L,A); /* If you want to shuffle the responses then use the next line. */ ta:random_permutation(ta); MCQ helper functions STACK has helper functions to create MCQ arrays in Maxima. [ta, variant] = multiselqn(corbase, numcor, wrongbase, numwrong) This function takes two lists corbase and wrongbase and two integers numcor and numwrong . It randomly selects numcor from corbase , and numwrong from wrongbase and then creates the MCQ list ta with these selections, and an answernote variant . The function returns a list with two arguments. The first argument of the list is the MCQ array, the second is just the list of answers which is useful for the answer note. Note, this function does use random_permutation internally to randomly order the random selections. For example, the following generates random expressions for an MCQ calculus question. Note the use of ev(...) later to evaluate the derivative. trg:rand([sin(p), cos(p)]); dtrg:diff(trg, p); wrongbase:[a*trg, 2*a*x*trg, -2*a*x*trg, ev(dtrg, p=2*a*x), 2*a*x*ev(dtrg, p=2*a*x)]; p:a*x^2+b; wrongbase:ev(wrongbase); /* Now we have a value for p, the extra evaluation will use it. */ ans:diff(ev(trg), x); multisel:multiselqn([ans], 1, wrongbase, 3); ta:multisel[1]; variant:multisel[2]; In the above example there is only one correct answer, so we just select 1 from [ans] . This is fine, and we then choose three randomly generated wrong answers. This returns (for example) the values ta = [[-2*a*x*cos(a*x^2+b),false],[-sin(2*a*x),false],[a*cos(a*x^2+b),false],[-2*a*x*sin(a*x^2+b),true]]; variant = [-2*a*x*cos(a*x^2+b),-sin(2*a*x),a*cos(a*x^2+b),-2*a*x*sin(a*x^2+b)]; The following function does a similar job when we have MCQ display strings. [ta, variant] = multiselqndisplay(corbase, numcor, wrongbase, numwrong) For example, here the return values could be ta = [[3,false,2*a*x*sin(a*x^2+b)],[2,false,a*sin(a*x^2+b)],[5,false,cos(2*a*x)],[1,true,2*a*x*cos(a*x^2+b)]] variant = [3,2,5,1] The function multiselqndisplay automatically assigns numbers (1,\\cdots, k) to the corbase entries, and then (k+1,\\cdots, n) to the wrongbase entries so that the numbers returned by the input type uniquely map to the entries in the two lists regardless of which random variant is generated. These numbers are useful internally, but not for students. The function multiselqnalpha automatically selects the appropriate number of correct and incorrect entries, permutes the list and then assigns strings \"(a)\" , \"(b)\" , \"(c)\" etc. in the correct order. The student's answer will thus be a list of strings (somewhat subverting the whole purpose of STACK in returning a genuine mathematical expression, but this has its place...). [ta, variant] = multiselqnalpha(corbase, numcor, wrongbase, numwrong, [dispstyle]) For example, here the return values (with inline maths) could be ta = [[\"(a)\",false,\"<b>(a)</b> \\\\(-2\\\\,a\\\\,x\\\\,\\\\sin \\\\left( a\\\\,x^2+b \\\\right)\\\\)\"],[\"(b)\",true,\"<b>(b)</b> \\\\(2\\\\,a\\\\,x\\\\,\\\\cos \\\\left( a\\\\,x^2+b \\\\right)\\\\)\"],[\"(c)\",false,\"<b>(c)</b> \\\\(\\\\cos \\\\left( 2\\\\,a\\\\,x \\\\right)\\\\)\"],[\"(d)\",false,\"<b>(d)</b> \\\\(2\\\\,a\\\\,x\\\\,\\\\cos \\\\left( 2\\\\,a\\\\,x \\\\right)\\\\)\"]] variant = [-2*a*x*sin(a*x^2+b),2*a*x*cos(a*x^2+b),cos(2*a*x),2*a*x*cos(2*a*x)] Notes The fifth optional argument to multiselqnalpha controls the display style of the LaTeX. Use \"i\" (a string containing i ) for inline, \"d\" for displayed and \"id\" for inline \"displaystyle\" (which is the default). Note that the \"student's\" answer will now be a string such as \"(a)\" . When you construct the PRT you will not need to check against these strings, not the original CAS expressions. The variant retains the CAS statements, in order. Do not use multiselqnalpha in conjunction with the shuffle option. There is no need as the selection are permuted, and it messes up the order of the choices for the student. Dealing with strings in MCQ A likely situation is that a teacher wants to include a language string as one of the options for a student's answer in a multiple-choice question. Recall: A fundamental design principal of STACK is that the student's answer should be a mathematical expression which can be manipulated by the CAS as a valid expression. Students are very limited in the keywords they are permitted to use in an input type. It is very likely that strings will contain keywords forbidden in student expressions. One option to overcome this is to do something like this as one option in the teacher's response: [C, false, \"(C) None of the other options\"] The optional display part of this input is displayed to the student. Their answer is the (valid) CAS atom C which the PRT will deal with appropriately. To construct appropriate arrays use the multiselqnalpha function. The quotation marks will be removed from strings, and the strings will not be wrapped <code>...</code> tags or LaTeX mathematics environments. Question authors should consider using the Moodle MCQ question type in addition to these facilities for purely text-based answers. You must protect characters within strings. E.g. in [A, true, \"A. There exists \\\\(M\\\\) such that \\\\( |a_n| &lt; M \\\\).\"] We have protected the backslash, and the inequality. The language strings are not CAStext, they are simply raw strings. It is possible to construct strings which inlcude variable values using the stack_disp function. [oc(-inf,a), false, sconcat(\"The half interval: \", stack_disp(oc(-inf,a),\"i\"))] The argument \"i\" here displays the expression \"inline\", other options are \"\" (you are responsible for maths environments), \"d\" (displayed), and \"di\" (inline but using displaystyle). If you construct strings in this way the display of any equations will not respect the display options in the particular input since variables are typically defined in the question variables and the input options are not available at that point in the code base. Inline CASText as MCQ labels ## {#castextlabels} Since 4.4 it has been possible to write more complex labels using inline CASText. Inline CASText is basically a static string value wrapped in special function call and how one would use it is as follows: /* The old way of constructing a string: */ [oc(-inf,a), false, sconcat(\"The half interval: \", stack_disp(oc(-inf,a),\"i\"))] /* Same using a inline CASText */ [oc(-inf,a), false, castext(\"The half interval: {@oc(-inf,a)@}\")] You may write normal CASText syntax inside that string and it should behave exactly like it does in question-text or PRT feedback etc.. The only limitation at this time is that the list that includes these labels must be defined in the question-variables, you may not write inline CASText directly to the model answer field of the input. The castext() -function is not a real CAS-function it is converted to more complex logic at compile time and therefore it must receive a static string as its argument. The most obvious use case for inline CASText is to provide localisation inside MCQ labels in situatiosn where the mlang2-filter is not an option: [true, true, castext(\"[[lang code='en']]Yes[[/lang]][[lang code='fi']]Kyll\u00e4[[/lang]]\")] Dealing with plots in MCQ It is possible to use plots as the options in a STACK MCQ. Recall again the MCQ are limited to legitimate CAS objects. The plot command returns a string which is the URL of the dynamically generated image on the server. The \"value\" of this can't be assessed by the potential response trees. For this reason you must use the display option with plots and must only put the plot command in the display option. (Otherwise STACK will throw an error: this behaviour could be improved). For example, to create a correct answer consisting of three plots consider the following in the question variables. p1:plot(x,[x,-2,2],[y,-3,3]) p2:plot(x^2,[x,-2,2],[y,-3,3]) p3:plot(x^3,[x,-2,2],[y,-3,3]) ta:[[1,true,p1],[2,false,p2],[3,false,p3]] The actual CAS value of the answer returned will be the respective integer selected (radio or dropdown) or list of integers (checkbox). The PRT can then be used to check the value of the integer (or list) as normal. For this reason you will probably want to switch off the validation feedback ``your last answer was...\". Using a PRT is slight overkill, but it maintains the consistent internal design. Dealing with external images in MCQ It is also possible to embed the URL of an externally hosted image as the \"display\" field of an MCQ. The string is not checked, and is also passed through the CAS. This feature is fragile to being rejected as an invalid CAS object, and so is not recommended. (This could also be improved...) For example, the question variables could be something like i1:\"<img src='http://www.maths.ed.ac.uk/~csangwin/Pics/z1.jpg' />\" i2:\"<img src='http://www.maths.ed.ac.uk/~csangwin/Pics/z2.jpg' />\" i3:\"<img src='http://www.maths.ed.ac.uk/~csangwin/Pics/z3.jpg' />\" ta:[[1,true,i1],[2,false,i2],[3,false,i3]] Writing question tests Quality control of questions is important. See the notes on testing questions. When entering test cases the question author must type in the CAS expression they expect to be the value of the student's answer (NOT the optional display field!). For example, if the teacher's answer (to a checkbox) question is the following. ta:[[x^2-1,true],[x^2+1,false],[(x-1)*(x+1),true],[(x-i)*(x+i),false]] Then the following test case contains all the \"true\" answers. [x^2-1,(x-1)*(x+1)] There is currently minimal checking that the string entered by the teacher corresponds to a valid choice in the input type. If your test case returns a blank result this is probably the problem.","title":"Multiple choice questions"},{"location":"Authoring/Multiple_choice_questions/#multiple-choice-questions","text":"The whole point of STACK is not to use multiple-choice questions, but instead to have the student enter an algebraic expression! That said there are occasions where it is very useful, if not necessary, to use multiple-choice questions in their various forms. STACK's use of a CAS is then very helpful to generate random variants of multiple-choice questions based on the mathematical values. This can also be one input in a multi-part randomly generated question. E.g. you might say \"which method do you need to integrate ( \\sin(x)\\cos(x) )?\" and give students the choice of (i) trig functions first, (ii) parts, (iii) substitution, (iv) replace with complex exponentials. (Yes, this is a joke: all these methods can be made to work here!) Another algebraic input can then be used for the answer. Please read the section on inputs first. If you are new to STACK please note that in STACK MCQs are not the place to start learning how to author questions. Please look at the authoring quick-start guide . Multiple choice input types return a CAS object which is then assessed by the potential response tree. For this reason, these inputs do not provide \"feedback\" fields for each possible answer, as does the Moodle multiple choice input type. Checkbox inputs return a list of the CAS objects selected; Dropdown inputs and radio inputs return a single expression , which is the CAS object selected. The goal of these input types is to provide modest facilities for MCQ. An early design decision was to restrict each of the possible answers to be a CAS expression. In particular, we decided NOT to make each possible answer CASText . Adopting CASText would have provided more flexibility but would have significantly increased the complexity of the internal code. If these features are extensively used we will consider a different input type.","title":"Multiple choice questions"},{"location":"Authoring/Multiple_choice_questions/#model-answer","text":"This input type uses the \"model answer\" both to input the teacher's answer and the other options. In this respect, this input type is unique, and the \"model answer\" field does not contain just the teacher's model answer. Constructing a correctly formed model answer is complex, and so this input type should be considered \"advanced\". New users are advised to gain confidence writing questions with algebraic inputs first, and gain experience in using Maxima lists. The \"model answer\" must be supplied in a particular form as a list of lists [[value, correct(, display)], ... ] . value is the value of the teacher's answer. correct must be either true or false . If it is not true then it will be considered to be false ! (optional) display is another CAS expression to be displayed in place of value . This can be a string value here, but it will be passed through the CAS if you choose the LaTeX display option below. display is only used in constructing the question. STACK will take value as the student's answer internally, regardless of what is set here. For example ta:[[diff(p,x),true],[p,false],[int(p,x),false]] At least one of the choices must be considered correct . However, the true and false values are only used to construct the \"teacher's correct answer\". You must still use a potential response tree to assess the student's answer as normal. STACK provides some helper functions mcq_correct(ta) takes the \"model answer\" list and returns a list of values for which correct is true. mcq_incorrect(ta) takes the \"model answer\" list and returns a list of values for which correct is false. Note, that the optional display field is only used when constructing the choices seen by the student when displaying the question. The student's answer will be the value , and this value is normally displayed to the student using the validation feedback, i.e. \"Your last answer was interpreted as...\". A fundamental design principal of STACK is that the student's answer should be a mathematical expression, and this input type is no exception. In situations where there is a significant difference between the optional display and the value which would be confusing, the only current option is to turn off validation feedback. After all, this should not be needed anyway with this input type. In the example above when a student is asked to choose the right method the value could be an integer and the display is some kind of string. An example which includes the display option is tacp:[[A, false, \"A. Direct proof\"], [B, false, \"B. Definition-chasing\"], [C, false, \"C. If and only if\"], [D, false, \"D. Exhaustive cases\"], [E, false, \"E. Induction\"], [F, false, \"F. Contrapositive\"], [G, true, \"G. Contradiction\"]]; Note in this example the value of the student's answer will be a letter which is literally a Maxima variable name. In this situation you can't really randomize the letters used easily. (Not impossible with some cunning code, but a lot of work....) If you choose to use an integer, and randomly suffle the answers then the validation feedback would be confusing, since an integer (which might be shuffled) has no correspondence to the choices selected. This behaviour is a design decision and not a bug! It may change in the future if there is sufficient demand, but it requires a significant change in STACK's internals to have parallel \"real answer\" and \"indicated answer\". Such a change might have other unintended and confusing consequences. Normally we don't permit duplicate values in the values of the teacher's answer. If the input type receives duplicate values STACK will throw an error. This probably arises from poor randomization. However it may be needed. If duplicate entries are permitted use the display option to create unique value keys with the same display. This behaviour is a design decision may change in the future. When STACK displays the \"teacher's answer\", e.g. after a quiz is due, this will be constructed from the display fields corresponding to those elements for which correct is true . I.e. the \"teacher's answer\" will be a list of things which the student could actually select. Whether the student is able to select more than one, or if more than one is actually included, is not checked. The teacher must indicate at least one choice as true . If you need \"none of these\" you must include this as an explicit option, and not rely on the student not checking any boxes in the checkbox type. Indeed, it would be impossible to distinguish the active selection of \"none of these\" from a passive failure to respond to the question. If one of the responses is (x=1 \\mbox{ or } x=2) then it is probably best to use nounor which is commutative and associative. Do not use or which always simplifies its arguments. In this example x=1 or x=2 evaluates to false . HTML dropdowns cannot display LaTeX within the options. This is a restriction of HTML/MathJax (not of STACK). You can use HTML-entities within a string field. For example ta1:[[0,false,\"n/a\"],[1,true,\"&ge;\"],[2,false,\"&le;\"],[3,false,\"=\"],[4,false,\"?\"]]; Note here that an integer will returned internally. Similarly, you can include logical symbols. For example ta1:[[0, false, \"&#8658;\"], [1, true, \"&#8656;\"], [2, false, \"&#8660;\"]]; will give a choice, e.g. a dropdown, from \u21d2, \u21d0 and \u21d4 and an integer will returned internally. ta1:[[0, false, \"&#8704;\"], [1, true, \"&#8707;\"]]; will give a choice, e.g. a dropdown, from \u2200 and \u2203. ta1:[[0, true, \"c &#8712;\"], [1, false, \"c &#8713;\"]]; will give a choice, e.g. a dropdown, from \"c \u2208\" and \"c \u2209\". ta1:[[N, false, \"&#8469;\"], [Z, true, \"&#8484;\"], [Q, false, \"&#8474;\"], [R, false, \"&#8477;\"], [C, false, \"&#8450;\"]]; will give a choice between sets of numbers \u2115, \u2124, \u211a, \u211d, and \u2102.","title":"Model answer"},{"location":"Authoring/Multiple_choice_questions/#example-degree-of-a-polynomial","text":"Here is an example where the teacher would like the student to state the degree of a polynomial using the adjectives, rather than a number. pol:sum(rand_with_prohib(-9,9,[0])*x^k,k,0,1+rand(5)); deg:hipow(pol,x); /* Use strings, and not keywords. */ l1:[\"constant\", \"linear\", \"quadratic\", \"cubic\", \"quartic\", \"quintic\"]; /* Create a matching list of true/false values as to whether each option is correct. */ a1:maplist(lambda([ex], is(ex=deg)), makelist(k,k,0,length(l1))); /* Basic answer list for MCQ in the correct format. This returns the string to the PRT. */ ta1:zip_with(\"[\",l1,a1); /* Since lists index at one, you need this for the correct answer! */ tac:l1[deg+1]; /* Returns the degree as the student's answer, not the word. */ ta2:maplist(flatten, zip_with(\"[\",makelist(k,k,0,length(l1)), zip_with(\"[\",a1,l1))); /* Feedback can turn this into a word using indexing, e.g. l1[ans1+1] in the PRT. */ Either ta1 or ta2 can be used with the MCQ inputs, in this case dropdown probably makes most sense and checkbox least sense! With the ta2 option you probably want to hide the validation feedback.","title":"Example: degree of a polynomial"},{"location":"Authoring/Multiple_choice_questions/#internals","text":"The dropdown and radio inputs return the value , but the checkbox type returns the student's answer as Maxima list , even if they have only chosen one option. The function mcq_correct returns a list, so for dropdown and radio you might need to take the first element when using this function to extract values from the list of teacher's answers. If, when authoring a question, you switch from radio/dropdown to checkboxes or back, you will probably break a PRT because of mismatched types. For the select and radio types the first option on the list will always be \"Not answered\". This enables a student to retract an answer and return a \"blank\" response. For the checkbox type there is a fundamental ambiguity between a blank response and actively not selecting any of the provided choices, which indicates \"none of the others\". Internally STACK has a number of \"states\" for a student's answer, including blank , valid , invalid , score etc. A student who has not answered will be considered blank , which is different from invalid. Potential response trees which rely on this input type will not activate until the state is score . To enable a student to indicate \"none of the others\", the teacher must add this as an explicit option in all MCQ types. If you add an option \"none of the others\" then it will return the value of that selection: you could give this the value of null , for example, which is a Maxima atom. We did not add support for a special internal \"none of the others\" because the teacher still needs to indicate whether this is the true or false answer to the question. To support randomisation, this needs to be done as an option in the teacher's answer list. The radio and dropdown types always add a \"not answered\" option as the first option. This allows a student to retract their choice, otherwise they will be unable to \"uncheck\" a radio button, which will be stored, validated and possibly assessed (to their potential detriment). If you want to remove this then use the extra option nonotanswered , but keep in mind the possible effect when using the penalty scheme. If one of the items in the teacher's answer list is is the special variable name notanswered , and then default mesage (No answer given) will be replaced by the display value. If no display value is given (and it is optional) then the original message will remain. notanswered will not appear in the list of valid choices for a user and value for this input is ingored.","title":"Internals"},{"location":"Authoring/Multiple_choice_questions/#extra-options","text":"These input types make use of the \"Extra options\" field of the input type to pass in options. These options are not case sensitive. This must be a comma-separated list of values as follows, but currently the only option is to control the display of mathematical expressions. The way the items are displayed can be controlled by the following options. LaTeX The default option is to use LaTeX to display the options, using an inline maths environment \\(...\\) . This is probably better for radio and checkboxes. It sometimes works in dropdowns, but not always and we need to test this in a wider variety of browsers. LaTeXdisplay use LaTeX to display the options, using the display maths environment \\[...\\] . LaTeXinline use LaTeX to display the options, using the inline maths environment \\(...\\) . LaTeXdisplaystyle use LaTeX to display the options, using the inline maths environment and the displaystyle option \\(\\displaystyle...\\) . casstring does not use the LaTeX value, but just prints the casstring value in <code>...</code> tags. nonotanswered removes the ``Not answered'' option from radio and dropdown. This is not recommended as it means a student has no opportunity to \"uncheck\" a radio button once selected. They may wish not to answer, rather than save an incorrect answer.","title":"Extra options"},{"location":"Authoring/Multiple_choice_questions/#randomly-shuffling-the-options","text":"To randomly shuffle the options create the list in the question variables and use the Maxima command random_permutation in the question variables. For example, the question variables might look like the following. /* Create a list of potential answers. */ p:sin(2*x); ta:[[diff(p,x),true],[p,false],[int(p,x),false],[cos(2*x)+c,false]]; /* The actual correct answer. */ tac:diff(p,x) /* Randomly shuffle the list \"ta\". */ ta:random_permutation(ta); /* Add in a \"None of these\" to the end of the list. The Maxima value is the atom null. */ tao:[null, false, \"None of these\"]; ta:append(ta,[tao]); These commands ensure (1) the substantive options are in a random order, and (2) that the None of these always comes at the end of the list. Note, the value for the None of these is the CAS atom null . In Maxima null has no special significance but it is a useful atom to use in this situation. As the Question Note, you might like to consider just taking the first item from each list, for example: {@maplist(first,ta)@}. The correct answer is {@tac@}. This note stores both the correct answer and the order shown to the student without the clutter of the true/false values or the optional display strings. Remember, random variants of a question are considered to be the same if and only if the question note is the same, so the random order must be part of the question note if you shuffle the options.","title":"Randomly shuffling the options"},{"location":"Authoring/Multiple_choice_questions/#constructing-mcq-arrays-in-maxima","text":"It is not easy to construct MCQ arrays in Maxima. This section contains some tips for creating them, using Maxima's lambda command. Below is an example of a correctly constructed teacher's answer. ta:[[x^2-1,true],[x^2+1,false],[(x-1)*(x+1),true],[(x-i)*(x+i),false]] To create a list of correct answers you could use the function mcq_correct(ta) . This essentially consists of the following code. maplist(first, sublist(ta, lambda([ex], second(ex)))); The function sublist \"filters\" out those entries of ta for which the second element of the list is true. We then \"map\" first onto these entries to pull out the value. It is relatively simple to modify this code to extract the incorrect entries, the displayed forms of the correct entries etc. To go in the other direction, the first list ta1 is considered \"correct\" and the second ta2 is considered incorrect. ta1:[x^2-1,(x-1)*(x+1)]; ta1:maplist(lambda([ex],[ex, true]), ta1); ta2:[x^2+1,(x-i)*(x+i)]; ta2:maplist(lambda([ex],[ex, false]), ta2); ta:append(ta1,ta2); /* If you want to shuffle the responses then use the next line. */ ta:random_permutation(ta); Also, you can use STACK's rand_selection(L, n) to select (n) different elements from the list (L). Say you have the following list of wrong answers and you want to take only 3 out of 5. ta2:[x^2,w^2,w^6,z^4,2*z^4]; ta2:rand_selection(ta2, 3); /* Then, as before. */ ta2:maplist(lambda([ex],[ex, false]), ta2); Another way to create an MCQ answer list is to have Maxima decide which of the answers are true. For example, in this question the student has to choose which of the answers are integers. L:[1,4/2,3.0,2.7,1/4,%pi,10028]; /* Map the appropriate predicate to the list to create the true/false list. */ A:maplist(integerp,L); /* Note the use of zip_with together with the list constructing function \"[\". */ ta:zip_with(\"[\",L,A); /* If you want to shuffle the responses then use the next line. */ ta:random_permutation(ta);","title":"Constructing MCQ arrays in Maxima"},{"location":"Authoring/Multiple_choice_questions/#mcq-helper-functions","text":"STACK has helper functions to create MCQ arrays in Maxima. [ta, variant] = multiselqn(corbase, numcor, wrongbase, numwrong) This function takes two lists corbase and wrongbase and two integers numcor and numwrong . It randomly selects numcor from corbase , and numwrong from wrongbase and then creates the MCQ list ta with these selections, and an answernote variant . The function returns a list with two arguments. The first argument of the list is the MCQ array, the second is just the list of answers which is useful for the answer note. Note, this function does use random_permutation internally to randomly order the random selections. For example, the following generates random expressions for an MCQ calculus question. Note the use of ev(...) later to evaluate the derivative. trg:rand([sin(p), cos(p)]); dtrg:diff(trg, p); wrongbase:[a*trg, 2*a*x*trg, -2*a*x*trg, ev(dtrg, p=2*a*x), 2*a*x*ev(dtrg, p=2*a*x)]; p:a*x^2+b; wrongbase:ev(wrongbase); /* Now we have a value for p, the extra evaluation will use it. */ ans:diff(ev(trg), x); multisel:multiselqn([ans], 1, wrongbase, 3); ta:multisel[1]; variant:multisel[2]; In the above example there is only one correct answer, so we just select 1 from [ans] . This is fine, and we then choose three randomly generated wrong answers. This returns (for example) the values ta = [[-2*a*x*cos(a*x^2+b),false],[-sin(2*a*x),false],[a*cos(a*x^2+b),false],[-2*a*x*sin(a*x^2+b),true]]; variant = [-2*a*x*cos(a*x^2+b),-sin(2*a*x),a*cos(a*x^2+b),-2*a*x*sin(a*x^2+b)]; The following function does a similar job when we have MCQ display strings. [ta, variant] = multiselqndisplay(corbase, numcor, wrongbase, numwrong) For example, here the return values could be ta = [[3,false,2*a*x*sin(a*x^2+b)],[2,false,a*sin(a*x^2+b)],[5,false,cos(2*a*x)],[1,true,2*a*x*cos(a*x^2+b)]] variant = [3,2,5,1] The function multiselqndisplay automatically assigns numbers (1,\\cdots, k) to the corbase entries, and then (k+1,\\cdots, n) to the wrongbase entries so that the numbers returned by the input type uniquely map to the entries in the two lists regardless of which random variant is generated. These numbers are useful internally, but not for students. The function multiselqnalpha automatically selects the appropriate number of correct and incorrect entries, permutes the list and then assigns strings \"(a)\" , \"(b)\" , \"(c)\" etc. in the correct order. The student's answer will thus be a list of strings (somewhat subverting the whole purpose of STACK in returning a genuine mathematical expression, but this has its place...). [ta, variant] = multiselqnalpha(corbase, numcor, wrongbase, numwrong, [dispstyle]) For example, here the return values (with inline maths) could be ta = [[\"(a)\",false,\"<b>(a)</b> \\\\(-2\\\\,a\\\\,x\\\\,\\\\sin \\\\left( a\\\\,x^2+b \\\\right)\\\\)\"],[\"(b)\",true,\"<b>(b)</b> \\\\(2\\\\,a\\\\,x\\\\,\\\\cos \\\\left( a\\\\,x^2+b \\\\right)\\\\)\"],[\"(c)\",false,\"<b>(c)</b> \\\\(\\\\cos \\\\left( 2\\\\,a\\\\,x \\\\right)\\\\)\"],[\"(d)\",false,\"<b>(d)</b> \\\\(2\\\\,a\\\\,x\\\\,\\\\cos \\\\left( 2\\\\,a\\\\,x \\\\right)\\\\)\"]] variant = [-2*a*x*sin(a*x^2+b),2*a*x*cos(a*x^2+b),cos(2*a*x),2*a*x*cos(2*a*x)] Notes The fifth optional argument to multiselqnalpha controls the display style of the LaTeX. Use \"i\" (a string containing i ) for inline, \"d\" for displayed and \"id\" for inline \"displaystyle\" (which is the default). Note that the \"student's\" answer will now be a string such as \"(a)\" . When you construct the PRT you will not need to check against these strings, not the original CAS expressions. The variant retains the CAS statements, in order. Do not use multiselqnalpha in conjunction with the shuffle option. There is no need as the selection are permuted, and it messes up the order of the choices for the student.","title":"MCQ helper functions"},{"location":"Authoring/Multiple_choice_questions/#dealing-with-strings-in-mcq","text":"A likely situation is that a teacher wants to include a language string as one of the options for a student's answer in a multiple-choice question. Recall: A fundamental design principal of STACK is that the student's answer should be a mathematical expression which can be manipulated by the CAS as a valid expression. Students are very limited in the keywords they are permitted to use in an input type. It is very likely that strings will contain keywords forbidden in student expressions. One option to overcome this is to do something like this as one option in the teacher's response: [C, false, \"(C) None of the other options\"] The optional display part of this input is displayed to the student. Their answer is the (valid) CAS atom C which the PRT will deal with appropriately. To construct appropriate arrays use the multiselqnalpha function. The quotation marks will be removed from strings, and the strings will not be wrapped <code>...</code> tags or LaTeX mathematics environments. Question authors should consider using the Moodle MCQ question type in addition to these facilities for purely text-based answers. You must protect characters within strings. E.g. in [A, true, \"A. There exists \\\\(M\\\\) such that \\\\( |a_n| &lt; M \\\\).\"] We have protected the backslash, and the inequality. The language strings are not CAStext, they are simply raw strings. It is possible to construct strings which inlcude variable values using the stack_disp function. [oc(-inf,a), false, sconcat(\"The half interval: \", stack_disp(oc(-inf,a),\"i\"))] The argument \"i\" here displays the expression \"inline\", other options are \"\" (you are responsible for maths environments), \"d\" (displayed), and \"di\" (inline but using displaystyle). If you construct strings in this way the display of any equations will not respect the display options in the particular input since variables are typically defined in the question variables and the input options are not available at that point in the code base.","title":"Dealing with strings in MCQ"},{"location":"Authoring/Multiple_choice_questions/#inline-castext-as-mcq-labels-castextlabels","text":"Since 4.4 it has been possible to write more complex labels using inline CASText. Inline CASText is basically a static string value wrapped in special function call and how one would use it is as follows: /* The old way of constructing a string: */ [oc(-inf,a), false, sconcat(\"The half interval: \", stack_disp(oc(-inf,a),\"i\"))] /* Same using a inline CASText */ [oc(-inf,a), false, castext(\"The half interval: {@oc(-inf,a)@}\")] You may write normal CASText syntax inside that string and it should behave exactly like it does in question-text or PRT feedback etc.. The only limitation at this time is that the list that includes these labels must be defined in the question-variables, you may not write inline CASText directly to the model answer field of the input. The castext() -function is not a real CAS-function it is converted to more complex logic at compile time and therefore it must receive a static string as its argument. The most obvious use case for inline CASText is to provide localisation inside MCQ labels in situatiosn where the mlang2-filter is not an option: [true, true, castext(\"[[lang code='en']]Yes[[/lang]][[lang code='fi']]Kyll\u00e4[[/lang]]\")]","title":"Inline CASText as MCQ labels ## {#castextlabels}"},{"location":"Authoring/Multiple_choice_questions/#dealing-with-plots-in-mcq","text":"It is possible to use plots as the options in a STACK MCQ. Recall again the MCQ are limited to legitimate CAS objects. The plot command returns a string which is the URL of the dynamically generated image on the server. The \"value\" of this can't be assessed by the potential response trees. For this reason you must use the display option with plots and must only put the plot command in the display option. (Otherwise STACK will throw an error: this behaviour could be improved). For example, to create a correct answer consisting of three plots consider the following in the question variables. p1:plot(x,[x,-2,2],[y,-3,3]) p2:plot(x^2,[x,-2,2],[y,-3,3]) p3:plot(x^3,[x,-2,2],[y,-3,3]) ta:[[1,true,p1],[2,false,p2],[3,false,p3]] The actual CAS value of the answer returned will be the respective integer selected (radio or dropdown) or list of integers (checkbox). The PRT can then be used to check the value of the integer (or list) as normal. For this reason you will probably want to switch off the validation feedback ``your last answer was...\". Using a PRT is slight overkill, but it maintains the consistent internal design.","title":"Dealing with plots in MCQ"},{"location":"Authoring/Multiple_choice_questions/#dealing-with-external-images-in-mcq","text":"It is also possible to embed the URL of an externally hosted image as the \"display\" field of an MCQ. The string is not checked, and is also passed through the CAS. This feature is fragile to being rejected as an invalid CAS object, and so is not recommended. (This could also be improved...) For example, the question variables could be something like i1:\"<img src='http://www.maths.ed.ac.uk/~csangwin/Pics/z1.jpg' />\" i2:\"<img src='http://www.maths.ed.ac.uk/~csangwin/Pics/z2.jpg' />\" i3:\"<img src='http://www.maths.ed.ac.uk/~csangwin/Pics/z3.jpg' />\" ta:[[1,true,i1],[2,false,i2],[3,false,i3]]","title":"Dealing with external images in MCQ"},{"location":"Authoring/Multiple_choice_questions/#writing-question-tests","text":"Quality control of questions is important. See the notes on testing questions. When entering test cases the question author must type in the CAS expression they expect to be the value of the student's answer (NOT the optional display field!). For example, if the teacher's answer (to a checkbox) question is the following. ta:[[x^2-1,true],[x^2+1,false],[(x-1)*(x+1),true],[(x-i)*(x+i),false]] Then the following test case contains all the \"true\" answers. [x^2-1,(x-1)*(x+1)] There is currently minimal checking that the string entered by the teacher corresponds to a valid choice in the input type. If your test case returns a blank result this is probably the problem.","title":"Writing question tests"},{"location":"Authoring/Notes_about_performance/","text":"Notes about performance Authoring style may affect the performance of the questions\u2014the technical performance in the form of response times and bandwidth usage. Of course, one could say many things about the pedagogical performance of questions, but that is something that this document skips. Some things have changed in 4.4, but most of this applies to all STACK materials. The further down you read this, the less likely it is to apply to normal usage. When we are talking about affecting the performance, in most cases, the effects are linear; adding more inputs means that we need to process more inputs, and the time used grows accordingly. The bits that matter are the non-linear ones, e.g. unknown execution lengths or filling the buffers with unused data might simply push things over some limit and increase the processing time unexpectedly. Deployed variants are good! While not everyone uses them and not everyone needs to use them, they do improve performance and allow caching to work. They also allow one to visually inspect the randomised parameters and thus help detect wildly differing difficulty levels. If you are running on a truly large scale or if your servers cannot keep up, always look at deployed variants first. Just make your question notes informative, the prefered way is to show the question and the answer for this particular variant in short form; a simple parameter list may help, but it is often less than helpful. Randomisation loops are really bad! If you need to randomise something and then select only the ones that match certain conditions, you will need to know that the loop will be repeated every time the question receives input, often more than once. So don't write anything like this: foo: rand(.....); while not is_good(foo) do foo: rand(.....); Not only is there a risk that some seed of the random number generator never leads to parameters that end up being \"good\", but that can also lead to wildly varying execution times and even timeouts. If you cannot write code that directly randomises a \"good\" result, you should use deployed variants and question-tests to pre-randomise and select only the cases where the randomisation is \"good\", the key is to use question-tests as the filter here. Big strings or things you might not want to place in question-variables. In the STACK question model, it is assumed that whatever is in the question-variables or in any other code/logic block is data and needs to be fully transferred into the CAS during all processing steps of the question; conversely, whatever is present in the question-text or other text content is assumed to be safe and not \"data\". We do special sidelining of such safe \"not data\" and don't send it all the way to CAS if we can avoid it, and it still rejoins the output once necessary. This means that if you place big strings on the logic side without actually using them there, you are probably wasting resources. If that text is intended as something to be outputted in the text itself then one should look at putting it into the text itself, maybe using CASText features that allow conditional inclusion if need be. Typically one can end up in this type of situation if one converts materials from other systems and chooses to build their output on the logic side. Sometimes people do image inclusions, either SVG or base64 style content and end up slowing their systems if they add too many of them. The issue is not only about the transfer of large strings or other content taking bandwith, cache space, and parsing resources but also about transferring things not needed. Those question variables are always included in the evaluation session even when that session would not actually render question-text e.g. when doing input-validation. Number of inputs directly affects performance. Currently (pre input2), the number of inputs in a question affects the number of CAS sessions needed for the evaluation and validation of answers. In general, you will have to live with it, but if you happen to do extensive scripting on the client-side, you might want to know that it is only the number of inputs in the question model that matters, not the number of things you place into those inputs. So if you are pushing the limits, maybe map multiple client-side inputs into a few hidden actual inputs. Number of PRTs affected the performance. If you have large numbers of PRTs and are not running 4.4 or later, you might gain significant performance boosts if you update to 4.4. In the earlier versions, every PRT was evaluated separately in their own CAS session, but now they get handled in a single session. Every new session always incurs a performance overhead, so joining them does give us some benefits.","title":"Notes about performance"},{"location":"Authoring/Notes_about_performance/#notes-about-performance","text":"Authoring style may affect the performance of the questions\u2014the technical performance in the form of response times and bandwidth usage. Of course, one could say many things about the pedagogical performance of questions, but that is something that this document skips. Some things have changed in 4.4, but most of this applies to all STACK materials. The further down you read this, the less likely it is to apply to normal usage. When we are talking about affecting the performance, in most cases, the effects are linear; adding more inputs means that we need to process more inputs, and the time used grows accordingly. The bits that matter are the non-linear ones, e.g. unknown execution lengths or filling the buffers with unused data might simply push things over some limit and increase the processing time unexpectedly.","title":"Notes about performance"},{"location":"Authoring/Notes_about_performance/#deployed-variants-are-good","text":"While not everyone uses them and not everyone needs to use them, they do improve performance and allow caching to work. They also allow one to visually inspect the randomised parameters and thus help detect wildly differing difficulty levels. If you are running on a truly large scale or if your servers cannot keep up, always look at deployed variants first. Just make your question notes informative, the prefered way is to show the question and the answer for this particular variant in short form; a simple parameter list may help, but it is often less than helpful.","title":"Deployed variants are good!"},{"location":"Authoring/Notes_about_performance/#randomisation-loops-are-really-bad","text":"If you need to randomise something and then select only the ones that match certain conditions, you will need to know that the loop will be repeated every time the question receives input, often more than once. So don't write anything like this: foo: rand(.....); while not is_good(foo) do foo: rand(.....); Not only is there a risk that some seed of the random number generator never leads to parameters that end up being \"good\", but that can also lead to wildly varying execution times and even timeouts. If you cannot write code that directly randomises a \"good\" result, you should use deployed variants and question-tests to pre-randomise and select only the cases where the randomisation is \"good\", the key is to use question-tests as the filter here.","title":"Randomisation loops are really bad!"},{"location":"Authoring/Notes_about_performance/#big-strings-or-things-you-might-not-want-to-place-in-question-variables","text":"In the STACK question model, it is assumed that whatever is in the question-variables or in any other code/logic block is data and needs to be fully transferred into the CAS during all processing steps of the question; conversely, whatever is present in the question-text or other text content is assumed to be safe and not \"data\". We do special sidelining of such safe \"not data\" and don't send it all the way to CAS if we can avoid it, and it still rejoins the output once necessary. This means that if you place big strings on the logic side without actually using them there, you are probably wasting resources. If that text is intended as something to be outputted in the text itself then one should look at putting it into the text itself, maybe using CASText features that allow conditional inclusion if need be. Typically one can end up in this type of situation if one converts materials from other systems and chooses to build their output on the logic side. Sometimes people do image inclusions, either SVG or base64 style content and end up slowing their systems if they add too many of them. The issue is not only about the transfer of large strings or other content taking bandwith, cache space, and parsing resources but also about transferring things not needed. Those question variables are always included in the evaluation session even when that session would not actually render question-text e.g. when doing input-validation.","title":"Big strings or things you might not want to place in question-variables."},{"location":"Authoring/Notes_about_performance/#number-of-inputs-directly-affects-performance","text":"Currently (pre input2), the number of inputs in a question affects the number of CAS sessions needed for the evaluation and validation of answers. In general, you will have to live with it, but if you happen to do extensive scripting on the client-side, you might want to know that it is only the number of inputs in the question model that matters, not the number of things you place into those inputs. So if you are pushing the limits, maybe map multiple client-side inputs into a few hidden actual inputs.","title":"Number of inputs directly affects performance."},{"location":"Authoring/Notes_about_performance/#number-of-prts-affected-the-performance","text":"If you have large numbers of PRTs and are not running 4.4 or later, you might gain significant performance boosts if you update to 4.4. In the earlier versions, every PRT was evaluated separately in their own CAS session, but now they get handled in a single session. Every new session always incurs a performance overhead, so joining them does give us some benefits.","title":"Number of PRTs affected the performance."},{"location":"Authoring/Numerical_input/","text":"Numerical input This is documentation for the numerical input type . This input type requires the student to type in a number of some kind. Any expression with a variable will be rejected as invalid. While variable names are forbidden, by default function names are not forbidden. sin(pi/2) represents a number. If you actually want the student to type in 1 you need to forbid sin in the normal way using the forbidden words. This input type will preserve trailing zeros in a student's answer. For example, 0.00100 will keep the two trailing zeros. By default Maxima removes these, and these will also be removed in the algebraic input. Note, some things (like forbid floats) can be applied to any numbers in an algebraic input, other tests (require n decimal places) cannot and can only be applied to a single number in this input type. Options The \"Extra options\" field on the input must be a comma separated list of the following tags. Note, these options may not depend on the question variables. floatnum : requires the student's answer to be a floating-point number, as judged by Maxima's floatnump predicate. E.g. to use this and other Boolean options type floatnum:true etc. as a comma separated list in the extra options field. intnum : requires the student's answer to be an explicit integer. E.g. 6 is valid, but 2*3 , 12/2 etc. are invalid. rationalnum : requires the student's answer to be a rational number (i.e. a fraction), as judged by STACK's rational_numberp predicate. Integers are excluded here! rationalized : requires the denominator of any fractions in the student's answer to be free of surds and (i), as judged by STACK's rationalized function. mindp:n : requires the student to type in n or more decimal places. maxdp:n : requires the student to type in at most n decimal places. minsf:n : requires the student to type in n or more significant figures. maxsf:n : requires the student to type in at most n significant figures. You cannot specify both decimal places and significant figures (even if they are min for one and max for the other). If mindp=maxdp=n or minsf=maxsf=n then a student will be told to type in exactly n places/figures. Note, where there is ambiguity in the number of significant figures (e.g. does 100 have 1 or 3 significant figures?) then the student will be given the benefit of the doubt.","title":"Numerical input"},{"location":"Authoring/Numerical_input/#numerical-input","text":"This is documentation for the numerical input type . This input type requires the student to type in a number of some kind. Any expression with a variable will be rejected as invalid. While variable names are forbidden, by default function names are not forbidden. sin(pi/2) represents a number. If you actually want the student to type in 1 you need to forbid sin in the normal way using the forbidden words. This input type will preserve trailing zeros in a student's answer. For example, 0.00100 will keep the two trailing zeros. By default Maxima removes these, and these will also be removed in the algebraic input. Note, some things (like forbid floats) can be applied to any numbers in an algebraic input, other tests (require n decimal places) cannot and can only be applied to a single number in this input type.","title":"Numerical input"},{"location":"Authoring/Numerical_input/#options","text":"The \"Extra options\" field on the input must be a comma separated list of the following tags. Note, these options may not depend on the question variables. floatnum : requires the student's answer to be a floating-point number, as judged by Maxima's floatnump predicate. E.g. to use this and other Boolean options type floatnum:true etc. as a comma separated list in the extra options field. intnum : requires the student's answer to be an explicit integer. E.g. 6 is valid, but 2*3 , 12/2 etc. are invalid. rationalnum : requires the student's answer to be a rational number (i.e. a fraction), as judged by STACK's rational_numberp predicate. Integers are excluded here! rationalized : requires the denominator of any fractions in the student's answer to be free of surds and (i), as judged by STACK's rationalized function. mindp:n : requires the student to type in n or more decimal places. maxdp:n : requires the student to type in at most n decimal places. minsf:n : requires the student to type in n or more significant figures. maxsf:n : requires the student to type in at most n significant figures. You cannot specify both decimal places and significant figures (even if they are min for one and max for the other). If mindp=maxdp=n or minsf=maxsf=n then a student will be told to type in exactly n places/figures. Note, where there is ambiguity in the number of significant figures (e.g. does 100 have 1 or 3 significant figures?) then the student will be given the benefit of the doubt.","title":"Options"},{"location":"Authoring/Options/","text":"Options Options affect the behaviour of each question. Question Level Simplify See the entry on simplification . Default is true . Assume Positive ### {#Assume_Positive} This option sets the value of Maxima 's assume_pos variable. If true and the sign of a parameter (x) cannot be determined from the current context or other considerations, sign and asksign(x) return true . This may forestall some automatically-generated asksign queries, such as may arise from integrate or other computations Default is False Question Penalty ### {#Question_penalty} This is the percentage of the marks deducted from each different and valid attempt which is not completely correct, when the penalty mark modification scheme is in use. The default is (10\\%) of the marks available for this question, entered at (0.1). Note that Moodle stores scores to 7 decimal places, so, (1/3) should be entered as (0.3333333), and (2/3) as (0.6666667). If you input any number close to (1/3), but with less precision, then the extra digits will automatically be added. The exact range affected is that any penalty (\\ge 0.33) and (\\le 0.34) is changed to (0.3333333), and any penalty (\\ge 0.66) and (\\le 0.67) is changed to (0.6666667). Output The following options affect how mathematics is displayed. Multiplication Sign ### {#multiplication} (none), e.g. (x(x+1)) Dot, e.g. (x\\cdot(x+1)) Cross, e.g. (x\\times (x+1)) Numbers only, e.g. (3\\times 5\\, x). In practice it is very helpful to have some kind of multiplication sign displayed to the student. The difference between [ xe^x \\mbox{ and } x\\,e^x] is very subtle. Notice the spacing? The first means xe^x=(xe)^x the second is x*e^x . Could be quite confusing to students if there is no multiplication sign. Using (x\\cdot e^x) neatly solves this problem. Internally the display of multiplication signs is controlled by the STACK function make_multsgn(ex) , where the argument can be one of the strings \"cross\" , \"dot\" or \"blank\" . This can be switched part-way through a session. E.g. consider the following castext. Default: {@a*b@}. Switch to cross: {@(make_multsgn(\"cross\"), a*b)@}. Cross remains: {@a*b@}. The expression (make_multsgn(\"cross\"), a*b) uses parentheses as an abbreviation for Maxima's block command. So, the first expression make_multsgn(\"cross\") is evaluated which changes the display option to a cross. Then the second expression is evaluated and displayed as (a\\times b). The new option persists in the next expression. The value of this option onum will only put a multiplication sign between numbers. This means you will see (3\\times 5\\, x) and not (3\\, 5\\, x) as you would if you have \"none\". There is a special atom which controls the multiplication symbol. If you would like a dot then define texput(multsgnonlyfornumberssym, \"\\\\times\"); in the question variables. Logic symbols ### {#logicsymbol} How logical symbols should be displayed. The values are language, e.g. (A \\mbox{ and } B) or symbol, e.g. (A\\land B). Surd for Square Root ### {#surd} This option sets the value of Maxima 's sqrtdispflag When false the prefix function sqrt(x) will be displayed as (x^{1/2}). Please note that Maxima (by default) does not like to use the (\\sqrt{}) symbol. The internal representation favours fractional powers, for very good reasons. In Maxima 5.19.1 we get: (%i1) 4*sqrt(2); (%o1) 2^(5/2) (%i2) 6*sqrt(2); (%o2) 3*2^(3/2) Do you really want to continue using (\\sqrt{}) in your teaching? In his Elements of Algebra , L. Euler wrote the following. (\\S 200) We may therefore entirely reject the radical signs at present made use of, and employ in their stead the fractional exponents which we have just explained: but as we have been long accustomed to those signs, and meet with them in most books of Algebra, it might be wrong to banish them entirely from calculations; there is, however, sufficient reason also to employ, as is now frequently done, the other method of notation, because it manifestly corresponds with the nature of the thing. In fact we see immediately that (a^\\frac12) is the square root of (a), because we know that the square of (a^\\frac12), that is to say (a^\\frac12) multiplied by (a^\\frac12) is equal to (a^1), or (a). A lot of elementary mathematics involves converting from one form to another and back again. Sometimes these forms have important differences of use, e.g. factored form or completed square form for a quadratic. However, sometimes these equivalent forms are more customary than because it \"manifestly corresponds with the nature of the thing\" in question. I digress... sqrt(-1) {#sqrt_minus_one} In Maxima %i is the complex unit satisfying %i^2=-1 . However, students would like to type i and physicists and engineers j . We also sometimes need to use symbols i and j for vectors. To accommodate these needs we have an option ComplexNo which provides a context for these symbols and affects the way they are displayed. Option Interpretation Display ~ ~ ~ ~ %i^2 i^2 j^2 %i i j -------- ---------------- --------- ----- ---- ----- ----- i -1 -1 j^2 i i j j -1 i^2 -1 j i j symi -1 i^2 j^2 i i j symj -1 i^2 j^2 j i j Note the use of both Roman and italic symbols in this table. Matrix parentheses See the entry on matrices . Inline and displayed fractions. The display of fractions can take two forms: inline ( 1/x ) and displayed ( \\frac{1}{x} ). The default behaviour is displayed, i.e. using LaTeX \\frac{}{} . The function stack_disp_fractions(ex) can be used to control the display. stack_disp_fractions(\"i\") switches display to inline. stack_disp_fractions(\"d\") switches display to display. Note, for CASText the display is controlled by the prevailing setting at the moment the text is displayed, not when a variable is defined in the question variables. Hence, if you would like a single inline fraction within a CASText you will need to use Normally fractions are displayed {@1/x@}. This switches to inline {@(stack_disp_fractions(\"i\"), 1/x)@}, which persists {@1/a@}. Switch explicitly back to displayed {@(stack_disp_fractions(\"d\"),1/x)@}.","title":"Options"},{"location":"Authoring/Options/#options","text":"Options affect the behaviour of each question.","title":"Options"},{"location":"Authoring/Options/#question-level-simplify","text":"See the entry on simplification . Default is true .","title":"Question Level Simplify"},{"location":"Authoring/Options/#assume-positive-assume_positive","text":"This option sets the value of Maxima 's assume_pos variable. If true and the sign of a parameter (x) cannot be determined from the current context or other considerations, sign and asksign(x) return true . This may forestall some automatically-generated asksign queries, such as may arise from integrate or other computations Default is False","title":"Assume Positive  ### {#Assume_Positive}"},{"location":"Authoring/Options/#question-penalty-question_penalty","text":"This is the percentage of the marks deducted from each different and valid attempt which is not completely correct, when the penalty mark modification scheme is in use. The default is (10\\%) of the marks available for this question, entered at (0.1). Note that Moodle stores scores to 7 decimal places, so, (1/3) should be entered as (0.3333333), and (2/3) as (0.6666667). If you input any number close to (1/3), but with less precision, then the extra digits will automatically be added. The exact range affected is that any penalty (\\ge 0.33) and (\\le 0.34) is changed to (0.3333333), and any penalty (\\ge 0.66) and (\\le 0.67) is changed to (0.6666667).","title":"Question Penalty ### {#Question_penalty}"},{"location":"Authoring/Options/#output","text":"The following options affect how mathematics is displayed.","title":"Output"},{"location":"Authoring/Options/#multiplication-sign-multiplication","text":"(none), e.g. (x(x+1)) Dot, e.g. (x\\cdot(x+1)) Cross, e.g. (x\\times (x+1)) Numbers only, e.g. (3\\times 5\\, x). In practice it is very helpful to have some kind of multiplication sign displayed to the student. The difference between [ xe^x \\mbox{ and } x\\,e^x] is very subtle. Notice the spacing? The first means xe^x=(xe)^x the second is x*e^x . Could be quite confusing to students if there is no multiplication sign. Using (x\\cdot e^x) neatly solves this problem. Internally the display of multiplication signs is controlled by the STACK function make_multsgn(ex) , where the argument can be one of the strings \"cross\" , \"dot\" or \"blank\" . This can be switched part-way through a session. E.g. consider the following castext. Default: {@a*b@}. Switch to cross: {@(make_multsgn(\"cross\"), a*b)@}. Cross remains: {@a*b@}. The expression (make_multsgn(\"cross\"), a*b) uses parentheses as an abbreviation for Maxima's block command. So, the first expression make_multsgn(\"cross\") is evaluated which changes the display option to a cross. Then the second expression is evaluated and displayed as (a\\times b). The new option persists in the next expression. The value of this option onum will only put a multiplication sign between numbers. This means you will see (3\\times 5\\, x) and not (3\\, 5\\, x) as you would if you have \"none\". There is a special atom which controls the multiplication symbol. If you would like a dot then define texput(multsgnonlyfornumberssym, \"\\\\times\"); in the question variables.","title":"Multiplication Sign ### {#multiplication}"},{"location":"Authoring/Options/#logic-symbols-logicsymbol","text":"How logical symbols should be displayed. The values are language, e.g. (A \\mbox{ and } B) or symbol, e.g. (A\\land B).","title":"Logic symbols ### {#logicsymbol}"},{"location":"Authoring/Options/#surd-for-square-root-surd","text":"This option sets the value of Maxima 's sqrtdispflag When false the prefix function sqrt(x) will be displayed as (x^{1/2}). Please note that Maxima (by default) does not like to use the (\\sqrt{}) symbol. The internal representation favours fractional powers, for very good reasons. In Maxima 5.19.1 we get: (%i1) 4*sqrt(2); (%o1) 2^(5/2) (%i2) 6*sqrt(2); (%o2) 3*2^(3/2) Do you really want to continue using (\\sqrt{}) in your teaching? In his Elements of Algebra , L. Euler wrote the following. (\\S 200) We may therefore entirely reject the radical signs at present made use of, and employ in their stead the fractional exponents which we have just explained: but as we have been long accustomed to those signs, and meet with them in most books of Algebra, it might be wrong to banish them entirely from calculations; there is, however, sufficient reason also to employ, as is now frequently done, the other method of notation, because it manifestly corresponds with the nature of the thing. In fact we see immediately that (a^\\frac12) is the square root of (a), because we know that the square of (a^\\frac12), that is to say (a^\\frac12) multiplied by (a^\\frac12) is equal to (a^1), or (a). A lot of elementary mathematics involves converting from one form to another and back again. Sometimes these forms have important differences of use, e.g. factored form or completed square form for a quadratic. However, sometimes these equivalent forms are more customary than because it \"manifestly corresponds with the nature of the thing\" in question. I digress...","title":"Surd for Square Root ### {#surd}"},{"location":"Authoring/Options/#sqrt-1-sqrt_minus_one","text":"In Maxima %i is the complex unit satisfying %i^2=-1 . However, students would like to type i and physicists and engineers j . We also sometimes need to use symbols i and j for vectors. To accommodate these needs we have an option ComplexNo which provides a context for these symbols and affects the way they are displayed. Option Interpretation Display ~ ~ ~ ~ %i^2 i^2 j^2 %i i j -------- ---------------- --------- ----- ---- ----- ----- i -1 -1 j^2 i i j j -1 i^2 -1 j i j symi -1 i^2 j^2 i i j symj -1 i^2 j^2 j i j Note the use of both Roman and italic symbols in this table.","title":"sqrt(-1) {#sqrt_minus_one}"},{"location":"Authoring/Options/#matrix-parentheses","text":"See the entry on matrices .","title":"Matrix parentheses"},{"location":"Authoring/Options/#inline-and-displayed-fractions","text":"The display of fractions can take two forms: inline ( 1/x ) and displayed ( \\frac{1}{x} ). The default behaviour is displayed, i.e. using LaTeX \\frac{}{} . The function stack_disp_fractions(ex) can be used to control the display. stack_disp_fractions(\"i\") switches display to inline. stack_disp_fractions(\"d\") switches display to display. Note, for CASText the display is controlled by the prevailing setting at the moment the text is displayed, not when a variable is defined in the question variables. Hence, if you would like a single inline fraction within a CASText you will need to use Normally fractions are displayed {@1/x@}. This switches to inline {@(stack_disp_fractions(\"i\"), 1/x)@}, which persists {@1/a@}. Switch explicitly back to displayed {@(stack_disp_fractions(\"d\"),1/x)@}.","title":"Inline and displayed fractions."},{"location":"Authoring/Potential_response_trees/","text":"Potential response trees The potential response tree is the algorithm which establishes the mathematical properties of the student's answer and assigns outcomes. For examples of how to use this, see the entry on improving feedback in the quick start guide. When is the tree used? Each potential response tree relies on one or more of the inputs . STACK automatically detects which elements are needed in the answer tests or feedback variables . The first time a student submits an input it is validated. The second time it is submitted it is available for assessment by a potential response tree. Only when all inputs upon which a tree relies are valid and submitted will the tree be traversed. Before the tree is traversed Each potential response tree can set Maxima's level of simplification . Before the tree is traversed the feedback variables are evaluated. The feedback variables may depend on the values of the question variables and the inputs . The values of these variables are available to the answer tests and all CASText fields within the tree, for example the feedback could be built using these variables. Notes: You cannot define a feedback variable with the same name as an input. For example, if your input is ans1 then it is tempting to define a feedback variable ans1:exdowncase(ans1) to ensure it is in lower case. Do not do this! Please use a different variable name. This is because in some situations the answer test will choose to take the raw value of ans1 exactly as the student typed it. Any redefinition will interfere with this process. If one of the feedback variables throws an error then this will not stop the PRT executing. If there is an error, this will be flagged in the response summary as [RUNTIME_FV_ERROR] (fv here means feedback variables). See notes on error trapping for advice on how to use this. Traversing the tree A potential response tree (technically an acyclic directed graph) consists of an arbitrary number of linked nodes we call potential responses. In each node two expressions are compared using a specified answer tests , and the result is either true or false . A corresponding branch of the tree has the opportunity to each of the following. Adjust the score, (e.g. assign a value, add or subtract a value). Scores can be floating point numbers or variables defined elsewhere (e.g. question variables/feedback variables). Add written feedback specifically for the student Generate an \" answer note \", used by the teacher for evaluative assessment Nominate the next node, or end the process. Any runtime error during traversing the tree will cause an error. This error will stop further exectution of the tree, and students will see a runtime error message. This will be flagged in the response summary as [RUNTIME_ERROR] . If you have statements likely to throw an error you should evaluate them in the feedback variables first. See notes on error trapping for advice on how to use this. Outcomes The outcomes are The raw score The penalty for this attempt Feedback to the student (see below for full details) An answer note Question Value {#Question_value} The potential response tree itself is expected to return a numerical raw score between (0) and (1). This number is multiplied by the question value before being returned to the student as feedback or recorded in the database. Answer note {#Answer_note} The answer note is a tag which is key for reporting purposes. It is designed to record the outcome of each answer test and the unique path through the tree. This is automatically generated, but can be changed to something meaningful. When looking for identical paths through the tree we have to do so, regardless of which random numbers were selected in this variant of the question given to a particular student. Hence, this string may not depend on any of the variables. The answer note is the concatenation of each answer note from the answer tests and then the corresponding true/false branch. This note provides a record of the result of applying each test and the route taken through the tree. This field is given a default value automatically and is used for reporting students' work. This field may not be empty and for each node in a tree the string must be unique. Do not use ; , | charaters in your answer note. These characters are used to split the response summary in the reporting scripts. Scores and penalties A score is generated by each potential response tree. Because the tree is only traversed when all inputs are valid, the score is only generated for a valid attempt. If a score is generated it is based only on the current values of the inputs. This means that it is not based on either (1) previous values of the inputs, or (2) the number of previous attempts. (Requests have been made to enable attempt number to be available, but this has not been implemented yet.) If a score is generated then a penalty is also generated. The penalty system is designed to encourage students to make repeated attempts in a formative setting. For example, a student is asked to find ( \\int x^2, \\mathrm{d}x). Attempt 1: ( x^3/3). Score (=0), Penalty (=0.1), Feedback: \"You have missed a constant of integration.\" Attempt 2: ( x^3/3+c). Score (=1), Penalty (=0), Feedback: \"Well done.\" Overall, the potential response tree returns the current score minus total penalties so far, in this example (0.9). This is multiplied by the \"Question value\" set in the potential response tree. These are summed across all potential response trees. In this example, some colleagues would prefer to give partial credit for missing a constant of integration rather than zero marks and a penalty. In a formative setting, where students have an opportunity to have another attempt, the penalty system has been found to be an effective way to encourage students to have another attempt and to read the feedback. In an examination, where no feedback is available and so further attempts are not made, different choices need to be made and partial credit would be more appropriate than a zero mark. The penalty is given a default value in the question. This is a mandatory field; the default for STACK is 0.1. Penalties are cumulative, but the student will be given the maximum possible mark. I.e. while they accumulate penalties they are never worse off by repeatedly attempting the question. In particular, if the student in the above example makes another attempt and scores (0) they will retain their mark of (0.9). This is to encourage students to have another go in a formative setting. STACK generates a list of penalty adjusted scores for each attempt, and takes the maximum. The penalty can be assigned a different value in the nodes of the potential response tree. This means, e.g., the teacher can assign a cumulative penalty for a particular answer. The penalties are also controlled at a quiz level by the \"question behaviours\" mechanism for the quiz. Hence, if you set the behaviour as \"Adaptive mode (no penalties)\" the penalty assigned will be ignored when the question is used by students in the quiz. Formative potential response trees The outcomes of score, penalty, feedback and note are always produced. Normally, whether this information should be shown to a student is a function of the quiz, and in Moodle the question behaviour. It should not be set at the level of an individual question. There are rare, but important, situations where we need a purely formative PRT. E.g. Imagine a questions with inputs A, and B. Input A has a dedicated PRT to establish if it is correct. Input B has a dedicated PRT to establish if it is correct. There is an additional PRT which depends on both A & B. This gives formative feedback to the student, e.g. \"try a more interesting combination of answers next time!\" but is of no consequence to the correctness of A & B. With a formative potential response tree, there is no general feedback such as \"Correct answer well done\". There is never a mark (and marks for this PRT do not contribute to the question, or completeness of an answer). Response tree feedback: feedbackstyle The feedback created by PRTs has the following parts concatenated together. [Generic feedback] [Runtime errors] [PRT generated feedback] [Score ?] The [Generic feedback] is a question level option, e.g. \"Standard feedback for correct\", to provide consistency accross a question. By default the [Generic feedback] contains both an initial symbol, and a language sentence. The current \"correct\" default is Correct answer, well done. How PRT feedback is displayed is controlled by the PRT option feedbackstyle as follows. Note the Generic feedback might include the symbol, if you retain the default. Value Options Symbol Generic feedback Errors PRT feedback Score ? 0 Formative No No Yes Yes No (PRT does not contribute to score) 1 Standard No Yes Yes Yes Respects quiz setting 2 Compact Yes No Yes Yes No 3 Symbol only Yes No Yes No No Note that the \"Compact\" PRT feedback uses <span> tags and not <div> . This allows inclusion inline, without new paragraphs settings. However, <span> tags cannot contain a block level element, such as a <div> or <p> . So, if you include a block level element in your PRT feedback then the browser may \"spit this out\" and misplace the feedback. Also, MathJax may not display mathematics correctly on the page when there is an HTML errror such as this. If you use the \"Compact\" feedback, please author only minimal PRT feedback with no block level HTML elements.","title":"Potential response trees"},{"location":"Authoring/Potential_response_trees/#potential-response-trees","text":"The potential response tree is the algorithm which establishes the mathematical properties of the student's answer and assigns outcomes. For examples of how to use this, see the entry on improving feedback in the quick start guide.","title":"Potential response trees"},{"location":"Authoring/Potential_response_trees/#when-is-the-tree-used","text":"Each potential response tree relies on one or more of the inputs . STACK automatically detects which elements are needed in the answer tests or feedback variables . The first time a student submits an input it is validated. The second time it is submitted it is available for assessment by a potential response tree. Only when all inputs upon which a tree relies are valid and submitted will the tree be traversed.","title":"When is the tree used?"},{"location":"Authoring/Potential_response_trees/#before-the-tree-is-traversed","text":"Each potential response tree can set Maxima's level of simplification . Before the tree is traversed the feedback variables are evaluated. The feedback variables may depend on the values of the question variables and the inputs . The values of these variables are available to the answer tests and all CASText fields within the tree, for example the feedback could be built using these variables. Notes: You cannot define a feedback variable with the same name as an input. For example, if your input is ans1 then it is tempting to define a feedback variable ans1:exdowncase(ans1) to ensure it is in lower case. Do not do this! Please use a different variable name. This is because in some situations the answer test will choose to take the raw value of ans1 exactly as the student typed it. Any redefinition will interfere with this process. If one of the feedback variables throws an error then this will not stop the PRT executing. If there is an error, this will be flagged in the response summary as [RUNTIME_FV_ERROR] (fv here means feedback variables). See notes on error trapping for advice on how to use this.","title":"Before the tree is traversed"},{"location":"Authoring/Potential_response_trees/#traversing-the-tree","text":"A potential response tree (technically an acyclic directed graph) consists of an arbitrary number of linked nodes we call potential responses. In each node two expressions are compared using a specified answer tests , and the result is either true or false . A corresponding branch of the tree has the opportunity to each of the following. Adjust the score, (e.g. assign a value, add or subtract a value). Scores can be floating point numbers or variables defined elsewhere (e.g. question variables/feedback variables). Add written feedback specifically for the student Generate an \" answer note \", used by the teacher for evaluative assessment Nominate the next node, or end the process. Any runtime error during traversing the tree will cause an error. This error will stop further exectution of the tree, and students will see a runtime error message. This will be flagged in the response summary as [RUNTIME_ERROR] . If you have statements likely to throw an error you should evaluate them in the feedback variables first. See notes on error trapping for advice on how to use this.","title":"Traversing the tree"},{"location":"Authoring/Potential_response_trees/#outcomes","text":"The outcomes are The raw score The penalty for this attempt Feedback to the student (see below for full details) An answer note","title":"Outcomes"},{"location":"Authoring/Potential_response_trees/#question-value-question_value","text":"The potential response tree itself is expected to return a numerical raw score between (0) and (1). This number is multiplied by the question value before being returned to the student as feedback or recorded in the database.","title":"Question Value {#Question_value}"},{"location":"Authoring/Potential_response_trees/#answer-note-answer_note","text":"The answer note is a tag which is key for reporting purposes. It is designed to record the outcome of each answer test and the unique path through the tree. This is automatically generated, but can be changed to something meaningful. When looking for identical paths through the tree we have to do so, regardless of which random numbers were selected in this variant of the question given to a particular student. Hence, this string may not depend on any of the variables. The answer note is the concatenation of each answer note from the answer tests and then the corresponding true/false branch. This note provides a record of the result of applying each test and the route taken through the tree. This field is given a default value automatically and is used for reporting students' work. This field may not be empty and for each node in a tree the string must be unique. Do not use ; , | charaters in your answer note. These characters are used to split the response summary in the reporting scripts.","title":"Answer note {#Answer_note}"},{"location":"Authoring/Potential_response_trees/#scores-and-penalties","text":"A score is generated by each potential response tree. Because the tree is only traversed when all inputs are valid, the score is only generated for a valid attempt. If a score is generated it is based only on the current values of the inputs. This means that it is not based on either (1) previous values of the inputs, or (2) the number of previous attempts. (Requests have been made to enable attempt number to be available, but this has not been implemented yet.) If a score is generated then a penalty is also generated. The penalty system is designed to encourage students to make repeated attempts in a formative setting. For example, a student is asked to find ( \\int x^2, \\mathrm{d}x). Attempt 1: ( x^3/3). Score (=0), Penalty (=0.1), Feedback: \"You have missed a constant of integration.\" Attempt 2: ( x^3/3+c). Score (=1), Penalty (=0), Feedback: \"Well done.\" Overall, the potential response tree returns the current score minus total penalties so far, in this example (0.9). This is multiplied by the \"Question value\" set in the potential response tree. These are summed across all potential response trees. In this example, some colleagues would prefer to give partial credit for missing a constant of integration rather than zero marks and a penalty. In a formative setting, where students have an opportunity to have another attempt, the penalty system has been found to be an effective way to encourage students to have another attempt and to read the feedback. In an examination, where no feedback is available and so further attempts are not made, different choices need to be made and partial credit would be more appropriate than a zero mark. The penalty is given a default value in the question. This is a mandatory field; the default for STACK is 0.1. Penalties are cumulative, but the student will be given the maximum possible mark. I.e. while they accumulate penalties they are never worse off by repeatedly attempting the question. In particular, if the student in the above example makes another attempt and scores (0) they will retain their mark of (0.9). This is to encourage students to have another go in a formative setting. STACK generates a list of penalty adjusted scores for each attempt, and takes the maximum. The penalty can be assigned a different value in the nodes of the potential response tree. This means, e.g., the teacher can assign a cumulative penalty for a particular answer. The penalties are also controlled at a quiz level by the \"question behaviours\" mechanism for the quiz. Hence, if you set the behaviour as \"Adaptive mode (no penalties)\" the penalty assigned will be ignored when the question is used by students in the quiz.","title":"Scores and penalties"},{"location":"Authoring/Potential_response_trees/#formative-potential-response-trees","text":"The outcomes of score, penalty, feedback and note are always produced. Normally, whether this information should be shown to a student is a function of the quiz, and in Moodle the question behaviour. It should not be set at the level of an individual question. There are rare, but important, situations where we need a purely formative PRT. E.g. Imagine a questions with inputs A, and B. Input A has a dedicated PRT to establish if it is correct. Input B has a dedicated PRT to establish if it is correct. There is an additional PRT which depends on both A & B. This gives formative feedback to the student, e.g. \"try a more interesting combination of answers next time!\" but is of no consequence to the correctness of A & B. With a formative potential response tree, there is no general feedback such as \"Correct answer well done\". There is never a mark (and marks for this PRT do not contribute to the question, or completeness of an answer).","title":"Formative potential response trees"},{"location":"Authoring/Potential_response_trees/#response-tree-feedback-feedbackstyle","text":"The feedback created by PRTs has the following parts concatenated together. [Generic feedback] [Runtime errors] [PRT generated feedback] [Score ?] The [Generic feedback] is a question level option, e.g. \"Standard feedback for correct\", to provide consistency accross a question. By default the [Generic feedback] contains both an initial symbol, and a language sentence. The current \"correct\" default is Correct answer, well done. How PRT feedback is displayed is controlled by the PRT option feedbackstyle as follows. Note the Generic feedback might include the symbol, if you retain the default. Value Options Symbol Generic feedback Errors PRT feedback Score ? 0 Formative No No Yes Yes No (PRT does not contribute to score) 1 Standard No Yes Yes Yes Respects quiz setting 2 Compact Yes No Yes Yes No 3 Symbol only Yes No Yes No No Note that the \"Compact\" PRT feedback uses <span> tags and not <div> . This allows inclusion inline, without new paragraphs settings. However, <span> tags cannot contain a block level element, such as a <div> or <p> . So, if you include a block level element in your PRT feedback then the browser may \"spit this out\" and misplace the feedback. Also, MathJax may not display mathematics correctly on the page when there is an HTML errror such as this. If you use the \"Compact\" feedback, please author only minimal PRT feedback with no block level HTML elements.","title":"Response tree feedback: feedbackstyle"},{"location":"Authoring/Question_note/","text":"Question note The question note is CASText . The question note is used to decide if randomly generated variants are the same or different. Two question variants are equal if and only if the question notes are equal. In particular, when we generate statistics about students' attempts we group attempts according to the equality of their question notes. Two variants are not necessarily different if their question variables are different, and hence a note is useful. The teacher needs to choose what identifies each unique variant - this cannot be automated. The teacher can also leave useful information about the answer in the question note. For example they might use a note such as \\[ \\frac{d}{d{@v@}}{@p@} = {@diff(p,v)@} \\] This is very helpful, particularly when students ask about the variant they were given. The teacher only need look at the question note to get both the question, and answer. The question note is used when deploying question variants.","title":"Question note"},{"location":"Authoring/Question_note/#question-note","text":"The question note is CASText . The question note is used to decide if randomly generated variants are the same or different. Two question variants are equal if and only if the question notes are equal. In particular, when we generate statistics about students' attempts we group attempts according to the equality of their question notes. Two variants are not necessarily different if their question variables are different, and hence a note is useful. The teacher needs to choose what identifies each unique variant - this cannot be automated. The teacher can also leave useful information about the answer in the question note. For example they might use a note such as \\[ \\frac{d}{d{@v@}}{@p@} = {@diff(p,v)@} \\] This is very helpful, particularly when students ask about the variant they were given. The teacher only need look at the question note to get both the question, and answer. The question note is used when deploying question variants.","title":"Question note"},{"location":"Authoring/Reporting/","text":"Reporting Reviewing students' answers closes the learning cycle for teachers by allowing them to understand what students are doing. Basic reporting is undertaken through the Moodle quiz. For example, lists of scores, etc. are available there. The Moodle quiz also calculates basic statistics based on the numerical information. To review work in more detail we need to use two important parts of the question. Please read the following two entries before continuing with this article. The question note . The answer note . Moodle quiz features Most of the day to day reporting is done through the Moodle quiz features. For detailed reporting go to Quiz administration -> Results -> Reporting The \"response\" column shows the raw Maxima input value entered by the student and the validity status, e.g. \"blank\" (not reported), \"invalid\", \"valid\", \"score\". The \"response\" column also shows the value of the answer note for each potential response tree. An example note is shown below. In this question a student has answered with (x-4)^6+c for the input ans1 . The potential response tree prt1 has executed and the note is ATInt_generic. | 1-0-F . ans1: (x-4)^6+c [score]; prt1: ATInt_generic. | 1-0-F Notes: If the potential response tree does not execute it will be reported as prt1: # to indicate it exists but was not used. Reporting is stored in the database, so you may need to \"regrade\" attempts if you update the answer notes. You can download the responses for offline analysis. Split over ; to separate inputs and separate PRT answer notes. Split the individual answer note over | to get the route through the tree, and the notes added by the answer tests. Individual STACK item analysis STACK has a bespoke basic reporting mechanism for analysing responses to questions. To access the Basic question use report you need to navigate to the STACK question dashboard and choose \"Analyze responses\". The report currently contains all attempts at the question, regardless of how many different quizzes the question appears in. The report makes use of the response summary. (For developers, this is generated by qtype_stack_question::summarise_response in question.php .) The response summary is a string consisting of the following information. The \"seed\" for the question used, enabling attempts to be grouped by question variant. The Maxima string value of each input, and its status (blank, invalid, valid, score). The answernote generated by each potential response tree. ! denotes a blank note, i.e. the PRT did not execute. Here is a raw response summary. Seed: 254530683; ans1: 15180 [score]; ans2: 24360 [score]; prt1: # = 1 | prt1-1-T; prt2: # = 0 | prt2-1-F Here we see the following. The report can be split over ; into separate fields. Within the PRTs the data can be split over | . The seed used in this example was 254530683. There are two inputs, each at the \"score\" state. ans1: 15180 [score] ans2: 24360 [score] There are two potential response trees prt1: # = 1 | prt1-1-T The prt1 was activated, the score # returned was 1 and we see the answer note. prt2: # = 0 | prt2-1-F The prt2 was activated, the score # returned was 0 and we see the answer note. The response summary contains a lot of information in a condensed way, and can only be understood with an appreciation of the question structure itself in STACK (inputs, prts, variants) and the individual question. The report splits this information into the following, text-based, reports. Frequency of answer notes, for each PRT, regardless of which variant was used. Useful to know the route through the tree. Frequency of answer notes, for each PRT, split by |, regardless of which variant was used. Useful to understand the outcome at each node. Raw inputs, regardless of which variant was used. Raw inputs and PRT answer notes by variant. Raw data. This feature is new in STACK 4.3. Comments and suggestions for improvements are very welcome. Note, the question summary is stored in a database and will not be updated if you subsequently edit the question. If you wish to improve your question you will need to do a quiz \"regrade\" to update the basic question use report. Site-wide usage Moodle Admins can get stats on site-wide STACK usage .","title":"Reporting"},{"location":"Authoring/Reporting/#reporting","text":"Reviewing students' answers closes the learning cycle for teachers by allowing them to understand what students are doing. Basic reporting is undertaken through the Moodle quiz. For example, lists of scores, etc. are available there. The Moodle quiz also calculates basic statistics based on the numerical information. To review work in more detail we need to use two important parts of the question. Please read the following two entries before continuing with this article. The question note . The answer note .","title":"Reporting"},{"location":"Authoring/Reporting/#moodle-quiz-features","text":"Most of the day to day reporting is done through the Moodle quiz features. For detailed reporting go to Quiz administration -> Results -> Reporting The \"response\" column shows the raw Maxima input value entered by the student and the validity status, e.g. \"blank\" (not reported), \"invalid\", \"valid\", \"score\". The \"response\" column also shows the value of the answer note for each potential response tree. An example note is shown below. In this question a student has answered with (x-4)^6+c for the input ans1 . The potential response tree prt1 has executed and the note is ATInt_generic. | 1-0-F . ans1: (x-4)^6+c [score]; prt1: ATInt_generic. | 1-0-F Notes: If the potential response tree does not execute it will be reported as prt1: # to indicate it exists but was not used. Reporting is stored in the database, so you may need to \"regrade\" attempts if you update the answer notes. You can download the responses for offline analysis. Split over ; to separate inputs and separate PRT answer notes. Split the individual answer note over | to get the route through the tree, and the notes added by the answer tests.","title":"Moodle quiz features"},{"location":"Authoring/Reporting/#individual-stack-item-analysis","text":"STACK has a bespoke basic reporting mechanism for analysing responses to questions. To access the Basic question use report you need to navigate to the STACK question dashboard and choose \"Analyze responses\". The report currently contains all attempts at the question, regardless of how many different quizzes the question appears in. The report makes use of the response summary. (For developers, this is generated by qtype_stack_question::summarise_response in question.php .) The response summary is a string consisting of the following information. The \"seed\" for the question used, enabling attempts to be grouped by question variant. The Maxima string value of each input, and its status (blank, invalid, valid, score). The answernote generated by each potential response tree. ! denotes a blank note, i.e. the PRT did not execute. Here is a raw response summary. Seed: 254530683; ans1: 15180 [score]; ans2: 24360 [score]; prt1: # = 1 | prt1-1-T; prt2: # = 0 | prt2-1-F Here we see the following. The report can be split over ; into separate fields. Within the PRTs the data can be split over | . The seed used in this example was 254530683. There are two inputs, each at the \"score\" state. ans1: 15180 [score] ans2: 24360 [score] There are two potential response trees prt1: # = 1 | prt1-1-T The prt1 was activated, the score # returned was 1 and we see the answer note. prt2: # = 0 | prt2-1-F The prt2 was activated, the score # returned was 0 and we see the answer note. The response summary contains a lot of information in a condensed way, and can only be understood with an appreciation of the question structure itself in STACK (inputs, prts, variants) and the individual question. The report splits this information into the following, text-based, reports. Frequency of answer notes, for each PRT, regardless of which variant was used. Useful to know the route through the tree. Frequency of answer notes, for each PRT, split by |, regardless of which variant was used. Useful to understand the outcome at each node. Raw inputs, regardless of which variant was used. Raw inputs and PRT answer notes by variant. Raw data. This feature is new in STACK 4.3. Comments and suggestions for improvements are very welcome. Note, the question summary is stored in a database and will not be updated if you subsequently edit the question. If you wish to improve your question you will need to do a quiz \"regrade\" to update the basic question use report.","title":"Individual STACK item analysis"},{"location":"Authoring/Reporting/#site-wide-usage","text":"Moodle Admins can get stats on site-wide STACK usage .","title":"Site-wide usage"},{"location":"Authoring/Sample_questions/","text":"Sample Questions STACK is distributed with sample questions in /qtype_stack/samplequestions/ The sample questions are in English. We would encourage colleagues to release their materials under a creative commons licence. Please contact the developers. Moodle courses released with STACK STACK is released with a demonstration course which contains hundreds of tested STACK questions. Many have a full worked solution and random variants, and this represents a substantial resource. /qtype_stack/samplequestions/STACK-demo.mbz You can \"restore\" this into your version of Moodle. It has a number of quizzes, pre-created with questions and deployed variants. It also has a large question bank, with questions not arranged into quizzes. Materials released with STACK The file sample_questions.xml contains the following questions. test_1_basic_integral This is a simple, single part integral question with randomization. test_2_rectangle A rectangle has length 6cm greater than its width. If it has an area of 27cm(^2), find the dimensions of the rectangle. This is a multi-part question which illustrates follow-through marking . Get the first part wrong, but the second part correct based on the first part to see the feedback. test_3_matrix This question creates two random matrices and asks students to multiply them together. See the notes on matrices . test_4_complex Given a complex number (z=ae^{ib}) determine (|z^{n}|) and (\\arg(z^{n})). Where (a), (b) and (n) are randomly generated numbers. See the authoring quick start 7 . test_5_cubic-spline In this question a student is asked to find a cubic spline. This question illustrates the following. Separate properties are established, i.e. the answer is a cubic, has the right end point values and correct derivatives at the end points. Plots are incorporated, including a plot of a student's incorrect answer. text_6_odd_even In this question a student is asked to give examples of odd and even functions. There are four separate parts. Separate properties are established by each. For two of the parts there are non-unique correct answers. Feedback based on calculations of students' answers is included. text_7_solve_quadratic In this question a student is asked to solve a quadratic by working line by line. ODE_2nd_order_linear.xml This file contains three example questions on 2nd order linear ODEs with constant coefficients. They illustrate the need to establish multiple independent properties, even in cases where the teacher might be tempted to look at the specific answer. MCQ-sample-questions.xml This file contains two example multiple choice questions. (Not the place to start when authoring in STACK: see the authoring guide for more details.) v4-syntax-samples.xml With v4.0 of STACK the CASText parts of the question gain blocks which allow the text to contain segments that are evaluated further and which may have parameters that define their behaviour. See the specific documentation about blocks for more details. Open Educational Resources The FETLAR project released a large collection of STACK questions in English covering calculus and algebra in April 2010. These are now part of the demonstration course . Questions to cover all parts of the The Map of Algebraic Manipulation . Questions to cover all of the Calculus Refresher by Dr Tony Croft and Dr Anthony Kay. Abacus is a material bank for STEM education which seeks to produce, share and host high-quality educational material between collaborators. For more information see https://abacus.aalto.fi/ Other sources of questions If you have materials you would like to release, please add the details here.","title":"Sample Questions"},{"location":"Authoring/Sample_questions/#sample-questions","text":"STACK is distributed with sample questions in /qtype_stack/samplequestions/ The sample questions are in English. We would encourage colleagues to release their materials under a creative commons licence. Please contact the developers.","title":"Sample Questions"},{"location":"Authoring/Sample_questions/#moodle-courses-released-with-stack","text":"STACK is released with a demonstration course which contains hundreds of tested STACK questions. Many have a full worked solution and random variants, and this represents a substantial resource. /qtype_stack/samplequestions/STACK-demo.mbz You can \"restore\" this into your version of Moodle. It has a number of quizzes, pre-created with questions and deployed variants. It also has a large question bank, with questions not arranged into quizzes.","title":"Moodle courses released with STACK"},{"location":"Authoring/Sample_questions/#materials-released-with-stack","text":"The file sample_questions.xml contains the following questions.","title":"Materials released with STACK"},{"location":"Authoring/Sample_questions/#test_1_basic_integral","text":"This is a simple, single part integral question with randomization.","title":"test_1_basic_integral"},{"location":"Authoring/Sample_questions/#test_2_rectangle","text":"A rectangle has length 6cm greater than its width. If it has an area of 27cm(^2), find the dimensions of the rectangle. This is a multi-part question which illustrates follow-through marking . Get the first part wrong, but the second part correct based on the first part to see the feedback.","title":"test_2_rectangle"},{"location":"Authoring/Sample_questions/#test_3_matrix","text":"This question creates two random matrices and asks students to multiply them together. See the notes on matrices .","title":"test_3_matrix"},{"location":"Authoring/Sample_questions/#test_4_complex","text":"Given a complex number (z=ae^{ib}) determine (|z^{n}|) and (\\arg(z^{n})). Where (a), (b) and (n) are randomly generated numbers. See the authoring quick start 7 .","title":"test_4_complex"},{"location":"Authoring/Sample_questions/#test_5_cubic-spline","text":"In this question a student is asked to find a cubic spline. This question illustrates the following. Separate properties are established, i.e. the answer is a cubic, has the right end point values and correct derivatives at the end points. Plots are incorporated, including a plot of a student's incorrect answer.","title":"test_5_cubic-spline"},{"location":"Authoring/Sample_questions/#text_6_odd_even","text":"In this question a student is asked to give examples of odd and even functions. There are four separate parts. Separate properties are established by each. For two of the parts there are non-unique correct answers. Feedback based on calculations of students' answers is included.","title":"text_6_odd_even"},{"location":"Authoring/Sample_questions/#text_7_solve_quadratic","text":"In this question a student is asked to solve a quadratic by working line by line.","title":"text_7_solve_quadratic"},{"location":"Authoring/Sample_questions/#ode_2nd_order_linearxml","text":"This file contains three example questions on 2nd order linear ODEs with constant coefficients. They illustrate the need to establish multiple independent properties, even in cases where the teacher might be tempted to look at the specific answer.","title":"ODE_2nd_order_linear.xml"},{"location":"Authoring/Sample_questions/#mcq-sample-questionsxml","text":"This file contains two example multiple choice questions. (Not the place to start when authoring in STACK: see the authoring guide for more details.)","title":"MCQ-sample-questions.xml"},{"location":"Authoring/Sample_questions/#v4-syntax-samplesxml","text":"With v4.0 of STACK the CASText parts of the question gain blocks which allow the text to contain segments that are evaluated further and which may have parameters that define their behaviour. See the specific documentation about blocks for more details.","title":"v4-syntax-samples.xml"},{"location":"Authoring/Sample_questions/#open-educational-resources","text":"The FETLAR project released a large collection of STACK questions in English covering calculus and algebra in April 2010. These are now part of the demonstration course . Questions to cover all parts of the The Map of Algebraic Manipulation . Questions to cover all of the Calculus Refresher by Dr Tony Croft and Dr Anthony Kay. Abacus is a material bank for STEM education which seeks to produce, share and host high-quality educational material between collaborators. For more information see https://abacus.aalto.fi/","title":"Open Educational Resources"},{"location":"Authoring/Sample_questions/#other-sources-of-questions","text":"If you have materials you would like to release, please add the details here.","title":"Other sources of questions"},{"location":"Authoring/Serving_out_data/","text":"Serving out data In some contexts one wants to generate random data for the students to act on, depending on the ammount of data and whether one expects the students to transfer it to other tools for processing the methods used for serving that data data out vary. Here are some examples. HTML-tables If you only have a small amount of data you may simply print out a table of it and let the students copy-paste it from there. When doing this one will want to avoid LaTeX representations as those may case trouble for students try to copy-paste things. Here is an example of using CASText foreach -blocks to iterate and output an aray of data: [[comment]]This just defines the data for this sample, you may use one coming from your question-vars.[[/comment]] [[define data=\"(rand(zeromatrix(4,3)+100)-50)/10.0\"/]] <table> [[foreach row=\"args(data)\"]] <tr>[[foreach cell=\"row\"]]<td>{#cell#}</td>[[/foreach]]</tr> [[/foreach]] </table> <p>More control is available. You could tune the style of the values without affecting copy paste too much.</p> <table> [[foreach row=\"args(data)\"]] <tr>[[foreach cell=\"row\"]] <td> [[if test=\"cell < 0\"]]<span style=\"color:red;\">[[/if]] {#cell#} [[if test=\"cell < 0\"]]</span>[[/if]] </td> [[/foreach]]</tr> [[/foreach]] </table> Raw Maxima code Should you want to just give out Maxima code for use in Maxima or similar enough syntax you may simply use the {#...#} injection instead of {@...@} and it will output the raw form which is again copy-pastable. However, this does not work well with large amounts of data as the line may become quite long and even selecting it may prove problematic. File transfer Since 4.4 STACK has allowed the author to construct text-files that can be downloaded and that contain freeform CASText constructed in the questions session with the questions seed, thus allowing unique random output for the students. This functionality will server everything out as plain text unless the defined name of the file ends with .csv . The primary limitation, for this feature is that it only works in the question-text, it may not be used anywhere else and it will never support adaptation to current student inputs. How it works is that you wrap whatever you want the file to contain in a [[textdownload]] block, for that block a single parameter name must be defined and that will define the name suggested when saving this file. Whatever is inside that block will be rendered as normal CASText, however nothing defined in the CASText outside that block can affect it, which may cause some confusion, just repeat those defines inside the block if you use such things. The block will then get replaced with an URL from which the file can be downloaded, you will probably want to place that URL into a link or some such construct. As an example, using the new function that generates CSV-strings from data we can write as follows: /* Define these in question variables: */ lab: [\"A\",\"B\",\"C\"]; data: makelist([rand(322)/100.0,rand(600)/100.0,rand(300)/100.0], i, 50); [[comment]]Use them like this in the question-text.[[/comment]] Load the data from <a href=\"[[textdownload name=\"data.csv\"]]{@stack_csv_formatter(data,lab)@}[[/textdownload]]\">this file</a> and ... That function returns a string and it takes in the data as a matrix or a list of lists and labels as a list. If no labels are necessary use false . Also you can use stackfltfmt to control the representation of pure floats in the data. Just in case you meet trouble labels is a keyword that cannot be used which is a shame when defining labels.","title":"Serving out data"},{"location":"Authoring/Serving_out_data/#serving-out-data","text":"In some contexts one wants to generate random data for the students to act on, depending on the ammount of data and whether one expects the students to transfer it to other tools for processing the methods used for serving that data data out vary. Here are some examples.","title":"Serving out data"},{"location":"Authoring/Serving_out_data/#html-tables","text":"If you only have a small amount of data you may simply print out a table of it and let the students copy-paste it from there. When doing this one will want to avoid LaTeX representations as those may case trouble for students try to copy-paste things. Here is an example of using CASText foreach -blocks to iterate and output an aray of data: [[comment]]This just defines the data for this sample, you may use one coming from your question-vars.[[/comment]] [[define data=\"(rand(zeromatrix(4,3)+100)-50)/10.0\"/]] <table> [[foreach row=\"args(data)\"]] <tr>[[foreach cell=\"row\"]]<td>{#cell#}</td>[[/foreach]]</tr> [[/foreach]] </table> <p>More control is available. You could tune the style of the values without affecting copy paste too much.</p> <table> [[foreach row=\"args(data)\"]] <tr>[[foreach cell=\"row\"]] <td> [[if test=\"cell < 0\"]]<span style=\"color:red;\">[[/if]] {#cell#} [[if test=\"cell < 0\"]]</span>[[/if]] </td> [[/foreach]]</tr> [[/foreach]] </table>","title":"HTML-tables"},{"location":"Authoring/Serving_out_data/#raw-maxima-code","text":"Should you want to just give out Maxima code for use in Maxima or similar enough syntax you may simply use the {#...#} injection instead of {@...@} and it will output the raw form which is again copy-pastable. However, this does not work well with large amounts of data as the line may become quite long and even selecting it may prove problematic.","title":"Raw Maxima code"},{"location":"Authoring/Serving_out_data/#file-transfer","text":"Since 4.4 STACK has allowed the author to construct text-files that can be downloaded and that contain freeform CASText constructed in the questions session with the questions seed, thus allowing unique random output for the students. This functionality will server everything out as plain text unless the defined name of the file ends with .csv . The primary limitation, for this feature is that it only works in the question-text, it may not be used anywhere else and it will never support adaptation to current student inputs. How it works is that you wrap whatever you want the file to contain in a [[textdownload]] block, for that block a single parameter name must be defined and that will define the name suggested when saving this file. Whatever is inside that block will be rendered as normal CASText, however nothing defined in the CASText outside that block can affect it, which may cause some confusion, just repeat those defines inside the block if you use such things. The block will then get replaced with an URL from which the file can be downloaded, you will probably want to place that URL into a link or some such construct. As an example, using the new function that generates CSV-strings from data we can write as follows: /* Define these in question variables: */ lab: [\"A\",\"B\",\"C\"]; data: makelist([rand(322)/100.0,rand(600)/100.0,rand(300)/100.0], i, 50); [[comment]]Use them like this in the question-text.[[/comment]] Load the data from <a href=\"[[textdownload name=\"data.csv\"]]{@stack_csv_formatter(data,lab)@}[[/textdownload]]\">this file</a> and ... That function returns a string and it takes in the data as a matrix or a list of lists and labels as a list. If no labels are necessary use false . Also you can use stackfltfmt to control the representation of pure floats in the data. Just in case you meet trouble labels is a keyword that cannot be used which is a shame when defining labels.","title":"File transfer"},{"location":"Authoring/Tables/","text":"Tables STACK provides an intert function table for typesetting mathematical tables, provided originally to typeset truth tables in Propositional Logic . You can create a table directly. Notice the first row is a heading row. T0:table([x,x^3],[-1,-1],[0,0],[1,1],[2,8],[3,27]); Really, the table operator does nothing (very much like a matrix). Like a matrix, the arguments must be identical length lists. However, there are some special rules for the tex display. The first row is considered to be a heading, and a horizontal line is printed after the first row. There are vertical bars between internal columns of the table. There are currently no options for customising printing of borders, etc. You can highlight entries in the table using the command texcolor(\"col\", ex) . Note however, this will also underline any entries (as colour alone is poor accessibility practice.). The table T0 is displayed as [ {\\begin{array}{c|c} x & x^3\\ \\hline -1 & -1 \\ 0 & 0 \\ 1 & 1 \\ 2 & 8 \\ 3 & 27\\end{array}} ]. table_bool_abbreviate:true is a boolean variable. If set to true (the default) boolean entries true/false will be abbreviated to T/F respectively when creating the LaTeX for display, to keep the table small and tidy looking. All other entries in the table are typeset normally. This only affects the LaTeX display, and table entries remain boolean. table_zip_with(fn, T1, T2) combines two tables, using the binary function fn (much as zip_with combines two lists). It is instructive to look at the code for table_difference which colours entries which differ in red. table_difference(T1, T2) := table_zip_with(lambda([ex1,ex2], if ex1=ex2 then ex1 else texcolor(\"red\", ex1)), T1, T2)$ This shows which elements of T1 differ from the corresponding elements of T2 by returning elements of T1 coloured in red. If you want to identify which entries really are different then you could do something like the following. table_zip_with(lambda([ex1,ex2], is(ex1=ex2)), T1, T2) If you find yourself manipulating tables, the above funtion provides a starting point. Please ask the developers to add anything you use regularly. Examples. You can create a table via some code such as the following. Notice the use of the list constructor function \"[\" within the zip_with command. vals:[-1,0,1,2,3]; fn(ex):=ex^3; T0:apply(table, append([[x,fn(x)]], zip_with(\"[\", vals, maplist(fn, vals)))); As a question variable, or directly within CAStext. T1:truth_table(a implies b); T2:table_difference(truth_table(a xor b), truth_table(a implies b)); Here we have two tables T1 is displayed as [ {\\begin{array}{c|c|c} a & b & a\\rightarrow b\\ \\hline \\mathbf{F} & \\mathbf{F} & \\mathbf{T} \\ \\mathbf{F} & \\mathbf{T} & \\mathbf{T} \\ \\mathbf{T} & \\mathbf{F} & \\mathbf{F} \\ \\mathbf{T} & \\mathbf{T} & \\mathbf{T} \\end{array}} ] and T2 gives [ {\\begin{array}{c|c|c} a & b & \\color{red}{\\underline{a\\oplus b}}\\ \\hline \\mathbf{F} & \\mathbf{F} & \\color{red}{\\underline{\\mathbf{F} }} \\ \\mathbf{F} & \\mathbf{T} & \\mathbf{T} \\ \\mathbf{T} & \\mathbf{F} & \\color{red}{\\underline{\\mathbf{T} }} \\ \\mathbf{T} & \\mathbf{T} & \\color{red}{\\underline{\\mathbf{F} }}\\end{array}} ] Notice in both the effect of table_bool_abbreviate:true .","title":"Tables"},{"location":"Authoring/Tables/#tables","text":"STACK provides an intert function table for typesetting mathematical tables, provided originally to typeset truth tables in Propositional Logic . You can create a table directly. Notice the first row is a heading row. T0:table([x,x^3],[-1,-1],[0,0],[1,1],[2,8],[3,27]); Really, the table operator does nothing (very much like a matrix). Like a matrix, the arguments must be identical length lists. However, there are some special rules for the tex display. The first row is considered to be a heading, and a horizontal line is printed after the first row. There are vertical bars between internal columns of the table. There are currently no options for customising printing of borders, etc. You can highlight entries in the table using the command texcolor(\"col\", ex) . Note however, this will also underline any entries (as colour alone is poor accessibility practice.). The table T0 is displayed as [ {\\begin{array}{c|c} x & x^3\\ \\hline -1 & -1 \\ 0 & 0 \\ 1 & 1 \\ 2 & 8 \\ 3 & 27\\end{array}} ]. table_bool_abbreviate:true is a boolean variable. If set to true (the default) boolean entries true/false will be abbreviated to T/F respectively when creating the LaTeX for display, to keep the table small and tidy looking. All other entries in the table are typeset normally. This only affects the LaTeX display, and table entries remain boolean. table_zip_with(fn, T1, T2) combines two tables, using the binary function fn (much as zip_with combines two lists). It is instructive to look at the code for table_difference which colours entries which differ in red. table_difference(T1, T2) := table_zip_with(lambda([ex1,ex2], if ex1=ex2 then ex1 else texcolor(\"red\", ex1)), T1, T2)$ This shows which elements of T1 differ from the corresponding elements of T2 by returning elements of T1 coloured in red. If you want to identify which entries really are different then you could do something like the following. table_zip_with(lambda([ex1,ex2], is(ex1=ex2)), T1, T2) If you find yourself manipulating tables, the above funtion provides a starting point. Please ask the developers to add anything you use regularly.","title":"Tables"},{"location":"Authoring/Tables/#examples","text":"You can create a table via some code such as the following. Notice the use of the list constructor function \"[\" within the zip_with command. vals:[-1,0,1,2,3]; fn(ex):=ex^3; T0:apply(table, append([[x,fn(x)]], zip_with(\"[\", vals, maplist(fn, vals)))); As a question variable, or directly within CAStext. T1:truth_table(a implies b); T2:table_difference(truth_table(a xor b), truth_table(a implies b)); Here we have two tables T1 is displayed as [ {\\begin{array}{c|c|c} a & b & a\\rightarrow b\\ \\hline \\mathbf{F} & \\mathbf{F} & \\mathbf{T} \\ \\mathbf{F} & \\mathbf{T} & \\mathbf{T} \\ \\mathbf{T} & \\mathbf{F} & \\mathbf{F} \\ \\mathbf{T} & \\mathbf{T} & \\mathbf{T} \\end{array}} ] and T2 gives [ {\\begin{array}{c|c|c} a & b & \\color{red}{\\underline{a\\oplus b}}\\ \\hline \\mathbf{F} & \\mathbf{F} & \\color{red}{\\underline{\\mathbf{F} }} \\ \\mathbf{F} & \\mathbf{T} & \\mathbf{T} \\ \\mathbf{T} & \\mathbf{F} & \\color{red}{\\underline{\\mathbf{T} }} \\ \\mathbf{T} & \\mathbf{T} & \\color{red}{\\underline{\\mathbf{F} }}\\end{array}} ] Notice in both the effect of table_bool_abbreviate:true .","title":"Examples."},{"location":"Authoring/Testing/","text":"Testing, debugging and quality control This page deals with testing questions and quality control. This is largely done through the question test functionality. High-quality question production needs care at each stage. An authoring workflow is described separately. We have separate advice on fixing broken questions in a live quiz. Testing for quality control It is important to test questions to ensure they work correctly. One approach would be for the teacher to repeatedly test them with various random numbers and inputs. But this is inefficient and unreliable. Question Tests provide an automated mechanism through which the author may establish with confidence that the Potential Response Trees are processing the student answer as expected. They are based on the concept of \"unit testing\" from software development. Question variables can be included in the tests; indeed these are needed to define test inputs in the context of random values. Each test assigns values to any/all of the inputs. These values may, naturally, depend on the question variables . values for the score and any penalty. Answer notes from each of the potential response trees . The teacher can opt to run the question tests from the preview window. STACK automatically takes each test, assigns the values to inputs and attempts to submit it. The results of the last answer note from each potential response tree is compared to that specified by the teacher. Notice that this is a limitation of the system. Specifying the complete route through the potential response tree would be too difficult and would discourage teachers from writing tests. If the score, penalty and answer note generated by each potential response tree matches that specified by the teacher, then the test will PASS, otherwise the test will FAIL. Note that failure of a test is a mismatch between outputs and expected outputs, not necessarily a sign that something is wrong with the question itself! The teacher can also examine by hand the outcomes generated by each step of each test, including full feedback generated. In this way, the teacher can record, within the question itself, how they expect the marking scheme to work for a variety of student answers. Writing tests Author and save your question. From the Question bank, choose the Preview option. The Preview question window will open. If you have authority to edit the question, then the top right of the question window will contain a link to question tests and deployed variants... . Follow this link. This page manages both question tests and deployed variants. Initially you will have no tests or deployed variants. Choose Add a test case... Specify values for each input. This may use the question variables. The values of these variables will be used for any random variants. Specify the expected outcomes for each potential response tree. This includes the score, penalty and answer note. Note : currently only the last Answer Note, not the whole path through the potential response tree, is examined. This is a limitation. Once you have added the test case, STACK will automatically validate and submit these responses and display the outcomes. You may add as many test cases are you need. It is sensible to add in the following. The correct response. There is a button which will copy the expression used as the \"Teacher's answer\" in the input as a basis for a test case to help create this test. One example of each distinction you wish to make, i.e. if you have added specific feedback then provide an answer you expect to trigger this. Some \"invalid\" responses, especially if these are syntactically-valid expressions. E.g. If the answer is an equation such as (y=2x+1), then (2x+1) might be invalid if you have chosen the input option \"check types\". Adding a test case is useful to confirm this potential problem is caught by the question. Leave the fields empty and the answer note NULL to indicate this. Add a totally incorrect answer. If you leave the penalty field blank it will assume you mean the default penalty for the question. On the question testing page is a \"Send to CAS\" button. Pressing this sends the question variables and general feedback to a special page which enables more efficient authoring of the feedback in the context of the values of the variables. You still need to copy this by hand into the question edit form when you are satisfied. A Moodle administrator can run all of the questions tests within a particular course, or across the whole site by following the links on the STACK admin page. It is useful do to this after upgrading the STACK code on the server to identify any test cases which have changed. Test cases can include a meaningful description of up to 255 characters. This field is a simple string, and is not castext. Test case construction and Maxima evaluation Test cases are always written assuming simp:false regardless of the option set elsewhere. If you want to construct a simplified test case then wrap this in ev(... , simp) to simplify the expression generating the test case. This behaviour is required to enable construction of unsimplified test cases. You can (and should) constuct test cases based on invalid expressions. If the raw testcase expression cannot be sent to the CAS, e.g. a missing bracket, then this invalidity will be tested. While test case construction uses simp:false Maxima must \"evaluate\" the expression prior to the result being used by an input as a test case. This will replace variables by their values. E.g. the typical case is to define a variable such as ta as the teacher's answer in the question variables field and use this throughout the question. This answer will either be simplified, or not, when the question variables are evaluated. To construct a test case using the teacher's answer use ta as the test case input. It is easier to create a number of variables in the question variables field for wrong answers, e.g. wa1 , wa2 , and construct the test cases in the question variables in advance. For matrix inputs the test case must be a correct Maxima statement, e.g. matrix([1,2],[2,3]) . There is currently no option to construct test cases by filling in individual input boxes here, which restricts the ability to create test cases of individual syntactically invalid matrix entries. Similarly, for the textarea and equivalence reasoning input types the test case should be constructed as a list, just as the teacher's answer field is constructed. Some evaluations in Maxima do actually more than just replace existing variables with the values from the question variables. For example, in Maxima try simp:false; f:x*sin(1/x); limit(f,x,0); Notice here, that while simp:false the limit is still evaluated. This is not \"simplification\". For the full story, please refer to the Maxima docs on the ev command. In this case, you can prevent evaluation of limits by using an apostrophie in the test case construction to prevent evaluation. simp:false; f:x*sin(1/x); 'limit(f,x,0); Test case construction and MCQ Remember that MCQ input types return a CAS expression. However, you must ensure each testcase actually corresponds to an option provided to the student, otherwise STACK will generate a runtime error. Hence you cannot construct a test case from the list provided as the \"Teacher's answer\" in these input types! It is sensible to use the helper functions. E.g. for a radio/dropdown use tc1:first(mcq_correct(ta)); For the checkbox type you will need the whole list. tc1:mcq_correct(ta); Test case construction and numerical precision. You can construct test cases using the functions such as dispdp to create a test-case input with trailing zeros. This is neeeded if the input, or answer test, is testing for a minimum number of decimal places or significant figures. Testing values of variables STACK provides a special function s_assert(ex1, ex2) which can be used in the question variables and feedback variables. If is(ex1=ex2) does not evaluate to true then this function throws a maxima error message. This can be used to create a run-time error and prevent a question, and a particular variant, being used. For example, if you have an expression 1/n and the variable n is randomly generated you need to prevent a random version being zero. In this case put the following in the question variables. s_assert(is(n=0), false); This test will throw an error when n is zero. In many situations this kind of test creation will be simpler than mapping onto student inputs. STACK-Maxima sandbox It is very useful to be able to use the desktop Maxima application to test questions. To do this it is very helpful to load all the STACK libraries. Details on how to do this are in the STACK-Maxima sandbox page. Simplification ## {#Simplification} You can set global simplification flags in two places within questions: Globally in the question. In each potential response tree. Regardless of what settings you use here the expressions you enter for inputs in question tests are not simplified. This is necessary. For example, if your question is \"what is ({@a@}+{@b@})?\" where {@a@} and {@b@} are randomly generated. You will need to set the question level option simplify:false to prevent the student typing in the sum itself as an answer. Then you will probably need separate tests for the expressions a+b and ev(a+b,simp) to make sure the student hasn't typed in the sum instead of the value of the sum. For this reason, to enable \"unsimplified\" expressions to be included as question tests we do not simplify test inputs regardless of the options used in the question. If you have set simplify:true everywhere in your question, and you are only establishing algebraic equivalence of your answers anyway, \"un-simplified\" expressions as inputs to the tests will not matter. Next steps When you are done testing a question which uses randomization, you need to deploy variants of the question.","title":"Testing, debugging and quality control"},{"location":"Authoring/Testing/#testing-debugging-and-quality-control","text":"This page deals with testing questions and quality control. This is largely done through the question test functionality. High-quality question production needs care at each stage. An authoring workflow is described separately. We have separate advice on fixing broken questions in a live quiz.","title":"Testing, debugging and quality control"},{"location":"Authoring/Testing/#testing-for-quality-control","text":"It is important to test questions to ensure they work correctly. One approach would be for the teacher to repeatedly test them with various random numbers and inputs. But this is inefficient and unreliable. Question Tests provide an automated mechanism through which the author may establish with confidence that the Potential Response Trees are processing the student answer as expected. They are based on the concept of \"unit testing\" from software development. Question variables can be included in the tests; indeed these are needed to define test inputs in the context of random values. Each test assigns values to any/all of the inputs. These values may, naturally, depend on the question variables . values for the score and any penalty. Answer notes from each of the potential response trees . The teacher can opt to run the question tests from the preview window. STACK automatically takes each test, assigns the values to inputs and attempts to submit it. The results of the last answer note from each potential response tree is compared to that specified by the teacher. Notice that this is a limitation of the system. Specifying the complete route through the potential response tree would be too difficult and would discourage teachers from writing tests. If the score, penalty and answer note generated by each potential response tree matches that specified by the teacher, then the test will PASS, otherwise the test will FAIL. Note that failure of a test is a mismatch between outputs and expected outputs, not necessarily a sign that something is wrong with the question itself! The teacher can also examine by hand the outcomes generated by each step of each test, including full feedback generated. In this way, the teacher can record, within the question itself, how they expect the marking scheme to work for a variety of student answers.","title":"Testing for quality control"},{"location":"Authoring/Testing/#writing-tests","text":"Author and save your question. From the Question bank, choose the Preview option. The Preview question window will open. If you have authority to edit the question, then the top right of the question window will contain a link to question tests and deployed variants... . Follow this link. This page manages both question tests and deployed variants. Initially you will have no tests or deployed variants. Choose Add a test case... Specify values for each input. This may use the question variables. The values of these variables will be used for any random variants. Specify the expected outcomes for each potential response tree. This includes the score, penalty and answer note. Note : currently only the last Answer Note, not the whole path through the potential response tree, is examined. This is a limitation. Once you have added the test case, STACK will automatically validate and submit these responses and display the outcomes. You may add as many test cases are you need. It is sensible to add in the following. The correct response. There is a button which will copy the expression used as the \"Teacher's answer\" in the input as a basis for a test case to help create this test. One example of each distinction you wish to make, i.e. if you have added specific feedback then provide an answer you expect to trigger this. Some \"invalid\" responses, especially if these are syntactically-valid expressions. E.g. If the answer is an equation such as (y=2x+1), then (2x+1) might be invalid if you have chosen the input option \"check types\". Adding a test case is useful to confirm this potential problem is caught by the question. Leave the fields empty and the answer note NULL to indicate this. Add a totally incorrect answer. If you leave the penalty field blank it will assume you mean the default penalty for the question. On the question testing page is a \"Send to CAS\" button. Pressing this sends the question variables and general feedback to a special page which enables more efficient authoring of the feedback in the context of the values of the variables. You still need to copy this by hand into the question edit form when you are satisfied. A Moodle administrator can run all of the questions tests within a particular course, or across the whole site by following the links on the STACK admin page. It is useful do to this after upgrading the STACK code on the server to identify any test cases which have changed. Test cases can include a meaningful description of up to 255 characters. This field is a simple string, and is not castext.","title":"Writing tests"},{"location":"Authoring/Testing/#test-case-construction-and-maxima-evaluation","text":"Test cases are always written assuming simp:false regardless of the option set elsewhere. If you want to construct a simplified test case then wrap this in ev(... , simp) to simplify the expression generating the test case. This behaviour is required to enable construction of unsimplified test cases. You can (and should) constuct test cases based on invalid expressions. If the raw testcase expression cannot be sent to the CAS, e.g. a missing bracket, then this invalidity will be tested. While test case construction uses simp:false Maxima must \"evaluate\" the expression prior to the result being used by an input as a test case. This will replace variables by their values. E.g. the typical case is to define a variable such as ta as the teacher's answer in the question variables field and use this throughout the question. This answer will either be simplified, or not, when the question variables are evaluated. To construct a test case using the teacher's answer use ta as the test case input. It is easier to create a number of variables in the question variables field for wrong answers, e.g. wa1 , wa2 , and construct the test cases in the question variables in advance. For matrix inputs the test case must be a correct Maxima statement, e.g. matrix([1,2],[2,3]) . There is currently no option to construct test cases by filling in individual input boxes here, which restricts the ability to create test cases of individual syntactically invalid matrix entries. Similarly, for the textarea and equivalence reasoning input types the test case should be constructed as a list, just as the teacher's answer field is constructed. Some evaluations in Maxima do actually more than just replace existing variables with the values from the question variables. For example, in Maxima try simp:false; f:x*sin(1/x); limit(f,x,0); Notice here, that while simp:false the limit is still evaluated. This is not \"simplification\". For the full story, please refer to the Maxima docs on the ev command. In this case, you can prevent evaluation of limits by using an apostrophie in the test case construction to prevent evaluation. simp:false; f:x*sin(1/x); 'limit(f,x,0);","title":"Test case construction and Maxima evaluation"},{"location":"Authoring/Testing/#test-case-construction-and-mcq","text":"Remember that MCQ input types return a CAS expression. However, you must ensure each testcase actually corresponds to an option provided to the student, otherwise STACK will generate a runtime error. Hence you cannot construct a test case from the list provided as the \"Teacher's answer\" in these input types! It is sensible to use the helper functions. E.g. for a radio/dropdown use tc1:first(mcq_correct(ta)); For the checkbox type you will need the whole list. tc1:mcq_correct(ta);","title":"Test case construction and MCQ"},{"location":"Authoring/Testing/#test-case-construction-and-numerical-precision","text":"You can construct test cases using the functions such as dispdp to create a test-case input with trailing zeros. This is neeeded if the input, or answer test, is testing for a minimum number of decimal places or significant figures.","title":"Test case construction and numerical precision."},{"location":"Authoring/Testing/#testing-values-of-variables","text":"STACK provides a special function s_assert(ex1, ex2) which can be used in the question variables and feedback variables. If is(ex1=ex2) does not evaluate to true then this function throws a maxima error message. This can be used to create a run-time error and prevent a question, and a particular variant, being used. For example, if you have an expression 1/n and the variable n is randomly generated you need to prevent a random version being zero. In this case put the following in the question variables. s_assert(is(n=0), false); This test will throw an error when n is zero. In many situations this kind of test creation will be simpler than mapping onto student inputs.","title":"Testing values of variables"},{"location":"Authoring/Testing/#stack-maxima-sandbox","text":"It is very useful to be able to use the desktop Maxima application to test questions. To do this it is very helpful to load all the STACK libraries. Details on how to do this are in the STACK-Maxima sandbox page.","title":"STACK-Maxima sandbox"},{"location":"Authoring/Testing/#simplification-simplification","text":"You can set global simplification flags in two places within questions: Globally in the question. In each potential response tree. Regardless of what settings you use here the expressions you enter for inputs in question tests are not simplified. This is necessary. For example, if your question is \"what is ({@a@}+{@b@})?\" where {@a@} and {@b@} are randomly generated. You will need to set the question level option simplify:false to prevent the student typing in the sum itself as an answer. Then you will probably need separate tests for the expressions a+b and ev(a+b,simp) to make sure the student hasn't typed in the sum instead of the value of the sum. For this reason, to enable \"unsimplified\" expressions to be included as question tests we do not simplify test inputs regardless of the options used in the question. If you have set simplify:true everywhere in your question, and you are only establishing algebraic equivalence of your answers anyway, \"un-simplified\" expressions as inputs to the tests will not matter.","title":"Simplification ## {#Simplification}"},{"location":"Authoring/Testing/#next-steps","text":"When you are done testing a question which uses randomization, you need to deploy variants of the question.","title":"Next steps"},{"location":"Authoring/Trees/","text":"Trees It is sometime very useful to display the tree structure of an algebraic expression to a student. For example, the HTML code for the tree of (1+2x^3) is given below. <ul class='tree'> <li><code>+</code> <ul> <li><span class='atom'>\\(1\\)</span></li> <li><code>*</code> <ul><li><span class='atom'>\\(2\\)</span></li> <li><code>^</code> <ul> <li><span class='atom'>\\(x\\)</span></li> <li><span class='atom'>\\(3\\)</span></li> </ul> </li> </ul> </li> </ul> </li> </ul> This is displayed as follows. + \\(1\\) * \\(2\\) ^ \\(x\\) \\(3\\) The tree is displayed in pure HTML using unordered lists <ul> and styled with CSS via the <ul class='tree'> . Therefore, such trees could be written in HTML by hand. STACK provides a function disptree to generate the above tree diagram from a Maxima expression. For example, use {@disptree(1+2+pi*x^3)@} in castext. This function generates a string representing the tree of that expression, and is not an inert function. STACK provides a function treestop to stop traversing the tree, and use the LaTeX of the subexpression instead. For example in disptree(1/treestop(1+x^2)=4) STACK produces a tree but one node has (1+x^2), rather than also showing the subtree of this expression as well. This gives the user some control over the complexity of tree and what to display. = / \\(1\\) \\(1+x^2\\) \\(4\\) Note, because of the HTML generated, and the LaTeX inside the tree HTML, you cannot embed these trees inside displayed LaTeX using \\[ ... \\] . The only way to display a tree is using {@disptree(....)@} as an isolated mathematical expression. Examples To see the tree structure of the binomial theorem (with simp:false ) {@disptree(apply(\"+\",map(lambda([ex],binomial(n,ex)*x^ex), ev(makelist(k,k,0,5),simp))))@} Educational value of trees Seeing the explicit tree structure of an expression has significant educational value at certain moments. E.g. students want to type x=a or b as an answer. The following illustrates why they need to write x=(a or b) or x=a or x=b instead! p1:x=a nounor b; p2:x=(a nounor b); with the following castext: {@p1@}: {@disptree(p1)@} <br/> {@p2@}: {@disptree(p2)@} (with simp:false ). Styles In order to correctly display list items within the <ul class='tree'> list, additional styling is needed. All list items must be styled with one of the following tags. The Maxima code ensures that operator nodes are styled slightly differently from atoms/terminal nodes. Some operators, such as integrals and sums, have special style rules applied. <code> is used to display operators as html code. <span class='op'> is used to display operators as LaTeX. <span class='atom'> is used to display atoms and terminal nodes. <span class='cell'> has minimal style, and is not used by the Maxima code. This is intended for general use. The code does its best to respest the LaTeX output. If you create special tex rules using texput you also have to tell the tree generation code to look for this rule. STACK has a set tree_texlist of operators to which special rules apply. To add a rule use the following. texput(boo, \"\\\\diamond\"); tree_texlist:union(tree_texlist,{\"boo\"}); Then, the operator boo will be typeset as (\\diamond) in tree output, as well as in tex output. E.g. try the following castext: {@disptree(boo(a,b))@} .","title":"Trees"},{"location":"Authoring/Trees/#trees","text":"It is sometime very useful to display the tree structure of an algebraic expression to a student. For example, the HTML code for the tree of (1+2x^3) is given below. <ul class='tree'> <li><code>+</code> <ul> <li><span class='atom'>\\(1\\)</span></li> <li><code>*</code> <ul><li><span class='atom'>\\(2\\)</span></li> <li><code>^</code> <ul> <li><span class='atom'>\\(x\\)</span></li> <li><span class='atom'>\\(3\\)</span></li> </ul> </li> </ul> </li> </ul> </li> </ul> This is displayed as follows. + \\(1\\) * \\(2\\) ^ \\(x\\) \\(3\\) The tree is displayed in pure HTML using unordered lists <ul> and styled with CSS via the <ul class='tree'> . Therefore, such trees could be written in HTML by hand. STACK provides a function disptree to generate the above tree diagram from a Maxima expression. For example, use {@disptree(1+2+pi*x^3)@} in castext. This function generates a string representing the tree of that expression, and is not an inert function. STACK provides a function treestop to stop traversing the tree, and use the LaTeX of the subexpression instead. For example in disptree(1/treestop(1+x^2)=4) STACK produces a tree but one node has (1+x^2), rather than also showing the subtree of this expression as well. This gives the user some control over the complexity of tree and what to display. = / \\(1\\) \\(1+x^2\\) \\(4\\) Note, because of the HTML generated, and the LaTeX inside the tree HTML, you cannot embed these trees inside displayed LaTeX using \\[ ... \\] . The only way to display a tree is using {@disptree(....)@} as an isolated mathematical expression.","title":"Trees"},{"location":"Authoring/Trees/#examples","text":"To see the tree structure of the binomial theorem (with simp:false ) {@disptree(apply(\"+\",map(lambda([ex],binomial(n,ex)*x^ex), ev(makelist(k,k,0,5),simp))))@}","title":"Examples"},{"location":"Authoring/Trees/#educational-value-of-trees","text":"Seeing the explicit tree structure of an expression has significant educational value at certain moments. E.g. students want to type x=a or b as an answer. The following illustrates why they need to write x=(a or b) or x=a or x=b instead! p1:x=a nounor b; p2:x=(a nounor b); with the following castext: {@p1@}: {@disptree(p1)@} <br/> {@p2@}: {@disptree(p2)@} (with simp:false ).","title":"Educational value of trees"},{"location":"Authoring/Trees/#styles","text":"In order to correctly display list items within the <ul class='tree'> list, additional styling is needed. All list items must be styled with one of the following tags. The Maxima code ensures that operator nodes are styled slightly differently from atoms/terminal nodes. Some operators, such as integrals and sums, have special style rules applied. <code> is used to display operators as html code. <span class='op'> is used to display operators as LaTeX. <span class='atom'> is used to display atoms and terminal nodes. <span class='cell'> has minimal style, and is not used by the Maxima code. This is intended for general use. The code does its best to respest the LaTeX output. If you create special tex rules using texput you also have to tell the tree generation code to look for this rule. STACK has a set tree_texlist of operators to which special rules apply. To add a rule use the following. texput(boo, \"\\\\diamond\"); tree_texlist:union(tree_texlist,{\"boo\"}); Then, the operator boo will be typeset as (\\diamond) in tree output, as well as in tex output. E.g. try the following castext: {@disptree(boo(a,b))@} .","title":"Styles"},{"location":"Authoring/Variables/","text":"Defining variables There are two fields which allow you to define and manipulate computer algebra system variables. These are called the Question Variables and Feedback variables. The field is a string which contains a list of assignments of the form key : value; for example p : (x-1)^3; Each key is the name of a variable local to the question, and value is an expression in Maxima's language. When evaluated, this list is passed to the CAS, and evaluated in order. The value obtained for each key will be stored and used later, for example in the question marking routines. The keys need not be unique, although only the last value will be available for use later. These fields are known as KeyVal fields. Maxima's assignments a:3 Computer algebra systems each use a different syntax to denote the assignment of a value to a variable. For example, Maple and Derive use := . Mathematica uses = or := , depending on when the assignment is to take place. Maxima uses the form key:value , which is unusual and not intuitive. Maxima reserves := to denote function definition, e.g. f(x):=x^2 . STACK uses Maxima's assignment rules. Notes Items are separated by either a newline or ; . Adding ; at the end of each statement is optional, but makes it easier to cut and paste into a Maxima session. Please add these. If you type a string not in the form key : value , a variable name such as dumvar3 will be assigned automatically to keep track of the command in the list of question variables. The key must be a simple variable name. It must start with letters, and can contain numbers and underscore characters. If a student uses a variable which has been assigned a value in the question variables then the attempt will be rejected as invalid. You can use the \"allowed words\" to enable students' expressions with question variables to be considered valid. Hence, it is a sensible idea to use variable names which are not used as parameters in the question, or likely to occur in the student's answer. For example if you set an integration question then you should avoid using the variable c , otherwise students won't be able to write +c in the normal way to indicate a constant of integration. You can include C-style block comments for increased clarity, and these may appear on separate lines e.g. dice : rand(6) + 1; /* roll it! */ Do not define a feedback variable with the same name as an input. For example, if your input is ans1 then you cannot define a feedback variable ans1:exdowncase(ans1) . Choose something different, e.g. ansmod1:exdowncase(ans1) Variables de Pregunta {#Question_variables} The question variables are evaluated when a variant of a question is created. The displayed forms are available to all other CASText fields and the values to other parts of the question, e.g. Teacher's answers in inputs are defined in terms of question variables. Question note . General feedback (also known as the worked solution). All fields in each of the potential response tree . Each input when testing the item. Question variables are not available to inputs when a student is validating their answer, unless special ``context variables'' are defined. Context variables If the following commands appear within the question variables they will be available in every part of the question, in particular these commands will affect how students' input is validated. This enables teachers to affect the display of the student's answer validation, and add assumptions to PRTs. orderless and ordergreat . These commands may only appear once each in any question. assume and declare . texput , see notes directly below. This collection of special variables are called \"context variables\". Only single texput commands are gathered into the context variables. You cannot use other variables or other functions defined in the question variables. So, texput(blob, \"\\\\diamond\") is fine, but passing a function to texput to display more complex output is not currently supported. For example, to redefine how the logarithm is displayed, use texput(log, \"\\\\log \", prefix); . It is possible to use an unnamed lambda function. E.g. if you have a function tup then texput(tup, lambda([z], block([a,b], [a,b]:args(z), sconcat(\"\\\\left[\",tex1(a),\",\",tex1(b),\"\\\\right)\")))); will display tup(a,b) as ( \\left[a,b\\right) ). As a more complicated example, to typeset u(A_k,k,1,inf) as ({\\bigcup_{k = 1}^{\\infty } {A}_{k}}) you can use the following: texput(u,lambda([ex],if length(ex)<4 then return(\"\\\\bigcup_{?=?}^{?} ? \") else sconcat(\"\\\\bigcup_{\" ,tex1(second(ex)), \" = \", tex1(third(ex)), \"}^{\", tex1(fourth(ex)), \"} \", tex1(first(ex))))); Notice in this example how we check the length of the arguments supplied to the (inert) function u . If there are fewer than the required number of arguments then this texput function returns something sensible. Without this clause you get errors, which would be unhelpful to a student trying to type this in. Feedback variables {#Feedback_variables} The feedback variables form one field in the potential response tree . When using the potential response tree it is often very useful to manipulate the student's answer before applying any of the Answer tests . This gives the opportunity to perform sophisticated mathematical operations. Before each answer test is applied the following list of variables is assembled and evaluated The values of the question variables. The values of each inputs . The feedback variables. The values of the evaluated feedback variables can be used as expressions in the answer tests and in the feedback. Note, you cannot redefine the value of an input as a key in the feedback variables. e.g. you cannot have something like ans1:ans1+1 . You must use a new variable name. When an answer test is evaluated, if the SA or TA field is exactly the name of an input then the raw student's value is used, and not the value from the feedback variables. This is because some of the answer tests require exactly what is typed (e.g. trailing zeros) and not the value through the CAS. To avoid this problem authors must use new variable names to distinguish between the actual input typed by the student and any calculated value. Creating variable names Teachers may not use the Maxima 'concat' command, so you cannot create variable names of your own using code of the following form. vars:makelist(concat(x,k),k,1,5); Instead use vars0:stack_var_makelist(k, 5); If you want to start numbering at 1 instead of 0, use vars1:rest(stack_var_makelist(k, 6));","title":"Defining variables"},{"location":"Authoring/Variables/#defining-variables","text":"There are two fields which allow you to define and manipulate computer algebra system variables. These are called the Question Variables and Feedback variables. The field is a string which contains a list of assignments of the form key : value; for example p : (x-1)^3; Each key is the name of a variable local to the question, and value is an expression in Maxima's language. When evaluated, this list is passed to the CAS, and evaluated in order. The value obtained for each key will be stored and used later, for example in the question marking routines. The keys need not be unique, although only the last value will be available for use later. These fields are known as KeyVal fields.","title":"Defining variables"},{"location":"Authoring/Variables/#maximas-assignments-a3","text":"Computer algebra systems each use a different syntax to denote the assignment of a value to a variable. For example, Maple and Derive use := . Mathematica uses = or := , depending on when the assignment is to take place. Maxima uses the form key:value , which is unusual and not intuitive. Maxima reserves := to denote function definition, e.g. f(x):=x^2 . STACK uses Maxima's assignment rules.","title":"Maxima's assignments a:3"},{"location":"Authoring/Variables/#notes","text":"Items are separated by either a newline or ; . Adding ; at the end of each statement is optional, but makes it easier to cut and paste into a Maxima session. Please add these. If you type a string not in the form key : value , a variable name such as dumvar3 will be assigned automatically to keep track of the command in the list of question variables. The key must be a simple variable name. It must start with letters, and can contain numbers and underscore characters. If a student uses a variable which has been assigned a value in the question variables then the attempt will be rejected as invalid. You can use the \"allowed words\" to enable students' expressions with question variables to be considered valid. Hence, it is a sensible idea to use variable names which are not used as parameters in the question, or likely to occur in the student's answer. For example if you set an integration question then you should avoid using the variable c , otherwise students won't be able to write +c in the normal way to indicate a constant of integration. You can include C-style block comments for increased clarity, and these may appear on separate lines e.g. dice : rand(6) + 1; /* roll it! */ Do not define a feedback variable with the same name as an input. For example, if your input is ans1 then you cannot define a feedback variable ans1:exdowncase(ans1) . Choose something different, e.g. ansmod1:exdowncase(ans1)","title":"Notes"},{"location":"Authoring/Variables/#variables-de-pregunta-question_variables","text":"The question variables are evaluated when a variant of a question is created. The displayed forms are available to all other CASText fields and the values to other parts of the question, e.g. Teacher's answers in inputs are defined in terms of question variables. Question note . General feedback (also known as the worked solution). All fields in each of the potential response tree . Each input when testing the item. Question variables are not available to inputs when a student is validating their answer, unless special ``context variables'' are defined.","title":"Variables de Pregunta {#Question_variables}"},{"location":"Authoring/Variables/#context-variables","text":"If the following commands appear within the question variables they will be available in every part of the question, in particular these commands will affect how students' input is validated. This enables teachers to affect the display of the student's answer validation, and add assumptions to PRTs. orderless and ordergreat . These commands may only appear once each in any question. assume and declare . texput , see notes directly below. This collection of special variables are called \"context variables\". Only single texput commands are gathered into the context variables. You cannot use other variables or other functions defined in the question variables. So, texput(blob, \"\\\\diamond\") is fine, but passing a function to texput to display more complex output is not currently supported. For example, to redefine how the logarithm is displayed, use texput(log, \"\\\\log \", prefix); . It is possible to use an unnamed lambda function. E.g. if you have a function tup then texput(tup, lambda([z], block([a,b], [a,b]:args(z), sconcat(\"\\\\left[\",tex1(a),\",\",tex1(b),\"\\\\right)\")))); will display tup(a,b) as ( \\left[a,b\\right) ). As a more complicated example, to typeset u(A_k,k,1,inf) as ({\\bigcup_{k = 1}^{\\infty } {A}_{k}}) you can use the following: texput(u,lambda([ex],if length(ex)<4 then return(\"\\\\bigcup_{?=?}^{?} ? \") else sconcat(\"\\\\bigcup_{\" ,tex1(second(ex)), \" = \", tex1(third(ex)), \"}^{\", tex1(fourth(ex)), \"} \", tex1(first(ex))))); Notice in this example how we check the length of the arguments supplied to the (inert) function u . If there are fewer than the required number of arguments then this texput function returns something sensible. Without this clause you get errors, which would be unhelpful to a student trying to type this in.","title":"Context variables"},{"location":"Authoring/Variables/#feedback-variables-feedback_variables","text":"The feedback variables form one field in the potential response tree . When using the potential response tree it is often very useful to manipulate the student's answer before applying any of the Answer tests . This gives the opportunity to perform sophisticated mathematical operations. Before each answer test is applied the following list of variables is assembled and evaluated The values of the question variables. The values of each inputs . The feedback variables. The values of the evaluated feedback variables can be used as expressions in the answer tests and in the feedback. Note, you cannot redefine the value of an input as a key in the feedback variables. e.g. you cannot have something like ans1:ans1+1 . You must use a new variable name. When an answer test is evaluated, if the SA or TA field is exactly the name of an input then the raw student's value is used, and not the value from the feedback variables. This is because some of the answer tests require exactly what is typed (e.g. trailing zeros) and not the value through the CAS. To avoid this problem authors must use new variable names to distinguish between the actual input typed by the student and any calculated value.","title":"Feedback variables {#Feedback_variables}"},{"location":"Authoring/Variables/#creating-variable-names","text":"Teachers may not use the Maxima 'concat' command, so you cannot create variable names of your own using code of the following form. vars:makelist(concat(x,k),k,1,5); Instead use vars0:stack_var_makelist(k, 5); If you want to start numbering at 1 instead of 0, use vars1:rest(stack_var_makelist(k, 6));","title":"Creating variable names"},{"location":"Authoring/Workflow/","text":"Question authoring workflow This document contains suggestions for effective question authoring workflow, especially when working collaboratively. 1. Minimal working question The first task is to create a minimal working question. At the outset add minimal question variables to prevent repetition of information in the \"Model answer\" field of the inputs, and PRT nodes; use question variables for key information in the question, especially if you intend to create random variants later; add minimal feedback in the PRTs. It is helpful if the question name is meaningful and consistent in a course. E.g. it can match up to course, section and topic. E.g. 2018ILA-Wk3-Q2: equation of plane . This makes finding questions later much easier. Create any multi-parts needed, but we recommend at this stage not to add random variants. Random variants will be added later. If you already have a good idea of common mistakes, misconception, or intended feedback then you can use the potential response trees to test for this. This can be added now, however it might be better to wait until step 5 below to add feedback. Consider Is the phrasing of the question clear to students? Will students know how to input an answer? Could a \"syntax hint\" or message in the question help? Can \"validation\" help, e.g. by telling students how many significant figures are expected? Advanced users might consider bespoke validation functions. 2. Add basic question tests It is important to test questions for quality control, as described in the testing documentation. Navigate to the \"STACK question dashboard\" page by following the link at the top of the question editing page, or on the preview page. At this stage the preview question page will warn \"Question is missing tests or variants.\" We recommend the following two test cases: Ensure what you have given in the inputs as the \"Model answer\" is really awarded full marks by your PRT. Ensure that not every answer is given full marks! The STACK question dashboard makes it relatively easy to check the mode answer: press the button marked \"Add test case assuming teacher's answer gets full marks\". You will have to think about an answer which is wrong, and the format of this will depend on the types of inputs used. 3. Write a robust worked solution From the STACK question dashboard follow the link to \"Send general feedback to the CAS\". This is a special page, only available to the STACK question type. The page is loaded with the question variables, model answers, and the general feedback (worked solution) fields. The page allows you to immediately preview the general feedback, edit variables, and then preview the instantiated general feedback. Add in further question variables, calculations etc. as needed and use these in the worked solution. An effective way to create equivalent random variants is to ensure invariance of the worked solution. If you cannot create a single worked solution for all variants then you can consider using question blocks, or separate questions and selecting questions in the quiz. A single question need not be the most general possible. Once the you are happy with the general feedback press the \"Save back to question\" button. This replaces the question variables and general feedback. Be aware that if you still have the edit form open, and you subsequently save the edit form again, then you will replace your question variables and general feedback with the contents of the edit form. 4. Add random variants If you need to do so, at this point add in random variants. Edit the question variables to add in randomisation (if you did not do so in step 3.) Add a question note. Return to the Stack question dashboard and deploy variants . The STACK question dashboard link on the edit form will change to \"No variants of this question have been deployed yet.\" to remind you to deploy variants. Confirm any question tests added in step 2 continue to work for all variants. There is a button \"Run all tests on all deployed variants (Slow)\" to help you check this. 5. Add better feedback Add in better feedback to the question. Feedback is likely to be effective when it is specific in helping student improve on the task. It is sensible to use the question variables to create variables for each answer which will trigger feedback. This answer can be based on any random variables, and can be used both in the potential response tree and to create a test case to confirm the feedback and any partial credit is really awarded for each random variant. In theory one test case should be created for each anticipated response which gets feedback. In very complex PRTs this is sometimes not possible/practical. When updating a PRT at this stage we would expect test cases added in step 2 to fail. This is reassuring as it indicates something significant has changed! You can easily confirm the new behaviour of the testcase is now what is intended. 6. Use data obtained from one cycle of attempts by students. Rather than second-guess what students might get wrong it is more effective to look at what they do . See the section on reporting for documentation on how to review students' answers. When feedback/marks are delayed (e.g. online exam) this can be done between students taking the assessment and results being released. If feedback/marks are immediate then better quality feedback can still be usefully added later. Did the question operate correctly? E.g. were correct answers correctly marked, and incorrect answers rejected? What did students get wrong? Is there a reason for these answers such as a common misconception? If so, add nodes to the PRTs to test for this and improve feedback. Add further question tests to test each misconception. Is there any significant difference between random variants? Authoring collaboratively The question description, and descriptions within PRT nodes, can be used to describe intentions and problems to other team members. These fields are only available question authors, and are never shown to students. You can use the [[todo]]...[[/todo]] question block to indicate unfinished questions. Authors with the capability to use the \"STACK diagnostic tools\" can create a list of questions containing this block, making it easy for them to locate questions needing attention. You can use the [[escape]]...[[/escape]] and [[comment]]...[[comment]] blocks to remove broken content which is preventing a question from being saved. Maxima code can be removed with code comments: /* .... */ .","title":"Question authoring workflow"},{"location":"Authoring/Workflow/#question-authoring-workflow","text":"This document contains suggestions for effective question authoring workflow, especially when working collaboratively.","title":"Question authoring workflow"},{"location":"Authoring/Workflow/#1-minimal-working-question","text":"The first task is to create a minimal working question. At the outset add minimal question variables to prevent repetition of information in the \"Model answer\" field of the inputs, and PRT nodes; use question variables for key information in the question, especially if you intend to create random variants later; add minimal feedback in the PRTs. It is helpful if the question name is meaningful and consistent in a course. E.g. it can match up to course, section and topic. E.g. 2018ILA-Wk3-Q2: equation of plane . This makes finding questions later much easier. Create any multi-parts needed, but we recommend at this stage not to add random variants. Random variants will be added later. If you already have a good idea of common mistakes, misconception, or intended feedback then you can use the potential response trees to test for this. This can be added now, however it might be better to wait until step 5 below to add feedback. Consider Is the phrasing of the question clear to students? Will students know how to input an answer? Could a \"syntax hint\" or message in the question help? Can \"validation\" help, e.g. by telling students how many significant figures are expected? Advanced users might consider bespoke validation functions.","title":"1. Minimal working question"},{"location":"Authoring/Workflow/#2-add-basic-question-tests","text":"It is important to test questions for quality control, as described in the testing documentation. Navigate to the \"STACK question dashboard\" page by following the link at the top of the question editing page, or on the preview page. At this stage the preview question page will warn \"Question is missing tests or variants.\" We recommend the following two test cases: Ensure what you have given in the inputs as the \"Model answer\" is really awarded full marks by your PRT. Ensure that not every answer is given full marks! The STACK question dashboard makes it relatively easy to check the mode answer: press the button marked \"Add test case assuming teacher's answer gets full marks\". You will have to think about an answer which is wrong, and the format of this will depend on the types of inputs used.","title":"2. Add basic question tests"},{"location":"Authoring/Workflow/#3-write-a-robust-worked-solution","text":"From the STACK question dashboard follow the link to \"Send general feedback to the CAS\". This is a special page, only available to the STACK question type. The page is loaded with the question variables, model answers, and the general feedback (worked solution) fields. The page allows you to immediately preview the general feedback, edit variables, and then preview the instantiated general feedback. Add in further question variables, calculations etc. as needed and use these in the worked solution. An effective way to create equivalent random variants is to ensure invariance of the worked solution. If you cannot create a single worked solution for all variants then you can consider using question blocks, or separate questions and selecting questions in the quiz. A single question need not be the most general possible. Once the you are happy with the general feedback press the \"Save back to question\" button. This replaces the question variables and general feedback. Be aware that if you still have the edit form open, and you subsequently save the edit form again, then you will replace your question variables and general feedback with the contents of the edit form.","title":"3. Write a robust worked solution"},{"location":"Authoring/Workflow/#4-add-random-variants","text":"If you need to do so, at this point add in random variants. Edit the question variables to add in randomisation (if you did not do so in step 3.) Add a question note. Return to the Stack question dashboard and deploy variants . The STACK question dashboard link on the edit form will change to \"No variants of this question have been deployed yet.\" to remind you to deploy variants. Confirm any question tests added in step 2 continue to work for all variants. There is a button \"Run all tests on all deployed variants (Slow)\" to help you check this.","title":"4. Add random variants"},{"location":"Authoring/Workflow/#5-add-better-feedback","text":"Add in better feedback to the question. Feedback is likely to be effective when it is specific in helping student improve on the task. It is sensible to use the question variables to create variables for each answer which will trigger feedback. This answer can be based on any random variables, and can be used both in the potential response tree and to create a test case to confirm the feedback and any partial credit is really awarded for each random variant. In theory one test case should be created for each anticipated response which gets feedback. In very complex PRTs this is sometimes not possible/practical. When updating a PRT at this stage we would expect test cases added in step 2 to fail. This is reassuring as it indicates something significant has changed! You can easily confirm the new behaviour of the testcase is now what is intended.","title":"5. Add better feedback"},{"location":"Authoring/Workflow/#6-use-data-obtained-from-one-cycle-of-attempts-by-students","text":"Rather than second-guess what students might get wrong it is more effective to look at what they do . See the section on reporting for documentation on how to review students' answers. When feedback/marks are delayed (e.g. online exam) this can be done between students taking the assessment and results being released. If feedback/marks are immediate then better quality feedback can still be usefully added later. Did the question operate correctly? E.g. were correct answers correctly marked, and incorrect answers rejected? What did students get wrong? Is there a reason for these answers such as a common misconception? If so, add nodes to the PRTs to test for this and improve feedback. Add further question tests to test each misconception. Is there any significant difference between random variants?","title":"6. Use data obtained from one cycle of attempts by students."},{"location":"Authoring/Workflow/#authoring-collaboratively","text":"The question description, and descriptions within PRT nodes, can be used to describe intentions and problems to other team members. These fields are only available question authors, and are never shown to students. You can use the [[todo]]...[[/todo]] question block to indicate unfinished questions. Authors with the capability to use the \"STACK diagnostic tools\" can create a list of questions containing this block, making it easy for them to locate questions needing attention. You can use the [[escape]]...[[/escape]] and [[comment]]...[[comment]] blocks to remove broken content which is preventing a question from being saved. Maxima code can be removed with code comments: /* .... */ .","title":"Authoring collaboratively"},{"location":"Authoring/Answer_Tests/","text":"Answer tests An answer test is used to compare two expressions to establish whether they satisfy some mathematical criteria. The prototype test is to establish if they are algebraically equivalent . Informally, the answer tests have the following syntax [Errors, Result, FeedBack, Note] = AnswerTest(StudentAnswer, TeacherAnswer, [Opt], [Raw]) Where, Variable Description StudentAnswer A CAS expression, assumed to be the student's answer. TeacherAnswer A CAS expression, assumed to be the model answer. Opt If needed, any options which the specific answer test provides. For example, a variable, the accuracy of the numerical comparison, number of significant figures. Raw If needed, the raw string of the student's input to ensure, e.g. Maxima does not remove trailing zeros when establishing the number of significant figures. Since the tests can provide feedback, tests which appear to be symmetrical, e.g. Algebraic Equivalence, really need to assume which expression belongs to the student and which to the teacher. Variable Description Errors Hopefully this will be empty! Result is either true , false , or fail (which indicates a failure of the test). This determines which branch of the tree is traversed. FeedBack This is a text string which is displayed to the student. It is CASText which may depend on properties of the student's answer. Note This is a text string which is used for Reporting . Each answer note is concatenated with the previous notes and any contributions from the branch. The feedback is only shown to a student if the quiet option is set to 'no'. We provide a static page giving the outcome of all answer test results . These pages are automatically generated by the STACK unit tests and help illustrate, by examples, the exact behaviour of the tests. These pages provide examples of feedback provided by each test. The tests Documentation is grouped as follows. Equivalence , e.g. algebraic equivalence (many variations). AlgEquiv AlgEquivNouns SubstEquiv CasEqual SameType SysEquiv Syntactic form , e.g. checking the student's expression is in factored form. FacForm PartFrac SingleFrac CompSquare Expanded LowestTerms Rules-based tests, e.g. equivalence up to associativity and commutativity and advanced bespoke tests. EqualComAss EqualComAssRules Numerical tests including accuracy, e.g. is written to 3 decimal places. NumRelative NumAbsolute NumSigFigs NumDecPlaces NumDecPlacesWrong SigFigsStrict GT GTE Scientific , e.g. for dealing with dimensional numerical quantities. Units UnitsStrict UnitsRelative UnitsStrictRelative UnitsAbsolute UnitsStrictAbsolute Calculus , e.g. for symbolic integration questions. Diff Int String match tests and regular expressions. String StringSloppy Levenshtein SRegExp Other specific subject tests, e.g. sets, logical expressions. Sets Equiv EquivFirst PropLogic Pre-pocessing students' answers You can apply functions before applying the tests using the feedback variables. For example, to ignore case sensitivity you can apply the Maxima commands defined by STACK exdowncase(ex) to the arguments, before you apply one of the other answer tests. However, some tests really require the raw student's input. E.g. the numerical decimal place test really requires the name of an input as the SAns field. If you manipulate an input, you may end up dropping trailing zeros and ruining the number of decimal places in the expression. STACK will warn you if you need to use the name of an input. Offline testing Sometimes it is very useful to work offline using the desktop version of Maxima. How to do this is explained in the STACK-maxima-sandbox . The Maxima code for each answer test is the name of the test with AT in front. E.g. the algebraic equivalence AlgEquiv test is called in the sandbox as ATAlgEquiv . E.g. to test two expressions in the sandbox type ATAlgEquiv((x-1)*(x+1), x^2-1); In the STACK question dashboard, and some of the reporting features, you may see expressions such as the above. These can be copied into Maxima to help test individual questions.","title":"Answer tests"},{"location":"Authoring/Answer_Tests/#answer-tests","text":"An answer test is used to compare two expressions to establish whether they satisfy some mathematical criteria. The prototype test is to establish if they are algebraically equivalent . Informally, the answer tests have the following syntax [Errors, Result, FeedBack, Note] = AnswerTest(StudentAnswer, TeacherAnswer, [Opt], [Raw]) Where, Variable Description StudentAnswer A CAS expression, assumed to be the student's answer. TeacherAnswer A CAS expression, assumed to be the model answer. Opt If needed, any options which the specific answer test provides. For example, a variable, the accuracy of the numerical comparison, number of significant figures. Raw If needed, the raw string of the student's input to ensure, e.g. Maxima does not remove trailing zeros when establishing the number of significant figures. Since the tests can provide feedback, tests which appear to be symmetrical, e.g. Algebraic Equivalence, really need to assume which expression belongs to the student and which to the teacher. Variable Description Errors Hopefully this will be empty! Result is either true , false , or fail (which indicates a failure of the test). This determines which branch of the tree is traversed. FeedBack This is a text string which is displayed to the student. It is CASText which may depend on properties of the student's answer. Note This is a text string which is used for Reporting . Each answer note is concatenated with the previous notes and any contributions from the branch. The feedback is only shown to a student if the quiet option is set to 'no'. We provide a static page giving the outcome of all answer test results . These pages are automatically generated by the STACK unit tests and help illustrate, by examples, the exact behaviour of the tests. These pages provide examples of feedback provided by each test.","title":"Answer tests"},{"location":"Authoring/Answer_Tests/#the-tests","text":"Documentation is grouped as follows. Equivalence , e.g. algebraic equivalence (many variations). AlgEquiv AlgEquivNouns SubstEquiv CasEqual SameType SysEquiv Syntactic form , e.g. checking the student's expression is in factored form. FacForm PartFrac SingleFrac CompSquare Expanded LowestTerms Rules-based tests, e.g. equivalence up to associativity and commutativity and advanced bespoke tests. EqualComAss EqualComAssRules Numerical tests including accuracy, e.g. is written to 3 decimal places. NumRelative NumAbsolute NumSigFigs NumDecPlaces NumDecPlacesWrong SigFigsStrict GT GTE Scientific , e.g. for dealing with dimensional numerical quantities. Units UnitsStrict UnitsRelative UnitsStrictRelative UnitsAbsolute UnitsStrictAbsolute Calculus , e.g. for symbolic integration questions. Diff Int String match tests and regular expressions. String StringSloppy Levenshtein SRegExp Other specific subject tests, e.g. sets, logical expressions. Sets Equiv EquivFirst PropLogic","title":"The tests"},{"location":"Authoring/Answer_Tests/#pre-pocessing-students-answers","text":"You can apply functions before applying the tests using the feedback variables. For example, to ignore case sensitivity you can apply the Maxima commands defined by STACK exdowncase(ex) to the arguments, before you apply one of the other answer tests. However, some tests really require the raw student's input. E.g. the numerical decimal place test really requires the name of an input as the SAns field. If you manipulate an input, you may end up dropping trailing zeros and ruining the number of decimal places in the expression. STACK will warn you if you need to use the name of an input.","title":"Pre-pocessing students' answers"},{"location":"Authoring/Answer_Tests/#offline-testing","text":"Sometimes it is very useful to work offline using the desktop version of Maxima. How to do this is explained in the STACK-maxima-sandbox . The Maxima code for each answer test is the name of the test with AT in front. E.g. the algebraic equivalence AlgEquiv test is called in the sandbox as ATAlgEquiv . E.g. to test two expressions in the sandbox type ATAlgEquiv((x-1)*(x+1), x^2-1); In the STACK question dashboard, and some of the reporting features, you may see expressions such as the above. These can be copied into Maxima to help test individual questions.","title":"Offline testing"},{"location":"Authoring/Answer_Tests/Calculus/","text":"Calculus answer tests There are two answer tests for dealing with calculus problems. Diff This test is a general differentiation test: it is passed if the arguments are algebraically equivalent, but gives feedback if it looks like the student has integrated instead of differentiated. The first argument is the student's answer. The second argument is the model answer. The answer test option must be the variable with respect to which differentiation is assumed to take place. There are edge cases, particularly with (e^x) where differentiation is indistinguishable from integration. You may need to use the \"quiet\" option in these cases. Int This test is designed for a general indefinite integration question: it is passed if both the arguments are indefinite integrals of the same expression. The first argument is the student's answer. The second argument is the model answer. The answer test option needs to be the variable with respect to which integration is assumed to take place, or a list (see below). Getting this test to work in a general setting is a very difficult challenge. In particular, the test assumes that the constant of integration is expressed in a form similar to (+c), although which variable used is not important. The Int test has various additional options. The question author must supply these options in the form of a list [var, opt1, ...] . The first argument of this list must be the variable with respect to which integration is taking place. If one of the opt? is exactly the token NOCONST then the test will condone a lack of constant of integration. That is, if a student has missed off a constant of integration, or the answers differ by a numerical constant, then full marks will be awarded. Weird constants (e.g. (+c^2)) will still be flagged up. If one of the opt? is exactly the token FORMAL then the test will condone the formal derivative of the student's answer matching that of the teacher. This is useful in examples such as (\\log(|x+3|)/2) vs (\\log(|2x+6|)/2) where effectively the constant of integration differs by a numerical constant. Note, if you use the FORMAL option then by definition you will accept a missing constant of integration! The answer test architecture only passes in the answer to the test. The question is not available at that point; however, the answer test has to infer exactly which expression, including the algebraic form, the teacher has set in the question. This includes stripping off constants of integration and constants of integration may occur in a number of ways, e.g. in logarithms. In many cases simply differentiating the teacher's answer is fine, in which case the question author need not worry. Where this does not work, the question author will need to supply the expression from the question in the right form as an option to the answer test. This is done simply by adding it to the list of options. [x, x*exp(5*x+7)] The test cannot cope with some situations. Please contact the developers when you find some of these. This test is already rather overloaded, so please don't expect every request to be accommodated! This test, in particular, has a lot of test cases which really document what the test does in detail. The issue of ( \\int \\frac{1}{x} dx = \\log(x)+c) vs ( \\int \\frac{1}{x} dx = \\log(|x|)+c) is a particular challenge. What mark would you give a student who integrated [ \\int \\frac{1}{x} dx = \\log(k\\times abs(x))?] If the teacher uses (|..|) in their answer then the student is also expected to use the absolute value. The test is currently defined in such a way that if the teacher uses ( \\log(|x|)+c ) in their answer, then they would expect the student to do so. If they don't use the absolute value function, then they don't expect students to but will accept this in an answer. For example, if the teacher's answer is ( \\log(x)+c ) (i.e. no absolute value) then all the following are considered to be correct. [ \\log(x)+c,\\ \\log(|x|)+c,\\ \\log(k\\,x),\\ \\log(k|x|),\\ \\log(|k, x|) ] If the teacher's answer is ( \\log(|x|)+c ) (i.e. with absolute value) then all the following are considered to be correct. [ \\log(|x|)+c,\\ \\log(k|x|),\\ \\log(|k, x|)\\ ] Now, the following are rejected as incorrect, as the studnet should have used (|..|) [\\log(x)+c,\\ \\log(k\\,x)] Note that STACK sets the value of Maxima's logabs:true , which is not the default in Maxima. This has the effect of adding the absolute value funtion when integrate is used. In the case of partial fractions where there are more than one term of the form (\\log(x-a)) then we insist the student is at least consistent. If the teacher has any (\\log(|x-a|)) then the student must use (|...|) in all of them. If the teacher has no (\\log(|x-a|)) (i.e. just things like (\\log(x-a))) then the student must have all or none.","title":"Calculus answer tests"},{"location":"Authoring/Answer_Tests/Calculus/#calculus-answer-tests","text":"There are two answer tests for dealing with calculus problems.","title":"Calculus answer tests"},{"location":"Authoring/Answer_Tests/Calculus/#diff","text":"This test is a general differentiation test: it is passed if the arguments are algebraically equivalent, but gives feedback if it looks like the student has integrated instead of differentiated. The first argument is the student's answer. The second argument is the model answer. The answer test option must be the variable with respect to which differentiation is assumed to take place. There are edge cases, particularly with (e^x) where differentiation is indistinguishable from integration. You may need to use the \"quiet\" option in these cases.","title":"Diff"},{"location":"Authoring/Answer_Tests/Calculus/#int","text":"This test is designed for a general indefinite integration question: it is passed if both the arguments are indefinite integrals of the same expression. The first argument is the student's answer. The second argument is the model answer. The answer test option needs to be the variable with respect to which integration is assumed to take place, or a list (see below). Getting this test to work in a general setting is a very difficult challenge. In particular, the test assumes that the constant of integration is expressed in a form similar to (+c), although which variable used is not important. The Int test has various additional options. The question author must supply these options in the form of a list [var, opt1, ...] . The first argument of this list must be the variable with respect to which integration is taking place. If one of the opt? is exactly the token NOCONST then the test will condone a lack of constant of integration. That is, if a student has missed off a constant of integration, or the answers differ by a numerical constant, then full marks will be awarded. Weird constants (e.g. (+c^2)) will still be flagged up. If one of the opt? is exactly the token FORMAL then the test will condone the formal derivative of the student's answer matching that of the teacher. This is useful in examples such as (\\log(|x+3|)/2) vs (\\log(|2x+6|)/2) where effectively the constant of integration differs by a numerical constant. Note, if you use the FORMAL option then by definition you will accept a missing constant of integration! The answer test architecture only passes in the answer to the test. The question is not available at that point; however, the answer test has to infer exactly which expression, including the algebraic form, the teacher has set in the question. This includes stripping off constants of integration and constants of integration may occur in a number of ways, e.g. in logarithms. In many cases simply differentiating the teacher's answer is fine, in which case the question author need not worry. Where this does not work, the question author will need to supply the expression from the question in the right form as an option to the answer test. This is done simply by adding it to the list of options. [x, x*exp(5*x+7)] The test cannot cope with some situations. Please contact the developers when you find some of these. This test is already rather overloaded, so please don't expect every request to be accommodated! This test, in particular, has a lot of test cases which really document what the test does in detail. The issue of ( \\int \\frac{1}{x} dx = \\log(x)+c) vs ( \\int \\frac{1}{x} dx = \\log(|x|)+c) is a particular challenge. What mark would you give a student who integrated [ \\int \\frac{1}{x} dx = \\log(k\\times abs(x))?] If the teacher uses (|..|) in their answer then the student is also expected to use the absolute value. The test is currently defined in such a way that if the teacher uses ( \\log(|x|)+c ) in their answer, then they would expect the student to do so. If they don't use the absolute value function, then they don't expect students to but will accept this in an answer. For example, if the teacher's answer is ( \\log(x)+c ) (i.e. no absolute value) then all the following are considered to be correct. [ \\log(x)+c,\\ \\log(|x|)+c,\\ \\log(k\\,x),\\ \\log(k|x|),\\ \\log(|k, x|) ] If the teacher's answer is ( \\log(|x|)+c ) (i.e. with absolute value) then all the following are considered to be correct. [ \\log(|x|)+c,\\ \\log(k|x|),\\ \\log(|k, x|)\\ ] Now, the following are rejected as incorrect, as the studnet should have used (|..|) [\\log(x)+c,\\ \\log(k\\,x)] Note that STACK sets the value of Maxima's logabs:true , which is not the default in Maxima. This has the effect of adding the absolute value funtion when integrate is used. In the case of partial fractions where there are more than one term of the form (\\log(x-a)) then we insist the student is at least consistent. If the teacher has any (\\log(|x-a|)) then the student must use (|...|) in all of them. If the teacher has no (\\log(|x-a|)) (i.e. just things like (\\log(x-a))) then the student must have all or none.","title":"Int"},{"location":"Authoring/Answer_Tests/Equivalence/","text":"Equivalence answer tests The prototype test is to establish if two expressions are algebraically equivalent . This page documents this, and similar, equivalence tests. A crucial component in the assessment process the ability to decide if two expressions are equivalent. It turns out there are many useful senses when trying to assess students' answers. Let us assume a teacher has asked a student to expand out ((x+1)^2) and the response they have from one student is (x^2+x+x+1). This is \"correct\" in the sense that it is algebraically equivalent to ((x+1)^2) and is in expanded form (actually two separate mathematical properties) but \"incorrect\" in the sense that the student has not gathered like terms by performing an addition (x+x). What about a response (2x+x^2+1)? This is, arguably, better in the sense that the terms are gathered, but the student here did not order the terms to write their expression in canonical form. Hence, we need quite a number of different answer tests to establish equality in various senses of the word. This list is in approximate order of the size of the equivalence classes from most to least restrictive. Test Description (see below for more details) CasEqual Are the parse trees of the two expressions equal? EqualComAss Are they equal up to commutativity and associativity of addition and multiplication, together with their inverses minus and division? EqualComAssRules Are they equal up to commutativity, associativity and with optional rules such as (0\\times x \\rightarrow 0)? AlgEquivNouns Are they algebraically equivalent , preserving noun forms of operators, e.g. diff ? AlgEquiv Are they algebraically equivalent ? SubstEquiv Can we find a substitution of the variables of (ex_2) into (ex_1) which renders (ex_1) algebraically equivalent to (ex_2)? SameType Are the two expressions of the same types of object ? Note that this test works recursively over the entire expression. AlgEquiv {#AlgEquiv} This is the most commonly used test. The pseudo code If simplify(ex1-ex2) = 0 then true else false. This test will work with a variety of types of object of mathematical objects, including lists, sets, equations, inequalities and matrices. This test disregards whether simplification is switched on, it always fully simplifies all its arguments. Use AlgEquiv(predicate(ex),true) with predicate functions . Note: exactly what it does depends on what objects are given to it. In particular the pseudo code above only applies to expressions. We cannot subtract one list or set from another, so we have to use other tests. For sets, the CAS tries to write the expression in a canonical form. It then compares the string representations these forms to remove duplicate elements and compare sets. This is subtly different from trying to simplify the difference of two expressions to zero. For example, imagine we have ({(x-a)^{6000}}) and ({(a-x)^{6000}}). One canonical form is to expand out both sides. While this work in principal, in practice this is much too slow for assessment. Currently we do check multiplicity of roots, so that ( (x-2)^2=0) and ( x=2) are not considered to be equivalent. Similarly (a^3b^3=0) is not (a=0 \\mbox{ or } b=0). This is a long-standing issue and we would need a separate test to ignore multiplicity of roots. Currently, ({-\\frac{\\sqrt{2}}{\\sqrt{3}}}) and ({-\\frac{2}{\\sqrt{6}}}) are considered to be different. If you want these to be considered the same, you need to write them in a canonical form. Instead of passing in just the sets, use the answer test to compare the following. ev(radcan({-sqrt(2)/sqrt(3)}),simp); ev(radcan({-2/sqrt(6)}),simp); Why doesn't the test automatically apply radcan ? If we always did this, then ({(x-a)^{6000}}) and ({(a-x)^{6000}}) would be expanded out, which would break the system. Since, in a given situation, we know a lot about what a student is likely to answer we can apply an appropriate form. There isn't one rule which will work here, unfortunately. There are also some cases which Maxima can't establish as being equivalent. For example [ \\sqrt[3]{\\sqrt{108}+10}-\\sqrt[3]{\\sqrt{108}-10} = 2.] As Maxima code (sqrt(108)+10)^(1/3)-(sqrt(108)-10)^(1/3) This is Cardano's example from Ars Magna, but currently the AlgEquiv test cannot establish these are equivalent. There are some other examples in the test suite which fail for mathematical reasons. In cases like this, where you know you have a number, you may need to supplement the AlgEquiv test with another numerical test. We recommend you do not use algebraic equivalence testing for floating point numbers. Instead use one of the numerical tests . Examples of why algebraic equivalence fails when you might expect it to pass, e.g. ATAlgEquiv(452,4.52*10^2) (Maxima 5.44.0, November 2022), are given in the documentation on numbers . EqualComAss A particularly useful test is to establish that two expressions are equal up to commutativity and associativity of addition and multiplication, together with their inverses minus and division. For example, under this test ( x+y = y+x \\mbox{ but } x+x \\neq 2x). Please see the separate documentation . AlgEquivNouns Algebraic equivalence evaluates as much as possible, to try to establish equivalence. This means, e.g. that diff(y,x) is always evaluated to (0). If you use AlgEquivNouns then noun forms of operators are not evaluated, so diff(y,x) will be evaluated but 'diff(y,x) and noundiff(y,x) will not. Even with this answer test noundiff(y,x) and noundiff(y(x),x) are different! Note, that logic nouns such as nounand are still evaluated by this test! Sorry, but logical noun functions are dealt with internally in a very different way than Maxima noun functions such as 'diff(y,x) and the parallel noundiff . Use a different test, such as EqualComAss . It was the need to selectively evaluate some nouns but not others that led to the development of the rule-based answer tests to deal with the need for these options in a coherent way. CasEqual The CAS returns the result of the simple Maxima command if StudentAnswer=TeacherAnswer then true else false. There is no explicit simplification here (unlike AlgEquiv). This test always assumes simplification is off, i.e. simp:false , regardless of any question settings. If this is too strict, use ev(ex,simp) in the arguments to simplify them explicitly first. When simplification is off this test effectively tests whether the parse trees are identical. Please note, the behaviour of this test relies on the internal representation of expressions by Maxima, rather than an explicit mathematical property such as \"equivalence\". Explicit properties should be tested in preference to using this test! SubstEquiv Can we find a substitution of the variables of (ex_2) into (ex_1) which renders (ex_1) algebraically equivalent to (ex_2)? Because we have to test every possibility, the algorithm is factorial in the number of variables. For this reason, the test only works for 4 or fewer variables. This test makes a substitution then uses AlgEquiv. If you add an answer test option (not required) in the form of a list of variables, these variables will be \"fixed\" during the comparison. The list of variable is removed from both lists of the teacher's and student's variable lists before any comparison. ATSubstEquiv(x=A+B, x=a+b) will match with [A = a,B = b,x = x] . ATSubstEquiv(x=A+B, x=a+b, [x]) will match with [A = a,B = b] . ATSubstEquiv(y=A+B, x=a+b, [x]) will not match since x in the teacher's answer is fixed here, but does not occur in the student's answer. The optional argument, which must be a list of variables, is useful if you want to establish that a student has used arbitrary constants in (A\\sin(x)+B\\cos(x)) but make sure (x) really stays as (x). SysEquiv The SysEquiv (system equivalence) test takes in two lists of polynomial equations in any number of variables and determines whether the two systems have the same set of solutions. This is done using the theory of Grobner bases to determine whether the ideals generated by the two systems are equal. As the test allows for polynomials in several variables, it can cope with the intersections of the conic sections, as well as a large number of geometrically interesting curves. This test does not check if the student actually \"fully solved\" the equations! E.g. [ [x^2=1] \\equiv [(x-1)\\cdot (x+1)=0] ] under this test. This test disregards whether simplification is switched on, it only simplifies its arguments where required. This allows the test to list equations in feedback that the student has erroneously included in their system. You can allow the student to include \"redundant assignments\". For example, if you have [90=v*t,90=(v+5)*(t-1/4)] but the student has [d=90,d=v*t,d=(v+5)*(t-1/4)]) then the systems are not equivalent, becuase the student has an extra variable. Use stack_eval_assignments to eliminate explicit assignments of the form var=num and evaluate the other expression in this context.","title":"Equivalence"},{"location":"Authoring/Answer_Tests/Equivalence/#equivalence-answer-tests","text":"The prototype test is to establish if two expressions are algebraically equivalent . This page documents this, and similar, equivalence tests. A crucial component in the assessment process the ability to decide if two expressions are equivalent. It turns out there are many useful senses when trying to assess students' answers. Let us assume a teacher has asked a student to expand out ((x+1)^2) and the response they have from one student is (x^2+x+x+1). This is \"correct\" in the sense that it is algebraically equivalent to ((x+1)^2) and is in expanded form (actually two separate mathematical properties) but \"incorrect\" in the sense that the student has not gathered like terms by performing an addition (x+x). What about a response (2x+x^2+1)? This is, arguably, better in the sense that the terms are gathered, but the student here did not order the terms to write their expression in canonical form. Hence, we need quite a number of different answer tests to establish equality in various senses of the word. This list is in approximate order of the size of the equivalence classes from most to least restrictive. Test Description (see below for more details) CasEqual Are the parse trees of the two expressions equal? EqualComAss Are they equal up to commutativity and associativity of addition and multiplication, together with their inverses minus and division? EqualComAssRules Are they equal up to commutativity, associativity and with optional rules such as (0\\times x \\rightarrow 0)? AlgEquivNouns Are they algebraically equivalent , preserving noun forms of operators, e.g. diff ? AlgEquiv Are they algebraically equivalent ? SubstEquiv Can we find a substitution of the variables of (ex_2) into (ex_1) which renders (ex_1) algebraically equivalent to (ex_2)? SameType Are the two expressions of the same types of object ? Note that this test works recursively over the entire expression.","title":"Equivalence answer tests"},{"location":"Authoring/Answer_Tests/Equivalence/#algequiv-algequiv","text":"This is the most commonly used test. The pseudo code If simplify(ex1-ex2) = 0 then true else false. This test will work with a variety of types of object of mathematical objects, including lists, sets, equations, inequalities and matrices. This test disregards whether simplification is switched on, it always fully simplifies all its arguments. Use AlgEquiv(predicate(ex),true) with predicate functions . Note: exactly what it does depends on what objects are given to it. In particular the pseudo code above only applies to expressions. We cannot subtract one list or set from another, so we have to use other tests. For sets, the CAS tries to write the expression in a canonical form. It then compares the string representations these forms to remove duplicate elements and compare sets. This is subtly different from trying to simplify the difference of two expressions to zero. For example, imagine we have ({(x-a)^{6000}}) and ({(a-x)^{6000}}). One canonical form is to expand out both sides. While this work in principal, in practice this is much too slow for assessment. Currently we do check multiplicity of roots, so that ( (x-2)^2=0) and ( x=2) are not considered to be equivalent. Similarly (a^3b^3=0) is not (a=0 \\mbox{ or } b=0). This is a long-standing issue and we would need a separate test to ignore multiplicity of roots. Currently, ({-\\frac{\\sqrt{2}}{\\sqrt{3}}}) and ({-\\frac{2}{\\sqrt{6}}}) are considered to be different. If you want these to be considered the same, you need to write them in a canonical form. Instead of passing in just the sets, use the answer test to compare the following. ev(radcan({-sqrt(2)/sqrt(3)}),simp); ev(radcan({-2/sqrt(6)}),simp); Why doesn't the test automatically apply radcan ? If we always did this, then ({(x-a)^{6000}}) and ({(a-x)^{6000}}) would be expanded out, which would break the system. Since, in a given situation, we know a lot about what a student is likely to answer we can apply an appropriate form. There isn't one rule which will work here, unfortunately. There are also some cases which Maxima can't establish as being equivalent. For example [ \\sqrt[3]{\\sqrt{108}+10}-\\sqrt[3]{\\sqrt{108}-10} = 2.] As Maxima code (sqrt(108)+10)^(1/3)-(sqrt(108)-10)^(1/3) This is Cardano's example from Ars Magna, but currently the AlgEquiv test cannot establish these are equivalent. There are some other examples in the test suite which fail for mathematical reasons. In cases like this, where you know you have a number, you may need to supplement the AlgEquiv test with another numerical test. We recommend you do not use algebraic equivalence testing for floating point numbers. Instead use one of the numerical tests . Examples of why algebraic equivalence fails when you might expect it to pass, e.g. ATAlgEquiv(452,4.52*10^2) (Maxima 5.44.0, November 2022), are given in the documentation on numbers .","title":"AlgEquiv {#AlgEquiv}"},{"location":"Authoring/Answer_Tests/Equivalence/#equalcomass","text":"A particularly useful test is to establish that two expressions are equal up to commutativity and associativity of addition and multiplication, together with their inverses minus and division. For example, under this test ( x+y = y+x \\mbox{ but } x+x \\neq 2x). Please see the separate documentation .","title":"EqualComAss"},{"location":"Authoring/Answer_Tests/Equivalence/#algequivnouns","text":"Algebraic equivalence evaluates as much as possible, to try to establish equivalence. This means, e.g. that diff(y,x) is always evaluated to (0). If you use AlgEquivNouns then noun forms of operators are not evaluated, so diff(y,x) will be evaluated but 'diff(y,x) and noundiff(y,x) will not. Even with this answer test noundiff(y,x) and noundiff(y(x),x) are different! Note, that logic nouns such as nounand are still evaluated by this test! Sorry, but logical noun functions are dealt with internally in a very different way than Maxima noun functions such as 'diff(y,x) and the parallel noundiff . Use a different test, such as EqualComAss . It was the need to selectively evaluate some nouns but not others that led to the development of the rule-based answer tests to deal with the need for these options in a coherent way.","title":"AlgEquivNouns"},{"location":"Authoring/Answer_Tests/Equivalence/#casequal","text":"The CAS returns the result of the simple Maxima command if StudentAnswer=TeacherAnswer then true else false. There is no explicit simplification here (unlike AlgEquiv). This test always assumes simplification is off, i.e. simp:false , regardless of any question settings. If this is too strict, use ev(ex,simp) in the arguments to simplify them explicitly first. When simplification is off this test effectively tests whether the parse trees are identical. Please note, the behaviour of this test relies on the internal representation of expressions by Maxima, rather than an explicit mathematical property such as \"equivalence\". Explicit properties should be tested in preference to using this test!","title":"CasEqual"},{"location":"Authoring/Answer_Tests/Equivalence/#substequiv","text":"Can we find a substitution of the variables of (ex_2) into (ex_1) which renders (ex_1) algebraically equivalent to (ex_2)? Because we have to test every possibility, the algorithm is factorial in the number of variables. For this reason, the test only works for 4 or fewer variables. This test makes a substitution then uses AlgEquiv. If you add an answer test option (not required) in the form of a list of variables, these variables will be \"fixed\" during the comparison. The list of variable is removed from both lists of the teacher's and student's variable lists before any comparison. ATSubstEquiv(x=A+B, x=a+b) will match with [A = a,B = b,x = x] . ATSubstEquiv(x=A+B, x=a+b, [x]) will match with [A = a,B = b] . ATSubstEquiv(y=A+B, x=a+b, [x]) will not match since x in the teacher's answer is fixed here, but does not occur in the student's answer. The optional argument, which must be a list of variables, is useful if you want to establish that a student has used arbitrary constants in (A\\sin(x)+B\\cos(x)) but make sure (x) really stays as (x).","title":"SubstEquiv"},{"location":"Authoring/Answer_Tests/Equivalence/#sysequiv","text":"The SysEquiv (system equivalence) test takes in two lists of polynomial equations in any number of variables and determines whether the two systems have the same set of solutions. This is done using the theory of Grobner bases to determine whether the ideals generated by the two systems are equal. As the test allows for polynomials in several variables, it can cope with the intersections of the conic sections, as well as a large number of geometrically interesting curves. This test does not check if the student actually \"fully solved\" the equations! E.g. [ [x^2=1] \\equiv [(x-1)\\cdot (x+1)=0] ] under this test. This test disregards whether simplification is switched on, it only simplifies its arguments where required. This allows the test to list equations in feedback that the student has erroneously included in their system. You can allow the student to include \"redundant assignments\". For example, if you have [90=v*t,90=(v+5)*(t-1/4)] but the student has [d=90,d=v*t,d=(v+5)*(t-1/4)]) then the systems are not equivalent, becuase the student has an extra variable. Use stack_eval_assignments to eliminate explicit assignments of the form var=num and evaluate the other expression in this context.","title":"SysEquiv"},{"location":"Authoring/Answer_Tests/Form/","text":"Algebraic Form Often, we wish to establish if the student's expression has the correct form . For example, consider the following written forms of (x^2-4x+4). [(x-2)(x-2),\\quad (x-2)^2,\\quad (2-x)^2,\\quad 4\\left(1-\\frac{x}{2}\\right)^2.] Each of these might be considered to be factored. Establishing ex is factored is not the same as comparing it with factor(ex) . FacForm: factorisation of polynomials This test checks (i) that SAns is algebraically equivalent to TAns , and (ii) that SAns is \"factored\" over the rational numbers. The answer test expects the option to be the variable, which is needed to generate feedback. If the answer is incorrect, quite detailed feedback is provided. An expression is said to be factored if it is written as a product of powers of distinct irreducible factors. Strictly speaking, in establishing that an expression is in factored form, we might not even care whether the terms in the product are fully simplified, as long as they are irreducible. Irreducibility on the other hand means we can't find further factors, but here we need some care. Consider (x^8+16x^4+48). Any non-trivial factorization, e.g. ((x^4+4)(x^4+12)). A factorization into irreducible factors over the integers/rational numbers, i.e. ((x^2+2x+x)(x^2-2x+2)(x^4+12)). A factorization into terms irreducible over the reals, i.e. ((x^2+2x+x)(x^2-2x+2)(x^2+2\\sqrt[4]{3}x+2\\sqrt[4]{3})(x^2-2\\sqrt[4]{3}x+2\\sqrt[4]{3})). A factorization into irreducible polynomials over the Gaussian integers, with (i) allowed, i.e. ((x+1+i)(x+1-i)(x-1+i)(x-1-i)(x^4+12)). A factorization over the complex numbers, where the factor ((x^4+12)) would also be split into the four terms (x\\pm\\sqrt[4]{3}(1\\pm i)). In elementary teaching, meaning 4. is unlikely to occur. Indeed, we might take this example to represent factoring over any extension field of the rational numbers. We normally seek to establish that the factors are irreducible over the integers (which is equivalent to irreducibility over the rational numbers) or the reals. But, unlike a canonical form, we are not particularly interested in the order of the terms in this product, or the order of summands inside these terms. The FacForm test establishes that the expression is factored over the rational numbers. If the coefficients of the polynomial are all real, at worst you will have quadratic irreducible terms. There are some delicate cases such as: ((2-x)(3-x)) vs ((x-2)(x-3)) and ((1-x)^2) vs ((x-1)^2), which this test will cope with. It is also possible a student will do something which is just plain odd, e.g. (x^2-4x+4) can be rewritten as (x(x-4+4/x)) which is a \"product of powers of distinct irreducible factors\" but not acceptable to most teachers. The student's answer must also be a polynomial in the variable (using polynomialp as the test predicate). Factorisation of integers If you would like to ask a student to factor a polynomial, then do not use the FacForm answer test. The FacForm answer test is designed to use with polynomials. Instead, switch off simplification and define ta:factor(12); and use EqualComAss as the answer test. Note however that EqualComAss does not think that 2^2*3 and 2*2*3 are the same! PartFrac: partial fractions This test checks (i) that SAns is algebraically equivalent to TAns , and (ii) that SAns is in \"partial fraction form\". The option must be the variable. To help provide feedback to students on how to calculate the partial fraction form we have special function poly_about_a(ex, v, a) which writes the polynomial ex in variable v about the point v=a . E.g. (x^2=1-2(x-1)+(x-1)^2) when written about (x=1). This is basically the complete finite Taylor series for the polynomial about (x=1). The form \"about (x=a)\" can readily be calculated by \"shift-expand-shift\" and without derivatives. It is, in my view, somewhat neglected. See doi:10.1017/S0025557200003569 for applications to a limit-free derivative for polynomials. Here, e.g. if we have the question variables n1:4; p1:(9*y-8)/(y-n1)^2 p2:poly_about_a(num(p1), y, n1); p3:map(lambda([ex], ex/denom(p1)), p2); then feedback of the following form You need to do more work on the term {@p1@}. In particular, write the numerator {@num(p1)@} about the point {@y=n1@}. This gives {@num(p1)=p2@}, which allows us to complete the partial fraction form as follows: \\[ {@p1@} = \\frac{ {@p2@} }{ {@denom(p1)@} } = {@p3@} = {@ev(p3,simp)@}. \\] is rendered as: You need to do more work on the term ({\\frac{9 y-8}{{\\left(y-4\\right)}^2}}). In particular, write the numerator ({9 y-8}) about the point ({y=4}). This gives ({9 y-8=28+9 \\left(y-4\\right)}), which allows us to complete the partial fraction form as follows: [ {\\frac{9 y-8}{{\\left(y-4\\right)}^2}} = \\frac{ {28+9 \\left(y-4\\right)} }{ {{\\left(y-4\\right)}^2} } = {\\frac{28}{{\\left(y-4\\right)}^2}+\\frac{9 \\left(y-4\\right)}{{\\left(y-4\\right)}^2}} = {\\frac{9}{y-4}+\\frac{28}{{\\left(y-4\\right)}^2}}. ] SingleFrac: Single fractions This test checks (i) that SAns is algebraically equivalent to TAns , and (ii) that SAns is written as a single fraction. Notes This test works at the top level, making sure the expression as a whole is a single fraction. if you also want this expression written in lowest terms, then this is quite a separate test. You need to first confirm you have a single fraction then add a new potential response. One way is to use the ../CAS/Predicate functions lowesttermsp(ex) and compare the result with true with the AlgEquiv test. The algebraic equivalence check is for convenience. If you only want to check an expression is a single fraction make (SAns=TAns), i.e. ATSingleFrac(ex,ex) will do. LowestTerms This test checks that all numbers written in the first expression are in lowest terms and that the denominator is clear of surds and complex numbers. if you want to check whether a rational polynomial is written in lowest terms, this is not the test to use. Instead, apply the predicate functions lowesttermsp to the expression. the second argument to this function is ignored, i.e. this test does not confirm algebraic equivalence. You might as well use 0 here. Expanded ### Confirms SAns is equal to expand(SAns) . Note, the second argument to this answer test is not used (but must be non-empty). Note with this test that an expression such as (x^2-(a+b)x+ab) is not considered to be expanded, and this test will return false. CompletedSquare This test checks (i) that SAns is algebraically equivalent to TAns , and (ii) that SAns is in \"completed square form\". The option must be the variable.","title":"Algebraic Form"},{"location":"Authoring/Answer_Tests/Form/#algebraic-form","text":"Often, we wish to establish if the student's expression has the correct form . For example, consider the following written forms of (x^2-4x+4). [(x-2)(x-2),\\quad (x-2)^2,\\quad (2-x)^2,\\quad 4\\left(1-\\frac{x}{2}\\right)^2.] Each of these might be considered to be factored. Establishing ex is factored is not the same as comparing it with factor(ex) .","title":"Algebraic Form"},{"location":"Authoring/Answer_Tests/Form/#facform-factorisation-of-polynomials","text":"This test checks (i) that SAns is algebraically equivalent to TAns , and (ii) that SAns is \"factored\" over the rational numbers. The answer test expects the option to be the variable, which is needed to generate feedback. If the answer is incorrect, quite detailed feedback is provided. An expression is said to be factored if it is written as a product of powers of distinct irreducible factors. Strictly speaking, in establishing that an expression is in factored form, we might not even care whether the terms in the product are fully simplified, as long as they are irreducible. Irreducibility on the other hand means we can't find further factors, but here we need some care. Consider (x^8+16x^4+48). Any non-trivial factorization, e.g. ((x^4+4)(x^4+12)). A factorization into irreducible factors over the integers/rational numbers, i.e. ((x^2+2x+x)(x^2-2x+2)(x^4+12)). A factorization into terms irreducible over the reals, i.e. ((x^2+2x+x)(x^2-2x+2)(x^2+2\\sqrt[4]{3}x+2\\sqrt[4]{3})(x^2-2\\sqrt[4]{3}x+2\\sqrt[4]{3})). A factorization into irreducible polynomials over the Gaussian integers, with (i) allowed, i.e. ((x+1+i)(x+1-i)(x-1+i)(x-1-i)(x^4+12)). A factorization over the complex numbers, where the factor ((x^4+12)) would also be split into the four terms (x\\pm\\sqrt[4]{3}(1\\pm i)). In elementary teaching, meaning 4. is unlikely to occur. Indeed, we might take this example to represent factoring over any extension field of the rational numbers. We normally seek to establish that the factors are irreducible over the integers (which is equivalent to irreducibility over the rational numbers) or the reals. But, unlike a canonical form, we are not particularly interested in the order of the terms in this product, or the order of summands inside these terms. The FacForm test establishes that the expression is factored over the rational numbers. If the coefficients of the polynomial are all real, at worst you will have quadratic irreducible terms. There are some delicate cases such as: ((2-x)(3-x)) vs ((x-2)(x-3)) and ((1-x)^2) vs ((x-1)^2), which this test will cope with. It is also possible a student will do something which is just plain odd, e.g. (x^2-4x+4) can be rewritten as (x(x-4+4/x)) which is a \"product of powers of distinct irreducible factors\" but not acceptable to most teachers. The student's answer must also be a polynomial in the variable (using polynomialp as the test predicate).","title":"FacForm: factorisation of polynomials"},{"location":"Authoring/Answer_Tests/Form/#factorisation-of-integers","text":"If you would like to ask a student to factor a polynomial, then do not use the FacForm answer test. The FacForm answer test is designed to use with polynomials. Instead, switch off simplification and define ta:factor(12); and use EqualComAss as the answer test. Note however that EqualComAss does not think that 2^2*3 and 2*2*3 are the same!","title":"Factorisation of integers"},{"location":"Authoring/Answer_Tests/Form/#partfrac-partial-fractions","text":"This test checks (i) that SAns is algebraically equivalent to TAns , and (ii) that SAns is in \"partial fraction form\". The option must be the variable. To help provide feedback to students on how to calculate the partial fraction form we have special function poly_about_a(ex, v, a) which writes the polynomial ex in variable v about the point v=a . E.g. (x^2=1-2(x-1)+(x-1)^2) when written about (x=1). This is basically the complete finite Taylor series for the polynomial about (x=1). The form \"about (x=a)\" can readily be calculated by \"shift-expand-shift\" and without derivatives. It is, in my view, somewhat neglected. See doi:10.1017/S0025557200003569 for applications to a limit-free derivative for polynomials. Here, e.g. if we have the question variables n1:4; p1:(9*y-8)/(y-n1)^2 p2:poly_about_a(num(p1), y, n1); p3:map(lambda([ex], ex/denom(p1)), p2); then feedback of the following form You need to do more work on the term {@p1@}. In particular, write the numerator {@num(p1)@} about the point {@y=n1@}. This gives {@num(p1)=p2@}, which allows us to complete the partial fraction form as follows: \\[ {@p1@} = \\frac{ {@p2@} }{ {@denom(p1)@} } = {@p3@} = {@ev(p3,simp)@}. \\] is rendered as: You need to do more work on the term ({\\frac{9 y-8}{{\\left(y-4\\right)}^2}}). In particular, write the numerator ({9 y-8}) about the point ({y=4}). This gives ({9 y-8=28+9 \\left(y-4\\right)}), which allows us to complete the partial fraction form as follows: [ {\\frac{9 y-8}{{\\left(y-4\\right)}^2}} = \\frac{ {28+9 \\left(y-4\\right)} }{ {{\\left(y-4\\right)}^2} } = {\\frac{28}{{\\left(y-4\\right)}^2}+\\frac{9 \\left(y-4\\right)}{{\\left(y-4\\right)}^2}} = {\\frac{9}{y-4}+\\frac{28}{{\\left(y-4\\right)}^2}}. ]","title":"PartFrac: partial fractions"},{"location":"Authoring/Answer_Tests/Form/#singlefrac-single-fractions","text":"This test checks (i) that SAns is algebraically equivalent to TAns , and (ii) that SAns is written as a single fraction. Notes This test works at the top level, making sure the expression as a whole is a single fraction. if you also want this expression written in lowest terms, then this is quite a separate test. You need to first confirm you have a single fraction then add a new potential response. One way is to use the ../CAS/Predicate functions lowesttermsp(ex) and compare the result with true with the AlgEquiv test. The algebraic equivalence check is for convenience. If you only want to check an expression is a single fraction make (SAns=TAns), i.e. ATSingleFrac(ex,ex) will do.","title":"SingleFrac: Single fractions"},{"location":"Authoring/Answer_Tests/Form/#lowestterms","text":"This test checks that all numbers written in the first expression are in lowest terms and that the denominator is clear of surds and complex numbers. if you want to check whether a rational polynomial is written in lowest terms, this is not the test to use. Instead, apply the predicate functions lowesttermsp to the expression. the second argument to this function is ignored, i.e. this test does not confirm algebraic equivalence. You might as well use 0 here.","title":"LowestTerms"},{"location":"Authoring/Answer_Tests/Form/#expanded","text":"Confirms SAns is equal to expand(SAns) . Note, the second argument to this answer test is not used (but must be non-empty). Note with this test that an expression such as (x^2-(a+b)x+ab) is not considered to be expanded, and this test will return false.","title":"Expanded ###"},{"location":"Authoring/Answer_Tests/Form/#completedsquare","text":"This test checks (i) that SAns is algebraically equivalent to TAns , and (ii) that SAns is in \"completed square form\". The option must be the variable.","title":"CompletedSquare"},{"location":"Authoring/Answer_Tests/Numerical/","text":"Numerical answer tests This page is dedicated to answer tests which establish numerical precision. With these tests it is essential that the SAns field is exactly the name of the input. For example, if your input is ans1 then the SAns field of the answer test must only be ans1 . The reason for this is that Maxima changes the display of floating-point numbers to remove or add trailing zeros. These answer tests must take the value typed at the input, not the value passed through the CAS, otherwise digits will be changed. This problem does not apply to the teacher's answer because we do not test whether the teacher has supplied the correct number of trailing zeros. Care will be needed to display the correct number of significant figures with trailing zeros elsewhere in the question though. Further information and examples are given in the page on numbers and scientific units . All software have limitations on the extent to which they can robustly deal with numerical quantities. Maxima, PHP (and hence STACK) are no exceptions. Integers are essentially unproblematic, and CAS will support (almost) arbitrary precision integers. Floating-point representations of real numbers are more difficult, and a classic discussion of how to represent continuous quantities in finite state machine is given by D. Goldberg. What every computer scientist should know about floating-point arithmetic. Computing Surveys, 23(1):5-48, March 1991. NumRelative & NumAbsolute The option to these tests is a tolerance. The default tolerance is 0.05. Relative: Tests whether abs(sa-ta) <= opt * abs(ta) Absolute: Tests whether abs(sa-ta) < opt NumRelative and NumAbsolute can also accept lists and sets. Elements are automatically converted to floats and simplified (i.e. ev(float(ex),simp) ) and are compared to the teacher's answer using the appropriate numerical test and accuracy. A uniform accuracy must be used. With lists the order is important, but with sets it is not. Checking whether two sets are approximately equal is an interesting mathematical problem.... GT & GTE \"Greater than\" or \"Greater than or equal to\". Both arguments are assumed to be numbers. The Answer test fully simplifies the SAns and converts this to a float if possible. This is needed to cope with expressions involving sums of surds, (\\pi) etc. Therefore, do expect some numerical rounding which may cause the test to fail in very sharp comparisons. Significant figure testing The significant figures of a number are digits that carry meaning. This includes all digits except leading zeros; trailing zeros when they are only placeholders to indicate the scale of the number. To establish the number of significant figures which arise from a calculation it is necessary to know the number of significant figures involved in the floating-point numbers used in the calculation. This causes a problem in assessment when we have a numerical expression, such as (100), and seek to infer the number of significant figures. Does this have one significant figure or three? The following cases illustrate the difficulties in inferring the number of significant digits from only the written form of a number. (0.0010) has exactly (2) significant digits. (100) has at least (1) and maybe even (3) significant digits. (1.00e3) has exactly (3) significant digits. (10.0) has exactly (3) significant digits. (0) has (1) significant digit. (0.00) has at least (1) and maybe even (3) significant digits. (0.01) has exactly (1) significant digit. Therefore, with trailing zeros there are a number of cases in which it is not possible to tell from the written form of an expression precisely how many significant digits are present in a student's answer. This creates a problem for automatic assessment. To avoid this ambiguity some scientists adopt a convention where (100) has exactly one significant digit . To express one hundred to three significant digits it is necessary to use (1.00e2). This conforms to the specifications in international standards and it certainly avoids ambiguity but in many assessment situations teachers do not want to enforce such strict rules. STACK seeks to provide tools for both situations: very strict enforcement of the significant figures rules (needed when teaching significant figures of course!) and a more liberal situation in which STACK will accept an input of (100) when the teacher wanted 1, 2 or 3 significant figures. In addition to the number of significant figures used to express the number, a teacher will also want to establish that the student actually has the right number! In more liberal situations a teacher will condone an error in the last place. E.g. they will accept an answer written to four significant figures, but where only three are actually correct. StrictSigFigs This test enforces the strict rules of significant figures. It does not check for numerical precision and looks only at surface features of the number representation. The option is the required number of significant figures. This must be an integer only. NumSigFigs This is a more liberal test. Primarily it checks numerical accuracy, but it also checks the number of significant figures in a liberal way. That is to say, it makes sure that the number of significant figures specified by the teacher lies within the range inferred from the student's answer. For example, this test will accept (100) as being correctly written to 1, 2 or 3 significant figures. If you want to enforce the precise rules use the StrictSigFigs test. Tests whether the student's answer contains opt significant figures, and whether the answer is accurate to opt significant figures. If the option is a list [n,m] then we check the answer has been written to n significant figures, with an accuracy of up to m places. If the answer is too far out then rounding feedback will not be given. A common test would be to ask for ([n,n-1]) to permit the student to enter the last digit incorrectly. If the options are of the form [n,0] then only the number of significant figures in sa will be checked. This ignores any numerical accuracy and completely ignores the second argument to the function. Note, that this test is liberal in establishing the number of significant figures. For strict enforcement of the rules, use StrictSigFigs instead. If the options are of the form [n,-1] then the test checks the student has at least n significant figures in the answer, and that numerical accuracy is correct. This test only supports numbers where (|sa|<10^{22}). Please see the notes about numerical rounding for the differences between rounding. In NumSigFigs the teacher's answer will be rounded to the specified number of significant figures before a comparison is made. NumDecPlaces Tests (i) whether the student's answer is equivalent to the teacher's and (ii) is written to opt decimal places. The option, which must be a positive integer, dictates the number of digits following the decimal separator . . Note that trailing zeros are ''required'', i.e. to two decimal places you must write 12.30 not just 12.3 . The test rounds the numbers to the specified number of decimal places before trying to establish equivalence. NumDecPlacesWrong Tests if the student appears to have the decimal point in the wrong place. For example, 3.141 and 31.41 will be considered the same under this test. opt is the number of places to consider, from the most significant. This test condones any lack of trailing zeros. Use other tests to establish if a student has sufficient places. Other issues A teacher may wish to see if a student's answer is incorrect only by orders of magnitude. E.g. a student answers (110) instead of (1100). To do this, a teacher can check whether (\\log_{10}) of the ratio of two expressions is an integer, e.g. integerp(rat(float(log(sa/ta)/log(10)))) There is currently no functionality within the numerical answer tests to automatically check this, and there is no dedicated answer test to establish this property. A separate PRT node is needed. See also Answer tests CAS and numbers Scientific units Maxima","title":"Numerical answer tests"},{"location":"Authoring/Answer_Tests/Numerical/#numerical-answer-tests","text":"This page is dedicated to answer tests which establish numerical precision. With these tests it is essential that the SAns field is exactly the name of the input. For example, if your input is ans1 then the SAns field of the answer test must only be ans1 . The reason for this is that Maxima changes the display of floating-point numbers to remove or add trailing zeros. These answer tests must take the value typed at the input, not the value passed through the CAS, otherwise digits will be changed. This problem does not apply to the teacher's answer because we do not test whether the teacher has supplied the correct number of trailing zeros. Care will be needed to display the correct number of significant figures with trailing zeros elsewhere in the question though. Further information and examples are given in the page on numbers and scientific units . All software have limitations on the extent to which they can robustly deal with numerical quantities. Maxima, PHP (and hence STACK) are no exceptions. Integers are essentially unproblematic, and CAS will support (almost) arbitrary precision integers. Floating-point representations of real numbers are more difficult, and a classic discussion of how to represent continuous quantities in finite state machine is given by D. Goldberg. What every computer scientist should know about floating-point arithmetic. Computing Surveys, 23(1):5-48, March 1991.","title":"Numerical answer tests"},{"location":"Authoring/Answer_Tests/Numerical/#numrelative-numabsolute","text":"The option to these tests is a tolerance. The default tolerance is 0.05. Relative: Tests whether abs(sa-ta) <= opt * abs(ta) Absolute: Tests whether abs(sa-ta) < opt NumRelative and NumAbsolute can also accept lists and sets. Elements are automatically converted to floats and simplified (i.e. ev(float(ex),simp) ) and are compared to the teacher's answer using the appropriate numerical test and accuracy. A uniform accuracy must be used. With lists the order is important, but with sets it is not. Checking whether two sets are approximately equal is an interesting mathematical problem....","title":"NumRelative &amp; NumAbsolute"},{"location":"Authoring/Answer_Tests/Numerical/#gt-gte","text":"\"Greater than\" or \"Greater than or equal to\". Both arguments are assumed to be numbers. The Answer test fully simplifies the SAns and converts this to a float if possible. This is needed to cope with expressions involving sums of surds, (\\pi) etc. Therefore, do expect some numerical rounding which may cause the test to fail in very sharp comparisons.","title":"GT &amp; GTE"},{"location":"Authoring/Answer_Tests/Numerical/#significant-figure-testing","text":"The significant figures of a number are digits that carry meaning. This includes all digits except leading zeros; trailing zeros when they are only placeholders to indicate the scale of the number. To establish the number of significant figures which arise from a calculation it is necessary to know the number of significant figures involved in the floating-point numbers used in the calculation. This causes a problem in assessment when we have a numerical expression, such as (100), and seek to infer the number of significant figures. Does this have one significant figure or three? The following cases illustrate the difficulties in inferring the number of significant digits from only the written form of a number. (0.0010) has exactly (2) significant digits. (100) has at least (1) and maybe even (3) significant digits. (1.00e3) has exactly (3) significant digits. (10.0) has exactly (3) significant digits. (0) has (1) significant digit. (0.00) has at least (1) and maybe even (3) significant digits. (0.01) has exactly (1) significant digit. Therefore, with trailing zeros there are a number of cases in which it is not possible to tell from the written form of an expression precisely how many significant digits are present in a student's answer. This creates a problem for automatic assessment. To avoid this ambiguity some scientists adopt a convention where (100) has exactly one significant digit . To express one hundred to three significant digits it is necessary to use (1.00e2). This conforms to the specifications in international standards and it certainly avoids ambiguity but in many assessment situations teachers do not want to enforce such strict rules. STACK seeks to provide tools for both situations: very strict enforcement of the significant figures rules (needed when teaching significant figures of course!) and a more liberal situation in which STACK will accept an input of (100) when the teacher wanted 1, 2 or 3 significant figures. In addition to the number of significant figures used to express the number, a teacher will also want to establish that the student actually has the right number! In more liberal situations a teacher will condone an error in the last place. E.g. they will accept an answer written to four significant figures, but where only three are actually correct.","title":"Significant figure testing"},{"location":"Authoring/Answer_Tests/Numerical/#strictsigfigs","text":"This test enforces the strict rules of significant figures. It does not check for numerical precision and looks only at surface features of the number representation. The option is the required number of significant figures. This must be an integer only.","title":"StrictSigFigs"},{"location":"Authoring/Answer_Tests/Numerical/#numsigfigs","text":"This is a more liberal test. Primarily it checks numerical accuracy, but it also checks the number of significant figures in a liberal way. That is to say, it makes sure that the number of significant figures specified by the teacher lies within the range inferred from the student's answer. For example, this test will accept (100) as being correctly written to 1, 2 or 3 significant figures. If you want to enforce the precise rules use the StrictSigFigs test. Tests whether the student's answer contains opt significant figures, and whether the answer is accurate to opt significant figures. If the option is a list [n,m] then we check the answer has been written to n significant figures, with an accuracy of up to m places. If the answer is too far out then rounding feedback will not be given. A common test would be to ask for ([n,n-1]) to permit the student to enter the last digit incorrectly. If the options are of the form [n,0] then only the number of significant figures in sa will be checked. This ignores any numerical accuracy and completely ignores the second argument to the function. Note, that this test is liberal in establishing the number of significant figures. For strict enforcement of the rules, use StrictSigFigs instead. If the options are of the form [n,-1] then the test checks the student has at least n significant figures in the answer, and that numerical accuracy is correct. This test only supports numbers where (|sa|<10^{22}). Please see the notes about numerical rounding for the differences between rounding. In NumSigFigs the teacher's answer will be rounded to the specified number of significant figures before a comparison is made.","title":"NumSigFigs"},{"location":"Authoring/Answer_Tests/Numerical/#numdecplaces","text":"Tests (i) whether the student's answer is equivalent to the teacher's and (ii) is written to opt decimal places. The option, which must be a positive integer, dictates the number of digits following the decimal separator . . Note that trailing zeros are ''required'', i.e. to two decimal places you must write 12.30 not just 12.3 . The test rounds the numbers to the specified number of decimal places before trying to establish equivalence.","title":"NumDecPlaces"},{"location":"Authoring/Answer_Tests/Numerical/#numdecplaceswrong","text":"Tests if the student appears to have the decimal point in the wrong place. For example, 3.141 and 31.41 will be considered the same under this test. opt is the number of places to consider, from the most significant. This test condones any lack of trailing zeros. Use other tests to establish if a student has sufficient places.","title":"NumDecPlacesWrong"},{"location":"Authoring/Answer_Tests/Numerical/#other-issues","text":"A teacher may wish to see if a student's answer is incorrect only by orders of magnitude. E.g. a student answers (110) instead of (1100). To do this, a teacher can check whether (\\log_{10}) of the ratio of two expressions is an integer, e.g. integerp(rat(float(log(sa/ta)/log(10)))) There is currently no functionality within the numerical answer tests to automatically check this, and there is no dedicated answer test to establish this property. A separate PRT node is needed.","title":"Other issues"},{"location":"Authoring/Answer_Tests/Numerical/#see-also","text":"Answer tests CAS and numbers Scientific units Maxima","title":"See also"},{"location":"Authoring/Answer_Tests/Other/","text":"Other answer tests There are a small number of answer tests for specific situations. Sets This test deals with equality of sets. The algebraic equivalence functions give very minimal feedback. This test is designed to give much more detailed feedback on what is and is not included in the student's answer. Hence, this essentially tells the student what is missing. This is kind of feedback is tedious to generate without this test. The test simplifies both sets, and does a comparison based on the simplified versions. The comparison relies on ev(..., simp, nouns) to undertake the simplification. If you need stronger simplification (e.g. trig) then you will need to add this to the arguments of the function first. Equiv and EquivFirstLast These answer tests are used with equivalence reasoning . See the separate documentation. PropLogic An answer test designed to deal with propositional logic . See the separate documentation.","title":"Other answer tests"},{"location":"Authoring/Answer_Tests/Other/#other-answer-tests","text":"There are a small number of answer tests for specific situations.","title":"Other answer tests"},{"location":"Authoring/Answer_Tests/Other/#sets","text":"This test deals with equality of sets. The algebraic equivalence functions give very minimal feedback. This test is designed to give much more detailed feedback on what is and is not included in the student's answer. Hence, this essentially tells the student what is missing. This is kind of feedback is tedious to generate without this test. The test simplifies both sets, and does a comparison based on the simplified versions. The comparison relies on ev(..., simp, nouns) to undertake the simplification. If you need stronger simplification (e.g. trig) then you will need to add this to the arguments of the function first.","title":"Sets"},{"location":"Authoring/Answer_Tests/Other/#equiv-and-equivfirstlast","text":"These answer tests are used with equivalence reasoning . See the separate documentation.","title":"Equiv and EquivFirstLast"},{"location":"Authoring/Answer_Tests/Other/#proplogic","text":"An answer test designed to deal with propositional logic . See the separate documentation.","title":"PropLogic"},{"location":"Authoring/Answer_Tests/Rule_based/","text":"Rules-based answer tests Rules-based answer tests are a special kind of mathematical answer test . Equality up to associativity and commutativity ### {#EqualComAss} The EqualComAss test establishes that two expressions are equal up to commutativity and associativity of addition and multiplication, together with their inverses minus and division. For example [a+b=b+a\\mbox{,}] but [x+x\\neq 2x\\mbox{.}] This is very useful in elementary algebra, where we want the form of the answer exactly. This test seeks to establish whether two expressions are the same when the basic operations of arithmetic addition/multiplication and Boolean and/or are assumed to be nouns but are commutative and associative. Hence, (2x+y=y+2x) but (x+x+y\\neq 2x+y). The unary minus commutes with multiplication in a way natural to establishing the required form of equivalence. This is a particularly useful test for checking that an answer is written in a particular form, e.g. \"simplified\". Notes This test does not include laws of indices, so (x\\times x \\neq x^2). Since we are dealing only with nouns (-\\times -) does not simplify to (1). E.g. (-x\\times -x \\neq x\\times x \\neq x^2). This also means that (\\sqrt{x}) is not considered to be equivalent to (x^{\\frac{1}{2}}) under this test. In many situations this notation is taken to mean the same thing, but internally in Maxima they are represented by different functions and are not converted to a canonical form by the test. By design, addition commutes with subtraction, so ( -1+2\\equiv 2-1) and multiplication commutes with division, so ( (ab)/c\\equiv a(b/c) ). By design (-1/4x \\neq -x/4) since we do not have the rule ( 1\\times x \\rightarrow x). To establish this equivalence we would need a different answer test. This test can also be used to establish ({4,4} \\neq {4}), but ({1,2} = {2,1}) since the arguments of the set constructor function are commutative. Sets are not associative, so ({1,2} \\neq {{1},2}). (See Maxima's flatten command.) Simplification is automatically switched off when this test is applied, otherwise it makes no sense. Unary minus and division In order to understand how the tests work it is essential to understand how we represent unary minus and division internally. Without simplification, Maxima has a unary minus function. Litterally minus(x) . This is transformed into UNARY_MINUS nounmul ex The use of multiplication here allows - to commute with other multiplication, so we can spot things like (-x \\times -y = --xy) using associativity and commutativity. Similarly, we replace division (a/b) with a nounmul UNARY_RECIP(b) . This means that UNARY_RECIP(b) is not automatically the same as 1 nounmul UNARY_RECIP(b) , without an additional rule. EqualComAssRules This is an advanced test. This test allows question authors to create equivalence classes based on equality up to associativity and commutativity with the addition of optional rules. For example, the teacher can include the identity operations of addition and multiplication: (0+ x\\rightarrow x) and (1\\times x\\rightarrow x). This makes it much easier to establish things like (0-1\\times i) is equivalent to (-i). However, more general integer arithmatic is still not automatically included so (2\\times 3 \\neq 6). This test always assumes associativity and commutativity of addition and multiplication. Essentially this test extends the EqualComAss test by adding in additional rules. Without assumptions of commutativity and associativity we would need all sorts of additional rules, such as (x+0 \\rightarrow x), since without commutativity this would not be captured by the rule zeroAdd , i.e. (0+x \\rightarrow x). Furthermore, the way EqualComAss deals with unary minus and division make associativity and commutativity difficult to add in their pure form. Each rule is a named function in Maxima, and each rule has an associated predicate function to decide if the rule is applicable at the top level of an expression. E.g. zeroAddp(0+x) would return true and zeroAdd(0+x) would return x . The teacher must supply an option consisting of a list of the following rule names. Name Rule ( ALG_TRANS ) Always included assAdd Associativity of addition assMul Associativity of multiplication comAdd Commutativity of addition comMul Commutativity of multiplication ( ID_TRANS ) zeroAdd (0+x \\rightarrow x) zeroMul (0\\times x \\rightarrow 0) oneMul (1\\times x \\rightarrow x) oneDiv (\\frac{x}{1} \\rightarrow x) onePow (1^x \\rightarrow 1) idPow (x^1 \\rightarrow x) zeroPow (0^x \\rightarrow 0) if (x \\neq 0) zPow (x^0 \\rightarrow 1) if (x \\neq 0) ( NEG_TRANS ) negNeg (-(-x) \\rightarrow x) negDiv ( y/(-x) \\rightarrow -y/x ) (Note, this assumes UNARY_RECIP and UNARY_MINUS ) negOrd Order summands so that the leading coefficient is not negative (see notes below). ( DIV_TRANS ) recipMul ( x/a\\times y/b \\rightarrow (x\\,y)/(a\\,b) ) divDiv ( a/(b/c) \\rightarrow a\\,c/b ) Note ( a/b/c ) is interpreted as ( (a/b)/c=a/(b\\,c) ) in Maxima. divCancel Cancel common factors in numerator and denominator. ( INT_ARITH ) intAdd Perform addition on integers intMul Perform multiplication on integers intPow Perform exponentiation when both arguments are integers Other intFac Factor integers (incompatible with intMul ) negDist Distribute only UNARY_MINUS over a sum (incompatible with negOrd ) sqrtRem Remove the sqrt function and replace with ^(1/2) The rule negOrd deserves comment. Ultimately we only compare parse trees exactly, and so we need to order terms in sums and products (commutativity). However (y-x) is never ordered as (-x+y). Furthermore, (-(x-y) \\neq -x+y). We need to factor out the unary minus and ensure that the coefficient of the leading term is not negative. Factoring out is better than distributing here, since in a produce such as (-(x-y)(x-z)) it is not clear which term in the product the inital minus sign will end up in. Since negOrd is a factor command, it is incompatible with negDist . For convenience sets of rules can be specificed. E.g. you can use the name ID_TRANS in place of the list [zeroAdd,zeroMul,oneMul,oneDiv,onePow,idPow,zeroPow,zPow] to include all of the basic identity operators. If you want to remove tests from a list you can use code such as delete(zeroAdd, ID_TRANS) . The test takes the student's answer and teacher's answer and repeatedly applies the rules in turn until the expressions remain the same. The rules are designed to always shorten the expression, so the process is guranteed to terminate. Once the expression is written in final form, the test compares the two expression trees. Note that we do not gurantee the simplification is mathematically correct! E.g. if you are unlucky enough to try the rule zeroPow on the expression 0^(1-1) then since 1-1 is not equal to zero (taken literally) then the rule applies and you have failed to spot a potential 0^0 error. If you add the rule testdebug then you will see both expressions in the answer note. This is useful for debugging, but would clutter up things in a production setting. Examples of use Unique prime factorisation Imagine we have asked students to find the prime decomposition of (1617 = 3^1\\cdot 7^2\\cdot 11^1). This is the answer we are aiming at, but we also want to condone the answer (3\\cdot 7^2\\cdot 11). We can do this with the rule [idPow] . We might also (being generous perhaps) want to also accept ( 2^0\\cdot 3^1\\cdot 5^0\\cdot 7^2\\cdot 11^1 ). We can do this with the three rules [oneMul,idPow,zPow] . You can try this code in the sandbox. ATEqualComAssRules(2^0*3^1*5^0*7^2*11^1, 3^1*7^2*11^1, [oneMul,idPow,zPow]); Note, this test always assumes commutativity so you can't (currently) enforce the order of writing the prime factors. Developer notes This functionality was introduced in April 2021. It is essential that the rules, and any combination of the rules, can only proceed in a single direction and that no infinite loops are created. So, intAdd is fine because adding together two integers will make an expression simpler which in this case is shorter. For this reason we do not have expanding out (i.e. distribution) rules in the above set, and no rules of indices (which readily lead to mathemtical errors). Use Maxima's simplifier if you want to include such rules. The rules names are Maxima functions, but they assume simp:false and that the expression has noun forms e.g. nounadd instead of + . You can use equals_commute_prepare(ex) to change an expression into this noun form. The goal of this code is to create reliable equivalence classes of expressions, not perform algebraic manipulation as we traditionally know it. In particular the way unary minus is transformed into multiplication with a special tag UNARY_MINUS is likely to cause confusion to students if an expression is manipulated using these rules and then shown to a student. The transoformation is designed to go in one direction only, and we do not support displaying the resulting manipulated expressions in traditional form. As of May 2023, these rules are not intended as an end-user simplifier and we do not currently support user-defined rules (sorry!). See also Answer tests","title":"Rules-based answer tests"},{"location":"Authoring/Answer_Tests/Rule_based/#rules-based-answer-tests","text":"Rules-based answer tests are a special kind of mathematical answer test .","title":"Rules-based answer tests"},{"location":"Authoring/Answer_Tests/Rule_based/#equality-up-to-associativity-and-commutativity-equalcomass","text":"The EqualComAss test establishes that two expressions are equal up to commutativity and associativity of addition and multiplication, together with their inverses minus and division. For example [a+b=b+a\\mbox{,}] but [x+x\\neq 2x\\mbox{.}] This is very useful in elementary algebra, where we want the form of the answer exactly. This test seeks to establish whether two expressions are the same when the basic operations of arithmetic addition/multiplication and Boolean and/or are assumed to be nouns but are commutative and associative. Hence, (2x+y=y+2x) but (x+x+y\\neq 2x+y). The unary minus commutes with multiplication in a way natural to establishing the required form of equivalence. This is a particularly useful test for checking that an answer is written in a particular form, e.g. \"simplified\". Notes This test does not include laws of indices, so (x\\times x \\neq x^2). Since we are dealing only with nouns (-\\times -) does not simplify to (1). E.g. (-x\\times -x \\neq x\\times x \\neq x^2). This also means that (\\sqrt{x}) is not considered to be equivalent to (x^{\\frac{1}{2}}) under this test. In many situations this notation is taken to mean the same thing, but internally in Maxima they are represented by different functions and are not converted to a canonical form by the test. By design, addition commutes with subtraction, so ( -1+2\\equiv 2-1) and multiplication commutes with division, so ( (ab)/c\\equiv a(b/c) ). By design (-1/4x \\neq -x/4) since we do not have the rule ( 1\\times x \\rightarrow x). To establish this equivalence we would need a different answer test. This test can also be used to establish ({4,4} \\neq {4}), but ({1,2} = {2,1}) since the arguments of the set constructor function are commutative. Sets are not associative, so ({1,2} \\neq {{1},2}). (See Maxima's flatten command.) Simplification is automatically switched off when this test is applied, otherwise it makes no sense.","title":"Equality up to associativity and commutativity ### {#EqualComAss}"},{"location":"Authoring/Answer_Tests/Rule_based/#unary-minus-and-division","text":"In order to understand how the tests work it is essential to understand how we represent unary minus and division internally. Without simplification, Maxima has a unary minus function. Litterally minus(x) . This is transformed into UNARY_MINUS nounmul ex The use of multiplication here allows - to commute with other multiplication, so we can spot things like (-x \\times -y = --xy) using associativity and commutativity. Similarly, we replace division (a/b) with a nounmul UNARY_RECIP(b) . This means that UNARY_RECIP(b) is not automatically the same as 1 nounmul UNARY_RECIP(b) , without an additional rule.","title":"Unary minus and division"},{"location":"Authoring/Answer_Tests/Rule_based/#equalcomassrules","text":"This is an advanced test. This test allows question authors to create equivalence classes based on equality up to associativity and commutativity with the addition of optional rules. For example, the teacher can include the identity operations of addition and multiplication: (0+ x\\rightarrow x) and (1\\times x\\rightarrow x). This makes it much easier to establish things like (0-1\\times i) is equivalent to (-i). However, more general integer arithmatic is still not automatically included so (2\\times 3 \\neq 6). This test always assumes associativity and commutativity of addition and multiplication. Essentially this test extends the EqualComAss test by adding in additional rules. Without assumptions of commutativity and associativity we would need all sorts of additional rules, such as (x+0 \\rightarrow x), since without commutativity this would not be captured by the rule zeroAdd , i.e. (0+x \\rightarrow x). Furthermore, the way EqualComAss deals with unary minus and division make associativity and commutativity difficult to add in their pure form. Each rule is a named function in Maxima, and each rule has an associated predicate function to decide if the rule is applicable at the top level of an expression. E.g. zeroAddp(0+x) would return true and zeroAdd(0+x) would return x . The teacher must supply an option consisting of a list of the following rule names. Name Rule ( ALG_TRANS ) Always included assAdd Associativity of addition assMul Associativity of multiplication comAdd Commutativity of addition comMul Commutativity of multiplication ( ID_TRANS ) zeroAdd (0+x \\rightarrow x) zeroMul (0\\times x \\rightarrow 0) oneMul (1\\times x \\rightarrow x) oneDiv (\\frac{x}{1} \\rightarrow x) onePow (1^x \\rightarrow 1) idPow (x^1 \\rightarrow x) zeroPow (0^x \\rightarrow 0) if (x \\neq 0) zPow (x^0 \\rightarrow 1) if (x \\neq 0) ( NEG_TRANS ) negNeg (-(-x) \\rightarrow x) negDiv ( y/(-x) \\rightarrow -y/x ) (Note, this assumes UNARY_RECIP and UNARY_MINUS ) negOrd Order summands so that the leading coefficient is not negative (see notes below). ( DIV_TRANS ) recipMul ( x/a\\times y/b \\rightarrow (x\\,y)/(a\\,b) ) divDiv ( a/(b/c) \\rightarrow a\\,c/b ) Note ( a/b/c ) is interpreted as ( (a/b)/c=a/(b\\,c) ) in Maxima. divCancel Cancel common factors in numerator and denominator. ( INT_ARITH ) intAdd Perform addition on integers intMul Perform multiplication on integers intPow Perform exponentiation when both arguments are integers Other intFac Factor integers (incompatible with intMul ) negDist Distribute only UNARY_MINUS over a sum (incompatible with negOrd ) sqrtRem Remove the sqrt function and replace with ^(1/2) The rule negOrd deserves comment. Ultimately we only compare parse trees exactly, and so we need to order terms in sums and products (commutativity). However (y-x) is never ordered as (-x+y). Furthermore, (-(x-y) \\neq -x+y). We need to factor out the unary minus and ensure that the coefficient of the leading term is not negative. Factoring out is better than distributing here, since in a produce such as (-(x-y)(x-z)) it is not clear which term in the product the inital minus sign will end up in. Since negOrd is a factor command, it is incompatible with negDist . For convenience sets of rules can be specificed. E.g. you can use the name ID_TRANS in place of the list [zeroAdd,zeroMul,oneMul,oneDiv,onePow,idPow,zeroPow,zPow] to include all of the basic identity operators. If you want to remove tests from a list you can use code such as delete(zeroAdd, ID_TRANS) . The test takes the student's answer and teacher's answer and repeatedly applies the rules in turn until the expressions remain the same. The rules are designed to always shorten the expression, so the process is guranteed to terminate. Once the expression is written in final form, the test compares the two expression trees. Note that we do not gurantee the simplification is mathematically correct! E.g. if you are unlucky enough to try the rule zeroPow on the expression 0^(1-1) then since 1-1 is not equal to zero (taken literally) then the rule applies and you have failed to spot a potential 0^0 error. If you add the rule testdebug then you will see both expressions in the answer note. This is useful for debugging, but would clutter up things in a production setting.","title":"EqualComAssRules"},{"location":"Authoring/Answer_Tests/Rule_based/#examples-of-use","text":"","title":"Examples of use"},{"location":"Authoring/Answer_Tests/Rule_based/#unique-prime-factorisation","text":"Imagine we have asked students to find the prime decomposition of (1617 = 3^1\\cdot 7^2\\cdot 11^1). This is the answer we are aiming at, but we also want to condone the answer (3\\cdot 7^2\\cdot 11). We can do this with the rule [idPow] . We might also (being generous perhaps) want to also accept ( 2^0\\cdot 3^1\\cdot 5^0\\cdot 7^2\\cdot 11^1 ). We can do this with the three rules [oneMul,idPow,zPow] . You can try this code in the sandbox. ATEqualComAssRules(2^0*3^1*5^0*7^2*11^1, 3^1*7^2*11^1, [oneMul,idPow,zPow]); Note, this test always assumes commutativity so you can't (currently) enforce the order of writing the prime factors.","title":"Unique prime factorisation"},{"location":"Authoring/Answer_Tests/Rule_based/#developer-notes","text":"This functionality was introduced in April 2021. It is essential that the rules, and any combination of the rules, can only proceed in a single direction and that no infinite loops are created. So, intAdd is fine because adding together two integers will make an expression simpler which in this case is shorter. For this reason we do not have expanding out (i.e. distribution) rules in the above set, and no rules of indices (which readily lead to mathemtical errors). Use Maxima's simplifier if you want to include such rules. The rules names are Maxima functions, but they assume simp:false and that the expression has noun forms e.g. nounadd instead of + . You can use equals_commute_prepare(ex) to change an expression into this noun form. The goal of this code is to create reliable equivalence classes of expressions, not perform algebraic manipulation as we traditionally know it. In particular the way unary minus is transformed into multiplication with a special tag UNARY_MINUS is likely to cause confusion to students if an expression is manipulated using these rules and then shown to a student. The transoformation is designed to go in one direction only, and we do not support displaying the resulting manipulated expressions in traditional form. As of May 2023, these rules are not intended as an end-user simplifier and we do not currently support user-defined rules (sorry!).","title":"Developer notes"},{"location":"Authoring/Answer_Tests/Rule_based/#see-also","text":"Answer tests","title":"See also"},{"location":"Authoring/Answer_Tests/String/","text":"String matching On rare occasions string matching is useful. A much more useful feature is the Damerau-Levenshtein distance . Since student's expressions are, by default, not permitted to contain spaces you will probably need to make use of the string input type. ATString This test performs a string match ignoring leading and trailing white space which are stripped from all answers, using PHP's trim() function. ATStringSloppy This test removes spaces, newlines and tabs and then performs a string match. ATSRegExp This test uses Maxima's regex_match function. Both arguments to the test must be Maxima strings. If you have a general expression, turn it into a string in the feedback variables with Maxima's string function. The first argument should be the string, and the second argument should be the pattern to match. It yields true if the pattern is matched anywhere within the student answer and false otherwise. Testing for full equality of the answer string can be achieved via regex anchoring by use of ^ or $ . Don't forget to escape within the pattern strings as needed. Note that there is a function string_to_regex() that will handle escaping of characters that would otherwise have meaning in the pattern. Also remember that you need to escape the backslashes like normal in Maxima-strings. That is to say, if you want to use \\s in a pattern you need to double up the backslashes. For example \"(Alice|Bob)\\\\s+went\\\\s+to\\\\s+the\\\\s+(bank|market)\" . One can read more about the patterns posible from here . Case-insensitivity may be something worth noting there. For example, write a STACK question with the following question variables. s1:\"(Alice|Bob)\\\\s+went\\\\s+to\\\\s+the\\\\s+(bank|market)\"; s2:\"Alice went to the market\"; s3:\"Bob went to the bank\"; Then Use the string input ( ans1 ) with teacher's answer s2 . In the PRT use the node ATSRegExp(ans1, s1) . This will use the pattern in the string s1 against the student's answer. This will match both strings s2 and s3 , and many others. regex_match_exactp STACK also provides a helper function regex_match_exactp(regex, str) to check if the string equals the pattern matched by the regular expression. Regex String Result (aaa)*(b|d)c aaaaaabc true (aaa)*(b|d)c dc true (aaa)*(b|d)c aaaaaaabc false (aaa)*(b|d)c cca false Currently this is not provided as a separate answer test so you will need to use this predicate in the question variables and check the result against the expected value, or supply the predicate as an argument to an answer test. For example, using the question variables above you can define the following in the feedback variables. sa:regex_match_exactp(s1, ans1); Then you can use the AlgEquiv answer test to check the result is true/false, e.g. ATAlgEquiv(sa, true) . (RegExp) NOTE: this test was removed in STACK version 4.3.","title":"String matching"},{"location":"Authoring/Answer_Tests/String/#string-matching","text":"On rare occasions string matching is useful. A much more useful feature is the Damerau-Levenshtein distance . Since student's expressions are, by default, not permitted to contain spaces you will probably need to make use of the string input type.","title":"String matching"},{"location":"Authoring/Answer_Tests/String/#atstring","text":"This test performs a string match ignoring leading and trailing white space which are stripped from all answers, using PHP's trim() function.","title":"ATString"},{"location":"Authoring/Answer_Tests/String/#atstringsloppy","text":"This test removes spaces, newlines and tabs and then performs a string match.","title":"ATStringSloppy"},{"location":"Authoring/Answer_Tests/String/#atsregexp","text":"This test uses Maxima's regex_match function. Both arguments to the test must be Maxima strings. If you have a general expression, turn it into a string in the feedback variables with Maxima's string function. The first argument should be the string, and the second argument should be the pattern to match. It yields true if the pattern is matched anywhere within the student answer and false otherwise. Testing for full equality of the answer string can be achieved via regex anchoring by use of ^ or $ . Don't forget to escape within the pattern strings as needed. Note that there is a function string_to_regex() that will handle escaping of characters that would otherwise have meaning in the pattern. Also remember that you need to escape the backslashes like normal in Maxima-strings. That is to say, if you want to use \\s in a pattern you need to double up the backslashes. For example \"(Alice|Bob)\\\\s+went\\\\s+to\\\\s+the\\\\s+(bank|market)\" . One can read more about the patterns posible from here . Case-insensitivity may be something worth noting there. For example, write a STACK question with the following question variables. s1:\"(Alice|Bob)\\\\s+went\\\\s+to\\\\s+the\\\\s+(bank|market)\"; s2:\"Alice went to the market\"; s3:\"Bob went to the bank\"; Then Use the string input ( ans1 ) with teacher's answer s2 . In the PRT use the node ATSRegExp(ans1, s1) . This will use the pattern in the string s1 against the student's answer. This will match both strings s2 and s3 , and many others.","title":"ATSRegExp"},{"location":"Authoring/Answer_Tests/String/#regex_match_exactp","text":"STACK also provides a helper function regex_match_exactp(regex, str) to check if the string equals the pattern matched by the regular expression. Regex String Result (aaa)*(b|d)c aaaaaabc true (aaa)*(b|d)c dc true (aaa)*(b|d)c aaaaaaabc false (aaa)*(b|d)c cca false Currently this is not provided as a separate answer test so you will need to use this predicate in the question variables and check the result against the expected value, or supply the predicate as an argument to an answer test. For example, using the question variables above you can define the following in the feedback variables. sa:regex_match_exactp(s1, ans1); Then you can use the AlgEquiv answer test to check the result is true/false, e.g. ATAlgEquiv(sa, true) . (RegExp) NOTE: this test was removed in STACK version 4.3.","title":"regex_match_exactp"},{"location":"Authoring/Answer_Tests/Results/","text":"Answer test results These pages expose the results of running answer tests on STACK test cases, including the automatically generated feedback. These page are automatically generated from the STACK unit tests and are designed to show question authors what answer tests actually do. This includes cases where answer tests currently fail, which gives a negative expected mark. AlgEquiv AlgEquivNouns SubstEquiv EqualComAss EqualComAssRules CasEqual SameType SysEquiv Sets Expanded FacForm CompSquare PropLogic Equiv EquivFirst SingleFrac PartFrac Diff Int GT GTE NumRelative NumAbsolute NumSigFigs NumDecPlaces NumDecPlacesWrong SigFigsStrict Units UnitsStrict UnitsRelative UnitsStrictRelative UnitsAbsolute UnitsStrictAbsolute String StringSloppy Levenshtein SRegExp LowestTerms Comments and further test cases are very welcome. See also Answer tests","title":"Answer test results"},{"location":"Authoring/Answer_Tests/Results/#answer-test-results","text":"These pages expose the results of running answer tests on STACK test cases, including the automatically generated feedback. These page are automatically generated from the STACK unit tests and are designed to show question authors what answer tests actually do. This includes cases where answer tests currently fail, which gives a negative expected mark. AlgEquiv AlgEquivNouns SubstEquiv EqualComAss EqualComAssRules CasEqual SameType SysEquiv Sets Expanded FacForm CompSquare PropLogic Equiv EquivFirst SingleFrac PartFrac Diff Int GT GTE NumRelative NumAbsolute NumSigFigs NumDecPlaces NumDecPlacesWrong SigFigsStrict Units UnitsStrict UnitsRelative UnitsStrictRelative UnitsAbsolute UnitsStrictAbsolute String StringSloppy Levenshtein SRegExp LowestTerms Comments and further test cases are very welcome.","title":"Answer test results"},{"location":"Authoring/Answer_Tests/Results/#see-also","text":"Answer tests","title":"See also"},{"location":"Authoring/Answer_Tests/Results/AlgEquiv/","text":"AlgEquiv: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. AlgEquiv Test ? Student response Teacher answer Opt Mark Answer note AlgEquiv 1/0 1 -1 ATAlgEquiv_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. AlgEquiv 1 1/0 -1 ATAlgEquiv_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. AlgEquiv (x-1)^2 -1 ATAlgEquivTEST_FAILED-Empty SA. The answer test failed to execute correctly: please alert your teacher. Attempted to execute an answer test with an empty student answer, probably a CAS validation problem when authoring the question. AlgEquiv x^2 -1 ATAlgEquivTEST_FAILED-Empty TA. The answer test failed to execute correctly: please alert your teacher. Attempted to execute an answer test with an empty teacher answer, probably a CAS validation problem when authoring the question. AlgEquiv x-1)^2 (x-1)^2 -1 ATAlgEquivTEST_FAILED-Empty SA. The answer test failed to execute correctly: please alert your teacher. Attempted to execute an answer test with an empty student answer, probably a CAS validation problem when authoring the question. See docs on subscripts and different atoms. AlgEquiv x1 x_1 0 AlgEquiv x_1 x[1] 0 AlgEquiv x[1] x1 0 Predicates AlgEquiv integerp(3) true 1 ATLogic_True. AlgEquiv integerp(3.1) true 0 AlgEquiv integerp(3) false 0 AlgEquiv integerp(3) true 1 ATLogic_True. AlgEquiv lowesttermsp(x^2/x) true 1 ATLogic_True. AlgEquiv lowesttermsp(-y/-x) true 1 ATLogic_True. AlgEquiv lowesttermsp((x^2-1)/(x-1)) true 0 AlgEquiv lowesttermsp((x^2-1)/(x+2)) true 1 ATLogic_True. Case sensitivity AlgEquiv X x 0 ATAlgEquiv_WrongCase. AlgEquiv exdowncase(X) x 1 AlgEquiv exdowncase((X-1)^2) x^2-2*x+1 1 Permutations of variables (To do: a dedicated answer test with feedback) AlgEquiv Y=1+X y=1+x 0 ATEquation_default AlgEquiv v+w+x+y+z a+b+c+A+B 0 Numbers AlgEquiv 4^(-1/2) 1/2 1 AlgEquiv 4^(1/2) sqrt(4) 1 Mix of floats and rational numbers AlgEquiv 0.5 1/2 1 AlgEquiv 0.33 1/3 0 AlgEquiv 452 4.52*10^2 0 AlgEquiv 5.1e-2 51/1000 1 AlgEquiv 0.333333333333333 1/3 0 AlgEquiv (0.5+x)*2 2*x+1 1 Complex numbers AlgEquiv sqrt(-1) %i 1 AlgEquiv %i e^(i*pi/2) 1 AlgEquiv (4*sqrt(3)*%i+4)^(1/5) 8^(1/5)*(cos(%pi/15)+%i*sin(%p i/15)) 1 AlgEquiv (4*sqrt(3)*%i+4)^(1/5) rectform((4*sqrt(3)*%i+4)^(1/5 )) 1 AlgEquiv (4*sqrt(3)*%i+4)^(1/5) polarform((4*sqrt(3)*%i+4)^(1/ 5)) 1 AlgEquiv %i/sqrt(x) sqrt(-1/x) 1 Infinity AlgEquiv inf inf 1 AlgEquiv inf -inf 0 AlgEquiv 2*inf inf 0 AlgEquiv 0*inf 0 1 Powers and roots AlgEquiv x^(1/2) sqrt(x) 1 AlgEquiv x sqrt(x^2) 0 AlgEquiv abs(x) sqrt(x^2) 1 AlgEquiv 1/abs(x)^(1/3) (abs(x)^(1/3)/abs(x))^(1/2) 1 AlgEquiv sqrt((x-3)*(x-5)) sqrt(x-3)*sqrt(x-5) 0 AlgEquiv 1/sqrt(x) sqrt(1/x) 1 AlgEquiv x-1 (x^2-1)/(x+1) 1 AlgEquiv 2^((1/5.1)*t) 2^((1/5.1)*t) 1 AlgEquiv 2^((1/5.1)*t) 2^(0.196078431373*t) 0 AlgEquiv a^b*a^c a^(b+c) 1 AlgEquiv (a^b)^c a^(b*c) 0 AlgEquiv (assume(a>0),(a^b)^c) a^(b*c) 1 AlgEquiv (assume(x>2),6*((x-2)^2)^k) 6*(x-2)^(2*k) 1 AlgEquiv signum(-3) -1 1 AlgEquiv 6*((x-2)^3)^k 6*(x-2)^(3*k) 1 AlgEquiv (4*sqrt(3)*%i+4)^(1/5) 6^(1/5)*cos(%pi/15)-6^(1/5)*%i *sin(%pi/15) 0 AlgEquiv 2+2*sqrt(3+x) 2+sqrt(12+4*x) 1 AlgEquiv 6*e^(6*(y^2+x^2))+72*x^2*e^(6* (y^2+x^2)) (72*x^2+6)*e^(6*(y^2+x^2)) 1 Expressions with subscripts AlgEquiv a1 a_1 0 AlgEquiv rho*z*V/(4*pi*epsilon[0]*(R^2+ z^2)^(3/2)) rho*z*V/(4*pi*epsilon[0]*(R^2+ z^2)^(3/2)) 1 AlgEquiv rho*z*V/(4*pi*epsilon[1]*(R^2+ z^2)^(3/2)) rho*z*V/(4*pi*epsilon[0]*(R^2+ z^2)^(3/2)) 0 AlgEquiv sqrt(k/m)*sqrt(m/k) 1 1 AlgEquiv (2*pi)/(k/m)^(1/2) (2*pi)/(k/m)^(1/2) 1 AlgEquiv (2*pi)*(m/k)^(1/2) (2*pi)/(k/m)^(1/2) 1 AlgEquiv sqrt(2*x/10+1) sqrt((2*x+10)/10) 1 AlgEquiv ((x+3)^2*(x+3))^(1/3) ((x+3)*(x^2+6*x+9))^(1/3) 1 Need to factor internally. AlgEquiv ((x+3)^2*(x+3))^(1/3) ((x+3)*(x^2+6*x+9))^(1/3) 1 Polynomials and rational function AlgEquiv (x-1)^2 x^2-2*x+1 1 AlgEquiv (x-1)*(x^2+x+1) x^3-1 1 AlgEquiv (x-1)^(-2) 1/(x^2-2*x+1) 1 AlgEquiv 1/(4*x-(%pi+sqrt(2))) 1/(x+1) 0 AlgEquiv (x-a)^6000 (x-a)^6000 1 AlgEquiv (a-x)^6000 (x-a)^6000 1 AlgEquiv (4*a-x)^6000 (x-4*a)^6000 1 AlgEquiv (x-a)^6000 (x-a)^5999 0 AlgEquiv (k+8)/(k^2+4*k-12) (k+8)/(k^2+4*k-12) 1 AlgEquiv (k+7)/(k^2+4*k-12) (k+8)/(k^2+4*k-12) 0 AlgEquiv -(2*k+6)/(k^2+4*k-12) -(2*k+6)/(k^2+4*k-12) 1 AlgEquiv 1/n-1/(n+1) 1/(n*(n+1)) 1 AlgEquiv 0.5*x^2+3*x-1 x^2/2+3*x-1 1 AlgEquiv 14336000000*x^13+250265600000* x^12+1862860800000*x^11+762392 5760000*x^10+18290677760000*x^ 9+24744757985280*x^8+145672123 51488*x^7-3267871272960*x^6-64 08053107200*x^5+670406720000*x ^4+1179708800000*x^3-429244800 000*x^2+56696000000*x-26800000 00 512*(2*x+5)^7*(5*x-1)^5*(70*x+ 67) 1 AlgEquiv 14336000000*x^13+250265600000* x^12+1862860800000*x^11+762392 5760000*x^10+18290677760000*x^ 9+24744757985280*x^8+145672123 51488*x^7-3267871272960*x^6-64 08053107200*x^5+670406720000*x ^4+1179708800000*x^3-429244800 000*x^2+56696000000*x-26800000 01 512*(2*x+5)^7*(5*x-1)^5*(70*x+ 67) 0 AlgEquiv 14336000000*x^13 512*(2*x+5)^7*(5*x-1)^5*(70*x+ 67) 0 Trig functions AlgEquiv cos(x) cos(-x) 1 AlgEquiv cos(x)^2+sin(x)^2 1 1 AlgEquiv cos(x+y) cos(x)*cos(y)-sin(x)*sin(y) 1 AlgEquiv cos(x+y) cos(x)*cos(y)+sin(x)*sin(y) 0 AlgEquiv cos(x#pm#y) cos(x)*cos(y)-(#pm#sin(x)*sin( y)) 1 ATLogic_True. AlgEquiv sin(x#pm#y) sin(x)*cos(y)#pm#cos(x)*sin(y) 1 ATLogic_True. AlgEquiv sin(x#pm#y) cos(x)*sin(y)#pm#sin(x)*cos(y) 0 AlgEquiv 2*cos(x)^2-1 cos(2*x) 1 AlgEquiv 1.0*cos(1200*%pi*x) cos(1200*%pi*x) 1 AlgEquiv diff(tan(10*x)^2,x) cos(6*x) 0 AlgEquiv exp(%i*%pi) -1 1 AlgEquiv 2*cos(2*x)+x+1 -sin(x)^2+3*cos(x)^2+x 1 AlgEquiv (2*sec(2*t)^2-2)/2 -(sin(4*t)^2-2*sin(4*t)+cos(4* t)^2-1)*(sin(4*t)^2+2*sin(4*t) +cos(4*t)^2-1)/(sin(4*t)^2+cos (4*t)^2+2*cos(4*t)+1)^2 1 AlgEquiv 1+cosec(3*x) 1+csc(3*x) 1 AlgEquiv 1/(1+exp(-2*x)) tanh(x)/2+1/2 1 AlgEquiv 1+cosech(3*x) 1+csch(3*x) 1 AlgEquiv -4*sec(4*z)^2*sin(6*z)-6*tan(4 *z)*cos(6*z) -4*sec(4*z)^2*sin(6*z)-6*tan(4 *z)*cos(6*z) 1 AlgEquiv -4*sec(4*z)^2*sin(6*z)-6*tan(4 *z)*cos(6*z) 4*sec(4*z)^2*sin(6*z)+6*tan(4* z)*cos(6*z) 0 AlgEquiv csc(6*x)^2*(7*sin(6*x)*cos(7*x )-6*cos(6*x)*sin(7*x)) -(6*cos(6*x)*sin(7*x)-7*sin(6* x)*cos(7*x))/sin(6*x)^2 1 AlgEquiv csc(6*x)^2*(7*sin(6*x)*cos(7*x )-6*cos(6*x)*sin(7*x)) (6*cos(6*x)*sin(7*x)-7*sin(6*x )*cos(7*x))/sin(6*x)^2 0 AlgEquiv -(7*x^6+4*x^3)/sin(7*y+x^7+x^4 +1)^2 -(7*x^6+4*x^3)*csc(7*y+x^7+x^4 +1)^2 1 AlgEquiv sin((2*%pi*n-%pi)/2) -cos(n*%pi) 1 AlgEquiv sin(x/2)/(1+tan(x)*tan(x/2)) sin(x/2)*cos(x) 1 AlgEquiv (declare(n,integer),trigrat(si n((2*%pi*n-%pi)/2))) -(-1)^n 1 AlgEquiv ! cot(%pi/20)+cot(%pi/24)-cot(%p i/10) sqrt(1)+sqrt(2)+sqrt(3)+sqrt(4 )+sqrt(5)+sqrt(6) -3 AlgEquiv trigeval(cot(%pi/20)+cot(%pi/2 4)-cot(%pi/10)) sqrt(1)+sqrt(2)+sqrt(3)+sqrt(4 )+sqrt(5)+sqrt(6) 1 AlgEquiv ! sin([1/8,1/6, 1/4, 1/3, 1/2, 1 ]*%pi) [sqrt(2-sqrt(2))/2,1/2,1/sqrt( 2),sqrt(3)/2,1,0] -3 (ATList_wrongentries 1). The entries underlined in red below are those that are incorrect. \\[\\left[ {\\color{red}{\\underline{\\sin \\left( \\frac{\\pi}{8} \\right)}}} , \\frac{1}{2} , \\frac{1}{\\sqrt{2}} , \\frac{\\sqrt{3}}{2} , 1 , 0 \\right] \\] AlgEquiv trigeval(sin([1/8,1/6, 1/4, 1/ 3, 1/2, 1]*%pi)) [sqrt(2-sqrt(2))/2,1/2,1/sqrt( 2),sqrt(3)/2,1,0] 1 AlgEquiv 1+x taylor(1/(1-x),x,0,1) 1 AlgEquiv 1 taylor(1/(1-x),x,0,1) 0 Logarithms AlgEquiv log(a^2*b) 2*log(a)+log(b) 1 AlgEquiv (2*log(2*x)+x)/(2*x) (log(2*x)+2)/(2*sqrt(x)) 0 AlgEquiv log(abs((x^2-9))) log(abs(x-3))+log(abs(x+3)) 0 AlgEquiv lg(10^x) x 1 AlgEquiv lg(3^x,3) x 1 AlgEquiv lg(a^x,a) x 1 AlgEquiv 1+lg(27,3) 4 1 AlgEquiv 1+lg(27,3) 3 0 AlgEquiv lg(1/8,2) -3 1 AlgEquiv lg(root(x,n)) lg(x,10)/n 1 AlgEquiv log(root(x,n)) lg(x,10)/n 0 AlgEquiv x^log(y) y^log(x) 1 Hyperbolic trig AlgEquiv e^1-e^(-1) 2*sinh(1) 1 Lists AlgEquiv x [1,2,3] 0 ATAlgEquiv_SA_not_list. Your answer should be a list, but is not. Note that the syntax to enter a list is to enclose the comma separated values with square brackets. AlgEquiv [1,2] [1,2,3] 0 ATList_wronglen. Your list should have \\(3\\) elements, but it actually has \\(2\\) . AlgEquiv [1,2,4] [1,2,3] 0 (ATList_wrongentries 3). The entries underlined in red below are those that are incorrect. \\[\\left[ 1 , 2 , {\\color{red}{\\underline{4}}} \\right] \\] AlgEquiv [1,x>2] [1,2<x] 1 AlgEquiv [1,2,[2-x<0,{1,2,2,2, 1,3}] ] [1,2,[2-x<0,{1,2}]] 0 (ATList_wrongentries 3: (ATList_wrongentries 2: ATSet_wrongsz)). The entries underlined in red below are those that are incorrect. \\[\\left[ 1 , 2 , \\left[ 2-x < 0 , \\left \\{1 , 2 , 3 \\right \\} \\right] \\right] \\] AlgEquiv [(k+8)/(k^2+4*k-12),-(2*k+6)/( k^2+4*k-12)] [(k+8)/(k^2+4*k-12),-(2*k+6)/( k^2+4*k-12)] 1 AlgEquiv [1,2] ntuple(1,2) 0 ATAlgEquiv_SA_not_expression. Your answer should be an expression, not an equation, inequality, list, set or matrix. Rounding of floats AlgEquiv round(0.5) 0.0 1 AlgEquiv round(1.5) 2.0 1 AlgEquiv round(2.5) 2.0 1 AlgEquiv round(12.5) 12.0 1 AlgEquiv significantfigures(0.5,1) 0.5 1 AlgEquiv significantfigures(1.5,1) 2.0 1 AlgEquiv significantfigures(2.5,1) 3.0 1 AlgEquiv significantfigures(3.5,1) 4.0 1 AlgEquiv significantfigures(11.5,2) 12.0 1 AlgEquiv 1500 scientific_notation(1500,3) 1 AlgEquiv 1500 displaysci(1.5,2,3) 1 AlgEquiv [3,3.1,3.14,3.142,3.1416,3.141 59,3.141593,3.1415927] makelist(significantfigures(%p i,i),i,8) 1 Sets AlgEquiv x {1,2,3} 0 ATAlgEquiv_SA_not_set. Your answer should be a set, but is not. Note that the syntax to enter a set is to enclose the comma separated values with curly brackets. AlgEquiv co(1,2) {1,2,3} 0 ATAlgEquiv_SA_not_set. Your answer should be a set, but is not. Note that the syntax to enter a set is to enclose the comma separated values with curly brackets. AlgEquiv {1,2} {1,2,3} 0 ATSet_wrongsz. Your set should have \\(3\\) different elements, but it actually has \\(2\\) . AlgEquiv {2/4, 1/3} {1/2, 1/3} 1 AlgEquiv {A[1],A[2],A[4]} {A[1],A[2],A[3]} 0 ATSet_wrongentries. The following entries are incorrect, although they may appear in a simplified form from that which you actually entered. \\[\\left \\{A_{4} \\right \\}\\] AlgEquiv {A[1],A[2],A[3]} {A[1],A[2],A[3]} 1 AlgEquiv {1,2,4} {1,2,3} 0 ATSet_wrongentries. The following entries are incorrect, although they may appear in a simplified form from that which you actually entered. \\[\\left \\{4 \\right \\}\\] AlgEquiv {1,x>4} {4<x, 1} 1 AlgEquiv {x-1=0,x>1 and 5>x} {x>1 and x<5,x=1} 1 AlgEquiv {x-1=0,x>1 and 5>x} {x>1 and x<5,x=2} 0 ATSet_wrongentries. The following entries are incorrect, although they may appear in a simplified form from that which you actually entered. \\[\\left \\{x-1=0 \\right \\}\\] AlgEquiv {x-1=0,x>1 and 5>x} {x>1 and x<3,x=1} 0 ATSet_wrongentries. The following entries are incorrect, although they may appear in a simplified form from that which you actually entered. \\[\\left \\{5-x > 0\\,{\\mbox{ and }}\\, x-1 > 0 \\right \\}\\] Equivalence for elements of sets is different from expressions: see docs. AlgEquiv ! {-sqrt(2)/sqrt(3)} {-2/sqrt(6)} -3 ATSet_wrongentries. The following entries are incorrect, although they may appear in a simplified form from that which you actually entered. \\[\\left \\{-\\frac{\\sqrt{2}}{\\sqrt{3}} \\right \\}\\] AlgEquiv ! {[-sqrt(2)/sqrt(3),0],[2/sqrt( 6),0]} {[2/sqrt(6),0],[-2/sqrt(6),0]} -3 ATSet_wrongentries. The following entries are incorrect, although they may appear in a simplified form from that which you actually entered. \\[\\left \\{\\left[ -\\frac{\\sqrt{2}}{\\sqrt{3}} , 0 \\right] \\right \\}\\] AlgEquiv ev(radcan({-sqrt(2)/sqrt(3)}), simp) ev(radcan({-2/sqrt(6)}),simp) 1 AlgEquiv ev(radcan(ratsimp({(-sqrt(10)/ 2)-2,sqrt(10)/2-2},algebraic:t rue)),simp) ev(radcan(ratsimp({(-sqrt(5)/s qrt(2))-2,sqrt(5)/sqrt(2)-2},a lgebraic:true)),simp) 1 AlgEquiv {(2-2^(5/2))/2,(2^(5/2)+2)/2} {1-2^(3/2),2^(3/2)+1} 0 ATSet_wrongentries. The following entries are incorrect, although they may appear in a simplified form from that which you actually entered. \\[\\left \\{\\frac{2-2^{\\frac{5}{2}}}{2} , \\frac{2^{\\frac{5}{2}}+2}{2} \\right \\}\\] AlgEquiv ev(radcan({(2-2^(5/2))/2,(2^(5 /2)+2)/2}),simp) {1-2^(3/2),2^(3/2)+1} 1 AlgEquiv {(x-a)^6000} {(a-x)^6000} 0 ATSet_wrongentries. The following entries are incorrect, although they may appear in a simplified form from that which you actually entered. \\[\\left \\{{\\left(x-a\\right)}^{6000} \\right \\}\\] AlgEquiv {(k+8)/(k^2+4*k-12),-(2*k+6)/( k^2+4*k-12)} {(k+8)/(k^2+4*k-12),-(2*k+6)/( k^2+4*k-12)} 1 Matrices AlgEquiv matrix([1,2],[2,3]) matrix([1,2],[2,3]) 1 AlgEquiv matrix([1,2],[2,3]) matrix([1,2,3],[2,3,3]) 0 ATMatrix_wrongsz_columns. Your matrix should be \\(2\\) by \\(3\\) , but it is actually \\(2\\) by \\(2\\) . AlgEquiv matrix([1,2],[2,3]) matrix([1,2],[2,5]) 0 ATMatrix_wrongentries. The entries underlined in red below are those that are incorrect. \\[ \\left[\\begin{array}{cc} 1 & 2 \\\\ 2 & {\\color{red}{\\underline{3}}} \\end{array}\\right]\\] AlgEquiv matrix([0.33,1],[1,1]) matrix([0.333,1],[1,1]) 0 ATMatrix_wrongentries. The entries underlined in red below are those that are incorrect. \\[ \\left[\\begin{array}{cc} {\\color{red}{\\underline{0.33}}} & 1 \\\\ 1 & 1 \\end{array}\\right]\\] AlgEquiv matrix([x+x,2],[2,x*x]) matrix([2*x,2],[2,x^2]) 1 AlgEquiv matrix([epsilon[0],2],[2,x^2]) matrix([epsilon[0],2],[2,x^2]) 1 AlgEquiv matrix([epsilon[2],2],[2,x^2]) matrix([epsilon[0],2],[2,x^3]) 0 ATMatrix_wrongentries. The entries underlined in red below are those that are incorrect. \\[ \\left[\\begin{array}{cc} {\\color{red}{\\underline{\\varepsilon_{2}}}} & 2 \\\\ 2 & {\\color{red}{\\underline{x^2}}} \\end{array}\\right]\\] AlgEquiv matrix([x>4,{1,x^2}],[[1,2] ,[1,3]]) matrix([4-x<0,{x^2, 1}],[[1 ,2],[1,3]]) 1 AlgEquiv matrix([x>4,{1,x^2}],[[1,2] ,[1,3]]) matrix([4-x<0,{x^2, 1}],[[1 ,2],[1,4]]) 0 ATMatrix_wrongentries. The entries underlined in red below are those that are incorrect. \\[ \\left[\\begin{array}{cc} x > 4 & \\left \\{1 , x^2 \\right \\} \\\\ \\left[ 1 , 2 \\right] & \\left[ 1 , {\\color{red}{\\underline{3}}} \\right] \\end{array}\\right]\\] Vectors AlgEquiv a stackvector(a) 0 Equations AlgEquiv 1 x=1 0 ATAlgEquiv_SA_not_equation. Your answer should be an equation, but is not. AlgEquiv x=1 x=1 1 ATEquation_sides AlgEquiv 1=x 1=x 1 ATEquation_sides AlgEquiv 1=x x=1 1 ATEquation_sides_op AlgEquiv 1=1 1=x 0 ATEquation_default AlgEquiv 1=1 x=1 0 ATEquation_default AlgEquiv x=2 x=1 0 ATEquation_lhs_notrhs AlgEquiv 2=x x=1 0 ATEquation_default AlgEquiv x=x y=y 1 ATEquation_zero AlgEquiv x+y=1 y=1-x 1 AlgEquiv 2*x+2*y=1 y=0.5-x 1 ATEquation_ratio AlgEquiv 1/x+1/y=2 y = x/(2*x-1) 1 ATEquation_ratio AlgEquiv y=sin(2*x) y/2=cos(x)*sin(x) 1 ATEquation_ratio AlgEquiv y=(x-a)^6000 y=(x-a)^6000 1 ATEquation_sides AlgEquiv y=(x-a)^5999 y=(x-a)^6000 0 ATEquation_lhs_notrhs AlgEquiv y=(a-x)^6000 y=(x-a)^6000 1 ATEquation_sides AlgEquiv y=(a-x)^5999 y=(x-a)^5999 0 ATEquation_lhs_notrhs AlgEquiv y=(a-x)^59999 y=(x-a)^5999 0 ATEquation_lhs_notrhs AlgEquiv x+y=i y=i-x 1 AlgEquiv (1+%i)*(x+y)=0 y=-x 1 AlgEquiv s^2*%e^(s*t)=0 s^2=0 0 ATEquation_default AlgEquiv 0=-x+y/A+(y-z)/B 0=x-y/A-(y-z)/B 1 AlgEquiv x^6000-x^6001=x^5999 x^5999*(1-x+x^2)=0 1 ATEquation_ratio AlgEquiv x^6000-x^6001=x^5999 x^5999*(1-x+x^3)=0 0 ATEquation_default AlgEquiv 258552*x^7*(81*x^8+1)^398 x^3*(x^4+1)^399 0 AlgEquiv Ia*(R1+R2+R3)-Ib*R3=0 -Ia*(R1+R2+R3)+Ib*R3=0 1 AlgEquiv a=0 or b=0 a*b=0 1 ATEquation_sides AlgEquiv a*b=0 a=0 or b=0 1 ATEquation_sides AlgEquiv a*x=a*y x=y 0 ATEquation_default AlgEquiv a*x=a*y a=0 or x=y 1 ATEquation_ratio Unary Equations AlgEquiv 1 stackeq(1) 1 AlgEquiv stackeq(1) 1 1 AlgEquiv stackeq(1) 0 0 Equations: Loose/gain roots with nth powers of each side. AlgEquiv x=y x^2=y^2 0 ATEquation_default AlgEquiv (x-2)^2=0 x=2 0 ATEquation_default AlgEquiv 4*x^2-71*x+220 = 0 or 14*x^2-9 1*x+140 = 0 x = 5/2 or x = 4 or x = 55/4 0 ATEquation_default AlgEquiv 4*x^2-71*x+220 = 0 or 14*x^2-9 1*x+140 = 0 x = 5/2 or x = 4 or x=4 or x = 55/4 1 ATEquation_sides AlgEquiv x^2=4 x=2 or x=-2 1 ATEquation_ratio AlgEquiv a^3*b^3=0 a=0 or b=0 0 ATEquation_default AlgEquiv a^3*b^3=0 a*b=0 0 ATEquation_default AlgEquiv (x-y)*(x+y)=0 x^2=y^2 1 ATEquation_ratio AlgEquiv x=1 (x-1)^3=0 0 ATEquation_default AlgEquiv sqrt(x)=sqrt(y) x=y 0 ATEquation_default AlgEquiv x=sqrt(a) x^2=a 0 ATEquation_default AlgEquiv (x-sqrt(a))*(x+sqrt(a))=0 x^2=a 1 ATEquation_ratio AlgEquiv (x-%i*sqrt(a))*(x+%i*sqrt(a))= 0 x^2=-a 1 ATEquation_ratio AlgEquiv (x-%i*sqrt(abs(a)))*(x+%i*sqrt (abs(a)))=0 x^2=-abs(a) 1 ATEquation_ratio AlgEquiv y=sqrt(1-x^2) x^2+y^2=1 0 ATEquation_default AlgEquiv (y-sqrt(1-x^2))*(y+sqrt(1-x^2) )=0 x^2+y^2=1 1 ATEquation_ratio AlgEquiv (y-sqrt((1-x)*(1+x)))*(y+sqrt( (1-x)*(1+x)))=0 x^2+y^2=1 1 ATEquation_ratio AlgEquiv (x-1)*(x+1)*(y-1)*(y+1)=0 y^2+x^2=1+x^2*y^2 1 ATEquation_ratio Equations: edge cases. Teacher must enter an equation, all or none here. AlgEquiv all x=x 1 ATEquation_zero AlgEquiv true x=x 1 ATEquation_zero AlgEquiv x=x all 1 ATEquation_zero AlgEquiv all all 1 ATEquation_zero AlgEquiv true all 1 ATEquation_zero AlgEquiv a=a x=x 1 ATEquation_zero AlgEquiv false x=x 0 ATEquation_zero_fail AlgEquiv false all 0 ATEquation_zero_fail AlgEquiv none all 0 ATEquation_zero_fail AlgEquiv all none 0 ATEquation_empty_fail AlgEquiv 2=3 1=4 1 ATEquation_empty AlgEquiv none 1=2 1 ATEquation_empty AlgEquiv false 1=2 1 ATEquation_empty AlgEquiv none none 1 ATEquation_empty AlgEquiv false none 1 ATEquation_empty AlgEquiv 3=0 none 1 ATEquation_empty AlgEquiv 0=3 none 1 ATEquation_empty AlgEquiv all 1=2 0 ATEquation_empty_fail AlgEquiv true 1=2 0 ATEquation_empty_fail AlgEquiv {} 1=2 0 ATAlgEquiv_SA_not_equation. Your answer should be an equation, but is not. AlgEquiv [] 1=2 0 ATAlgEquiv_SA_not_equation. Your answer should be an equation, but is not. AlgEquiv {} none 0 ATAlgEquiv_SA_not_logic. Your answer should be an equation, inequality or a logical combination of many of these, but is not. Sets of real numbers AlgEquiv x^2 cc(1,3) 0 ATAlgEquiv_SA_not_realset. Your answer should be a subset of the real numbers. This could be a set of numbers, or a collection of intervals. AlgEquiv %union(oo(1,2),oo(3,4)) %union(oo(1,2),oo(3,4)) 1 ATRealSet_true. AlgEquiv %union(oc(1,2),co(2,3)) oo(1,3) 1 ATRealSet_true. AlgEquiv %union(oc(1,2),co(2,3)) cc(1,3) 0 ATRealSet_false. AlgEquiv {-1,1} %union({-1,1}) 1 ATRealSet_true. AlgEquiv {1,3} cc(1,3) 0 ATRealSet_false. AlgEquiv %intersection(oc(-1,1),co(1,2) ) %union({1}) 1 ATRealSet_true. AlgEquiv oo(-inf,1) oo(-inf,1) 1 ATRealSet_true. AlgEquiv oo(-1,inf) oo(0,inf) 0 ATRealSet_false. AlgEquiv %union(oc(-inf,0),oo(-1,4)) oo(-inf,4) 1 ATRealSet_true. AlgEquiv %union(oo(-inf,1),oo(-1,inf)) oo(-inf,inf) 1 ATRealSet_true. AlgEquiv all oo(-inf,inf) 1 ATRealSet_true. AlgEquiv co(1,2) 1 <= x nounand x<2 0 ATAlgEquiv_SA_not_logic. Your answer should be an equation, inequality or a logical combination of many of these, but is not. AlgEquiv 1 <= x nounand x<2 co(1,2) 0 ATAlgEquiv_SA_not_realset. Your answer should be a subset of the real numbers. This could be a set of numbers, or a collection of intervals. AlgEquiv minf <= x co(minf,inf) 0 ATAlgEquiv_SA_not_realset. Your answer should be a subset of the real numbers. This could be a set of numbers, or a collection of intervals. AlgEquiv -inf <= x co(minf,inf) 0 ATAlgEquiv_SA_not_realset. Your answer should be a subset of the real numbers. This could be a set of numbers, or a collection of intervals. AlgEquiv x <= inf oc(minf,inf) 0 ATAlgEquiv_SA_not_realset. Your answer should be a subset of the real numbers. This could be a set of numbers, or a collection of intervals. AlgEquiv minf <= x oo(minf,inf) 0 ATAlgEquiv_SA_not_realset. Your answer should be a subset of the real numbers. This could be a set of numbers, or a collection of intervals. AlgEquiv single_variable_solver_real(mi nf <= x) co(minf,inf) 1 ATRealSet_true. AlgEquiv single_variable_solver_real(-i nf <= x) co(minf,inf) 1 ATRealSet_true. AlgEquiv single_variable_solver_real(x <= inf) oc(minf,inf) 1 ATRealSet_true. AlgEquiv single_variable_solver_real(mi nf <= x) oo(minf,inf) 0 ATRealSet_false. Complex numbers AlgEquiv a=b/%i %i*a=b 1 ATEquation_num_i AlgEquiv b/%i=a %i*a=b 1 ATEquation_num_i AlgEquiv b=a/%i %i*a=b 0 ATEquation_lhs_notrhs_op AlgEquiv a*(2+%i)=b a=b/(2+%i) 1 ATEquation_ratio AlgEquiv a*(2+%i)=b a=b*(2-%i)/5 1 ATEquation_num_i AlgEquiv a*(2+%i)=b a=b*(2-%i)/4 0 ATEquation_default AlgEquiv i disp_complex(0,1) 0 Absolute value in equations AlgEquiv abs(x)=abs(y) x=y 0 ATEquation_default AlgEquiv abs(x)=abs(y) x=y or x=-y 1 AlgEquiv abs(x)=abs(y) (x-y)*(x+y)=0 1 Functions AlgEquiv f(x):=1/0 f(x):=x^2 -1 TEST_FAILED TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. AlgEquiv 1 f(x):=x^2 0 ATAlgEquiv_SA_not_function. Your answer should be a function, defined using the operator := , but is not. AlgEquiv f(x)=x^2 f(x):=x^2 0 ATAlgEquiv_SA_not_function. Your answer should be a function, defined using the operator := , but is not. AlgEquiv f(x):=x^2 f(x,y):=x^2+y^2 0 ATFunction_length_args. ATFunction_false. AlgEquiv f(x):=x^2 f(x)=x^2 0 ATAlgEquiv_SA_not_equation. Your answer should be an equation, but is not. AlgEquiv f(x):=x^2 f(x):=x^2 1 ATFunction_true. AlgEquiv f(x):=x^2 f(x):=sin(x) 0 ATFunction_false. AlgEquiv g(x):=x^2 f(x):=x^2 0 ATFunction_wrongname. ATFunction_true. AlgEquiv f(y):=y^2 f(x):=x^2 1 ATFunction_arguments_different. ATFunction_true. AlgEquiv f(a,b):=a^2+b^2 f(x,y):=x^2+y^2 1 ATFunction_arguments_different. ATFunction_true. Inequalities AlgEquiv 1 x>1 0 ATAlgEquiv_SA_not_inequality. Your answer should be an inequality, but is not. AlgEquiv x=1 x>1 and x<5 0 ATAlgEquiv_TA_not_equation. You have entered an equation, but an equation is not expected here. You may have typed something like \"y=2*x+1\" when you only needed to type \"2*x+1\". AlgEquiv x<1 x>1 0 ATInequality_backwards. Your inequality appears to be backwards. AlgEquiv 1<x x>1 1 AlgEquiv a<b b>a 1 AlgEquiv 2<2*x x>1 1 AlgEquiv -2>-2*x x>1 1 AlgEquiv x>1 x<=1 0 ATInequality_strict. ATInequality_backwards. Your inequality should not be strict! Your inequality appears to be backwards. AlgEquiv x>=2 x<2 0 ATInequality_nonstrict. ATInequality_backwards. Your inequality should be strict, but is not! Your inequality appears to be backwards. AlgEquiv x>=1 x>2 0 ATInequality_nonstrict. Your inequality should be strict, but is not! AlgEquiv x>1 x>1 1 AlgEquiv x>=1 x>=1 1 AlgEquiv x>2 x>1 0 AlgEquiv 1<x x>1 1 AlgEquiv 2*x>=x^2 x^2<=2*x 1 AlgEquiv 2*x>=x^2 x^2<=2*x 1 AlgEquiv 3*x^2<9*a x^2-3*a<0 1 AlgEquiv x^2>4 x>2 or x<-2 1 ATLogic_True. AlgEquiv 1<x or x<-3 x<-3 or 1<x 1 ATLogic_True. AlgEquiv 1<x or x<-3 x<-1 or 3<x 0 AlgEquiv x>1 and x<5 x>1 and x<5 1 ATLogic_True. AlgEquiv x>1 and x<5 5>x and 1<x 1 ATLogic_True. AlgEquiv not (x<=2 and -2<=x) x>2 or -2>x 1 ATLogic_True. AlgEquiv x>2 or -2>x not (x<=2 and -2<=x) 1 ATLogic_True. AlgEquiv x>=1 or 1<=x x>=1 1 AlgEquiv x>=1 and x<=1 x=1 1 ATInequality_solver. AlgEquiv (x>4 and x<5) or (x<- 4 and x>-5) or (x+5>0 an d x<-4) (x>-5 and x<-4) or (x> ;4 and x<5) 1 ATLogic_True. AlgEquiv (x>4 and x<5) or (x<- 4 and x>-5) or (x+5>0 an d x<-4) (x>-5 and x<-4) or (x> ;8 and x<5) 0 AlgEquiv (x < 0 nounor x >= 1) no unand x <= 3 x < 0 or (x >= 1 and x & lt;= 3) 1 ATLogic_True. AlgEquiv (x < 0 nounor x >= 1) no unand x <= 3 x < 0 or x >= 1 and x &l t;= 3 1 ATLogic_True. AlgEquiv (x < 0 nounor x >= 1) no unand x <= 3 x < 0 or (x >= 1 and x & lt;= 3) 1 ATLogic_True. AlgEquiv (x < 0 nounor x >= 1) no unand x <= 3 (x < 0 or x >= 1) and x <= 3 1 ATLogic_True. AlgEquiv (x < 0 nounor x >= 1) no unand x <= 3 x < 0 or (x >= 1 and x & lt;= 3) 1 ATLogic_True. AlgEquiv natural_domain(1/x^2) natural_domain(1/x) 1 ATRealSet_true. AlgEquiv x^4>=0 x^2>=0 1 AlgEquiv x^4>=16 x^2>=4 1 AlgEquiv x^4>=16 x^2>=4 1 AlgEquiv -3<=x -3<=x nounand x<=3 0 AlgEquiv {2,-2} x>2 nounor -2>x 0 ATAlgEquiv_SA_not_logic. Your answer should be an equation, inequality or a logical combination of many of these, but is not. AlgEquiv x^2<4 x<2 nounand x>-2 1 ATLogic_Solver_True. AlgEquiv x^2<6 x<2 nounand x>-2 0 AlgEquiv x>1 nounand x<-1 false 1 ATLogic_Solver_True. AlgEquiv x>1 nounand x<3 true 0 AlgEquiv x>1 nounor x<3 true 1 ATLogic_Solver_True. AlgEquiv x>1 nounor x<3 all 1 ATLogic_Solver_True. AlgEquiv abs(x)<1 abs(x)<1 1 AlgEquiv abs(x)<1 abs(x)<2 0 AlgEquiv abs(x)<1 abs(x)>1 0 ATInequality_backwards. Your inequality appears to be backwards. AlgEquiv ! abs(x)<2 -2<x and x<2 -3 AlgEquiv ! -2<x and x<2 abs(x)<2 -3 AlgEquiv abs(x)<2 -1<x and x<1 0 AlgEquiv x^2<=9 abs(x)<3 0 AlgEquiv ! x^2<=9 abs(x)<=3 -3 AlgEquiv ! x^6<1 abs(x)<1 -3 AlgEquiv ! abs(x)>1 x<-1 or x>1 -3 AlgEquiv minf < x minf <= x 0 ATInequality_strict. Your inequality should not be strict! AlgEquiv x>minf minf < x 1 AlgEquiv x>-inf minf < x 1 AlgEquiv x<2*inf x<inf 0 AlgEquiv minf < x nounand x <1 x<1 1 AlgEquiv minf < x nounand x <1 x<2 0 Maxima and infinity AlgEquiv 2*inf inf 0 AlgEquiv -inf minf 0 Not equal to AlgEquiv x#1 x#1 1 ATLogic_True. AlgEquiv x#(1+1) x#2 1 ATLogic_True. AlgEquiv 1#x x#1 1 ATLogic_True. AlgEquiv a#b b#a 1 AlgEquiv x#2 x-2#0 1 ATLogic_True. AlgEquiv [x#2] [x-2#0] 1 AlgEquiv x-3#0 x#2 0 AlgEquiv x#2 x<2 nounor x>2 1 ATLogic_Solver_True. AlgEquiv x^2-3#1 x<-2 nounor (x<-2 and x& lt;2) nounor 2<x 0 AlgEquiv x^2-3#1 x<-2 nounor (-2<x and x& lt;2) nounor 2<x 1 ATLogic_Solver_True. AlgEquiv x#1 x#0 0 Surds AlgEquiv sqrt(12) 2*sqrt(3) 1 AlgEquiv sqrt(11+6*sqrt(2)) 3+sqrt(2) 1 AlgEquiv (19601-13860*sqrt(2))^(7/4) (5*sqrt(2)-7)^7 1 AlgEquiv (19601-13861*sqrt(2))^(7/4) (5*sqrt(2)-7)^7 0 AlgEquiv (19601-13861*sqrt(2))^(7/4) (5*sqrt(2)-7)^7 0 AlgEquiv sqrt(2*log(26)+4-2*log(2)) sqrt(2*log(13)+4) 1 AlgEquiv sqrt(2)*sqrt(3)+2*(sqrt(2/3))* x-(2/3)*(sqrt(2/3))*x^2+(4/9)* (sqrt(2/3))*x^3 4*sqrt(6)*x^3/27-(2*sqrt(6)*x^ 2)/9+(2*sqrt(6)*x)/3+sqrt(6) 1 Factorials and binomials AlgEquiv (n+1)*n! (n+1)! 1 AlgEquiv n/n! 1/(n-1)! 1 AlgEquiv n/n! 1/(n+1)! 0 AlgEquiv n!/((k-1)!*(n-k+1)!) n!*k/(k!*(n-k+1)!) 1 AlgEquiv n!/(k!*(n-k)!) n!*(n-k+1)/(k!*(n-k+1)!) 1 AlgEquiv n!/(k!*(n-k)!) binomial(n,k) 1 AlgEquiv binomial(n,k)+binomial(n,k+1) binomial(n+1,k+1) 1 AlgEquiv n!/((k-1)!*(n-k+1)!)+n!/(k!*(n -k)!) n!*k/(k!*(n-k+1)!)+n!*(n-k+1)/ (k!*(n-k+1)!) 1 AlgEquiv binomial(n,k)+binomial(n,k+1) binomial(n+1,k) 0 AlgEquiv binomial(n,k) binomial(n,n-k) 1 AlgEquiv 175!*56!/(55!*176!) 17556/55176 1 Unevaluated derviatives AlgEquiv 3*s*diff(q(s),s) 3*s*diff(q(s),s) 1 Sums and products AlgEquiv sum(k^n,n,0,3) sum(k^n,n,0,3) 1 AlgEquiv 1+k+k^2+k^3 sum(k^n,n,0,3) 1 AlgEquiv 1+k+k^2 sum(k^n,n,0,3) 0 AlgEquiv n*(n+1)*(2*n+1)/6 sum(k^2,k,1,n) 1 AlgEquiv sum((k+1)^2,k,0,n-1) sum(k^2,k,1,n) 1 AlgEquiv product(cos(k*x),k,1,3) product(cos(k*x),k,1,3) 1 AlgEquiv cos(x)*cos(2*x)*cos(3*x) product(cos(k*x),k,1,3) 1 AlgEquiv cos(x)*cos(2*x) product(cos(k*x),k,1,3) 0 Scientific units are ignored AlgEquiv 9.81*m/s^2 stackunits(9.81,m/s^2) 1 AlgEquiv 6*stackunits(1,m) stackunits(6,m) 1 AlgEquiv stackunits(2,m)^2 stackunits(4,m^2) 1 AlgEquiv stackunits(2,s)^2 stackunits(4,m^2) 0 Maxima does not simplify -inf (I agree!) AlgEquiv -inf minf 0 These currently fail AlgEquiv ! 2/%i*ln(sqrt((1+z)/2)+%i*sqrt( (1-z)/2)) -%i*ln(z+%i*sqrt(1-z^2)) -3 AlgEquiv ! abs(x^2-4)/(abs(x-2)*abs(x+2)) 1 -3 AlgEquiv ! abs(x^2-4) abs(x-2)*abs(x+2) -3 AlgEquiv ! (-1)^n*cos(x)^n (-cos(x))^n -3 AlgEquiv ! (sqrt(108)+10)^(1/3)-(sqrt(108 )-10)^(1/3) 2 -3 AlgEquiv ! (sqrt(2+sqrt(2))+sqrt(2-sqrt(2 )))/(2*sqrt(2)) sqrt(sqrt(2)+2)/2 -3 AlgEquiv ! sqrt(2*x*sqrt(x^2+1)+2*x^2+1)- sqrt(x^2+1)-x 0 -3 AlgEquiv ! (77+20*sqrt(13))^(1/6)-(77-20* sqrt(13))^(1/6) 1 -3 AlgEquiv ! (930249+416020*sqrt(5))^(1/30) -(930249-416020*sqrt(5))^(1/30 ) 1 -3 AlgEquiv ! cos(2*%pi/17) (-1+sqrt(17)+sqrt(34-2*sqrt(17 )))/16+(2*sqrt(17+3*sqrt(17)-s qrt(34-2*sqrt(17))-2*sqrt(34+2 *sqrt(17))))/16 -3 AlgEquiv ! (41-sqrt(511))/2 (sqrt((4*(cos((1/2*(acos((61/1 040*sqrt(130)))-atan(11/3))))) ^(2))+21)-(2*cos((1/2*(acos((6 1/1040*sqrt(130)))-atan(11 / 3 ))))))^(2) -3 AlgEquiv ! a*(1+sqrt(2))=b a=b*(sqrt(2)-1)/3 -3 ATEquation_default This is only equivalent for x>=0... AlgEquiv ! atan(1/2) %pi/2-atan(2) -3 This is true for all x... AlgEquiv ! asinh(x) ln(x+sqrt(x^2+1)) -3 Logical expressions AlgEquiv true and false false 1 ATLogic_True. AlgEquiv true or false false 0 AlgEquiv A and B B and A 1 ATLogic_True. AlgEquiv A and B C and A 0 AlgEquiv A and B=C C=B and A 1 ATLogic_True. AlgEquiv A and (B and C) A and B and C 1 ATLogic_True. AlgEquiv A and (B or C) A and (B or C) 1 ATLogic_True. AlgEquiv (A and B) or (A and C) A and (B or C) 1 ATLogic_True. AlgEquiv -(b#pm#sqrt(b^2-4*a*c)) -b#pm#sqrt(b^2-4*a*c) 1 ATLogic_True. AlgEquiv x=-b#pm#c^2 x=c^2-b or x=-c^2-b 1 ATLogic_True. AlgEquiv x#pm#a = y#pm#b x#pm#a = y#pm#b 1 ATEquation_sides AlgEquiv x#pm#a = y#pm#b x#pm#a = y#pm#c 0 ATEquation_lhs_notrhs AlgEquiv not(A) and not(B) not(A or B) 1 ATLogic_True. AlgEquiv not(A) and not(B) not(A and B) 0 AlgEquiv not(A) or B boolean_form(A implies B) 1 AlgEquiv not(A) or B A implies B 1 ATLogic_True. AlgEquiv not(A) and B A implies B 0 AlgEquiv (not A and B) or (not B and A) A xor B 1 ATLogic_True. AlgEquiv (A and B) or (not A and not B) A xnor B 1 ATLogic_True. AlgEquiv {not(A) or B,A and B} {A implies B,A and B} 0 ATSet_wrongentries. The following entries are incorrect, although they may appear in a simplified form from that which you actually entered. \\[\\left \\{{\\rm not}\\left( A \\right)\\,{\\mbox{ or }}\\, B \\right \\}\\] AlgEquiv {A implies B,A and B} {not(A) and B,A and B} 0 ATSet_wrongentries. The following entries are incorrect, although they may appear in a simplified form from that which you actually entered. \\[\\left \\{A\\,{\\mbox{ implies }}\\, B \\right \\}\\] Differential equations AlgEquiv diff(x^2,x) 2*x 1 AlgEquiv diff(x^2,x) 'diff(x^2,x) 1 AlgEquiv noundiff(x^2,x) 2*x 1 AlgEquiv diff(y,x) 0 1 AlgEquiv noundiff(y,x) 0 1 AlgEquiv diff(y(x),x) 0 0 AlgEquiv diff(y(x),x) diff(y,x) 0 AlgEquiv diff(y,x) diff(y,x,2) 1 Basic support for strings AlgEquiv \"Hello\" \"Hello\" 1 ATAlgEquiv_String AlgEquiv \"hello\" \"Hello\" 0 ATAlgEquiv_String AlgEquiv W \"Hello\" 0 ATAlgEquiv_SA_not_string. Your answer should be a string, but is not. AlgEquiv \"Hello\" x^2 0 ATAlgEquiv_SA_not_expression. Your answer should be an expression, not an equation, inequality, list, set or matrix.","title":"AlgEquiv: Answer test results"},{"location":"Authoring/Answer_Tests/Results/AlgEquiv/#algequiv-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"AlgEquiv: Answer test results"},{"location":"Authoring/Answer_Tests/Results/AlgEquivNouns/","text":"AlgEquivNouns: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. AlgEquivNouns Test ? Student response Teacher answer Opt Mark Answer note AlgEquivNouns 1/0 1 -1 ATAlgEquivNouns_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. AlgEquivNouns 1 1/0 -1 ATAlgEquivNouns_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. AlgEquivNouns (x-1)^2 -1 ATAlgEquivNounsTEST_FAILED-Empty SA. The answer test failed to execute correctly: please alert your teacher. Attempted to execute an answer test with an empty student answer, probably a CAS validation problem when authoring the question. AlgEquivNouns x^2 -1 ATAlgEquivNounsTEST_FAILED-Empty TA. The answer test failed to execute correctly: please alert your teacher. Attempted to execute an answer test with an empty teacher answer, probably a CAS validation problem when authoring the question. AlgEquivNouns x-1)^2 (x-1)^2 -1 ATAlgEquivNounsTEST_FAILED-Empty SA. The answer test failed to execute correctly: please alert your teacher. Attempted to execute an answer test with an empty student answer, probably a CAS validation problem when authoring the question. AlgEquivNouns diff(x^2,x) 2*x 1 AlgEquivNouns diff(x^2,x) 'diff(x^2,x) 0 AlgEquivNouns diff(x^2,x) 'diff(x^2,x) 0 AlgEquivNouns 'diff(y,x) noundiff(y,x) 1 AlgEquivNouns diff(y,x) 0 1 AlgEquivNouns 'diff(y,x) 0 0 AlgEquivNouns noundiff(y,x) 0 0 AlgEquivNouns diff(y(x),x) 0 0 AlgEquivNouns 'diff(y,x,1) 'diff(y,x,2) 0 AlgEquivNouns 'diff(y(x),x) 'diff(y,x) 0 AlgEquivNouns subst(y,y(x),'diff(y,x)+y =1) 'diff(y,x)+y=1 1 ATEquation_sides AlgEquivNouns subst(y,y(x),'diff(y(x),x )+y(x)=1) 'diff(y,x)+y=1 1 ATEquation_sides AlgEquivNouns subst(y(x),y,'diff(y,x)+y =1) 'diff(y(x),x)+y(x)=1 1 ATEquation_sides AlgEquivNouns subst(y(x),y,'diff(y,x)+y =1) 'diff(y,x)+y=1 0 ATEquation_default AlgEquivNouns subst(y(x),y,'diff(y(x),x )+y(x)=1) 'diff(y,x)+y=1 -1 ATAlgEquivNouns_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. subst: cannot substitute y(x) for operator y in expression y(x) AlgEquivNouns y_x 'diff(y,x) 0 Partials AlgEquivNouns noundiff(f,x,1,y,1) noundiff(noundiff(f,x),y) 1 AlgEquivNouns noundiff(noundiff(f,y),x) noundiff(noundiff(f,x),y) 1 AlgEquivNouns noundiff(noundiff(f,x),x) noundiff(f,x,2) 1 Differential equations AlgEquivNouns noundiff(H,x,2) = -R/T noundiff(H,x,2) + R/T = 0 1 ATEquation_ratio AlgEquivNouns 'diff(H,x,2) = -R/T noundiff(H,x,2) + R/T = 0 1 ATEquation_ratio AlgEquivNouns y(t)=int(s^2,s,0,t) y(t)=t^3/3 1 ATEquation_sides AlgEquivNouns y(t)='int(s^2,s,0,t) y(t)=t^3/3 0 ATEquation_lhs_notrhs AlgEquivNouns y(t)='int(s^2,s,0,t) y(t)=nounint(s^2,s,0,t) 1 ATEquation_sides Logic nouns are still evaluated AlgEquivNouns true nounand false false 1 ATLogic_True.","title":"AlgEquivNouns: Answer test results"},{"location":"Authoring/Answer_Tests/Results/AlgEquivNouns/#algequivnouns-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"AlgEquivNouns: Answer test results"},{"location":"Authoring/Answer_Tests/Results/CasEqual/","text":"CasEqual: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. CasEqual Test ? Student response Teacher answer Opt Mark Answer note CasEqual 1/0 x^2-2*x+1 -1 ATCASEqual_STACKERROR_SAns. CasEqual x 1/0 -1 ATCASEqual_STACKERROR_TAns. CasEqual 0.5 1/2 x 0 ATCASEqual (AlgEquiv-true). CasEqual x=1 1 0 ATCASEqual ATAlgEquiv_TA_not_equation. You have entered an equation, but an equation is not expected here. You may have typed something like \"y=2*x+1\" when you only needed to type \"2*x+1\". Case sensitivity CasEqual a A 0 ATCASEqual_false. CasEqual exdowncase(X^2-2*X+1) x^2-2*x+1 1 ATCASEqual_true. Numbers CasEqual 4^(-1/2) 1/2 0 ATCASEqual (AlgEquiv-true). CasEqual ev(4^(-1/2),simp) ev(1/2,simp) 1 ATCASEqual_true. CasEqual 2^2 4 0 ATCASEqual (AlgEquiv-true). Powers CasEqual a^2/b^3 a^2*b^(-3) 0 ATCASEqual (AlgEquiv-true). Expressions with subscripts CasEqual rho*z*V/(4*pi*epsilon[0]*(R^2+ z^2)^(3/2)) rho*z*V/(4*pi*epsilon[0]*(R^2+ z^2)^(3/2)) 1 ATCASEqual_true. CasEqual rho*z*V/(4*pi*epsilon[1]*(R^2+ z^2)^(3/2)) rho*z*V/(4*pi*epsilon[0]*(R^2+ z^2)^(3/2)) 0 ATCASEqual_false. Mix of floats and rational numbers CasEqual 0.5 1/2 0 ATCASEqual (AlgEquiv-true). CasEqual x^(1/2) sqrt(x) 0 ATCASEqual (AlgEquiv-true). CasEqual ev(x^(1/2),simp) ev(sqrt(x),simp) 1 ATCASEqual_true. CasEqual abs(x) sqrt(x^2) 0 ATCASEqual (AlgEquiv-true). CasEqual ev(abs(x),simp) ev(sqrt(x^2),simp) 1 ATCASEqual_true. CasEqual x-1 (x^2-1)/(x+1) 0 ATCASEqual (AlgEquiv-true). Polynomials and rational function CasEqual x+x 2*x 0 ATCASEqual (AlgEquiv-true). CasEqual ev(x+x,simp) ev(2*x,simp) 1 ATCASEqual_true. CasEqual x+x^2 x^2+x 0 ATCASEqual (AlgEquiv-true). CasEqual ev(x+x^2,simp) ev(x^2+x,simp) 1 ATCASEqual_true. CasEqual (x-1)^2 x^2-2*x+1 0 ATCASEqual (AlgEquiv-true). CasEqual (x-1)^(-2) 1/(x^2-2*x+1) 0 ATCASEqual (AlgEquiv-true). CasEqual 1/n-1/(n+1) 1/(n*(n+1)) 0 ATCASEqual (AlgEquiv-true). Trig functions CasEqual cos(x) cos(-x) 0 ATCASEqual (AlgEquiv-true). CasEqual ev(cos(x),simp) ev(cos(-x),simp) 1 ATCASEqual_true. CasEqual cos(x)^2+sin(x)^2 1 0 ATCASEqual (AlgEquiv-true). CasEqual 2*cos(x)^2-1 cos(2*x) 0 ATCASEqual (AlgEquiv-true). Predicate function wrapper CasEqual imag_numberp(2*%i) true 1 ATCASEqual_true. CasEqual imag_numberp(%e^(%i*%pi/2)) true 1 ATCASEqual_true. CasEqual imag_numberp(2) false 1 ATCASEqual_true. CasEqual imag_numberp(%e^(%pi/2)) false 1 ATCASEqual_true. CasEqual complex_exponentialp(3*%e^(%i* %pi/6)) true 1 ATCASEqual_true. CasEqual complex_exponentialp(3) true 1 ATCASEqual_true. CasEqual complex_exponentialp(%e^(%i*%p i/6)) true 1 ATCASEqual_true. CasEqual complex_exponentialp(%e^%i) true 1 ATCASEqual_true. CasEqual complex_exponentialp(%e^(%pi/6 )) true 1 ATCASEqual_true. CasEqual complex_exponentialp(3+%i) false 1 ATCASEqual_true. CasEqual complex_exponentialp(%e^(%i)/4 ) true 1 ATCASEqual_true. CasEqual complex_exponentialp(3*exp(%i* %pi/6)) true 1 ATCASEqual_true. CasEqual integerp(-1) true 0 ATCASEqual_false. CasEqual integerp(ev(-1,simp)) true 1 ATCASEqual_true.","title":"CasEqual: Answer test results"},{"location":"Authoring/Answer_Tests/Results/CasEqual/#casequal-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"CasEqual: Answer test results"},{"location":"Authoring/Answer_Tests/Results/CompSquare/","text":"CompSquare: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. CompSquare Test ? Student response Teacher answer Opt Mark Answer note CompSquare 1/0 0 -1 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Missing option when executing the test. CompSquare 1/0 0 x -1 ATCompSquare_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. CompSquare 0 1/0 x -1 ATCompSquare_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. CompSquare 0 0 1/0 -1 ATCompSquare_STACKERROR_Opt. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. Category errors. CompSquare 1 (x-1)^2+1 x 0 ATCompSquare_SA_not_depend_var. Your answer should depend on the variable \\(x\\) but it does not! CompSquare (t-1)^2+1 (x-1)^2+1 x 0 ATCompSquare_SA_not_depend_var. Your answer should depend on the variable \\(x\\) but it does not! CompSquare (x-1)^2+1=0 (x-1)^2+1 x 0 ATCompSquare_STACKERROR_LIST. Your answer should be an expression, not an equation, inequality, list, set or matrix. CompSquare sin(x-1)+a-1 (x-1)^2+1 x 0 ATCompSquare_false_not_AlgEquiv. Trivial cases CompSquare 1 1 x 1 ATCompSquare_true_trivial. CompSquare x-a x-a x 1 ATCompSquare_true_trivial. CompSquare x^2 x^2 x 1 ATCompSquare_true. CompSquare x^2-1 (x-1)*(x+1) x 1 ATCompSquare_true. CompSquare (x-1)^2*k (x-1)^2*k x 1 ATCompSquare_true. CompSquare (x-1)^2/k (x-1)^2/k x 1 ATCompSquare_true. Normal cases CompSquare (x-1)^2+1 (x-1)^2+1 x 1 ATCompSquare_true. CompSquare (1-x)^2+1 (x-1)^2+1 x 1 ATCompSquare_true. CompSquare (X-1)^2+1 (x-1)^2+1 x 0 ATCompSquare_SA_not_depend_var. Your answer should depend on the variable \\(x\\) but it does not! CompSquare 9*(x-1)^2+1 (3*x-3)^2+1 x 1 ATCompSquare_true. CompSquare -(x-1)^2 -(x-1)^2 x 1 ATCompSquare_true. CompSquare -(1-x)^2 -(x-1)^2 x 1 ATCompSquare_true. CompSquare -(x-1)^2+3 -(x-1)^2+3 x 1 ATCompSquare_true. CompSquare -(1-x)^2+3 -(x-1)^2+3 x 1 ATCompSquare_true. CompSquare -4*(x-1)^2+3 -4*(x-1)^2+3 x 1 ATCompSquare_true. CompSquare -4*(x-1)^2+3 -(2*x-2)^2+3 x 1 ATCompSquare_true. CompSquare 3-4*(x-1)^2 -(2*x-2)^2+3 x 1 ATCompSquare_true. CompSquare (x-1)^2+1 (x+1)^2+1 x 0 ATCompSquare_true_not_AlgEquiv. Your answer appears to be in the correct form, but is not equivalent to the correct answer. CompSquare (x-a^2)^2+1+b (x-a^2)^2+1+b x 1 ATCompSquare_true. CompSquare x^2-2*x+2 (x-1)^2+1 x 0 ATCompSquare_false_no_summands. The completed square is of the form \\( a(\\cdots\\cdots)^2 + b\\) where \\(a\\) and \\(b\\) do not depend on your variable. More than one of your summands appears to depend on the variable in your answer. CompSquare x+1 (x-1)^2+1 x 0 ATCompSquare_false_not_AlgEquiv. CompSquare a*(x-1)^2+1 a*(x-1)^2+1 x 1 ATCompSquare_true. CompSquare -a*(x-1)^2+1 1-a*(x-1)^2 x 1 ATCompSquare_true. Not simple variable CompSquare (sin(x)-1)^2+1 (sin(x)-1)^2+1 sin(x) 1 ATCompSquare_true. CompSquare (x^2-1)^2+1 (x^2-1)^2+1 x^2 1 ATCompSquare_true. CompSquare (y-1)^2+1 (y-1)^2+1 y 1 ATCompSquare_true. CompSquare (y+1)^2+1 (y-1)^2+1 y 0 ATCompSquare_true_not_AlgEquiv. Your answer appears to be in the correct form, but is not equivalent to the correct answer. CompSquare (x-1)^2+1 (sin(x)-1)^2+1 sin(x) 0 ATCompSquare_SA_not_depend_var. Your answer should depend on the variable \\({\\it facdum}\\) but it does not!","title":"CompSquare: Answer test results"},{"location":"Authoring/Answer_Tests/Results/CompSquare/#compsquare-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"CompSquare: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Diff/","text":"Diff: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. Diff Test ? Student response Teacher answer Opt Mark Answer note Diff 1/0 3*x^2 -1 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Missing option when executing the test. Diff 0 1/0 (x -1 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Option field is invalid. You have a missing right bracket ) in the expression: (x . Diff 1/0 3*x^2 x -1 ATDiff_STACKERROR_SAns. Diff 0 1/0 x -1 ATDiff_STACKERROR_TAns. Diff 0 0 1/0 -1 ATDiff_STACKERROR_Opt. Basic tests Diff 3*x^2 3*x^2 x 1 ATDiff_true. Diff 3*X^2 3*x^2 x 0 ATDiff_var_SB_notSA. Diff x^4/4 3*x^2 x 0 ATDiff_int. It looks like you have integrated instead! Diff x^4/4+1 3*x^2 x 0 ATDiff_int. It looks like you have integrated instead! Diff x^4/4+c 3*x^2 x 0 ATDiff_int. It looks like you have integrated instead! Diff y=x^4/4 x^4/4 x 0 ATDiff_SA_not_expression. Your answer should be an expression, not an equation, inequality, list, set or matrix. Diff x^4/4 y=x^4/4 x 0 Diff y=x^4/4 y=x^4/4 x 0 ATDiff_SA_not_expression. Your answer should be an expression, not an equation, inequality, list, set or matrix. Diff 6000*(x-a)^5999 6000*(x-a)^5999 x 1 ATDiff_true. Diff 5999*(x-a)^5999 6000*(x-a)^5999 x 0 Variable mismatch tests Diff y^2-2*y+1 x^2-2*x+1 x 0 ATDiff_var_SB_notSA. Diff x^2-2*x+1 y^2-2*y+1 x 0 ATDiff_var_SA_notSB. Diff y^2+2*y+1 x^2-2*x+1 z 0 ATDiff_var_notSASB_SAnceSB. Diff x^4/4 3*x^2 y 0 Edge cases Diff e^x+c e^x x 0 ATDiff_int. It looks like you have integrated instead! Diff e^x+2 e^x x 0 ATDiff_int. It looks like you have integrated instead! Diff n*x^n n*x^(n-1) x -1 ATDiff_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. TIMEDOUT Diff n*x^n (assume(n>0), n*x^(n-1)) x 0","title":"Diff: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Diff/#diff-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"Diff: Answer test results"},{"location":"Authoring/Answer_Tests/Results/EqualComAss/","text":"EqualComAss: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. EqualComAss Test ? Student response Teacher answer Opt Mark Answer note EqualComAss 1/0 0 -1 ATEqualComAss_STACKERROR_SAns. EqualComAss 0 1/0 -1 ATEqualComAss_STACKERROR_TAns. Numbers EqualComAss 2/4 1/2 0 ATEqualComAss (AlgEquiv-true). EqualComAss 3^2 8 0 ATEqualComAss (AlgEquiv-false). EqualComAss 3^2 9 0 ATEqualComAss (AlgEquiv-true). EqualComAss cos(0) 1 0 ATEqualComAss (AlgEquiv-true). EqualComAss 4^(1/2) 2 0 ATEqualComAss (AlgEquiv-true). EqualComAss 1/3^(1/2) (1/3)^(1/2) 0 ATEqualComAss (AlgEquiv-true). EqualComAss sqrt(3)/3 (1/3)^(1/2) 0 ATEqualComAss (AlgEquiv-true). EqualComAss sqrt(3) 3^(1/2) 0 ATEqualComAss (AlgEquiv-true). EqualComAss 2*sqrt(2) sqrt(8) 0 ATEqualComAss (AlgEquiv-true). EqualComAss 2*2^(1/2) sqrt(8) 0 ATEqualComAss (AlgEquiv-true). EqualComAss sqrt(2)/4 1/sqrt(8) 0 ATEqualComAss (AlgEquiv-true). EqualComAss 1/sqrt(2) 2^(1/2)/2 0 ATEqualComAss (AlgEquiv-true). EqualComAss 4.0 4 0 ATEqualComAss (AlgEquiv-true). Case sensitivity EqualComAss X x 0 ATEqualComAss (AlgEquiv-false)ATAlgEquiv_WrongCase. EqualComAss exdowncase(X) x 1 EqualComAss exdowncase((X-1)^2) x^2-2*x+1 0 ATEqualComAss (AlgEquiv-true). EqualComAss exdowncase(X^2-2*X+1) x^2-2*x+1 1 Powers EqualComAss a^2/b^3 a^2*b^(-3) 0 ATEqualComAss (AlgEquiv-true). EqualComAss lg(a^x,a) x 0 ATEqualComAss (AlgEquiv-true). EqualComAss x^(2/4) x^(1/2) 0 ATEqualComAss (AlgEquiv-true). Simple polynomials EqualComAss 1+2*x x*2+1 1 EqualComAss 1+x 2*x+1 0 ATEqualComAss (AlgEquiv-false). EqualComAss 1+x+x 2*x+1 0 ATEqualComAss (AlgEquiv-true). EqualComAss (x+y)+z z+x+y 1 EqualComAss x*x x^2 0 ATEqualComAss (AlgEquiv-true). EqualComAss (x+5)*x x*(5+x) 1 EqualComAss x*(x+5) 5*x+x^2 0 ATEqualComAss (AlgEquiv-true). EqualComAss (1-x)^2 (x-1)^2 0 ATEqualComAss (AlgEquiv-true). EqualComAss (a-x)^6000 (x-a)^6000 0 ATEqualComAss (AlgEquiv-true). Expressions with subscripts EqualComAss rho*z*V/(4*pi*epsilon[0]*(R^2+ z^2)^(3/2)) rho*z*V/(4*pi*epsilon[0]*(R^2+ z^2)^(3/2)) 1 EqualComAss rho*z*V/(4*pi*epsilon[1]*(R^2+ z^2)^(3/2)) rho*z*V/(4*pi*epsilon[0]*(R^2+ z^2)^(3/2)) 0 ATEqualComAss (AlgEquiv-false). Unary minus EqualComAss -1+2 2-1 1 EqualComAss -1*2+3*4 3*4-1*2 1 EqualComAss (-1*2)+3*4 10 0 ATEqualComAss (AlgEquiv-true). EqualComAss -1*2+3*4 3*4-1*2 1 EqualComAss x*(-y) -x*y 1 EqualComAss x*(-y) -(x*y) 1 EqualComAss (-x)*(-x) x*x 0 ATEqualComAss (AlgEquiv-true). EqualComAss (-x)*(-x) x^2 0 ATEqualComAss (AlgEquiv-true). EqualComAss -1/4*%pi*i -(%i*%pi)/4 0 ATEqualComAss (AlgEquiv-true). Rational expressions EqualComAss 1/2 3/6 0 ATEqualComAss (AlgEquiv-true). EqualComAss 1/(1+2*x) 1/(2*x+1) 1 EqualComAss 2/(4+2*x) 1/(x+2) 0 ATEqualComAss (AlgEquiv-true). EqualComAss (a*b)/c a*(b/c) 1 EqualComAss ((x+1)/(x*(x-1)))*(x-1) ((x+1)*(x-1))/(x*(x-1)) 1 EqualComAss (-x)/y -(x/y) 1 EqualComAss x/(-y) -(x/y) 0 ATEqualComAss (AlgEquiv-true). EqualComAss -1/(1-x) 1/(x-1) 0 ATEqualComAss (AlgEquiv-true). EqualComAss 1/2*1/x 1/(2*x) 0 ATEqualComAss (AlgEquiv-true). EqualComAss (k+8)/(k^2+4*k-12) (k+8)/(k^2+4*k-12) 1 EqualComAss (k+8)/(k^2+4*k-12) (k+8)/((k-2)*(k+6)) 0 ATEqualComAss (AlgEquiv-true). EqualComAss (k+7)/(k^2+4*k-12) (k+8)/(k^2+4*k-12) 0 ATEqualComAss (AlgEquiv-false). EqualComAss -(2*k+6)/(k^2+4*k-12) -(2*k+6)/(k^2+4*k-12) 1 EqualComAss (a+b)/1 (b+a)/1 1 No simplicifcation here EqualComAss 1*x x 0 ATEqualComAss (AlgEquiv-true). EqualComAss 23+0*x 23 0 ATEqualComAss (AlgEquiv-true). EqualComAss x+0 x 0 ATEqualComAss (AlgEquiv-true). EqualComAss x^1 x 0 ATEqualComAss (AlgEquiv-true). EqualComAss (1/2)*(a+b) (a+b)/2 0 ATEqualComAss (AlgEquiv-true). EqualComAss 1/3*logbase(27,6) logbase(27,6)/3 0 ATEqualComAss (AlgEquiv-true). EqualComAss 1/3*lg(27,6) lg(27,6)/3 0 ATEqualComAss (AlgEquiv-true). EqualComAss lg(root(x, n)) lg(x, 10)/n 0 ATEqualComAss (AlgEquiv-true). EqualComAss exp(x) %e^x 1 EqualComAss exp(x)^2 %e^(2*x) 0 ATEqualComAss (AlgEquiv-true). EqualComAss exp(x)^2 (%e^(x))^2 1 EqualComAss 1/3*i i/3 0 ATEqualComAss (AlgEquiv-true). Complex numbers EqualComAss %i e^(i*pi/2) 0 ATEqualComAss (AlgEquiv-true). EqualComAss (4*sqrt(3)*%i+4)^(1/5) rectform((4*sqrt(3)*%i+4)^(1/5 )) 0 ATEqualComAss (AlgEquiv-true). EqualComAss (4*sqrt(3)*%i+4)^(1/5) 8^(1/5)*(cos(%pi/15)+%i*sin(%p i/15)) 0 ATEqualComAss (AlgEquiv-true). EqualComAss (4*sqrt(3)*%i+4)^(1/5) polarform((4*sqrt(3)*%i+4)^(1/ 5)) 0 ATEqualComAss (AlgEquiv-true). Equations EqualComAss y=x x=y 1 EqualComAss x+1 y=2*x+1 0 ATEqualComAss ATAlgEquiv_SA_not_equation. Your answer should be an equation, but is not. EqualComAss y=1+2*x y=2*x+1 1 EqualComAss y=x+x+1 y=1+2*x 0 ATEqualComAss (AlgEquiv-true). Logic EqualComAss A and B B and A 1 EqualComAss A or B B or A 1 EqualComAss A or B B and A 0 ATEqualComAss (AlgEquiv-false). EqualComAss not(true) false 0 ATEqualComAss (AlgEquiv-true). Sets EqualComAss {2*x+1,2} {2, 1+x*2} 1 EqualComAss 2 {2} 0 ATEqualComAss ATAlgEquiv_SA_not_set. Your answer should be a set, but is not. Note that the syntax to enter a set is to enclose the comma separated values with curly brackets. EqualComAss {2*x+1, 1+1} {2, 1+x*2} 0 ATEqualComAss (AlgEquiv-true). EqualComAss {1,2} {1,{2}} 0 ATEqualComAss (AlgEquiv-false)ATSet_wrongentries. EqualComAss {4,3} {3,4} 1 EqualComAss {4,4} {4} 0 ATEqualComAss (AlgEquiv-true). EqualComAss {-1,1,-1} {-1,-1,1} 1 EqualComAss {-1,1,-1} {-1,1} 0 ATEqualComAss (AlgEquiv-true). Lists EqualComAss [2*x+1,2] [1+x*2,2] 1 EqualComAss [x+x+1, 1+1] [1+x*2,2] 0 ATEqualComAss (AlgEquiv-true). Matrices EqualComAss matrix([1,2],[2,3]) matrix([1,2],[2,3]) 1 EqualComAss matrix([1,2],[2,3]) matrix([1,2,3],[2,3,3]) 0 ATEqualComAss (AlgEquiv-false)ATMatrix_wrongsz_columns. EqualComAss matrix([1,2],[2,3]) matrix([1,2],[2,5]) 0 ATEqualComAss (AlgEquiv-false)ATMatrix_wrongentries. EqualComAss matrix([1,2],[2,2+1]) matrix([1,2],[2,3]) 0 ATEqualComAss (AlgEquiv-true). EqualComAss matrix([x+x, 1],[1, 1]) matrix([2*x, 1],[1, 1]) 0 ATEqualComAss (AlgEquiv-true). Sums and products EqualComAss sum(k^n,n,0,3) sum(k^n,n,0,3) 1 EqualComAss 1+k+k^2+k^3 sum(k^n,n,0,3) 0 ATEqualComAss (AlgEquiv-true). EqualComAss sum(k,k,0,1+n) sum(k,k,0,n+1) 1 EqualComAss (n+1)*(n+2)/2 sum(k,k,0,n+1) 0 ATEqualComAss (AlgEquiv-true). EqualComAss product(cos(k*x),k,1,3) product(cos(k*x),k,1,3) 1 EqualComAss cos(x)*cos(2*x)*cos(3*x) product(cos(k*x),k,1,3) 0 ATEqualComAss (AlgEquiv-true). Inequalities are not commutative under this test EqualComAss -6/5 > x x < -6/5 0 ATEqualComAss (AlgEquiv-true). EqualComAss x<1 and -3<x -3<x and x<1 1 EqualComAss 1>x and -3<x -3<x and x<1 0 ATEqualComAss (AlgEquiv-true). EqualComAss make_less_ineq(-6/5 > x) x < -6/5 1 EqualComAss make_less_ineq(1>x and -3&l t;x) -3<x and x<1 1 EqualComAss make_less_ineq(6/3 > x) x < 2 0 ATEqualComAss (AlgEquiv-true). Unary Equations EqualComAss 1 stackeq(1) 1 EqualComAss stackeq(1) 1 1 EqualComAss stackeq(1+1) 2 0 ATEqualComAss (AlgEquiv-true). EqualComAss stackeq(1) 0 0 ATEqualComAss (AlgEquiv-false). EqualComAss lowesttermsp(1/3) true 1 EqualComAss lowesttermsp(2/6) true 0 ATEqualComAss (AlgEquiv-false). EqualComAss lowesttermsp(x^2/x) true 0 ATEqualComAss (AlgEquiv-false). EqualComAss lowesttermsp(-y/-x) true 0 ATEqualComAss (AlgEquiv-false). EqualComAss lowesttermsp((x^2-1)/(x-1)) true 0 ATEqualComAss (AlgEquiv-false). EqualComAss lowesttermsp((x^2-1)/(x+2)) true 1 Bad things in denominators EqualComAss rationalized(1+sqrt(3)/3) true 1 EqualComAss rationalized(1+1/sqrt(3)) [sqrt(3)] 1 EqualComAss rationalized(1/sqrt(3)) [sqrt(3)] 1 EqualComAss rationalized(1/sqrt(2)+i/sqrt( 2)) [sqrt(2),sqrt(2)] 1 EqualComAss rationalized(sqrt(2)/2+1/sqrt( 3)) [sqrt(3)] 1 EqualComAss rationalized(1/sqrt(2)+1/sqrt( 3)) [sqrt(2),sqrt(3)] 1 EqualComAss rationalized(1/(1+i)) [i] 1 EqualComAss rationalized(1/(1+1/root(3,2)) ) [root(3,2)] 1 Differential Equations EqualComAss diff(y,x) 0 1 EqualComAss diff(x^2,x) 2*x 1 EqualComAss noundiff(x^2,x) 2*x 0 ATEqualComAss (AlgEquiv-true). EqualComAss diff(y,x) 'diff(y,x) 0 ATEqualComAss (AlgEquiv-true). EqualComAss noundiff(y,x) 'diff(y,x) 1 EqualComAss 'diff(y(x),x) 'diff(y(x),x,1) 1 EqualComAss noundiff(y(x),x)=-x/4 4*noundiff(y(x),x)+x=0 0 ATEqualComAss (AlgEquiv-true).","title":"EqualComAss: Answer test results"},{"location":"Authoring/Answer_Tests/Results/EqualComAss/#equalcomass-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"EqualComAss: Answer test results"},{"location":"Authoring/Answer_Tests/Results/EqualComAssRules/","text":"EqualComAssRules: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. EqualComAssRules Test ? Student response Teacher answer Opt Mark Answer note EqualComAssRules 1/0 0 [] -1 ATEqualComAssRules_STACKERROR_SAns. EqualComAssRules 0 1/0 [] -1 ATEqualComAssRules_STACKERROR_TAns. EqualComAssRules 0+a a -1 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Missing option when executing the test. EqualComAssRules 0+a a x -1 ATEqualComAssRules_Opt_List. The option to this answer test must be a non-empty list of supported rules. This is an error. Please contact your teacher. EqualComAssRules 0+a a [x] -1 ATEqualComAssRules_Opt_Wrong. The option to this answer test must be a non-empty list of supported rules. This is an error. Please contact your teacher. EqualComAssRules 0+a a [intMul,intFac] -1 ATEqualComAssRules_Opt_Incompatible. The option to this answer test contains incompatible rules. This is an error. Please contact your teacher. Basic cases EqualComAssRules 1+1 3 [zeroAdd] 0 ATEqualComAssRules (AlgEquiv-false). EqualComAssRules 1+1 2 [zeroAdd] 0 EqualComAssRules 1+1 2 [testdebug,zero Add] 0 ATEqualComAssRules: [1 nounadd 1,2]. EqualComAssRules 0+a a [zeroAdd] 1 EqualComAssRules a+0 a [zeroAdd] 1 EqualComAssRules 1*a a [testdebug,zero Add] 0 ATEqualComAssRules: [1 nounmul a,a]. EqualComAssRules 1*a a [oneMul] 1 EqualComAssRules 1*a a ID_TRANS 1 EqualComAssRules a/1 a ID_TRANS 1 EqualComAssRules 0*a 0 ID_TRANS 1 EqualComAssRules 0-1*i -i ID_TRANS 1 EqualComAssRules 0-i -i ID_TRANS 1 EqualComAssRules 2+1*i 2+i ID_TRANS 1 EqualComAssRules x^0+x^1/1+x^2/2+x^3/3!+x^4/4! 1+x+x^2/2+x^3/3!+x^4/4! ID_TRANS 1 EqualComAssRules %e^x exp(x) [testdebug,ID_T RANS] 1 ATEqualComAssRules: [%e nounpow x,%e nounpow x]. EqualComAssRules 12*%e^((2*(%pi/2)*%i)/2) 12*exp(%i*(%pi/2)) ID_TRANS 0 EqualComAssRules 12*%e^((2*(%pi/2)*%i)/2) 12*exp(%i*(%pi/2)) [ID_TRANS,[negN eg,negDiv,negOr d],[recipMul,di vDiv,divCancel] ,[intAdd,intMul ,intPow]] 1 EqualComAssRules 0^(1-1) 0 ID_TRANS 0 ATEqualComAssRules_STACKERROR_SAns. EqualComAssRules 0*a 0 delete(zeroMul, ID_TRANS) 0 EqualComAssRules -(-a) a [negNeg] 1 EqualComAssRules -(-(-a)) -a [negNeg] 1 EqualComAssRules -(-(-a)) a [testdebug,negN eg] 0 ATEqualComAssRules (AlgEquiv-false). EqualComAssRules 3/(-x) -3/x ID_TRANS 0 EqualComAssRules 3/(-x) -3/x [testdebug,ID_T RANS] 0 ATEqualComAssRules: [3 nounmul UNARY_RECIP UNARY_MINUS nounmul x,UNARY_MINUS nounmul 3 nounmul UNARY_RECIP x]. EqualComAssRules -x*(x+1) x*(-x-1) [negDist] 1 EqualComAssRules -x*(x-1) x*(1-x) NEG_TRANS 1 EqualComAssRules -x*(x-1) x*(1-x) NEG_TRANS 1 EqualComAssRules -5*x*(3-x) 5*x*(x-3) NEG_TRANS 1 EqualComAssRules -x*(x-1)*(x+1) x*(x-1)*(-x-1) NEG_TRANS 1 EqualComAssRules -x*(x-1)*(x+1) x*(1-x)*(x+1) NEG_TRANS 1 EqualComAssRules -x*(y-1)*(x-1) x*(1-x)*(y-1) NEG_TRANS 1 EqualComAssRules -x*(y-1)*(x-1) x*(x-1)*(1-y) NEG_TRANS 1 EqualComAssRules (x-y)*(y-x) -(x-y)*(x-y) NEG_TRANS 1 EqualComAssRules (x-y)*(y-x) -(x-y)^2 [testdebug,NEG_ TRANS] 0 ATEqualComAssRules: [UNARY_MINUS nounmul (x nounadd UNARY_MINUS nounmul y) nounmul (x nounadd UNARY_MINUS nounmul y),UNARY_MINUS nounmul (x nounadd UNARY_MINUS nounmul y) nounpow 2]. EqualComAssRules -x*(x-1)*(x+1) x*(1-x)*(x+1) [testdebug,negD ist,negNeg] 0 ATEqualComAssRules: [x nounmul (UNARY_MINUS nounmul 1 nounadd UNARY_MINUS nounmul x) nounmul (x nounadd UNARY_MINUS nounmul 1),x nounmul (1 nounadd UNARY_MINUS nounmul x) nounmul (1 nounadd x)]. EqualComAssRules -x*(y-1)*(x-1) x*(x-1)*(1-y) [testdebug,negD ist,negNeg] 0 ATEqualComAssRules: [x nounmul (1 nounadd UNARY_MINUS nounmul x) nounmul (y nounadd UNARY_MINUS nounmul 1),x nounmul (1 nounadd UNARY_MINUS nounmul y) nounmul (x nounadd UNARY_MINUS nounmul 1)]. EqualComAssRules 3/(-x) -3/x [negDiv] 1 EqualComAssRules 3/(-x) ev(-3,simp)/x [negDiv] 1 EqualComAssRules (-a)/(-x) -(-a/x) [testdebug,ID_T RANS] 0 ATEqualComAssRules: [UNARY_MINUS nounmul a nounmul UNARY_RECIP UNARY_MINUS nounmul x,UNARY_MINUS nounmul UNARY_MINUS nounmul a nounmul UNARY_RECIP x]. EqualComAssRules (-a)/(-x) -(-a/x) [negDiv] 1 EqualComAssRules (-a)/(-x) a/x [testdebug,negD iv] 0 ATEqualComAssRules: [UNARY_MINUS nounmul UNARY_MINUS nounmul a nounmul UNARY_RECIP x,a nounmul UNARY_RECIP x]. EqualComAssRules (-a)/(-x) a/x [negDiv,negNeg] 1 EqualComAssRules 1/(-x) (-1)/x [negDiv] 1 EqualComAssRules 1/(-x) ev(-1,simp)/x [negDiv] 1 EqualComAssRules (2/-3)*(x-y) -(2/3)*(x-y) [negDiv] 1 EqualComAssRules (2/-3)*(x-y) (2/3)*(y-x) [negDiv] 0 EqualComAssRules (2/-3)*(x-y) (2/3)*(y-x) [negDiv,negOrd] 1 EqualComAssRules -2/(1-x) 2/(x-1) [testdebug,negD iv] 0 ATEqualComAssRules: [UNARY_MINUS nounmul 2 nounmul UNARY_RECIP (1 nounadd UNARY_MINUS nounmul x),2 nounmul UNARY_RECIP (x nounadd UNARY_MINUS nounmul 1)]. EqualComAssRules 1/2*3/x 3/(2*x) [testdebug,ID_T RANS] 0 ATEqualComAssRules: [3 nounmul (UNARY_RECIP 2) nounmul UNARY_RECIP x,3 nounmul UNARY_RECIP 2 nounmul x]. EqualComAssRules 1/2*3/x 3/(2*x) [ID_TRANS,recip Mul] 1 EqualComAssRules 5/2*3/x 15/(2*x) [testdebug,ID_T RANS,recipMul] 0 ATEqualComAssRules: [3 nounmul 5 nounmul UNARY_RECIP 2 nounmul x,15 nounmul UNARY_RECIP 2 nounmul x]. EqualComAssRules -(x-y) y-x [negOrd] 1 EqualComAssRules 5/2*3/x 15/(2*x) [ID_TRANS,recip Mul,intMul] 1 EqualComAssRules (3+2)*x+x 5*x+x [ID_TRANS,intAd d] 1 EqualComAssRules (3-5)*x+x -2*x+x [ID_TRANS,intAd d] 1 EqualComAssRules 7*x*(-3*x) -21*x*x [ID_TRANS,intMu l] 1 EqualComAssRules (-7*x)*(-3*x) 21*x*x [testdebug,ID_T RANS,intMul] 0 ATEqualComAssRules: [UNARY_MINUS nounmul UNARY_MINUS nounmul 21 nounmul x nounmul x,21 nounmul x nounmul x]. EqualComAssRules (-7*x)*(-3*x) 21*x*x [ID_TRANS,intMu l,negNeg] 1 ev(a/b/c, simp)=a/(b*c) EqualComAssRules a/b/c a/(b*c) [testdebug,ID_T RANS] 0 ATEqualComAssRules: [a nounmul (UNARY_RECIP b) nounmul UNARY_RECIP c,a nounmul UNARY_RECIP b nounmul c]. EqualComAssRules a/b/c a/(b*c) [ID_TRANS,recip Mul] 1 EqualComAssRules (a/b)/c a/(b*c) [ID_TRANS,recip Mul] 1 ev(a/(b/c), simp)=(a*c)/b EqualComAssRules a/(b/c) (a*c)/b [testdebug,ID_T RANS] 0 ATEqualComAssRules: [a nounmul UNARY_RECIP b nounmul UNARY_RECIP c,a nounmul c nounmul UNARY_RECIP b]. EqualComAssRules a/(b/c) (a*c)/b [testdebug,ID_T RANS,recipMul] 0 ATEqualComAssRules: [a nounmul UNARY_RECIP b nounmul UNARY_RECIP c,a nounmul c nounmul UNARY_RECIP b]. EqualComAssRules a/(b/c) (a*c)/b [ID_TRANS,divDi v] 1 EqualComAssRules A*a/(B*b/c) A*(a*c)/(B*b) [ID_TRANS,divDi v] 1 EqualComAssRules A*a/(B*b/c)*1/d A*(a*c)/(B*b)*1/d [ID_TRANS,divDi v] 1 EqualComAssRules D*A*a/(B*b/c)*1/d A*(a*c)/(B*b)*D/d [ID_TRANS,divDi v] 1 EqualComAssRules A*a/(B*b/c)*1/d A*(a*c)/(B*b*d) [testdebug,ID_T RANS,divDiv] 0 ATEqualComAssRules: [A nounmul a nounmul c nounmul (UNARY_RECIP B nounmul b) nounmul UNARY_RECIP d,A nounmul a nounmul c nounmul UNARY_RECIP B nounmul b nounmul d]. EqualComAssRules A*a/(B*b/c)*1/d A*(a*c)/(B*b*d) [ID_TRANS,divDi v,recipMul] 1 EqualComAssRules A/(B/(C/D)) A*C/(B*D) [testdebug,ID_T RANS,divDiv] 0 ATEqualComAssRules: [A nounmul C nounmul (UNARY_RECIP B) nounmul UNARY_RECIP D,A nounmul C nounmul UNARY_RECIP B nounmul D]. EqualComAssRules A/(B/(C/D)) A*C/(B*D) [ID_TRANS,divDi v,recipMul] 1 EqualComAssRules 18 2*3^2 [intFac] 1 EqualComAssRules 0+%i*(-(1/27)) -(%i/27) [[zeroAdd,zeroM ul,oneMul,onePo w,idPow,zeroPow ,zPow,oneDiv],[ negNeg,negDiv,n egOrd],[recipMu l,divDiv,divCan cel],[intAdd,in tMul,intPow]] 1 EqualComAssRules x=sqrt(3)+2 x=3^(1/2)+2 [ID_TRANS,sqrtR em] 1 EqualComAssRules x=sqrt(3)+2 nounor x=-sqrt(3)- 2 x=3^(1/2)+2 nounor x=-3^(1/2)- 2 ID_TRANS 0 EqualComAssRules x=sqrt(3)+2 nounor x=-sqrt(3)- 2 x=3^(1/2)+2 nounor x=-3^(1/2)- 2 [ID_TRANS,sqrtR em] 1 EqualComAssRules x=sqrt(3)+2 nounor x=-sqrt(3)+ 7 x=3^(1/2)+2 nounor x=-3^(1/2)- 2 [ID_TRANS,sqrtR em] 0 ATEqualComAssRules (AlgEquiv-false)ATEquation_default. EqualComAssRules 1/sqrt(3) 1/3^(1/2) [ID_TRANS,sqrtR em] 1 EqualComAssRules 1/sqrt(3) 3^(-1/2) [ID_TRANS,sqrtR em] 0","title":"EqualComAssRules: Answer test results"},{"location":"Authoring/Answer_Tests/Results/EqualComAssRules/#equalcomassrules-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"EqualComAssRules: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Equiv/","text":"Equiv: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. Equiv Test ? Student response Teacher answer Opt Mark Answer note Equiv x [x^2=4,x=2 or x=-2] -1 ATEquiv_SA_not_list. The first argument to the Equiv answer test should be a list, but the test failed. Please contact your teacher. Equiv [x^2=4,x=2 or x=-2] x -1 ATEquiv_SB_not_list. The second argument to the Equiv answer test should be a list, but the test failed. Please contact your teacher. Equiv [1/0] [x^2=4,x=2 or x=-2] -1 ATEquiv_STACKERROR_SAns. Equiv [x^2=4,x=2 or x=-2] [1/0] -1 ATEquiv_STACKERROR_TAns. Equiv [x^2=4,x=2 or x=-2] [x^2=4,x=2 or x=-2] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2=4& \\cr \\color{green}{\\Leftrightarrow}&x=2\\,{\\mbox{ or }}\\, x=-2& \\cr \\end{array}\\] Equiv [x^2=4,x=#pm#2,x=2 and x=-2] [x^2=4,x=2 or x=-2] 0 (EMPTYCHAR, EQUIVCHAR,ANDOR) \\[\\begin{array}{lll} &x^2=4& \\cr \\color{green}{\\Leftrightarrow}&x= \\pm 2& \\cr \\color{red}{\\mbox{and/or confusion!}}&\\left\\{\\begin{array}{l}x=2\\cr x=-2\\cr \\end{array}\\right.& \\cr \\end{array}\\] Equiv [x^2=4,x=2] [x^2=4,x=2 or x=-2] 0 (EMPTYCHAR,IMPLIEDCHAR) \\[\\begin{array}{lll} &x^2=4& \\cr \\color{red}{\\Leftarrow}&x=2& \\cr \\end{array}\\] Equiv [x^2=4,x=2] [x^2=4,x=2] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&x^2=4& \\cr \\color{green}{\\Leftrightarrow}&x=2& \\cr \\end{array}\\] Equiv [x^2=4,x^2-4=0,(x-2)*(x+2)=0,x =2 or x=-2] [x^2=4,x=2 or x=-2] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2=4& \\cr \\color{green}{\\Leftrightarrow}&x^2-4=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-2\\right)\\cdot \\left(x+2\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x=2\\,{\\mbox{ or }}\\, x=-2& \\cr \\end{array}\\] Equiv [x^2=4,x= #pm#2, x=2 or x=-2] [x^2=4,x=2 or x=-2] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2=4& \\cr \\color{green}{\\Leftrightarrow}&x= \\pm 2& \\cr \\color{green}{\\Leftrightarrow}&x=2\\,{\\mbox{ or }}\\, x=-2& \\cr \\end{array}\\] Equiv [x^2-6*x+9=0,x=3] [x^2-6*x+9=0,x=3] 1 (EMPTYCHAR,SAMEROOTS) \\[\\begin{array}{lll} &x^2-6\\cdot x+9=0& \\cr \\color{green}{\\mbox{(Same roots)}}&x=3& \\cr \\end{array}\\] Equiv [] [] 1 (EMPTYCHAR) \\[\\begin{array}{lll} &\\left[ \\right] & \\cr \\end{array}\\] Equiv [x^2=-1] [] 1 (EMPTYCHAR) \\[\\begin{array}{lll} &x^2=-1& \\cr \\end{array}\\] Equiv [x=x,all] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x=x& \\cr \\color{green}{\\Leftrightarrow}&\\mathbb{R}& \\cr \\end{array}\\] Equiv [x=x,true] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x=x& \\cr \\color{green}{\\Leftrightarrow}&\\mathbf{True}& \\cr \\end{array}\\] Equiv [x=x,false] [] 0 (EMPTYCHAR,QMCHAR) \\[\\begin{array}{lll} &x=x& \\cr \\color{red}{?}&\\mathbf{False}& \\cr \\end{array}\\] Equiv [1=1,all] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &1=1& \\cr \\color{green}{\\Leftrightarrow}&\\mathbb{R}& \\cr \\end{array}\\] Equiv [1=1,true] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &1=1& \\cr \\color{green}{\\Leftrightarrow}&\\mathbf{True}& \\cr \\end{array}\\] Equiv [0=0,all] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &0=0& \\cr \\color{green}{\\Leftrightarrow}&\\mathbb{R}& \\cr \\end{array}\\] Equiv [0=0,true] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &0=0& \\cr \\color{green}{\\Leftrightarrow}&\\mathbf{True}& \\cr \\end{array}\\] Equiv [1=2,false] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &1=2& \\cr \\color{green}{\\Leftrightarrow}&\\mathbf{False}& \\cr \\end{array}\\] Equiv [1=2,none] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &1=2& \\cr \\color{green}{\\Leftrightarrow}&\\emptyset& \\cr \\end{array}\\] Equiv [1=2,{}] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &1=2& \\cr \\color{green}{\\Leftrightarrow}&\\left \\{ \\right \\}& \\cr \\end{array}\\] Equiv [1=2,[]] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &1=2& \\cr \\color{green}{\\Leftrightarrow}&\\left[ \\right] & \\cr \\end{array}\\] Equiv [x=1,X=1] [] 0 (EMPTYCHAR,QMCHAR) \\[\\begin{array}{lll} &x=1& \\cr \\color{red}{?}&X=1& \\cr \\end{array}\\] Equiv [1/(x^2+1)=1/((x+%i)*(x-%i)),t rue] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\frac{1}{x^2+1}=\\frac{1}{\\left(x+\\mathrm{i}\\right)\\cdot \\left(x-\\mathrm{i}\\right)}& \\cr \\color{green}{\\Leftrightarrow}&\\mathbf{True}& \\cr \\end{array}\\] Equiv [2^2,stackeq(4)] [] 1 (EMPTYCHAR, CHECKMARK) \\[\\begin{array}{lll} &2^2& \\cr \\color{green}{\\checkmark}&=4& \\cr \\end{array}\\] Equiv [2^2,stackeq(3)] [] 0 (EMPTYCHAR,IMPLIESCHAR) \\[\\begin{array}{lll} &2^2& \\cr \\color{red}{\\Rightarrow}&=3& \\cr \\end{array}\\] Equiv [2^2,4] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &2^2& \\cr \\color{green}{\\Leftrightarrow}&4& \\cr \\end{array}\\] Equiv [2^2,3] [] 0 (EMPTYCHAR,IMPLIESCHAR) \\[\\begin{array}{lll} &2^2& \\cr \\color{red}{\\Rightarrow}&3& \\cr \\end{array}\\] Equiv [lg(64,4),lg(4^3,4),3*lg(4,4), 3] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\log_{4}\\left(64\\right)& \\cr \\color{green}{\\Leftrightarrow}&\\log_{4}\\left(4^3\\right)& \\cr \\color{green}{\\Leftrightarrow}&3\\cdot \\log_{4}\\left(4\\right)& \\cr \\color{green}{\\Leftrightarrow}&3& \\cr \\end{array}\\] Equiv [lg(64,4),stackeq(lg(4^3,4)),s tackeq(3*lg(4,4)),stackeq(3)] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &\\log_{4}\\left(64\\right)& \\cr \\color{green}{\\checkmark}&=\\log_{4}\\left(4^3\\right)& \\cr \\color{green}{\\checkmark}&=3\\cdot \\log_{4}\\left(4\\right)& \\cr \\color{green}{\\checkmark}&=3& \\cr \\end{array}\\] Equiv [x=1 or x=2,x=1 or 2] [] 0 (EMPTYCHAR,MISSINGVAR) \\[\\begin{array}{lll} &x=1\\,{\\mbox{ or }}\\, x=2& \\cr \\color{red}{\\mbox{Missing assignments}}&x=1\\,{\\mbox{ or }}\\, 2& \\cr \\end{array}\\] Equiv [x=1 or x=2,x=1 and x=2] [] 0 (EMPTYCHAR,ANDOR) \\[\\begin{array}{lll} &x=1\\,{\\mbox{ or }}\\, x=2& \\cr \\color{red}{\\mbox{and/or confusion!}}&\\left\\{\\begin{array}{l}x=1\\cr x=2\\cr \\end{array}\\right.& \\cr \\end{array}\\] Equiv [x=1 and y=2,x=1 or y=2] [] 0 (EMPTYCHAR,ANDOR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}x=1\\cr y=2\\cr \\end{array}\\right.& \\cr \\color{red}{\\mbox{and/or confusion!}}&x=1\\,{\\mbox{ or }}\\, y=2& \\cr \\end{array}\\] Equiv [a=b,a^2=b^2] [] 0 (EMPTYCHAR,IMPLIESCHAR) \\[\\begin{array}{lll} &a=b& \\cr \\color{red}{\\Rightarrow}&a^2=b^2& \\cr \\end{array}\\] Equiv [a=b,sqrt(a)=sqrt(b)] [] 0 (EMPTYCHAR,IMPLIEDCHAR) \\[\\begin{array}{lll} &a=b& \\cr \\color{red}{\\Leftarrow}&\\sqrt{a}=\\sqrt{b}& \\cr \\end{array}\\] Equiv [a^2=b^2,a=b] [] 0 (EMPTYCHAR,IMPLIEDCHAR) \\[\\begin{array}{lll} &a^2=b^2& \\cr \\color{red}{\\Leftarrow}&a=b& \\cr \\end{array}\\] Equiv [a^2=b^2,a=b or a=-b] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &a^2=b^2& \\cr \\color{green}{\\Leftrightarrow}&a=b\\,{\\mbox{ or }}\\, a=-b& \\cr \\end{array}\\] Equiv [a^2=b^2,a= #pm#b,a= b or a=-b ] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &a^2=b^2& \\cr \\color{green}{\\Leftrightarrow}&a= \\pm b& \\cr \\color{green}{\\Leftrightarrow}&a=b\\,{\\mbox{ or }}\\, a=-b& \\cr \\end{array}\\] Equiv [9*x^2/2-81*x/2+90=5*x^2/2-5*x -20 nounor 9*x^2/2-81*x/2+90=- (5*x^2/2-5*x-20),9*x^2-81*x+18 0=5*x^2-10*x-40 nounor 9*x^2-8 1*x+180=-5*x^2+10*x+40,4*x^2-7 1*x+220=0 nounor 14*x^2-91*x+1 40=0,x=(71 #pm# sqrt(71^2-4*4* 220))/(2*4) nounor x=(91 #pm# sqrt(91^2-4*14*140))/(2*14),x= 55/4 nounor x=4 nounor x=5/2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR,SAMEROOTS) \\[\\begin{array}{lll} &\\frac{9\\cdot x^2}{2}-\\frac{81\\cdot x}{2}+90=\\frac{5\\cdot x^2}{2}-5\\cdot x-20\\,{\\mbox{ or }}\\, \\frac{9\\cdot x^2}{2}-\\frac{81\\cdot x}{2}+90=-\\left(\\frac{5\\cdot x^2}{2}-5\\cdot x-20\\right)& \\cr \\color{green}{\\Leftrightarrow}&9\\cdot x^2-81\\cdot x+180=5\\cdot x^2-10\\cdot x-40\\,{\\mbox{ or }}\\, 9\\cdot x^2-81\\cdot x+180=-5\\cdot x^2+10\\cdot x+40& \\cr \\color{green}{\\Leftrightarrow}&4\\cdot x^2-71\\cdot x+220=0\\,{\\mbox{ or }}\\, 14\\cdot x^2-91\\cdot x+140=0& \\cr \\color{green}{\\Leftrightarrow}&x=\\frac{{71 \\pm \\sqrt{71^2-4\\cdot 4\\cdot 220}}}{2\\cdot 4}\\,{\\mbox{ or }}\\, x=\\frac{{91 \\pm \\sqrt{91^2-4\\cdot 14\\cdot 140}}}{2\\cdot 14}& \\cr \\color{green}{\\mbox{(Same roots)}}&x=\\frac{55}{4}\\,{\\mbox{ or }}\\, x=4\\,{\\mbox{ or }}\\, x=\\frac{5}{2}& \\cr \\end{array}\\] Equiv [a=b,abs(a)=abs(b),a=b] [] 0 (EMPTYCHAR,IMPLIESCHAR,IMPLIEDCHAR) \\[\\begin{array}{lll} &a=b& \\cr \\color{red}{\\Rightarrow}&\\left| a\\right| =\\left| b\\right| & \\cr \\color{red}{\\Leftarrow}&a=b& \\cr \\end{array}\\] Equiv [abs(a)=abs(b),a=b or a=-b] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left| a\\right| =\\left| b\\right| & \\cr \\color{green}{\\Leftrightarrow}&a=b\\,{\\mbox{ or }}\\, a=-b& \\cr \\end{array}\\] Equiv [abs(a)=abs(b),a^2=b^2] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left| a\\right| =\\left| b\\right| & \\cr \\color{green}{\\Leftrightarrow}&a^2=b^2& \\cr \\end{array}\\] Equiv [x^3=8,x=2] [] 0 (EMPTYCHAR,IMPLIEDCHAR) \\[\\begin{array}{lll} &x^3=8& \\cr \\color{red}{\\Leftarrow}&x=2& \\cr \\end{array}\\] Equiv [x^3=8,x=2] [] [assumereal] 1 (ASSUMEREALVARS, EQUIVCHARREAL) \\[\\begin{array}{lll}\\color{blue}{(\\mathbb{R})}&x^3=8& \\cr \\color{green}{\\Leftrightarrow}\\, \\color{blue}{(\\mathbb{R})}&x=2& \\cr \\end{array}\\] Equiv [abs(x-1/2)+abs(x+1/2)=2,abs(x )=1] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left| x-\\frac{1}{2}\\right| +\\left| x+\\frac{1}{2}\\right| =2& \\cr \\color{green}{\\Leftrightarrow}&\\left| x\\right| =1& \\cr \\end{array}\\] Equiv [a^2=9 and a>0,a=3] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}a^2=9\\cr a > 0\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&a=3& \\cr \\end{array}\\] Equiv [T=2*pi*sqrt(L/g),T^2=4*pi^2*L /g,g=4*pi^2*L/T^2] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&T=2\\cdot \\pi\\cdot \\sqrt{\\frac{L}{g}}& \\cr \\color{green}{\\Leftrightarrow}&T^2=\\frac{4\\cdot \\pi^2\\cdot L}{g}& \\cr \\color{green}{\\Leftrightarrow}&g=\\frac{4\\cdot \\pi^2\\cdot L}{T^2}& \\cr \\end{array}\\] Equiv [a=b,a^2=b^2] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&a=b& \\cr \\color{green}{\\Leftrightarrow}&a^2=b^2& \\cr \\end{array}\\] Equiv [a=b,sqrt(a)=sqrt(b)] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&a=b& \\cr \\color{green}{\\Leftrightarrow}&\\sqrt{a}=\\sqrt{b}& \\cr \\end{array}\\] Equiv [a^2=b^2,a=b] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&a^2=b^2& \\cr \\color{green}{\\Leftrightarrow}&a=b& \\cr \\end{array}\\] Equiv [a^2=b^2,a=b or a=-b] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&a^2=b^2& \\cr \\color{green}{\\Leftrightarrow}&a=b\\,{\\mbox{ or }}\\, a=-b& \\cr \\end{array}\\] Equiv [a=b,abs(a)=abs(b)] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&a=b& \\cr \\color{green}{\\Leftrightarrow}&\\left| a\\right| =\\left| b\\right| & \\cr \\end{array}\\] Equiv [abs(a)=abs(b),a=b] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&\\left| a\\right| =\\left| b\\right| & \\cr \\color{green}{\\Leftrightarrow}&a=b& \\cr \\end{array}\\] Equiv [abs(a)=abs(b),a=-b] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&\\left| a\\right| =\\left| b\\right| & \\cr \\color{green}{\\Leftrightarrow}&a=-b& \\cr \\end{array}\\] Equiv [abs(a)=abs(b),a=b or a=-b] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&\\left| a\\right| =\\left| b\\right| & \\cr \\color{green}{\\Leftrightarrow}&a=b\\,{\\mbox{ or }}\\, a=-b& \\cr \\end{array}\\] Equiv [x=abs(-2),x=2] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&x=\\left| -2\\right| & \\cr \\color{green}{\\Leftrightarrow}&x=2& \\cr \\end{array}\\] Equiv [abs(a)=abs(b),a^2=b^2] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&\\left| a\\right| =\\left| b\\right| & \\cr \\color{green}{\\Leftrightarrow}&a^2=b^2& \\cr \\end{array}\\] Equiv [x^2=9,x=#pm#3,x=3 or x=-3,x=3 ] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&x^2=9& \\cr \\color{green}{\\Leftrightarrow}&x= \\pm 3& \\cr \\color{green}{\\Leftrightarrow}&x=3\\,{\\mbox{ or }}\\, x=-3& \\cr \\color{green}{\\Leftrightarrow}&x=3& \\cr \\end{array}\\] Equiv [x^2=9,x=3] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&x^2=9& \\cr \\color{green}{\\Leftrightarrow}&x=3& \\cr \\end{array}\\] Equiv [x^2=2,x=#pm#sqrt(2),x=sqrt(2) or x=-sqrt(2)] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&x^2=2& \\cr \\color{green}{\\Leftrightarrow}&x= \\pm \\sqrt{2}& \\cr \\color{green}{\\Leftrightarrow}&x=\\sqrt{2}\\,{\\mbox{ or }}\\, x=-\\sqrt{2}& \\cr \\end{array}\\] Equiv [x^2=2,x=sqrt(2)] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&x^2=2& \\cr \\color{green}{\\Leftrightarrow}&x=\\sqrt{2}& \\cr \\end{array}\\] Equiv [x^2 = a^2-b,x = sqrt(a^2-b)] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&x^2=a^2-b& \\cr \\color{green}{\\Leftrightarrow}&x=\\sqrt{a^2-b}& \\cr \\end{array}\\] Equiv [2*(x-3) = 4*x-3*(x+2),2*x-6=x -6,x=0] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &2\\cdot \\left(x-3\\right)=4\\cdot x-3\\cdot \\left(x+2\\right)& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot x-6=x-6& \\cr \\color{green}{\\Leftrightarrow}&x=0& \\cr \\end{array}\\] Equiv [2*(x-3) = 5*x-3*(x+2),2*x-6=2 *x-6,0=0,all] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &2\\cdot \\left(x-3\\right)=5\\cdot x-3\\cdot \\left(x+2\\right)& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot x-6=2\\cdot x-6& \\cr \\color{green}{\\Leftrightarrow}&0=0& \\cr \\color{green}{\\Leftrightarrow}&\\mathbb{R}& \\cr \\end{array}\\] Equiv [2*(x-3) = 5*x-3*(x+1),2*x-6=2 *x-3,0=3,{}] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &2\\cdot \\left(x-3\\right)=5\\cdot x-3\\cdot \\left(x+1\\right)& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot x-6=2\\cdot x-3& \\cr \\color{green}{\\Leftrightarrow}&0=3& \\cr \\color{green}{\\Leftrightarrow}&\\left \\{ \\right \\}& \\cr \\end{array}\\] Equiv [a^2=b^2,a^2-b^2=0,(a-b)*(a+b) =0,a=b or a=-b] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &a^2=b^2& \\cr \\color{green}{\\Leftrightarrow}&a^2-b^2=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(a-b\\right)\\cdot \\left(a+b\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&a=b\\,{\\mbox{ or }}\\, a=-b& \\cr \\end{array}\\] Equiv [a^3=b^3,a^3-b^3=0,(a-b)*(a^2+ a*b+b^2)=0,(a-b)=0,a=b] [] 0 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR,IMPLIEDCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &a^3=b^3& \\cr \\color{green}{\\Leftrightarrow}&a^3-b^3=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(a-b\\right)\\cdot \\left(a^2+a\\cdot b+b^2\\right)=0& \\cr \\color{red}{\\Leftarrow}&a-b=0& \\cr \\color{green}{\\Leftrightarrow}&a=b& \\cr \\end{array}\\] Equiv [a^3=b^3,a^3-b^3=0,(a-b)*(a^2+ a*b+b^2)=0,(a-b)=0 or (a^2+a*b +b^2)=0, a=b or (a+(1+%i*sqrt( 3))/2*b)*(a+(1-%i*sqrt(3))/2*b )=0, a=b or a=-(1+%i*sqrt(3))/ 2*b or a=-(1-%i*sqrt(3))/2*b] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &a^3=b^3& \\cr \\color{green}{\\Leftrightarrow}&a^3-b^3=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(a-b\\right)\\cdot \\left(a^2+a\\cdot b+b^2\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&a-b=0\\,{\\mbox{ or }}\\, a^2+a\\cdot b+b^2=0& \\cr \\color{green}{\\Leftrightarrow}&a=b\\,{\\mbox{ or }}\\, \\left(a+\\frac{1+\\mathrm{i}\\cdot \\sqrt{3}}{2}\\cdot b\\right)\\cdot \\left(a+\\frac{1-\\mathrm{i}\\cdot \\sqrt{3}}{2}\\cdot b\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&a=b\\,{\\mbox{ or }}\\, a=\\frac{-\\left(1+\\mathrm{i}\\cdot \\sqrt{3}\\right)}{2}\\cdot b\\,{\\mbox{ or }}\\, a=\\frac{-\\left(1-\\mathrm{i}\\cdot \\sqrt{3}\\right)}{2}\\cdot b& \\cr \\end{array}\\] Equiv [x^2-x=30,x^2-x-30=0,(x-6)*(x+ 5)=0,x-6=0 or x+5=0,x=6 or x=- 5] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2-x=30& \\cr \\color{green}{\\Leftrightarrow}&x^2-x-30=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-6\\right)\\cdot \\left(x+5\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x-6=0\\,{\\mbox{ or }}\\, x+5=0& \\cr \\color{green}{\\Leftrightarrow}&x=6\\,{\\mbox{ or }}\\, x=-5& \\cr \\end{array}\\] Equiv [x^2=2,x^2-2=0,(x-sqrt(2))*(x+ sqrt(2))=0,x=sqrt(2) or x=-sqr t(2)] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2=2& \\cr \\color{green}{\\Leftrightarrow}&x^2-2=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-\\sqrt{2}\\right)\\cdot \\left(x+\\sqrt{2}\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x=\\sqrt{2}\\,{\\mbox{ or }}\\, x=-\\sqrt{2}& \\cr \\end{array}\\] Equiv [x^2=2,x=#pm#sqrt(2),x=sqrt(2) or x=-sqrt(2)] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2=2& \\cr \\color{green}{\\Leftrightarrow}&x= \\pm \\sqrt{2}& \\cr \\color{green}{\\Leftrightarrow}&x=\\sqrt{2}\\,{\\mbox{ or }}\\, x=-\\sqrt{2}& \\cr \\end{array}\\] Equiv [(2*x-7)^2=(x+1)^2,(2*x-7)^2 - (x+1)^2=0,(2*x-7+x+1)*(2*x-7-x -1)=0,(3*x-6)*(x-8)=0,x=2 or x =8] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &{\\left(2\\cdot x-7\\right)}^2={\\left(x+1\\right)}^2& \\cr \\color{green}{\\Leftrightarrow}&{\\left(2\\cdot x-7\\right)}^2-{\\left(x+1\\right)}^2=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(2\\cdot x-7+x+1\\right)\\cdot \\left(2\\cdot x-7-x-1\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(3\\cdot x-6\\right)\\cdot \\left(x-8\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x=2\\,{\\mbox{ or }}\\, x=8& \\cr \\end{array}\\] Equiv [x^2-6*x=-9,(x-3)^2=0,x-3=0,x= 3] [] 1 (EMPTYCHAR, EQUIVCHAR,SAMEROOTS, EQUIVCHAR) \\[\\begin{array}{lll} &x^2-6\\cdot x=-9& \\cr \\color{green}{\\Leftrightarrow}&{\\left(x-3\\right)}^2=0& \\cr \\color{green}{\\mbox{(Same roots)}}&x-3=0& \\cr \\color{green}{\\Leftrightarrow}&x=3& \\cr \\end{array}\\] Equiv [(2*x-7)^2=(x+1)^2,sqrt((2*x-7 )^2)=sqrt((x+1)^2),2*x-7=x+1,x =8] [] 0 (EMPTYCHAR, EQUIVCHAR,IMPLIEDCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &{\\left(2\\cdot x-7\\right)}^2={\\left(x+1\\right)}^2& \\cr \\color{green}{\\Leftrightarrow}&\\sqrt{{\\left(2\\cdot x-7\\right)}^2}=\\sqrt{{\\left(x+1\\right)}^2}& \\cr \\color{red}{\\Leftarrow}&2\\cdot x-7=x+1& \\cr \\color{green}{\\Leftrightarrow}&x=8& \\cr \\end{array}\\] Equiv [x^2-10*x+9 = 0, (x-5)^2-16 = 0, (x-5)^2 =16, x-5 =#pm#4, x- 5 =4 or x-5=-4, x = 1 or x = 9 ] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2-10\\cdot x+9=0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(x-5\\right)}^2-16=0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(x-5\\right)}^2=16& \\cr \\color{green}{\\Leftrightarrow}&x-5= \\pm 4& \\cr \\color{green}{\\Leftrightarrow}&x-5=4\\,{\\mbox{ or }}\\, x-5=-4& \\cr \\color{green}{\\Leftrightarrow}&x=1\\,{\\mbox{ or }}\\, x=9& \\cr \\end{array}\\] Equiv [x^2-2*p*x-q=0,x^2-2*p*x=q,x^2 -2*p*x+p^2=q+p^2,(x-p)^2=q+p^2 ,x-p=#pm#sqrt(q+p^2),x-p=sqrt( q+p^2) or x-p=-sqrt(q+p^2),x=p +sqrt(q+p^2) or x=p-sqrt(q+p^2 )] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2-2\\cdot p\\cdot x-q=0& \\cr \\color{green}{\\Leftrightarrow}&x^2-2\\cdot p\\cdot x=q& \\cr \\color{green}{\\Leftrightarrow}&x^2-2\\cdot p\\cdot x+p^2=q+p^2& \\cr \\color{green}{\\Leftrightarrow}&{\\left(x-p\\right)}^2=q+p^2& \\cr \\color{green}{\\Leftrightarrow}&x-p= \\pm \\sqrt{q+p^2}& \\cr \\color{green}{\\Leftrightarrow}&x-p=\\sqrt{q+p^2}\\,{\\mbox{ or }}\\, x-p=-\\sqrt{q+p^2}& \\cr \\color{green}{\\Leftrightarrow}&x=p+\\sqrt{q+p^2}\\,{\\mbox{ or }}\\, x=p-\\sqrt{q+p^2}& \\cr \\end{array}\\] Equiv [x^2-10*x+7=0,(x-5)^2-18=0,(x- 5)^2=sqrt(18)^2,(x-5)^2-sqrt(1 8)^2=0,(x-5-sqrt(18))*(x-5+sqr t(18))=0,x=5-sqrt(18) or x=5+s qrt(18)] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2-10\\cdot x+7=0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(x-5\\right)}^2-18=0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(x-5\\right)}^2={\\sqrt{18}}^2& \\cr \\color{green}{\\Leftrightarrow}&{\\left(x-5\\right)}^2-{\\sqrt{18}}^2=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-5-\\sqrt{18}\\right)\\cdot \\left(x-5+\\sqrt{18}\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x=5-\\sqrt{18}\\,{\\mbox{ or }}\\, x=5+\\sqrt{18}& \\cr \\end{array}\\] Equiv [9*x^2/2-81*x/2+90=5*x^2/2-5*x -20,4*x^2-71*x+220 = 0,x = (71 #pm# 39)/8,x=55/4 nounor x=4] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\frac{9\\cdot x^2}{2}-\\frac{81\\cdot x}{2}+90=\\frac{5\\cdot x^2}{2}-5\\cdot x-20& \\cr \\color{green}{\\Leftrightarrow}&4\\cdot x^2-71\\cdot x+220=0& \\cr \\color{green}{\\Leftrightarrow}&x=\\frac{{71 \\pm 39}}{8}& \\cr \\color{green}{\\Leftrightarrow}&x=\\frac{55}{4}\\,{\\mbox{ or }}\\, x=4& \\cr \\end{array}\\] Equiv [x^2+2*a*x = 0, x*(x+2*a)=0, ( x+a-a)*(x+a+a)=0, (x+a)^2-a^2= 0] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2+2\\cdot a\\cdot x=0& \\cr \\color{green}{\\Leftrightarrow}&x\\cdot \\left(x+2\\cdot a\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x+a-a\\right)\\cdot \\left(x+a+a\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(x+a\\right)}^2-a^2=0& \\cr \\end{array}\\] Equiv [x^3-1=0,(x-1)*(x^2+x+1)=0,x=1 ] [] 0 (EMPTYCHAR, EQUIVCHAR,IMPLIEDCHAR) \\[\\begin{array}{lll} &x^3-1=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-1\\right)\\cdot \\left(x^2+x+1\\right)=0& \\cr \\color{red}{\\Leftarrow}&x=1& \\cr \\end{array}\\] Equiv [x^3-1=0,(x-1)*(x^2+x+1)=0,x=1 or x^2+x+1=0,x=1 or x = -(sqr t(3)*%i+1)/2 or x=(sqrt(3)*%i- 1)/2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^3-1=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-1\\right)\\cdot \\left(x^2+x+1\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x=1\\,{\\mbox{ or }}\\, x^2+x+1=0& \\cr \\color{green}{\\Leftrightarrow}&x=1\\,{\\mbox{ or }}\\, x=\\frac{-\\left(\\sqrt{3}\\cdot \\mathrm{i}+1\\right)}{2}\\,{\\mbox{ or }}\\, x=\\frac{\\sqrt{3}\\cdot \\mathrm{i}-1}{2}& \\cr \\end{array}\\] Equiv [a*x^2+b*x+c=0 or a=0,a^2*x^2+ a*b*x+a*c=0,(a*x)^2+b*(a*x)+a* c=0, (a*x)^2+b*(a*x)+b^2/4-b^2 /4+a*c=0,(a*x+b/2)^2-b^2/4+a*c =0,(a*x+b/2)^2=b^2/4-a*c, a*x+ b/2= #pm#sqrt(b^2/4-a*c),a*x=- b/2+sqrt(b^2/4-a*c) or a*x=-b/ 2-sqrt(b^2/4-a*c), (a=0 or x=( -b+sqrt(b^2-4*a*c))/(2*a)) or (a=0 or x=(-b-sqrt(b^2-4*a*c)) /(2*a)), a^2=0 or x=(-b+sqrt(b ^2-4*a*c))/(2*a) or x=(-b-sqrt (b^2-4*a*c))/(2*a)] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &a\\cdot x^2+b\\cdot x+c=0\\,{\\mbox{ or }}\\, a=0& \\cr \\color{green}{\\Leftrightarrow}&a^2\\cdot x^2+a\\cdot b\\cdot x+a\\cdot c=0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(a\\cdot x\\right)}^2+b\\cdot \\left(a\\cdot x\\right)+a\\cdot c=0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(a\\cdot x\\right)}^2+b\\cdot \\left(a\\cdot x\\right)+\\frac{b^2}{4}-\\frac{b^2}{4}+a\\cdot c=0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(a\\cdot x+\\frac{b}{2}\\right)}^2-\\frac{b^2}{4}+a\\cdot c=0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(a\\cdot x+\\frac{b}{2}\\right)}^2=\\frac{b^2}{4}-a\\cdot c& \\cr \\color{green}{\\Leftrightarrow}&a\\cdot x+\\frac{b}{2}= \\pm \\sqrt{\\frac{b^2}{4}-a\\cdot c}& \\cr \\color{green}{\\Leftrightarrow}&a\\cdot x=-\\frac{b}{2}+\\sqrt{\\frac{b^2}{4}-a\\cdot c}\\,{\\mbox{ or }}\\, a\\cdot x=-\\frac{b}{2}-\\sqrt{\\frac{b^2}{4}-a\\cdot c}& \\cr \\color{green}{\\Leftrightarrow}&a=0\\,{\\mbox{ or }}\\, x=\\frac{-b+\\sqrt{b^2-4\\cdot a\\cdot c}}{2\\cdot a}\\,{\\mbox{ or }}\\, \\left(a=0\\,{\\mbox{ or }}\\, x=\\frac{-b-\\sqrt{b^2-4\\cdot a\\cdot c}}{2\\cdot a}\\right)& \\cr \\color{green}{\\Leftrightarrow}&a^2=0\\,{\\mbox{ or }}\\, x=\\frac{-b+\\sqrt{b^2-4\\cdot a\\cdot c}}{2\\cdot a}\\,{\\mbox{ or }}\\, x=\\frac{-b-\\sqrt{b^2-4\\cdot a\\cdot c}}{2\\cdot a}& \\cr \\end{array}\\] Equiv [a*x^2+b*x=-c,4*a^2*x^2+4*a*b* x+b^2=b^2-4*a*c,(2*a*x+b)^2=b^ 2-4*a*c,2*a*x+b=#pm#sqrt(b^2-4 *a*c),2*a*x=-b#pm#sqrt(b^2-4*a *c),x=(-b#pm#sqrt(b^2-4*a*c))/ (2*a)] [] 0 (EMPTYCHAR,IMPLIESCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR,QMCHAR) \\[\\begin{array}{lll} &a\\cdot x^2+b\\cdot x=-c& \\cr \\color{red}{\\Rightarrow}&4\\cdot a^2\\cdot x^2+4\\cdot a\\cdot b\\cdot x+b^2=b^2-4\\cdot a\\cdot c& \\cr \\color{green}{\\Leftrightarrow}&{\\left(2\\cdot a\\cdot x+b\\right)}^2=b^2-4\\cdot a\\cdot c& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot a\\cdot x+b= \\pm \\sqrt{b^2-4\\cdot a\\cdot c}& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot a\\cdot x={-b \\pm \\sqrt{b^2-4\\cdot a\\cdot c}}& \\cr \\color{red}{?}&x=\\frac{{-b \\pm \\sqrt{b^2-4\\cdot a\\cdot c}}}{2\\cdot a}& \\cr \\end{array}\\] Equiv [a*x^2+b*x=-c or a=0,4*a^2*x^2 +4*a*b*x+b^2=b^2-4*a*c,(2*a*x+ b)^2=b^2-4*a*c,2*a*x+b=#pm#sqr t(b^2-4*a*c),2*a*x=-b#pm#sqrt( b^2-4*a*c),x=(-b#pm#sqrt(b^2-4 *a*c))/(2*a) or a=0] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &a\\cdot x^2+b\\cdot x=-c\\,{\\mbox{ or }}\\, a=0& \\cr \\color{green}{\\Leftrightarrow}&4\\cdot a^2\\cdot x^2+4\\cdot a\\cdot b\\cdot x+b^2=b^2-4\\cdot a\\cdot c& \\cr \\color{green}{\\Leftrightarrow}&{\\left(2\\cdot a\\cdot x+b\\right)}^2=b^2-4\\cdot a\\cdot c& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot a\\cdot x+b= \\pm \\sqrt{b^2-4\\cdot a\\cdot c}& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot a\\cdot x={-b \\pm \\sqrt{b^2-4\\cdot a\\cdot c}}& \\cr \\color{green}{\\Leftrightarrow}&x=\\frac{{-b \\pm \\sqrt{b^2-4\\cdot a\\cdot c}}}{2\\cdot a}\\,{\\mbox{ or }}\\, a=0& \\cr \\end{array}\\] Equiv [sqrt(3*x+4) = 2+sqrt(x+2), 3* x+4=4+4*sqrt(x+2)+(x+2),x-1=2* sqrt(x+2),x^2-2*x+1 = 4*x+8,x^ 2-6*x-7 = 0,(x-7)*(x+1) = 0,x= 7 or x=-1] [] 0 (EMPTYCHAR,IMPLIESCHAR, EQUIVCHAR,IMPLIESCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\sqrt{3\\cdot x+4}=2+\\sqrt{x+2}&{\\color{blue}{{x \\in {\\left[ -\\frac{4}{3},\\, \\infty \\right)}}}}\\cr \\color{red}{\\Rightarrow}&3\\cdot x+4=4+4\\cdot \\sqrt{x+2}+\\left(x+2\\right)&{\\color{blue}{{x \\in {\\left[ -2,\\, \\infty \\right)}}}}\\cr \\color{green}{\\Leftrightarrow}&x-1=2\\cdot \\sqrt{x+2}&{\\color{blue}{{x \\in {\\left[ -2,\\, \\infty \\right)}}}}\\cr \\color{red}{\\Rightarrow}&x^2-2\\cdot x+1=4\\cdot x+8& \\cr \\color{green}{\\Leftrightarrow}&x^2-6\\cdot x-7=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-7\\right)\\cdot \\left(x+1\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x=7\\,{\\mbox{ or }}\\, x=-1& \\cr \\end{array}\\] Equiv [sqrt(3*x+4) = 2+sqrt(x+2), 3* x+4=4+4*sqrt(x+2)+(x+2),x-1=2* sqrt(x+2),x^2-2*x+1 = 4*x+8,x^ 2-6*x-7 = 0,(x-7)*(x+1) = 0,x= 7 or x=-1,x=7] [] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&\\sqrt{3\\cdot x+4}=2+\\sqrt{x+2}&{\\color{blue}{{x \\in {\\left[ 0,\\, \\infty \\right)}}}}\\cr \\color{green}{\\Leftrightarrow}&3\\cdot x+4=4+4\\cdot \\sqrt{x+2}+\\left(x+2\\right)&{\\color{blue}{{x \\in {\\left[ 0,\\, \\infty \\right)}}}}\\cr \\color{green}{\\Leftrightarrow}&x-1=2\\cdot \\sqrt{x+2}&{\\color{blue}{{x \\in {\\left[ 0,\\, \\infty \\right)}}}}\\cr \\color{green}{\\Leftrightarrow}&x^2-2\\cdot x+1=4\\cdot x+8& \\cr \\color{green}{\\Leftrightarrow}&x^2-6\\cdot x-7=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-7\\right)\\cdot \\left(x+1\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x=7\\,{\\mbox{ or }}\\, x=-1& \\cr \\color{green}{\\Leftrightarrow}&x=7& \\cr \\end{array}\\] Equiv [x*(x-1)*(x-2)=0,x*(x-1)=0,x*( x-1)*(x-2)=0,x*(x^2-2)=0] [] 0 (EMPTYCHAR,IMPLIEDCHAR,IMPLIESCHAR,QMCHAR) \\[\\begin{array}{lll} &x\\cdot \\left(x-1\\right)\\cdot \\left(x-2\\right)=0& \\cr \\color{red}{\\Leftarrow}&x\\cdot \\left(x-1\\right)=0& \\cr \\color{red}{\\Rightarrow}&x\\cdot \\left(x-1\\right)\\cdot \\left(x-2\\right)=0& \\cr \\color{red}{?}&x\\cdot \\left(x^2-2\\right)=0& \\cr \\end{array}\\] Equiv [x^2-6*x=-9,x=3] [] 1 (EMPTYCHAR,SAMEROOTS) \\[\\begin{array}{lll} &x^2-6\\cdot x=-9& \\cr \\color{green}{\\mbox{(Same roots)}}&x=3& \\cr \\end{array}\\] Equiv [x=1 nounor x=-2 nounor x=1,x^ 3-3*x=-2,x=1 nounor x=-2] [] 1 (EMPTYCHAR, EQUIVCHAR,SAMEROOTS) \\[\\begin{array}{lll} &x=1\\,{\\mbox{ or }}\\, x=-2\\,{\\mbox{ or }}\\, x=1& \\cr \\color{green}{\\Leftrightarrow}&x^3-3\\cdot x=-2& \\cr \\color{green}{\\mbox{(Same roots)}}&x=1\\,{\\mbox{ or }}\\, x=-2& \\cr \\end{array}\\] Equiv [9*x^3-24*x^2+13*x=2,x=1/3 nou nor x=2] [] 1 (EMPTYCHAR,SAMEROOTS) \\[\\begin{array}{lll} &9\\cdot x^3-24\\cdot x^2+13\\cdot x=2& \\cr \\color{green}{\\mbox{(Same roots)}}&x=\\frac{1}{3}\\,{\\mbox{ or }}\\, x=2& \\cr \\end{array}\\] Equiv [(x-2)^43*(x+1/3)^60=0,(3*x+1) ^4*(x-2)^2=0,x=-1/3 nounor x=2 ] [] 1 (EMPTYCHAR,SAMEROOTS,SAMEROOTS) \\[\\begin{array}{lll} &{\\left(x-2\\right)}^{43}\\cdot {\\left(x+\\frac{1}{3}\\right)}^{60}=0& \\cr \\color{green}{\\mbox{(Same roots)}}&{\\left(3\\cdot x+1\\right)}^4\\cdot {\\left(x-2\\right)}^2=0& \\cr \\color{green}{\\mbox{(Same roots)}}&x=\\frac{-1}{3}\\,{\\mbox{ or }}\\, x=2& \\cr \\end{array}\\] Equiv [2^x=4,x*log(2)=log(4),x=log(2 ^2)/log(2),x=2*log(2)/log(2),x =2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &2^{x}=4& \\cr \\color{green}{\\Leftrightarrow}&x\\cdot \\ln \\left( 2 \\right)=\\ln \\left( 4 \\right)& \\cr \\color{green}{\\Leftrightarrow}&x=\\frac{\\ln \\left( 2^2 \\right)}{\\ln \\left( 2 \\right)}& \\cr \\color{green}{\\Leftrightarrow}&x=\\frac{2\\cdot \\ln \\left( 2 \\right)}{\\ln \\left( 2 \\right)}& \\cr \\color{green}{\\Leftrightarrow}&x=2& \\cr \\end{array}\\] Equiv [x^log(y),stackeq(e^(log(x)*lo g(y))),stackeq(e^(log(y)*log(x ))),stackeq(y^log(x))] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &x^{\\ln \\left( y \\right)}& \\cr \\color{green}{\\checkmark}&=e^{\\ln \\left( x \\right)\\cdot \\ln \\left( y \\right)}& \\cr \\color{green}{\\checkmark}&=e^{\\ln \\left( y \\right)\\cdot \\ln \\left( x \\right)}& \\cr \\color{green}{\\checkmark}&=y^{\\ln \\left( x \\right)}& \\cr \\end{array}\\] Equiv [lg(x+17,3)-2=lg(2*x,3),lg(x+1 7,3)-lg(2*x,3)=2,lg((x+17)/(2* x),3)=2,(x+17)/(2*x)=3^2,(x+17 )=18*x,17*x=17,x=1] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR,EQUIVLOG, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\log_{3}\\left(x+17\\right)-2=\\log_{3}\\left(2\\cdot x\\right)&{\\color{blue}{{x \\in {\\left( 0,\\, \\infty \\right)}}}}\\cr \\color{green}{\\Leftrightarrow}&\\log_{3}\\left(x+17\\right)-\\log_{3}\\left(2\\cdot x\\right)=2&{\\color{blue}{{x \\in {\\left( 0,\\, \\infty \\right)}}}}\\cr \\color{green}{\\Leftrightarrow}&\\log_{3}\\left(\\frac{x+17}{2\\cdot x}\\right)=2& \\cr \\color{green}{\\log(?)}&\\frac{x+17}{2\\cdot x}=3^2&{\\color{blue}{{x \\not\\in {\\left \\{0 \\right \\}}}}}\\cr \\color{green}{\\Leftrightarrow}&x+17=18\\cdot x& \\cr \\color{green}{\\Leftrightarrow}&17\\cdot x=17& \\cr \\color{green}{\\Leftrightarrow}&x=1& \\cr \\end{array}\\] Equiv [a=logbase(9,3),3^a=9,3^a=3^2, a=2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &a=\\log_{3}\\left(9\\right)& \\cr \\color{green}{\\Leftrightarrow}&3^{a}=9& \\cr \\color{green}{\\Leftrightarrow}&3^{a}=3^2& \\cr \\color{green}{\\Leftrightarrow}&a=2& \\cr \\end{array}\\] Equiv [x=(1+y/n)^n,x^(1/n)=(1+y/n),y /n=x^(1/n)-1,y=n*(x^(1/n)-1)] [] 0 (EMPTYCHAR,QMCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x={\\left(1+\\frac{y}{n}\\right)}^{n}& \\cr \\color{red}{?}&x^{\\frac{1}{n}}=1+\\frac{y}{n}& \\cr \\color{green}{\\Leftrightarrow}&\\frac{y}{n}=x^{\\frac{1}{n}}-1& \\cr \\color{green}{\\Leftrightarrow}&y=n\\cdot \\left(x^{\\frac{1}{n}}-1\\right)& \\cr \\end{array}\\] Equiv [a^3=b^3,a^3-b^3=0,(a-b)*(a^2+ a*b+b^2)=0,(a-b)=0,a=b] [] [assumereal] 0 (ASSUMEREALVARS, EQUIVCHAR, EQUIVCHAR,IMPLIEDCHAR, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{(\\mathbb{R})}&a^3=b^3& \\cr \\color{green}{\\Leftrightarrow}&a^3-b^3=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(a-b\\right)\\cdot \\left(a^2+a\\cdot b+b^2\\right)=0& \\cr \\color{red}{\\Leftarrow}&a-b=0& \\cr \\color{green}{\\Leftrightarrow}&a=b& \\cr \\end{array}\\] Equiv [x^3-1=0,(x-1)*(x^2+x+1)=0,x=1 ] [] [assumereal] 1 (ASSUMEREALVARS, EQUIVCHAR, EQUIVCHARREAL) \\[\\begin{array}{lll}\\color{blue}{(\\mathbb{R})}&x^3-1=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-1\\right)\\cdot \\left(x^2+x+1\\right)=0& \\cr \\color{green}{\\Leftrightarrow}\\, \\color{blue}{(\\mathbb{R})}&x=1& \\cr \\end{array}\\] Equiv [x^4=2,x^4-2=0,(x^2-sqrt(2))*( x^2+sqrt(2))=0,x^2=sqrt(2),x=# pm# 2^(1/4)] [] [assumereal] 1 (ASSUMEREALVARS, EQUIVCHAR, EQUIVCHAR, EQUIVCHARREAL, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{(\\mathbb{R})}&x^4=2& \\cr \\color{green}{\\Leftrightarrow}&x^4-2=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x^2-\\sqrt{2}\\right)\\cdot \\left(x^2+\\sqrt{2}\\right)=0& \\cr \\color{green}{\\Leftrightarrow}\\, \\color{blue}{(\\mathbb{R})}&x^2=\\sqrt{2}& \\cr \\color{green}{\\Leftrightarrow}&x= \\pm 2^{\\frac{1}{4}}& \\cr \\end{array}\\] Equiv [6*x-12=3*(x-2),6*x-12+3*(x-2) =0,9*x-18=0,x=2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &6\\cdot x-12=3\\cdot \\left(x-2\\right)& \\cr \\color{green}{\\Leftrightarrow}&6\\cdot x-12+3\\cdot \\left(x-2\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&9\\cdot x-18=0& \\cr \\color{green}{\\Leftrightarrow}&x=2& \\cr \\end{array}\\] Equiv [x^2-6*x+9=0,x^2-6*x=-9,x*(x-6 )=3*-3,x=3 or x-6=-3,x=3] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR,SAMEROOTS) \\[\\begin{array}{lll} &x^2-6\\cdot x+9=0& \\cr \\color{green}{\\Leftrightarrow}&x^2-6\\cdot x=-9& \\cr \\color{green}{\\Leftrightarrow}&x\\cdot \\left(x-6\\right)=3\\cdot \\left(-3\\right)& \\cr \\color{green}{\\Leftrightarrow}&x=3\\,{\\mbox{ or }}\\, x-6=-3& \\cr \\color{green}{\\mbox{(Same roots)}}&x=3& \\cr \\end{array}\\] Equiv [(x+3)*(2-x)=4,x+3=4 or (2-x)= 4,x=1 or x=-2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left(x+3\\right)\\cdot \\left(2-x\\right)=4& \\cr \\color{green}{\\Leftrightarrow}&x+3=4\\,{\\mbox{ or }}\\, 2-x=4& \\cr \\color{green}{\\Leftrightarrow}&x=1\\,{\\mbox{ or }}\\, x=-2& \\cr \\end{array}\\] Equiv [(x-p)*(x-q)=0,x^2-p*x-q*x+p*q =0,1+q-x-p-p*q+p*x+x+q*x-x^2=1 -p+q,(1+q-x)*(1-p+x)=1-p+q,(1+ q-x)=1-p+q or (1-p+x)=1-p+q,x= p or x=q] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left(x-p\\right)\\cdot \\left(x-q\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x^2-p\\cdot x+\\left(-q\\right)\\cdot x+p\\cdot q=0& \\cr \\color{green}{\\Leftrightarrow}&1+q-x-p+\\left(-p\\right)\\cdot q+p\\cdot x+x+q\\cdot x-x^2=1-p+q& \\cr \\color{green}{\\Leftrightarrow}&\\left(1+q-x\\right)\\cdot \\left(1-p+x\\right)=1-p+q& \\cr \\color{green}{\\Leftrightarrow}&1+q-x=1-p+q\\,{\\mbox{ or }}\\, 1-p+x=1-p+q& \\cr \\color{green}{\\Leftrightarrow}&x=p\\,{\\mbox{ or }}\\, x=q& \\cr \\end{array}\\] Equiv [a=b, a^2=a*b, a^2-b^2=a*b-b^2 , (a-b)*(a+b)=b*(a-b), a+b=b, 2*a=a, 1=2] [] 0 (EMPTYCHAR,IMPLIESCHAR, EQUIVCHAR, EQUIVCHAR,IMPLIEDCHAR, EQUIVCHAR,IMPLIEDCHAR) \\[\\begin{array}{lll} &a=b& \\cr \\color{red}{\\Rightarrow}&a^2=a\\cdot b& \\cr \\color{green}{\\Leftrightarrow}&a^2-b^2=a\\cdot b-b^2& \\cr \\color{green}{\\Leftrightarrow}&\\left(a-b\\right)\\cdot \\left(a+b\\right)=b\\cdot \\left(a-b\\right)& \\cr \\color{red}{\\Leftarrow}&a+b=b& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot a=a& \\cr \\color{red}{\\Leftarrow}&1=2& \\cr \\end{array}\\] Equiv [a=b or a=0, a^2=a*b, a^2-b^2= a*b-b^2, (a-b)*(a+b)=b*(a-b), a+b=b or a-b=0, 2*a=a or a=b, 2=1 or a=0 or a=b, a=0 or a=b] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &a=b\\,{\\mbox{ or }}\\, a=0& \\cr \\color{green}{\\Leftrightarrow}&a^2=a\\cdot b& \\cr \\color{green}{\\Leftrightarrow}&a^2-b^2=a\\cdot b-b^2& \\cr \\color{green}{\\Leftrightarrow}&\\left(a-b\\right)\\cdot \\left(a+b\\right)=b\\cdot \\left(a-b\\right)& \\cr \\color{green}{\\Leftrightarrow}&a+b=b\\,{\\mbox{ or }}\\, a-b=0& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot a=a\\,{\\mbox{ or }}\\, a=b& \\cr \\color{green}{\\Leftrightarrow}&2=1\\,{\\mbox{ or }}\\, a=0\\,{\\mbox{ or }}\\, a=b& \\cr \\color{green}{\\Leftrightarrow}&a=0\\,{\\mbox{ or }}\\, a=b& \\cr \\end{array}\\] Equiv [(x^2-4)/(x-2)=0,(x-2)*(x+2)/( x-2)=0,x+2=0,x=-2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\frac{x^2-4}{x-2}=0&{\\color{blue}{{x \\not\\in {\\left \\{2 \\right \\}}}}}\\cr \\color{green}{\\Leftrightarrow}&\\frac{\\left(x-2\\right)\\cdot \\left(x+2\\right)}{x-2}=0& \\cr \\color{green}{\\Leftrightarrow}&x+2=0& \\cr \\color{green}{\\Leftrightarrow}&x=-2& \\cr \\end{array}\\] Equiv [(x^2-4)/(x-2)=0,(x^2-4)=0,(x- 2)*(x+2)=0,x=-2 or x=2] [] 0 (EMPTYCHAR,IMPLIESCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\frac{x^2-4}{x-2}=0&{\\color{blue}{{x \\not\\in {\\left \\{2 \\right \\}}}}}\\cr \\color{red}{\\Rightarrow}&x^2-4=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-2\\right)\\cdot \\left(x+2\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x=-2\\,{\\mbox{ or }}\\, x=2& \\cr \\end{array}\\] Equiv [5*x/(2*x+1)-3/(x+1) = 1,5*x*( x+1)-3*(2*x+1)=(x+1)*(2*x+1),5 *x^2+5*x-6*x-3=2*x^2+3*x+1,3*x ^2-4*x-4=0,(x-2)*(3*x+2)=0,x=2 or x=-2/3] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\frac{5\\cdot x}{2\\cdot x+1}-\\frac{3}{x+1}=1&{\\color{blue}{{x \\not\\in {\\left \\{-1 , -\\frac{1}{2} \\right \\}}}}}\\cr \\color{green}{\\Leftrightarrow}&5\\cdot x\\cdot \\left(x+1\\right)-3\\cdot \\left(2\\cdot x+1\\right)=\\left(x+1\\right)\\cdot \\left(2\\cdot x+1\\right)& \\cr \\color{green}{\\Leftrightarrow}&5\\cdot x^2+5\\cdot x-6\\cdot x-3=2\\cdot x^2+3\\cdot x+1& \\cr \\color{green}{\\Leftrightarrow}&3\\cdot x^2-4\\cdot x-4=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-2\\right)\\cdot \\left(3\\cdot x+2\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x=2\\,{\\mbox{ or }}\\, x=\\frac{-2}{3}& \\cr \\end{array}\\] Equiv [(x+10)/(x-6)-5= (4*x-40)/(13- x),(x+10-5*(x-6))/(x-6)= (4*x- 40)/(13-x), (4*x-40)/(6-x)= (4 *x-40)/(13-x),6-x= 13-x,6= 13] [] 0 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR,QMCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\frac{x+10}{x-6}-5=\\frac{4\\cdot x-40}{13-x}&{\\color{blue}{{x \\not\\in {\\left \\{6 , 13 \\right \\}}}}}\\cr \\color{green}{\\Leftrightarrow}&\\frac{x+10-5\\cdot \\left(x-6\\right)}{x-6}=\\frac{4\\cdot x-40}{13-x}&{\\color{blue}{{x \\not\\in {\\left \\{6 , 13 \\right \\}}}}}\\cr \\color{green}{\\Leftrightarrow}&\\frac{4\\cdot x-40}{6-x}=\\frac{4\\cdot x-40}{13-x}&{\\color{blue}{{x \\not\\in {\\left \\{6 , 13 \\right \\}}}}}\\cr \\color{red}{?}&6-x=13-x& \\cr \\color{green}{\\Leftrightarrow}&6=13& \\cr \\end{array}\\] Equiv [(x+5)/(x-7)-5= (4*x-40)/(13-x ),(x+5-5*(x-7))/(x-7)= (4*x-40 )/(13-x), (4*x-40)/(7-x)= (4*x -40)/(13-x),7-x= 13-x,7= 13] [] 0 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR,IMPLIEDCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\frac{x+5}{x-7}-5=\\frac{4\\cdot x-40}{13-x}&{\\color{blue}{{x \\not\\in {\\left \\{7 , 13 \\right \\}}}}}\\cr \\color{green}{\\Leftrightarrow}&\\frac{x+5-5\\cdot \\left(x-7\\right)}{x-7}=\\frac{4\\cdot x-40}{13-x}&{\\color{blue}{{x \\not\\in {\\left \\{7 , 13 \\right \\}}}}}\\cr \\color{green}{\\Leftrightarrow}&\\frac{4\\cdot x-40}{7-x}=\\frac{4\\cdot x-40}{13-x}&{\\color{blue}{{x \\not\\in {\\left \\{7 , 13 \\right \\}}}}}\\cr \\color{red}{\\Leftarrow}&7-x=13-x& \\cr \\color{green}{\\Leftrightarrow}&7=13& \\cr \\end{array}\\] Equiv [(x+5)/(x-7)-5= (4*x-40)/(13-x ),(x+5-5*(x-7))/(x-7)= (4*x-40 )/(13-x), (4*x-40)/(7-x)= (4*x -40)/(13-x),7-x= 13-x or 4*x-4 0=0,7= 13 or 4*x=40,x=10] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\frac{x+5}{x-7}-5=\\frac{4\\cdot x-40}{13-x}&{\\color{blue}{{x \\not\\in {\\left \\{7 , 13 \\right \\}}}}}\\cr \\color{green}{\\Leftrightarrow}&\\frac{x+5-5\\cdot \\left(x-7\\right)}{x-7}=\\frac{4\\cdot x-40}{13-x}&{\\color{blue}{{x \\not\\in {\\left \\{7 , 13 \\right \\}}}}}\\cr \\color{green}{\\Leftrightarrow}&\\frac{4\\cdot x-40}{7-x}=\\frac{4\\cdot x-40}{13-x}&{\\color{blue}{{x \\not\\in {\\left \\{7 , 13 \\right \\}}}}}\\cr \\color{green}{\\Leftrightarrow}&7-x=13-x\\,{\\mbox{ or }}\\, 4\\cdot x-40=0& \\cr \\color{green}{\\Leftrightarrow}&7=13\\,{\\mbox{ or }}\\, 4\\cdot x=40& \\cr \\color{green}{\\Leftrightarrow}&x=10& \\cr \\end{array}\\] Equiv [a*x^2+b*x+c=0,a=0 nounand b=0 nounand c=0,a*x^2+b*x+c=0] [] 1 (EMPTYCHAR,EQUATECOEFFLOSS(x),EQUATECOEFFGAIN(x)) \\[\\begin{array}{lll} &a\\cdot x^2+b\\cdot x+c=0& \\cr \\color{green}{\\equiv (\\cdots ? x)}&\\left\\{\\begin{array}{l}a=0\\cr b=0\\cr c=0\\cr \\end{array}\\right.& \\cr \\color{green}{(\\cdots ? x)\\equiv}&a\\cdot x^2+b\\cdot x+c=0& \\cr \\end{array}\\] Equiv [a*x^2+b*x+c=A*x^2+B*x+C,a=A n ounand b=B nounand c=C,a*x^2+b *x+c=A*x^2+B*x+C] [] 1 (EMPTYCHAR,EQUATECOEFFLOSS(x),EQUATECOEFFGAIN(x)) \\[\\begin{array}{lll} &a\\cdot x^2+b\\cdot x+c=A\\cdot x^2+B\\cdot x+C& \\cr \\color{green}{\\equiv (\\cdots ? x)}&\\left\\{\\begin{array}{l}a=A\\cr b=B\\cr c=C\\cr \\end{array}\\right.& \\cr \\color{green}{(\\cdots ? x)\\equiv}&a\\cdot x^2+b\\cdot x+c=A\\cdot x^2+B\\cdot x+C& \\cr \\end{array}\\] Equiv [(x-1)*(x+4), stackeq(x^2-x+4* x-4),stackeq(x^2+3*x-4)] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &\\left(x-1\\right)\\cdot \\left(x+4\\right)& \\cr \\color{green}{\\checkmark}&=x^2-x+4\\cdot x-4& \\cr \\color{green}{\\checkmark}&=x^2+3\\cdot x-4& \\cr \\end{array}\\] Equiv [(x-1)*(x+4), stackeq(x^2-x+4* x-4),stackeq(x^2+3*x-4)] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &\\left(x-1\\right)\\cdot \\left(x+4\\right)& \\cr \\color{green}{\\checkmark}&=x^2-x+4\\cdot x-4& \\cr \\color{green}{\\checkmark}&=x^2+3\\cdot x-4& \\cr \\end{array}\\] Equiv [x^2-2,stackeq((x-sqrt(2))*(x+ sqrt(2)))] [] 1 (EMPTYCHAR, CHECKMARK) \\[\\begin{array}{lll} &x^2-2& \\cr \\color{green}{\\checkmark}&=\\left(x-\\sqrt{2}\\right)\\cdot \\left(x+\\sqrt{2}\\right)& \\cr \\end{array}\\] Equiv [x^2+4,stackeq((x-2*i)*(x+2*i) )] [] 1 (EMPTYCHAR, CHECKMARK) \\[\\begin{array}{lll} &x^2+4& \\cr \\color{green}{\\checkmark}&=\\left(x-2\\cdot \\mathrm{i}\\right)\\cdot \\left(x+2\\cdot \\mathrm{i}\\right)& \\cr \\end{array}\\] Equiv [x^2+2*a*x,x^2+2*a*x+a^2-a^2,( x+a)^2-a^2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2+2\\cdot a\\cdot x& \\cr \\color{green}{\\Leftrightarrow}&x^2+2\\cdot a\\cdot x+a^2-a^2& \\cr \\color{green}{\\Leftrightarrow}&{\\left(x+a\\right)}^2-a^2& \\cr \\end{array}\\] Equiv [x^2+2*a*x,stackeq(x^2+2*a*x+a ^2-a^2),stackeq((x+a)^2-a^2)] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &x^2+2\\cdot a\\cdot x& \\cr \\color{green}{\\checkmark}&=x^2+2\\cdot a\\cdot x+a^2-a^2& \\cr \\color{green}{\\checkmark}&={\\left(x+a\\right)}^2-a^2& \\cr \\end{array}\\] Equiv [(y-z)/(y*z)+(z-x)/(z*x)+(x-y) /(x*y),(x*(y-z)+y*(z-x)+z*(x-y ))/(x*y*z),0] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\frac{y-z}{y\\cdot z}+\\frac{z-x}{z\\cdot x}+\\frac{x-y}{x\\cdot y}& \\cr \\color{green}{\\Leftrightarrow}&\\frac{x\\cdot \\left(y-z\\right)+y\\cdot \\left(z-x\\right)+z\\cdot \\left(x-y\\right)}{x\\cdot y\\cdot z}& \\cr \\color{green}{\\Leftrightarrow}&0& \\cr \\end{array}\\] Equiv [(y-z)/(y*z)+(z-x)/(z*x)+(x-y) /(x*y),stackeq((x*(y-z)+y*(z-x )+z*(x-y))/(x*y*z)),stackeq(0) ] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &\\frac{y-z}{y\\cdot z}+\\frac{z-x}{z\\cdot x}+\\frac{x-y}{x\\cdot y}& \\cr \\color{green}{\\checkmark}&=\\frac{x\\cdot \\left(y-z\\right)+y\\cdot \\left(z-x\\right)+z\\cdot \\left(x-y\\right)}{x\\cdot y\\cdot z}& \\cr \\color{green}{\\checkmark}&=0& \\cr \\end{array}\\] Equiv [2*(a^2*b^2+b^2*c^2+c^2*a^2)-( a^4+b^4+c^4),stackeq(4*a^2*b^2 -(a^4+b^4+c^4+2*a^2*b^2-2*b^2* c^2-2*c^2*a^2)),stackeq((2*a*b )^2-(b^2+a^2-c^2)^2,(2*a*b+b^2 +a^2-c^2)*(2*a*b-b^2-a^2+c^2)) ,stackeq(((a+b)^2-c^2)*(c^2-(a -b)^2)),stackeq((a+b+c)*(a+b-c )*(c+a-b)*(c-a+b))] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &2\\cdot \\left(a^2\\cdot b^2+b^2\\cdot c^2+c^2\\cdot a^2\\right)-\\left(a^4+b^4+c^4\\right)& \\cr \\color{green}{\\checkmark}&=4\\cdot a^2\\cdot b^2-\\left(a^4+b^4+c^4+2\\cdot a^2\\cdot b^2-2\\cdot b^2\\cdot c^2-2\\cdot c^2\\cdot a^2\\right)& \\cr \\color{green}{\\checkmark}&={\\left(2\\cdot a\\cdot b\\right)}^2-{\\left(b^2+a^2-c^2\\right)}^2& \\cr \\color{green}{\\checkmark}&=\\left({\\left(a+b\\right)}^2-c^2\\right)\\cdot \\left(c^2-{\\left(a-b\\right)}^2\\right)& \\cr \\color{green}{\\checkmark}&=\\left(a+b+c\\right)\\cdot \\left(a+b-c\\right)\\cdot \\left(c+a-b\\right)\\cdot \\left(c-a+b\\right)& \\cr \\end{array}\\] Equiv [abs(x-1/2)+abs(x+1/2)-2,stack eq(abs(x)-1)] [] 0 (EMPTYCHAR,QMCHAR) \\[\\begin{array}{lll} &\\left| x-\\frac{1}{2}\\right| +\\left| x+\\frac{1}{2}\\right| -2& \\cr \\color{red}{?}&=\\left| x\\right| -1& \\cr \\end{array}\\] Equiv [11*sqrt(abs(x)+1)=25-x,11^2*( abs(x)+1)=(25-x)^2,11^2*abs(x) =(25-x)^2-11^2,11^4*x^2=((25-x )^2-11^2)^2, ((25-x)^2-11^2)^2 -11^4*x^2=0,((25-x)^2-11^2-11^ 2*x)*((25-x)^2-11^2+11^2*x)=0, (x^2-50*x+504-121*x)*(x^2-50*x +504+121*x)=0, (x-168)*(x-3)*( x+8)*(x+63)=0] [] 0 (EMPTYCHAR,QMCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &11\\cdot \\sqrt{\\left| x\\right| +1}=25-x& \\cr \\color{red}{?}&11^2\\cdot \\left(\\left| x\\right| +1\\right)={\\left(25-x\\right)}^2& \\cr \\color{green}{\\Leftrightarrow}&11^2\\cdot \\left| x\\right| ={\\left(25-x\\right)}^2-11^2& \\cr \\color{green}{\\Leftrightarrow}&11^4\\cdot x^2={\\left({\\left(25-x\\right)}^2-11^2\\right)}^2& \\cr \\color{green}{\\Leftrightarrow}&{\\left({\\left(25-x\\right)}^2-11^2\\right)}^2-11^4\\cdot x^2=0& \\cr \\color{green}{\\Leftrightarrow}&\\left({\\left(25-x\\right)}^2-11^2+\\left(-11^2\\right)\\cdot x\\right)\\cdot \\left({\\left(25-x\\right)}^2-11^2+11^2\\cdot x\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x^2-50\\cdot x+504-121\\cdot x\\right)\\cdot \\left(x^2-50\\cdot x+504+121\\cdot x\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-168\\right)\\cdot \\left(x-3\\right)\\cdot \\left(x+8\\right)\\cdot \\left(x+63\\right)=0& \\cr \\end{array}\\] Equiv [1/(x^2+1)=1/((x+%i)*(x-%i)), stackeq(1/(2*%i)*(1/(x-%i)-1/( x+%i)))] [] 1 (CHECKMARK, CHECKMARK) \\[\\begin{array}{lll}\\color{green}{\\checkmark}&\\frac{1}{x^2+1}=\\frac{1}{\\left(x+\\mathrm{i}\\right)\\cdot \\left(x-\\mathrm{i}\\right)}& \\cr \\color{green}{\\checkmark}&=\\frac{1}{2\\cdot \\mathrm{i}}\\cdot \\left(\\frac{1}{x-\\mathrm{i}}-\\frac{1}{x+\\mathrm{i}}\\right)& \\cr \\end{array}\\] Equiv [((a-b)/(a^2+a*b))/((a^2-2*a*b +b^2)/(a^4-b^4)),stackeq(((a-b )*(a-b)*(a+b)*(a^2+b^2))/(a*(a +b)*(a-b)^2)),stackeq((a^2+b^2 )/a),stackeq(a+b^2/a)] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &\\frac{\\frac{a-b}{a^2+a\\cdot b}}{\\frac{a^2-2\\cdot a\\cdot b+b^2}{a^4-b^4}}& \\cr \\color{green}{\\checkmark}&=\\frac{\\left(a-b\\right)\\cdot \\left(a-b\\right)\\cdot \\left(a+b\\right)\\cdot \\left(a^2+b^2\\right)}{a\\cdot \\left(a+b\\right)\\cdot {\\left(a-b\\right)}^2}& \\cr \\color{green}{\\checkmark}&=\\frac{a^2+b^2}{a}& \\cr \\color{green}{\\checkmark}&=a+\\frac{b^2}{a}& \\cr \\end{array}\\] Equiv [a^4+4*b^4,stackeq((a^2)^2+4*a ^2*b^2+(2*b^2)^2-4*a^2*b^2),st ackeq((a^2+2*b^2)^2-(2*a*b)^2) ,stackeq((2*b^2-2*a*b+a^2)*(2* b^2+2*a*b+a^2))] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &a^4+4\\cdot b^4& \\cr \\color{green}{\\checkmark}&={\\left(a^2\\right)}^2+4\\cdot a^2\\cdot b^2+{\\left(2\\cdot b^2\\right)}^2-4\\cdot a^2\\cdot b^2& \\cr \\color{green}{\\checkmark}&={\\left(a^2+2\\cdot b^2\\right)}^2-{\\left(2\\cdot a\\cdot b\\right)}^2& \\cr \\color{green}{\\checkmark}&=\\left(2\\cdot b^2-2\\cdot a\\cdot b+a^2\\right)\\cdot \\left(2\\cdot b^2+2\\cdot a\\cdot b+a^2\\right)& \\cr \\end{array}\\] Equiv [sum(k,k,1,n+1),stackeq(sum(k, k,1,n)+(n+1)),stackeq(n*(n+1)/ 2 +n+1),stackeq((n+1)*(n+1+1)/ 2),stackeq((n+1)*(n+2)/2)] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &\\sum_{k=1}^{n+1}{k}& \\cr \\color{green}{\\checkmark}&=\\sum_{k=1}^{n}{k}+\\left(n+1\\right)& \\cr \\color{green}{\\checkmark}&=\\frac{n\\cdot \\left(n+1\\right)}{2}+n+1& \\cr \\color{green}{\\checkmark}&=\\frac{\\left(n+1\\right)\\cdot \\left(n+1+1\\right)}{2}& \\cr \\color{green}{\\checkmark}&=\\frac{\\left(n+1\\right)\\cdot \\left(n+2\\right)}{2}& \\cr \\end{array}\\] Equiv [log((a-1)^n*product(x_i^(-a), i,1,n)),stackeq(n*log(a-1)-a*s um(log(x_i),i,1,n))] [] 1 (EMPTYCHAR, CHECKMARK) \\[\\begin{array}{lll} &\\ln \\left( {\\left(a-1\\right)}^{n}\\cdot \\prod_{i=1}^{n}{\\frac{1}{{{x}_{i}}^{a}}} \\right)& \\cr \\color{green}{\\checkmark}&=n\\cdot \\ln \\left( a-1 \\right)-a\\cdot \\sum_{i=1}^{n}{\\ln \\left( {x}_{i} \\right)}& \\cr \\end{array}\\] Equiv [binomial(n,k)+binomial(n,k+1) ,stackeq(n!/(k!*(n-k)!)+n!/((k +1)!*(n-k-1)!)),stackeq(n!/(k! *(n-k)*(n-k-1)!)+n!/((k+1)!*(n -k-1)!)),stackeq(n!/(k!*(n-k-1 )!)*(1/(n-k)+1/(k+1))),stackeq (n!/(k!*(n-k-1)!)*((n+1)/((n-k )*(k+1)))),stackeq((n+1)*n!/(k !*(n-k-1)!)*(1/((k+1)*(n-k)))) ,stackeq((n+1)*n!/((k+1)*k!*(n -k)*(n-k-1)!)),stackeq(((n+1)! /((k+1)!)*(1/((n-k)*(n-k-1)!)) )),stackeq((n+1)!/((k+1)!*(n-k )!)),stackeq(binomial(n+1,k+1) )] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &{{n}\\choose{k}}+{{n}\\choose{k+1}}& \\cr \\color{green}{\\checkmark}&=\\frac{n!}{k!\\cdot \\left(n-k\\right)!}+\\frac{n!}{\\left(k+1\\right)!\\cdot \\left(n-k-1\\right)!}& \\cr \\color{green}{\\checkmark}&=\\frac{n!}{k!\\cdot \\left(n-k\\right)\\cdot \\left(n-k-1\\right)!}+\\frac{n!}{\\left(k+1\\right)!\\cdot \\left(n-k-1\\right)!}& \\cr \\color{green}{\\checkmark}&=\\frac{n!}{k!\\cdot \\left(n-k-1\\right)!}\\cdot \\left(\\frac{1}{n-k}+\\frac{1}{k+1}\\right)& \\cr \\color{green}{\\checkmark}&=\\frac{n!}{k!\\cdot \\left(n-k-1\\right)!}\\cdot \\left(\\frac{n+1}{\\left(n-k\\right)\\cdot \\left(k+1\\right)}\\right)& \\cr \\color{green}{\\checkmark}&=\\frac{\\left(n+1\\right)\\cdot n!}{k!\\cdot \\left(n-k-1\\right)!}\\cdot \\left(\\frac{1}{\\left(k+1\\right)\\cdot \\left(n-k\\right)}\\right)& \\cr \\color{green}{\\checkmark}&=\\frac{\\left(n+1\\right)\\cdot n!}{\\left(k+1\\right)\\cdot k!\\cdot \\left(n-k\\right)\\cdot \\left(n-k-1\\right)!}& \\cr \\color{green}{\\checkmark}&=\\frac{\\left(n+1\\right)!}{\\left(k+1\\right)!}\\cdot \\left(\\frac{1}{\\left(n-k\\right)\\cdot \\left(n-k-1\\right)!}\\right)& \\cr \\color{green}{\\checkmark}&=\\frac{\\left(n+1\\right)!}{\\left(k+1\\right)!\\cdot \\left(n-k\\right)!}& \\cr \\color{green}{\\checkmark}&={{n+1}\\choose{k+1}}& \\cr \\end{array}\\] Equiv [binomial(n,k)+binomial(n,k-1) ,stackeq(n!/((k-1)!*(n-k+1)!)+ n!/(k!*(n-k)!)),stackeq(n!*k/( k!*(n-k+1)!)+n!*(n-k+1)/(k!*(n -k+1)!)),stackeq(n!*k/(k!*(n-k +1)!)+n!/(k!*(n-k)!)),stackeq( ((n-k+1)*n!+k*n!)/(k!*(n-k+1)! )),stackeq(((n+1)*n!)/(k!*(n-k +1)!))] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &{{n}\\choose{k}}+{{n}\\choose{k-1}}& \\cr \\color{green}{\\checkmark}&=\\frac{n!}{\\left(k-1\\right)!\\cdot \\left(n-k+1\\right)!}+\\frac{n!}{k!\\cdot \\left(n-k\\right)!}& \\cr \\color{green}{\\checkmark}&=\\frac{n!\\cdot k}{k!\\cdot \\left(n-k+1\\right)!}+\\frac{n!\\cdot \\left(n-k+1\\right)}{k!\\cdot \\left(n-k+1\\right)!}& \\cr \\color{green}{\\checkmark}&=\\frac{n!\\cdot k}{k!\\cdot \\left(n-k+1\\right)!}+\\frac{n!}{k!\\cdot \\left(n-k\\right)!}& \\cr \\color{green}{\\checkmark}&=\\frac{\\left(n-k+1\\right)\\cdot n!+k\\cdot n!}{k!\\cdot \\left(n-k+1\\right)!}& \\cr \\color{green}{\\checkmark}&=\\frac{\\left(n+1\\right)\\cdot n!}{k!\\cdot \\left(n-k+1\\right)!}& \\cr \\end{array}\\] Equiv [(x-1)^2=(x-1)*(x-1), stackeq( x^2-2*x+1)] [] 1 (CHECKMARK, CHECKMARK) \\[\\begin{array}{lll}\\color{green}{\\checkmark}&{\\left(x-1\\right)}^2=\\left(x-1\\right)\\cdot \\left(x-1\\right)& \\cr \\color{green}{\\checkmark}&=x^2-2\\cdot x+1& \\cr \\end{array}\\] Equiv [(x-1)^2=(x-1)*(x-1), stackeq( x^2-2*x+2)] [] 0 (CHECKMARK,QMCHAR) \\[\\begin{array}{lll}\\color{green}{\\checkmark}&{\\left(x-1\\right)}^2=\\left(x-1\\right)\\cdot \\left(x-1\\right)& \\cr \\color{red}{?}&=x^2-2\\cdot x+2& \\cr \\end{array}\\] Equiv [(x-2)^2=(x-1)*(x-1), stackeq( x^2-2*x+1)] [] 0 (QMCHAR, CHECKMARK) \\[\\begin{array}{lll}\\color{red}{?}&{\\left(x-2\\right)}^2=\\left(x-1\\right)\\cdot \\left(x-1\\right)& \\cr \\color{green}{\\checkmark}&=x^2-2\\cdot x+1& \\cr \\end{array}\\] Equiv [4^((n+1)+1)-1= 4*4^(n+1)-1,st ackeq(4*(4^(n+1)-1)+3)] [] 1 (CHECKMARK, CHECKMARK) \\[\\begin{array}{lll}\\color{green}{\\checkmark}&4^{n+1+1}-1=4\\cdot 4^{n+1}-1& \\cr \\color{green}{\\checkmark}&=4\\cdot \\left(4^{n+1}-1\\right)+3& \\cr \\end{array}\\] Equiv [2*x+3*y=6 and 4*x+9*y=15,2*x+ 3*y=6 and -2*x=-3,3+3*y=6 and 2*x=3,y=1 and x=3/2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}2\\cdot x+3\\cdot y=6\\cr 4\\cdot x+9\\cdot y=15\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}2\\cdot x+3\\cdot y=6\\cr -2\\cdot x=-3\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}3+3\\cdot y=6\\cr 2\\cdot x=3\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}y=1\\cr x=\\frac{3}{2}\\cr \\end{array}\\right.& \\cr \\end{array}\\] Equiv [2*x+3*y=6 and 4*x+9*y=15,2*x+ 3*y=6 and -2*x=-3,3+3*y=6 and 2*x=3,y=1 and x=3] [] 0 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR,QMCHAR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}2\\cdot x+3\\cdot y=6\\cr 4\\cdot x+9\\cdot y=15\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}2\\cdot x+3\\cdot y=6\\cr -2\\cdot x=-3\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}3+3\\cdot y=6\\cr 2\\cdot x=3\\cr \\end{array}\\right.& \\cr \\color{red}{?}&\\left\\{\\begin{array}{l}y=1\\cr x=3\\cr \\end{array}\\right.& \\cr \\end{array}\\] Equiv [x^2+y^2=8 and x=y, 2*x^2=8 an d y=x, x^2=4 and y=x, x= #pm#2 and y=x, (x= 2 and y=x) or (x =-2 and y=x), (x=2 and y=2) or (x=-2 and y=-2)] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}x^2+y^2=8\\cr x=y\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}2\\cdot x^2=8\\cr y=x\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x^2=4\\cr y=x\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x= \\pm 2\\cr y=x\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&x=2\\,{\\mbox{ and }}\\, y=x\\,{\\mbox{ or }}\\, x=-2\\,{\\mbox{ and }}\\, y=x& \\cr \\color{green}{\\Leftrightarrow}&x=2\\,{\\mbox{ and }}\\, y=2\\,{\\mbox{ or }}\\, x=-2\\,{\\mbox{ and }}\\, y=-2& \\cr \\end{array}\\] Equiv [x^2+y^2=5 and x*y=2, x^2+y^2- 5=0 and x*y-2=0, x^2-2*x*y+y^2 -1=0 and x^2+2*x*y+y^2-9=0, (x -y)^2-1=0 and (x+y)^2-3^2=0, ( x-y=1 and x+y=3) or (x-y=-1 an d x+y=3) or (x-y=1 and x+y=-3) or (x-y=-1 and x+y=-3), (x=1 and y=2) or (x=2 and y=1) or ( x=-2 and y=-1) or (x=-1 and y= -2)] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}x^2+y^2=5\\cr x\\cdot y=2\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x^2+y^2-5=0\\cr x\\cdot y-2=0\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x^2-2\\cdot x\\cdot y+y^2-1=0\\cr x^2+2\\cdot x\\cdot y+y^2-9=0\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}{\\left(x-y\\right)}^2-1=0\\cr {\\left(x+y\\right)}^2-3^2=0\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&x-y=1\\,{\\mbox{ and }}\\, x+y=3\\,{\\mbox{ or }}\\, x-y=-1\\,{\\mbox{ and }}\\, x+y=3\\,{\\mbox{ or }}\\, x-y=1\\,{\\mbox{ and }}\\, x+y=-3\\,{\\mbox{ or }}\\, x-y=-1\\,{\\mbox{ and }}\\, x+y=-3& \\cr \\color{green}{\\Leftrightarrow}&x=1\\,{\\mbox{ and }}\\, y=2\\,{\\mbox{ or }}\\, x=2\\,{\\mbox{ and }}\\, y=1\\,{\\mbox{ or }}\\, x=-2\\,{\\mbox{ and }}\\, y=-1\\,{\\mbox{ or }}\\, x=-1\\,{\\mbox{ and }}\\, y=-2& \\cr \\end{array}\\] Equiv [4*x^2+7*x*y+4*y^2=4 and y=x-4 , 4*x^2+7*x*(x-4)+4*(x-4)^2-4= 0 and y=x-4, 15*x^2-60*x+60=0 and y=x-4, (x-2)^2=0 and y=x-4 , x=2 and y=x-4, x=2 and y=-2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}4\\cdot x^2+7\\cdot x\\cdot y+4\\cdot y^2=4\\cr y=x-4\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}4\\cdot x^2+7\\cdot x\\cdot \\left(x-4\\right)+4\\cdot {\\left(x-4\\right)}^2-4=0\\cr y=x-4\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}15\\cdot x^2-60\\cdot x+60=0\\cr y=x-4\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}{\\left(x-2\\right)}^2=0\\cr y=x-4\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x=2\\cr y=x-4\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x=2\\cr y=-2\\cr \\end{array}\\right.& \\cr \\end{array}\\] Equiv [a^2=b and a^2=1, b=a^2 and (a =1 or a=-1), (b=1 and a=1) or (b=1 and a=-1)] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}a^2=b\\cr a^2=1\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}b=a^2\\cr a=1\\,{\\mbox{ or }}\\, a=-1\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&b=1\\,{\\mbox{ and }}\\, a=1\\,{\\mbox{ or }}\\, b=1\\,{\\mbox{ and }}\\, a=-1& \\cr \\end{array}\\] Equiv [a^2=b and x=1, b=a^2 and x=1] [] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}a^2=b\\cr x=1\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}b=a^2\\cr x=1\\cr \\end{array}\\right.& \\cr \\end{array}\\] Equiv [a^2=b and b^2=a, b=a^2 and a^ 4=a, b=a^2 and a^4-a=0, b=a^2 and a*(a-1)*(a^2+a+1)=0, b=a^2 and (a=0 or a=1 or a^2+a+1=0) , (b=0 and a=0) or (b=1 and a= 1)] [] [assumereal] 1 (ASSUMEREALVARS, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{(\\mathbb{R})}&\\left\\{\\begin{array}{l}a^2=b\\cr b^2=a\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}b=a^2\\cr a^4=a\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}b=a^2\\cr a^4-a=0\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}b=a^2\\cr a\\cdot \\left(a-1\\right)\\cdot \\left(a^2+a+1\\right)=0\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}b=a^2\\cr a=0\\,{\\mbox{ or }}\\, a=1\\,{\\mbox{ or }}\\, a^2+a+1=0\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&b=0\\,{\\mbox{ and }}\\, a=0\\,{\\mbox{ or }}\\, b=1\\,{\\mbox{ and }}\\, a=1& \\cr \\end{array}\\] Equiv [2*x^3-9*x^2+10*x-3,stacklet(x ,1),2*1^3-9*1^2+10*1-3,stackeq (0),\"So\",2*x^3-9*x^2 +10*x-3,stackeq((x-1)*(2*x^2-7 *x+3)),stackeq((x-1)*(2*x-1)*( x-3))] [] 0 (EMPTYCHAR, EMPTYCHAR, EQUIVCHAR, CHECKMARK, EMPTYCHAR, EMPTYCHAR, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &2\\cdot x^3-9\\cdot x^2+10\\cdot x-3& \\cr &\\mbox{Let }x = 1& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot 1^3-9\\cdot 1^2+10\\cdot 1-3& \\cr \\color{green}{\\checkmark}&=0& \\cr &\\mbox{So}& \\cr &2\\cdot x^3-9\\cdot x^2+10\\cdot x-3& \\cr \\color{green}{\\checkmark}&=\\left(x-1\\right)\\cdot \\left(2\\cdot x^2-7\\cdot x+3\\right)& \\cr \\color{green}{\\checkmark}&=\\left(x-1\\right)\\cdot \\left(2\\cdot x-1\\right)\\cdot \\left(x-3\\right)& \\cr \\end{array}\\] Equiv [2*x^2+x>=6, 2*x^2+x-6>= 0, (2*x-3)*(x+2)>= 0,((2*x- 3)>=0 and (x+2)>=0) or ( (2*x-3)<=0 and (x+2)<=0) , (x>=3/2 and x>=-2) or (x<=3/2 and x<=-2), x> ;=3/2 or x <=-2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &2\\cdot x^2+x\\geq 6& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot x^2+x-6\\geq 0& \\cr \\color{green}{\\Leftrightarrow}&\\left(2\\cdot x-3\\right)\\cdot \\left(x+2\\right)\\geq 0& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot x-3\\geq 0\\,{\\mbox{ and }}\\, x+2\\geq 0\\,{\\mbox{ or }}\\, 2\\cdot x-3\\leq 0\\,{\\mbox{ and }}\\, x+2\\leq 0& \\cr \\color{green}{\\Leftrightarrow}&x\\geq \\frac{3}{2}\\,{\\mbox{ and }}\\, x\\geq -2\\,{\\mbox{ or }}\\, x\\leq \\frac{3}{2}\\,{\\mbox{ and }}\\, x\\leq -2& \\cr \\color{green}{\\Leftrightarrow}&x\\geq \\frac{3}{2}\\,{\\mbox{ or }}\\, x\\leq -2& \\cr \\end{array}\\] Equiv [2*x^2+x>=6, 2*x^2+x-6>= 0, (2*x-3)*(x+2)>= 0,((2*x- 3)>=0 and (x+2)>=0) or ( (2*x-3)<=0 and (x+2)<=0) , (x>=3/2 and x>=-2) or (x<=3/2 and x<=-2), x> ;=3/2 or x <=-2] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &2\\cdot x^2+x\\geq 6& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot x^2+x-6\\geq 0& \\cr \\color{green}{\\Leftrightarrow}&\\left(2\\cdot x-3\\right)\\cdot \\left(x+2\\right)\\geq 0& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot x-3\\geq 0\\,{\\mbox{ and }}\\, x+2\\geq 0\\,{\\mbox{ or }}\\, 2\\cdot x-3\\leq 0\\,{\\mbox{ and }}\\, x+2\\leq 0& \\cr \\color{green}{\\Leftrightarrow}&x\\geq \\frac{3}{2}\\,{\\mbox{ and }}\\, x\\geq -2\\,{\\mbox{ or }}\\, x\\leq \\frac{3}{2}\\,{\\mbox{ and }}\\, x\\leq -2& \\cr \\color{green}{\\Leftrightarrow}&x\\geq \\frac{3}{2}\\,{\\mbox{ or }}\\, x\\leq -2& \\cr \\end{array}\\] Equiv [2*x^2+x>=6, 2*x^2+x-6>= 0, (2*x-3)*(x+2)>= 0,((2*x- 3)>=0 and (x+2)>=0) or ( (2*x-3)<=0 and (x+2)<=0) , (x>=3/2 and x>=-2) or (x<=3/2 and x<=-2), x> ;=3/2 or x <=2] [] 0 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR,QMCHAR) \\[\\begin{array}{lll} &2\\cdot x^2+x\\geq 6& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot x^2+x-6\\geq 0& \\cr \\color{green}{\\Leftrightarrow}&\\left(2\\cdot x-3\\right)\\cdot \\left(x+2\\right)\\geq 0& \\cr \\color{green}{\\Leftrightarrow}&2\\cdot x-3\\geq 0\\,{\\mbox{ and }}\\, x+2\\geq 0\\,{\\mbox{ or }}\\, 2\\cdot x-3\\leq 0\\,{\\mbox{ and }}\\, x+2\\leq 0& \\cr \\color{green}{\\Leftrightarrow}&x\\geq \\frac{3}{2}\\,{\\mbox{ and }}\\, x\\geq -2\\,{\\mbox{ or }}\\, x\\leq \\frac{3}{2}\\,{\\mbox{ and }}\\, x\\leq -2& \\cr \\color{red}{?}&x\\geq \\frac{3}{2}\\,{\\mbox{ or }}\\, x\\leq 2& \\cr \\end{array}\\] Equiv [x^2>=9 and x>3, x^2-9&g t;=0 and x>3, (x>=3 or x <=-3) and x>3, x>3] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}x^2\\geq 9\\cr x > 3\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x^2-9\\geq 0\\cr x > 3\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x\\geq 3\\,{\\mbox{ or }}\\, x\\leq -3\\cr x > 3\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&x > 3& \\cr \\end{array}\\] Equiv [-x^2+a*x+a-3<0, a-3<x^2 -a*x, a-3<(x-a/2)^2-a^2/4, a^2/4+a-3<(x-a/2)^2, a^2+4* a-12<4*(x-a/2)^2, (a-2)*(a+ 6)<4*(x-a/2)^2, \"This inequality is required to be t rue for all x.\", \"So it must be true when the righ t hand side takes its minimum value.\", \"This happe ns for x=a/2.\", (a-2)*(a+ 6)<0, ((a-2)<0 and (a+6) >0) or ((a-2)>0 and (a+6 )<0), (a<2 and a>-6) or (a>2 and a<-6), (-6&l t;a and a<2) or false, (-6& lt;a and a<2)] [] 0 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EMPTYCHAR, EMPTYCHAR, EMPTYCHAR, EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &-x^2+a\\cdot x+a-3 < 0& \\cr \\color{green}{\\Leftrightarrow}&a-3 < x^2-a\\cdot x& \\cr \\color{green}{\\Leftrightarrow}&a-3 < {\\left(x-\\frac{a}{2}\\right)}^2-\\frac{a^2}{4}& \\cr \\color{green}{\\Leftrightarrow}&\\frac{a^2}{4}+a-3 < {\\left(x-\\frac{a}{2}\\right)}^2& \\cr \\color{green}{\\Leftrightarrow}&a^2+4\\cdot a-12 < 4\\cdot {\\left(x-\\frac{a}{2}\\right)}^2& \\cr \\color{green}{\\Leftrightarrow}&\\left(a-2\\right)\\cdot \\left(a+6\\right) < 4\\cdot {\\left(x-\\frac{a}{2}\\right)}^2& \\cr &\\mbox{This inequality is required to be true for all x.}& \\cr &\\mbox{So it must be true when the right hand side takes its minimum value.}& \\cr &\\mbox{This happens for x=a/2.}& \\cr &\\left(a-2\\right)\\cdot \\left(a+6\\right) < 0& \\cr \\color{green}{\\Leftrightarrow}&a-2 < 0\\,{\\mbox{ and }}\\, a+6 > 0\\,{\\mbox{ or }}\\, a-2 > 0\\,{\\mbox{ and }}\\, a+6 < 0& \\cr \\color{green}{\\Leftrightarrow}&a < 2\\,{\\mbox{ and }}\\, a > -6\\,{\\mbox{ or }}\\, a > 2\\,{\\mbox{ and }}\\, a < -6& \\cr \\color{green}{\\Leftrightarrow}&-6 < a\\,{\\mbox{ and }}\\, a < 2\\,{\\mbox{ or }}\\, \\mathbf{False}& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}-6 < a\\cr a < 2\\cr \\end{array}\\right.& \\cr \\end{array}\\] Equiv [x-2>0 and x*(x-2)<15,x& gt;2 and x^2-2*x-15<0,x> 2 and (x-5)*(x+3)<0,x>2 and ((x<5 and x>-3) or ( x>5 and x<-3)),x>2 an d (x<5 and x>-3),x>2 and x<5] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}x-2 > 0\\cr x\\cdot \\left(x-2\\right) < 15\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x > 2\\cr x^2-2\\cdot x-15 < 0\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x > 2\\cr \\left(x-5\\right)\\cdot \\left(x+3\\right) < 0\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x > 2\\cr x < 5\\,{\\mbox{ and }}\\, x > -3\\,{\\mbox{ or }}\\, x > 5\\,{\\mbox{ and }}\\, x < -3\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x > 2\\cr x < 5\\,{\\mbox{ and }}\\, x > -3\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x > 2\\cr x < 5\\cr \\end{array}\\right.& \\cr \\end{array}\\] Equiv [x-2>0 and x*(x-2)<15,x& gt;2 and x^2-2*x-15<0,x> 2 and (x-5)*(x+3)<0,x>2 and ((x<5 and x>-3) or ( x>5 and x<-3)),x>7 an d (x<5 and x>-3),x>2 and x<5] [] 0 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR,QMCHAR,QMCHAR) \\[\\begin{array}{lll} &\\left\\{\\begin{array}{l}x-2 > 0\\cr x\\cdot \\left(x-2\\right) < 15\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x > 2\\cr x^2-2\\cdot x-15 < 0\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x > 2\\cr \\left(x-5\\right)\\cdot \\left(x+3\\right) < 0\\cr \\end{array}\\right.& \\cr \\color{green}{\\Leftrightarrow}&\\left\\{\\begin{array}{l}x > 2\\cr x < 5\\,{\\mbox{ and }}\\, x > -3\\,{\\mbox{ or }}\\, x > 5\\,{\\mbox{ and }}\\, x < -3\\cr \\end{array}\\right.& \\cr \\color{red}{?}&\\left\\{\\begin{array}{l}x > 7\\cr x < 5\\,{\\mbox{ and }}\\, x > -3\\cr \\end{array}\\right.& \\cr \\color{red}{?}&\\left\\{\\begin{array}{l}x > 2\\cr x < 5\\cr \\end{array}\\right.& \\cr \\end{array}\\] Equiv [x^2 + (a-2)*x + a = 0,(x + (a -2)/2)^2 -((a-2)/2)^2 + a = 0, (x + (a-2)/2)^2 =(a-2)^2/4 - a ,\"This has real roots iff \",(a-2)^2/4-a >=0,a^2- 4*a+4-4*a >=0,a^2-8*a+4> =0,(a-4)^2-16+4>=0,(a-4)^2& gt;=12,a-4>=sqrt(12) or a-4 <= -sqrt(12),\"Ignoring the negative solution.\", a>=sqrt(12)+4,\"Using e xternal domain information tha t a is an integer.\",a> =8] [] 0 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EMPTYCHAR, EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EMPTYCHAR, EMPTYCHAR, EMPTYCHAR, EMPTYCHAR) \\[\\begin{array}{lll} &x^2+\\left(a-2\\right)\\cdot x+a=0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(x+\\frac{a-2}{2}\\right)}^2-{\\left(\\frac{a-2}{2}\\right)}^2+a=0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(x+\\frac{a-2}{2}\\right)}^2=\\frac{{\\left(a-2\\right)}^2}{4}-a& \\cr &\\mbox{This has real roots iff}& \\cr &\\frac{{\\left(a-2\\right)}^2}{4}-a\\geq 0& \\cr \\color{green}{\\Leftrightarrow}&a^2-4\\cdot a+4-4\\cdot a\\geq 0& \\cr \\color{green}{\\Leftrightarrow}&a^2-8\\cdot a+4\\geq 0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(a-4\\right)}^2-16+4\\geq 0& \\cr \\color{green}{\\Leftrightarrow}&{\\left(a-4\\right)}^2\\geq 12& \\cr \\color{green}{\\Leftrightarrow}&a-4\\geq \\sqrt{12}\\,{\\mbox{ or }}\\, a-4\\leq -\\sqrt{12}& \\cr &\\mbox{Ignoring the negative solution.}& \\cr &a\\geq \\sqrt{12}+4& \\cr &\\mbox{Using external domain information that a is an integer.}& \\cr &a\\geq 8& \\cr \\end{array}\\] Equiv [x^2#1,x^2-1#0,(x-1)*(x+1)#0,x <-1 nounor (-1<x nounand x<1) nounor x>1] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2\\neq 1& \\cr \\color{green}{\\Leftrightarrow}&x^2-1\\neq 0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-1\\right)\\cdot \\left(x+1\\right)\\neq 0& \\cr \\color{green}{\\Leftrightarrow}&x < -1\\,{\\mbox{ or }}\\, -1 < x\\,{\\mbox{ and }}\\, x < 1\\,{\\mbox{ or }}\\, x > 1& \\cr \\end{array}\\] Equiv [\"Set P(n) be the stateme nt that\",sum(k^2,k,1,n) = n*(n+1)*(2*n+1)/6, \"Then P(1) is the statement\", 1^2 = 1*(1+1)*(2*1+1)/6, 1 = 1 , \"So P(1) holds. Now as sume P(n) is true.\",sum(k ^2,k,1,n) = n*(n+1)*(2*n+1)/6, sum(k^2,k,1,n) +(n+1)^2= n*(n+ 1)*(2*n+1)/6 +(n+1)^2,sum(k^2, k,1,n+1)= (n+1)*(n*(2*n+1) +6* (n+1))/6,sum(k^2,k,1,n+1)= (n+ 1)*(2*n^2+7*n+6)/6,sum(k^2,k,1 ,n+1)= (n+1)*(n+1+1)*(2*(n+1)+ 1)/6] [] 0 (EMPTYCHAR, EMPTYCHAR, EMPTYCHAR, EMPTYCHAR, EQUIVCHAR, EMPTYCHAR, EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\mbox{Set P(n) be the statement that}& \\cr &\\sum_{k=1}^{n}{k^2}=\\frac{n\\cdot \\left(n+1\\right)\\cdot \\left(2\\cdot n+1\\right)}{6}& \\cr &\\mbox{Then P(1) is the statement}& \\cr &1^2=\\frac{1\\cdot \\left(1+1\\right)\\cdot \\left(2\\cdot 1+1\\right)}{6}& \\cr \\color{green}{\\Leftrightarrow}&1=1& \\cr &\\mbox{So P(1) holds. Now assume P(n) is true.}& \\cr &\\sum_{k=1}^{n}{k^2}=\\frac{n\\cdot \\left(n+1\\right)\\cdot \\left(2\\cdot n+1\\right)}{6}& \\cr \\color{green}{\\Leftrightarrow}&\\sum_{k=1}^{n}{k^2}+{\\left(n+1\\right)}^2=\\frac{n\\cdot \\left(n+1\\right)\\cdot \\left(2\\cdot n+1\\right)}{6}+{\\left(n+1\\right)}^2& \\cr \\color{green}{\\Leftrightarrow}&\\sum_{k=1}^{n+1}{k^2}=\\frac{\\left(n+1\\right)\\cdot \\left(n\\cdot \\left(2\\cdot n+1\\right)+6\\cdot \\left(n+1\\right)\\right)}{6}& \\cr \\color{green}{\\Leftrightarrow}&\\sum_{k=1}^{n+1}{k^2}=\\frac{\\left(n+1\\right)\\cdot \\left(2\\cdot n^2+7\\cdot n+6\\right)}{6}& \\cr \\color{green}{\\Leftrightarrow}&\\sum_{k=1}^{n+1}{k^2}=\\frac{\\left(n+1\\right)\\cdot \\left(n+1+1\\right)\\cdot \\left(2\\cdot \\left(n+1\\right)+1\\right)}{6}& \\cr \\end{array}\\] Equiv [(n+1)^2+sum(k^2,k,1,n) = (n+1 )^2+(n*(n+1)*(2*n+1))/6, sum(k ^2,k,1,n+1) = ((n+1)*(n*(2*n+1 )+6*(n+1)))/6, sum(k^2,k,1,n+1 ) = ((n+1)*(2*n^2+7*n+6))/6, s um(k^2,k,1,n+1) = ((n+1)*(n+2) *(2*(n+1)+1))/6] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &{\\left(n+1\\right)}^2+\\sum_{k=1}^{n}{k^2}={\\left(n+1\\right)}^2+\\frac{n\\cdot \\left(n+1\\right)\\cdot \\left(2\\cdot n+1\\right)}{6}& \\cr \\color{green}{\\Leftrightarrow}&\\sum_{k=1}^{n+1}{k^2}=\\frac{\\left(n+1\\right)\\cdot \\left(n\\cdot \\left(2\\cdot n+1\\right)+6\\cdot \\left(n+1\\right)\\right)}{6}& \\cr \\color{green}{\\Leftrightarrow}&\\sum_{k=1}^{n+1}{k^2}=\\frac{\\left(n+1\\right)\\cdot \\left(2\\cdot n^2+7\\cdot n+6\\right)}{6}& \\cr \\color{green}{\\Leftrightarrow}&\\sum_{k=1}^{n+1}{k^2}=\\frac{\\left(n+1\\right)\\cdot \\left(n+2\\right)\\cdot \\left(2\\cdot \\left(n+1\\right)+1\\right)}{6}& \\cr \\end{array}\\] Equiv [conjugate(a)*conjugate(b),sta cklet(a,x+i*y),stacklet(b,r+i* s),stackeq(conjugate(x+i*y)*co njugate(r+i*s)),stackeq((x-i*y )*(r-i*s)),stackeq((x*r-y*s)-i *(y*r+x*s)),stackeq(conjugate( (x*r-y*s)+i*(y*r+x*s))),stacke q(conjugate((x+i*y)*(r+i*s))), stacklet(x+i*y,a),stacklet(r+i *s,b),stackeq(conjugate(a*b))] [] 1 (EMPTYCHAR, EMPTYCHAR, EMPTYCHAR, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK, CHECKMARK, EMPTYCHAR, EMPTYCHAR, CHECKMARK) \\[\\begin{array}{lll} &a^\\star\\cdot b^\\star& \\cr &\\mbox{Let }a = x+\\mathrm{i}\\cdot y& \\cr &\\mbox{Let }b = r+\\mathrm{i}\\cdot s& \\cr \\color{green}{\\checkmark}&=\\left(x+\\mathrm{i}\\cdot y\\right)^\\star\\cdot \\left(r+\\mathrm{i}\\cdot s\\right)^\\star& \\cr \\color{green}{\\checkmark}&=\\left(x-\\mathrm{i}\\cdot y\\right)\\cdot \\left(r-\\mathrm{i}\\cdot s\\right)& \\cr \\color{green}{\\checkmark}&=x\\cdot r-y\\cdot s-\\mathrm{i}\\cdot \\left(y\\cdot r+x\\cdot s\\right)& \\cr \\color{green}{\\checkmark}&=\\left(x\\cdot r-y\\cdot s+\\mathrm{i}\\cdot \\left(y\\cdot r+x\\cdot s\\right)\\right)^\\star& \\cr \\color{green}{\\checkmark}&=\\left(\\left(x+\\mathrm{i}\\cdot y\\right)\\cdot \\left(r+\\mathrm{i}\\cdot s\\right)\\right)^\\star& \\cr &\\mbox{Let }x+\\mathrm{i}\\cdot y = a& \\cr &\\mbox{Let }r+\\mathrm{i}\\cdot s = b& \\cr \\color{green}{\\checkmark}&=\\left(a\\cdot b\\right)^\\star& \\cr \\end{array}\\] Equiv [nounint(x*e^x,x,-inf,0),nounl imit(nounint(x*e^x,x,t,0),t,-i nf),nounlimit(e^t-t*e^t-1,t,-i nf),nounlimit(e^t,t,-inf)+noun limit(-t*e^t,t,-inf)+nounlimit (-1,t,-inf),-1] [] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &\\int_{-\\infty }^{0}{x\\cdot e^{x}\\;\\mathrm{d}x}& \\cr \\color{green}{\\Leftrightarrow}&\\lim_{t\\rightarrow -\\infty }{\\int_{t}^{0}{x\\cdot e^{x}\\;\\mathrm{d}x}}& \\cr \\color{green}{\\Leftrightarrow}&\\lim_{t\\rightarrow -\\infty }{e^{t}-t\\cdot e^{t}-1}& \\cr \\color{green}{\\Leftrightarrow}&\\lim_{t\\rightarrow -\\infty }{e^{t}}+\\lim_{t\\rightarrow -\\infty }{\\left(-t\\right)\\cdot e^{t}}+\\lim_{t\\rightarrow -\\infty }{-1}& \\cr \\color{green}{\\Leftrightarrow}&-1& \\cr \\end{array}\\] Equiv [noundiff(x^2,x),stackeq(nounl imit(((x+h)^2-x^2)/h,h,0)),sta ckeq(nounlimit(2*x+h,h,0)),sta ckeq(2*x)] [] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &\\frac{\\mathrm{d}}{\\mathrm{d} x} x^2& \\cr \\color{green}{\\checkmark}&=\\lim_{h\\rightarrow 0}{\\frac{{\\left(x+h\\right)}^2-x^2}{h}}& \\cr \\color{green}{\\checkmark}&=\\lim_{h\\rightarrow 0}{2\\cdot x+h}& \\cr \\color{green}{\\checkmark}&=2\\cdot x& \\cr \\end{array}\\] Equiv [-12+3*noundiff(y(x),x)+8-8*no undiff(y(x),x)=0,-5*noundiff(y (x),x)=4,noundiff(y(x),x)=-4/5 ] [] [calculus] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &-12+3\\cdot \\left(\\frac{\\mathrm{d}}{\\mathrm{d} x} y\\left(x\\right)\\right)+8-8\\cdot \\left(\\frac{\\mathrm{d}}{\\mathrm{d} x} y\\left(x\\right)\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&-5\\cdot \\left(\\frac{\\mathrm{d}}{\\mathrm{d} x} y\\left(x\\right)\\right)=4& \\cr \\color{green}{\\Leftrightarrow}&\\left(\\frac{\\mathrm{d}}{\\mathrm{d} x} y\\left(x\\right)\\right)=\\frac{-4}{5}& \\cr \\end{array}\\] Equiv [x^2+1,x^3/3+x,x^2+1,x^3/3+x+c ] [] [calculus] 1 (EMPTYCHAR,INTCHAR(x),DIFFCHAR(x),INTCHAR(x)) \\[\\begin{array}{lll} &x^2+1& \\cr \\color{blue}{\\int\\ldots\\mathrm{d}x}&\\frac{x^3}{3}+x& \\cr \\color{blue}{\\frac{\\mathrm{d}}{\\mathrm{d}x}\\ldots}&x^2+1& \\cr \\color{blue}{\\int\\ldots\\mathrm{d}x}&\\frac{x^3}{3}+x+c& \\cr \\end{array}\\] Equiv [3*x^(3/2)-2/x,(9*sqrt(x))/2+2 /x^2,3*x^(3/2)-2/x+c] [] [calculus] 1 (EMPTYCHAR,DIFFCHAR(x),INTCHAR(x)) \\[\\begin{array}{lll} &3\\cdot x^{\\frac{3}{2}}-\\frac{2}{x}&{\\color{blue}{{x \\not\\in {\\left \\{0 \\right \\}}}}}\\cr \\color{blue}{\\frac{\\mathrm{d}}{\\mathrm{d}x}\\ldots}&\\frac{9\\cdot \\sqrt{x}}{2}+\\frac{2}{x^2}&{\\color{blue}{{x \\in {\\left( 0,\\, \\infty \\right)}}}}\\cr \\color{blue}{\\int\\ldots\\mathrm{d}x}&3\\cdot x^{\\frac{3}{2}}-\\frac{2}{x}+c& \\cr \\end{array}\\] Equiv [x^2+1,stackeq(x^3/3+x),stacke q(x^2+1),stackeq(x^3/3+x+c)] [] [calculus] 0 (EMPTYCHAR,QMCHAR,QMCHAR,QMCHAR) \\[\\begin{array}{lll} &x^2+1& \\cr \\color{red}{?}&=\\frac{x^3}{3}+x& \\cr \\color{red}{?}&=x^2+1& \\cr \\color{red}{?}&=\\frac{x^3}{3}+x+c& \\cr \\end{array}\\] Equiv [diff(x^2*sin(x),x),stackeq(x^ 2*diff(sin(x),x)+diff(x^2,x)*s in(x)),stackeq(x^2*cos(x)+2*x* sin(x))] [] [calculus] 1 (EMPTYCHAR, CHECKMARK, CHECKMARK) \\[\\begin{array}{lll} &\\cos \\left( x \\right)\\cdot x^2+2\\cdot x\\cdot \\sin \\left( x \\right)& \\cr \\color{green}{\\checkmark}&=x^2\\cdot \\cos \\left( x \\right)+2\\cdot x\\cdot \\sin \\left( x \\right)& \\cr \\color{green}{\\checkmark}&=x^2\\cdot \\cos \\left( x \\right)+2\\cdot x\\cdot \\sin \\left( x \\right)& \\cr \\end{array}\\] Equiv [y(x)*cos(x)+y(x)^2 = 6*x,cos( x)*diff(y(x),x)+2*y(x)*diff(y( x),x)-y(x)*sin(x) = 6,(cos(x)+ 2*y(x))*diff(y(x),x) = y(x)*si n(x)+6,diff(y(x),x) = (y(x)*si n(x)+6)/(cos(x)+2*y(x))] [] [calculus] 1 (EMPTYCHAR,DIFFCHAR(x), EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &y\\left(x\\right)\\cdot \\cos \\left( x \\right)+y^2\\left(x\\right)=6\\cdot x& \\cr \\color{blue}{\\frac{\\mathrm{d}}{\\mathrm{d}x}\\ldots}&\\cos \\left( x \\right)\\cdot \\left(\\frac{\\mathrm{d}}{\\mathrm{d} x} y\\left(x\\right)\\right)+2\\cdot y\\left(x\\right)\\cdot \\left(\\frac{\\mathrm{d}}{\\mathrm{d} x} y\\left(x\\right)\\right)+\\left(-y\\left(x\\right)\\right)\\cdot \\sin \\left( x \\right)=6& \\cr \\color{green}{\\Leftrightarrow}&\\left(\\cos \\left( x \\right)+2\\cdot y\\left(x\\right)\\right)\\cdot \\left(\\frac{\\mathrm{d}}{\\mathrm{d} x} y\\left(x\\right)\\right)=y\\left(x\\right)\\cdot \\sin \\left( x \\right)+6& \\cr \\color{green}{\\Leftrightarrow}&\\left(\\frac{\\mathrm{d}}{\\mathrm{d} x} y\\left(x\\right)\\right)=\\frac{y\\left(x\\right)\\cdot \\sin \\left( x \\right)+6}{\\cos \\left( x \\right)+2\\cdot y\\left(x\\right)}& \\cr \\end{array}\\] Equiv [nounint(s^2+1,s),stackeq(s^3/ 3+s+c)] [] [calculus] 1 (EMPTYCHAR,INTCHAR(s)) \\[\\begin{array}{lll} &\\int {s^2+1}{\\;\\mathrm{d}s}& \\cr \\color{blue}{\\int\\ldots\\mathrm{d}s}&=\\frac{s^3}{3}+s+c& \\cr \\end{array}\\] Equiv [nounint(x^3*log(x),x),x^4/4*l og(x)-1/4*nounint(x^3,x),x^4/4 *log(x)-x^4/16] [] [calculus] 0 (EMPTYCHAR, EQUIVCHAR,PLUSC) \\[\\begin{array}{lll} &\\int {x^3\\cdot \\ln \\left( x \\right)}{\\;\\mathrm{d}x}& \\cr \\color{green}{\\Leftrightarrow}&\\frac{x^4}{4}\\cdot \\ln \\left( x \\right)-\\frac{1}{4}\\cdot \\int {x^3}{\\;\\mathrm{d}x}& \\cr \\color{red}{\\cdots +c\\quad ?}&\\frac{x^4}{4}\\cdot \\ln \\left( x \\right)-\\frac{x^4}{16}&{\\color{blue}{{x \\in {\\left( 0,\\, \\infty \\right)}}}}\\cr \\end{array}\\] Equiv [nounint(x^3*log(x),x),x^4/4*l og(x)-1/4*nounint(x^3,x),x^4/4 *log(x)-x^4/16+c] [] [calculus] 1 (EMPTYCHAR, EQUIVCHAR,INTCHAR(x)) \\[\\begin{array}{lll} &\\int {x^3\\cdot \\ln \\left( x \\right)}{\\;\\mathrm{d}x}& \\cr \\color{green}{\\Leftrightarrow}&\\frac{x^4}{4}\\cdot \\ln \\left( x \\right)-\\frac{1}{4}\\cdot \\int {x^3}{\\;\\mathrm{d}x}& \\cr \\color{blue}{\\int\\ldots\\mathrm{d}x}&\\frac{x^4}{4}\\cdot \\ln \\left( x \\right)-\\frac{x^4}{16}+c& \\cr \\end{array}\\] Equiv [noundiff(y,x)-2/x*y=x^3*sin(3 *x),1/x^2*noundiff(y,x)-2/x^3* y=x*sin(3*x),noundiff(y/x^2,x) =x*sin(3*x),y/x^2 = nounint(x* sin(3*x),x),y/x^2=(sin(3*x)-3* x*cos(3*x))/9+c] [] [calculus] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR,INTCHAR(x),INTCHAR(x)) \\[\\begin{array}{lll} &\\frac{\\mathrm{d} y}{\\mathrm{d} x}-\\frac{2}{x}\\cdot y=x^3\\cdot \\sin \\left( 3\\cdot x \\right)& \\cr \\color{green}{\\Leftrightarrow}&\\frac{1}{x^2}\\cdot \\left(\\frac{\\mathrm{d} y}{\\mathrm{d} x}\\right)-\\frac{2}{x^3}\\cdot y=x\\cdot \\sin \\left( 3\\cdot x \\right)& \\cr \\color{green}{\\Leftrightarrow}&\\left(\\frac{\\mathrm{d}}{\\mathrm{d} x} \\frac{y}{x^2}\\right)=x\\cdot \\sin \\left( 3\\cdot x \\right)& \\cr \\color{blue}{\\int\\ldots\\mathrm{d}x}&\\frac{y}{x^2}=\\int {x\\cdot \\sin \\left( 3\\cdot x \\right)}{\\;\\mathrm{d}x}& \\cr \\color{blue}{\\int\\ldots\\mathrm{d}x}&\\frac{y}{x^2}=\\frac{\\sin \\left( 3\\cdot x \\right)-3\\cdot x\\cdot \\cos \\left( 3\\cdot x \\right)}{9}+c& \\cr \\end{array}\\]","title":"Equiv: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Equiv/#equiv-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"Equiv: Answer test results"},{"location":"Authoring/Answer_Tests/Results/EquivFirst/","text":"EquivFirst: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. EquivFirst Test ? Student response Teacher answer Opt Mark Answer note EquivFirst x [x^2=4,x=2 or x=-2] -1 ATEquivFirst_SA_not_list. The first argument to the Equiv answer test should be a list, but the test failed. Please contact your teacher. EquivFirst [x^2=4,x=2 or x=-2] x -1 ATEquivFirst_SB_not_list. The second argument to the Equiv answer test should be a list, but the test failed. Please contact your teacher. EquivFirst [1/0] [x^2=4,x=2 or x=-2] -1 ATEquivFirst_STACKERROR_SAns. EquivFirst [x^2=4,x=2 or x=-2] [1/0] -1 ATEquivFirst_STACKERROR_TAns. EquivFirst [x^2=4,x=2 or x=-2] [x^2=4,x=2 or x=-2] 1 (EMPTYCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2=4& \\cr \\color{green}{\\Leftrightarrow}&x=2\\,{\\mbox{ or }}\\, x=-2& \\cr \\end{array}\\] EquivFirst [x^2=9,x=3 or x=-3] [x^2=4,x=2 or x=-2] 0 ATEquivFirst_SA_wrong_start The first line in your argument must be \" \\(x^2=4\\) \". EquivFirst [x^2=4,x=2] [x^2=4,x=2 or x=-2] 0 (EMPTYCHAR,IMPLIEDCHAR) \\[\\begin{array}{lll} &x^2=4& \\cr \\color{red}{\\Leftarrow}&x=2& \\cr \\end{array}\\] EquivFirst [x^2=4,x^2-4=0,(x-2)*(x+2)=0,x =2 or x=-2] [x^2=4,x=2 or x=-2] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2=4& \\cr \\color{green}{\\Leftrightarrow}&x^2-4=0& \\cr \\color{green}{\\Leftrightarrow}&\\left(x-2\\right)\\cdot \\left(x+2\\right)=0& \\cr \\color{green}{\\Leftrightarrow}&x=2\\,{\\mbox{ or }}\\, x=-2& \\cr \\end{array}\\] EquivFirst [x^2=4,x= #pm#2, x=2 or x=-2] [x^2=4,x=2 or x=-2] 1 (EMPTYCHAR, EQUIVCHAR, EQUIVCHAR) \\[\\begin{array}{lll} &x^2=4& \\cr \\color{green}{\\Leftrightarrow}&x= \\pm 2& \\cr \\color{green}{\\Leftrightarrow}&x=2\\,{\\mbox{ or }}\\, x=-2& \\cr \\end{array}\\] EquivFirst [x^2-6*x+9=0,x=3] [x^2-6*x+9=0,x=3] 1 (EMPTYCHAR,SAMEROOTS) \\[\\begin{array}{lll} &x^2-6\\cdot x+9=0& \\cr \\color{green}{\\mbox{(Same roots)}}&x=3& \\cr \\end{array}\\] EquivFirst [x^2=4,x=2] [x^2=4,x=2] [assumepos] 1 (ASSUMEPOSVARS, EQUIVCHAR) \\[\\begin{array}{lll}\\color{blue}{\\mbox{Assume +ve vars}}&x^2=4& \\cr \\color{green}{\\Leftrightarrow}&x=2& \\cr \\end{array}\\]","title":"EquivFirst: Answer test results"},{"location":"Authoring/Answer_Tests/Results/EquivFirst/#equivfirst-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"EquivFirst: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Expanded/","text":"Expanded: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. Expanded Test ? Student response Teacher answer Opt Mark Answer note Expanded 1/0 0 -1 ATExpanded_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. Expanded x>2 x^2-2*x+1 0 ATExpanded_SA_not_expression. Your answer should be an expression, not an equation, inequality, list, set or matrix. Expanded x^2-1 0 1 ATExpanded_TRUE. Expanded 2*(x-1) 0 0 ATExpanded_FALSE. Expanded (x-1)*(x+1) 0 0 ATExpanded_FALSE. Expanded (x-a)*(x-b) 0 0 ATExpanded_FALSE. Expanded x^2-(a+b)*x+a*b 0 0 ATExpanded_FALSE. Expanded x^2-a*x-b*x+a*b 0 1 ATExpanded_TRUE. Expanded cos(2*x) 0 1 ATExpanded_TRUE. Expanded p+1 0 1 ATExpanded_TRUE. Expanded (p+1)*(p-1) 0 0 ATExpanded_FALSE. Expanded 3+2*sqrt(3) 0 1 ATExpanded_TRUE. Expanded 3+sqrt(12) 0 1 ATExpanded_TRUE. Expanded (1+sqrt(5))*(1-sqrt(3)) 0 0 ATExpanded_FALSE. This fails, but you are never going to ask students to do this anyway... Expanded ! (a-x)^6000 0 -2 ATExpanded_TRUE.","title":"Expanded: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Expanded/#expanded-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"Expanded: Answer test results"},{"location":"Authoring/Answer_Tests/Results/FacForm/","text":"FacForm: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. FacForm Test ? Student response Teacher answer Opt Mark Answer note FacForm 1/0 0 x -1 ATFacForm_STACKERROR_SAns. FacForm 0 1/0 x -1 ATFacForm_STACKERROR_TAns. FacForm 0 0 1/0 -1 ATFacForm_STACKERROR_Opt. Trivial cases FacForm 2 2 x 1 ATFacForm_int_true. FacForm 6 6 x 1 ATFacForm_int_true. FacForm 1/3 1/3 x 1 ATFacForm_true. FacForm 3*x^2 3*x^2 x 1 ATFacForm_true. FacForm 4*x^2 4*x^2 x 1 ATFacForm_true. Linear integer factors FacForm 2*(x-1) 2*x-2 x 1 ATFacForm_true. FacForm 2*x-2 2*x-2 x 0 ATFacForm_notfactored. Your answer is not factored. You need to take out a common factor. FacForm 2*(x+1) 2*x-2 x 0 ATFacForm_isfactored. ATFacForm_notalgequiv. Your answer is factored, well done. Note that your answer is not algebraically equivalent to the correct answer. You must have done something wrong. FacForm 2*x+2 2*x-2 x 0 ATFacForm_notfactored. ATFacForm_notalgequiv. Your answer is not factored. You need to take out a common factor. Note that your answer is not algebraically equivalent to the correct answer. You must have done something wrong. FacForm 2*(x+0.5) 2*x+1 x 1 ATFacForm_default_true. Linear factors FacForm t*(2*x+1) t*(2*x+1) x 1 ATFacForm_true. FacForm t*x+t t*(x+1) x 0 ATFacForm_notfactored. Your answer is not factored. FacForm 6*s*t+10*s 2*s*(3*t+5) t 0 ATFacForm_notfactored. Your answer is not factored. Quadratic, with no const FacForm 2*x*(x-3) 2*x^2-6*x x 1 ATFacForm_true. FacForm 2*(x^2-3*x) 2*x*(x-3) x 0 ATFacForm_notfactored. Your answer is not factored. You could still do some more work on the term \\(x^2-3\\cdot x\\) . FacForm x*(2*x-6) 2*x*(x-3) x 0 ATFacForm_notfactored. Your answer is not factored. You could still do some more work on the term \\(2\\cdot x-6\\) . You need to take out a common factor. Quadratic FacForm (x+2)*(x+3) (x+2)*(x+3) x 1 ATFacForm_true. FacForm (x+2)*(2*x+6) 2*(x+2)*(x+3) x 0 ATFacForm_notfactored. Your answer is not factored. You could still do some more work on the term \\(2\\cdot x+6\\) . You need to take out a common factor. FacForm (z*x+z)*(2*x+6) 2*z*(x+1)*(x+3) x 0 ATFacForm_notfactored. Your answer is not factored. You could still do some more work on the term \\(z\\cdot x+z\\) . You could still do some more work on the term \\(2\\cdot x+6\\) . You need to take out a common factor. FacForm (x+t)*(x-t) x^2-t^2 x 1 ATFacForm_true. FacForm t^2-1 (t-1)*(t+1) t 0 ATFacForm_notfactored. Your answer is not factored. FacForm t^2+1 t^2+1 t 1 ATFacForm_true. FacForm v^2+1 v^2+1 v 1 ATFacForm_true. FacForm v^2-1 v^2-1 v 0 ATFacForm_notfactored. Your answer is not factored. FacForm -(3*w-4*v+9*u)*(3*w+4*v-u) -(3*w-4*v+9*u)*(3*w+4*v-u) v 1 ATFacForm_true. FacForm -6*k*(4*b-k-1) 6*k*(1+k-4*b) k 1 ATFacForm_default_true. FacForm -2*3*k*(4*b-k-1) 6*k*(1+k-4*b) k 1 ATFacForm_true. FacForm -(6*k*(4*b-k-1)) 6*k*(1+k-4*b) k 1 ATFacForm_default_true. FacForm -(6*a*(4*b-a-1)) 6*a*(1+a-4*b) a 1 ATFacForm_true. FacForm -(6*a*(4*b-a-1)) 6*a*(-(4*b)+a+1) a 1 ATFacForm_true. FacForm x*(x-4+4/x) x^2-4*x+4 x 0 ATFacForm_notfactored. Your answer is not factored. You could still do some more work on the term \\(x-4+\\frac{4}{x}\\) . This term is expected to be a polynomial, but is not. These are delicate cases! FacForm (2-x)*(3-x) (x-2)*(x-3) x 1 ATFacForm_true. FacForm (1-x)^2 (x-1)^2 x 1 ATFacForm_true. FacForm (1-x)*(1-x) (x-1)^2 x 1 ATFacForm_true. FacForm -(1-x)^2 -(x-1)^2 x 1 ATFacForm_true. FacForm (1-x)^2 (x-1)^2 x 1 ATFacForm_true. FacForm 4*(1-x/2)^2 (x-2)^2 x 1 ATFacForm_default_true. FacForm -3*(x-4)*(x+1) -3*x^2+9*x+12 x 1 ATFacForm_true. FacForm 3*(-x+4)*(x+1) -3*x^2+9*x+12 x 1 ATFacForm_true. FacForm 3*(4-x)*(x+1) -3*x^2+9*x+12 x 1 ATFacForm_true. Cubics FacForm (x-1)*(x^2+x+1) x^3-1 x 1 ATFacForm_true. FacForm x^3-x+1 x^3-x+1 x 1 ATFacForm_true. FacForm 7*x^3-7*x+7 7*(x^3-x+1) x 0 ATFacForm_notfactored. Your answer is not factored. You need to take out a common factor. FacForm (1-x)*(2-x)*(3-x) -x^3+6*x^2-11*x+6 x 1 ATFacForm_true. FacForm (2-x)*(2-x)*(3-x) -x^3+7*x^2-16*x+12 x 1 ATFacForm_true. FacForm (2-x)^2*(3-x) -x^3+7*x^2-16*x+12 x 1 ATFacForm_true. FacForm (x^2-4*x+4)*(3-x) -x^3+7*x^2-16*x+12 x 0 ATFacForm_notfactored. Your answer is not factored. You could still do some more work on the term \\(x^2-4\\cdot x+4\\) . FacForm (x^2-3*x+2)*(3-x) -x^3+6*x^2-11*x+6 x 0 ATFacForm_notfactored. Your answer is not factored. You could still do some more work on the term \\(x^2-3\\cdot x+2\\) . FacForm 3*y^3-6*y^2-24*y 3*(y-4)*y*(y+2) y 0 ATFacForm_notfactored. Your answer is not factored. You need to take out a common factor. FacForm 3*(y^3-2*y^2-8*y) 3*(y-4)*y*(y+2) y 0 ATFacForm_notfactored. Your answer is not factored. You could still do some more work on the term \\(y^3-2\\cdot y^2-8\\cdot y\\) . FacForm 3*y*(y^2-2*y-8) 3*(y-4)*y*(y+2) y 0 ATFacForm_notfactored. Your answer is not factored. You could still do some more work on the term \\(y^2-2\\cdot y-8\\) . FacForm 3*(y^2-4*y)*(y+2) 3*(y-4)*y*(y+2) y 0 ATFacForm_notfactored. Your answer is not factored. You could still do some more work on the term \\(y^2-4\\cdot y\\) . FacForm (y-4)*y*(3*y+6) 3*(y-4)*y*(y+2) y 0 ATFacForm_notfactored. Your answer is not factored. You could still do some more work on the term \\(3\\cdot y+6\\) . You need to take out a common factor. FacForm (a-x)^6000 (a-x)^6000 x 1 ATFacForm_true. FacForm (x-a)^6000 (a-x)^6000 x 1 ATFacForm_true. Needs flattening FacForm 2*a*(a*b-1) 2*a*(a*b-1) a 1 ATFacForm_true. FacForm (2*a)*(a*b-1) 2*a*(a*b-1) a 1 ATFacForm_true. FacForm 3*x*(7*y-3)*(7*y+3) 3*x*(7*y-3)*(7*y+3) x 1 ATFacForm_true. FacForm 3*x*(7*y-3)*(7*y+3) 3*x*(7*y-3)*(7*y+3) y 1 ATFacForm_true. Not polynomials in a variable FacForm (sin(x)+1)*(sin(x)-1) sin(x)^2-1 sin(x) 1 ATFacForm_true. FacForm (cos(t)-sqrt(2))^2 cos(t)^2-2*sqrt(2)*cos(t)+2 cos(t) 1 ATFacForm_true. FacForm 7 7 x 1 ATFacForm_int_true. Factors over other fields FacForm 24*(x-1/4) 24*x-6 x 1 ATFacForm_default_true. FacForm (x-sqrt(2))*(x+sqrt(2)) x^2-2 x 1 ATFacForm_true. FacForm x^2-2 x^2-2 x 1 ATFacForm_true. FacForm (%i*x-2*%i) %i*(x-2) x 0 ATFacForm_notfactored. Your answer is not factored. FacForm %i*(x-2) (%i*x-2*%i) x 1 ATFacForm_true. FacForm (x-%i)*(x+%i) x^2+1 x 1 ATFacForm_true. FacForm (x-1)*(x+(1+sqrt(3)*%i)/2)*(x+ (1-sqrt(3)*%i)/2) x^3-1 x 1 ATFacForm_default_true.","title":"FacForm: Answer test results"},{"location":"Authoring/Answer_Tests/Results/FacForm/#facform-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"FacForm: Answer test results"},{"location":"Authoring/Answer_Tests/Results/GT/","text":"GT: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. GT Test ? Student response Teacher answer Opt Mark Answer note GT 1/0 1 -1 ATGT_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. GT 1 1/0 -1 ATGT_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. GT 1 1 0 ATGT_false. GT 2 1 1 ATGT_true. GT 1 2.1 0 ATGT_false. GT pi 3 1 ATGT_true. GT pi+2 5 1 ATGT_true. Infinity GT -inf 0 0 Not number GT inf 0 0 Not number","title":"GT: Answer test results"},{"location":"Authoring/Answer_Tests/Results/GT/#gt-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"GT: Answer test results"},{"location":"Authoring/Answer_Tests/Results/GTE/","text":"GTE: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. GTE Test ? Student response Teacher answer Opt Mark Answer note GTE 1/0 1 -1 ATGTE_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. GTE 1 1/0 -1 ATGTE_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. GTE 1 1 1 ATGTE_true. GTE 2 1 1 ATGTE_true. GTE 1 2.1 0 ATGTE_false. GTE pi 3 1 ATGTE_true. GTE pi+2 5 1 ATGTE_true.","title":"GTE: Answer test results"},{"location":"Authoring/Answer_Tests/Results/GTE/#gte-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"GTE: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Int/","text":"Int: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. Int Test ? Student response Teacher answer Opt Mark Answer note Int 1/0 1 -1 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Missing option when executing the test. Int 1/0 1 x -1 ATInt_STACKERROR_SAns. Int 1 1/0 x -1 ATInt_STACKERROR_TAns. Int 0 0 1/0 -1 ATInt_STACKERROR_Opt. Int 0 0 [x,1/0] -1 ATInt_STACKERROR_Opt. Int 0 0 [x,NOCONST,1/0] -1 ATInt_STACKERROR_Opt. Basic tests Int x^3/3 x^3/3 x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int x^3/3+1 x^3/3 x 0 ATInt_const_int. You need to add a constant of integration. This should be an arbitrary constant, not a number. Int x^3/3+c x^3/3 x 1 ATInt_true. Int x^3/3-c x^3/3 x 1 ATInt_true. Int x^3/3+c+1 x^3/3 x 1 ATInt_true. Int x^3/3+3*c x^3/3 x 1 ATInt_true. Int (x^3+c)/3 x^3/3 x 1 ATInt_true. Int x^(k+1)/(k+1) x^(k+1)/(k+1) x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int x^(k+1)/(k+1)+c x^(k+1)/(k+1) x 1 ATInt_true. Int ! (x^(k+1)-1)/(k+1) x^(k+1)/(k+1) x -2 ATInt_true. Int ! (x^(k+1)-1)/(k+1)+c x^(k+1)/(k+1)+c x -3 ATInt_weirdconst. The formal derivative of your answer does equal the expression that you were asked to integrate. However, you have a strange constant of integration. Please ask your teacher about this. Int x^3/3+c+k x^3/3 x 0 ATInt_weirdconst. The formal derivative of your answer does equal the expression that you were asked to integrate. However, you have a strange constant of integration. Please ask your teacher about this. Int x^3/3+c^2 x^3/3 x 0 ATInt_weirdconst. The formal derivative of your answer does equal the expression that you were asked to integrate. However, you have a strange constant of integration. Please ask your teacher about this. Int x^3/3+c^3 x^3/3 x 0 ATInt_weirdconst. The formal derivative of your answer does equal the expression that you were asked to integrate. However, you have a strange constant of integration. Please ask your teacher about this. Int x^3/3*c x^3/3 x 0 ATInt_generic. The derivative of your answer should be equal to the expression that you were asked to integrate, that was: \\[x^2\\] In fact, the derivative of your answer, with respect to \\(x\\) is: \\[c\\cdot x^2\\] so you must have done something wrong! Int X^3/3+c x^3/3 x 0 ATInt_generic. ATInt_var_SB_notSA. The derivative of your answer should be equal to the expression that you were asked to integrate, that was: \\[x^2\\] In fact, the derivative of your answer, with respect to \\(x\\) is: \\[0\\] so you must have done something wrong! Int sin(2*x) x^3/3 x 0 ATInt_generic. The derivative of your answer should be equal to the expression that you were asked to integrate, that was: \\[x^2\\] In fact, the derivative of your answer, with respect to \\(x\\) is: \\[2\\cdot \\cos \\left( 2\\cdot x \\right)\\] so you must have done something wrong! Int x^2/2-2*x+2+c (x-2)^2/2 x 1 ATInt_true. Int (t-1)^5/5+c (t-1)^5/5 t 1 ATInt_true. Int (v-1)^5/5+c (v-1)^5/5 v 1 ATInt_true. Int cos(2*x)/2+1+c cos(2*x)/2 x 1 ATInt_true. Int (x-a)^6001/6001+c (x-a)^6001/6001 x 1 ATInt_true. Int (x-a)^6001/6001 (x-a)^6001/6001 x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int 6000*(x-a)^5999 (x-a)^6001/6001 x 0 ATInt_diff. It looks like you have differentiated instead! Int 4*%e^(4*x)/(%e^(4*x)+1) log(%e^(4*x)+1)+c x 0 ATInt_generic. The derivative of your answer should be equal to the expression that you were asked to integrate, that was: \\[\\frac{4\\cdot e^{4\\cdot x}}{e^{4\\cdot x}+1}\\] In fact, the derivative of your answer, with respect to \\(x\\) is: \\[\\frac{16\\cdot e^{4\\cdot x}}{e^{4\\cdot x}+1}-\\frac{16\\cdot e^{8 \\cdot x}}{{\\left(e^{4\\cdot x}+1\\right)}^2}\\] so you must have done something wrong! The teacher adds a constant Int x^3/3+c x^3/3+c x 1 ATInt_true. Int x^2/2-2*x+2+c (x-2)^2/2+k x 1 ATInt_true. The teacher condones lack of constant, or numerical constant Int x^3/3 x^3/3 [x,NOCONST] 1 ATInt_const_condone. Int x^3/3+c x^3/3 [x,NOCONST] 1 ATInt_true. Int x^2/2-2*x+2 (x-2)^2/2+k [x,NOCONST] 1 ATInt_const_condone. Int x^3/3+1 x^3/3 [x,NOCONST] 1 ATInt_const_int_condone. Int x^3/3+c^2 x^3/3 [x,NOCONST] 0 ATInt_weirdconst. The formal derivative of your answer does equal the expression that you were asked to integrate. However, you have a strange constant of integration. Please ask your teacher about this. Int n*x^n n*x^(n-1) x 0 ATInt_generic. The derivative of your answer should be equal to the expression that you were asked to integrate, that was: \\[\\left(n-1\\right)\\cdot n\\cdot x^{n-2}\\] In fact, the derivative of your answer, with respect to \\(x\\) is: \\[n^2\\cdot x^{n-1}\\] so you must have done something wrong! Int n*x^n (assume(n>0), n*x^(n-1)) x 0 ATInt_generic. The derivative of your answer should be equal to the expression that you were asked to integrate, that was: \\[\\left(n-1\\right)\\cdot n\\cdot x^{n-2}\\] In fact, the derivative of your answer, with respect to \\(x\\) is: \\[n^2\\cdot x^{n-1}\\] so you must have done something wrong! Special case Int exp(x)+c exp(x) x 1 ATInt_true. Int exp(x) exp(x) x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int exp(x) exp(x) [x,NOCONST] 1 ATInt_const_condone. Student differentiates by mistake Int 2*x x^3/3 x 0 ATInt_diff. It looks like you have differentiated instead! Int 2*x+c x^3/3 x 0 ATInt_diff. It looks like you have differentiated instead! Sloppy logs (teacher ignores abs(x) ) Int ln(x) ln(x) x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int ln(x) ln(x) [x,NOCONST] 1 ATInt_const_condone. Int ln(x)+c ln(x)+c x 1 ATInt_true_equiv. Int ln(k*x) ln(x)+c x 1 ATInt_true_equiv. Fussy logs (teacher uses abs(x) ) Int ln(x) ln(abs(x))+c x 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int ln(x)+c ln(abs(x))+c x 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int ln(x) ln(abs(x))+c [x, NOCONST] 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int ln(abs(x)) ln(abs(x))+c x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int ln(abs(x))+c ln(abs(x))+c x 1 ATInt_true_equiv. Int ln(k*x) ln(abs(x))+c x 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int ln(k*abs(x)) ln(abs(x))+c x 1 ATInt_true_equiv. Int ln(abs(k*x)) ln(abs(x))+c x 1 ATInt_true_equiv. Teacher uses ln(k*abs(x)) Int ln(x) ln(k*abs(x)) x 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int ln(x)+c ln(k*abs(x)) x 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int ln(abs(x)) ln(k*abs(x)) x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int ln(abs(x))+c ln(k*abs(x)) x 1 ATInt_true_equiv. Int ln(k*x) ln(k*abs(x)) x 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int ln(k*abs(x)) ln(k*abs(x)) x 1 ATInt_true_equiv. Other logs Int ln(x)+ln(a) ln(k*abs(x+a)) x 0 ATInt_generic. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int log(x)^2-2*log(c)*log(x)+k ln(c/x)^2 x 0 ATInt_EqFormalDiff. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Please ask your teacher about this. Int log(x)^2-2*log(c)*log(x)+k ln(abs(c/x))^2 x 0 ATInt_generic. The derivative of your answer should be equal to the expression that you were asked to integrate, that was: \\[-\\frac{2\\cdot \\ln \\left( \\frac{\\left| c\\right| }{\\left| x\\right| } \\right)}{x}\\] In fact, the derivative of your answer, with respect to \\(x\\) is: \\[\\frac{2\\cdot \\ln \\left( x \\right)}{x}-\\frac{2\\cdot \\ln \\left( c \\right)}{x}\\] so you must have done something wrong! Int c-(log(2)-log(x))^2/2 -1/2*log(2/x)^2 x 1 ATInt_true_equiv. Int ln(abs(x+3))/2+c ln(abs(2*x+6))/2+c x 0 ATInt_EqFormalDiff. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Please ask your teacher about this. Int ln(abs(x+3))/2+c ln(abs(2*x+6))/2+c [x, FORMAL] 1 ATInt_EqFormalDiff. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Please ask your teacher about this. Int ln(abs(x+3))/2 ln(abs(2*x+6))/2+c [x, FORMAL] 1 ATInt_EqFormalDiff. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Please ask your teacher about this. Int ln(abs(x+3))/2 ln(abs(2*x+6))/2+c [x, FORMAL, NOC ONST] 1 ATInt_EqFormalDiff. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Please ask your teacher about this. Int ln(abs(x+3))/2 ln(abs(2*x+6))/2+c [x, NOCONST, FO RMAL] 1 ATInt_EqFormalDiff. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Please ask your teacher about this. Int ! ln(abs(x+3))/2 ln(abs(2*x+6))/2+c [x, NOCONST] -3 ATInt_EqFormalDiff. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Please ask your teacher about this. Int -log(sqrt(x^2-4*x+3)+x-2)/2+(x *sqrt(x^2-4*x+3))/2-sqrt(x^2-4 *x+3)+c integrate(sqrt(x^2-4*x+3),x) x 0 ATInt_EqFormalDiff. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Please ask your teacher about this. Int -log(sqrt(x^2-4*x+3)+x-2)/2+(x *sqrt(x^2-4*x+3))/2-sqrt(x^2-4 *x+3)+c integrate(sqrt(x^2-4*x+3),x) [x, FORMAL] 1 ATInt_EqFormalDiff. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Please ask your teacher about this. Irreducible quadratic Int ln(x^2+7*x+7) ln(x^2+7*x+7) [x,NOCONST] 1 ATInt_const_condone. Int ln(x^2+7*x+7) ln(abs(x^2+7*x+7)) [x,NOCONST] 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int ln(x^2+7*x+7)+c ln(x^2+7*x+7)+c x 1 ATInt_true_equiv. Int ln(k*(x^2+7*x+7)) ln(x^2+7*x+7)+c x 1 ATInt_true_equiv. Int ln(x^2+7*x+7) ln(abs(x^2+7*x+7))+c x 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int ln(x^2+7*x+7)+c ln(abs(x^2+7*x+7))+c x 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int ln(abs(x^2+7*x+7))+c ln(abs(x^2+7*x+7))+c x 1 ATInt_true_equiv. Int ln(k*abs(x^2+7*x+7)) ln(abs(x^2+7*x+7))+c x 1 ATInt_true_equiv. Two logs Int log(abs(x-3))+log(abs(x+3)) log(abs(x-3))+log(abs(x+3)) x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int log(abs(x-3))+log(abs(x+3))+c log(abs(x-3))+log(abs(x+3)) x 1 ATInt_true_equiv. Int log(abs(x-3))+log(abs(x+3)) log(x-3)+log(x+3) x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int log(abs(x-3))+log(abs(x+3))+c log(x-3)+log(x+3) x 1 ATInt_true_equiv. Int log(x-3)+log(x+3) log(x-3)+log(x+3) x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int log(x-3)+log(x+3)+c log(x-3)+log(x+3) x 1 ATInt_true_equiv. Int log(x-3)+log(x+3) log(abs(x-3))+log(abs(x+3)) x 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int log(x-3)+log(x+3)+c log(abs(x-3))+log(abs(x+3)) x 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int log(abs((x-3)*(x+3)))+c log(abs(x-3))+log(abs(x+3)) x 1 ATInt_true_equiv. Int log(abs((x^2-9)))+c log(abs(x-3))+log(abs(x+3)) x 0 ATInt_EqFormalDiff. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Please ask your teacher about this. Int 2*log(abs(x-2))-log(abs(x+2))+ (x^2+4*x)/2 -log(abs(x+2))+2*log(abs(x-2)) +(x^2+4*x)/2+c x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int -log(abs(x+2))+2*log(abs(x-2)) +(x^2+4*x)/2+c -log(abs(x+2))+2*log(abs(x-2)) +(x^2+4*x)/2+c x 1 ATInt_true_equiv. Int -log(abs(x+2))+2*log(abs(x-2)) +(x^2+4*x)/2+c -log((x+2))+2*log((x-2))+(x^2+ 4*x)/2 x 1 ATInt_true_equiv. Inconsistent log(abs()) Int log(abs(x-3))+log((x+3))+c log(x-3)+log(x+3) x 0 ATInt_true_equiv. ATInt_logabs_inconsistent. There appear to be strange inconsistencies between your use of \\(\\log(...)\\) and \\(\\log(|...|)\\) . Please ask your teacher about this. Int log((v-3))+log(abs(v+3))+c log(v-3)+log(v+3) v 0 ATInt_true_equiv. ATInt_logabs_inconsistent. There appear to be strange inconsistencies between your use of \\(\\log(...)\\) and \\(\\log(|...|)\\) . Please ask your teacher about this. Int log((x-3))+log(abs(x+3)) log(x-3)+log(x+3) x 0 ATInt_const. ATInt_logabs_inconsistent. There appear to be strange inconsistencies between your use of \\(\\log(...)\\) and \\(\\log(|...|)\\) . Please ask your teacher about this. Int 2*log((x-2))-log(abs(x+2))+(x^ 2+4*x)/2 -log(abs(x+2))+2*log(abs(x-2)) +(x^2+4*x)/2 x 0 ATInt_EqFormalDiff. ATInt_logabs. ATInt_logabs_inconsistent. There appear to be strange inconsistencies between your use of \\(\\log(...)\\) and \\(\\log(|...|)\\) . Please ask your teacher about this. Significant integration constant differences Int 2*(sqrt(t)-5)-10*log((sqrt(t)- 5))+c 2*(sqrt(t)-5)-10*log((sqrt(t)- 5))+c t 1 ATInt_true_equiv. Int 2*(sqrt(t))-10*log((sqrt(t)-5) )+c 2*(sqrt(t)-5)-10*log((sqrt(t)- 5))+c t 1 ATInt_true_differentconst. Int 2*(sqrt(t)-5)-10*log((sqrt(t)- 5))+c 2*(sqrt(t)-5)-10*log(abs(sqrt( t)-5))+c t 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int 2*(sqrt(t))-10*log(abs(sqrt(t) -5))+c 2*(sqrt(t)-5)-10*log(abs(sqrt( t)-5))+c t 1 ATInt_true_differentconst. Trig Int 2*sin(x)*cos(x) sin(2*x)+c x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int 2*sin(x)*cos(x)+k sin(2*x)+c x 1 ATInt_true. Int -2*cos(3*x)/3-3*cos(2*x)/2 -2*cos(3*x)/3-3*cos(2*x)/2+c x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int -2*cos(3*x)/3-3*cos(2*x)/2+1 -2*cos(3*x)/3-3*cos(2*x)/2+c x 0 ATInt_const_int. You need to add a constant of integration. This should be an arbitrary constant, not a number. Int -2*cos(3*x)/3-3*cos(2*x)/2+c -2*cos(3*x)/3-3*cos(2*x)/2+c x 1 ATInt_true. Int (tan(2*t)-2*t)/2 -(t*sin(4*t)^2-sin(4*t)+t*cos( 4*t)^2+2*t*cos(4*t)+t)/(sin(4* t)^2+cos(4*t)^2+2*cos(4*t)+1) t 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int (tan(2*t)-2*t)/2+1 -(t*sin(4*t)^2-sin(4*t)+t*cos( 4*t)^2+2*t*cos(4*t)+t)/(sin(4* t)^2+cos(4*t)^2+2*cos(4*t)+1) t 0 ATInt_const_int. You need to add a constant of integration. This should be an arbitrary constant, not a number. Int (tan(2*t)-2*t)/2+c -(t*sin(4*t)^2-sin(4*t)+t*cos( 4*t)^2+2*t*cos(4*t)+t)/(sin(4* t)^2+cos(4*t)^2+2*cos(4*t)+1) t 1 ATInt_true. Int tan(x)-x+c tan(x)-x x 1 ATInt_true. Note the difference in feedback here, generated by the options. Int ((5*%e^7*x-%e^7)*%e^(5*x)) ((5*%e^7*x-%e^7)*%e^(5*x))/25+ c x 0 ATInt_generic. The derivative of your answer should be equal to the expression that you were asked to integrate, that was: \\[\\frac{e^{5\\cdot x+7}}{5}+\\frac{\\left(5\\cdot e^7\\cdot x-e^7\\right) \\cdot e^{5\\cdot x}}{5}\\] In fact, the derivative of your answer, with respect to \\(x\\) is: \\[5\\cdot e^{5\\cdot x+7}+5\\cdot \\left(5\\cdot e^7\\cdot x-e^7\\right) \\cdot e^{5\\cdot x}\\] so you must have done something wrong! Int ((5*%e^7*x-%e^7)*%e^(5*x)) ((5*%e^7*x-%e^7)*%e^(5*x))/25+ c [x,x*%e^(5*x+7) ] 0 ATInt_generic. The derivative of your answer should be equal to the expression that you were asked to integrate, that was: \\[x\\cdot e^{5\\cdot x+7}\\] In fact, the derivative of your answer, with respect to \\(x\\) is: \\[5\\cdot e^{5\\cdot x+7}+5\\cdot \\left(5\\cdot e^7\\cdot x-e^7\\right) \\cdot e^{5\\cdot x}\\] so you must have done something wrong! Inverse hyperbolic integrals Int log(x-3)/6-log(x+3)/6+c log(x-3)/6-log(x+3)/6 x 1 ATInt_true_equiv. Int asinh(x) ln(x+sqrt(x^2+1)) x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int asinh(x)+c ln(x+sqrt(x^2+1)) x 1 ATInt_true. Int -acoth(x/3)/3 log(x-3)/6-log(x+3)/6 x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int -acoth(x/3)/3 log(x-3)/6-log(x+3)/6 [x, NOCONST] 1 ATInt_true. Int -acoth(x/3)/3+c log(x-3)/6-log(x+3)/6 x 1 ATInt_true. Int -acoth(x/3)/3+c log(abs(x-3))/6-log(abs(x+3))/ 6 x 1 ATInt_true. Int log(x-a)/(2*a)-log(x+a)/(2*a)+ c log(x-a)/(2*a)-log(x+a)/(2*a) x 1 ATInt_true_equiv. Int -acoth(x/a)/a+c log(x-a)/(2*a)-log(x+a)/(2*a) x 1 ATInt_true. Int -acoth(x/a)/a+c log(abs(x-a))/(2*a)-log(abs(x+ a))/(2*a) x 1 ATInt_true. Int log(x-a)/(2*a)-log(x+a)/(2*a)+ c log(abs(x-a))/(2*a)-log(abs(x+ a))/(2*a) x 0 ATInt_EqFormalDiff. ATInt_logabs. The formal derivative of your answer does equal the expression that you were asked to integrate. However, your answer differs from the correct answer in a significant way, that is to say not just, e.g., a constant of integration. Your teacher may expect you to use the result \\(\\int\\frac{1}{x} dx = \\log(|x|)+c\\) , rather than \\(\\int\\frac{1}{x} dx = \\log(x)+c\\) . Please ask your teacher about this. Int log(x-3)/6-log(x+3)/6+c -acoth(x/3)/3 x 1 ATInt_true. Int log(abs(x-3))/6-log(abs(x+3))/ 6+c -acoth(x/3)/3 x 1 ATInt_true. Int log(x-3)/6-log(x+3)/6 -acoth(x/3)/3 x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int atan(2*x-3)+c atan(2*x-3) x 1 ATInt_true. Int atan((x-2)/(x-1))+c atan(2*x-3) x 1 ATInt_true. Int atan((x-2)/(x-1)) atan(2*x-3) x 0 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done. Int atan((x-1)/(x-2)) atan(2*x-3) x 0 ATInt_generic. The derivative of your answer should be equal to the expression that you were asked to integrate, that was: \\[\\frac{2}{{\\left(2\\cdot x-3\\right)}^2+1}\\] In fact, the derivative of your answer, with respect to \\(x\\) is: \\[\\frac{\\frac{1}{x-2}-\\frac{x-1}{{\\left(x-2\\right)}^2}}{\\frac{{\\left( x-1\\right)}^2}{{\\left(x-2\\right)}^2}+1}\\] so you must have done something wrong! Stoutemyer (currently fails) Int ! 2/3*sqrt(3)*(atan(sin(x)/(sqrt (3)*(cos(x)+1)))-(atan(sin(x)/ (cos(x)+1))))+x/sqrt(3) 2*atan(sin(x)/(sqrt(3)*(cos(x) +1)))/sqrt(3) x -3 ATInt_const. You need to add a constant of integration, otherwise this appears to be correct. Well done.","title":"Int: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Int/#int-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"Int: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Levenshtein/","text":"Levenshtein: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. Levenshtein Test ? Student response Teacher answer Opt Mark Answer note Levenshtein \"Hello\" \"Hello\" 0 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Missing option when executing the test. Levenshtein 1/0 \"Hello\" 0.9 -1 ATLevenshtein_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. Levenshtein x^2 \"Hello\" 0.9 0 ATLevenshtein_SA_not_string. The first argument to the Levenshtein answer test must be a string. The test failed. Please contact your teacher. Levenshtein \"Hello\" \"Hello\" 0.9 0 ATLevenshtein_SB_malformed. The second argument to the Levenshtein answer test must be in the form [allow, deny] where each item is a list of strings. This argument is malformed and so the test failed. Please contact your teacher. Levenshtein \"Hello\" [\"Hello\"] 0.9 0 ATLevenshtein_SB_malformed. The second argument to the Levenshtein answer test must be in the form [allow, deny] where each item is a list of strings. This argument is malformed and so the test failed. Please contact your teacher. Levenshtein \"Hello\" [[\"Hello\"]] 0.9 0 ATLevenshtein_SB_malformed. The second argument to the Levenshtein answer test must be in the form [allow, deny] where each item is a list of strings. This argument is malformed and so the test failed. Please contact your teacher. Levenshtein \"Hello\" [[\"Hello\"], x^2] 0.9 0 ATLevenshtein_SB_malformed. The second argument to the Levenshtein answer test must be in the form [allow, deny] where each item is a list of strings. This argument is malformed and so the test failed. Please contact your teacher. Levenshtein \"Hello\" [[\"Hello\"], [x^2]] 0.9 0 ATLevenshtein_SB_malformed. The second argument to the Levenshtein answer test must be in the form [allow, deny] where each item is a list of strings. This argument is malformed and so the test failed. Please contact your teacher. Levenshtein \"Hello\" [[\"Hello\"], [\"G oodbye\"], [\"Excess&q uot;]] 0.9 0 ATLevenshtein_SB_malformed. The second argument to the Levenshtein answer test must be in the form [allow, deny] where each item is a list of strings. This argument is malformed and so the test failed. Please contact your teacher. Levenshtein \"Hello\" [[], [\"Goodbye\"]] 0.9 0 ATLevenshtein_SB_malformed. The second argument to the Levenshtein answer test must be in the form [allow, deny] where each item is a list of strings. This argument is malformed and so the test failed. Please contact your teacher. Levenshtein \"Hello\" [[\"Hello\"], [\"G oodbye\"]] z 0 ATLevenshtein_tol_not_number. The tolerance in the Levenshtein answer test must be a number, but is not. The test failed. Please contact your teacher. Levenshtein \"Hello\" [[\"Hello\"], [\"G oodbye\"]] [z] 0 ATLevenshtein_tol_not_number. The tolerance in the Levenshtein answer test must be a number, but is not. The test failed. Please contact your teacher. Usage tests Levenshtein \"Hello\" [[\"Hello\"], [\"G oodbye\"]] 0.9 1 ATLevenshtein_true: [[1.0,\"Hello\"],[0.0,\"Goodbye\"]]. Levenshtein \"hello\" [[\"Hello\"], [\"G oodbye\"]] [0.9] 1 ATLevenshtein_true: [[1.0,\"Hello\"],[0.0,\"Goodbye\"]]. Levenshtein \"hello\" [[\"Hello\", \"Goo d day\", \"Hi\"], [\"Goodbye\", \"By e\", \"Fairwell\"] ] [0.8, CASE] 1 ATLevenshtein_match: [[0.8,\"Hello\"],[0.25,\"Fairwell\"]]. The closest match was \" \\(\\mbox{Hello}\\) \". Levenshtein \"goodday\" [[\"Hello\", \"Goo d day\", \"Hi\"], [\"Goodbye\", \"By e\", \"Fairwell\"] ] 0.8 1 ATLevenshtein_match: [[0.875,\"Good day\"],[0.57143,\"Goodbye\"]]. The closest match was \" \\(\\mbox{Good day}\\) \". Levenshtein \"goodday\" [[\"Hello\", \"Goo d day\", \"Hi\"], [\"Goodbye\", \"By e\", \"Fairwell\"] ] [0.8, CASE] 0 ATLevenshtein_far: [[0.75,\"Good day\"],[0.42857,\"Goodbye\"]]. Levenshtein \"Jello\" [[\"Hello\", \"Goo d day\", \"Hi\"], [\"Goodbye\", \"By e\", \"Fairwell\"] ] 0.9 0 ATLevenshtein_far: [[0.8,\"Hello\"],[0.25,\"Fairwell\"]]. Levenshtein \"Jello\" [[\"Hello\", \"Goo d day\", \"Hi\"], [\"Goodbye\", \"By e\", \"Fairwell\"] ] 0.75 1 ATLevenshtein_match: [[0.8,\"Hello\"],[0.25,\"Fairwell\"]]. The closest match was \" \\(\\mbox{Hello}\\) \". Levenshtein \"Jello\" [[\"Hello\", \"Goo d day\", \"Hi\"], []] 0.75 1 ATLevenshtein_match: [[0.8,\"Hello\"],[0,[]]]. The closest match was \" \\(\\mbox{Hello}\\) \". Levenshtein \"Good bye\" [[\"Hello\", \"Goo d day\", \"Hi\"], [\"Goodbye\", \"By e\", \"Fairwell\"] ] 0.75 0 ATLevenshtein_deny: [[0.625,\"Good day\"],[0.875,\"Goodbye\"]]. Levenshtein \"Good, day!\" [[\"Hello\", \"Goo d day\", \"Hi\"], [\"Goodbye\", \"By e\", \"Fairwell\"] ] 0.75 1 ATLevenshtein_match: [[0.8,\"Good day\"],[0.5,\"Goodbye\"]]. The closest match was \" \\(\\mbox{Good day}\\) \". Levenshtein sremove_chars(\".,!?\" , \"Good, day!\") [[\"Hello\", \"Goo d day\", \"Hi\"], [\"Goodbye\", \"By e\", \"Fairwell\"] ] 0.75 1 ATLevenshtein_true: [[1.0,\"Good day\"],[0.5,\"Goodbye\"]]. Levenshtein \" good day \" [[\"Hello\", \"Goo d day\", \"Hi\"], [\"Goodbye\", \"By e\", \"Fairwell\"] ] 0.75 1 ATLevenshtein_true: [[1.0,\"Good day\"],[0.5,\"Goodbye\"]]. Levenshtein \" good day \" [[\"Hello\", \"Goo d day\", \"Hi\"], [\"Goodbye\", \"By e\", \"Fairwell\"] ] [0.75, WHITESPA CE] 0 ATLevenshtein_far: [[0.47059,\"Good day\"],[0.29412,\"Goodbye\"]].","title":"Levenshtein: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Levenshtein/#levenshtein-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"Levenshtein: Answer test results"},{"location":"Authoring/Answer_Tests/Results/LowestTerms/","text":"LowestTerms: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. LowestTerms Test ? Student response Teacher answer Opt Mark Answer note LowestTerms 1/0 0 -1 ATLowestTerms_STACKERROR_SAns. Mix of floats and rational numbers LowestTerms 0.5 0 1 LowestTerms 0.33 0 1 LowestTerms 2/4 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{2}{4} \\right] \\] Please try again. Negative numbers LowestTerms -1/3 0 1 LowestTerms 1/-3 0 1 LowestTerms -2/4 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{-2}{4} \\right] \\] Please try again. LowestTerms 2/-4 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{2}{-4} \\right] \\] Please try again. LowestTerms -1/-3 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{-1}{-3} \\right] \\] Please try again. LowestTerms -2/-4 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{-2}{-4} \\right] \\] Please try again. Polynomials LowestTerms x+1/3 0 1 LowestTerms x+2/6 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{2}{6} \\right] \\] Please try again. LowestTerms 2*x/4+2/6 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{2}{6} \\right] \\] Please try again. LowestTerms 2/4*x+2/6 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{2}{4} , \\frac{2}{6} \\right] \\] Please try again. LowestTerms x-1/-4 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{-1}{-4} \\right] \\] Please try again. Trig functions LowestTerms cos(x) 0 1 LowestTerms cos(3/6*x) 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{3}{6} \\right] \\] Please try again. Matrices LowestTerms matrix([1,2/4],[2,3]) 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{2}{4} \\right] \\] Please try again. Equations LowestTerms x=1/2 0 1 LowestTerms 3/9=x 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{3}{9} \\right] \\] Please try again. Use predicate lowesttermsp LowestTerms x^2/x 0 1 LowestTerms (2*x)/(4*t) 0 1 LowestTerms (2/4)*(x^2/t) 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{2}{4} \\right] \\] Please try again. LowestTerms x^(2/4) 0 0 ATLowestTerms_entries. The following terms in your answer are not in lowest terms. \\[\\left[ \\frac{2}{4} \\right] \\] Please try again. Need to rationalize demoninator LowestTerms sqrt(3)/3 sqrt(3)/3 1 LowestTerms 1/sqrt(3) sqrt(3)/3 0 ATLowestTerms_not_rat. You must clear the following from the denominator of your fraction: \\[\\left[ \\sqrt{3} \\right] \\] LowestTerms 1/(1-sqrt(2)) 1/(1-sqrt(2)) 0 ATLowestTerms_not_rat. You must clear the following from the denominator of your fraction: \\[\\left[ \\sqrt{2} \\right] \\] LowestTerms 1/(1+i) (1-i)/2 0 ATLowestTerms_not_rat. You must clear the following from the denominator of your fraction: \\[\\left[ \\mathrm{i} \\right] \\] LowestTerms 1+2/sqrt(3) (2*sqrt(3)+3)/3 0 ATLowestTerms_not_rat. You must clear the following from the denominator of your fraction: \\[\\left[ \\sqrt{3} \\right] \\] LowestTerms 1/(1+1/root(3,2)) sqrt(3)/(sqrt(3)+1) 0 ATLowestTerms_not_rat. You must clear the following from the denominator of your fraction: \\[\\left[ 3^{\\frac{1}{2}} \\right] \\] LowestTerms 1/(1+1/root(2,3)) 1/(1+1/root(2,3)) 0 ATLowestTerms_not_rat. You must clear the following from the denominator of your fraction: \\[\\left[ 2^{\\frac{1}{3}} \\right] \\]","title":"LowestTerms: Answer test results"},{"location":"Authoring/Answer_Tests/Results/LowestTerms/#lowestterms-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"LowestTerms: Answer test results"},{"location":"Authoring/Answer_Tests/Results/NumAbsolute/","text":"NumAbsolute: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. NumAbsolute Test ? Student response Teacher answer Opt Mark Answer note Basic tests NumAbsolute 1/0 0 -1 ATNumAbsolute_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. NumAbsolute 0 1/0 -1 ATNumAbsolute_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. NumAbsolute 0 0 1/0 -1 ATNumAbsolute_STACKERROR_Opt. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. NumAbsolute 0 (x -1 ATNumAbsoluteTEST_FAILED-Empty TA. The answer test failed to execute correctly: please alert your teacher. Attempted to execute an answer test with an empty teacher answer, probably a CAS validation problem when authoring the question. NumAbsolute 1 0 (x 0 No option, so 5% NumAbsolute 1.1 1 0 NumAbsolute 1.05 1 1 Options passed NumAbsolute 1.05 1 0.1 1 NumAbsolute 1.05 3 0.1 0 NumAbsolute 3.14 pi 0.001 0 NumAbsolute 1.41e-2 1.41e-2 0.0001 1 NumAbsolute 0.0141 1.41e-2 0.0001 1 NumAbsolute 0.00141 0.00141 0.0001 1 NumAbsolute 0.00141 1.41*10^-3 0.0001 1 NumAbsolute 1.41*10^-3 1.41*10^-3 0.0001 1 NumAbsolute [3.141,1.414] [pi,sqrt(2)] 0.01 1 NumAbsolute [3,1.414] [pi,sqrt(2)] 0.01 0 ATNumerical_wrongentries SA/TA=[3.0]. The entries underlined in red below are those that are incorrect. \\[\\left[ {\\color{red}{\\underline{3.0}}} , 1.414 \\right] \\] NumAbsolute [3,1.414] {pi,sqrt(2)} 0.01 0 ATNumerical_SA_not_set. Your answer should be a set, but is not. Note that the syntax to enter a set is to enclose the comma separated values with curly brackets. NumAbsolute {1.414,3.1} {significantfigures(pi,6),sqrt (2)} 0.01 0 ATNumerical_wrongentries: TA/SA=[3.14159], SA/TA=[3.1]. The entries underlined in red below are those that are incorrect. \\[\\left \\{{\\color{red}{\\underline{3.1}}} \\right \\}\\] NumAbsolute {1,1.414,3.1,2} {1,2,pi,sqrt(2)} 0.1 1","title":"NumAbsolute: Answer test results"},{"location":"Authoring/Answer_Tests/Results/NumAbsolute/#numabsolute-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"NumAbsolute: Answer test results"},{"location":"Authoring/Answer_Tests/Results/NumDecPlaces/","text":"NumDecPlaces: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. NumDecPlaces Test ? Student response Teacher answer Opt Mark Answer note Basic tests NumDecPlaces 1/0 3 2 -1 ATNumDecPlaces_STACKERROR_SAns. NumDecPlaces 0.1 1/0 2 -1 ATNumDecPlaces_STACKERROR_TAns. NumDecPlaces 0.1 0 1/0 -1 ATNumDecPlaces_STACKERROR_Opt. NumDecPlaces 0.1 1 x -1 ATNumDecPlaces_OptNotInt. For ATNumDecPlaces the test option must be a positive integer, in fact \" \\(x\\) \" was received. NumDecPlaces 0.1 1 -1 -1 ATNumDecPlaces_OptNotInt. For ATNumDecPlaces the test option must be a positive integer, in fact \" \\(-1\\) \" was received. NumDecPlaces 0.1 1 0 -1 ATNumDecPlaces_OptNotInt. For ATNumDecPlaces the test option must be a positive integer, in fact \" \\(0\\) \" was received. NumDecPlaces 0.1 1 ( -1 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Option field is invalid. You have a missing right bracket ) in the expression: ( . NumDecPlaces ( 1 1 -1 ATNumDecPlacesTEST_FAILED-Empty SA. The answer test failed to execute correctly: please alert your teacher. Attempted to execute an answer test with an empty student answer, probably a CAS validation problem when authoring the question. Student's answer not a floating point number NumDecPlaces x 3.143 2 0 ATNumDecPlaces_SA_Not_num. Your answer must be a floating point number, but is not. NumDecPlaces pi 3.000 3 0 ATNumDecPlaces_SA_Not_num. Your answer must be a floating point number, but is not. Right number of places NumDecPlaces 3.14 3.143 2 1 ATNumDecPlaces_Correct. ATNumDecPlaces_Equiv. NumDecPlaces 3.14 3.14 2 1 ATNumDecPlaces_Correct. ATNumDecPlaces_Equiv. NumDecPlaces 3.140 3.140 3 1 ATNumDecPlaces_Correct. ATNumDecPlaces_Equiv. NumDecPlaces 3141.5972 3141.5972 4 1 ATNumDecPlaces_Correct. ATNumDecPlaces_Equiv. NumDecPlaces 4.14 3.14 2 0 ATNumDecPlaces_Correct. ATNumDecPlaces_Not_equiv. NumDecPlaces 3.1416 pi 4 1 ATNumDecPlaces_Correct. ATNumDecPlaces_Equiv. NumDecPlaces -7.3 -7.3 1 1 ATNumDecPlaces_Correct. ATNumDecPlaces_Equiv. Wrong number of places NumDecPlaces 3.14 3.143 1 0 ATNumDecPlaces_Wrong_DPs. ATNumDecPlaces_Equiv. Your answer has been given to the wrong number of decimal places. NumDecPlaces 3.14 3.143 1 0 ATNumDecPlaces_Wrong_DPs. ATNumDecPlaces_Equiv. Your answer has been given to the wrong number of decimal places. NumDecPlaces 3.14 3.140 3 0 ATNumDecPlaces_Wrong_DPs. ATNumDecPlaces_Equiv. Your answer has been given to the wrong number of decimal places. NumDecPlaces 7.000 7 4 0 ATNumDecPlaces_Wrong_DPs. ATNumDecPlaces_Equiv. Your answer has been given to the wrong number of decimal places. NumDecPlaces 7.0000 7 4 1 ATNumDecPlaces_Correct. ATNumDecPlaces_Equiv. Both wrong DPs and inaccurate. NumDecPlaces 8.0000 7 3 0 ATNumDecPlaces_Wrong_DPs. ATNumDecPlaces_Not_equiv. Your answer has been given to the wrong number of decimal places. Teacher needs to round their answer. NumDecPlaces 4.000 3.99999 3 1 ATNumDecPlaces_Correct. ATNumDecPlaces_Equiv. Teacher uses displaydp NumDecPlaces 0.10 displaydp(0.1,2) 2 1 ATNumDecPlaces_Correct. ATNumDecPlaces_Equiv.","title":"NumDecPlaces: Answer test results"},{"location":"Authoring/Answer_Tests/Results/NumDecPlaces/#numdecplaces-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"NumDecPlaces: Answer test results"},{"location":"Authoring/Answer_Tests/Results/NumDecPlacesWrong/","text":"NumDecPlacesWrong: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. NumDecPlacesWrong Test ? Student response Teacher answer Opt Mark Answer note Basic tests NumDecPlacesWrong 1/0 3 2 -1 ATNumDecPlacesWrong_STACKERROR_SAns. NumDecPlacesWrong 0.1 1/0 2 -1 ATNumDecPlacesWrong_STACKERROR_TAns. NumDecPlacesWrong 0.1 0 1/0 -1 ATNumDecPlacesWrong_STACKERROR_Opt. NumDecPlacesWrong 0.1 0 x -1 ATNumDecPlacesWrong_OptNotInt. For ATNumDecPlacesWrong the test option must be a positive integer, in fact \" \\(x\\) \" was received. NumDecPlacesWrong x^2 1234 4 0 ATNumDecPlacesWrong_SA_Not_num. Your answer must be a floating point number, but is not. NumDecPlacesWrong 1234.5 x^2 4 0 ATNumDecPlacesWrong_Tans_Not_Num. NumDecPlacesWrong 3.141 31.41 4 1 ATNumDecPlacesWrong_Correct. NumDecPlacesWrong 3.141 31.14 4 0 ATNumDecPlacesWrong_Wrong. NumDecPlacesWrong pi 31.14 4 0 ATNumDecPlacesWrong_SA_Not_num. Your answer must be a floating point number, but is not. NumDecPlacesWrong 0.1234 1234 4 1 ATNumDecPlacesWrong_Correct. NumDecPlacesWrong 0.1235 1234 4 0 ATNumDecPlacesWrong_Wrong. NumDecPlacesWrong 0.0001234 1234 4 1 ATNumDecPlacesWrong_Correct. NumDecPlacesWrong 0.0001235 1234 4 0 ATNumDecPlacesWrong_Wrong. NumDecPlacesWrong 0.1233 1234 3 1 ATNumDecPlacesWrong_Correct. NumDecPlacesWrong 0.1243 1234 3 0 ATNumDecPlacesWrong_Wrong. NumDecPlacesWrong 0.1230 1239 3 1 ATNumDecPlacesWrong_Correct. NumDecPlacesWrong 0.1240 1239 3 0 ATNumDecPlacesWrong_Wrong. NumDecPlacesWrong 1230 1239 3 1 ATNumDecPlacesWrong_Correct. NumDecPlacesWrong 2230 1239 3 0 ATNumDecPlacesWrong_Wrong. NumDecPlacesWrong 0.100 1.00 3 1 ATNumDecPlacesWrong_Correct. NumDecPlacesWrong 0.1000 1.00 3 1 ATNumDecPlacesWrong_Correct. NumDecPlacesWrong 0.1001 1.001 3 1 ATNumDecPlacesWrong_Correct. Condone lack of trailing zeros NumDecPlacesWrong 0.100 1.0 4 1 ATNumDecPlacesWrong_Correct. NumDecPlacesWrong 1 1.00 4 1 ATNumDecPlacesWrong_Correct. Teacher uses displaydp NumDecPlacesWrong 0.101 displaydp(101,3) 3 1 ATNumDecPlacesWrong_Correct.","title":"NumDecPlacesWrong: Answer test results"},{"location":"Authoring/Answer_Tests/Results/NumDecPlacesWrong/#numdecplaceswrong-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"NumDecPlacesWrong: Answer test results"},{"location":"Authoring/Answer_Tests/Results/NumRelative/","text":"NumRelative: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. NumRelative Test ? Student response Teacher answer Opt Mark Answer note Basic tests NumRelative 1/0 0 -1 ATNumRelative_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. NumRelative 0 1/0 -1 ATNumRelative_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. NumRelative 0 0 1/0 -1 ATNumRelative_STACKERROR_Opt. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. NumRelative 0 (x -1 ATNumRelativeTEST_FAILED-Empty TA. The answer test failed to execute correctly: please alert your teacher. Attempted to execute an answer test with an empty teacher answer, probably a CAS validation problem when authoring the question. NumRelative 1.5 1.5 x -1 ATNumerical_STACKERROR_tol. The numerical tolerance for ATNumerical should be a floating point number, but is not. This is an internal error with the test. Please ask your teacher about this. NumRelative 1 0 (x 0 NumRelative x=1.5 1.5 0 ATNumerical_SA_not_number. Your answer should be a floating point number, but is not. NumRelative 1.5 x=1.5 0 ATNumerical_SB_not_number. The value supplied for the teacher's answer should be a floating point number, but is not. This is an internal error with the test. Please ask your teacher about this. No option, so 5% NumRelative 1.1 1 0 NumRelative 1.05 1 1 NumRelative 0.95 1 1 NumRelative 0.949 1 0 NumRelative 1.05e33 1e33 1 NumRelative 1.06e33 1e33 0 NumRelative 0.95e33 1e33 1 NumRelative 0.949e33 1e33 0 NumRelative 1.05e-33 1e-33 1 NumRelative 1.06e-33 1e-33 0 NumRelative 0.95e-33 1e-33 1 NumRelative 0.949e-33 1e-33 0 Remove display dp etc. NumRelative 1 displaydp(1.05,2) 0.1 1 NumRelative 1000 displaysci(1.05,2,3) 0.1 1 Options passed NumRelative 1.05 1 0.1 1 NumRelative 1.05 3 0.1 0 NumRelative 3.14 pi 0.001 1 Infinity NumRelative inf 0 0 ATNumerical_SA_not_number. Your answer should be a floating point number, but is not. Lists NumRelative 1 [1,2] 0 ATNumerical_SA_not_list. Your answer should be a list, but is not. Note that the syntax to enter a list is to enclose the comma separated values with square brackets. NumRelative [1,2] [1,2,3] 0 ATNumerical_wronglen. Your list should have \\(3\\) elements, but it actually has \\(2\\) . NumRelative [1,2] [1,2] 1 NumRelative [3.141,1.414] [pi,sqrt(2)] 1 NumRelative [3,1.414] [pi,sqrt(2)] 0.01 0 ATNumerical_wrongentries SA/TA=[3.0]. The entries underlined in red below are those that are incorrect. \\[\\left[ {\\color{red}{\\underline{3.0}}} , 1.414 \\right] \\] NumRelative [3,1.414] {pi,sqrt(2)} 0.01 0 ATNumerical_SA_not_set. Your answer should be a set, but is not. Note that the syntax to enter a set is to enclose the comma separated values with curly brackets. NumRelative {1.414,3.1} {significantfigures(pi,6),sqrt (2)} 0.01 0 ATNumerical_wrongentries: TA/SA=[3.14159], SA/TA=[3.1]. The entries underlined in red below are those that are incorrect. \\[\\left \\{{\\color{red}{\\underline{3.1}}} \\right \\}\\] NumRelative {1.414,3.1} {pi,sqrt(2)} 0.1 1 NumRelative {0,1,2} {0,1,2} 0.1 1 Complex numbers NumRelative 0.99*%i %i 0.1 0 ATNumerical_SA_not_number. Your answer should be a floating point number, but is not.","title":"NumRelative: Answer test results"},{"location":"Authoring/Answer_Tests/Results/NumRelative/#numrelative-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"NumRelative: Answer test results"},{"location":"Authoring/Answer_Tests/Results/NumSigFigs/","text":"NumSigFigs: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. NumSigFigs Test ? Student response Teacher answer Opt Mark Answer note Basic tests NumSigFigs 3.141 3.1415927 -1 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Missing option when executing the test. NumSigFigs 1/0 3 3 -1 ATNumSigFigs_STACKERROR_SAns. NumSigFigs 0 1/0 3 -1 ATNumSigFigs_STACKERROR_TAns. NumSigFigs 0 0 1/0 -1 ATNumSigFigs_STACKERROR_Opt. NumSigFigs 0 1 ( -1 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Option field is invalid. You have a missing right bracket ) in the expression: ( . NumSigFigs ( 1 1 -1 ATNumSigFigsTEST_FAILED-Empty SA. The answer test failed to execute correctly: please alert your teacher. Attempted to execute an answer test with an empty student answer, probably a CAS validation problem when authoring the question. NumSigFigs 1 3 pi -1 ATNumSigFigs_STACKERROR_not_integer. The answer test failed to execute correctly: please alert your teacher. NumSigFigs 1 3 [3,x] -1 ATNumSigFigs_STACKERROR_not_integer. The answer test failed to execute correctly: please alert your teacher. NumSigFigs 1 3 [1,2,3] -1 ATNumSigFigs_STACKERROR_list_wrong_length. The answer test failed to execute correctly: please alert your teacher. NumSigFigs 1 3 -1 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Missing option when executing the test. NumSigFigs pi pi 4 0 ATNumSigFigs_NotDecimal. Your answer should be a decimal number, but is not! Edge cases NumSigFigs 0 0 2 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0 0 1 1 NumSigFigs 0.0 0 1 1 NumSigFigs 0.0 0 2 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0 0.0 2 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0.0 0.0 2 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0.00 0.00 2 1 Large numbers NumSigFigs 5.4e21 5.3e21 2 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 5.3e21 5.3e21 2 1 NumSigFigs 5.3e22 5.3e22 2 1 NumSigFigs 5.3e20 5.3e22 2 0 ATNumSigFigs_VeryInaccurate. NumSigFigs 6.02214086e23 6.02214086e23 9 1 NumSigFigs 6.0221409e23 6.02214086e23 9 0 ATNumSigFigs_WrongDigits. ATNumSigFigs_Inaccurate. Your answer contains the wrong number of significant digits. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 6.02214087e23 6.02214086e23 9 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 6.02214085e23 6.02214086e23 9 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 5.3910632e-44 5.3910632e-44 8 1 NumSigFigs 5.391063e-44 5.3910632e-44 8 0 ATNumSigFigs_WrongDigits. ATNumSigFigs_Inaccurate. Your answer contains the wrong number of significant digits. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 5.3910631e-44 5.3910632e-44 8 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 5.3910633e-44 5.3910632e-44 8 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 1.61622938e-35 1.61622938e-35 9 1 NumSigFigs 1.6162294e-35 1.61622938e-35 9 0 ATNumSigFigs_WrongDigits. ATNumSigFigs_Inaccurate. Your answer contains the wrong number of significant digits. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 1.61622939e-35 1.61622938e-35 9 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 1.61622937e-35 1.61622938e-35 9 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 1.2345e82 1.2345e82 5 1 NumSigFigs 1.2346e82 1.2345e82 5 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 1.2344e82 1.2345e82 5 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. No trailing zeros. NumSigFigs 1.234 4 1 0 ATNumSigFigs_WrongDigits. ATNumSigFigs_Inaccurate. Your answer contains the wrong number of significant digits. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 3.141 3.1415927 3 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 3.141 3.1415927 4 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 3.146 3.1415927 4 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 3.147 3.1415927 4 0 ATNumSigFigs_VeryInaccurate. NumSigFigs 3.142 3.1415927 4 1 NumSigFigs 3.142 pi 4 1 NumSigFigs 3141 3.1415927 4 0 ATNumSigFigs_VeryInaccurate. NumSigFigs 0.00123 0.001234567 3 1 NumSigFigs 1.23e-3 0.001234567 3 1 NumSigFigs 138*10^-3 138*10^-3 3 1 NumSigFigs -138*10^-3 -138*10^-3 3 1 NumSigFigs 138*10^-3 -138*10^-3 3 0 ATNumSigFigs_WrongSign. Your answer has the wrong algebraic sign. NumSigFigs 1.38*10^-1 138*10^-3 3 1 NumSigFigs 1.24e-3 0.001234567 3 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 1.235e-3 0.001234567 4 1 NumSigFigs 1000 999 2 1 ATNumSigFigs_WithinRange. NumSigFigs 1E3 999 2 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs -100 -149 1 1 NumSigFigs -0.05 -0.0499 1 1 NumSigFigs -(0.05) -0.0499 1 1 NumSigFigs 1170 1174.34 3 1 NumSigFigs 61300 61250 3 1 Previous tricky case NumSigFigs 0.1667 0.1667 4 1 NumSigFigs 0.1666 0.1667 4 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 0.1663 0.1667 4 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 0.1662 0.1667 4 0 ATNumSigFigs_VeryInaccurate. NumSigFigs 0.166 0.1667 4 0 ATNumSigFigs_WrongDigits. ATNumSigFigs_VeryInaccurate. Your answer contains the wrong number of significant digits. NumSigFigs 0.16667 0.1667 4 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. Negative numbers NumSigFigs -3.141 -3.1415927 4 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs -3.141 -3.1415927 3 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs -3.141 -3.1415927 4 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs -3.142 -3.1415927 4 1 NumSigFigs 3.142 -3.1415927 4 0 ATNumSigFigs_WrongSign. Your answer has the wrong algebraic sign. NumSigFigs -3.142 3.1415927 4 0 ATNumSigFigs_WrongSign. Your answer has the wrong algebraic sign. NumSigFigs -3.149 3.1415927 4 0 ATNumSigFigs_WrongSign. ATNumSigFigs_VeryInaccurate. Your answer has the wrong algebraic sign. NumSigFigs 2.15 75701719/35227192 3 1 Round teacher answer NumSigFigs 0.0499 0.04985 3 1 NumSigFigs 0.0498 0.04985 3 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 0.0498 0.04975 3 1 NumSigFigs 0.0497 0.04975 3 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 0.0499 0.0498 3 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Final zeros after the decimal are significant. NumSigFigs 1.5 1.500 3 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 1.50 1.500 3 1 NumSigFigs 1.500 1.500 3 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 245.0 245 3 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. Too few digits NumSigFigs 180 178.35 3 0 ATNumSigFigs_WithinRange. ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 33 33.1558 3 0 ATNumSigFigs_WrongDigits. ATNumSigFigs_Inaccurate. Your answer contains the wrong number of significant digits. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Mixed options NumSigFigs 3.142 3.1415927 [4,3] 1 NumSigFigs 3.143 3.1415927 [4,3] 1 NumSigFigs 3.150 3.1415927 [4,3] 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 3.211 3.1415927 [4,3] 0 ATNumSigFigs_VeryInaccurate. NumSigFigs 3.1416 3.1415927 [4,3] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0.1666 0.1667 [4,3] 1 NumSigFigs 180 178.35 [3,1] 1 ATNumSigFigs_WithinRange. NumSigFigs 33 33.1558 [3,1] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 1.500 1.5 [3,1] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 245.0 245 [3,1] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 12345.7 12345.654321 [6,6] 1 NumSigFigs 12345.7 12345.654321 [6,3] 1 NumSigFigs 12300.0 12345.654321 [6,3] 1 NumSigFigs 12400.0 12345.654321 [6,3] 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 13500.0 12345.654321 [6,3] 0 ATNumSigFigs_VeryInaccurate. NumSigFigs 12000.0 12345.654321 [6,2] 1 NumSigFigs 13000.0 12345.654321 [6,2] 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 11000.0 12345.654321 [6,2] 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Zero option and trailing zeros NumSigFigs 0.0010 0 [1,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0.0010 0 [2,0] 1 NumSigFigs 0.0010 0 [3,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0.001 0 [1,0] 1 NumSigFigs 0.001 0 [2,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0.00100 null [2,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0.00100 null [3,0] 1 NumSigFigs 0.00100 null [4,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 5.00 null [2,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 5.00 null [3,0] 1 NumSigFigs 5.00 null [4,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 100 0 [1,0] 1 NumSigFigs 100 0 [2,0] 1 ATNumSigFigs_WithinRange. NumSigFigs 100 0 [3,0] 1 ATNumSigFigs_WithinRange. NumSigFigs 100 0 [4,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 10.0 0 [2,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 10.0 0 [3,0] 1 NumSigFigs 10.0 0 [4,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0 0 [1,0] 1 NumSigFigs 0 0 [2,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0.00 0 [1,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0.00 0 [2,0] 1 NumSigFigs 0.00 0 [3,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 0.00 0 [4,0] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. Condone too many sfs. NumSigFigs 8.250 8.250 [4,-1] 1 NumSigFigs 8.25 8.250 [4,-1] 0 ATNumSigFigs_WrongDigits. Your answer contains the wrong number of significant digits. NumSigFigs 8.250000 8.250 [4,-1] 1 NumSigFigs 8.250434 8.250 [4,-1] 1 NumSigFigs 82.4 82 [2,-1] 1 NumSigFigs 82.5 82 [2,-1] 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 83 82 [2,-1] 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. 1/7 = 0.142857142857... NumSigFigs 0.1430 1/7 [4,-1] 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 0.1429 1/7 [4,-1] 1 NumSigFigs 0.1428 1/7 [4,-1] 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 0.143 1/7 [4,-1] 0 ATNumSigFigs_WrongDigits. ATNumSigFigs_Inaccurate. Your answer contains the wrong number of significant digits. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 0.14284 1/7 [4,-1] 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 0.14285 1/7 [4,-1] 1 NumSigFigs 0.14286 1/7 [4,-1] 1 NumSigFigs 0.14291 1/7 [4,-1] 1 NumSigFigs 0.14294 1/7 [4,-1] 1 NumSigFigs 0.14295 1/7 [4,-1] 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 0.142 1/7 [2,-1] 1 NumSigFigs 0.14290907676 1/7 [2,-1] 1 NumSigFigs 0.143 1/7 [2,-1] 1 NumSigFigs 0.1433333 1/7 [2,-1] 1 NumSigFigs 0.144 1/7 [2,-1] 1 NumSigFigs 0.145 1/7 [2,-1] 1 NumSigFigs 0.146 1/7 [2,-1] 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Logarithms, numbers and surds NumSigFigs 1.279 ev(lg(19),lg=logbasesimp) 4 1 NumSigFigs 3.14 pi 3 1 NumSigFigs 3.15 pi 3 0 ATNumSigFigs_Inaccurate. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. NumSigFigs 1.73205 sqrt(3) 6 1 No support for matrices! NumSigFigs matrix([0.33,1],[1,1]) matrix([0.333,1],[1,1]) 2 -1 ATNumSigFigs_NotDecimal. Your answer should be a decimal number, but is not! NumSigFigs 3.1415 matrix([0.333,1],[1,1]) 2 -1 TEST_FAILED TEST_FAILED The answer test failed to execute correctly: please alert your teacher. sigfigsfun(x,n,d) requires a real number, or a list of real numbers, as a first argument. Received: matrix([0.333,1],[1,1]) Teacher uses dispsf NumSigFigs 1.50 dispsf(1.500,3) 3 1 NumSigFigs 1.50 dispdp(1.500,3) 3 1","title":"NumSigFigs: Answer test results"},{"location":"Authoring/Answer_Tests/Results/NumSigFigs/#numsigfigs-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"NumSigFigs: Answer test results"},{"location":"Authoring/Answer_Tests/Results/PartFrac/","text":"PartFrac: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. PartFrac Test ? Student response Teacher answer Opt Mark Answer note PartFrac 1/0 3*x^2 -1 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Missing option when executing the test. PartFrac 1/0 3*x^2 x -1 ATPartFrac_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. PartFrac 0 0 1/0 -1 ATPartFrac_STACKERROR_Opt. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. PartFrac 0 1/0 x -1 ATPartFrac_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. PartFrac 1/n=0 1/n n 0 ATPartFrac_SA_not_expression. Your answer should be an expression, not an equation, inequality, list, set or matrix. PartFrac 1/n {1/n} n 0 ATPartFrac_TA_not_expression. The answer test failed. Please contact your systems administrator Basic tests PartFrac 1/m 1/n n 0 ATPartFrac_diff_variables. The variables in your answer are different to those of the question, please check them. PartFrac 2/(x+1)-1/(x+2) s/((s+1)*(s+2)) s 0 ATPartFrac_diff_variables. The variables in your answer are different to those of the question, please check them. PartFrac 1/n 1/n n 1 ATPartFrac_true. PartFrac n^3/(n-1) n^3/(n-1) n 0 ATPartFrac_false_factor. PartFrac 1+n+n^2+1/(n-1) n^3/(n-1) n 1 ATPartFrac_true. PartFrac 1+n+n^2-1/(1-n) n^3/(n-1) n 1 ATPartFrac_true. Distinct linear factors in denominator PartFrac 1/(n+1)-1/n 1/(n+1)-1/n n 1 ATPartFrac_true. PartFrac 1/(n+1)+1/(1-n) 1/(n+1)-1/(n-1) n 1 ATPartFrac_true. PartFrac 1/(2*(n-1))-1/(2*(n+1)) 1/((n-1)*(n+1)) n 1 ATPartFrac_true. PartFrac 1/(2*(n+1))-1/(2*(n-1)) 1/((n-1)*(n+1)) n 0 ATPartFrac_ret_expression. Your answer as a single fraction is \\(-\\frac{1}{\\left(n-1\\right)\\cdot \\left(n+1\\right)}\\) PartFrac -9/(x-2) + -9/(x+1) -9/(x-2) + -9/(x+1) x 1 ATPartFrac_true. Addition and Subtraction errors PartFrac 1/(x+1) + 1/(x+2) 2/(x+1) + 1/(x+2) x 0 ATPartFrac_ret_expression. Your answer as a single fraction is \\(\\frac{2\\cdot x+3}{\\left(x+1\\right)\\cdot \\left(x+2\\right)}\\) PartFrac 1/(x+1) + 1/(x+2) 1/(x+1) + 2/(x+2) x 0 ATPartFrac_ret_expression. Your answer as a single fraction is \\(\\frac{2\\cdot x+3}{\\left(x+1\\right)\\cdot \\left(x+2\\right)}\\) Denominator Error PartFrac 1/(x+1) + 1/(x+2) 1/(x+3) + 1/(x+2) x 0 ATPartFrac_ret_expression. Your answer as a single fraction is \\(\\frac{2\\cdot x+3}{\\left(x+1\\right)\\cdot \\left(x+2\\right)}\\) Repeated linear factors in denominator PartFrac (9*y-8)/(y-4)^2 (9*y-8)/(y-4)^2 y 0 ATPartFrac_false_factor. PartFrac 9/(y-4)+28/(y-4)^2 (9*y-8)/(y-4)^2 y 1 ATPartFrac_true. PartFrac (-5/(x+3))+(16/(x+3)^2)-(2/(x+ 2))+4 (-5/(x+3))+(16/(x+3)^2)-(2/(x+ 2))+4 x 1 ATPartFrac_true. PartFrac (3*x^2-5)/((x-4)^2*x) (3*x^2-5)/((x-4)^2*x) x 0 ATPartFrac_false_factor. PartFrac -4/(16*x)+53/(16*(x-4))+43/(4* (x-4)^2) (3*x^2-5)/((x-4)^2*x) x 0 ATPartFrac_ret_expression. Your answer as a single fraction is \\(\\frac{49\\cdot x^2-8\\cdot x-64}{16\\cdot {\\left(x-4\\right)}^2\\cdot x}\\) PartFrac -5/(16*x)+53/(16*(x-4))+43/(4* (x-4)^2) (3*x^2-5)/((x-4)^2*x) x 1 ATPartFrac_true. PartFrac (5*x+6)/((x+1)*(x+5)^2) (5*x+6)/((x+1)*(x+5)^2) x 0 ATPartFrac_false_factor. PartFrac -1/(16*(x+5))+19/(4*(x+5)^2)+1 /(16*(x+1)) (5*x+6)/((x+1)*(x+5)^2) x 1 ATPartFrac_true. PartFrac 5/(x*(x+3)*(5*x-2)) 5/(x*(x+3)*(5*x-2)) x 0 ATPartFrac_false_factor. PartFrac 125/(34*(5*x-2))+5/(51*(x+3))- 5/(6*x) 5/(x*(x+3)*(5*x-2)) x 1 ATPartFrac_true. PartFrac -4/(16*x)+1/(2*(x-1))-1/(8*(x- 1)^2) (3*x^2-5)/((4*x-4)^2*x) x 0 ATPartFrac_ret_expression. Your answer as a single fraction is \\(\\frac{2\\cdot x^2-x-2}{8\\cdot {\\left(x-1\\right)}^2\\cdot x}\\) PartFrac -5/(16*x)+1/(2*(x-1))-1/(8*(x- 1)^2) (3*x^2-5)/((4*x-4)^2*x) x 1 ATPartFrac_true. Irreducible quadratic in denominator PartFrac 1/(x-1)-(x+1)/(x^2+1) 2/((x-1)*(x^2+1)) x 1 ATPartFrac_true. PartFrac 1/(2*x-2)-(x+1)/(2*(x^2+1)) 1/((x-1)*(x^2+1)) x 1 ATPartFrac_true. PartFrac 1/(2*(x-1))+x/(2*(x^2+1)) 1/((x-1)*(x^2+1)) x 0 ATPartFrac_ret_expression. Your answer as a single fraction is \\(\\frac{2\\cdot x^2-x+1}{2\\cdot \\left(x-1\\right)\\cdot \\left(x^2+1 \\right)}\\) PartFrac (2*x+1)/(x^2+1)-2/(x-1) (2*x+1)/(x^2+1)-2/(x-1) x 1 ATPartFrac_true. 2 answers to the same question PartFrac 3/(x+1) + 3/(x+2) 3*(2*x+3)/((x+1)*(x+2)) x 1 ATPartFrac_true. PartFrac 3*(1/(x+1) + 1/(x+2)) 3*(2*x+3)/((x+1)*(x+2)) x 1 ATPartFrac_true. Algebraically equivalent, but numerators of same order than denominator, i.e. not in partial fraction form. PartFrac 3*x*(1/(x+1) + 2/(x+2)) -12/(x+2)-3/(x+1)+9 x 0 ATPartFrac_false_factor. PartFrac (3*x+3)*(1/(x+1) + 2/(x+2)) 9-6/(x+2) x 0 ATPartFrac_false_factor. PartFrac n/(2*n-1)-(n+1)/(2*n+1) 1/(4*n-2)-1/(4*n+2) n 0 ATPartFrac_false_factor. Correct Answer, Numerator > Denominator PartFrac 10/(x+3) - 2/(x+2) + x -2 (x^3 + 3*x^2 + 4*x +2)/((x+2)* (x+3)) x 1 ATPartFrac_true. PartFrac 2*x+1/(x+1)+1/(x-1) 2*x^3/(x^2-1) x 1 ATPartFrac_true. Simple mistakes PartFrac 1/(n*(n-1)) 1/(n*(n-1)) n 0 ATPartFrac_false_factor. PartFrac ((1-x)^4*x^4)/(x^2+1) ((1-x)^4*x^4)/(x^2+1) x 0 ATPartFrac_false_factor. PartFrac 1/(n-1)-1/n^2 1/((n+1)*n) n 0 ATPartFrac_denom_ret. If your answer is written as a single fraction then the denominator would be \\(\\left(n-1\\right)\\cdot n^2\\) . In fact, it should be \\(n\\cdot \\left(n+1\\right)\\) . PartFrac 1/(n-1)-1/n 1/(n-1)+1/n n 0 ATPartFrac_ret_expression. Your answer as a single fraction is \\(\\frac{1}{\\left(n-1\\right)\\cdot n}\\) PartFrac 1/(x+1)-1/x 1/(x-1)+1/x x 0 ATPartFrac_ret_expression. Your answer as a single fraction is \\(-\\frac{1}{x\\cdot \\left(x+1\\right)}\\) PartFrac 1/(n*(n+1))+1/n 2/n-1/(n+1) n 0 ATPartFrac_false_factor. Too many parts in the partial fraction PartFrac s/((s+1)^2) + s/(s+2) - 1/(s+1 ) s/((s+1)*(s+2)) s 0 ATPartFrac_denom_ret. If your answer is written as a single fraction then the denominator would be \\({\\left(s+1\\right)}^2\\cdot \\left(s+2\\right)\\) . In fact, it should be \\(\\left(s+1\\right)\\cdot \\left(s+2\\right)\\) . Too few parts in the partial fraction PartFrac s/(s+2) - 1/(s+1) s/((s+1)*(s+2)*(s+3)) s 0 ATPartFrac_denom_ret. If your answer is written as a single fraction then the denominator would be \\(\\left(s+1\\right)\\cdot \\left(s+2\\right)\\) . In fact, it should be \\(\\left(s+1\\right)\\cdot \\left(s+2\\right)\\cdot \\left(s+3\\right)\\) . PartFrac (3*x^2-5)/((4*x-4)^2*x) (3*x^2-5)/((4*x-4)^2*x) x 0 ATPartFrac_false_factor.","title":"PartFrac: Answer test results"},{"location":"Authoring/Answer_Tests/Results/PartFrac/#partfrac-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"PartFrac: Answer test results"},{"location":"Authoring/Answer_Tests/Results/PropLogic/","text":"PropLogic: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. PropLogic Test ? Student response Teacher answer Opt Mark Answer note PropLogic 1/0 0 -1 ATPropLogic_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. PropLogic 0 1/0 -1 ATPropLogic_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. PropLogic true true 1 PropLogic true false 0 PropLogic A implies B not(A) or B 1 PropLogic (a and b and c) xor (a and b) xor (a and c) xor a xor true (a implies b) or c 1","title":"PropLogic: Answer test results"},{"location":"Authoring/Answer_Tests/Results/PropLogic/#proplogic-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"PropLogic: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SRegExp/","text":"SRegExp: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. SRegExp Test ? Student response Teacher answer Opt Mark Answer note SRegExp 1/0 \"hello\" -1 ATSRegExp_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. SRegExp \"1/0\" 1/0 -1 ATSRegExp_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. SRegExp Hello hello -1 ATSRegExp_SB_not_string. The second argument to the SRegExp answer test must be a string. The test failed. Please contact your teacher. SRegExp Hello \"hello\" -1 ATSRegExp_SA_not_string. The first argument to the SRegExp answer test must be a string. The test failed. Please contact your teacher. SRegExp \"aaaaabbb\" \"(aaa)*b\" 1 ATSRegExp: [\"aaab\",\"aaa\"]. SRegExp \"aab\" \"(aaa)*b\" 1 ATSRegExp: [\"b\",false]. SRegExp \"aaac\" \"(aaa)*b\" 0 Anchor pattern to the start and the end of the string SRegExp \"aab\" \"^[aA]*b$\" 1 ATSRegExp: [\"aab\"]. SRegExp \"aab\" \"^(aaa)*b$\" 0 SRegExp \"aAb\" \"^[aA]*b$\" 1 ATSRegExp: [\"aAb\"]. SRegExp \" aAb\" \"^[aA]*b$\" 0 Case insensitive SRegExp \"caAb\" \"(?i:a*b)\" 1 ATSRegExp: [\"aAb\"]. Options SRegExp \"Alice went to the market \" \"(Alice|Bob) went to the (bank|market)\" 1 ATSRegExp: [\"Alice went to the market\",\"Alice\",\"market\"]. SRegExp \"Malice went to the shop& quot; \"(Alice|Bob) went to the (bank|market)\" 0 Whitespace, note test rendering issue, the test string has additional spaces and tabs as does the result SRegExp \"Alice went to th e market\" \"(Alice|Bob)\\\\s+went\\\\s+t o\\\\s+the\\\\s+(bank|market)\" ; 1 ATSRegExp: [\"Alice went to the market\",\"Alice\",\"market\"]. SRegExp \"Alice went to th emarket\" \"(Alice|Bob)\\\\s+went\\\\s+t o\\\\s+the\\\\s+(bank|market)\" ; 0 Escaping patterns, note the function that does it SRegExp \"x^2.2\" \"x\\\\^2\\\\.2\" 1 ATSRegExp: [\"x^2.2\"]. SRegExp \"x^2+sin(x)\" sconcat(string_to_regex(\" sin(x)\"),\"$\") 1 ATSRegExp: [\"sin(x)\"]. SRegExp \"sin(x)+x^2\" sconcat(string_to_regex(\" sin(x)\"),\"$\") 0","title":"SRegExp: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SRegExp/#sregexp-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"SRegExp: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SameType/","text":"SameType: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. SameType Test ? Student response Teacher answer Opt Mark Answer note SameType 1/0 1 -1 ATSameType_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. SameType 1 1/0 -1 ATSameType_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. Numbers SameType 4^(-1/2) 1/2 1 Lists SameType x [1,2,3] 0 SameType [1,2] [1,2,3] 1 SameType [1,x>2] [1,2<x] 1 SameType [1,x,3] [1,2<x,4] 0 Sets SameType x {1,2,3} 0 SameType {1,2} {1,2,3} 1 Matrices SameType matrix([1,2],[2,3]) matrix([1,2],[2,3]) 1 SameType [[1,2],[2,3]] matrix([1,2],[2,3]) 0 SameType matrix([1,2],[2,3]) matrix([1,2,3],[2,3,3]) 1 SameType matrix([x>4,{1,x^2}],[[1,2] ,[1,3]]) matrix([4-x<0,{x^2, 1}],[[1 ,2],[1,3]]) 1 SameType matrix([x>4,[1,x^2]],[[1,2] ,[1,3]]) matrix([4-x<0,{x^2, 1}],[[1 ,2],[1,4]]) 0 Equations SameType 1 x=1 0 SameType x=1 x=1 1 Inequalities SameType 1 x>1 0 SameType x>2 x>1 1 SameType x>1 x>=1 1 SameType x>1 and x<3 x>=1 1 SameType {x>1,x<3} x>=1 0 SameType sqrt(2)*sqrt(3)+2*(sqrt(2/3))* x-(2/3)*(sqrt(2/3))*x^2+(4/9)* (sqrt(2/3))*x^3 4*sqrt(6)*x^3/27-(2*sqrt(6)*x^ 2)/9+(2*sqrt(6)*x)/3+sqrt(6) 1","title":"SameType: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SameType/#sametype-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"SameType: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Sets/","text":"Sets: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. Sets Test ? Student response Teacher answer Opt Mark Answer note Sets {1/0} {0} -1 ATSets_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. Sets {0} {1/0} -1 ATSets_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. Sets x {1,2,3} 0 ATSets_SA_not_set. Your answer should be a set, but is not. Note that the syntax to enter a set is to enclose the comma separated values with curly brackets. Sets {1,2} x 0 ATSets_SB_not_set. The \"Sets\" answer test expects its second argument to be a set. This is an error. Please contact your teacher. Sets {1,2} {1,2,3} 0 ATSets_missingentries. The following are missing from your set. \\[\\left \\{3 \\right \\}\\] Sets {1,2,4} {1,2} 0 ATSets_wrongentries. These entries should not be elements of your set. \\[\\left \\{4 \\right \\}\\] Sets {1,2,2+2} {1,2} 0 ATSets_wrongentries. These entries should not be elements of your set. \\[\\left \\{4 \\right \\}\\] Sets {5,1,2,4} {1,2,3} 0 ATSets_wrongentries. ATSets_missingentries. These entries should not be elements of your set. \\[\\left \\{4 , 5 \\right \\}\\] The following are missing from your set. \\[\\left \\{3 \\right \\}\\] Sets {2/4, 1/3} {1/2, 1/3} 1 Duplicate entries Sets {1,2,1} {1,2} 1 ATSets_duplicates. Your set appears to contain duplicate entries! Sets {1,2,1+1} {1,2} 1 ATSets_duplicates. Your set appears to contain duplicate entries! Sets {1,2,1+1} {1,2,3} 0 ATSets_duplicates. ATSets_missingentries. Your set appears to contain duplicate entries! The following are missing from your set. \\[\\left \\{3 \\right \\}\\] Sets {(x-a)^6000} {(a-x)^6000} 0 ATSets_wrongentries. ATSets_missingentries. These entries should not be elements of your set. \\[\\left \\{{\\left(x-a\\right)}^{6000} \\right \\}\\] The following are missing from your set. \\[\\left \\{{\\left(a-x\\right)}^{6000} \\right \\}\\]","title":"Sets: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Sets/#sets-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"Sets: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SigFigsStrict/","text":"SigFigsStrict: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. SigFigsStrict Test ? Student response Teacher answer Opt Mark Answer note Basic tests SigFigsStrict 3.141 null -1 STACKERROR_OPTION. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Missing option when executing the test. SigFigsStrict 3.141 null x^2 -1 STACKERROR_OPTION. SigFigsStrict 3.141 null -2 -1 STACKERROR_OPTION. SigFigsStrict 3.141 null 0 -1 STACKERROR_OPTION. SigFigsStrict 0.0010 null 1 0 SigFigsStrict 0.0010 null 2 1 SigFigsStrict 0.0010 null 3 0 SigFigsStrict 0.00100 null 2 0 SigFigsStrict 0.00100 null 3 1 SigFigsStrict 0.00100 null 4 0 SigFigsStrict 0.001 null 1 1 SigFigsStrict 0.001 null 2 0 SigFigsStrict 100 null 1 1 SigFigsStrict 100 null 2 0 ATSigFigsStrict_WithinRange. SigFigsStrict 100 null 3 0 ATSigFigsStrict_WithinRange. SigFigsStrict 100 null 4 0 SigFigsStrict 100. null 1 0 SigFigsStrict 100. null 2 0 SigFigsStrict 100. null 3 1 SigFigsStrict 100. null 4 0 SigFigsStrict 123. null 1 0 SigFigsStrict 123. null 2 0 SigFigsStrict 123. null 3 1 SigFigsStrict 123. null 4 0 SigFigsStrict 1.00e2 null 1 0 SigFigsStrict 1.00e2 null 2 0 SigFigsStrict 1.00e2 null 3 1 SigFigsStrict 1.00e2 null 4 0 SigFigsStrict 10.0 null 2 0 SigFigsStrict 10.0 null 3 1 SigFigsStrict 10.0 null 4 0 SigFigsStrict 0 null 1 1 SigFigsStrict 0 null 2 0 SigFigsStrict 0.0 null 1 1 SigFigsStrict 0.0 null 2 0 SigFigsStrict .0 null 1 1 SigFigsStrict .0 null 2 0 SigFigsStrict .001030 null 4 1 SigFigsStrict 0.00 null 1 0 SigFigsStrict 0.00 null 2 1 SigFigsStrict 0.00 null 3 0 SigFigsStrict 25.00e1 null 1 0 SigFigsStrict 25.00e1 null 3 0 SigFigsStrict 25.00e1 null 4 1 SigFigsStrict 25.00e1 null 5 0 SigFigsStrict 15.1 15.1 3 1 SigFigsStrict 15.10 15.1 3 0 SigFigsStrict 15.100 15.1 3 0 Units are ignored SigFigsStrict 9.81*m/s^2 null 3 1","title":"SigFigsStrict: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SigFigsStrict/#sigfigsstrict-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"SigFigsStrict: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SingleFrac/","text":"SingleFrac: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. SingleFrac Test ? Student response Teacher answer Opt Mark Answer note SingleFrac 1/0 1/n -1 ATSingleFrac_STACKERROR_SAns. SingleFrac 0 1/0 -1 ATSingleFrac_STACKERROR_TAns. SingleFrac x=3 2 0 ATSingleFrac_SA_not_expression. Your answer should be an expression, not an equation, inequality, list, set or matrix. SingleFrac 3 3 1 SingleFrac 3 2 0 ATSingleFrac_ret_exp. Your answer is not algebraically equivalent to the correct answer. You must have done something wrong. SingleFrac 1/m 1/n 0 ATSingleFrac_true. ATSingleFrac_ret_exp. Your answer is not algebraically equivalent to the correct answer. You must have done something wrong. SingleFrac 1/n 1/n 1 ATSingleFrac_true. SingleFrac a+1/2 (2*a+1)/2 0 ATSingleFrac_part. Your answer needs to be a single fraction of the form \\( {a}\\over{b} \\) . SingleFrac a+1/2 (2*a+1)/2 0 ATSingleFrac_part. Your answer needs to be a single fraction of the form \\( {a}\\over{b} \\) . SingleFrac 4/(x^2+2*x-24)+2/(x^2+4*x-12) (6*x-16)/(x^3-28*x+48) 0 ATSingleFrac_part. Your answer needs to be a single fraction of the form \\( {a}\\over{b} \\) . 2 subtly different answers for the same question SingleFrac 2*(1/n) 2/n 0 ATSingleFrac_part. Your answer needs to be a single fraction of the form \\( {a}\\over{b} \\) . SingleFrac 2/n 2/n 1 ATSingleFrac_true. Simple Mistakes SingleFrac 2/(n+1) 1/(n+1) 0 ATSingleFrac_true. ATSingleFrac_ret_exp. Your answer is not algebraically equivalent to the correct answer. You must have done something wrong. SingleFrac (2*n+1)/(n+2) 1/n 0 ATSingleFrac_true. ATSingleFrac_ret_exp. Your answer is not algebraically equivalent to the correct answer. You must have done something wrong. SingleFrac (2*n)/(n*(n+2)) (2*n)/(n*(n+3)) 0 ATSingleFrac_true. ATSingleFrac_ret_exp. Your answer is not algebraically equivalent to the correct answer. You must have done something wrong. SingleFrac (x-1)/(x^2-1) 1/(x+1) 1 ATSingleFrac_true. Fractions within fractions SingleFrac (1/2)/(3/4) 2/3 0 ATSingleFrac_div. Your answer contains fractions within fractions. You need to clear these and write your answer as a single fraction. SingleFrac (x-2)/4/(2/x^2) (x-2)*x^2/8 0 ATSingleFrac_div. Your answer contains fractions within fractions. You need to clear these and write your answer as a single fraction. SingleFrac 1/(1-1/x) x/(x-1) 0 ATSingleFrac_div. Your answer contains fractions within fractions. You need to clear these and write your answer as a single fraction. SingleFrac (1+1/a)/a (1+a)/a^2 0 ATSingleFrac_div. Your answer contains fractions within fractions. You need to clear these and write your answer as a single fraction. SingleFrac a/(1+1/a) a^2/(1+a) 0 ATSingleFrac_div. Your answer contains fractions within fractions. You need to clear these and write your answer as a single fraction. SingleFrac (1+2*b/a)/c (a+2*b)/(a*c) 0 ATSingleFrac_div. Your answer contains fractions within fractions. You need to clear these and write your answer as a single fraction. SingleFrac c/(1+2*b/a) a*c/(a+2*b) 0 ATSingleFrac_div. Your answer contains fractions within fractions. You need to clear these and write your answer as a single fraction. SingleFrac a*c/(a+2*b) a*c/(a+2*b) 1 ATSingleFrac_true. Negative cases SingleFrac -1/2 -1/2 1 ATSingleFrac_true. SingleFrac -1/2 -1/3 0 ATSingleFrac_true. ATSingleFrac_ret_exp. Your answer is not algebraically equivalent to the correct answer. You must have done something wrong. SingleFrac -(1/2) -1/2 1 ATSingleFrac_true. SingleFrac -a/b -a/b 1 ATSingleFrac_true. SingleFrac (-a)/b -a/b 1 ATSingleFrac_true. SingleFrac a/(-b) -a/b 1 ATSingleFrac_true. SingleFrac -(a/b) -a/b 1 ATSingleFrac_true. SingleFrac -(1/(n-1)) 1/(1-n) 1 ATSingleFrac_true. SingleFrac a/(-1-1/a) -a^2/(1+a) 0 ATSingleFrac_div. Your answer contains fractions within fractions. You need to clear these and write your answer as a single fraction. Surds in answers SingleFrac ((sqrt(5))^3 +6)/15 ((sqrt(5))^3 +6)/15 1 ATSingleFrac_true. SingleFrac 1/(1-sqrt(2)) 1/(1-sqrt(2)) 1 ATSingleFrac_true. SingleFrac ((sqrt(5))^3+6)/15 ((sqrt(5))^3+6)/15 1 ATSingleFrac_true. SingleFrac (5^(3/2)+6)/15 ((sqrt(5))^3+6)/15 1 ATSingleFrac_true.","title":"SingleFrac: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SingleFrac/#singlefrac-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"SingleFrac: Answer test results"},{"location":"Authoring/Answer_Tests/Results/String/","text":"String: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. String Test ? Student response Teacher answer Opt Mark Answer note String \"With spaces\" \"With spaces\" 1 String \"Without spaces\" \"Withoutspaces\" 0 String Hello hello 0 String hello hello 1 String hello heloo 0 This test works on expressions as well as strings String sin(x^2) \"sin(x^2)\" 1","title":"String: Answer test results"},{"location":"Authoring/Answer_Tests/Results/String/#string-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"String: Answer test results"},{"location":"Authoring/Answer_Tests/Results/StringSloppy/","text":"StringSloppy: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. StringSloppy Test ? Student response Teacher answer Opt Mark Answer note StringSloppy \"hello\" \"hello\" 1 StringSloppy \"hello\" \"heloo\" 0 StringSloppy \"hel lo\" \"hello\" 1 StringSloppy \"hel lo\" \"Hel*lo\" 0","title":"StringSloppy: Answer test results"},{"location":"Authoring/Answer_Tests/Results/StringSloppy/#stringsloppy-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"StringSloppy: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SubstEquiv/","text":"SubstEquiv: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. SubstEquiv Test ? Student response Teacher answer Opt Mark Answer note SubstEquiv 1/0 x^2-2*x+1 -1 ATSubstEquiv_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. SubstEquiv x^2 x^2-2*x+1 [1/0] -1 ATSubstEquiv_STACKERROR_Opt. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. SubstEquiv x^2 x^2-2*x+1 x -1 ATSubstEquiv_Opt_List. The option to this answer test must be a list. This is an error. Please contact your teacher. SubstEquiv x^2+1 x^2+1 1 SubstEquiv x^2+1 x^3+1 0 SubstEquiv x^2+1 x^3+1 0 SubstEquiv X^2+1 x^2+1 1 ATSubstEquiv_Subst [X = x]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ X=x \\right] \\] SubstEquiv x^2+y a^2+b 1 ATSubstEquiv_Subst [x = a,y = b]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ x=a , y=b \\right] \\] SubstEquiv x^2+y/z a^2+c/b 1 ATSubstEquiv_Subst [x = a,y = c,z = b]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ x=a , y=c , z=b \\right] \\] SubstEquiv y=x^2 a^2=b 1 ATSubstEquiv_Subst [x = a,y = b]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ x=a , y=b \\right] \\] SubstEquiv {x=1,y=2} {x=2,y=1} 1 ATSubstEquiv_Subst [x = y,y = x]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ x=y , y=x \\right] \\] Where a variable is also a function name. SubstEquiv cos(a*x)/(x*(ln(x))) cos(a*y)/(y*(ln(y))) 1 ATSubstEquiv_Subst [a = a,x = y]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ a=a , x=y \\right] \\] SubstEquiv cos(a*x)/(x*(ln(x))) cos(x*a)/(a*(ln(a))) 1 ATSubstEquiv_Subst [a = x,x = a]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ a=x , x=a \\right] \\] SubstEquiv cos(a*x)/(x*(ln(x))) cos(a*x)/(x(ln(x))) 0 SubstEquiv cos(a*x)/(x*(ln(x))) cos(a*y)/(y(ln(y))) 0 SubstEquiv x+1>y y+1>x 1 ATSubstEquiv_Subst [x = y,y = x]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ x=y , y=x \\right] \\] SubstEquiv x+1>y x<y+1 1 ATSubstEquiv_Subst [x = y,y = x]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ x=y , y=x \\right] \\] Matrices SubstEquiv matrix([1,A^2+A+1],[2,0]) matrix([1,x^2+x+1],[2,0]) 1 ATSubstEquiv_Subst [A = x]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=x \\right] \\] SubstEquiv matrix([B,A^2+A+1],[2,C]) matrix([y,x^2+x+1],[2,z]) 1 ATSubstEquiv_Subst [A = x,B = y,C = z]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=x , B=y , C=z \\right] \\] SubstEquiv matrix([B,A^2+A+1],[2,C]) matrix([y,x^2+x+1],[2,x]) 0 ATMatrix_wrongentries. The entries underlined in red below are those that are incorrect. \\[ \\left[\\begin{array}{cc} {\\color{red}{\\underline{B}}} & {\\color{red}{\\underline{A^2+A+1}}} \\\\ 2 & {\\color{red}{\\underline{C}}} \\end{array}\\right]\\] Lists SubstEquiv [x^2+1,x^2] [A^2+1,A^2] 1 ATSubstEquiv_Subst [x = A]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ x=A \\right] \\] SubstEquiv [x^2-1,x^2] [A^2+1,A^2] 0 (ATList_wrongentries 1, 2). The entries underlined in red below are those that are incorrect. \\[\\left[ {\\color{red}{\\underline{x^2-1}}} , {\\color{red}{\\underline{x ^2}}} \\right] \\] SubstEquiv [A,B,C] [B,C,A] 1 ATSubstEquiv_Subst [A = B,B = C,C = A]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=B , B=C , C=A \\right] \\] SubstEquiv [A,B,C] [B,B,A] 0 (ATList_wrongentries 1, 3). The entries underlined in red below are those that are incorrect. \\[\\left[ {\\color{red}{\\underline{A}}} , B , {\\color{red}{\\underline{C }}} \\right] \\] SubstEquiv [1,[A,B],C] [1,[a,b],C] 1 ATSubstEquiv_Subst [A = a,B = b,C = C]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=a , B=b , C=C \\right] \\] Sets SubstEquiv {x^2+1,x^2} {A^2+1,A^2} 1 ATSubstEquiv_Subst [x = A]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ x=A \\right] \\] SubstEquiv {x^2-1,x^2} {A^2+1,A^2} 0 ATSet_wrongentries. The following entries are incorrect, although they may appear in a simplified form from that which you actually entered. \\[\\left \\{x^2-1 , x^2 \\right \\}\\] SubstEquiv {A+1,B^2,C} {B,C+1,A^2} 1 ATSubstEquiv_Subst [A = C,B = A,C = B]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=C , B=A , C=B \\right] \\] SubstEquiv {1,{A,B},C} {1,{a,b},C} 1 ATSubstEquiv_Subst [A = a,B = b,C = C]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=a , B=b , C=C \\right] \\] SubstEquiv y=A+B x=a+b [x] 0 ATEquation_default SubstEquiv y=A+B x=a+b [z] 1 ATSubstEquiv_Subst [A = a,B = b,y = x]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=a , B=b , y=x \\right] \\] SubstEquiv A*cos(t)+B*sin(t) P*cos(t)+Q*sin(t) 1 ATSubstEquiv_Subst [A = P,B = Q,t = t]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=P , B=Q , t=t \\right] \\] SubstEquiv A*cos(t)+B*sin(t) P*cos(x)+Q*sin(x) 1 ATSubstEquiv_Subst [A = P,B = Q,t = x]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=P , B=Q , t=x \\right] \\] Fix some variables. SubstEquiv A*cos(x)+B*sin(x) P*cos(x)+Q*sin(x) [x] 1 ATSubstEquiv_Subst [A = P,B = Q]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=P , B=Q \\right] \\] SubstEquiv A*cos(t)+B*sin(t) P*cos(x)+Q*sin(x) [x] 0 SubstEquiv A*cos(t)+B*sin(t) P*cos(x)+Q*sin(x) [t] 0 SubstEquiv A*cos(t)+B*sin(t) P*cos(x)+Q*sin(x) [z] 1 ATSubstEquiv_Subst [A = P,B = Q,t = x]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=P , B=Q , t=x \\right] \\] SubstEquiv A*cos(t)*e^x+B*sin(t)*e^x+C*si n(2*x)+D*cos(2*x) P*cos(t)*e^x+Q*sin(t)*e^x+R*si n(2*x)+S*cos(2*x) [x,t] 1 ATSubstEquiv_Subst [A = P,B = Q,C = R,D = S]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ A=P , B=Q , C=R , D=S \\right] \\] SubstEquiv sqrt(2*g*y) sqrt(2*g*x) 1 ATSubstEquiv_Subst [g = g,y = x]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ g=g , y=x \\right] \\] SubstEquiv sqrt(2*g*y) sqrt(2*g*x) [g] 1 ATSubstEquiv_Subst [y = x]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ y=x \\right] \\] SubstEquiv C1*%e^x*sin(4*x)+C2*%e^x*cos(4 *x)+C4*x*%e^-x+C3*%e^-x e^(x)*A*cos(4*x)+B*e^(x)*sin(4 *x)+C*e^(-x)+D*x*e^(-x) [x] 1 ATSubstEquiv_Subst [C1 = B,C2 = A,C3 = C,C4 = D]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ C_{1}=B , C_{2}=A , C_{3}=C , C_{4}=D \\right] \\] SubstEquiv C1*%e^x*sin(4*x)+C2*%e^x*cos(4 *x)+C4*x*%e^-x+C3*%e^-x C4*x*e^(-x)+e^(x)*C1*cos(4*x)+ C2*e^(x)*sin(4*x)+C3*e^(-x) [x] 1 ATSubstEquiv_Subst [C1 = C2,C2 = C1,C3 = C3,C4 = C4]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ C_{1}=C_{2} , C_{2}=C_{1} , C_{3}=C_{3} , C_{4}=C_{4} \\right] \\] SubstEquiv C1*%e^x*sin(4*x)+C2*%e^x*cos(4 *x)+C4*x*%e^-x+C3*%e^-x A*x*e^(-x)+e^(x)*B*cos(4*x)+C* e^(x)*sin(4*x)+D*e^(-x) [x] 1 ATSubstEquiv_Subst [C1 = C,C2 = B,C3 = D,C4 = A]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ C_{1}=C , C_{2}=B , C_{3}=D , C_{4}=A \\right] \\] SubstEquiv C1*%e^x*sin(4*x)+C2*%e^x*cos(4 *x)+C4*x*%e^-x+C3*%e^-x e^(x)*C1*cos(4*x)+C2*e^(x)*sin (4*x)+C3*e^(-x)+C4*x*e^(-x) [x] 1 ATSubstEquiv_Subst [C1 = C2,C2 = C1,C3 = C3,C4 = C4]. Your answer would be correct if you used the following substitution of variables. \\[\\left[ C_{1}=C_{2} , C_{2}=C_{1} , C_{3}=C_{3} , C_{4}=C_{4} \\right] \\]","title":"SubstEquiv: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SubstEquiv/#substequiv-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"SubstEquiv: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SysEquiv/","text":"SysEquiv: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. SysEquiv Test ? Student response Teacher answer Opt Mark Answer note Basic tests SysEquiv 1/0 [(x-1)*(x+1)=0] -1 ATSysEquiv_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. SysEquiv [(x-1)*(x+1)=0] 1/0 -1 ATSysEquiv_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. SysEquiv 1 [(x-1)*(x+1)=0] 0 ATSysEquiv_SA_not_list. Your answer should be a list, but it is not! SysEquiv [(x-1)*(x+1)=0] 1 0 ATSysEquiv_SB_not_list. The teacher's answer is not a list. Please contact your teacher. SysEquiv [1] [90=v*t,90=(v+5)*(t-1/4)] 0 ATSysEquiv_SA_not_eq_list. Your answer should be a list of equations, but it is not! SysEquiv [(x-1)*(x+1)=0] [1] 0 ATSysEquiv_SB_not_eq_list. The teacher's answer is not a list of equations, but should be. SysEquiv [x^2] [(x-1)*(x+1)=0] 0 ATSysEquiv_SA_not_eq_list. Your answer should be a list of equations, but it is not! SysEquiv [90=v*t^t,90=(v+5)*(t-1/4)] [90=v*t,90=(v+5)*(t-1/4)] 0 ATSysEquiv_SA_not_poly_eq_list. One or more of your equations is not a polynomial! SysEquiv [90=v*t,90=(v+5)*(t-1/4)] [90=v*t^t,90=(v+5)*(t-1/4)] 0 ATSysEquiv_SB_not_poly_eq_list. The Teacher's answer should be a list of polynomial equations, but is not. Please contact your teacher. Tests of equivalence SysEquiv [x^2=1] [(x-1)*(x+1)=0] 1 SysEquiv [x^2+y^2=4,y=x] [y=x,y^2=2] 1 SysEquiv [x^2+y^2=2,y=x] [y=x,y^2=2] 0 ATSysEquiv_SA_system_overdetermined. The entries underlined in red below are those that are incorrect. \\[\\left[ {\\color{red}{\\underline{y^2+x^2=2}}} , y=x \\right] \\] SysEquiv [x=1] [(x-1)*(x+1)=0,(x-1)*(x-3)=0] 1 ATSysEquiv_SA_Completely_solved. SysEquiv [3*a+b-c=2, a-b+2*c=5,b+c=5] [a=1,b=2,c=3] 1 SysEquiv [a=1,b=2,c=3] [3*a+b-c=2, a-b+2*c=5,b+c=5] 1 ATSysEquiv_SA_Completely_solved. SysEquiv [x^2=1] [(x-1)*(x+1)*(x-2)=0] 0 ATSysEquiv_SA_system_overdetermined. The entries underlined in red below are those that are incorrect. \\[\\left[ {\\color{red}{\\underline{x^2=1}}} \\right] \\] SysEquiv [x=1,y=-1] [(x-1)*(y+1)=0] 0 ATSysEquiv_SA_Not_completely_solved. SysEquiv [x=1] [(x-1)*(x+1)=0] 0 ATSysEquiv_SA_Not_completely_solved. SysEquiv [x=1] [(x-1)*(x+1)*y=0] 0 ATSysEquiv_SA_Not_completely_solved. SysEquiv [90=v*t,90=(v+5)*(t-1/4)] [90=v*t,90=(v+5)*(t-1/4)] 1 SysEquiv [90=v*t,90=(v+5)*(t*x-1/4)] [90=v*t,90=(v+5)*(t-1/4)] 0 ATSysEquiv_SA_extra_variables. Your answer includes too many variables! SysEquiv [90=v*t,90=(v+5)*(t-1/4)] [90=v*t,90=(v+5)*(t*x-1/4)] 0 ATSysEquiv_SA_missing_variables. Your answer is missing one or more variables! SysEquiv [90=v*t] [90=v*t,90=(v+5)*(t-1/4)] 0 ATSysEquiv_SA_system_underdetermined. The equations in your system appear to be correct, but you need others besides. SysEquiv [90=v*t,90=(v+5)*(t-1/4),90=(v +6)*(t-1/5)] [90=v*t,90=(v+5)*(t-1/4)] 0 ATSysEquiv_SA_system_overdetermined. The entries underlined in red below are those that are incorrect. \\[\\left[ 90=t\\cdot v , 90=\\left(t-\\frac{1}{4}\\right)\\cdot \\left(v+5 \\right) , {\\color{red}{\\underline{90=\\left(t-\\frac{1}{5}\\right) \\cdot \\left(v+6\\right)}}} \\right] \\] SysEquiv [90=v*t,90=(v+5)*(t-1/4),90=(v +6)*(t-1/5),90=(v+7)*(t-1/4),9 0=(v+8)*(t-1/3)] [90=v*t,90=(v+5)*(t-1/4)] 0 ATSysEquiv_SA_system_overdetermined. The entries underlined in red below are those that are incorrect. \\[\\left[ 90=t\\cdot v , 90=\\left(t-\\frac{1}{4}\\right)\\cdot \\left(v+5 \\right) , {\\color{red}{\\underline{90=\\left(t-\\frac{1}{5}\\right) \\cdot \\left(v+6\\right)}}} , {\\color{red}{\\underline{90=\\left(t- \\frac{1}{4}\\right)\\cdot \\left(v+7\\right)}}} , {\\color{red} {\\underline{90=\\left(t-\\frac{1}{3}\\right)\\cdot \\left(v+8\\right)}}} \\right] \\] Wrong variables SysEquiv [b^2=a,a=9] [x^2=y,y=9] 0 ATSysEquiv_SA_wrong_variables. Your answer uses the wrong variables! SysEquiv [x^2=4] [x^2=4,y=9] 0 ATSysEquiv_SA_missing_variables. Your answer is missing one or more variables! SysEquiv [d=90,d=v*t,d=(v+5)*(t-1/4)] [90=v*t,90=(v+5)*(t-1/4)] 0 ATSysEquiv_SA_extra_variables. Your answer includes too many variables! SysEquiv stack_eval_assignments([d=90,d =v*t,d=(v+5)*(t-1/4)]) [90=v*t,90=(v+5)*(t-1/4)] 1","title":"SysEquiv: Answer test results"},{"location":"Authoring/Answer_Tests/Results/SysEquiv/#sysequiv-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"SysEquiv: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Units/","text":"Units: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. Units Test ? Student response Teacher answer Opt Mark Answer note Units 1/0 1 2 -1 ATUnits_STACKERROR_SAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. Units 1 1/0 2 -1 ATUnits_STACKERROR_TAns. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. Units 1 1 1/0 -1 ATUnits_STACKERROR_Opt. TEST_FAILED The answer test failed to execute correctly: please alert your teacher. Division by zero. Units x-1)^2 (x-1)^2 2 -1 ATUnitsTEST_FAILED-Empty SA. The answer test failed to execute correctly: please alert your teacher. Attempted to execute an answer test with an empty student answer, probably a CAS validation problem when authoring the question. Units 12.3*m*s^(-1) 3*m [3,x] -1 ATNumSigFigs_STACKERROR_not_integer. The answer test failed to execute correctly: please alert your teacher. Units 3*m*s^(-1) 3*m [1,2,3] -1 ATNumSigFigs_STACKERROR_list_wrong_length. The answer test failed to execute correctly: please alert your teacher. Units 12.3*m*s^(-1) {12.3*m*s^(-1)} 3 -1 ATUnits_TA_not_expression. The answer test failed to execute correctly: please alert your teacher. Units x=12.3*m*s^(-1) 12.3*m*s^(-1) 3 0 ATUnits_SA_not_expression. Your answer needs to be a number together with units. Do not use sets, lists, equations or matrices. Missing units Units 12.3 12.3*m 3 0 ATUnits_SA_no_units. Your answer must have units. Units 12 12.3*m 3 0 ATUnits_SA_no_units. Your answer must have units. Units 1/2 12.3*m 3 0 ATUnits_SA_no_units. Your answer must have units. Units e^(1/2) 12.3*m 3 0 ATUnits_SA_no_units. Your answer must have units. Units 9.81*m 12.3 3 -1 ATUnits_SB_no_units. The answer test failed to execute correctly: please alert your teacher. Only units Units m/s 12.3*m/s 3 0 ATUnits_SA_only_units. Your answer needs to be a number together with units. Your answer only has units. Units m 12.3*m/s 3 0 ATUnits_SA_only_units. Your answer needs to be a number together with units. Your answer only has units. Bad units Units 9.81+m/s 9.81*m/s 3 0 ATUnits_SA_bad_units. Your answer must have units, and you must use multiplication to attach the units to a value, e.g. 3.2*m/s . Basic tests Units 12.3*m/s 12.3*m/s 3 1 ATUnits_units_match. Units 12.4*m/s 12.3*m/s 3 0 ATNumSigFigs_Inaccurate. ATUnits_units_match. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Units 12.4*m/s 12.3*m/s [3,2] 1 ATUnits_units_match. Units 12.45*m/s 12.3*m/s [3,2] 0 ATNumSigFigs_WrongDigits. ATUnits_units_match. Your answer contains the wrong number of significant digits. Units 13.45*m/s 12.3*m/s [3,2] 0 ATNumSigFigs_WrongDigits. ATNumSigFigs_Inaccurate. ATUnits_units_match. Your answer contains the wrong number of significant digits. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Units 7.54E-5*(s*M)^-1 5.625E-5*s^-1 [3,2] 0 ATNumSigFigs_VeryInaccurate. ATUnits_incompatible_units. Your units are incompatible with those used by the teacher. Units 7.54E-5*(s*M)^-1 stackunits(5.625E-5,1/s) [3,2] 0 ATNumSigFigs_VeryInaccurate. ATUnits_incompatible_units. Your units are incompatible with those used by the teacher. Units 12*m/s 12.3*m/s 3 0 ATNumSigFigs_WrongDigits. ATNumSigFigs_Inaccurate. ATUnits_units_match. Your answer contains the wrong number of significant digits. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Units -9.81*m/s^2 -9.81*m/s^2 3 1 ATUnits_units_match. Units -9.82*m/s^2 -9.815*m/s^2 3 1 ATUnits_units_match. Units -9.81*m/s^2 -9.815*m/s^2 3 0 ATNumSigFigs_Inaccurate. ATUnits_units_match. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Units -9.81*m*s^(-2) -9.81*m/s^2 3 1 ATUnits_units_match. Units -9.82*m/s^2 -9.81*m/s^2 3 0 ATNumSigFigs_Inaccurate. ATUnits_units_match. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Units -9.81*m*s^(-2) -9.81*m/s^2 3 1 ATUnits_units_match. Units -9.81*m/s/s -9.81*m/s^2 3 1 ATUnits_units_match. Units -9.81*m/s -9.81*m/s^2 3 0 ATUnits_incompatible_units. ATUnits_correct_numerical. Your units are incompatible with those used by the teacher. Please check your units carefully. Units -9.81*m/s -9.81*m/s^2 3 0 ATUnits_incompatible_units. ATUnits_correct_numerical. Your units are incompatible with those used by the teacher. Please check your units carefully. Units (-9.81)*m/s^2 -9.81*m/s^2 3 1 ATUnits_units_match. Units 520*amu 520*amu 3 1 ATNumSigFigs_WithinRange. ATUnits_units_match. Units 520*amu 521*amu 3 0 ATNumSigFigs_WithinRange. ATNumSigFigs_Inaccurate. ATUnits_units_match. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Missing units Units (-9.81) -9.81*m/s^2 3 0 ATUnits_SA_no_units. Your answer must have units. Units 9.81*m/s -9.81*m/s^2 3 0 ATNumSigFigs_WrongSign. ATUnits_incompatible_units. Your answer has the wrong algebraic sign. Your units are incompatible with those used by the teacher. Units 8.81*m/s -9.81*m/s^2 3 0 ATNumSigFigs_WrongSign. ATNumSigFigs_VeryInaccurate. ATUnits_incompatible_units. Your answer has the wrong algebraic sign. Your units are incompatible with those used by the teacher. Units 8.1*m/s -9.81*m/s^2 3 0 ATNumSigFigs_WrongDigits. ATNumSigFigs_WrongSign. ATNumSigFigs_VeryInaccurate. ATUnits_incompatible_units. Your answer contains the wrong number of significant digits. Your answer has the wrong algebraic sign. Your units are incompatible with those used by the teacher. Units m/4 0.25*m 3 0 ATNumSigFigs_WrongDigits. ATUnits_units_match. Your answer contains the wrong number of significant digits. Student is too exact Units pi*s 3.14*s 3 0 ATNumSigFigs_WrongDigits. ATUnits_units_match. Your answer contains the wrong number of significant digits. Units sqrt(2)*m 1.41*m 3 0 ATNumSigFigs_WrongDigits. ATUnits_units_match. Your answer contains the wrong number of significant digits. Different units Units 25*g 0.025*kg 2 1 ATUnits_compatible_units kg. Units 26*g 0.025*kg 2 0 ATNumSigFigs_Inaccurate. ATUnits_compatible_units kg. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Units 100*g 10*kg 2 0 ATNumSigFigs_WithinRange. ATNumSigFigs_VeryInaccurate. ATUnits_compatible_units kg. Units 0.025*g 0.025*kg 2 0 ATUnits_compatible_units kg. ATUnits_correct_numerical. Please check your units carefully. Units 1000*m 1*km 2 1 ATNumSigFigs_WithinRange. ATUnits_compatible_units m. Units 1*Mg/10^6 1*N*s^2/(km) 1 1 ATUnits_compatible_units kg. Units 1*Mg/10^6 1*kN*ns/(mm*Hz) 1 1 ATUnits_compatible_units kg. Units 3.14*Mg/10^6 %pi*kN*ns/(mm*Hz) 3 1 ATUnits_compatible_units kg. Units 3.141*Mg/10^6 %pi*kN*ns/(mm*Hz) 3 0 ATNumSigFigs_WrongDigits. ATUnits_compatible_units kg. Your answer contains the wrong number of significant digits. Units 4.141*Mg/10^6 %pi*kN*ns/(mm*Hz) 3 0 ATNumSigFigs_WrongDigits. ATNumSigFigs_VeryInaccurate. ATUnits_compatible_units kg. Your answer contains the wrong number of significant digits. Units 400*cc 0.4*l 2 1 ATNumSigFigs_WithinRange. ATUnits_compatible_units m^3. Units 400*cm^3 0.4*l 2 1 ATNumSigFigs_WithinRange. ATUnits_compatible_units m^3. Units 400*ml 0.4*l 2 1 ATNumSigFigs_WithinRange. ATUnits_compatible_units m^3. Units 18*kJ 18000.0*J 2 1 ATUnits_compatible_units (kg*m^2)/s^2. Units 18.1*kJ 18000.0*J 2 0 ATNumSigFigs_WrongDigits. ATUnits_compatible_units (kg*m^2)/s^2. Your answer contains the wrong number of significant digits. Units 120*kWh 0.12*MWh 2 1 ATUnits_compatible_units (kg*m^2)/s^2. Units 2.0*hh 720000*s 2 1 ATUnits_compatible_units s. Units 723*kVA 0.723*MVA 3 1 ATUnits_compatible_units VA. Edge case Units 0*m/s 0*m/s 1 1 ATUnits_units_match. Units 0.0*m/s 0*m/s 1 1 ATUnits_units_match. Units 0*m/s 0.0*m/s 1 1 ATUnits_units_match. Units 0.00*m/s 0.0*m/s 2 1 ATUnits_units_match. Units 0.0*km/s 0.0*m/s 1 1 ATUnits_compatible_units m/s. Units 0.0*m 0.0*m/s 1 0 ATUnits_incompatible_units. ATUnits_correct_numerical. Your units are incompatible with those used by the teacher. Please check your units carefully. Units 0.0 0.0*m/s 1 0 ATUnits_SA_no_units. Your answer must have units. Imperial Units 7*in 7*in 1 1 ATUnits_units_match. Units 6*in 0.5*ft 1 1 ATUnits_compatible_units in. Units 2640*ft 0.5*mi 4 1 ATNumSigFigs_WithinRange. ATUnits_compatible_units in. Units 2650*ft 0.5*mi 4 0 ATNumSigFigs_WithinRange. ATNumSigFigs_VeryInaccurate. ATUnits_compatible_units in. TODO Units ! 142.8*C 415.9*K 4 -3 ATNumSigFigs_VeryInaccurate. ATUnits_incompatible_units. Your units are incompatible with those used by the teacher. Units ! 520*mamu 520*mamu 3 -3 ATUnits_SB_no_units. The answer test failed to execute correctly: please alert your teacher. Units -9.82*m/s^2 stackunits(-9.815,m/s^2) 3 1 ATUnits_units_match. Units -9.81*m/s^2 stackunits(-9.815,m/s^2) 3 0 ATNumSigFigs_Inaccurate. ATUnits_units_match. The accuracy of your answer is not correct. Either you have not rounded correctly, or you have rounded an intermediate answer which propagates an error. Units -9.82*m/s^2 stackunits(displaydp(-9.815,3) ,m/s^2) 3 1 ATUnits_units_match. Units -9.82*m/s^2 stackunits(displaysf(-9.815,4) ,m/s^2) 3 1 ATUnits_units_match.","title":"Units: Answer test results"},{"location":"Authoring/Answer_Tests/Results/Units/#units-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"Units: Answer test results"},{"location":"Authoring/Answer_Tests/Results/UnitsAbsolute/","text":"UnitsAbsolute: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. UnitsAbsolute Test ? Student response Teacher answer Opt Mark Answer note UnitsAbsolute -123000*J -123*kJ 5*J 0 ATUnits_SO_wrong_units. The units specified for the numerical tolerance must match the units used for the teacher's answer. This is an internal error with the test. Please ask your teacher about this. UnitsAbsolute 12.3*m/s 12.3*m/s 0.01 1 ATUnits_units_match. UnitsAbsolute 12*m/s 12.3*m/s 0.01 0 ATUnits_units_match. UnitsAbsolute 1.1*Mg/10^6 1.2*kN*ns/(mm*Hz) 0.15 1 ATUnits_compatible_units kg. The following illustrates that we convert to base units to compare. UnitsAbsolute 1.1*Mg/10^6 1.2*kN*ns/(mm*Hz) 0.1 1 ATUnits_compatible_units kg. UnitsAbsolute 1.1*Mg/10^6 1.2*kN*ns/(mm*Hz) 0.09 0 ATUnits_compatible_units kg. Units in the options UnitsAbsolute -123000*J -123*kJ 5*kJ 1 ATUnits_compatible_units (kg*m^2)/s^2. UnitsAbsolute -123006*J -123*kJ 5*kJ 1 ATUnits_compatible_units (kg*m^2)/s^2. UnitsAbsolute -129006*J -123*kJ 5*kJ 0 ATUnits_compatible_units (kg*m^2)/s^2. UnitsAbsolute 1.1*Mg/10^6 1.2*kN*ns/(mm*Hz) 0.1*kN*ns/(mm*H z) 1 ATUnits_compatible_units kg. UnitsAbsolute 1.1*Mg/10^6 1.2*kN*ns/(mm*Hz) 0.09*kN*ns/(mm* Hz) 0 ATUnits_compatible_units kg. Edge case UnitsAbsolute 0*m/s 0*m/s 0.01 1 ATUnits_units_match. UnitsAbsolute 0.0*m/s 0*m/s 0.01 1 ATUnits_units_match. UnitsAbsolute 0*m/s 0.0*m/s 0.01 1 ATUnits_units_match. UnitsAbsolute 0.0*m/s 0.0*m/s 0.01 1 ATUnits_units_match. UnitsAbsolute 0.0*km/s 0.0*m/s 0.01 1 ATUnits_compatible_units m/s. UnitsAbsolute 0.0*m 0.0*m/s 0.01 0 ATUnits_incompatible_units. ATUnits_correct_numerical. Your units are incompatible with those used by the teacher. Please check your units carefully. UnitsAbsolute 0.0 0.0*m/s 0.01 0 ATUnits_SA_no_units. Your answer must have units. UnitsAbsolute 1.0*m/s m/s 0.01 1 ATUnits_units_match. UnitsAbsolute 15/pi*kN/mm^2 15/pi*kN/mm^2 0.01 1 ATUnits_units_match. UnitsAbsolute (15*kN)/(pi*mm^2) (15*kN)/(pi*mm^2) 0.01 1 ATUnits_units_match. UnitsAbsolute (15/pi)*(kN/mm^2) (15/pi)*(kN/mm^2) 0.01 1 ATUnits_units_match. UnitsAbsolute (600*N)/(%pi*mm^2) (600*N)/(%pi*mm^2) 0.01 1 ATUnits_units_match. UnitsAbsolute (600/pi)*kN/m^2 (600/pi)*kN/m^2 0.01 1 ATUnits_units_match. UnitsAbsolute (600/pi)*kN/mm^2 (600/pi)*kN/mm^2 0.01 1 ATUnits_units_match.","title":"UnitsAbsolute: Answer test results"},{"location":"Authoring/Answer_Tests/Results/UnitsAbsolute/#unitsabsolute-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"UnitsAbsolute: Answer test results"},{"location":"Authoring/Answer_Tests/Results/UnitsRelative/","text":"UnitsRelative: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. UnitsRelative Test ? Student response Teacher answer Opt Mark Answer note UnitsRelative 12.3*m/s 12.3*m/s 0.01 1 ATUnits_units_match. UnitsRelative 12*m/s 12.3*m/s 0.01 0 ATUnits_units_match. UnitsRelative 1.1*Mg/10^6 1.2*kN*ns/(mm*Hz) 0.15 1 ATUnits_compatible_units kg. UnitsRelative 1.1*Mg/10^6 1.2*kN*ns/(mm*Hz) 0.05 0 ATUnits_compatible_units kg. Edge case UnitsRelative 0*m/s 0*m/s 0.01 1 ATUnits_units_match. UnitsRelative 0.0*m/s 0*m/s 0.01 1 ATUnits_units_match. UnitsRelative 0*m/s 0.0*m/s 0.01 1 ATUnits_units_match. UnitsRelative 0.0*m/s 0.0*m/s 0.01 1 ATUnits_units_match. UnitsRelative 0.0*km/s 0.0*m/s 0.01 1 ATUnits_compatible_units m/s. UnitsRelative 0.0*m 0.0*m/s 0.01 0 ATUnits_incompatible_units. ATUnits_correct_numerical. Your units are incompatible with those used by the teacher. Please check your units carefully. UnitsRelative 0.0 0.0*m/s 0.01 0 ATUnits_SA_no_units. Your answer must have units. UnitsRelative 0.0*kVA 0.0*kVA 0.002 1 ATUnits_units_match.","title":"UnitsRelative: Answer test results"},{"location":"Authoring/Answer_Tests/Results/UnitsRelative/#unitsrelative-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"UnitsRelative: Answer test results"},{"location":"Authoring/Answer_Tests/Results/UnitsStrict/","text":"UnitsStrict: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. UnitsStrict Test ? Student response Teacher answer Opt Mark Answer note Differences from the Units test only UnitsStrict 25*g 0.025*kg 2 0 ATUnits_compatible_units kg. UnitsStrict 1*Mg/10^6 1*N*s^2/(km) 1 0 ATUnits_compatible_units kg. UnitsStrict 1*Mg/10^6 1*kN*ns/(mm*Hz) 1 0 ATUnits_compatible_units kg. UnitsStrict 3.14*Mg/10^6 %pi*kN*ns/(mm*Hz) 3 0 ATUnits_compatible_units kg. UnitsStrict 400*cc 0.4*l 2 0 ATNumSigFigs_WithinRange. ATUnits_compatible_units m^3. UnitsStrict 400*cm^3 0.4*l 2 0 ATNumSigFigs_WithinRange. ATUnits_compatible_units m^3. UnitsStrict 400*ml 0.4*l 2 0 ATNumSigFigs_WithinRange. ATUnits_compatible_units m^3. UnitsStrict 400*mL 0.4*l 2 0 ATNumSigFigs_WithinRange. ATUnits_compatible_units m^3. UnitsStrict 142.8*C 415.9*K 4 0 ATNumSigFigs_VeryInaccurate. ATUnits_incompatible_units. We are not *that* strict! UnitsStrict -9.81*m/s/s -9.81*m/s^2 3 1 ATUnits_units_match. Edge case UnitsStrict 0*m/s 0*m/s 1 1 ATUnits_units_match. UnitsStrict 0.0*m/s 0*m/s 1 1 ATUnits_units_match. UnitsStrict 0*m/s 0.0*m/s 1 1 ATUnits_units_match. UnitsStrict 0.0*m/s 0.0*m/s 1 1 ATUnits_units_match. UnitsStrict 0.0*km/s 0.0*m/s 1 0 ATUnits_compatible_units m/s. UnitsStrict 0.0*m 0.0*m/s 1 0 ATUnits_incompatible_units. ATUnits_correct_numerical. UnitsStrict 0.0 0.0*m/s 1 0 ATUnits_SA_no_units. Your answer must have units. UnitsStrict 2.33e-15*kg 2.33e-15*kg [3,2] 1 ATUnits_units_match. UnitsStrict 7.03e-3*ng 7.03e-3*ng [3,2] 1 ATUnits_units_match. UnitsStrict 2.35e-6*ug 2.35e-6*ug [3,2] 1 ATUnits_units_match. UnitsStrict 9.83e-10*cg 9.83e-10*cg [3,2] 1 ATUnits_units_match. UnitsStrict 9.73e-21*Gg 9.73e-21*Gg [3,2] 1 ATUnits_units_match. UnitsStrict 7.19e-15*kg 7.19e-15*kg [3,2] 1 ATUnits_units_match. UnitsStrict 8.12e-12*g 8.12e-12*g [3,2] 1 ATUnits_units_match. UnitsStrict 9.34e-12*g 9.34e-12*g [3,2] 1 ATUnits_units_match. UnitsStrict 1.07e-21*Gg 1.07e-21*Gg [3,2] 1 ATUnits_units_match. UnitsStrict 1.91e-10*cg 1.91e-10*cg [3,2] 1 ATUnits_units_match. UnitsStrict 5.67e-18*Mg 5.67e-18*Mg [3,2] 1 ATUnits_units_match. UnitsStrict 2.04e-9*mg 2.04e-9*mg [3,2] 1 ATUnits_units_match. UnitsStrict 6.75e-6*ug 6.75e-6*ug [3,2] 1 ATUnits_units_match. UnitsStrict 6.58e-6*ug 6.58e-6*ug [3,2] 1 ATUnits_units_match. UnitsStrict 3.58e-9*mg 3.58e-9*mg [3,2] 1 ATUnits_units_match. UnitsStrict 9.99e-15*kg 9.99e-15*kg [3,2] 1 ATUnits_units_match. UnitsStrict 9.8e-9*mg 9.8e-9*mg [3,2] 0 ATNumSigFigs_WrongDigits. ATUnits_units_match. Your answer contains the wrong number of significant digits. UnitsStrict 9.80e-9*mg 9.8e-9*mg [3,2] 1 ATUnits_units_match. UnitsStrict 9.83e-9*mg 9.8e-9*mg [3,2] 1 ATUnits_units_match. UnitsStrict 9.78e-9*mg 9.8e-9*mg [3,2] 1 ATUnits_units_match. UnitsStrict 36*Kj/mol 36*Kj/mol 2 1 ATUnits_units_match. UnitsStrict -36*Kj/mol -36*Kj/mol 2 1 ATUnits_units_match. UnitsStrict (-36)*Kj/mol -36*Kj/mol 2 1 ATUnits_units_match. UnitsStrict (-36*Kj)/mol -36*Kj/mol 2 1 ATUnits_units_match. UnitsStrict -(36*Kj)/mol -36*Kj/mol 2 1 ATUnits_units_match. UnitsStrict -(36.2*Kj)/mol -36.3*Kj/mol 2 0 ATNumSigFigs_WrongDigits. ATUnits_units_match. Your answer contains the wrong number of significant digits.","title":"UnitsStrict: Answer test results"},{"location":"Authoring/Answer_Tests/Results/UnitsStrict/#unitsstrict-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"UnitsStrict: Answer test results"},{"location":"Authoring/Answer_Tests/Results/UnitsStrictAbsolute/","text":"UnitsStrictAbsolute: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. UnitsStrictAbsolute Test ? Student response Teacher answer Opt Mark Answer note UnitsStrictAbsolute 2301.0*mm 2300.0*mm 10.0 1 ATUnits_units_match. UnitsStrictAbsolute 2321.0*mm 2300.0*mm 10.0 0 ATUnits_units_match. UnitsStrictAbsolute 2.301*m 2300.0*mm 10.0 0 ATUnits_compatible_units m. UnitsStrictAbsolute 2.321*m 2300.0*mm 10.0 0 ATUnits_compatible_units m. UnitsStrictAbsolute 2.301*kg 2300.0*mm 10.0 0 ATUnits_incompatible_units.","title":"UnitsStrictAbsolute: Answer test results"},{"location":"Authoring/Answer_Tests/Results/UnitsStrictAbsolute/#unitsstrictabsolute-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"UnitsStrictAbsolute: Answer test results"},{"location":"Authoring/Answer_Tests/Results/UnitsStrictRelative/","text":"UnitsStrictRelative: Answer test results This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome. UnitsStrictRelative Test ? Student response Teacher answer Opt Mark Answer note UnitsStrictRelative 12.3*m/s 12.3*m/s 0.01 1 ATUnits_units_match. UnitsStrictRelative 12*m/s 12.3*m/s 0.01 0 ATUnits_units_match. UnitsStrictRelative 1.1*Mg/10^6 1.2*kN*ns/(mm*Hz) 0.15 0 ATUnits_compatible_units kg. UnitsStrictRelative 1.1*Mg/10^6 1.2*kN*ns/(mm*Hz) 0.05 0 ATUnits_compatible_units kg. Edge case UnitsStrictRelative 0*m/s 0*m/s 0.01 1 ATUnits_units_match. UnitsStrictRelative 0.0*m/s 0*m/s 0.01 1 ATUnits_units_match. UnitsStrictRelative 0*m/s 0.0*m/s 0.01 1 ATUnits_units_match. UnitsStrictRelative 0.0*m/s 0.0*m/s 0.01 1 ATUnits_units_match. UnitsStrictRelative 0.0*km/s 0.0*m/s 0.01 0 ATUnits_compatible_units m/s. UnitsStrictRelative 0.0*m 0.0*m/s 0.01 0 ATUnits_incompatible_units. ATUnits_correct_numerical. UnitsStrictRelative 0.0 0.0*m/s 0.01 0 ATUnits_SA_no_units. Your answer must have units. UnitsStrictRelative 0*J 0.0*J 0.01 1 ATUnits_units_match.","title":"UnitsStrictRelative: Answer test results"},{"location":"Authoring/Answer_Tests/Results/UnitsStrictRelative/#unitsstrictrelative-answer-test-results","text":"This page exposes the results of running answer tests on STACK test cases. This page is automatically generated from the STACK unit tests and is designed to show question authors what answer tests actually do. This includes cases where answer tests currentl fail, which gives a negative expected mark. Comments and further test cases are very welcome.","title":"UnitsStrictRelative: Answer test results"},{"location":"Authoring/Question_blocks/","text":"Question blocks Introduction Question blocks add flexibility to STACK questions by adding functional structures to the CASText. These are new from v4.0 onwards. For example, you can add in a conditional statement to selectively include materials in the version of the CASText depending on values of variables. This is useful in randomly generated contexts, especially within model solutions and randomly generated diagrams/charts. For maximum flexibility, blocks can be nested and conditionally evaluated. A body of CASText is then repeatedly processed until all blocks have been interpreted into CASText. This is a core part of CASText and so applied to all appropriate parts of the question. Note: The parameters to blocks in the question body may NOT depend on the student's answers. This means that you cannot reveal an input block based on student input, well not just by using an [[if/]] -block. But you may still adapt PRT feedback as much as you want. Such adaptation requires persistent modifiable question state and is not currently possible in STACK; however, there is work being done to create systems that would allow it. Block groups Question blocks are divided into three broad groups. Static blocks , which are active when a question version is created. Lang Comment Debug Textdownload Include Template Conditional blocks , for looping and branching and programatic structures. Define If Foreach Dynamic blocks , which manage features like Javascript and JSXGraph components. Reveal JSXGraph JSString System blocks , which are not realy intended for end-users. General syntax The syntax is quite similar to XML but preserving the style [[ ... ]] used in the inputs and potential response tree declarations. [[ block_type param1=\"value1\" param2='value2' ... paramN=\"valueN\" ]] Some content. [[/ block_type ]] This syntax avoids issues with the rich text editors used in Moodle but it is still recommended to use the plain text editor to avoid excess line changes and white space generated by the WYSIWYG editors. Notes In closing a block you must use [[/ \"blockname\"]] where \"blockname\" must be used, and it must match the previous opening block. White space is tolerated in block definitions and after the / in the closing block, but is not necessary. The parameters have the following syntax: param1=\"value1\" . Blocks define what are valid identifiers and parameters. The identifiers must not be in quotes (and so cannot contain spaces). The parameters must be in quotes, and either param1=\"value1\" or param1='value1' is accepted. Typically param1 will be a valid Maxima identifier, e.g. a variable name and the value would be a valid Maxima expression. The parameter value must be surrounded by quotes, and both \"value\" and 'value' are accepted. Empty blocks Some blocks do not have content. For example, the [[ define x='1' /]] block does not include content. The following is correct syntax: [[ define x='1']][[/ define]] But we think the following is much more direct, and clean. [[ define x='1' /]] There are other kinds of [[ emptyblocks /]] , which are useful in certain cases and developers of new blocks might like to consider this as a possibility. While the define block does not generate any visible content, empty blocks may be used to generate output. For example [[ debug /]] does generate output.","title":"Question blocks"},{"location":"Authoring/Question_blocks/#question-blocks","text":"","title":"Question blocks"},{"location":"Authoring/Question_blocks/#introduction","text":"Question blocks add flexibility to STACK questions by adding functional structures to the CASText. These are new from v4.0 onwards. For example, you can add in a conditional statement to selectively include materials in the version of the CASText depending on values of variables. This is useful in randomly generated contexts, especially within model solutions and randomly generated diagrams/charts. For maximum flexibility, blocks can be nested and conditionally evaluated. A body of CASText is then repeatedly processed until all blocks have been interpreted into CASText. This is a core part of CASText and so applied to all appropriate parts of the question. Note: The parameters to blocks in the question body may NOT depend on the student's answers. This means that you cannot reveal an input block based on student input, well not just by using an [[if/]] -block. But you may still adapt PRT feedback as much as you want. Such adaptation requires persistent modifiable question state and is not currently possible in STACK; however, there is work being done to create systems that would allow it.","title":"Introduction"},{"location":"Authoring/Question_blocks/#block-groups","text":"Question blocks are divided into three broad groups. Static blocks , which are active when a question version is created. Lang Comment Debug Textdownload Include Template Conditional blocks , for looping and branching and programatic structures. Define If Foreach Dynamic blocks , which manage features like Javascript and JSXGraph components. Reveal JSXGraph JSString System blocks , which are not realy intended for end-users.","title":"Block groups"},{"location":"Authoring/Question_blocks/#general-syntax","text":"The syntax is quite similar to XML but preserving the style [[ ... ]] used in the inputs and potential response tree declarations. [[ block_type param1=\"value1\" param2='value2' ... paramN=\"valueN\" ]] Some content. [[/ block_type ]] This syntax avoids issues with the rich text editors used in Moodle but it is still recommended to use the plain text editor to avoid excess line changes and white space generated by the WYSIWYG editors. Notes In closing a block you must use [[/ \"blockname\"]] where \"blockname\" must be used, and it must match the previous opening block. White space is tolerated in block definitions and after the / in the closing block, but is not necessary. The parameters have the following syntax: param1=\"value1\" . Blocks define what are valid identifiers and parameters. The identifiers must not be in quotes (and so cannot contain spaces). The parameters must be in quotes, and either param1=\"value1\" or param1='value1' is accepted. Typically param1 will be a valid Maxima identifier, e.g. a variable name and the value would be a valid Maxima expression. The parameter value must be surrounded by quotes, and both \"value\" and 'value' are accepted.","title":"General syntax"},{"location":"Authoring/Question_blocks/#empty-blocks","text":"Some blocks do not have content. For example, the [[ define x='1' /]] block does not include content. The following is correct syntax: [[ define x='1']][[/ define]] But we think the following is much more direct, and clean. [[ define x='1' /]] There are other kinds of [[ emptyblocks /]] , which are useful in certain cases and developers of new blocks might like to consider this as a possibility. While the define block does not generate any visible content, empty blocks may be used to generate output. For example [[ debug /]] does generate output.","title":"Empty blocks"},{"location":"Authoring/Question_blocks/Conditional_blocks/","text":"Conditional blocks If blocks The common if statement is written as: [[ if test=\"some_CAS_expression_evaluating_to_true_or_false\" ]] The expression seems to be true. [[/ if ]] The if block requires a parameter called test and the value must be a Maxima expression which evaluates to true or false . The if block uses a special syntax expansion that provides it a way to handle else cases. For example, [[ if test='oddp(rand(5))' ]] This is an odd block! [[ else ]] This is an even block! [[/ if]] There is an else if type of structure using elif (Python coders won the syntax selection vote), [[ if test='oddp(var)' ]] This is an odd block! [[ elif test='is(var=0)' ]] It might be even but it is also zero. [[ else ]] This is an even block! [[/ if]] Note that you may have to evaluate your expression explicitly. Maxima does not always evaluate predicates to true or false . For example, you might expect p<1 in the following to evaluate to true . [[ define p=\"0\" /]] \\(p\\) is now {@p@}. [[ if test=\"p<1\"]] \\(p\\) is less than 1. [[ else ]] \\(p\\) is not less than 1. [[/ if ]] However, it remains unevaluated. The true branch is therefore not satisfied. Since 4.4 the behaviour of this block matches normal if-else behaviour in Maxima, you may still meet this problem if you happen to turn simplification off. To address this explicitly evaluate your expressions as predicates. [[ if test=\"is(p<1)\"]] Teachers can also use evaluation with simplification and predicates as follows: [[ if test=\"ev(p<1,simp,pred)\"]] It is the responsibility of the question author to ensure that every test in an if block evaluates to true or false . Foreach loop Foreach blocks iterate over lists or sets and repeat their content redefining variables for each repetition. [[ foreach x=\"[1,2,3]\" ]]{#x#} [[/ foreach ]] You may have multiple variables and they will be iterated over in sync and the variables may also come from Maxima. Should one of the lists or set be shorter/smaller the iteration will stop when the first one ends. [[ foreach x=\"[1,2,3]\" y=\"makelist(x^2,x,4)\" ]] ({#x#},{#y#}) [[/ foreach ]] Because the foreach block needs to evaluate the lists/sets before it can do the iteration, using foreach blocks will require one additional CAS evaluation for each nested level of foreach blocks. This has not applied since 4.4. no additional cost is related to this block and it is recommended that any repeption that can be removed is removed using this block. Define block {#define-block} The define block is a core component of the foreach block, but it may also be used elsewhere. Its function is to change the value of a CAS variable in the middle of CASText. For example: [[ define x='1' /]] {#x#}, [[ define x='x+1' /]] {#x#}, [[ define x='x+1' /]] {#x#} should print \"1, 2, 3\". You may define multiple variables in the same block and the order of define operations is from left to right so \"[[ define a='1' b='a+1' c='a+b' /]] {#a#}, {#b#}, {#c#}\" should generate the same output. Note, the use of define provides an alternative to using the question variables. Variables here are defined on the fly. However, we do not recommend this is done routinely. the readability of the code will suffer. question variables are available elsewhere in the question, but define blocks are only available in that CASText. This feature can also be used to your advantage.","title":"Conditional blocks"},{"location":"Authoring/Question_blocks/Conditional_blocks/#conditional-blocks","text":"","title":"Conditional blocks"},{"location":"Authoring/Question_blocks/Conditional_blocks/#if-blocks","text":"The common if statement is written as: [[ if test=\"some_CAS_expression_evaluating_to_true_or_false\" ]] The expression seems to be true. [[/ if ]] The if block requires a parameter called test and the value must be a Maxima expression which evaluates to true or false . The if block uses a special syntax expansion that provides it a way to handle else cases. For example, [[ if test='oddp(rand(5))' ]] This is an odd block! [[ else ]] This is an even block! [[/ if]] There is an else if type of structure using elif (Python coders won the syntax selection vote), [[ if test='oddp(var)' ]] This is an odd block! [[ elif test='is(var=0)' ]] It might be even but it is also zero. [[ else ]] This is an even block! [[/ if]] Note that you may have to evaluate your expression explicitly. Maxima does not always evaluate predicates to true or false . For example, you might expect p<1 in the following to evaluate to true . [[ define p=\"0\" /]] \\(p\\) is now {@p@}. [[ if test=\"p<1\"]] \\(p\\) is less than 1. [[ else ]] \\(p\\) is not less than 1. [[/ if ]] However, it remains unevaluated. The true branch is therefore not satisfied. Since 4.4 the behaviour of this block matches normal if-else behaviour in Maxima, you may still meet this problem if you happen to turn simplification off. To address this explicitly evaluate your expressions as predicates. [[ if test=\"is(p<1)\"]] Teachers can also use evaluation with simplification and predicates as follows: [[ if test=\"ev(p<1,simp,pred)\"]] It is the responsibility of the question author to ensure that every test in an if block evaluates to true or false .","title":"If blocks"},{"location":"Authoring/Question_blocks/Conditional_blocks/#foreach-loop","text":"Foreach blocks iterate over lists or sets and repeat their content redefining variables for each repetition. [[ foreach x=\"[1,2,3]\" ]]{#x#} [[/ foreach ]] You may have multiple variables and they will be iterated over in sync and the variables may also come from Maxima. Should one of the lists or set be shorter/smaller the iteration will stop when the first one ends. [[ foreach x=\"[1,2,3]\" y=\"makelist(x^2,x,4)\" ]] ({#x#},{#y#}) [[/ foreach ]] Because the foreach block needs to evaluate the lists/sets before it can do the iteration, using foreach blocks will require one additional CAS evaluation for each nested level of foreach blocks. This has not applied since 4.4. no additional cost is related to this block and it is recommended that any repeption that can be removed is removed using this block.","title":"Foreach loop"},{"location":"Authoring/Question_blocks/Conditional_blocks/#define-block-define-block","text":"The define block is a core component of the foreach block, but it may also be used elsewhere. Its function is to change the value of a CAS variable in the middle of CASText. For example: [[ define x='1' /]] {#x#}, [[ define x='x+1' /]] {#x#}, [[ define x='x+1' /]] {#x#} should print \"1, 2, 3\". You may define multiple variables in the same block and the order of define operations is from left to right so \"[[ define a='1' b='a+1' c='a+b' /]] {#a#}, {#b#}, {#c#}\" should generate the same output. Note, the use of define provides an alternative to using the question variables. Variables here are defined on the fly. However, we do not recommend this is done routinely. the readability of the code will suffer. question variables are available elsewhere in the question, but define blocks are only available in that CASText. This feature can also be used to your advantage.","title":"Define block {#define-block}"},{"location":"Authoring/Question_blocks/Dynamic_blocks/","text":"Dynamic blocks Dynamic blocks deal with dynamic content such as Javascript and JSXGraph Reveal block This block allows sections of text to be shown or hidden based on the value of an input. [[reveal input=\"ans1\" value=\"true\"]] Text shown when the value of input `ans1` is `true`. [[/reveal]] The block will only do singular direct string match, and so use of this block is most likely to be useful when combined with true/false or other multiple choice input types. An example question using this feature is provided in the sample questions. There is currently no \"else\" clause available with this block. Interaction with MCQ input types The reveal block can be used in conjunction with MCQ input types to provide an input, e.g. algebraic, for \"other\". Here is a very minimal example. Put the following in the question variables. ta1:[[a,false],[b,false],[c,false],[d,false],[X,true,\"Other\"]]; ta2:x^2; Use the following question text. [[input:ans1]] [[validation:ans1]] [[reveal input=\"ans1\" value=\"5\"]] [[input:ans2]] [[validation:ans2]] [[/reveal]] Create input ans1 as a radio input, with teacher's answer ta1 . Don't require or show validation. Create input ans2 as an algebraic input, with teacher's answer ta2 . Use the extra option allowempty . In the PRT the first node should check ans1=X and, if so check that ans2=ta2 . Notice that the reveal block has the condition value=\"5\" , not value=\"X\" . This is because the reveal block executes client-side, using javascript, and the values of the options are simply numbered, and mapped back to Maxima values server-side. Hint block This block allows sections of text to be shown or hidden with a press of an additional button. [[hint title=\"button text\"]] Text shown when the button is pressed. [[/hint]] Notes hint blocks can be nested. the content of the hint is styled within a stack-hint-content div tag. JSXGraph block STACK supports inclusion of dynamic graphs using JSXGraph: http://jsxgraph.uni-bayreuth.de/wiki/ . The key feature of this block is the ability to bind elements of the graph to inputs of the question. See the specific documentation on including JSXGraph elements. [[jsxgraph]] // boundingbox:[left, top, right, bottom] var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-3, 2, 3, -2], axis: true, showCopyright: false}); var f = board.jc.snippet('sin(1/x)', true, 'x', true); board.create('functiongraph', [f,-3,3]); [[/jsxgraph]] JSString block A new feature in 4.4 is the [[jsstring]] which makes it simpler to produce JavaScript string values out of CASText content. This may be useful for example when generating labels in JSXGraph. The block takes its content and evaluates it as normal CASText and then excapes it as JavaScript string literal. var label = [[jsstring]]{@f(x)=sqrt(x)@}[[/jsstring]]; /* Would generate, without the need to manually escape things. */ var label = \"\\\\({f\\\\left(x\\\\right)=\\\\sqrt{x}}\\\\)\"; Note, this block is not designed to output Maxima expressins in JS format. For example, this block will not convert x^2 into x**2 .","title":"Dynamic blocks"},{"location":"Authoring/Question_blocks/Dynamic_blocks/#dynamic-blocks","text":"Dynamic blocks deal with dynamic content such as Javascript and JSXGraph","title":"Dynamic blocks"},{"location":"Authoring/Question_blocks/Dynamic_blocks/#reveal-block","text":"This block allows sections of text to be shown or hidden based on the value of an input. [[reveal input=\"ans1\" value=\"true\"]] Text shown when the value of input `ans1` is `true`. [[/reveal]] The block will only do singular direct string match, and so use of this block is most likely to be useful when combined with true/false or other multiple choice input types. An example question using this feature is provided in the sample questions. There is currently no \"else\" clause available with this block.","title":"Reveal block"},{"location":"Authoring/Question_blocks/Dynamic_blocks/#interaction-with-mcq-input-types","text":"The reveal block can be used in conjunction with MCQ input types to provide an input, e.g. algebraic, for \"other\". Here is a very minimal example. Put the following in the question variables. ta1:[[a,false],[b,false],[c,false],[d,false],[X,true,\"Other\"]]; ta2:x^2; Use the following question text. [[input:ans1]] [[validation:ans1]] [[reveal input=\"ans1\" value=\"5\"]] [[input:ans2]] [[validation:ans2]] [[/reveal]] Create input ans1 as a radio input, with teacher's answer ta1 . Don't require or show validation. Create input ans2 as an algebraic input, with teacher's answer ta2 . Use the extra option allowempty . In the PRT the first node should check ans1=X and, if so check that ans2=ta2 . Notice that the reveal block has the condition value=\"5\" , not value=\"X\" . This is because the reveal block executes client-side, using javascript, and the values of the options are simply numbered, and mapped back to Maxima values server-side.","title":"Interaction with MCQ input types"},{"location":"Authoring/Question_blocks/Dynamic_blocks/#hint-block","text":"This block allows sections of text to be shown or hidden with a press of an additional button. [[hint title=\"button text\"]] Text shown when the button is pressed. [[/hint]] Notes hint blocks can be nested. the content of the hint is styled within a stack-hint-content div tag.","title":"Hint block"},{"location":"Authoring/Question_blocks/Dynamic_blocks/#jsxgraph-block","text":"STACK supports inclusion of dynamic graphs using JSXGraph: http://jsxgraph.uni-bayreuth.de/wiki/ . The key feature of this block is the ability to bind elements of the graph to inputs of the question. See the specific documentation on including JSXGraph elements. [[jsxgraph]] // boundingbox:[left, top, right, bottom] var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-3, 2, 3, -2], axis: true, showCopyright: false}); var f = board.jc.snippet('sin(1/x)', true, 'x', true); board.create('functiongraph', [f,-3,3]); [[/jsxgraph]]","title":"JSXGraph block"},{"location":"Authoring/Question_blocks/Dynamic_blocks/#jsstring-block","text":"A new feature in 4.4 is the [[jsstring]] which makes it simpler to produce JavaScript string values out of CASText content. This may be useful for example when generating labels in JSXGraph. The block takes its content and evaluates it as normal CASText and then excapes it as JavaScript string literal. var label = [[jsstring]]{@f(x)=sqrt(x)@}[[/jsstring]]; /* Would generate, without the need to manually escape things. */ var label = \"\\\\({f\\\\left(x\\\\right)=\\\\sqrt{x}}\\\\)\"; Note, this block is not designed to output Maxima expressins in JS format. For example, this block will not convert x^2 into x**2 .","title":"JSString block"},{"location":"Authoring/Question_blocks/Static_blocks/","text":"Static blocks Static blocks are mostly used when a random version is created, rather than relating to managing dynamic content such as Javascript. Lang block A new feature in 4.4 is a STACK specific localisation mechanism that allows one to output differing text based on the language the student has chosen in their VLE. [[lang code='fi']]...Text in Finnish...[[/lang]] Read more about this in the languages documentation. Comment blocks Comment blocks allow you to put content into CASText which will not be seen by students. [[ comment ]] Place comments here which will not appear to students. [[/ comment ]] Before 4.4 the contents of the block needed to be syntactically correct CASText. That is no longer the case and you can much more easily use this block to comment our unfinished stuff. Todo blocks \"todo\" blocks allow you to put items into CASText which indicate future work needed. This will not be seen by students. [[ todo ]] Place requests to collaborators here. This will not appear to students. [[/ todo ]] Any question with a todo will flag an error in the bulk tester. This will not throw an error in the editing form. These blocks can also be found by the dependency checker. The todo block is similar to the comments block. A different block is provided to facilitate searching for questions with specific \"todo\" items remaining. The contents must be valid castext (unlike the comments block which can be anything) because in the future we may extend the functionality to display todo items in a teacher preview. If you need to include invalid content either use the comment block, or escape block inside the todo, e.g. [[todo]][[escape]]...[[/escape]][[/todo]] The contents of this block are replaced by the static <!--- stack_todo ---> to provide a searchable tag in instantiated text which is not visible in regular html, e.g. in the dependency checker. The debug block The special \"debug\" block allows question authors to see all the values of variables created during a session in a table. Do not leave this block in a live question! [[ debug /]] Format blocks In general CASText is assumed to be written in the format (Markdown, raw HTML, Moodle auto-format) that Moodle defines and which can be selected in the editor if one uses the plain text area editor. However, there are cases where one might need to mix formats withing the CASText itself, one of those cases is the inclusion of content written in another format. In these cases one can wrap the differing part in blocks that declare the format to use for that portion. The blocks used for this are named [[moodleformat]] , [[markdownformat]] , and [[htmlformat]] . In the end all CASText evaluates down to HTML, even if it were written in Markdown-format it will be rendered down to HTML. Textdownload block STACK can construct a text-file using CASText and provide a link to it for download. This is obviously a way for serving out randomised data to the student. Do note that you can generate whatever you want as the content of that file, one could even generate a LaTeX template with question specific values for the student to fill things in. Read more about serving data out . Include block A new feature in 4.4 is the ability to include content from an URL. The include block allows one to do that. However, it is not a recommended tool for novices and all users choosing to use it should consider what it means for the future maintenance and shareability of your questions. See the specific documentation on include logic . Template block Since 4.4.2 it has been possible to use templates to handle repetitive content or to override content deeper in libraries. Templates are essentially a way for handling repetition when [[foreach]] does not easily work or when inline CASText based function solutions are inconvenient. While inline CASText is often better it might not work as well as overridable templates when working with libraries. The template block has two parameters, the first being a name which should be a valid name for a function and the second being the mode parameter that controls the blocks behaviour and is of use especially for library builders. There are three different ways for using this block: To define a templates value for a given name one simply wraps that value in this block with that name. [[template name=\"foobar\"]]Whatever is {@whatever@}[[/template]] . This will not output anything and can also be done in inline CASText either in the question-variables to effect the whole question or in feedback-variables to effect PRTs. To output that template, one simply uses the empty block form [[template name=\"foobar\"/]] which will output whatever has been defined as that templates value or a warning about the template not been defined. One can add a mode parameter mode=\"ignore missing\" to not see that warning. Typically, one will use the [[define/]] block to change the values used within the template. For library makers the most common operation mode is the mode=\"default\" where the contents of the block are used if no overriding definition can be found. The default value will not define a default template and this intentional, if a template is to be shared then it needs to be defined at a global level where it always gets evaluated while default templates tend to be sensible to use even in conditionally evaluated contexts. Basically, if your library has any CASText that could benefit from being overridable you simply give it a name and wrap it with [[template name=\"libarary_xyz\" mode=\"default\"]]...[[/template]] and then maybe document somewhere that this name has this default where these injectable variables have these roles so that people may replace the wording and structure and still use the same values. Note in the background templates are just functions with CASText values. You can do the same with inline CASText and more importantly building your own functions allows you to use arguments for them and thus makes repetition with varying parameters simpler. For templates no arguments exist, for them the values come from the context where they get placed in, and must therefore be controlled though other means.","title":"Static blocks"},{"location":"Authoring/Question_blocks/Static_blocks/#static-blocks","text":"Static blocks are mostly used when a random version is created, rather than relating to managing dynamic content such as Javascript.","title":"Static blocks"},{"location":"Authoring/Question_blocks/Static_blocks/#lang-block","text":"A new feature in 4.4 is a STACK specific localisation mechanism that allows one to output differing text based on the language the student has chosen in their VLE. [[lang code='fi']]...Text in Finnish...[[/lang]] Read more about this in the languages documentation.","title":"Lang block"},{"location":"Authoring/Question_blocks/Static_blocks/#comment-blocks","text":"Comment blocks allow you to put content into CASText which will not be seen by students. [[ comment ]] Place comments here which will not appear to students. [[/ comment ]] Before 4.4 the contents of the block needed to be syntactically correct CASText. That is no longer the case and you can much more easily use this block to comment our unfinished stuff.","title":"Comment blocks"},{"location":"Authoring/Question_blocks/Static_blocks/#todo-blocks","text":"\"todo\" blocks allow you to put items into CASText which indicate future work needed. This will not be seen by students. [[ todo ]] Place requests to collaborators here. This will not appear to students. [[/ todo ]] Any question with a todo will flag an error in the bulk tester. This will not throw an error in the editing form. These blocks can also be found by the dependency checker. The todo block is similar to the comments block. A different block is provided to facilitate searching for questions with specific \"todo\" items remaining. The contents must be valid castext (unlike the comments block which can be anything) because in the future we may extend the functionality to display todo items in a teacher preview. If you need to include invalid content either use the comment block, or escape block inside the todo, e.g. [[todo]][[escape]]...[[/escape]][[/todo]] The contents of this block are replaced by the static <!--- stack_todo ---> to provide a searchable tag in instantiated text which is not visible in regular html, e.g. in the dependency checker.","title":"Todo blocks"},{"location":"Authoring/Question_blocks/Static_blocks/#the-debug-block","text":"The special \"debug\" block allows question authors to see all the values of variables created during a session in a table. Do not leave this block in a live question! [[ debug /]]","title":"The debug block"},{"location":"Authoring/Question_blocks/Static_blocks/#format-blocks","text":"In general CASText is assumed to be written in the format (Markdown, raw HTML, Moodle auto-format) that Moodle defines and which can be selected in the editor if one uses the plain text area editor. However, there are cases where one might need to mix formats withing the CASText itself, one of those cases is the inclusion of content written in another format. In these cases one can wrap the differing part in blocks that declare the format to use for that portion. The blocks used for this are named [[moodleformat]] , [[markdownformat]] , and [[htmlformat]] . In the end all CASText evaluates down to HTML, even if it were written in Markdown-format it will be rendered down to HTML.","title":"Format blocks"},{"location":"Authoring/Question_blocks/Static_blocks/#textdownload-block","text":"STACK can construct a text-file using CASText and provide a link to it for download. This is obviously a way for serving out randomised data to the student. Do note that you can generate whatever you want as the content of that file, one could even generate a LaTeX template with question specific values for the student to fill things in. Read more about serving data out .","title":"Textdownload block"},{"location":"Authoring/Question_blocks/Static_blocks/#include-block","text":"A new feature in 4.4 is the ability to include content from an URL. The include block allows one to do that. However, it is not a recommended tool for novices and all users choosing to use it should consider what it means for the future maintenance and shareability of your questions. See the specific documentation on include logic .","title":"Include block"},{"location":"Authoring/Question_blocks/Static_blocks/#template-block","text":"Since 4.4.2 it has been possible to use templates to handle repetitive content or to override content deeper in libraries. Templates are essentially a way for handling repetition when [[foreach]] does not easily work or when inline CASText based function solutions are inconvenient. While inline CASText is often better it might not work as well as overridable templates when working with libraries. The template block has two parameters, the first being a name which should be a valid name for a function and the second being the mode parameter that controls the blocks behaviour and is of use especially for library builders. There are three different ways for using this block: To define a templates value for a given name one simply wraps that value in this block with that name. [[template name=\"foobar\"]]Whatever is {@whatever@}[[/template]] . This will not output anything and can also be done in inline CASText either in the question-variables to effect the whole question or in feedback-variables to effect PRTs. To output that template, one simply uses the empty block form [[template name=\"foobar\"/]] which will output whatever has been defined as that templates value or a warning about the template not been defined. One can add a mode parameter mode=\"ignore missing\" to not see that warning. Typically, one will use the [[define/]] block to change the values used within the template. For library makers the most common operation mode is the mode=\"default\" where the contents of the block are used if no overriding definition can be found. The default value will not define a default template and this intentional, if a template is to be shared then it needs to be defined at a global level where it always gets evaluated while default templates tend to be sensible to use even in conditionally evaluated contexts. Basically, if your library has any CASText that could benefit from being overridable you simply give it a name and wrap it with [[template name=\"libarary_xyz\" mode=\"default\"]]...[[/template]] and then maybe document somewhere that this name has this default where these injectable variables have these roles so that people may replace the wording and structure and still use the same values. Note in the background templates are just functions with CASText values. You can do the same with inline CASText and more importantly building your own functions allows you to use arguments for them and thus makes repetition with varying parameters simpler. For templates no arguments exist, for them the values come from the context where they get placed in, and must therefore be controlled though other means.","title":"Template block"},{"location":"Authoring/Question_blocks/System_blocks/","text":"System question blocks Commonstring block In some circumstances one might see the [[commonstring/]] block. While it might not be one that an author would use it might appear when working with built-in labels and their localisations. What it does is that it gets a key as a parameter and fetches the matching localised string from STACKs language packs and replaces the block with it. It also provides means for injecting named parameters into those templates with varying simplification and presentation options. For example [[commonstring key=\"pluginname_help\"/]] will display the string pluginname_help from the language pack, which in English is currently \"STACK is an assessment system for mathematics.\" Blocks that exist but should not be used There are other blocks that have roles inside the system and that transfer information required for the operation of the system. If you look at the code these are often called \"specialblocks\". You can rest assured that there are no realistic use cases for them, even in advanced authoring proceses. Practically, none of these blocks ever exist in written out CASText and are only added in as virtual objects during processing. However, if you ever look at the commands going into the CAS you might see these block names going in and coming out. For example, [[pfs]] is a special block that gets generated by internal logic when we see plugin files (if you place an image into the WYSIWYG editor) in the text, it works as a marker for those files context so that we can combine text from multiple contexts together and still keep track of the origins when the final product gets rendered. There are blocks that handle the placeholders for inputs, validation, and feedback. Some others deal with translations between forms and postprocessing special types of content.","title":"System question blocks"},{"location":"Authoring/Question_blocks/System_blocks/#system-question-blocks","text":"","title":"System question blocks"},{"location":"Authoring/Question_blocks/System_blocks/#commonstring-block","text":"In some circumstances one might see the [[commonstring/]] block. While it might not be one that an author would use it might appear when working with built-in labels and their localisations. What it does is that it gets a key as a parameter and fetches the matching localised string from STACKs language packs and replaces the block with it. It also provides means for injecting named parameters into those templates with varying simplification and presentation options. For example [[commonstring key=\"pluginname_help\"/]] will display the string pluginname_help from the language pack, which in English is currently \"STACK is an assessment system for mathematics.\"","title":"Commonstring block"},{"location":"Authoring/Question_blocks/System_blocks/#blocks-that-exist-but-should-not-be-used","text":"There are other blocks that have roles inside the system and that transfer information required for the operation of the system. If you look at the code these are often called \"specialblocks\". You can rest assured that there are no realistic use cases for them, even in advanced authoring proceses. Practically, none of these blocks ever exist in written out CASText and are only added in as virtual objects during processing. However, if you ever look at the commands going into the CAS you might see these block names going in and coming out. For example, [[pfs]] is a special block that gets generated by internal logic when we see plugin files (if you place an image into the WYSIWYG editor) in the text, it works as a marker for those files context so that we can combine text from multiple contexts together and still keep track of the origins when the final product gets rendered. There are blocks that handle the placeholders for inputs, validation, and feedback. Some others deal with translations between forms and postprocessing special types of content.","title":"Blocks that exist but should not be used"},{"location":"CAS/","text":"Maxima and computer algebra use in STACK STACK uses the computer algebra system (CAS) Maxima and a graphical desktop interface like wxMaxima can be helpful for ofline editing, including a STACK-Maxima sandbox for testing question code on the desktop. Computer algebra systems are most often designed for either the research mathematician, or the student to do calculations . For the purposes of assessment our calculation establish some relevant properties of the students' answers. Establishing properties in this way, and on the basis of this creating outcomes such as feedback, is something particular to assessment systems. Such properties include things like is the expression algebraically equivalent to the correct answer? is the expression fully simplified? is the expression written a particular conventional form, (e.g. factored, partial fraction)? are all the numbers in the expression written as fractions in the lowest terms? Maxima in STACK {#reference} Predicate functions , which are useful to test expressions. Numbers , including floating point and complex numbers. Simplification can be switched on and off in Maxima. Inequalities . Matrices and vectors . Statistics . Randomly generated objects . Plots and graphics. Buggy rules implements rules which are not always valid! Developer information, and other topics {#developer} Setting up a STACK-Maxima sandbox for testing code on the desktop. Optimising Maxima .","title":"CAS"},{"location":"CAS/#maxima-and-computer-algebra-use-in-stack","text":"STACK uses the computer algebra system (CAS) Maxima and a graphical desktop interface like wxMaxima can be helpful for ofline editing, including a STACK-Maxima sandbox for testing question code on the desktop. Computer algebra systems are most often designed for either the research mathematician, or the student to do calculations . For the purposes of assessment our calculation establish some relevant properties of the students' answers. Establishing properties in this way, and on the basis of this creating outcomes such as feedback, is something particular to assessment systems. Such properties include things like is the expression algebraically equivalent to the correct answer? is the expression fully simplified? is the expression written a particular conventional form, (e.g. factored, partial fraction)? are all the numbers in the expression written as fractions in the lowest terms?","title":"Maxima and computer algebra use in STACK"},{"location":"CAS/#maxima-in-stack-reference","text":"Predicate functions , which are useful to test expressions. Numbers , including floating point and complex numbers. Simplification can be switched on and off in Maxima. Inequalities . Matrices and vectors . Statistics . Randomly generated objects . Plots and graphics. Buggy rules implements rules which are not always valid!","title":"Maxima in STACK {#reference}"},{"location":"CAS/#developer-information-and-other-topics-developer","text":"Setting up a STACK-Maxima sandbox for testing code on the desktop. Optimising Maxima .","title":"Developer information, and other topics {#developer}"},{"location":"CAS/Buggy_rules/","text":"Buggy rules In order to establish that the student has done something particular but wrong, it is useful for us to be able to apply wrong or buggy rules to expressions. A typical example would be to expand out powers in the wrong way, e.g. [(x+y)^2=x^2+y^2.] Powers obey linearity buggy_pow(ex) Implements the buggy linearity rule for exponentiation, i.e. [(a+b)^n \\rightarrow a^n+b^n.] This is useful if we want to compare a student's answer to the result of having done something wrong. Naive addition of fractions mediant(ex1,ex2) calculates the mediant of two rational expressions. The mediant of two fractions [ \\mbox{mediant}\\left(\\frac{p_1}{q_1} , \\frac{p_2}{q_2}\\right) := \\frac{p_1+p_2}{q_1+q_2}.] Note that both denom and num work on non-rational expressions, assuming the expression to be \"over one\" by implication. Hence mediant will also assume the denominator is also one in such cases. This is not always a buggy rule. It is used, for example, in connection with Farey sequences, but it is included here as in assessment this function is useful for checking a common mistake when adding fractions. There is scope for further examples of such rules. See also Maxima reference topics","title":"Buggy rules"},{"location":"CAS/Buggy_rules/#buggy-rules","text":"In order to establish that the student has done something particular but wrong, it is useful for us to be able to apply wrong or buggy rules to expressions. A typical example would be to expand out powers in the wrong way, e.g. [(x+y)^2=x^2+y^2.]","title":"Buggy rules"},{"location":"CAS/Buggy_rules/#powers-obey-linearity","text":"buggy_pow(ex) Implements the buggy linearity rule for exponentiation, i.e. [(a+b)^n \\rightarrow a^n+b^n.] This is useful if we want to compare a student's answer to the result of having done something wrong.","title":"Powers obey linearity"},{"location":"CAS/Buggy_rules/#naive-addition-of-fractions","text":"mediant(ex1,ex2) calculates the mediant of two rational expressions. The mediant of two fractions [ \\mbox{mediant}\\left(\\frac{p_1}{q_1} , \\frac{p_2}{q_2}\\right) := \\frac{p_1+p_2}{q_1+q_2}.] Note that both denom and num work on non-rational expressions, assuming the expression to be \"over one\" by implication. Hence mediant will also assume the denominator is also one in such cases. This is not always a buggy rule. It is used, for example, in connection with Farey sequences, but it is included here as in assessment this function is useful for checking a common mistake when adding fractions. There is scope for further examples of such rules.","title":"Naive addition of fractions"},{"location":"CAS/Buggy_rules/#see-also","text":"Maxima reference topics","title":"See also"},{"location":"CAS/Complex_numbers/","text":"Complex Numbers in STACK Complex numbers, especially the display of complex numbers, is a surprisingly subtle issue. This is because there is some genuine ambiguity in whether (a+\\mathrm{i}\\, b) is a single object or the sum of two parts. In mathematics we use this ambiguity to our advantage, but in online assesment we need to be more precise. There are also issues of unary minus, e.g. not displaying (1 + (-2)\\mathrm{i}). Similarly we typically do not display numbers like (0+1\\mathrm{i}), unless of course we want to at which point we need the option to do so! The general rules when displaying a complex number in Cartesian form \"(a+\\mathrm{i}\\, b)\" are the real part should always appear to the left of the imaginary part; (i) (or whatever symbol is being used for the imaginary unit) should appear on the right of its coefficient if and only if the coefficient is a numerical value. By numerical value, we mean something like (2\\sqrt{2}\\pi) but not things like ( a \\pi ), even if ( a ) is a constant. Some examples: 3+2*%i should display as (3+2\\,\\mathrm{i}). 3-%i should display as (3-\\mathrm{i}). -a+b*%i should display as (-a+\\mathrm{i}\\,b). -b*%i should display as (-\\mathrm{i}\\,b) (not normally as (0-\\mathrm{i}\\,b)). STACK provides two functions, one which simplifies and one which does not. display_complex(ex) takes an expression ex and tries to display this as a complex number obeying the above rules. In particular, this function makes use of Maxima's realpart and imagpart function to split up ex into real and imaginary parts. To do this it must assume simp:true , and so the real and imaginary part will be simplified. For example, display_complex(1+2*%i/sqrt(2)) is displayed as (1+\\sqrt{2}\\,\\mathrm{i}). If you really want (1+\\frac{2}{\\sqrt{2}}\\,\\mathrm{i}) then you will need to use the non-simplifying alternative below. This function respects normal conventions, e.g. when realpart returns zero this function will not print (0+2\\,\\mathrm{i}), it just prints (2\\,\\mathrm{i}), etc. disp_complex(a, b) assumes a is the real part and b is the imaginary part (no checking is done). This function (mostly) does not simplify its arguments. So disp_complex(0, 2) will appear as (0+2\\,\\mathrm{i}); disp_complex(2/4, 1) will appear as (\\frac{2}{4}+1\\,\\mathrm{i}); and disp_complex(2, 2/sqrt(2)) will appear as (2+\\frac{2}{\\sqrt{2}}\\,\\mathrm{i}). Use the atom null if you do not want to print a zero for the real part, or print one times the imaginary part. disp_complex(null, 2) will appear as (2\\,\\mathrm{i}) and disp_complex(null, null) will appear as just (\\mathrm{i}). Think of null as a non-printable unit (additive or multiplicative). There is one exception. In order to pull out a unary minus to the front, disp_complex(a, b) will simplify b if b is not a number and it contains a unary minus. So, for example disp_complex(a, (-b^2)/b) is displayed (a-\\mathrm{i}\\,b). (We might be able to fix this but this edge case requires disproportionate effort: ask the developers if this is essential). You cannot use these functions to display complex numbers in this form (\\frac{\\mathrm{i}}{2}), both these function will always display as (\\frac{1}{2}\\,\\mathrm{i}). Display respects the multiplication sign used elsewhere within expressions, so that you may have (\\frac{2\\cdot \\pi}{3}\\,\\mathrm{i}) rather than (\\frac{2\\, \\pi}{3}\\,\\mathrm{i}). Note that the function display_complex(ex) returns the inert form disp_complex(a, b) . The expression disp_complex(a, b) is an \"inert form\", which is only used to fine-tune the display. This function is not actually defined and so Maxima always returns it unevaluated. To remove the intert form from an expression, which is needed to manipulate this further, use remove_disp_complex , e.g., with the following. p1:disp_complex(a, b); p2:ev(p1, disp_complex=remove_disp_complex); (Because null has two different meanings within an expression it isn't sufficient to just define disp_complex(ex1, ex2) := ex1+ex2*%i .) There are occasions when you will need to explicitly add brackets to the displayed form of a complex number, e.g. to emphasise it is a single entity. To add brackets there is a further \"inert form\" disp_parens which does nothing but add parentheses when the expression is displayed with the tex() function. For example, p1:disp_parens(display_complex(1+%i))*x^2+disp_parens(display_complex(1-%i)); will display as (\\left( 1+\\mathrm{i} \\right)\\cdot x^2+\\left( 1-\\mathrm{i} \\right)). To remove these inert forms evaluate p2:ev(p1, disp_complex=remove_disp_complex, disp_parens=lambda([ex],ex)); You must remove inert forms before expressions are evaluated by the potential response tree, for example in the feedback variables. For example, disp_complex(a, b) is not algebraically equivalent to a+b*%i . Polar forms A complex number written as (r e^{i\\theta}) is in polar form . The Maxima function polarform re-writes a complex number in this form, however with simp:false it does not simplfy the expressions for the modulus (r) or argument (\\theta) (in STACK). Attempting to re-simplify the expression only returns the number to Cartesian form! As a minimal example, try the following. simp:false; p1:polarform(1+%i); p2:ev(polarform(1+%i), simp); p3:ev(p2, simp); First we have p1 is ( \\left(\\left(1\\right)^2 + \\left(1\\right)^2\\right)^{{{1}\\over{2}}}\\,e^{i\\,{\\rm atan2}\\left(1 , 1\\right)} ). Of course, we really need some simplification of the (r) and the (\\theta) values. Notice the difference between p2 : (\\sqrt{2}\\,e^{{{i\\,\\pi}\\over{4}}}), and p3 : (\\sqrt{2}\\,\\left({{i}\\over{\\sqrt{2}}}+{{1}\\over{\\sqrt{2}}}\\right)) (which of course is not even (1+i) either!). The problem is that in this case ev( ... , simp) is not idempotent , (i.e. ( \\mbox{simplify}(\\mbox{simplify}(ex)) \\neq \\mbox{simplify}(ex) ) in all cases) and the PHP-maxima connection inevitibly passes an expression to and from Maxima multiple times. If simp:true then we get multiple simplifications, in this example back to p3 . Instead, use polarform_simp to rewrite the expression in polar form, and do some basic simplification of (r) and (\\theta). simp:false; p1:polarform_simp(1+%i); returns p1 as (\\sqrt{2}\\,e^{\\frac{i\\,\\pi}{4}}). Here are some design choices. Positive numbers are returned as real numbers, not as (r e^{i \\times 0}). E.g. polarform_simp(3) is (3). If (r=1) then this is not displayed. E.g. polarform_simp(1/sqrt(2)*(-1+%i)) is (e^{\\frac{3\\,i\\,\\pi}{4}}). If question level simplification is on, then the value will probably get re-simplified to Cartesian form.","title":"Complex Numbers in STACK"},{"location":"CAS/Complex_numbers/#complex-numbers-in-stack","text":"Complex numbers, especially the display of complex numbers, is a surprisingly subtle issue. This is because there is some genuine ambiguity in whether (a+\\mathrm{i}\\, b) is a single object or the sum of two parts. In mathematics we use this ambiguity to our advantage, but in online assesment we need to be more precise. There are also issues of unary minus, e.g. not displaying (1 + (-2)\\mathrm{i}). Similarly we typically do not display numbers like (0+1\\mathrm{i}), unless of course we want to at which point we need the option to do so! The general rules when displaying a complex number in Cartesian form \"(a+\\mathrm{i}\\, b)\" are the real part should always appear to the left of the imaginary part; (i) (or whatever symbol is being used for the imaginary unit) should appear on the right of its coefficient if and only if the coefficient is a numerical value. By numerical value, we mean something like (2\\sqrt{2}\\pi) but not things like ( a \\pi ), even if ( a ) is a constant. Some examples: 3+2*%i should display as (3+2\\,\\mathrm{i}). 3-%i should display as (3-\\mathrm{i}). -a+b*%i should display as (-a+\\mathrm{i}\\,b). -b*%i should display as (-\\mathrm{i}\\,b) (not normally as (0-\\mathrm{i}\\,b)). STACK provides two functions, one which simplifies and one which does not. display_complex(ex) takes an expression ex and tries to display this as a complex number obeying the above rules. In particular, this function makes use of Maxima's realpart and imagpart function to split up ex into real and imaginary parts. To do this it must assume simp:true , and so the real and imaginary part will be simplified. For example, display_complex(1+2*%i/sqrt(2)) is displayed as (1+\\sqrt{2}\\,\\mathrm{i}). If you really want (1+\\frac{2}{\\sqrt{2}}\\,\\mathrm{i}) then you will need to use the non-simplifying alternative below. This function respects normal conventions, e.g. when realpart returns zero this function will not print (0+2\\,\\mathrm{i}), it just prints (2\\,\\mathrm{i}), etc. disp_complex(a, b) assumes a is the real part and b is the imaginary part (no checking is done). This function (mostly) does not simplify its arguments. So disp_complex(0, 2) will appear as (0+2\\,\\mathrm{i}); disp_complex(2/4, 1) will appear as (\\frac{2}{4}+1\\,\\mathrm{i}); and disp_complex(2, 2/sqrt(2)) will appear as (2+\\frac{2}{\\sqrt{2}}\\,\\mathrm{i}). Use the atom null if you do not want to print a zero for the real part, or print one times the imaginary part. disp_complex(null, 2) will appear as (2\\,\\mathrm{i}) and disp_complex(null, null) will appear as just (\\mathrm{i}). Think of null as a non-printable unit (additive or multiplicative). There is one exception. In order to pull out a unary minus to the front, disp_complex(a, b) will simplify b if b is not a number and it contains a unary minus. So, for example disp_complex(a, (-b^2)/b) is displayed (a-\\mathrm{i}\\,b). (We might be able to fix this but this edge case requires disproportionate effort: ask the developers if this is essential). You cannot use these functions to display complex numbers in this form (\\frac{\\mathrm{i}}{2}), both these function will always display as (\\frac{1}{2}\\,\\mathrm{i}). Display respects the multiplication sign used elsewhere within expressions, so that you may have (\\frac{2\\cdot \\pi}{3}\\,\\mathrm{i}) rather than (\\frac{2\\, \\pi}{3}\\,\\mathrm{i}). Note that the function display_complex(ex) returns the inert form disp_complex(a, b) . The expression disp_complex(a, b) is an \"inert form\", which is only used to fine-tune the display. This function is not actually defined and so Maxima always returns it unevaluated. To remove the intert form from an expression, which is needed to manipulate this further, use remove_disp_complex , e.g., with the following. p1:disp_complex(a, b); p2:ev(p1, disp_complex=remove_disp_complex); (Because null has two different meanings within an expression it isn't sufficient to just define disp_complex(ex1, ex2) := ex1+ex2*%i .) There are occasions when you will need to explicitly add brackets to the displayed form of a complex number, e.g. to emphasise it is a single entity. To add brackets there is a further \"inert form\" disp_parens which does nothing but add parentheses when the expression is displayed with the tex() function. For example, p1:disp_parens(display_complex(1+%i))*x^2+disp_parens(display_complex(1-%i)); will display as (\\left( 1+\\mathrm{i} \\right)\\cdot x^2+\\left( 1-\\mathrm{i} \\right)). To remove these inert forms evaluate p2:ev(p1, disp_complex=remove_disp_complex, disp_parens=lambda([ex],ex)); You must remove inert forms before expressions are evaluated by the potential response tree, for example in the feedback variables. For example, disp_complex(a, b) is not algebraically equivalent to a+b*%i .","title":"Complex Numbers in STACK"},{"location":"CAS/Complex_numbers/#polar-forms","text":"A complex number written as (r e^{i\\theta}) is in polar form . The Maxima function polarform re-writes a complex number in this form, however with simp:false it does not simplfy the expressions for the modulus (r) or argument (\\theta) (in STACK). Attempting to re-simplify the expression only returns the number to Cartesian form! As a minimal example, try the following. simp:false; p1:polarform(1+%i); p2:ev(polarform(1+%i), simp); p3:ev(p2, simp); First we have p1 is ( \\left(\\left(1\\right)^2 + \\left(1\\right)^2\\right)^{{{1}\\over{2}}}\\,e^{i\\,{\\rm atan2}\\left(1 , 1\\right)} ). Of course, we really need some simplification of the (r) and the (\\theta) values. Notice the difference between p2 : (\\sqrt{2}\\,e^{{{i\\,\\pi}\\over{4}}}), and p3 : (\\sqrt{2}\\,\\left({{i}\\over{\\sqrt{2}}}+{{1}\\over{\\sqrt{2}}}\\right)) (which of course is not even (1+i) either!). The problem is that in this case ev( ... , simp) is not idempotent , (i.e. ( \\mbox{simplify}(\\mbox{simplify}(ex)) \\neq \\mbox{simplify}(ex) ) in all cases) and the PHP-maxima connection inevitibly passes an expression to and from Maxima multiple times. If simp:true then we get multiple simplifications, in this example back to p3 . Instead, use polarform_simp to rewrite the expression in polar form, and do some basic simplification of (r) and (\\theta). simp:false; p1:polarform_simp(1+%i); returns p1 as (\\sqrt{2}\\,e^{\\frac{i\\,\\pi}{4}}). Here are some design choices. Positive numbers are returned as real numbers, not as (r e^{i \\times 0}). E.g. polarform_simp(3) is (3). If (r=1) then this is not displayed. E.g. polarform_simp(1/sqrt(2)*(-1+%i)) is (e^{\\frac{3\\,i\\,\\pi}{4}}). If question level simplification is on, then the value will probably get re-simplified to Cartesian form.","title":"Polar forms"},{"location":"CAS/Equations/","text":"Asking students to solve equations It is quite common to ask students to solve an algebraic equation. The student's answer may be a list (or set) of numbers. We need to check that this list is Correct: every element of the list satisfies the equation. Complete: every solution of the equation is in the list. The best way to do (1) is not to check algebraic equivalence with the list/set of correct answers! Instead, substitute the student's answer into the equation and see if it works. We proceed by example. Imagine the teacher has asked the student to solve p=0 in the equation defined in the following \"question variables\". p:2*x^2+11*x-5/4; ta:solve(p,x); /* Solve gives a list of equations, we want a set of numbers. */ ta:setify(maplist(rhs,ta)); For solutions we are not interested in order, but we need multiplicity. Therefore a \"bag\" is what we need logically. However, Maxima only has sets and lists. If the student enters a set or list, the AlgEquiv answer test can be used to compare sets and lists, but it does so element-wise. We need to do something different. In the feedback variables we create a new list called \"listans\" as follows, assuming the student's answer is assigned to ans1 . /* Need a *LIST* from this point on, so we have a definite order. */ sans:listify(ans1); /* Substitute into the equation. */ listans:maplist(lambda([ex],ev(p,x=ex)), listify(ans1)); The values of listans are what we get when we substitute in each of the students' answers into the equation. We could also simplify this, but it isn't strictly necessary. /* \"Simplify\" the result (not strictly necessary). */ listans:maplist(fullratsimp, listans); Now we have a list of numbers. We need to compare this with something, but the student's list may have a different number of entries than of the teacher's solution! /* Generate something to compare this list with. */ zl:makelist(0,length(listans)); In the potential response tree, compare listans with zl using the AlgEquiv answer test and the quiet=yes option to suppress all feedback. Next, assume we want to work out which answers in the student's list are wrong. /* To decide which answers in a list are equivalent. */ /* Pick out the wrong answers. */ we:sublist(sans, lambda([ex], not(algebraic_equivalence(ev(p,x=ex),0)))); To use this, we could put the following in the false branch feedback of the first node. The following answers you entered do not satisfy the equation \\[ {@we@}. \\] The above test only makes sure that everything typed in by the student satisfies the equation. In particular, the empty set {} will pass this test! So, we now need to separately check that the student has all the solutions to the equation. To establish this you can check that the length of the teacher's answer is greater than the length of the student's. This can be done with the following test (i.e. the \"greater than\" test). ATGT(length(ta), length(fullratsimp(sans))) If this test is true, then the student has missed some solutions. The point really here is that we are not seeking equivalence with a particular set of numbers, rather we are establishing correctness (all things identified by the student are solutions) and completeness (all the solutions are identified by the student) as separate mathematical properties. Randomly generated variables In the above example, we may have created a randomly generated variable. E.g. v:rand([x,y,z,t]); p:a*v^2+b*v+c; In this case, to make the substitution you need to put in an extra evaluation. listans:maplist(lambda([ex],ev(p,ev(v=ex))), listify(ans1)); Repeated roots! If the teacher asks a student to enter the answer as a set, then by default STACK does not remove duplicates because validation, etc. is done with simp:false . If you want the student to enter repeated roots you must set Auto-simplify to no in the PRT to avoid losing solutions from the student. You can then check that each answer satisfies the equation and the student has the correct number of answers using length(ans1) being equivalent to the correct number using EqualComAss to avoid simplification. Note, that if you \"simplify\" ans1 you are likely to lose answers as sets automatically lose duplicates. Alternatively, you may want to simplify the student's answer to make sure they have the right number of different solutions. This is a separate test. length(fullratsimp(ans1)) Exact circumstances of the question will dictate what to do, and whether the teacher expects students to enter duplicate roots the right number of times.","title":"Asking students to solve equations"},{"location":"CAS/Equations/#asking-students-to-solve-equations","text":"It is quite common to ask students to solve an algebraic equation. The student's answer may be a list (or set) of numbers. We need to check that this list is Correct: every element of the list satisfies the equation. Complete: every solution of the equation is in the list. The best way to do (1) is not to check algebraic equivalence with the list/set of correct answers! Instead, substitute the student's answer into the equation and see if it works. We proceed by example. Imagine the teacher has asked the student to solve p=0 in the equation defined in the following \"question variables\". p:2*x^2+11*x-5/4; ta:solve(p,x); /* Solve gives a list of equations, we want a set of numbers. */ ta:setify(maplist(rhs,ta)); For solutions we are not interested in order, but we need multiplicity. Therefore a \"bag\" is what we need logically. However, Maxima only has sets and lists. If the student enters a set or list, the AlgEquiv answer test can be used to compare sets and lists, but it does so element-wise. We need to do something different. In the feedback variables we create a new list called \"listans\" as follows, assuming the student's answer is assigned to ans1 . /* Need a *LIST* from this point on, so we have a definite order. */ sans:listify(ans1); /* Substitute into the equation. */ listans:maplist(lambda([ex],ev(p,x=ex)), listify(ans1)); The values of listans are what we get when we substitute in each of the students' answers into the equation. We could also simplify this, but it isn't strictly necessary. /* \"Simplify\" the result (not strictly necessary). */ listans:maplist(fullratsimp, listans); Now we have a list of numbers. We need to compare this with something, but the student's list may have a different number of entries than of the teacher's solution! /* Generate something to compare this list with. */ zl:makelist(0,length(listans)); In the potential response tree, compare listans with zl using the AlgEquiv answer test and the quiet=yes option to suppress all feedback. Next, assume we want to work out which answers in the student's list are wrong. /* To decide which answers in a list are equivalent. */ /* Pick out the wrong answers. */ we:sublist(sans, lambda([ex], not(algebraic_equivalence(ev(p,x=ex),0)))); To use this, we could put the following in the false branch feedback of the first node. The following answers you entered do not satisfy the equation \\[ {@we@}. \\] The above test only makes sure that everything typed in by the student satisfies the equation. In particular, the empty set {} will pass this test! So, we now need to separately check that the student has all the solutions to the equation. To establish this you can check that the length of the teacher's answer is greater than the length of the student's. This can be done with the following test (i.e. the \"greater than\" test). ATGT(length(ta), length(fullratsimp(sans))) If this test is true, then the student has missed some solutions. The point really here is that we are not seeking equivalence with a particular set of numbers, rather we are establishing correctness (all things identified by the student are solutions) and completeness (all the solutions are identified by the student) as separate mathematical properties.","title":"Asking students to solve equations"},{"location":"CAS/Equations/#randomly-generated-variables","text":"In the above example, we may have created a randomly generated variable. E.g. v:rand([x,y,z,t]); p:a*v^2+b*v+c; In this case, to make the substitution you need to put in an extra evaluation. listans:maplist(lambda([ex],ev(p,ev(v=ex))), listify(ans1));","title":"Randomly generated variables"},{"location":"CAS/Equations/#repeated-roots","text":"If the teacher asks a student to enter the answer as a set, then by default STACK does not remove duplicates because validation, etc. is done with simp:false . If you want the student to enter repeated roots you must set Auto-simplify to no in the PRT to avoid losing solutions from the student. You can then check that each answer satisfies the equation and the student has the correct number of answers using length(ans1) being equivalent to the correct number using EqualComAss to avoid simplification. Note, that if you \"simplify\" ans1 you are likely to lose answers as sets automatically lose duplicates. Alternatively, you may want to simplify the student's answer to make sure they have the right number of different solutions. This is a separate test. length(fullratsimp(ans1)) Exact circumstances of the question will dictate what to do, and whether the teacher expects students to enter duplicate roots the right number of times.","title":"Repeated roots!"},{"location":"CAS/Equivalence_reasoning/","text":"Reasoning by equivalence NOTE: Reasoning by equivalence was introduced in STACK 3.6. This area of STACK is still under active development, and features and behaviour may change significantly in future versions, subject to trials with students and feedback from colleagues. We currently provide support for basic single variable polynomials, very simple inequalities, simple simultaneous equations. There is no support for algebraic manipulations involving logarithms and trig functions although individual examples may work. Wider support is intended for future versions. A simple getting started with equivalence reasoning guide can be found elsewhere. What is reasoning by equivalence and this input type? Reasoning by equivalence is a particularly important activity in elementary algebra. It is an iterative formal symbolic procedure where algebraic expressions, or terms within an expression, are replaced by an equivalent until a \"solved\" form is reached. An example of solving a quadratic equation is shown below. [\\begin{array}{cc} \\ & x^2-x=30 & \\ \\color{green}{\\Leftrightarrow} & x^2-x-30=0 & \\ \\color{green}{\\Leftrightarrow} & \\left(x-6\\right)\\cdot \\left(x+5\\right)=0 \\ \\color{green}{\\Leftrightarrow} & x-6=0\\lor x+5=0 \\ \\color{green}{\\Leftrightarrow} & x=6\\lor x=-5 \\end{array}] The point is that replacing an expression or a sub-expression in a problem by an equivalent expression provides a new problem having the same solutions. This input type enables us to capture and evaluate student's line-by-line reasoning, i.e. their steps in working, during this kind of activity. Reasoning by equivalence is very common in elementary mathematics. It is either the entire task (such as when solving a quadratic) or it is an important part of a bigger problem. E.g. proving the induction step is often achieved by reasoning by equivalence. How do students use this input? Instructions for students . In traditional practice students work line by line rewriting an equation until it is solved. This input type is designed to capture this kind of working and evaluate it based on the assumption that each line should be equivalent to the previous one. Instructions for students are here . Some common observations about this form of reasoning are Students often use no logical connectives between lines. Students ignore the natural domain of an expression, e.g. in (\\frac{1}{x}) the value (x=0) is excluded from the domain of definition. Operations which do not result in equivalence are often used, e.g. squaring both sides of an equation. This input type mirrors current common practice and does not expect students to indicate either logic or domains. The input type itself will give students feedback on these issues. Note that students must use correct propositional logic connectives or and and . E.g. their answer must be something correct such as x=1 or x=2 , not something sloppy like x=1 or 2 or x=1,2 . It certainly can't be something wrong such as x=1 and x=2 which is often seen in written answers! Note that students may not take square roots of both sides of an equation. This will be rejected because it is not equivalent! Similarly, students may not cancel terms from both sides which may be zero. As we require equivalence, students may not multiply either. This will probably not correspond to students' expectations, and may take a bit of getting used to. But should students really use logical connectives? Yes, I (CJS) believe they should but to require this from the input type now would be too big a step for students and their teachers. Students are already being expected to use connectives such as and and or correctly. The input type uses these connectives and in the future options may be added to this input type which require students to be explicit about logical connectives, especially when we add support for implication in addition to equivalence. As we gain confidence in teaching with equivalence reasoning, we will add more options to this input type. If you have strong views on how this input type should behave, please contact the developers. Validation and correctness STACK carefully separates out validation of a student's answer from the correctness . This idea is encapsulated in the separation of validation feedback via the tags [[validation]] which is tied to inputs, from the potential response trees which establish the mathematical properties. Each line of a student's answer must be a valid expression, just as with the algebraic input type. However, sets, lists and matrices are not permitted in this input type. The internal result is a list of expressions (equations or inequalities). Example use cases for this input type Reasoning by equivalence is the entire task. The argument must be correct and the last line is the final answer. In a formative setting, we want immediate feedback on whether the argument consists of equivalent lines. This feedback can be given as the student types line by line, or at the end when they press \"check\". The ability to give feedback on the equivalence of adjacent lines as the student types their answer somewhat blurs the distinction between validation and correctness, but in a way which is probably very useful to students. Notes for question authors The position of the validation tags, e.g. [[validation:ans1]] are ignored for this input type. Validation feedback is always displayed next to the TextArea into which students type their answer. The teacher's answer and any syntax hint must be a list. If you just pass in an expression strange behaviour may result. The input type works very much like the TextArea input type. Internally, the student's lines are turned into a list. If you want to use the \"final answer\" then use code such as last(ans1) in your potential response tree. If students type in an expression rather than an equation, the system will assume they forgot to add (=0) at the end and act accordingly. This is displayed to the student. If the student starts their line with an = sign, this is accepted. Teachers cannot use a prefix = . In a worked solution the teacher must use the prefix function stackeq . For example, ta:[(x-1)^2,stackeq(x^2-2*x+1)] Teachers must explicitly use the nounor and nounand commands, not the and and or logic. For more details see the section on simplification . For example, a worked solution might be ta:[p=0,(v-n1)*(v-n2)=0,v-n1=0 nounor v-n2=0,v=n1 nounor v=n2] Input type options To enter options for this input use the \"extra options field\". Options should be a comma separated list of values only from the following list. hideequiv does not display whether each line is equivalent to the next at validation time. hidedomain does not display natural domain information. comments allows students to include comments in their answer. By default comments are not permitted as it breaks up the argument and stops automatic marking. firstline takes the first line of the teacher's answer and forces the student to have this as the first line of the student's answer. The test used is equality up to commutativity and associativity (EqualComAss answer test). assume_pos sets the value of Maxima's assume_pos variable to be true. If we assume_pos they any negative solutions will be ignored, whether or not they exist. So (x=\\pm 2) will now be equivalent to (x=2). You might not want this equivalence. In particular, this also has the effect of condoning squaring or rooting both sides of an equation. For example (x^4=2) will now be equivalent to (x=2) (rather than (x=2 \\vee x=-2)). This is not the default, but is useful in situations where a student is rearranging an equation to a given subject, and all the variables are assumed to be positive. Note, this option is only for the input type. You will also need to set this in the question options to also affect the answer test. assume_real sets an internal flag to work over the real numbers. If true then (x=1) will be considered equivalent to (x^3=1). Note, this option is only for the input type. You will also need to set this in the question options to also affect the answer test. calculus allows calculus operations in an argument. Note, this option is only for the input type. You will also need to set this in the answer test options to also affect the answer test. This is at a very early stage of development. For example, constants of integration are not currently checked by this currently. If the syntax hint is just the keyword firstline then the first line of the value of the teacher's answer will appear as a syntax hint. This enables a randomly generated syntax hint to appear in the box. Answer tests There are a number of answer tests which seek to establish whether a student's list of expressions are all equivalent. In these tests there is no concept of \"step size\" or any test that a student has worked in a sensible order. The tests share code with the input type, and feedback from the test will be identical to that from the input when this is shown. You will also need to set options, as in the input type above, to get the answer tests to reflect the options set. The options supported are assume_pos , assume_real , and calculus . EquivReasoning This test establishes that all the items in the list are equivalent, using algebraic equivalence. EquivFirst This test establishes that all the items in the list are equivalent, using algebraic equivalence. Test that the first line of the student's answer is equivalent to the first line of the teacher's answer up to commutativity and associativity (using the answer test EqualComAss.) To test the last line of an argument is in the correct form will require a separate node in the potential response tree. To add this to the answer test gives too many possibilities. Natural domains The equivalence reasoning input tracks natural domains of expressions. This is via the STACK's natural_domain(ex) function. Natural domains are shown to students in the validation feedback. [ \\begin{array}{lll} &\\frac{5\\,x}{2\\,x+1}-\\frac{3}{x+1}=1&{\\color{blue}{{x \\not\\in {\\left {-1 , -\\frac{1}{2} \\right }}}}}\\cr \\color{green}{\\Leftrightarrow}&5\\,x\\,\\left(x+1\\right)-3\\,\\left(2\\,x+1\\right)=\\left(x+1\\right)\\,\\left(2\\,x+1\\right)& \\end{array} ] At the moment STACK quietly condones silent domain enlargements such as in the above example. Repeated roots There is general ambiguity about how to express multiplicity of roots. If ((x-1)^2=0) is not equivalent to (x=1) then students need to indicate multiplicity of roots, but there appears to be no consensus on how this should be notated. The equation ( (x-3)^2 = 0 ) and the expression ( x=3 \\mbox{ or } x=3) are considered to be equivalent, because they have the same roots with the same multiplicity. The expressions ( x=3 \\mbox{ or } x=3) and ( x=3) have the same variety, but are not identical. This is, of course, slightly awkward since logical ``or'' is idempotent, and so ( x=3 \\mbox{ or } x=3) and ( x=3) would be equivalent at a symbolic level. For this reason, STACK accepts (x=3) as equivalent to ((x-3)^2=0), but with an acknowledgement. [ \\begin{array}{lll} &\\left(x-3\\right)^3=0& \\cr \\color{green}{\\mbox{(Same roots)}}&x=3& \\cr \\end{array} ] Other functions The maxima function stack_disp_arg(ex, [showlogic, showdomain]) can be used to display a list of expressions ex in the same form as used in the input and answer tests. This is useful for displaying the teacher's worked solution in the general feedback. The second two arguments are optional. 1. The boolean variable showlogic determines whether the equivalence symbols are shown. For a worked solution you probably need to use the following: 2. The boolean variable showdomain determines whether the natural domains are shown. For a worked solution you probably need to use the function \\[ {@stack_disp_arg(ta)@} \\] Without the equivalence symbols you use \\[ {@stack_disp_arg(ta, false)@} \\] With the equivalence symbols but without natural domains you use \\[ {@stack_disp_arg(ta, true, false)@} \\] Finding a step in working It is relatively common to want students to take a \"particular step\" in their argument. That is to say, to expect a particular intermediate expression to appear explicitly in their list of answers. For example, imagine you want students to \"simplify\" ( \\log_5(25) ) to (2). It is important to see evidence of the expression ( \\log_5(5^2) ) in their answer. The teacher's answer is, e.g. ta:[lg(25,5),stackeq(lg(5^2,5)),stackeq(2*lg(5,5)),stackeq(2*1),stackeq(2)] We want to accept sa1:[lg(25,5),stackeq(lg(5^2,5)),stackeq(2)] But reject sa0:[lg(25,5),stackeq(2)] Both of these are correct reasoning arguments, but the second is missing the desired step. To facilitate this search we provide the function stack_equiv_find_step(ex, exl) . This looks for expression ex in the list exl using ATEqualComAss . It returns the list of indices of the position. If you just want to know if the expression is missing use the predicate emptyp . Note, this function strips off stackeq before testing, so this function will find ( \\log_5(5^2) ) in both sa1 and sa2 below. sa2:[lg(25,5),lg(5^2,5),2] Longer term plans Define (x\\neq a) operator. Needed to exclude single numbers from the domain. Define (x\\in X) operator, for student use. Provide better tools for dealing with assessment, such as checking for particular steps. Provide better feedback to students about which steps they have taken and what goes wrong. In the long term, we may fully implement the ideas in the paper Sangwin, C.J. An Audited Elementary Algebra The Mathematical Gazette, July 2015. In the future students might also be expected to say what they are doing, e.g. ``add (a) to both sides\", as well as just do it. Quite how it does this, and the options available to the teacher is what is most likely to change. We would like to introduce the idea of a model answer . STACK will then establish the extent to which the student's answer follows this model solution.","title":"Reasoning by equivalence"},{"location":"CAS/Equivalence_reasoning/#reasoning-by-equivalence","text":"NOTE: Reasoning by equivalence was introduced in STACK 3.6. This area of STACK is still under active development, and features and behaviour may change significantly in future versions, subject to trials with students and feedback from colleagues. We currently provide support for basic single variable polynomials, very simple inequalities, simple simultaneous equations. There is no support for algebraic manipulations involving logarithms and trig functions although individual examples may work. Wider support is intended for future versions. A simple getting started with equivalence reasoning guide can be found elsewhere.","title":"Reasoning by equivalence"},{"location":"CAS/Equivalence_reasoning/#what-is-reasoning-by-equivalence-and-this-input-type","text":"Reasoning by equivalence is a particularly important activity in elementary algebra. It is an iterative formal symbolic procedure where algebraic expressions, or terms within an expression, are replaced by an equivalent until a \"solved\" form is reached. An example of solving a quadratic equation is shown below. [\\begin{array}{cc} \\ & x^2-x=30 & \\ \\color{green}{\\Leftrightarrow} & x^2-x-30=0 & \\ \\color{green}{\\Leftrightarrow} & \\left(x-6\\right)\\cdot \\left(x+5\\right)=0 \\ \\color{green}{\\Leftrightarrow} & x-6=0\\lor x+5=0 \\ \\color{green}{\\Leftrightarrow} & x=6\\lor x=-5 \\end{array}] The point is that replacing an expression or a sub-expression in a problem by an equivalent expression provides a new problem having the same solutions. This input type enables us to capture and evaluate student's line-by-line reasoning, i.e. their steps in working, during this kind of activity. Reasoning by equivalence is very common in elementary mathematics. It is either the entire task (such as when solving a quadratic) or it is an important part of a bigger problem. E.g. proving the induction step is often achieved by reasoning by equivalence.","title":"What is reasoning by equivalence and this input type?"},{"location":"CAS/Equivalence_reasoning/#how-do-students-use-this-input","text":"Instructions for students . In traditional practice students work line by line rewriting an equation until it is solved. This input type is designed to capture this kind of working and evaluate it based on the assumption that each line should be equivalent to the previous one. Instructions for students are here . Some common observations about this form of reasoning are Students often use no logical connectives between lines. Students ignore the natural domain of an expression, e.g. in (\\frac{1}{x}) the value (x=0) is excluded from the domain of definition. Operations which do not result in equivalence are often used, e.g. squaring both sides of an equation. This input type mirrors current common practice and does not expect students to indicate either logic or domains. The input type itself will give students feedback on these issues. Note that students must use correct propositional logic connectives or and and . E.g. their answer must be something correct such as x=1 or x=2 , not something sloppy like x=1 or 2 or x=1,2 . It certainly can't be something wrong such as x=1 and x=2 which is often seen in written answers! Note that students may not take square roots of both sides of an equation. This will be rejected because it is not equivalent! Similarly, students may not cancel terms from both sides which may be zero. As we require equivalence, students may not multiply either. This will probably not correspond to students' expectations, and may take a bit of getting used to. But should students really use logical connectives? Yes, I (CJS) believe they should but to require this from the input type now would be too big a step for students and their teachers. Students are already being expected to use connectives such as and and or correctly. The input type uses these connectives and in the future options may be added to this input type which require students to be explicit about logical connectives, especially when we add support for implication in addition to equivalence. As we gain confidence in teaching with equivalence reasoning, we will add more options to this input type. If you have strong views on how this input type should behave, please contact the developers.","title":"How do students use this input?"},{"location":"CAS/Equivalence_reasoning/#validation-and-correctness","text":"STACK carefully separates out validation of a student's answer from the correctness . This idea is encapsulated in the separation of validation feedback via the tags [[validation]] which is tied to inputs, from the potential response trees which establish the mathematical properties. Each line of a student's answer must be a valid expression, just as with the algebraic input type. However, sets, lists and matrices are not permitted in this input type. The internal result is a list of expressions (equations or inequalities).","title":"Validation and correctness"},{"location":"CAS/Equivalence_reasoning/#example-use-cases-for-this-input-type","text":"Reasoning by equivalence is the entire task. The argument must be correct and the last line is the final answer. In a formative setting, we want immediate feedback on whether the argument consists of equivalent lines. This feedback can be given as the student types line by line, or at the end when they press \"check\". The ability to give feedback on the equivalence of adjacent lines as the student types their answer somewhat blurs the distinction between validation and correctness, but in a way which is probably very useful to students.","title":"Example use cases for this input type"},{"location":"CAS/Equivalence_reasoning/#notes-for-question-authors","text":"The position of the validation tags, e.g. [[validation:ans1]] are ignored for this input type. Validation feedback is always displayed next to the TextArea into which students type their answer. The teacher's answer and any syntax hint must be a list. If you just pass in an expression strange behaviour may result. The input type works very much like the TextArea input type. Internally, the student's lines are turned into a list. If you want to use the \"final answer\" then use code such as last(ans1) in your potential response tree. If students type in an expression rather than an equation, the system will assume they forgot to add (=0) at the end and act accordingly. This is displayed to the student. If the student starts their line with an = sign, this is accepted. Teachers cannot use a prefix = . In a worked solution the teacher must use the prefix function stackeq . For example, ta:[(x-1)^2,stackeq(x^2-2*x+1)] Teachers must explicitly use the nounor and nounand commands, not the and and or logic. For more details see the section on simplification . For example, a worked solution might be ta:[p=0,(v-n1)*(v-n2)=0,v-n1=0 nounor v-n2=0,v=n1 nounor v=n2]","title":"Notes for question authors"},{"location":"CAS/Equivalence_reasoning/#input-type-options","text":"To enter options for this input use the \"extra options field\". Options should be a comma separated list of values only from the following list. hideequiv does not display whether each line is equivalent to the next at validation time. hidedomain does not display natural domain information. comments allows students to include comments in their answer. By default comments are not permitted as it breaks up the argument and stops automatic marking. firstline takes the first line of the teacher's answer and forces the student to have this as the first line of the student's answer. The test used is equality up to commutativity and associativity (EqualComAss answer test). assume_pos sets the value of Maxima's assume_pos variable to be true. If we assume_pos they any negative solutions will be ignored, whether or not they exist. So (x=\\pm 2) will now be equivalent to (x=2). You might not want this equivalence. In particular, this also has the effect of condoning squaring or rooting both sides of an equation. For example (x^4=2) will now be equivalent to (x=2) (rather than (x=2 \\vee x=-2)). This is not the default, but is useful in situations where a student is rearranging an equation to a given subject, and all the variables are assumed to be positive. Note, this option is only for the input type. You will also need to set this in the question options to also affect the answer test. assume_real sets an internal flag to work over the real numbers. If true then (x=1) will be considered equivalent to (x^3=1). Note, this option is only for the input type. You will also need to set this in the question options to also affect the answer test. calculus allows calculus operations in an argument. Note, this option is only for the input type. You will also need to set this in the answer test options to also affect the answer test. This is at a very early stage of development. For example, constants of integration are not currently checked by this currently. If the syntax hint is just the keyword firstline then the first line of the value of the teacher's answer will appear as a syntax hint. This enables a randomly generated syntax hint to appear in the box.","title":"Input type options"},{"location":"CAS/Equivalence_reasoning/#answer-tests","text":"There are a number of answer tests which seek to establish whether a student's list of expressions are all equivalent. In these tests there is no concept of \"step size\" or any test that a student has worked in a sensible order. The tests share code with the input type, and feedback from the test will be identical to that from the input when this is shown. You will also need to set options, as in the input type above, to get the answer tests to reflect the options set. The options supported are assume_pos , assume_real , and calculus .","title":"Answer tests"},{"location":"CAS/Equivalence_reasoning/#equivreasoning","text":"This test establishes that all the items in the list are equivalent, using algebraic equivalence.","title":"EquivReasoning"},{"location":"CAS/Equivalence_reasoning/#equivfirst","text":"This test establishes that all the items in the list are equivalent, using algebraic equivalence. Test that the first line of the student's answer is equivalent to the first line of the teacher's answer up to commutativity and associativity (using the answer test EqualComAss.) To test the last line of an argument is in the correct form will require a separate node in the potential response tree. To add this to the answer test gives too many possibilities.","title":"EquivFirst"},{"location":"CAS/Equivalence_reasoning/#natural-domains","text":"The equivalence reasoning input tracks natural domains of expressions. This is via the STACK's natural_domain(ex) function. Natural domains are shown to students in the validation feedback. [ \\begin{array}{lll} &\\frac{5\\,x}{2\\,x+1}-\\frac{3}{x+1}=1&{\\color{blue}{{x \\not\\in {\\left {-1 , -\\frac{1}{2} \\right }}}}}\\cr \\color{green}{\\Leftrightarrow}&5\\,x\\,\\left(x+1\\right)-3\\,\\left(2\\,x+1\\right)=\\left(x+1\\right)\\,\\left(2\\,x+1\\right)& \\end{array} ] At the moment STACK quietly condones silent domain enlargements such as in the above example.","title":"Natural domains"},{"location":"CAS/Equivalence_reasoning/#repeated-roots","text":"There is general ambiguity about how to express multiplicity of roots. If ((x-1)^2=0) is not equivalent to (x=1) then students need to indicate multiplicity of roots, but there appears to be no consensus on how this should be notated. The equation ( (x-3)^2 = 0 ) and the expression ( x=3 \\mbox{ or } x=3) are considered to be equivalent, because they have the same roots with the same multiplicity. The expressions ( x=3 \\mbox{ or } x=3) and ( x=3) have the same variety, but are not identical. This is, of course, slightly awkward since logical ``or'' is idempotent, and so ( x=3 \\mbox{ or } x=3) and ( x=3) would be equivalent at a symbolic level. For this reason, STACK accepts (x=3) as equivalent to ((x-3)^2=0), but with an acknowledgement. [ \\begin{array}{lll} &\\left(x-3\\right)^3=0& \\cr \\color{green}{\\mbox{(Same roots)}}&x=3& \\cr \\end{array} ]","title":"Repeated roots"},{"location":"CAS/Equivalence_reasoning/#other-functions","text":"The maxima function stack_disp_arg(ex, [showlogic, showdomain]) can be used to display a list of expressions ex in the same form as used in the input and answer tests. This is useful for displaying the teacher's worked solution in the general feedback. The second two arguments are optional. 1. The boolean variable showlogic determines whether the equivalence symbols are shown. For a worked solution you probably need to use the following: 2. The boolean variable showdomain determines whether the natural domains are shown. For a worked solution you probably need to use the function \\[ {@stack_disp_arg(ta)@} \\] Without the equivalence symbols you use \\[ {@stack_disp_arg(ta, false)@} \\] With the equivalence symbols but without natural domains you use \\[ {@stack_disp_arg(ta, true, false)@} \\]","title":"Other functions"},{"location":"CAS/Equivalence_reasoning/#finding-a-step-in-working","text":"It is relatively common to want students to take a \"particular step\" in their argument. That is to say, to expect a particular intermediate expression to appear explicitly in their list of answers. For example, imagine you want students to \"simplify\" ( \\log_5(25) ) to (2). It is important to see evidence of the expression ( \\log_5(5^2) ) in their answer. The teacher's answer is, e.g. ta:[lg(25,5),stackeq(lg(5^2,5)),stackeq(2*lg(5,5)),stackeq(2*1),stackeq(2)] We want to accept sa1:[lg(25,5),stackeq(lg(5^2,5)),stackeq(2)] But reject sa0:[lg(25,5),stackeq(2)] Both of these are correct reasoning arguments, but the second is missing the desired step. To facilitate this search we provide the function stack_equiv_find_step(ex, exl) . This looks for expression ex in the list exl using ATEqualComAss . It returns the list of indices of the position. If you just want to know if the expression is missing use the predicate emptyp . Note, this function strips off stackeq before testing, so this function will find ( \\log_5(5^2) ) in both sa1 and sa2 below. sa2:[lg(25,5),lg(5^2,5),2]","title":"Finding a step in working"},{"location":"CAS/Equivalence_reasoning/#longer-term-plans","text":"Define (x\\neq a) operator. Needed to exclude single numbers from the domain. Define (x\\in X) operator, for student use. Provide better tools for dealing with assessment, such as checking for particular steps. Provide better feedback to students about which steps they have taken and what goes wrong. In the long term, we may fully implement the ideas in the paper Sangwin, C.J. An Audited Elementary Algebra The Mathematical Gazette, July 2015. In the future students might also be expected to say what they are doing, e.g. ``add (a) to both sides\", as well as just do it. Quite how it does this, and the options available to the teacher is what is most likely to change. We would like to introduce the idea of a model answer . STACK will then establish the extent to which the student's answer follows this model solution.","title":"Longer term plans"},{"location":"CAS/Greek/","text":"The Greek Alphabet Greek letters are transliterated using their English names. I.e. [alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigma,tau,upsilon,phi,chi,psi,omega] Upper case Greek letters have an upper-case English first letter. I.e. [Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega] Many of the Greek letters already have a meaning in Maxima. beta : The beta function is defined as (\\gamma(a) \\gamma(b)/\\gamma(a+b)). gamma : The gamma function. delta : This is the Dirac Delta function (only defined in Laplace). zeta : This is the Riemann zeta function. lambda : Defines and returns a lambda expression, i.e. an unnamed function. psi : The derivative of 'log (gamma ( ))' of order ' +1', which has a strange syntax psi[n](x) . It is also defined in the tensor package. Note that by default, psi requires arguments and any attempt to use this variable name without arguments will result in an error. For this reason we delete this function in STACK, and psi becomes an unnamed variable. The following are given a specific value by STACK. pi is defined to be the numeric constant which is the ratio of the diameter to the circumference of a circle. In Maxima this is normally %pi , but STACK also defines the letter pi to have this value. In Maxima the numeric constant which represents the so-called golden mean, ((1 + \\sqrt{5})/2) is %phi . \"Undefine\" Maxima defaults It is currently not possible to \"undefine\" function names and return them to variables.","title":"The Greek Alphabet"},{"location":"CAS/Greek/#the-greek-alphabet","text":"Greek letters are transliterated using their English names. I.e. [alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigma,tau,upsilon,phi,chi,psi,omega] Upper case Greek letters have an upper-case English first letter. I.e. [Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega] Many of the Greek letters already have a meaning in Maxima. beta : The beta function is defined as (\\gamma(a) \\gamma(b)/\\gamma(a+b)). gamma : The gamma function. delta : This is the Dirac Delta function (only defined in Laplace). zeta : This is the Riemann zeta function. lambda : Defines and returns a lambda expression, i.e. an unnamed function. psi : The derivative of 'log (gamma ( ))' of order ' +1', which has a strange syntax psi[n](x) . It is also defined in the tensor package. Note that by default, psi requires arguments and any attempt to use this variable name without arguments will result in an error. For this reason we delete this function in STACK, and psi becomes an unnamed variable. The following are given a specific value by STACK. pi is defined to be the numeric constant which is the ratio of the diameter to the circumference of a circle. In Maxima this is normally %pi , but STACK also defines the letter pi to have this value. In Maxima the numeric constant which represents the so-called golden mean, ((1 + \\sqrt{5})/2) is %phi .","title":"The Greek Alphabet"},{"location":"CAS/Greek/#undefine-maxima-defaults","text":"It is currently not possible to \"undefine\" function names and return them to variables.","title":"\"Undefine\" Maxima defaults"},{"location":"CAS/Inequalities/","text":"Inequalities The non-strict inequalities (\\geq) and (\\leq) are created as infix operators with the respective syntax >=, <= Maxima allows single inequalities, such as (x-1>y), and also support for inequalities connected by logical operators, e.g. ( x>1 \\mbox{ and } x<=5). You can test if two inequalities are the same using the algebraic equivalence test, see the comments on this below. Chained inequalities, for example (1\\leq x \\leq2\\mbox{,}) are not permitted. They must be joined by logical connectives, e.g. \"(x>1) and (x<7)\". As and and or are converted to nounand and nounor in student answers, you may need to use these forms in the teacher's answer as well. For more information, see Propositional Logic . From version 3.6, support for inequalities in Maxima (particularly single variable real inequalities) was substantially improved. Functions to support inequalities ineqprepare(ex) This function ensures an inequality is written in the form ex>0 or ex>=0 where ex is always simplified. This is designed for use with the algebraic equivalence answer test in mind. ineqorder(ex) This function takes an expression, applies ineqprepare() , and then orders the parts. For example, ineqorder(x>1 and x<5); returns 5-x > 0 and x-1 > 0 It also removes duplicate inequalities. Operating at this syntactic level will enable a relatively strict form of equivalence to be established, simply manipulating the form of the inequalities. It will respect commutativity and associativity and and and or , and will also apply not to chains of inequalities. If the algebraic equivalence test detects inequalities, or systems of inequalities, then this function is automatically applied. make_less_ineq(ex) Reverses the order of any inequalities so that we have A<B or A<=B . It does no other transformations. This is useful because when testing equality up to commutativity and associativity we don't perform this transformation. We need to put all inequalities a particular way around. See the EqualComAss test examples for usage. See also Maxima reference topics","title":"Inequalities"},{"location":"CAS/Inequalities/#inequalities","text":"The non-strict inequalities (\\geq) and (\\leq) are created as infix operators with the respective syntax >=, <= Maxima allows single inequalities, such as (x-1>y), and also support for inequalities connected by logical operators, e.g. ( x>1 \\mbox{ and } x<=5). You can test if two inequalities are the same using the algebraic equivalence test, see the comments on this below. Chained inequalities, for example (1\\leq x \\leq2\\mbox{,}) are not permitted. They must be joined by logical connectives, e.g. \"(x>1) and (x<7)\". As and and or are converted to nounand and nounor in student answers, you may need to use these forms in the teacher's answer as well. For more information, see Propositional Logic . From version 3.6, support for inequalities in Maxima (particularly single variable real inequalities) was substantially improved.","title":"Inequalities"},{"location":"CAS/Inequalities/#functions-to-support-inequalities","text":"ineqprepare(ex) This function ensures an inequality is written in the form ex>0 or ex>=0 where ex is always simplified. This is designed for use with the algebraic equivalence answer test in mind. ineqorder(ex) This function takes an expression, applies ineqprepare() , and then orders the parts. For example, ineqorder(x>1 and x<5); returns 5-x > 0 and x-1 > 0 It also removes duplicate inequalities. Operating at this syntactic level will enable a relatively strict form of equivalence to be established, simply manipulating the form of the inequalities. It will respect commutativity and associativity and and and or , and will also apply not to chains of inequalities. If the algebraic equivalence test detects inequalities, or systems of inequalities, then this function is automatically applied. make_less_ineq(ex) Reverses the order of any inequalities so that we have A<B or A<=B . It does no other transformations. This is useful because when testing equality up to commutativity and associativity we don't perform this transformation. We need to put all inequalities a particular way around. See the EqualComAss test examples for usage.","title":"Functions to support inequalities"},{"location":"CAS/Inequalities/#see-also","text":"Maxima reference topics","title":"See also"},{"location":"CAS/Matrix/","text":"Matrices and vectors in STACK This page documents the use of matrices in STACK. There is a topics page for setting linear algebra STACK questions. Matrices Note that in Maxima, the operator . represents noncommutative multiplication and scalar product. The star A*B gives element-wise multiplication. The following functions are part of Maxima, but are very useful for us. rowswap(m,i,j) rowadd(m,i,j,k) Where m[i]: m[i] + k * m[j] . rowmul(m,i,k) Where m[i]: k * m[i] . And a function to compute reduced row echelon form rref(m) Assigning individual elements To assign values to individual elements, use the simple syntax such as the following. m:matrix([1,1],[1,2]) m[1,2]:3 Note also Maxima's setelmx function: setelmx (<x>, <i>, <j>, <M>) Assigns <x> to the (<i>, <j>) 'th element of the matrix <M> , and returns the altered matrix. <M> [<i>, <j>]: <x> has the same effect, but returns <x> instead of <M> . Showing working {#Showing-working} It is quite common to want to show part of a matrix calculation \"un-evaluated\". For example, the following is typical. [ \\left[\\begin{array}{cc} 1 & 2 \\ 4 & 5 \\ \\end{array}\\right] + \\left[\\begin{array}{cc} 1 & -1 \\ 1 & 2 \\ \\end{array}\\right] = \\left[\\begin{array}{cc} 1+1 & 2-1 \\ 4+1 & 5+2 \\ \\end{array}\\right] = \\left[\\begin{array}{cc} 2 & 1 \\ 5 & 7 \\ \\end{array}\\right] .] This is achieved, by having a question in which simplification is off, and we define the question variables as follows. A:matrix([1,2],[4,5]); B:matrix([1,-1],[1,2]); C:apply(matrix,zip_with(lambda([l1,l2],zip_with(\"+\",l1,l2)),args(A),args(B))); D:ev(C,simp); Notice the use of zip_with which is not a core Maxima function, but is defined by STACK. The above equation is then generated by the CASText \\[ {@A@}+{@B@}={@C@}={@D@}.\\] A similar procedure is needed for showing working when multiplying matrices. Here we need to loop over the matrices, for square matrices we use the following. A:ev(rand(matrix([5,5],[5,5]))+matrix([2,2],[2,2]),simp); B:ev(rand(matrix([5,5],[5,5]))+matrix([2,2],[2,2]),simp); BT:transpose(B); C:zeromatrix (first(matrix_size(A)), second(matrix_size(A))); S:for a:1 thru first(matrix_size(A)) do for b:1 thru second(matrix_size(A)) do C[ev(a,simp),ev(b,simp)]:apply(\"+\",zip_with(\"*\",A[ev(a,simp)],BT[ev(b,simp)])); D:ev(C,simp); Notice we need to simplify the arguments before we take indices of expressions. This is one problem with simp:false . For non-square matrices we can use this. A:ev(rand(matrix([5,5,5],[5,5,5]))+matrix([2,2,2],[2,2,2]),simp); B:transpose(ev(rand(matrix([5,5,5],[5,5,5]))+matrix([2,2,2],[2,2,2]),simp)); TA:ev(A.B,simp); BT:transpose(B); C:zeromatrix (first(matrix_size(A)), second(matrix_size(B))); S:for a:1 thru first(matrix_size(A)) do for b:1 thru second(matrix_size(B)) do C[ev(a,simp),ev(b,simp)]:apply(\"+\",zip_with(\"*\",A[ev(a,simp)],BT[ev(b,simp)])); D:ev(C,simp); Now it makes no sense to include the point wise multiplication of elements as a possible wrong answer. There must be a more elegant way to do this! Display of matrices ## {#matrixparens} You can set the type of parentheses used to surround matrices in a number of ways. Firstly, the admin user should set the site default in the qtype_stack options page. For an individual question, the teacher can set the variable lmxchar:\"(\"; in any of the usual places, e.g. in the question variables. To set the display of an individual matrix, m say, in CASText you can use {@(lmxchar:\"|\", m)@} Since lmxchar is a global setting in Maxima, you will have to set it back when you next display a matrix. Not ideal, but there we are. Note, STACK only displays matrices with matching parentheses. If you want something like [ f(x) = \\left{ \\begin{array}{cc} 1, & x<0 \\ 0, & x\\geq 0 \\end{array}\\right.] then you will have to display the matrix without parentheses and sort out the mismatching parentheses in the CASText at the level of display. Vectors If you are trying to use the vector notation such as (3i+4j) you will probably want to redefine (i) to be an abstract symbol, not a complex number. More information on this is given under Numbers . Another way to do this is to create matrices as follows: ordergreat(i,j,k); p:matrix([-7],[2],[-3]); q:matrix([i],[j],[k]); Now we can use the dot product to create the vector. The STACK function texboldatoms wraps all atomic variable names in the ephemeral function stackvector , which is typeset in bold. v:texboldatoms(dotproduct(p,q)); If you turn the option \"Multiplication sign\" to none, this should display as [-7\\,{\\bf{i}}+2\\,{\\bf{j}}-3\\,{\\bf{k}}] Notice the use of the function ordergreat . ordergreat can only be used once at the beginning of the question. The vector stackvector(a) and the atom a are different, and are not considered algebraically equivalent. While students may type in stackvector(a) as an answer, they are likely to type in a . The teacher can either (1) add in stackvector ephemeral forms to the student's answer in the feedback variables using texboldatoms or 92) remove all stackvector forms from the teacher's answer by using the destackvector(ex) function on their answer. In the future we may have an option in the input to apply texboldatoms to student's expressions. The display of the ephemeral form of stackvector is controlled by the function stackvectortex , e.g. you can display vectors differently using the following examples. stackvectortex(ex):= block(sconcat(\"{\\\\bf \\\\vec{\", tex1(first(args(ex))), \"}}\")); stackvectortex(ex):= block(sconcat(\"{\\\\bf \\\\underline{\", tex1(first(args(ex))), \"}}\")); which should go in the question variables. Any texput commands in the question variables now become \"context variables\" and will be available to the inputs. So, if in the context of your question you would like a variable such as x to be considered as a vector and displayed as a vector you can add one of the following to the question variables. texput(x, \"\\\\mathbf{\\\\vec{x}}\"); texput(x, \"\\\\mathbf{\\\\underline{x}}\"); Whenever x is then displayed in any part of the question, including the student's input validation or feedback generated by the answer tests, we will have the updated tex for this atom. E.g. texput(x, \"\\\\mathbf{\\\\vec{x}}\"); texput(y, \"\\\\mathbf{\\\\vec{y}}\"); and a student types in a*x+b*y then the tex output will be (a\\cdot \\mathbf{\\vec{x}}+b\\cdot \\mathbf{\\vec{y}}). Vector cross product The wedge product operator is denoted by the tilde ~ . This is the itensor package. This package is not normally loaded by STACK, and in any case the package takes lists and not matrices. For convenience, the following function has been added which requires 3*1 matrices. crossproduct(a,b); Another advantage of this function is the ability to return an un-simplified version with simp:false . Student input Students do find typing in matrices very tedious. Some teachers have asked for a convenient notation such as c(1,2,3) for column vectors and v(1,2,3,4) For row vectors. This is not a core part of STACK currently, but in individual questions you can convert such notation easily into mainstream Maxima using code such as the following. ta1:c(1,2,3); ta2:v(1,2,3); vec_convert(sa) := if op(sa)=c then transpose(matrix(args(sa))) elseif op(sa)=v then matrix(args(sa)); vec_convert(ta1); vec_convert(ta2); Once converted into Matrices, the student's answer will be evaluated by PRTs as matrices. Of course, this will not be reflected in the valuation. If there is sufficient demand for this contact the developers.","title":"Matrices and vectors in STACK"},{"location":"CAS/Matrix/#matrices-and-vectors-in-stack","text":"This page documents the use of matrices in STACK. There is a topics page for setting linear algebra STACK questions.","title":"Matrices and vectors in STACK"},{"location":"CAS/Matrix/#matrices","text":"Note that in Maxima, the operator . represents noncommutative multiplication and scalar product. The star A*B gives element-wise multiplication. The following functions are part of Maxima, but are very useful for us. rowswap(m,i,j) rowadd(m,i,j,k) Where m[i]: m[i] + k * m[j] . rowmul(m,i,k) Where m[i]: k * m[i] . And a function to compute reduced row echelon form rref(m)","title":"Matrices"},{"location":"CAS/Matrix/#assigning-individual-elements","text":"To assign values to individual elements, use the simple syntax such as the following. m:matrix([1,1],[1,2]) m[1,2]:3 Note also Maxima's setelmx function: setelmx (<x>, <i>, <j>, <M>) Assigns <x> to the (<i>, <j>) 'th element of the matrix <M> , and returns the altered matrix. <M> [<i>, <j>]: <x> has the same effect, but returns <x> instead of <M> .","title":"Assigning individual elements"},{"location":"CAS/Matrix/#showing-working-showing-working","text":"It is quite common to want to show part of a matrix calculation \"un-evaluated\". For example, the following is typical. [ \\left[\\begin{array}{cc} 1 & 2 \\ 4 & 5 \\ \\end{array}\\right] + \\left[\\begin{array}{cc} 1 & -1 \\ 1 & 2 \\ \\end{array}\\right] = \\left[\\begin{array}{cc} 1+1 & 2-1 \\ 4+1 & 5+2 \\ \\end{array}\\right] = \\left[\\begin{array}{cc} 2 & 1 \\ 5 & 7 \\ \\end{array}\\right] .] This is achieved, by having a question in which simplification is off, and we define the question variables as follows. A:matrix([1,2],[4,5]); B:matrix([1,-1],[1,2]); C:apply(matrix,zip_with(lambda([l1,l2],zip_with(\"+\",l1,l2)),args(A),args(B))); D:ev(C,simp); Notice the use of zip_with which is not a core Maxima function, but is defined by STACK. The above equation is then generated by the CASText \\[ {@A@}+{@B@}={@C@}={@D@}.\\] A similar procedure is needed for showing working when multiplying matrices. Here we need to loop over the matrices, for square matrices we use the following. A:ev(rand(matrix([5,5],[5,5]))+matrix([2,2],[2,2]),simp); B:ev(rand(matrix([5,5],[5,5]))+matrix([2,2],[2,2]),simp); BT:transpose(B); C:zeromatrix (first(matrix_size(A)), second(matrix_size(A))); S:for a:1 thru first(matrix_size(A)) do for b:1 thru second(matrix_size(A)) do C[ev(a,simp),ev(b,simp)]:apply(\"+\",zip_with(\"*\",A[ev(a,simp)],BT[ev(b,simp)])); D:ev(C,simp); Notice we need to simplify the arguments before we take indices of expressions. This is one problem with simp:false . For non-square matrices we can use this. A:ev(rand(matrix([5,5,5],[5,5,5]))+matrix([2,2,2],[2,2,2]),simp); B:transpose(ev(rand(matrix([5,5,5],[5,5,5]))+matrix([2,2,2],[2,2,2]),simp)); TA:ev(A.B,simp); BT:transpose(B); C:zeromatrix (first(matrix_size(A)), second(matrix_size(B))); S:for a:1 thru first(matrix_size(A)) do for b:1 thru second(matrix_size(B)) do C[ev(a,simp),ev(b,simp)]:apply(\"+\",zip_with(\"*\",A[ev(a,simp)],BT[ev(b,simp)])); D:ev(C,simp); Now it makes no sense to include the point wise multiplication of elements as a possible wrong answer. There must be a more elegant way to do this!","title":"Showing working {#Showing-working}"},{"location":"CAS/Matrix/#display-of-matrices-matrixparens","text":"You can set the type of parentheses used to surround matrices in a number of ways. Firstly, the admin user should set the site default in the qtype_stack options page. For an individual question, the teacher can set the variable lmxchar:\"(\"; in any of the usual places, e.g. in the question variables. To set the display of an individual matrix, m say, in CASText you can use {@(lmxchar:\"|\", m)@} Since lmxchar is a global setting in Maxima, you will have to set it back when you next display a matrix. Not ideal, but there we are. Note, STACK only displays matrices with matching parentheses. If you want something like [ f(x) = \\left{ \\begin{array}{cc} 1, & x<0 \\ 0, & x\\geq 0 \\end{array}\\right.] then you will have to display the matrix without parentheses and sort out the mismatching parentheses in the CASText at the level of display.","title":"Display of matrices ## {#matrixparens}"},{"location":"CAS/Matrix/#vectors","text":"If you are trying to use the vector notation such as (3i+4j) you will probably want to redefine (i) to be an abstract symbol, not a complex number. More information on this is given under Numbers . Another way to do this is to create matrices as follows: ordergreat(i,j,k); p:matrix([-7],[2],[-3]); q:matrix([i],[j],[k]); Now we can use the dot product to create the vector. The STACK function texboldatoms wraps all atomic variable names in the ephemeral function stackvector , which is typeset in bold. v:texboldatoms(dotproduct(p,q)); If you turn the option \"Multiplication sign\" to none, this should display as [-7\\,{\\bf{i}}+2\\,{\\bf{j}}-3\\,{\\bf{k}}] Notice the use of the function ordergreat . ordergreat can only be used once at the beginning of the question. The vector stackvector(a) and the atom a are different, and are not considered algebraically equivalent. While students may type in stackvector(a) as an answer, they are likely to type in a . The teacher can either (1) add in stackvector ephemeral forms to the student's answer in the feedback variables using texboldatoms or 92) remove all stackvector forms from the teacher's answer by using the destackvector(ex) function on their answer. In the future we may have an option in the input to apply texboldatoms to student's expressions. The display of the ephemeral form of stackvector is controlled by the function stackvectortex , e.g. you can display vectors differently using the following examples. stackvectortex(ex):= block(sconcat(\"{\\\\bf \\\\vec{\", tex1(first(args(ex))), \"}}\")); stackvectortex(ex):= block(sconcat(\"{\\\\bf \\\\underline{\", tex1(first(args(ex))), \"}}\")); which should go in the question variables. Any texput commands in the question variables now become \"context variables\" and will be available to the inputs. So, if in the context of your question you would like a variable such as x to be considered as a vector and displayed as a vector you can add one of the following to the question variables. texput(x, \"\\\\mathbf{\\\\vec{x}}\"); texput(x, \"\\\\mathbf{\\\\underline{x}}\"); Whenever x is then displayed in any part of the question, including the student's input validation or feedback generated by the answer tests, we will have the updated tex for this atom. E.g. texput(x, \"\\\\mathbf{\\\\vec{x}}\"); texput(y, \"\\\\mathbf{\\\\vec{y}}\"); and a student types in a*x+b*y then the tex output will be (a\\cdot \\mathbf{\\vec{x}}+b\\cdot \\mathbf{\\vec{y}}).","title":"Vectors"},{"location":"CAS/Matrix/#vector-cross-product","text":"The wedge product operator is denoted by the tilde ~ . This is the itensor package. This package is not normally loaded by STACK, and in any case the package takes lists and not matrices. For convenience, the following function has been added which requires 3*1 matrices. crossproduct(a,b); Another advantage of this function is the ability to return an un-simplified version with simp:false .","title":"Vector cross product"},{"location":"CAS/Matrix/#student-input","text":"Students do find typing in matrices very tedious. Some teachers have asked for a convenient notation such as c(1,2,3) for column vectors and v(1,2,3,4) For row vectors. This is not a core part of STACK currently, but in individual questions you can convert such notation easily into mainstream Maxima using code such as the following. ta1:c(1,2,3); ta2:v(1,2,3); vec_convert(sa) := if op(sa)=c then transpose(matrix(args(sa))) elseif op(sa)=v then matrix(args(sa)); vec_convert(ta1); vec_convert(ta2); Once converted into Matrices, the student's answer will be evaluated by PRTs as matrices. Of course, this will not be reflected in the valuation. If there is sufficient demand for this contact the developers.","title":"Student input"},{"location":"CAS/Maxima/","text":"Introduction to Maxima for STACK users A computer algebra system (CAS) is software that allows the manipulation of mathematical expressions in symbolic form. Most commonly, this is to allow the user to perform some computation. For the purposes of assessment our calculation establishes some relevant properties of the students' answers. These properties include using a predicate function to find if a single expression has a property. For example, are any of the numbers floating points? comparing two expressions using an answer test to compare two expressions. For example, is the student's expression equivalent to the teacher's? randomly generating structured mathematical objects which become parts of a question and plotting graphs of functions. To write more than very simple STACK questions you will need to use some Maxima commands. This documentation does not provide a detailed tutorial on Maxima. A very good introduction is given in Minimal Maxima , which this document assumes you have read. STACK modifies Maxima in a number of ways. Types of object {#Types_of_object} Everything in Maxima is either an atom or an expression . Atoms are either an integer number, float, string or a name. You can use the predicate atom() to decide if its argument is an atom. Expressions have an operator and a list of arguments . Note that the underscore symbol is not an operator. Thus a_1 is an atom in maxima. Display of subscripts and fine tuning the display is explained in the atoms, subscripts and fine tuning the LaTeX display page. Maxima is a very weakly typed language. However, in STACK we need the following \"types\" of expression: equations, i.e. an expression in which the top operation is an equality sign; inequalities, for example ( x<1\\mbox{, or }x\\leq 1); sets, for example, ({1,2,3}); lists, for example, ([1,2,3]). In Maxima ordered lists are entered using square brackets, for example as p:[1,1,2,x^2] . An element is accessed using the syntax p[1] . matrices . The basic syntax for a matrix is p:matrix([1,2],[3,4]) . Each row is a list. Elements are accessed as p[1,2] , etc. logical expression. This is a tree of other expressions connected by the logical and and or . This is useful for expressing solutions to equations, such as x=1 or x=2 . Note, the support for these expressions is unique to STACK. expressions. Expressions come last, since they are just counted as being not the others! STACK defines predicate functions to test for each of these types. Numbers {#Numbers} Numbers are important in assessment, and there is more specific and detailed documentation on how numbers are treated: Numbers in STACK . Alias STACK defines the following function alias names simplify := fullratsimp int := integrate The absolute value function in Maxima is entered as abs() . STACK also permits you to enter using | symbols, i.e. |x| . This is an alias for abs . Note that abs(x) will be displayed by STACK as (|x|). STACK also redefined a small number of functions The plot command plot2d is not used in STACK questions. Use plot instead, which is documented here . This ensures your image files are available on the server. The random number command random is not used in STACK questions. Use the command rand instead, which is documented here . This ensures pseudorandom numbers are generated and a student gets the same version each time they login. Parts of Maxima expressions {#Parts_of_Maxima_expressions} op(x) - the top operator It is often very useful to take apart a Maxima expression. To help with this Maxima has a number of commands, including op(ex) , args(ex) and part(ex,n) . Maxima has specific documentation on this. In particular, op(ex) returns the main operator of the expression ex . This command has some problems for STACK. calling op(ex) on an atom (see Maxima's documentation on the predicate atom(ex) ) such as numbers or variable names, cause op(ex) to throw an error. op(ex) sometimes returns a string, sometimes not. the unary minus causes problems. E.g. in -1/(1+x) the operation is not \"/\", as you might expect, but it is \"-\" instead! To overcome these problems STACK has a command safe_op(ex) This always returns a string. For an atom this is empty, i.e. \"\" . It also sorts out some unary minus problems. get_ops(ex) - all operators This function returns a set of all operators in an expression. Useful if you want to find if multiplication is used anywhere in an expression. Maxima commands defined by STACK {#Maxima_commands_defined_by_STACK} It is very useful when authoring questions to be able to test out Maxima code in the same environment which STACK uses Maxima. That is to say, with the settings and STACK specific functions loaded. To do this see STACK-Maxima sandbox . STACK creates a range of additional functions and restricts those available, many of which are described within this documentation. See also Predicate functions . Command Description factorlist(ex) Returns a list of factors of ex without multiplicities. zip_with(f,a,b) This function applies the binary function (f) to two lists (a) and (b) returning a list. An example is given in adding matrices to show working . coeff_list(ex,v) This function takes an expression ex and returns a list of coefficients of v . coeff_list_nz(ex,v) This function takes an expression ex and returns a list of nonzero coefficients of v . divthru(ex) Takes an algebraic fraction, e.g. ((x^4-1)/(x+2)) and divides through by the denominator, to leave a polynomial and a proper fraction. Useful in feedback, or steps of a calculation. stack_strip_percent(ex,var) Removes any variable beginning with the % character from ex and replace them with variables from var . Useful for use with solve, ode2 etc. Solve and ode2 . exdowncase(ex) Takes the expression ex and substitutes all variables for their lower case version (cf sdowncase(ex) in Maxima). This is very useful if you don't care if a student uses the wrong case, just apply this function to their answer before using an answer test . Note, of course, that exdowncase(X)-x=0. stack_reset_vars Resets constants, e.g. (i), as abstract symbols, see Numbers . safe_op(ex) Returns the operation of the expression as a string. Atoms return an empty string (rather than throwing an error as does op ). comp_square(ex,v) Returns a quadratic ex in the variable v in completed square form. degree(ex,v) Returns the degree of the expanded form of ex in the variable v . See also Maxima's hipow command. unary_minus_sort(ex) Tidies up the way unary minus is represented within expressions when simp:false . See also simplification . texboldatoms(ex) Displays all non-numeric atoms in bold. Useful for vector questions. Assignment ## {#assignment} In Maxima the assignment of a value to a variable is very unusual . Input Result a:1 Assignment of the value (1) to (a). a=1 An equation, yet to be solved. f(x):=x^2 Definition of a function. In STACK simple assignments are of the more conventional form key : value , for example, n : rand(3)+2; p : (x-1)^n; Of course, these assignments can make use of Maxima's functions to manipulate expressions. p : expand( (x-3)*(x-4) ); Another common task is that of substitution . This can be performed with Maxima's subst command. This is quite useful, for example if we define (p) as follows, in the then we can use this in response processing to determine if the student's answer is odd. p : ans1 + subst(-x,x,ans1); All sorts of properties can be checked for in this way. For example, interpolates. Another example is a stationary point of (f(x)) at (x=a), which can be checked for using p : subst(a,x,diff(ans1,x)); Here we have assumed a is some point given to the student, ans1 is the answer and that (p) will be used in the response processing tree. You can use Maxima's looping structures within Question variables. For example n : 1; for a:-3 thru 26 step 7 do n:n+a; The result will be (n=56). It is also possible to define functions within the question variables for use within a question. f(x) := x^2; n : f(4); Logarithms STACK loads the contributed Maxima package log10 . This defines logarithms to base (10) automatically. STACK also creates two aliases ln is an alias for (\\log), which are natural logarithms lg is an alias for (\\log_{10}), which are logarithms to base (10). It is not possible to redefine the command log to be to the base (10). Sets, lists, sequences, n-tuples It is very useful to be able to display expressions such as comma separated lists, and n-tuples [ 1,2,3,4,\\cdots ] [ (1,2,3,4) ] Maxima has in-built functions for lists, which are displayed with square brackets ([1,2,3,4]), and sets with curly braces ( {1,2,3,4} ). Maxima has no default functions for n-tuples or for sequences. STACK provides an inert function sequence . All this does is display its arguments without brackets. For example sequence(1,2,3,4) is displayed (1,2,3,4). STACK provides convenience functions. sequenceify , creates a sequence from the arguments of the expression. This turns lists, sets etc. into a sequence. sequencep is a predicate to decide if the expression is a sequence. The atom dotdotdot is displayed using the tex \\ldots which looks like (\\ldots). This atom cannot be entered by students. STACK provides an inert function ntuple . All this does is display its arguments with round brackets. For example ntuple(1,2,3,4) is displayed ((1,2,3,4)). ntupleify and ntuplep construct and test for ntuples. In strict Maxima syntax (a,b,c) is equivalent to block(a,b,c) . If students type in (a,b,c) using a STACK input it is filtered to ntuple(a,b,c) . Teachers must use the ntuple function explicitly to construct question variables, teacher's answers, test cases and so on. The ntuple is useful for students to type in coordinates. If you want to use these functions, then you can create question variables as follows L1:[a,b,c,d]; D1:apply(ntuple, L1); L2:args(D1); D2:sequenceify(L2); Then L1 is a list and is displayed with square brackets as normal. D1 has operator ntuple and so is displayed with round brackets. L2 has operator list and is displayed with square brackets. Lastly, D2 is an sequence and is displayed without brackets. You can, of course, apply these functions directly. T1:ntuple(a,b,c); S1:sequence(a,b,c,dotdotdot); If you want to use sequence or ntuple in a PRT comparison, you probably want to turn them back into lists. E.g. ntuple(1,2,3) is not algebraically equivalent to [1,2,3] . To do this use the args function. We may, in the future, give more active meaning to the data types of sequence and ntuple . Currently, students can enter expressions with \"implied ntuples\" E.g Student input of (1,2,3) is interpreted as ntuple(1,2,3) . Student input of {(1,2,3),(4,5,6)} is interpreted as {ntuple(1,2,3),ntuple(4,5,6)} . Since no operations are defined on ntuples, students cannot currenlty enter things like (1,2,3)+s*(1,0,0) . There is nothing to stop a teacher defining the expression tree ntuple(1,2,3)+s*ntuple(1,0,0) , but the operations + and * are not defined for ntuples and so nothing will happen! If you want a student to enter the equation of a line/plane they should probably use the matrix syntax for vectors. (This may change in the future). Matrices have options to control the display of the braces. Matrices are displayed without commas. If you are interacting with javascript do not use sequenceify . If you are interacting with javascript, such ss JSXGraph , then you may want to output a list of values without all the LaTeX and without Maxima's normal bracket symbols. You can use stack_disp_comma_separate([a,b,sin(pi)]); This function turns a list into a string representation of its arguments, without braces. Internally, it applies string to the list of values (not TeX!). However, you might still get things like %pi in the output. You can use this with mathematical input: {@stack_disp_comma_separate([a,b,sin(pi)])@} and you will get the result a, b, sin(%pi/7) (without the string quotes) because when a Maxima variable is a string we strip off the outside quotes and don't typeset this in maths mode. Functions It is sometimes useful for the teacher to define functions as part of a STACK question. This can be done in the normal way in Maxima using the notation. f(x):=x^2; Using Maxima's define() command is forbidden. An alternative is to define f as an \"unnamed function\" using the lambda command. f:lambda([x],x^2); Here we are giving a name to an \"unnamed function\" which seems perverse. Unnamed functions are extremely useful in many situations. For example, a piecewise function can be defined by either of these two commands f(x):=if (x<0) then 6*x-2 else -2*exp(-3*x); f:lambda([x],if (x<0) then 6*x-2 else -2*exp(-3*x)); You can then plot this using {@plot(f(x),[x,-1,1])@} Maxima \"gotcha\"s! See the section above on assignment . Maxima does not have a degree command for polynomials. We define one via the hipow command. Matrix multiplication is the dot, e.g. A.B . The star A*B gives element-wise multiplication. The atoms a1 and a_1 are not considered to be algebraically equivalent. Further information and links Minimal Maxima Maxima on SourceForge See also Maxima reference topics","title":"Introduction to Maxima for STACK users"},{"location":"CAS/Maxima/#introduction-to-maxima-for-stack-users","text":"A computer algebra system (CAS) is software that allows the manipulation of mathematical expressions in symbolic form. Most commonly, this is to allow the user to perform some computation. For the purposes of assessment our calculation establishes some relevant properties of the students' answers. These properties include using a predicate function to find if a single expression has a property. For example, are any of the numbers floating points? comparing two expressions using an answer test to compare two expressions. For example, is the student's expression equivalent to the teacher's? randomly generating structured mathematical objects which become parts of a question and plotting graphs of functions. To write more than very simple STACK questions you will need to use some Maxima commands. This documentation does not provide a detailed tutorial on Maxima. A very good introduction is given in Minimal Maxima , which this document assumes you have read. STACK modifies Maxima in a number of ways.","title":"Introduction to Maxima for STACK users"},{"location":"CAS/Maxima/#types-of-object-types_of_object","text":"Everything in Maxima is either an atom or an expression . Atoms are either an integer number, float, string or a name. You can use the predicate atom() to decide if its argument is an atom. Expressions have an operator and a list of arguments . Note that the underscore symbol is not an operator. Thus a_1 is an atom in maxima. Display of subscripts and fine tuning the display is explained in the atoms, subscripts and fine tuning the LaTeX display page. Maxima is a very weakly typed language. However, in STACK we need the following \"types\" of expression: equations, i.e. an expression in which the top operation is an equality sign; inequalities, for example ( x<1\\mbox{, or }x\\leq 1); sets, for example, ({1,2,3}); lists, for example, ([1,2,3]). In Maxima ordered lists are entered using square brackets, for example as p:[1,1,2,x^2] . An element is accessed using the syntax p[1] . matrices . The basic syntax for a matrix is p:matrix([1,2],[3,4]) . Each row is a list. Elements are accessed as p[1,2] , etc. logical expression. This is a tree of other expressions connected by the logical and and or . This is useful for expressing solutions to equations, such as x=1 or x=2 . Note, the support for these expressions is unique to STACK. expressions. Expressions come last, since they are just counted as being not the others! STACK defines predicate functions to test for each of these types.","title":"Types of object {#Types_of_object}"},{"location":"CAS/Maxima/#numbers-numbers","text":"Numbers are important in assessment, and there is more specific and detailed documentation on how numbers are treated: Numbers in STACK .","title":"Numbers {#Numbers}"},{"location":"CAS/Maxima/#alias","text":"STACK defines the following function alias names simplify := fullratsimp int := integrate The absolute value function in Maxima is entered as abs() . STACK also permits you to enter using | symbols, i.e. |x| . This is an alias for abs . Note that abs(x) will be displayed by STACK as (|x|). STACK also redefined a small number of functions The plot command plot2d is not used in STACK questions. Use plot instead, which is documented here . This ensures your image files are available on the server. The random number command random is not used in STACK questions. Use the command rand instead, which is documented here . This ensures pseudorandom numbers are generated and a student gets the same version each time they login.","title":"Alias"},{"location":"CAS/Maxima/#parts-of-maxima-expressions-parts_of_maxima_expressions","text":"","title":"Parts of Maxima expressions {#Parts_of_Maxima_expressions}"},{"location":"CAS/Maxima/#opx-the-top-operator","text":"It is often very useful to take apart a Maxima expression. To help with this Maxima has a number of commands, including op(ex) , args(ex) and part(ex,n) . Maxima has specific documentation on this. In particular, op(ex) returns the main operator of the expression ex . This command has some problems for STACK. calling op(ex) on an atom (see Maxima's documentation on the predicate atom(ex) ) such as numbers or variable names, cause op(ex) to throw an error. op(ex) sometimes returns a string, sometimes not. the unary minus causes problems. E.g. in -1/(1+x) the operation is not \"/\", as you might expect, but it is \"-\" instead! To overcome these problems STACK has a command safe_op(ex) This always returns a string. For an atom this is empty, i.e. \"\" . It also sorts out some unary minus problems.","title":"op(x) - the top operator"},{"location":"CAS/Maxima/#get_opsex-all-operators","text":"This function returns a set of all operators in an expression. Useful if you want to find if multiplication is used anywhere in an expression.","title":"get_ops(ex) - all operators"},{"location":"CAS/Maxima/#maxima-commands-defined-by-stack-maxima_commands_defined_by_stack","text":"It is very useful when authoring questions to be able to test out Maxima code in the same environment which STACK uses Maxima. That is to say, with the settings and STACK specific functions loaded. To do this see STACK-Maxima sandbox . STACK creates a range of additional functions and restricts those available, many of which are described within this documentation. See also Predicate functions . Command Description factorlist(ex) Returns a list of factors of ex without multiplicities. zip_with(f,a,b) This function applies the binary function (f) to two lists (a) and (b) returning a list. An example is given in adding matrices to show working . coeff_list(ex,v) This function takes an expression ex and returns a list of coefficients of v . coeff_list_nz(ex,v) This function takes an expression ex and returns a list of nonzero coefficients of v . divthru(ex) Takes an algebraic fraction, e.g. ((x^4-1)/(x+2)) and divides through by the denominator, to leave a polynomial and a proper fraction. Useful in feedback, or steps of a calculation. stack_strip_percent(ex,var) Removes any variable beginning with the % character from ex and replace them with variables from var . Useful for use with solve, ode2 etc. Solve and ode2 . exdowncase(ex) Takes the expression ex and substitutes all variables for their lower case version (cf sdowncase(ex) in Maxima). This is very useful if you don't care if a student uses the wrong case, just apply this function to their answer before using an answer test . Note, of course, that exdowncase(X)-x=0. stack_reset_vars Resets constants, e.g. (i), as abstract symbols, see Numbers . safe_op(ex) Returns the operation of the expression as a string. Atoms return an empty string (rather than throwing an error as does op ). comp_square(ex,v) Returns a quadratic ex in the variable v in completed square form. degree(ex,v) Returns the degree of the expanded form of ex in the variable v . See also Maxima's hipow command. unary_minus_sort(ex) Tidies up the way unary minus is represented within expressions when simp:false . See also simplification . texboldatoms(ex) Displays all non-numeric atoms in bold. Useful for vector questions.","title":"Maxima commands defined by STACK {#Maxima_commands_defined_by_STACK}"},{"location":"CAS/Maxima/#assignment-assignment","text":"In Maxima the assignment of a value to a variable is very unusual . Input Result a:1 Assignment of the value (1) to (a). a=1 An equation, yet to be solved. f(x):=x^2 Definition of a function. In STACK simple assignments are of the more conventional form key : value , for example, n : rand(3)+2; p : (x-1)^n; Of course, these assignments can make use of Maxima's functions to manipulate expressions. p : expand( (x-3)*(x-4) ); Another common task is that of substitution . This can be performed with Maxima's subst command. This is quite useful, for example if we define (p) as follows, in the then we can use this in response processing to determine if the student's answer is odd. p : ans1 + subst(-x,x,ans1); All sorts of properties can be checked for in this way. For example, interpolates. Another example is a stationary point of (f(x)) at (x=a), which can be checked for using p : subst(a,x,diff(ans1,x)); Here we have assumed a is some point given to the student, ans1 is the answer and that (p) will be used in the response processing tree. You can use Maxima's looping structures within Question variables. For example n : 1; for a:-3 thru 26 step 7 do n:n+a; The result will be (n=56). It is also possible to define functions within the question variables for use within a question. f(x) := x^2; n : f(4);","title":"Assignment ## {#assignment}"},{"location":"CAS/Maxima/#logarithms","text":"STACK loads the contributed Maxima package log10 . This defines logarithms to base (10) automatically. STACK also creates two aliases ln is an alias for (\\log), which are natural logarithms lg is an alias for (\\log_{10}), which are logarithms to base (10). It is not possible to redefine the command log to be to the base (10).","title":"Logarithms"},{"location":"CAS/Maxima/#sets-lists-sequences-n-tuples","text":"It is very useful to be able to display expressions such as comma separated lists, and n-tuples [ 1,2,3,4,\\cdots ] [ (1,2,3,4) ] Maxima has in-built functions for lists, which are displayed with square brackets ([1,2,3,4]), and sets with curly braces ( {1,2,3,4} ). Maxima has no default functions for n-tuples or for sequences. STACK provides an inert function sequence . All this does is display its arguments without brackets. For example sequence(1,2,3,4) is displayed (1,2,3,4). STACK provides convenience functions. sequenceify , creates a sequence from the arguments of the expression. This turns lists, sets etc. into a sequence. sequencep is a predicate to decide if the expression is a sequence. The atom dotdotdot is displayed using the tex \\ldots which looks like (\\ldots). This atom cannot be entered by students. STACK provides an inert function ntuple . All this does is display its arguments with round brackets. For example ntuple(1,2,3,4) is displayed ((1,2,3,4)). ntupleify and ntuplep construct and test for ntuples. In strict Maxima syntax (a,b,c) is equivalent to block(a,b,c) . If students type in (a,b,c) using a STACK input it is filtered to ntuple(a,b,c) . Teachers must use the ntuple function explicitly to construct question variables, teacher's answers, test cases and so on. The ntuple is useful for students to type in coordinates. If you want to use these functions, then you can create question variables as follows L1:[a,b,c,d]; D1:apply(ntuple, L1); L2:args(D1); D2:sequenceify(L2); Then L1 is a list and is displayed with square brackets as normal. D1 has operator ntuple and so is displayed with round brackets. L2 has operator list and is displayed with square brackets. Lastly, D2 is an sequence and is displayed without brackets. You can, of course, apply these functions directly. T1:ntuple(a,b,c); S1:sequence(a,b,c,dotdotdot); If you want to use sequence or ntuple in a PRT comparison, you probably want to turn them back into lists. E.g. ntuple(1,2,3) is not algebraically equivalent to [1,2,3] . To do this use the args function. We may, in the future, give more active meaning to the data types of sequence and ntuple . Currently, students can enter expressions with \"implied ntuples\" E.g Student input of (1,2,3) is interpreted as ntuple(1,2,3) . Student input of {(1,2,3),(4,5,6)} is interpreted as {ntuple(1,2,3),ntuple(4,5,6)} . Since no operations are defined on ntuples, students cannot currenlty enter things like (1,2,3)+s*(1,0,0) . There is nothing to stop a teacher defining the expression tree ntuple(1,2,3)+s*ntuple(1,0,0) , but the operations + and * are not defined for ntuples and so nothing will happen! If you want a student to enter the equation of a line/plane they should probably use the matrix syntax for vectors. (This may change in the future). Matrices have options to control the display of the braces. Matrices are displayed without commas. If you are interacting with javascript do not use sequenceify . If you are interacting with javascript, such ss JSXGraph , then you may want to output a list of values without all the LaTeX and without Maxima's normal bracket symbols. You can use stack_disp_comma_separate([a,b,sin(pi)]); This function turns a list into a string representation of its arguments, without braces. Internally, it applies string to the list of values (not TeX!). However, you might still get things like %pi in the output. You can use this with mathematical input: {@stack_disp_comma_separate([a,b,sin(pi)])@} and you will get the result a, b, sin(%pi/7) (without the string quotes) because when a Maxima variable is a string we strip off the outside quotes and don't typeset this in maths mode.","title":"Sets, lists, sequences, n-tuples"},{"location":"CAS/Maxima/#functions","text":"It is sometimes useful for the teacher to define functions as part of a STACK question. This can be done in the normal way in Maxima using the notation. f(x):=x^2; Using Maxima's define() command is forbidden. An alternative is to define f as an \"unnamed function\" using the lambda command. f:lambda([x],x^2); Here we are giving a name to an \"unnamed function\" which seems perverse. Unnamed functions are extremely useful in many situations. For example, a piecewise function can be defined by either of these two commands f(x):=if (x<0) then 6*x-2 else -2*exp(-3*x); f:lambda([x],if (x<0) then 6*x-2 else -2*exp(-3*x)); You can then plot this using {@plot(f(x),[x,-1,1])@}","title":"Functions"},{"location":"CAS/Maxima/#maxima-gotchas","text":"See the section above on assignment . Maxima does not have a degree command for polynomials. We define one via the hipow command. Matrix multiplication is the dot, e.g. A.B . The star A*B gives element-wise multiplication. The atoms a1 and a_1 are not considered to be algebraically equivalent.","title":"Maxima \"gotcha\"s!"},{"location":"CAS/Maxima/#further-information-and-links","text":"Minimal Maxima Maxima on SourceForge","title":"Further information and links"},{"location":"CAS/Maxima/#see-also","text":"Maxima reference topics","title":"See also"},{"location":"CAS/Numbers/","text":"Numbers in STACK Separate pages document numerical answer tests , complex numbers . Precise Constants In Maxima the special constants are defined to be %i, %e, %pi etc. STACK also uses single letters, e.g. e: %e pi: %pi Optionally, depending on the question settings, you have i: %i j: %i Sometimes you need to use (e), or other constants, as an abstract symbol not a number. The Maxima solution is to use the kill() command, but for security reasons users of STACK are not permitted to use this function. Instead use stack_reset_vars(true) in the question variables. This resets all the special constants defined by STACK so the symbols can be redefined in an individual STACK question. (On Maxima 5.42.1 (and possibly others) stack_reset_vars(true) also resets ordergreat , so if you need to use stack_reset_vars(true) it must be the first command the question variables. Since this has been fixed in Maxima 5.44.0, it was probably a bug in Maxima.) Modular arithmetic The function recursemod(ex, n) recurses over an expression tree, and applies the function mod(?, n) to any numbers as identified by numberp . This works on any expression, whereas polymod only applies to polynomials. Internal representation of numbers Maxima has two data types to represent numbers: integers and floats. Rational numbers are expressed as a division of two integers not with a dedicated data type, and surds with fractional powers or the sqrt function. The option Surd for Square Root enables the question author to alter the way surds are displayed in STACK. Similarly, complex numbers are not represented as a single object, but as a sum of real and imaginary parts, or via the exponential function. The input and display of complex numbers is difficult, since differences exist between mathematics, physics and engineering about which symbols to use. The option sqrt(-1) is set in each question to sort out meaning and display. Floating point numbers ## {#Floats} To convert to a float use Maxima's float(ex) command. To convert a float to an exact representation use rat(x) to rationalise the decimal. The variable (e) has been defined as e:exp(1) . This now potentially conflicts with scientific notation 2e3 which means 2*10^3 . If you expect students to use scientific notation for numbers, e.g. 3e4 (which means (3\\times 10^{4}) ), then you may want to use the option for strict syntax . Internally Maxima represents floats in binary, and so even simple calculations which would be exact in base ten (e.g. adding 0.16 to 0.12) might end up in a recurring decimal float which is not exactly equal to the result you would type in directly. Try 452-4.52*10^2 in desktop Maxima, which is not zero, therefore ATAlgEquiv(452,4.52*10^2) fails. (Maxima 5.44.0, November 2022). (4.52\\times 10^2) ends up with recurring 9s when represented as a binary float, so it is not algebraically equivalent to the integer (452). Rounding like this can also occur in calculations, for example p1:0.29; p2:0.18; p3:0.35; v0:1-(p1+p2+p3); v1:0.18; Then Maxima returns 0.18 for v0 , (as expected) but v0-v1 equals (5.551115123125783*10^-17) and so ATAlgEquiv(v0,v1) will give false. Please always use a numerical test when testing floats. Maxima and floats with trailing zeros For its internal representation, Maxima always truncates trailing zeros from a floating point number. For example, the Maxima expression 0.01000 will be converted internally to 0.01 . Actually this is a byproduct of the process of converting a decimal input to an internal binary float, and back again. Similarly, when a number is a \"float\" datatype, Maxima always prints at least one decimal digit to indicate the number is a float. For example, the floating point representation of the number ten is (10.0). This does not indicate significant figures, rather it indicates data type. In situations where the number of significant figures is crucial this is problematic. Display of numbers in STACK is controlled with LaTeX, and the underlying LISP provides flexible ways to represent numbers. Note, that apart from the units input, all other input types truncate the display of unnecessary trailing zeros in floating point numbers, loosing information about significant figures. So, when the student's answer is a floating point number, trailing zeros will not be displayed. If you want to specifically test for significant figures, use the units input type , with the teacher's answer having no units. The units input type should display the same number of significant figures as typed in by the student. Display of numbers with LaTeX The display of numbers is controlled by Maxima's texnumformat command, which STACK modifies. Stack provides two variables to control the display of integers and floats respectively. The default values are stackintfmt:\"~d\"; stackfltfmt:\"~a\"; These two variables control the output format of integers (identified by the predicate integerp ) and floats (identified by the predicate floatnump ) respectively. These variables persist, so you need to define their values each time you expect them to change. These variables must be assigned a string following Maxima's printf format. These variables can be defined in the question variables, for global effect. They can also be defined inside a Maxima block to control the display on the fly, and for individual expressions. For example, consider the following CASText. The decimal number {@n:73@} is written in base \\(2\\) as {@(stackintfmt:\"~2r\",n)@}, in base \\(7\\) as {@(stackintfmt:\"~7r\",n)@}, in scientific notation as {@(stackintfmt:\"~e\",n)@} and in rhetoric as {@(stackintfmt:\"~r\",n)@}. The result should be \"The decimal number (73) is written in base (2) as (1001001), in base (7) as (133), in scientific notation as (7.3E+1) and in rhetoric as (seventy-three).\" To force all floating point numbers to scientific notation use stackfltfmt:\"~e\"; To force all floating point numbers to decimal floating point numbers use stackfltfmt:\"~f\"; You can also force all integers to be displayed as floating point decimals or in scientific notation using stackintfmt and the appropriate template. This function calls the LISP format function, which is complex and more example are available online elsewhere. Template Input TeX Output Description/notes \"~,4f\" 0.12349 (0.1235) Output four decimal places: floating point. 0.12345 (0.1234) Note the rounding. 0.12 (0.1200) \"~,5e\" 100.34 (1.00340e+2) Output five decimal places: scientific notation. \"~:d\" 10000000 (10,000,000) Separate decimal groups of three digits with commas. ~r 9 (\\mbox{nine}) Rhetoric. ~:r 9 (\\mbox{ninth}) Ordinal rhetoric. ~7r 9 (12) Base 7. ~@r 9 (IX) Roman numerals. ~:@r 9 (VIIII) Old style Roman numerals. There are many other options within the LISP format command. Please note with the rhetoric and Roman numerals that the numbers will be in LaTeX mathematics environments. Note that the @ symbol is currently not parsed correctly inside strings within CASText. That is to say, you cannot currently type {@(stackintfmt:\"~@r\",4)@} into CASText. This is a known bug. To avoid this problem, define a variable in the question variables (e.g. roman:\"~@r\"; ) and use the variable name in the CASText (e.g. {@(stackintfmt:roman,4)@} ). Maxima has a separate system for controlling the number of decimal digits used in calculations and when printing the value of computed results. Trailing zeros will not be printed with the value. This is controlled by Maxima's fpprec and fpprintprec variables. The default for STACK is fpprec:20, /* Work with 20 digits. */ fpprintprec:12, /* Print only 12 digits. */ Notes about numerical rounding There are two ways to round numbers ending in a digit (5). Always round up, so that (0.5\\rightarrow 1), (1.5 \\rightarrow 2), (2.5 \\rightarrow 3) etc. Another common system is to use ``Bankers' Rounding\". Bankers Rounding is an algorithm for rounding quantities to integers, in which numbers which are equidistant from the two nearest integers are rounded to the nearest even integer. (0.5\\rightarrow 0), (1.5 \\rightarrow 2), (2.5 \\rightarrow 2) etc. The supposed advantage to bankers rounding is that in the limit it is unbiased, and so produces better results with some statistical processes that involve rounding. In experimental work, the number of significant figures requires sometimes depends on the first digits of the number. For example, if the first digit is a (1) or (2) then we need to take an extra significant figure to ensure the relative error is suitably small. The maxima string functions can be used to check the first digit of a number until we have bespoke internal functions to make this check. Maxima's round(ex) command rounds multiples of 1/2 to the nearest even integer, i.e. Maxima implements Bankers' Rounding. We do not currently have an option to always round up. STACK has defined the function significantfigures(x,n) to conform to convention of rounding up. STACK numerical functions and predicates The following commands which are relevant to manipulation of numbers are defined by STACK. Command Description significantfigures(x,n) Truncate (x) to (n) significant figures (does perform rounding). decimalplaces(x,n) Truncate (x) to (n) decimal places (does perform rounding). commonfaclist(l) Returns the highest common factors of a list of numbers. list_expression_numbers(ex) Create a list with all parts for which numberp(ex)=true . coeff_list(ex,v) This function takes an expression (ex) and returns a list of coefficients of (v). coeff_list_nz(ex,v) This function takes an expression (ex) and returns a list of nonzero coefficients of (v). numabsolutep(sa,ta,tol) Is (sa) within (tol) of (ta)? I.e. ( numrelativep(sa,ta,tol) Is (sa) within (tol\\times ta) of (ta)? I.e. ( The following commands generate displayed forms of numbers. These will not be manipulated further automatically, so you will need to use these at the last moment, e.g. only when generating the teacher's answer etc. Command Description dispdp(x,n) Truncate (x) to (n) decimal places and display with trailing digits. Note, this always prints as a float (or integer), and not in scientific notation. dispsf(x,n) Truncate (x) to (n) significant figures and display with trailing digits. Note, this always prints as a float, and not in scientific notation. scientific_notation(x,n) Write (x) in the form (m10^e). Only works reliably with simp:false (e.g. try 9000). The optional second argument applies displaysci(m,n) to the mantissa to control the display of trailing zeros. displaydp(x,n) An inert internal function to record that (x) should be displayed to (n) decimal places with trailing digits. This function does no rounding. displaysci(x,n,expo) An inert internal function to record that (x) should be displayed to (n) decimal places with trailing digits, in scientific notation. E.g. (x\\times 10^{expo}). Function Predicate simp_numberp(ex) Fixes numberp(ex) for simp:false . real_numberp(ex) Determines if (ex) is a real number. This includes surds and symbolic numbers such as (\\pi). lowesttermsp(ex) Is the rational expression in its lowest terms? anyfloatex(ex) Decides if any floats are in the expression. scientific_notationp(ex) Determines if (ex) is written in the form (a10^n) where (a) is an integer or float, and (n) is an integer. See also Maxima reference topics","title":"Numbers in STACK"},{"location":"CAS/Numbers/#numbers-in-stack","text":"Separate pages document numerical answer tests , complex numbers .","title":"Numbers in STACK"},{"location":"CAS/Numbers/#precise-constants","text":"In Maxima the special constants are defined to be %i, %e, %pi etc. STACK also uses single letters, e.g. e: %e pi: %pi Optionally, depending on the question settings, you have i: %i j: %i Sometimes you need to use (e), or other constants, as an abstract symbol not a number. The Maxima solution is to use the kill() command, but for security reasons users of STACK are not permitted to use this function. Instead use stack_reset_vars(true) in the question variables. This resets all the special constants defined by STACK so the symbols can be redefined in an individual STACK question. (On Maxima 5.42.1 (and possibly others) stack_reset_vars(true) also resets ordergreat , so if you need to use stack_reset_vars(true) it must be the first command the question variables. Since this has been fixed in Maxima 5.44.0, it was probably a bug in Maxima.)","title":"Precise Constants"},{"location":"CAS/Numbers/#modular-arithmetic","text":"The function recursemod(ex, n) recurses over an expression tree, and applies the function mod(?, n) to any numbers as identified by numberp . This works on any expression, whereas polymod only applies to polynomials.","title":"Modular arithmetic"},{"location":"CAS/Numbers/#internal-representation-of-numbers","text":"Maxima has two data types to represent numbers: integers and floats. Rational numbers are expressed as a division of two integers not with a dedicated data type, and surds with fractional powers or the sqrt function. The option Surd for Square Root enables the question author to alter the way surds are displayed in STACK. Similarly, complex numbers are not represented as a single object, but as a sum of real and imaginary parts, or via the exponential function. The input and display of complex numbers is difficult, since differences exist between mathematics, physics and engineering about which symbols to use. The option sqrt(-1) is set in each question to sort out meaning and display.","title":"Internal representation of numbers"},{"location":"CAS/Numbers/#floating-point-numbers-floats","text":"To convert to a float use Maxima's float(ex) command. To convert a float to an exact representation use rat(x) to rationalise the decimal. The variable (e) has been defined as e:exp(1) . This now potentially conflicts with scientific notation 2e3 which means 2*10^3 . If you expect students to use scientific notation for numbers, e.g. 3e4 (which means (3\\times 10^{4}) ), then you may want to use the option for strict syntax . Internally Maxima represents floats in binary, and so even simple calculations which would be exact in base ten (e.g. adding 0.16 to 0.12) might end up in a recurring decimal float which is not exactly equal to the result you would type in directly. Try 452-4.52*10^2 in desktop Maxima, which is not zero, therefore ATAlgEquiv(452,4.52*10^2) fails. (Maxima 5.44.0, November 2022). (4.52\\times 10^2) ends up with recurring 9s when represented as a binary float, so it is not algebraically equivalent to the integer (452). Rounding like this can also occur in calculations, for example p1:0.29; p2:0.18; p3:0.35; v0:1-(p1+p2+p3); v1:0.18; Then Maxima returns 0.18 for v0 , (as expected) but v0-v1 equals (5.551115123125783*10^-17) and so ATAlgEquiv(v0,v1) will give false. Please always use a numerical test when testing floats.","title":"Floating point numbers ## {#Floats}"},{"location":"CAS/Numbers/#maxima-and-floats-with-trailing-zeros","text":"For its internal representation, Maxima always truncates trailing zeros from a floating point number. For example, the Maxima expression 0.01000 will be converted internally to 0.01 . Actually this is a byproduct of the process of converting a decimal input to an internal binary float, and back again. Similarly, when a number is a \"float\" datatype, Maxima always prints at least one decimal digit to indicate the number is a float. For example, the floating point representation of the number ten is (10.0). This does not indicate significant figures, rather it indicates data type. In situations where the number of significant figures is crucial this is problematic. Display of numbers in STACK is controlled with LaTeX, and the underlying LISP provides flexible ways to represent numbers. Note, that apart from the units input, all other input types truncate the display of unnecessary trailing zeros in floating point numbers, loosing information about significant figures. So, when the student's answer is a floating point number, trailing zeros will not be displayed. If you want to specifically test for significant figures, use the units input type , with the teacher's answer having no units. The units input type should display the same number of significant figures as typed in by the student.","title":"Maxima and floats with trailing zeros"},{"location":"CAS/Numbers/#display-of-numbers-with-latex","text":"The display of numbers is controlled by Maxima's texnumformat command, which STACK modifies. Stack provides two variables to control the display of integers and floats respectively. The default values are stackintfmt:\"~d\"; stackfltfmt:\"~a\"; These two variables control the output format of integers (identified by the predicate integerp ) and floats (identified by the predicate floatnump ) respectively. These variables persist, so you need to define their values each time you expect them to change. These variables must be assigned a string following Maxima's printf format. These variables can be defined in the question variables, for global effect. They can also be defined inside a Maxima block to control the display on the fly, and for individual expressions. For example, consider the following CASText. The decimal number {@n:73@} is written in base \\(2\\) as {@(stackintfmt:\"~2r\",n)@}, in base \\(7\\) as {@(stackintfmt:\"~7r\",n)@}, in scientific notation as {@(stackintfmt:\"~e\",n)@} and in rhetoric as {@(stackintfmt:\"~r\",n)@}. The result should be \"The decimal number (73) is written in base (2) as (1001001), in base (7) as (133), in scientific notation as (7.3E+1) and in rhetoric as (seventy-three).\" To force all floating point numbers to scientific notation use stackfltfmt:\"~e\"; To force all floating point numbers to decimal floating point numbers use stackfltfmt:\"~f\"; You can also force all integers to be displayed as floating point decimals or in scientific notation using stackintfmt and the appropriate template. This function calls the LISP format function, which is complex and more example are available online elsewhere. Template Input TeX Output Description/notes \"~,4f\" 0.12349 (0.1235) Output four decimal places: floating point. 0.12345 (0.1234) Note the rounding. 0.12 (0.1200) \"~,5e\" 100.34 (1.00340e+2) Output five decimal places: scientific notation. \"~:d\" 10000000 (10,000,000) Separate decimal groups of three digits with commas. ~r 9 (\\mbox{nine}) Rhetoric. ~:r 9 (\\mbox{ninth}) Ordinal rhetoric. ~7r 9 (12) Base 7. ~@r 9 (IX) Roman numerals. ~:@r 9 (VIIII) Old style Roman numerals. There are many other options within the LISP format command. Please note with the rhetoric and Roman numerals that the numbers will be in LaTeX mathematics environments. Note that the @ symbol is currently not parsed correctly inside strings within CASText. That is to say, you cannot currently type {@(stackintfmt:\"~@r\",4)@} into CASText. This is a known bug. To avoid this problem, define a variable in the question variables (e.g. roman:\"~@r\"; ) and use the variable name in the CASText (e.g. {@(stackintfmt:roman,4)@} ). Maxima has a separate system for controlling the number of decimal digits used in calculations and when printing the value of computed results. Trailing zeros will not be printed with the value. This is controlled by Maxima's fpprec and fpprintprec variables. The default for STACK is fpprec:20, /* Work with 20 digits. */ fpprintprec:12, /* Print only 12 digits. */","title":"Display of numbers with LaTeX"},{"location":"CAS/Numbers/#notes-about-numerical-rounding","text":"There are two ways to round numbers ending in a digit (5). Always round up, so that (0.5\\rightarrow 1), (1.5 \\rightarrow 2), (2.5 \\rightarrow 3) etc. Another common system is to use ``Bankers' Rounding\". Bankers Rounding is an algorithm for rounding quantities to integers, in which numbers which are equidistant from the two nearest integers are rounded to the nearest even integer. (0.5\\rightarrow 0), (1.5 \\rightarrow 2), (2.5 \\rightarrow 2) etc. The supposed advantage to bankers rounding is that in the limit it is unbiased, and so produces better results with some statistical processes that involve rounding. In experimental work, the number of significant figures requires sometimes depends on the first digits of the number. For example, if the first digit is a (1) or (2) then we need to take an extra significant figure to ensure the relative error is suitably small. The maxima string functions can be used to check the first digit of a number until we have bespoke internal functions to make this check. Maxima's round(ex) command rounds multiples of 1/2 to the nearest even integer, i.e. Maxima implements Bankers' Rounding. We do not currently have an option to always round up. STACK has defined the function significantfigures(x,n) to conform to convention of rounding up.","title":"Notes about numerical rounding"},{"location":"CAS/Numbers/#stack-numerical-functions-and-predicates","text":"The following commands which are relevant to manipulation of numbers are defined by STACK. Command Description significantfigures(x,n) Truncate (x) to (n) significant figures (does perform rounding). decimalplaces(x,n) Truncate (x) to (n) decimal places (does perform rounding). commonfaclist(l) Returns the highest common factors of a list of numbers. list_expression_numbers(ex) Create a list with all parts for which numberp(ex)=true . coeff_list(ex,v) This function takes an expression (ex) and returns a list of coefficients of (v). coeff_list_nz(ex,v) This function takes an expression (ex) and returns a list of nonzero coefficients of (v). numabsolutep(sa,ta,tol) Is (sa) within (tol) of (ta)? I.e. ( numrelativep(sa,ta,tol) Is (sa) within (tol\\times ta) of (ta)? I.e. ( The following commands generate displayed forms of numbers. These will not be manipulated further automatically, so you will need to use these at the last moment, e.g. only when generating the teacher's answer etc. Command Description dispdp(x,n) Truncate (x) to (n) decimal places and display with trailing digits. Note, this always prints as a float (or integer), and not in scientific notation. dispsf(x,n) Truncate (x) to (n) significant figures and display with trailing digits. Note, this always prints as a float, and not in scientific notation. scientific_notation(x,n) Write (x) in the form (m10^e). Only works reliably with simp:false (e.g. try 9000). The optional second argument applies displaysci(m,n) to the mantissa to control the display of trailing zeros. displaydp(x,n) An inert internal function to record that (x) should be displayed to (n) decimal places with trailing digits. This function does no rounding. displaysci(x,n,expo) An inert internal function to record that (x) should be displayed to (n) decimal places with trailing digits, in scientific notation. E.g. (x\\times 10^{expo}). Function Predicate simp_numberp(ex) Fixes numberp(ex) for simp:false . real_numberp(ex) Determines if (ex) is a real number. This includes surds and symbolic numbers such as (\\pi). lowesttermsp(ex) Is the rational expression in its lowest terms? anyfloatex(ex) Decides if any floats are in the expression. scientific_notationp(ex) Determines if (ex) is written in the form (a10^n) where (a) is an integer or float, and (n) is an integer.","title":"STACK numerical functions and predicates"},{"location":"CAS/Numbers/#see-also","text":"Maxima reference topics","title":"See also"},{"location":"CAS/Permutations/","text":"Writing a permutation as a product of disjoint cycles Let [f= \\left( \\begin{array}{ccccccc} 1 & 2 & 3 & 4 & 5 & 6 & 7 \\ 3 & 1 & 5 & 7 & 2 & 6 & 4 \\end{array}\\right)] In pure mathematics we might ask students to write a permutation such as this as a product of disjoint cycles. One way to do this is to expect students to write their answer as a list, including the one-cycles. e.g. the permutation ((1)(2 \\: 3)) is entered as [[1],[2, 3]] . This list can be turned into a set of lists, so that the order of disjoint cycles is not important. However, we need to write each cycle in a particular way. For example, we would want [2, 3, 4] and [3, 4, 2] to be considered as equivalent. One way to do this is to make sure the first element in the list is the minumum element in the list, by cycling through the list. Essentially, we ensure each cycle is re-written in a definite form. The following code does this for one cycle. This function can be used in the question variables. /* Write a cycle with the smallest element at the front. Gives a definite order. */ perm_min_first(ex) := block( if length(ex)<2 then return(ex), if is(first(ex)<apply(min, rest(ex))) then return(ex), return(perm_min_first(append(rest(ex), [first(ex)]))) ); Assume the student's answer ans1 is entered as [[1],[2, 3]] . In the feeback variables make sure each list in ans1 has the smallest element first with the following code. sa1:maplist(perm_min_first, ans1); Then compare setify(sa1) with the teacher's answer (which needs to be processed in a similar way) using algebraic equivalence (quiet). This is a good example of where we do not have a specific data type and corresponding methods for equivalence, but the pre-processing of a student's answer will make sure we can establish the relevant equivalence.","title":"Writing a permutation as a product of disjoint cycles"},{"location":"CAS/Permutations/#writing-a-permutation-as-a-product-of-disjoint-cycles","text":"Let [f= \\left( \\begin{array}{ccccccc} 1 & 2 & 3 & 4 & 5 & 6 & 7 \\ 3 & 1 & 5 & 7 & 2 & 6 & 4 \\end{array}\\right)] In pure mathematics we might ask students to write a permutation such as this as a product of disjoint cycles. One way to do this is to expect students to write their answer as a list, including the one-cycles. e.g. the permutation ((1)(2 \\: 3)) is entered as [[1],[2, 3]] . This list can be turned into a set of lists, so that the order of disjoint cycles is not important. However, we need to write each cycle in a particular way. For example, we would want [2, 3, 4] and [3, 4, 2] to be considered as equivalent. One way to do this is to make sure the first element in the list is the minumum element in the list, by cycling through the list. Essentially, we ensure each cycle is re-written in a definite form. The following code does this for one cycle. This function can be used in the question variables. /* Write a cycle with the smallest element at the front. Gives a definite order. */ perm_min_first(ex) := block( if length(ex)<2 then return(ex), if is(first(ex)<apply(min, rest(ex))) then return(ex), return(perm_min_first(append(rest(ex), [first(ex)]))) ); Assume the student's answer ans1 is entered as [[1],[2, 3]] . In the feeback variables make sure each list in ans1 has the smallest element first with the following code. sa1:maplist(perm_min_first, ans1); Then compare setify(sa1) with the teacher's answer (which needs to be processed in a similar way) using algebraic equivalence (quiet). This is a good example of where we do not have a specific data type and corresponding methods for equivalence, but the pre-processing of a student's answer will make sure we can establish the relevant equivalence.","title":"Writing a permutation as a product of disjoint cycles"},{"location":"CAS/Plots/","text":"Plots and graphics in STACK questions. Plots and graphics can be placed into any of the CASText fields. The main way to create plots with the core STACK commands is using Maxima. As of version 4.0, the tags {#...#} provide the possibility to interact with 3rd party scripts. If you have examples of this, please contact the developers. This page is about core supported functionality. plot() {#plot} In STACK, the plot command has been defined to be a wrapper for Maxima's plot2d command. The wrapper makes sure that an image file is given an appropriate name, file location, and that Maxima returns a URL to the user giving the image. Not all of the features of plot2d are available through plot . Try, for example, the following in the question stem. {@plot(x^2,[x,-1,1])@} You can add a second variable to control the axes. plot(x^2,[x,-1,1],[y,0,2]) However, Maxima will not always allow you to get the axes you want (this is a bug in Maxima). To get many plots in one window, we need to define a list of expressions. plot([x^2,sin(x)],[x,-1,1]) This can be done with Maxima's makelist command (p(k):=x^k,pl:makelist(p(k),k,1,5),plot(pl,[x,-1,1])) Notes: Currently STACK has gnuplot return a basic SVG image. Only a very few of Maxima's plot_options are respected by plot , mainly for security reasons. ( plot calls an external command gnuplot which writes to the server filesystem.) The draw package is currently not supported. To change the size of the image use the Maxima variable size , e.g. plot(x^2,[x,-1,1],[size,250,250]) . By default plots are surrounded by the <div class=\"stack_plot\"> . This puts whitespace around a plot, and places the plot in the centre of the screen. To suppress this div use the option [plottags,false] . Traditional axes Note: this example only works with newer versions of Maxima (and not before 5.31.3). A traditional plot with the axes in the middle can be generated by the following. {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1], [box, false], [yx_ratio, 1], [axes, solid], [xtics, -2, 0.5, 2],[ytics, -2, 0.5, 2])@} Labels The ylabel command rotates its argument through 90 degrees. If you want a horizontal label on the (y)-axis you will need to use the label command instead. {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1], [label,[\"y\",-2.5,0.25]])@} Grid The grid is controlled by the maxima command grid2d (newer versions of Maxima only). Compare the following. {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1], grid2d)@} {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1])@} Options The following plot options are currently supported by STACK. If you would like to expand the range of options available please contact the developers. [xlabel, ylabel, label, legend, color, style, point_type, nticks, logx, logy, axes, box, plot_realpart, yx_ratio, xtics, ytics, ztic, grid2d], Please see Maxima's documentation for more information on these options. Note that the draw package is currently not supported. Notes on some of the options. The default in Maxima is to include a legend consisting of a string representation of the plot. In STACK this is turned off by default. To switch it back on, use the command [legend, true] . Any other value of the option legend will respect the original command. Alternate text for an image (alt tag) {#alttext} The default alternate text for an image (img alt tag) generated by a plot command such as plot(x^2,[x,-2,2]); is \"STACK auto-generated plot of x^2 with parameters [[x,-2,2]]\". If your question asks students to \"give an algebraic expression which describes this curve\" then you will need to set alternative text which does not include the answer. To set a specific alt tag, pass an equation [alt,\"...\"] as an argument to the plot function. plot(x^2,[x,-2,2],[alt,\"Hello world\"]); If you would like an expression as part of this then try p:sin(x); plot(p,[x,-2,2],[alt,sconcat(\"Here is \",string(p))]); Language strings Note, you cannot put language strings directly into the alt-text. E.g. the following will not be translated. {@plot(x^2,[x,-2,2],[alt,\"[[lang code='en,other']]A quadratic curve[[/lang]][[lang code='no']]En kvadratisk kurve[[/lang]]\"])@} You can define a castext element in the question variables which does get translated, e.g. altlbls: castext(\"[[lang code='en,other']]A quadratic curve[[/lang]][[lang code='no']]En kvadratisk kurve[[/lang]]\"); and then use this in the castext: {@plot(x^2,[x,-2,2],[alt,altlbls])@} This technique can be put into other language dependent plot variables. E.g. xlabeltrans: castext(\"[[lang code='en,other']]Independent variable[[/lang]][[lang code='no']]Uavhengig variabel[[/lang]]\"); ylabeltrans: castext(\"[[lang code='en,other']]Dependent variable[[/lang]][[lang code='no']]Avhengig variabel[[/lang]]\"); Then in the castext {@plot(x*sin(1/x),[x,-1,2],[xlabel,xlabeltrans],[ylabel,ylabeltrans])@} A catalogue of plots The following CASText gives representative examples of the plot2d features supported by STACK's plot command. Cut and paste it into the CASchat script. Beware that these are likely to cause a timeout on the CAS if you try them all at once. <h3>Basic plot</h3> {@plot(x^2,[x,-2,2])@} The following plot tests the option to explicitly test the alt-text. {@plot(x^3,[x,-3,3], [alt,\"What is this function?\"])@} <h3>Multiple graphs, clips the \\(y\\) values</h3> {@plot([x^3,exp(x)],[x,-2,2],[y,-4,4])@} <h3>With and without a grid</h3> {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1], grid2d)@} {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1])@} <h3>Discrete plots</h3> Basic discrete plot. {@plot([discrete,[[0,0],[1,1],[0,2]]])@} Points: by default the points are too large! {@plot([discrete,[[0,0], [1,1], [1.5,(1.5)^2]]],[x,-2,2],[style, [points]],[point_type, bullet])@} {@plot([discrete,[[0,0], [1,1], [1.5,(1.5)^2]]],[x,-2,2],[style, [points, 1]],[point_type, bullet])@} Notice the size of the points is controlled by the second argument in the list `[points, 1]`. This is documented in Maxima under \"Plot option: style\". A more complicated example is below. {@plot([[discrete,[[0,0], [1,1], [1.5,(1.5)^2]]],[discrete,[[0,0.1], [0.75,1], [1.25,1.5]]]],[style, [points, 1, red, 1 ], [points, 1.5, blue, 1]])@} Combination of discrete plots with normal plots. {@plot([x^2, [discrete,[ [0,0], [1,1], [0,2]]]],[x,-2,2])@} {@plot([x^2, [discrete,[ [0,0], [1,1], [1.5,(1.5)^2]]]],[x,-2,2],[style, lines, [points, 1]],[point_type, bullet])@} {@plot([[discrete,[[30,7]]], -0.4*x+19],[x,0,60],[y,0,20],[style, points, lines], [color, red, blue],[point_type, asterisk])@} {@plot([[discrete,[[10, 0.6], [20, 0.9], [30, 1.1], [40, 1.3], [50, 1.4]]], 2*%pi*sqrt(l/980)], [l,0,50],[style, points, lines], [color, red, blue],[point_type, asterisk])@} Using different point styles. {@plot([[discrete, [[10, .6], [20, .9], [30, 1.1],[40, 1.3], [50, 1.4]]],[discrete, [[11, .5], [15, .9], [25, 1.2],[40, 1.3], [50, 1.4]]]],[style, points],[point_type,circle,square],[color,black,green])@} <h3>Parametric plots</h3> {@plot([parametric, cos(t), sin(3*t), [t,0,2*%pi]], [nticks, 500])@} <h3>Setting non-trivial options: labels on the axes and legend</h3> {@plot([x^2/(1+x^2),diff(x^2/(1+x^2),x)],[x,-1,2],[legend,true])@} {@plot(x*sin(1/x),[x,-1,2],[xlabel,\"Independent variable\"],[ylabel,\"Dependent variable\"],[legend,\"This is a plot\"])@} <h3>Log scale for y-axis, with red colour</h3> {@plot(exp(3*s),[s, -2, 2],[logy], [color,red])@} <h3>Turn off the box, grid and the axes</h3> Default options {@plot([parametric, (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*sin(t), (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*cos(t), [t, -8*%pi, 8*%pi]], [nticks, 100])@} <tt>[axes, false]</tt> {@plot([parametric, (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*sin(t), (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*cos(t), [t, -8*%pi, 8*%pi]], [nticks, 100], [axes,false])@} <tt>[box, false]</tt> {@plot([parametric, (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*sin(t), (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*cos(t), [t, -8*%pi, 8*%pi]], [nticks, 100], [box,false])@} <h3>Putting the axes in the middle</h3> {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1], [box, false], [yx_ratio, 1], [axes, solid], [xtics, -2, 0.5, 2],[ytics, -2, 0.5, 2])@} Piecewise functions A piecewise function can be defined with if statements. /* Piecewise function at x0, with discontinuity. */ f0:x^3 f1:sin(x) x0:2 pg1:if x<(x0-1/1000) then f0 else if x<x0+1/1000 then 5000 else f1; Notes: Do not use functions, but instead have the conditional statement return an expression . This seems odd, but Maxima's plot command plots expressions not functions. Note the use of a small gap to create a discontinuous graph. If you want a larger gap, that is fine as well. Now use the CASText: {@plot(pg1,[x,(x0-5),(x0+5)],[y,-10,10])@} For a discontinuous function, with the endpoints circled etc. try adding some of the following options. f0:x^3 f1:sin(x) x0:2 pg1:if x<(x0-1/1000) then f0 else if x<x0+1/1000 then 5000 else f1; ps:[style, lines, points, points]; pt:[point_type,circle,circle,bullet]; pc:[color, blue,red,blue]; Now use the CASText: {@plot([pg1, [discrete,[ [x0,ev(f0,x=x0)], [x0,ev(f1,x=x0)]]], [discrete,[ [x0,ev((f0+f1)/2,x=x0)]]] ], [x,(x0-5),(x0+5)], [y,-10,10], ps, pt, pc)@} Graph theory It is possible to plot simple discrete graphs directly using STACK's plot command by building a combination of discrete and line plots. implicit_plot() {#implicit} In Maxima load(\"implicit_plot\"); implicit_plot(x^2+y^2=x^2*y^2+1,[x,-2,2],[y,-2,2]); generates a plot of an implicit function. Maxima's implicit_plot() function does not respect the plot options, and we cannot place the resulting plot files in the correct places. Hence, STACK does not currently support implicit plots. HTML Note also that images can be included as HTML. It is easiest to place your image somewhere on the internet and include a URL in the body of your STACK question. Bode plots Maxima has a very basic package for bode diagrams, try load(bode) in a Maxima session. This is not a supported package, so instead you can create Bode diagrams directly with code such as the following. /* Define two functions to do the plotting */ bose_gain(f,r):=block([p,w], p:plot(20*log(abs( apply(f,[%i*w]) ))/log(10), [w, r[2],r[3]], [logx]), return(p) ); bose_phase(f,r):=block([p,w], p:plot( carg( apply(f,[%i*w]))*180/%pi, [w, r[2],r[3]], [logx]), return(p) ); /* Define a transfer function */ H(s):=100*(1+s)/((s+10)*(s+100)); /* Produce the graphs */ gain: bose_gain(H,[w,1/1000,1000]); phase:bose_phase(H,[w,1/1000,1000]); See also Maxima reference topics","title":"Plots and graphics in STACK questions."},{"location":"CAS/Plots/#plots-and-graphics-in-stack-questions","text":"Plots and graphics can be placed into any of the CASText fields. The main way to create plots with the core STACK commands is using Maxima. As of version 4.0, the tags {#...#} provide the possibility to interact with 3rd party scripts. If you have examples of this, please contact the developers. This page is about core supported functionality.","title":"Plots and graphics in STACK questions."},{"location":"CAS/Plots/#plot-plot","text":"In STACK, the plot command has been defined to be a wrapper for Maxima's plot2d command. The wrapper makes sure that an image file is given an appropriate name, file location, and that Maxima returns a URL to the user giving the image. Not all of the features of plot2d are available through plot . Try, for example, the following in the question stem. {@plot(x^2,[x,-1,1])@} You can add a second variable to control the axes. plot(x^2,[x,-1,1],[y,0,2]) However, Maxima will not always allow you to get the axes you want (this is a bug in Maxima). To get many plots in one window, we need to define a list of expressions. plot([x^2,sin(x)],[x,-1,1]) This can be done with Maxima's makelist command (p(k):=x^k,pl:makelist(p(k),k,1,5),plot(pl,[x,-1,1])) Notes: Currently STACK has gnuplot return a basic SVG image. Only a very few of Maxima's plot_options are respected by plot , mainly for security reasons. ( plot calls an external command gnuplot which writes to the server filesystem.) The draw package is currently not supported. To change the size of the image use the Maxima variable size , e.g. plot(x^2,[x,-1,1],[size,250,250]) . By default plots are surrounded by the <div class=\"stack_plot\"> . This puts whitespace around a plot, and places the plot in the centre of the screen. To suppress this div use the option [plottags,false] .","title":"plot() {#plot}"},{"location":"CAS/Plots/#traditional-axes","text":"Note: this example only works with newer versions of Maxima (and not before 5.31.3). A traditional plot with the axes in the middle can be generated by the following. {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1], [box, false], [yx_ratio, 1], [axes, solid], [xtics, -2, 0.5, 2],[ytics, -2, 0.5, 2])@}","title":"Traditional axes"},{"location":"CAS/Plots/#labels","text":"The ylabel command rotates its argument through 90 degrees. If you want a horizontal label on the (y)-axis you will need to use the label command instead. {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1], [label,[\"y\",-2.5,0.25]])@}","title":"Labels"},{"location":"CAS/Plots/#grid","text":"The grid is controlled by the maxima command grid2d (newer versions of Maxima only). Compare the following. {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1], grid2d)@} {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1])@}","title":"Grid"},{"location":"CAS/Plots/#options","text":"The following plot options are currently supported by STACK. If you would like to expand the range of options available please contact the developers. [xlabel, ylabel, label, legend, color, style, point_type, nticks, logx, logy, axes, box, plot_realpart, yx_ratio, xtics, ytics, ztic, grid2d], Please see Maxima's documentation for more information on these options. Note that the draw package is currently not supported. Notes on some of the options. The default in Maxima is to include a legend consisting of a string representation of the plot. In STACK this is turned off by default. To switch it back on, use the command [legend, true] . Any other value of the option legend will respect the original command.","title":"Options"},{"location":"CAS/Plots/#alternate-text-for-an-image-alt-tag-alttext","text":"The default alternate text for an image (img alt tag) generated by a plot command such as plot(x^2,[x,-2,2]); is \"STACK auto-generated plot of x^2 with parameters [[x,-2,2]]\". If your question asks students to \"give an algebraic expression which describes this curve\" then you will need to set alternative text which does not include the answer. To set a specific alt tag, pass an equation [alt,\"...\"] as an argument to the plot function. plot(x^2,[x,-2,2],[alt,\"Hello world\"]); If you would like an expression as part of this then try p:sin(x); plot(p,[x,-2,2],[alt,sconcat(\"Here is \",string(p))]);","title":"Alternate text for an image (alt tag) {#alttext}"},{"location":"CAS/Plots/#language-strings","text":"Note, you cannot put language strings directly into the alt-text. E.g. the following will not be translated. {@plot(x^2,[x,-2,2],[alt,\"[[lang code='en,other']]A quadratic curve[[/lang]][[lang code='no']]En kvadratisk kurve[[/lang]]\"])@} You can define a castext element in the question variables which does get translated, e.g. altlbls: castext(\"[[lang code='en,other']]A quadratic curve[[/lang]][[lang code='no']]En kvadratisk kurve[[/lang]]\"); and then use this in the castext: {@plot(x^2,[x,-2,2],[alt,altlbls])@} This technique can be put into other language dependent plot variables. E.g. xlabeltrans: castext(\"[[lang code='en,other']]Independent variable[[/lang]][[lang code='no']]Uavhengig variabel[[/lang]]\"); ylabeltrans: castext(\"[[lang code='en,other']]Dependent variable[[/lang]][[lang code='no']]Avhengig variabel[[/lang]]\"); Then in the castext {@plot(x*sin(1/x),[x,-1,2],[xlabel,xlabeltrans],[ylabel,ylabeltrans])@}","title":"Language strings"},{"location":"CAS/Plots/#a-catalogue-of-plots","text":"The following CASText gives representative examples of the plot2d features supported by STACK's plot command. Cut and paste it into the CASchat script. Beware that these are likely to cause a timeout on the CAS if you try them all at once. <h3>Basic plot</h3> {@plot(x^2,[x,-2,2])@} The following plot tests the option to explicitly test the alt-text. {@plot(x^3,[x,-3,3], [alt,\"What is this function?\"])@} <h3>Multiple graphs, clips the \\(y\\) values</h3> {@plot([x^3,exp(x)],[x,-2,2],[y,-4,4])@} <h3>With and without a grid</h3> {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1], grid2d)@} {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1])@} <h3>Discrete plots</h3> Basic discrete plot. {@plot([discrete,[[0,0],[1,1],[0,2]]])@} Points: by default the points are too large! {@plot([discrete,[[0,0], [1,1], [1.5,(1.5)^2]]],[x,-2,2],[style, [points]],[point_type, bullet])@} {@plot([discrete,[[0,0], [1,1], [1.5,(1.5)^2]]],[x,-2,2],[style, [points, 1]],[point_type, bullet])@} Notice the size of the points is controlled by the second argument in the list `[points, 1]`. This is documented in Maxima under \"Plot option: style\". A more complicated example is below. {@plot([[discrete,[[0,0], [1,1], [1.5,(1.5)^2]]],[discrete,[[0,0.1], [0.75,1], [1.25,1.5]]]],[style, [points, 1, red, 1 ], [points, 1.5, blue, 1]])@} Combination of discrete plots with normal plots. {@plot([x^2, [discrete,[ [0,0], [1,1], [0,2]]]],[x,-2,2])@} {@plot([x^2, [discrete,[ [0,0], [1,1], [1.5,(1.5)^2]]]],[x,-2,2],[style, lines, [points, 1]],[point_type, bullet])@} {@plot([[discrete,[[30,7]]], -0.4*x+19],[x,0,60],[y,0,20],[style, points, lines], [color, red, blue],[point_type, asterisk])@} {@plot([[discrete,[[10, 0.6], [20, 0.9], [30, 1.1], [40, 1.3], [50, 1.4]]], 2*%pi*sqrt(l/980)], [l,0,50],[style, points, lines], [color, red, blue],[point_type, asterisk])@} Using different point styles. {@plot([[discrete, [[10, .6], [20, .9], [30, 1.1],[40, 1.3], [50, 1.4]]],[discrete, [[11, .5], [15, .9], [25, 1.2],[40, 1.3], [50, 1.4]]]],[style, points],[point_type,circle,square],[color,black,green])@} <h3>Parametric plots</h3> {@plot([parametric, cos(t), sin(3*t), [t,0,2*%pi]], [nticks, 500])@} <h3>Setting non-trivial options: labels on the axes and legend</h3> {@plot([x^2/(1+x^2),diff(x^2/(1+x^2),x)],[x,-1,2],[legend,true])@} {@plot(x*sin(1/x),[x,-1,2],[xlabel,\"Independent variable\"],[ylabel,\"Dependent variable\"],[legend,\"This is a plot\"])@} <h3>Log scale for y-axis, with red colour</h3> {@plot(exp(3*s),[s, -2, 2],[logy], [color,red])@} <h3>Turn off the box, grid and the axes</h3> Default options {@plot([parametric, (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*sin(t), (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*cos(t), [t, -8*%pi, 8*%pi]], [nticks, 100])@} <tt>[axes, false]</tt> {@plot([parametric, (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*sin(t), (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*cos(t), [t, -8*%pi, 8*%pi]], [nticks, 100], [axes,false])@} <tt>[box, false]</tt> {@plot([parametric, (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*sin(t), (exp(cos(t))-2*cos(4*t)-sin(t/12)^5)*cos(t), [t, -8*%pi, 8*%pi]], [nticks, 100], [box,false])@} <h3>Putting the axes in the middle</h3> {@plot([x^2/(1+x^2),2*x/(1+x^2)^2], [x, -2, 2], [y,-2.1,2.1], [box, false], [yx_ratio, 1], [axes, solid], [xtics, -2, 0.5, 2],[ytics, -2, 0.5, 2])@}","title":"A catalogue of plots"},{"location":"CAS/Plots/#piecewise-functions","text":"A piecewise function can be defined with if statements. /* Piecewise function at x0, with discontinuity. */ f0:x^3 f1:sin(x) x0:2 pg1:if x<(x0-1/1000) then f0 else if x<x0+1/1000 then 5000 else f1; Notes: Do not use functions, but instead have the conditional statement return an expression . This seems odd, but Maxima's plot command plots expressions not functions. Note the use of a small gap to create a discontinuous graph. If you want a larger gap, that is fine as well. Now use the CASText: {@plot(pg1,[x,(x0-5),(x0+5)],[y,-10,10])@} For a discontinuous function, with the endpoints circled etc. try adding some of the following options. f0:x^3 f1:sin(x) x0:2 pg1:if x<(x0-1/1000) then f0 else if x<x0+1/1000 then 5000 else f1; ps:[style, lines, points, points]; pt:[point_type,circle,circle,bullet]; pc:[color, blue,red,blue]; Now use the CASText: {@plot([pg1, [discrete,[ [x0,ev(f0,x=x0)], [x0,ev(f1,x=x0)]]], [discrete,[ [x0,ev((f0+f1)/2,x=x0)]]] ], [x,(x0-5),(x0+5)], [y,-10,10], ps, pt, pc)@}","title":"Piecewise functions"},{"location":"CAS/Plots/#graph-theory","text":"It is possible to plot simple discrete graphs directly using STACK's plot command by building a combination of discrete and line plots.","title":"Graph theory"},{"location":"CAS/Plots/#implicit_plot-implicit","text":"In Maxima load(\"implicit_plot\"); implicit_plot(x^2+y^2=x^2*y^2+1,[x,-2,2],[y,-2,2]); generates a plot of an implicit function. Maxima's implicit_plot() function does not respect the plot options, and we cannot place the resulting plot files in the correct places. Hence, STACK does not currently support implicit plots.","title":"implicit_plot()  {#implicit}"},{"location":"CAS/Plots/#html","text":"Note also that images can be included as HTML. It is easiest to place your image somewhere on the internet and include a URL in the body of your STACK question.","title":"HTML"},{"location":"CAS/Plots/#bode-plots","text":"Maxima has a very basic package for bode diagrams, try load(bode) in a Maxima session. This is not a supported package, so instead you can create Bode diagrams directly with code such as the following. /* Define two functions to do the plotting */ bose_gain(f,r):=block([p,w], p:plot(20*log(abs( apply(f,[%i*w]) ))/log(10), [w, r[2],r[3]], [logx]), return(p) ); bose_phase(f,r):=block([p,w], p:plot( carg( apply(f,[%i*w]))*180/%pi, [w, r[2],r[3]], [logx]), return(p) ); /* Define a transfer function */ H(s):=100*(1+s)/((s+10)*(s+100)); /* Produce the graphs */ gain: bose_gain(H,[w,1/1000,1000]); phase:bose_phase(H,[w,1/1000,1000]);","title":"Bode plots"},{"location":"CAS/Plots/#see-also","text":"Maxima reference topics","title":"See also"},{"location":"CAS/Predicate_functions/","text":"Predicate functions A predicate function takes an expression and returns Boolean values true or false . The convention in Maxima is to end predicate functions with the letter \"p\". Many predicate functions exist already within Maxima. Some of the more useful to us are listed below. STACK defines an additional range of predicate functions. Some are described here, others are in the relevant specific sections of the documentation, such as numbers . Since establishing mathematical properties are all about predicates they are particularly important for STACK. You can use predicate functions directly in the potential response tree by comparing the result with true using the answer test AlgEquiv. Maxima type predicate functions The following are a core part of Maxima, but there are many others. Notice, predicate functions end in the letter \"p\". Function Predicate floatnump(ex) Determines if (ex) is a float. numberp(ex) Determines if (ex) is a number. NOTE numberp returns false if its argument is a symbol, even if the argument is a symbolic number such as (\\sqrt{2}), (\\pi) or (i), or declared to be even, odd, integer, rational, irrational, real, imaginary, or complex. This function also does not work when simp:false , so see the dedicated page on numbers . setp(ex) Determines if (ex) is a set. listp(ex) Determines if (ex) is a list. matrixp(ex) Determines if (ex) is a matrix. polynomialp(ex,[v]) Determines if (ex) is a polynomial in the list of variables v. STACK type predicate functions The following type predicates are defined by STACK. Function Predicate variablep(ex) Determines if (ex) is avariable, that is an atom but not a real numberm, (i) or a string. equationp(ex) Determines if (ex) is an equation. functionp(ex) Determines if (ex) is a function definition, using the operator := . inequalityp(ex) Determines if (ex) is an inequality. expressionp(ex) Determines if (ex) is not a matrix, list, set, equation, function or inequality. polynomialpsimp(ex) Determines if (ex) is a polynomial in its own variables. simp_numberp(ex) Determines if (ex) is a number when simp:false . simp_integerp(ex) Determines if (ex) is an integer when simp:false . real_numberp(ex) Determines if (ex) is a real number. rational_numberp(ex) Determines if (ex) is written as a fraction. For a true mathematical rational number use rational_numberp(ex) or simp_integerp(ex) lowesttermsp(ex) Determines if a fraction (ex) is in lowest terms. complex_exponentialp(ex) Determines if (ex) is written in complex exponential form, (r e^{i\\theta} ). Needs simp:false . imag_numberp(ex) Determines if (ex) is a purely imaginary number. STACK general predicates The following are defined by STACK. Function Predicate element_listp(ex,l) true if ex is an element of the list (l). (Sets have elementp , but lists don't) all_listp(p,l) true if all elements of (l) satisfy the predicate (p). any_listp(p,l) true if any elements of (l) satisfy the predicate (p). sublist(l,p) Return a list containing only those elements of the list (l) for which the predicate p is true (The last of these is core Maxima and is not, strictly speaking, a predicate function) STACK other predicate functions Function Predicate expandp(ex) true if (ex) equals its expanded form. factorp(ex) true if (ex) equals its factored form. Note, if you would like to know if an expression is factored you need to use the FacForm answer test. Prime integers equal their factored form, composite integers do not. continuousp(ex,v,xp) true if (ex) is continuous with respect to (v) at (xp) (unreliable). diffp(ex,v,xp,[n]) true if (ex) is (optionally (n) times) differentiable with respect to (v) at (xp) (unreliable). The last two functions rely on Maxima's limit command and hence are not robust. Establishing form A lot of what teachers do is try to establish if a student's answer \"looks right\" that is, in an appropriate form. linear_term_p(ex, p) establishes that the expression ex is a simple product of one expression for which the predicate p is true and zero or more real numbers. linear_combination_p(ex, p) establishes that the expression ex is a linear combination of terms for which p is true. The teacher can then use this function to build more complex predicates such as the following fouriertermp(ex) := if ((safe_op(ex)=\"cos\" or safe_op(ex)=\"sin\") and linear_term_p(first(args(ex)), variablep)) then true else false$ This predicate function decides if we have a term of the form (\\sin(n\\, v)) or (\\cos(n\\, v)) where (n) is any product of real numbers (e.g. (3\\pi/2)) and (v) is any variable. A teacher might prefer to specify a particular variable. fouriertermp(ex) := if ((safe_op(ex)=\"cos\" or safe_op(ex)=\"sin\") and linear_term_p(first(args(ex)), lambda([ex2], ex2=t))) then true else false$ So, if you want to decide if the student's answer looks like ( \\sum_{k=1}{n} a_k\\cos(k\\pi t) + a_k\\cos(k\\pi t) ) the combined predicate linear_combination_p(ex, fouriertermp) can be used. Testing for form in this way is probably more reliable that the substequiv answer test which fails to match up expressions like (A\\sin(t)+B\\cos(t)) with (A\\sin(t)-B\\cos(t)). As every, the minus sign is a problem. However, the following predicate will work. simpletrigp(ex) := if (ex=cos(t) or ex=sin(t)) then true else false$ and the test linear_combination_p(ex, simpletrigp) will be able to do this. Related functions This is not, strictly speaking, a predicate function. It is common to want to ensure that a student's expression is free of things like (\\sqrt{2}), (a^{1/2}) or (1+\\sqrt[3]{2}) in the denominator. This include any complex numbers. rationalized(ex) searches across the whole expression ex and looks in the denominators of any fractions. If the denominators are free of such things the function returns true otherwise the function returns the list of offending expressions. This design allows efficient feedback of the form ``the denominator in your expression should be free of the following: ...\". See also Maxima reference topics","title":"Predicate functions"},{"location":"CAS/Predicate_functions/#predicate-functions","text":"A predicate function takes an expression and returns Boolean values true or false . The convention in Maxima is to end predicate functions with the letter \"p\". Many predicate functions exist already within Maxima. Some of the more useful to us are listed below. STACK defines an additional range of predicate functions. Some are described here, others are in the relevant specific sections of the documentation, such as numbers . Since establishing mathematical properties are all about predicates they are particularly important for STACK. You can use predicate functions directly in the potential response tree by comparing the result with true using the answer test AlgEquiv.","title":"Predicate functions"},{"location":"CAS/Predicate_functions/#maxima-type-predicate-functions","text":"The following are a core part of Maxima, but there are many others. Notice, predicate functions end in the letter \"p\". Function Predicate floatnump(ex) Determines if (ex) is a float. numberp(ex) Determines if (ex) is a number. NOTE numberp returns false if its argument is a symbol, even if the argument is a symbolic number such as (\\sqrt{2}), (\\pi) or (i), or declared to be even, odd, integer, rational, irrational, real, imaginary, or complex. This function also does not work when simp:false , so see the dedicated page on numbers . setp(ex) Determines if (ex) is a set. listp(ex) Determines if (ex) is a list. matrixp(ex) Determines if (ex) is a matrix. polynomialp(ex,[v]) Determines if (ex) is a polynomial in the list of variables v.","title":"Maxima type predicate functions"},{"location":"CAS/Predicate_functions/#stack-type-predicate-functions","text":"The following type predicates are defined by STACK. Function Predicate variablep(ex) Determines if (ex) is avariable, that is an atom but not a real numberm, (i) or a string. equationp(ex) Determines if (ex) is an equation. functionp(ex) Determines if (ex) is a function definition, using the operator := . inequalityp(ex) Determines if (ex) is an inequality. expressionp(ex) Determines if (ex) is not a matrix, list, set, equation, function or inequality. polynomialpsimp(ex) Determines if (ex) is a polynomial in its own variables. simp_numberp(ex) Determines if (ex) is a number when simp:false . simp_integerp(ex) Determines if (ex) is an integer when simp:false . real_numberp(ex) Determines if (ex) is a real number. rational_numberp(ex) Determines if (ex) is written as a fraction. For a true mathematical rational number use rational_numberp(ex) or simp_integerp(ex) lowesttermsp(ex) Determines if a fraction (ex) is in lowest terms. complex_exponentialp(ex) Determines if (ex) is written in complex exponential form, (r e^{i\\theta} ). Needs simp:false . imag_numberp(ex) Determines if (ex) is a purely imaginary number.","title":"STACK type predicate functions"},{"location":"CAS/Predicate_functions/#stack-general-predicates","text":"The following are defined by STACK. Function Predicate element_listp(ex,l) true if ex is an element of the list (l). (Sets have elementp , but lists don't) all_listp(p,l) true if all elements of (l) satisfy the predicate (p). any_listp(p,l) true if any elements of (l) satisfy the predicate (p). sublist(l,p) Return a list containing only those elements of the list (l) for which the predicate p is true (The last of these is core Maxima and is not, strictly speaking, a predicate function)","title":"STACK general predicates"},{"location":"CAS/Predicate_functions/#stack-other-predicate-functions","text":"Function Predicate expandp(ex) true if (ex) equals its expanded form. factorp(ex) true if (ex) equals its factored form. Note, if you would like to know if an expression is factored you need to use the FacForm answer test. Prime integers equal their factored form, composite integers do not. continuousp(ex,v,xp) true if (ex) is continuous with respect to (v) at (xp) (unreliable). diffp(ex,v,xp,[n]) true if (ex) is (optionally (n) times) differentiable with respect to (v) at (xp) (unreliable). The last two functions rely on Maxima's limit command and hence are not robust.","title":"STACK other predicate functions"},{"location":"CAS/Predicate_functions/#establishing-form","text":"A lot of what teachers do is try to establish if a student's answer \"looks right\" that is, in an appropriate form. linear_term_p(ex, p) establishes that the expression ex is a simple product of one expression for which the predicate p is true and zero or more real numbers. linear_combination_p(ex, p) establishes that the expression ex is a linear combination of terms for which p is true. The teacher can then use this function to build more complex predicates such as the following fouriertermp(ex) := if ((safe_op(ex)=\"cos\" or safe_op(ex)=\"sin\") and linear_term_p(first(args(ex)), variablep)) then true else false$ This predicate function decides if we have a term of the form (\\sin(n\\, v)) or (\\cos(n\\, v)) where (n) is any product of real numbers (e.g. (3\\pi/2)) and (v) is any variable. A teacher might prefer to specify a particular variable. fouriertermp(ex) := if ((safe_op(ex)=\"cos\" or safe_op(ex)=\"sin\") and linear_term_p(first(args(ex)), lambda([ex2], ex2=t))) then true else false$ So, if you want to decide if the student's answer looks like ( \\sum_{k=1}{n} a_k\\cos(k\\pi t) + a_k\\cos(k\\pi t) ) the combined predicate linear_combination_p(ex, fouriertermp) can be used. Testing for form in this way is probably more reliable that the substequiv answer test which fails to match up expressions like (A\\sin(t)+B\\cos(t)) with (A\\sin(t)-B\\cos(t)). As every, the minus sign is a problem. However, the following predicate will work. simpletrigp(ex) := if (ex=cos(t) or ex=sin(t)) then true else false$ and the test linear_combination_p(ex, simpletrigp) will be able to do this.","title":"Establishing form"},{"location":"CAS/Predicate_functions/#related-functions","text":"This is not, strictly speaking, a predicate function. It is common to want to ensure that a student's expression is free of things like (\\sqrt{2}), (a^{1/2}) or (1+\\sqrt[3]{2}) in the denominator. This include any complex numbers. rationalized(ex) searches across the whole expression ex and looks in the denominators of any fractions. If the denominators are free of such things the function returns true otherwise the function returns the list of offending expressions. This design allows efficient feedback of the form ``the denominator in your expression should be free of the following: ...\".","title":"Related functions"},{"location":"CAS/Predicate_functions/#see-also","text":"Maxima reference topics","title":"See also"},{"location":"CAS/Random/","text":"Random objects STACK can generate structured random objects. STACK provides a Maxima function rand() which can be used in the question and answer variables. STACK creates pseudo-random numbers from a definite seed. This ensures that when a particular student returns they see the same variant of the question. (Note to site maintainers: if you upgrade your Maxima version mid-way through an academic cycle, then there is no gurantee that the random numbers will remain the same. It is unlikley Maxima will change its random number generation between versions, but if it important to you please check first!) For the purposes of learning and teaching, we do not need an algorithm which is statistically perfect. We are much more interested in simplicity, efficiency and reproducibility across platforms. Hence, we adopt pseudo-random numbers. It is very important to test each random version a student is likely to see and not to leave this to chance. To pre-generate and test random variants see the separate documentation on deploying random variants . rand() {#rand} STACK provides its own function rand() . rand(n) generates an integer between (0) and (n-1). rand(n.0) generates a floating point number between (0) and (n). It is probably more useful to use something like a=float(rand(1000)/1000) to obtain an accurate number of decimal places. An alternative is to use the Maxima function round() rand([a,b,...,z]) makes a random selection from a list. rand({a,b,...,z}) makes a random selection from a set. rand(matrix(..)) applies rand to each element of the matrix. STACK provides the following functions for random generation of sets. random_subset(u) returns a random subset of u . random_subset_n(u,n) returns a random subset of u with n elements (if possible). random_ne_subset(u) returns a non-empty random subset of u . There are also Maxima's random functions. For example, to create a random list use random_permutation . It is probably much better not to use conditional statements when creating random objects. For example, if you would like to create a random small prime number, try p : rand([2,3,5,7,11,13,17,19]); This might not appear to be the neatest mathematical solution, but it is probably the most reliable. rand_with_step(lower,upper,step) Returns a random number from the set {lower, lower+step, lower+2*step, ... , final} . The examples below explain behaviour the best. Examples: rand_with_step(-5,5,1) returns a random number from the set ({-5,-4,-3,-2,-1,0,1,2,3,4,5}). rand_with_step(-5,5,2) returns a random number from the set ({-5,-3,-1,1,3,5}). rand_with_step(-5,3,3) returns a random number from the set ({-5,-2,1}). The function rand_range(lower,upper,step) does the same thing. rand_with_prohib(lower,upper,list) Returns a random integer from the set [lower,upper] such that it cannot be any value in list . This list can include values which are also random variables, for example, generated by rand_with_step . Examples: rand_with_prohib(-5,5,[0]) returns a random number from the set ({-5,-4,-3,-2,-1,1,2,3,4,5}). rand_with_prohib(-5,5,[-1,0,1,sqrt(pi)]) returns a random number from the set ({-5,-4,-3,-2,2,3,4,5}). rand_with_prohib(-5,3,[-5/2,a]) returns a random number from the set ({-5,-4,-3,-2,-1,0,1,2,3}\\backslash{a}). This can be used with matrices, to generate a matrix with non-zero entries for example. The unnamed function in this example ignores its arguments. matrixmap(lambda([ex],rand_with_prohib(-5,5,[0])),zeromatrix(5,5)); To create a matrix of a random size you can use Maxima's makelist function, e.g. M1:apply(matrix, makelist(makelist(2^n/3^m, n,1,4), m,1,3)); rand_selection(ex, n) Returns a list containing a random selection of n different items from the list/set ex . If ex contains duplicates, then the result may also contain duplicates. rand_selection_with_replacement(ex, n) Returns a list containing a random selection of n items from the list/set ex . Generating random polynomials Here is an example which generates a random polynomial, of degree 5, with coefficients between 0 and 6. apply(\"+\",makelist(rand(7)*x^(k-1),k,6)); Generating random expressions which needs to be \"gathered and sorted\" It is relatively common to want to be able to generate random expressions which need to be \"gathered and sorted\". For example in (2y-y+3y+1) we need to collect together the (y) terms. simp:false; p:apply(\"+\",makelist(ev(rand_with_prohib(-5,5,[0])*y^rand(2),simp), ev(rand(6)+2,simp))); p:unary_minus_sort(p); Now, the output from the first expression will be a random expression in constants and (y) variables. The second line tidies up the unary minus. For more details of this, see simplification . 4*y+5*y+(-2*y) 4*y+5*y-2*y Random objects with corresponding information It is often necessary to generate a random object with a number of separate aspects to it. For example, if you have scientific data and you need to include this in a question. t:rand(5)+3; idx:rand(3)+1; /* Array indexes in Maxima start at 1, rand(n) returns 0,...,n-1. */ l1:[\"Mercury\",\"Earth\",\"Mars\"]; l2:[3.61,9.8,3.75]; p:l1[idx]; ta:t*l2[idx]/(4*%pi^2); The question text can then be A pendulum is located on {@p@}. What length should the pendulum have in order to have a period of {@t@}s? This indexing with the variable idx is quite robust. Note that indexes in Maxima start at (1), whereas rand(n) could return zero. Another option is to use rand() on a list of lists, allowing to group the information of an object in a slick way: t:rand(5)+3; [p, g] : rand([[\"Mercury\",3.61], [\"Earth\",9.81], [\"Mars\",3.75]]); ta:t*g/(4*%pi^2); Here, rand() will return one random list of the given lists, say [\"Earth\",9.81] . The assigment [p, g] : [\"Earth\",9.81] then works as one would expect, namely just as p : \"Earth\"; g : 9.81; would. Random objects satisfying a condition It is often necessary to create random objects which satisfy constraints. For example, if you want to randomly generate a \"small\" prime number, just select one from a list. p:rand([2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]); It is much better to (i) enumerate specific cases or (ii) reverse engineer the question to avoid conditional statements than randomly generate examples and \"hope\" one pops up eventually. The reason is that the pseudo-random number generator will repeat the process from a seed every time the question is generated! If you put in loops, this could risk delays and time-outs etc. The following is NOT RECOMMENDED, but enough people have insisted on doing it to document this approach. If you must (and you risk an infinite loop of course....) you can use Maxima's for command. A simple example is as follows. q:1; for k while not(is(primep(q))) do block(q:rand(98)+1); See also Maxima reference topics","title":"Random objects"},{"location":"CAS/Random/#random-objects","text":"STACK can generate structured random objects. STACK provides a Maxima function rand() which can be used in the question and answer variables. STACK creates pseudo-random numbers from a definite seed. This ensures that when a particular student returns they see the same variant of the question. (Note to site maintainers: if you upgrade your Maxima version mid-way through an academic cycle, then there is no gurantee that the random numbers will remain the same. It is unlikley Maxima will change its random number generation between versions, but if it important to you please check first!) For the purposes of learning and teaching, we do not need an algorithm which is statistically perfect. We are much more interested in simplicity, efficiency and reproducibility across platforms. Hence, we adopt pseudo-random numbers. It is very important to test each random version a student is likely to see and not to leave this to chance. To pre-generate and test random variants see the separate documentation on deploying random variants .","title":"Random objects"},{"location":"CAS/Random/#rand-rand","text":"STACK provides its own function rand() . rand(n) generates an integer between (0) and (n-1). rand(n.0) generates a floating point number between (0) and (n). It is probably more useful to use something like a=float(rand(1000)/1000) to obtain an accurate number of decimal places. An alternative is to use the Maxima function round() rand([a,b,...,z]) makes a random selection from a list. rand({a,b,...,z}) makes a random selection from a set. rand(matrix(..)) applies rand to each element of the matrix. STACK provides the following functions for random generation of sets. random_subset(u) returns a random subset of u . random_subset_n(u,n) returns a random subset of u with n elements (if possible). random_ne_subset(u) returns a non-empty random subset of u . There are also Maxima's random functions. For example, to create a random list use random_permutation . It is probably much better not to use conditional statements when creating random objects. For example, if you would like to create a random small prime number, try p : rand([2,3,5,7,11,13,17,19]); This might not appear to be the neatest mathematical solution, but it is probably the most reliable.","title":"rand() {#rand}"},{"location":"CAS/Random/#rand_with_steplowerupperstep","text":"Returns a random number from the set {lower, lower+step, lower+2*step, ... , final} . The examples below explain behaviour the best. Examples: rand_with_step(-5,5,1) returns a random number from the set ({-5,-4,-3,-2,-1,0,1,2,3,4,5}). rand_with_step(-5,5,2) returns a random number from the set ({-5,-3,-1,1,3,5}). rand_with_step(-5,3,3) returns a random number from the set ({-5,-2,1}). The function rand_range(lower,upper,step) does the same thing.","title":"rand_with_step(lower,upper,step)"},{"location":"CAS/Random/#rand_with_prohiblowerupperlist","text":"Returns a random integer from the set [lower,upper] such that it cannot be any value in list . This list can include values which are also random variables, for example, generated by rand_with_step . Examples: rand_with_prohib(-5,5,[0]) returns a random number from the set ({-5,-4,-3,-2,-1,1,2,3,4,5}). rand_with_prohib(-5,5,[-1,0,1,sqrt(pi)]) returns a random number from the set ({-5,-4,-3,-2,2,3,4,5}). rand_with_prohib(-5,3,[-5/2,a]) returns a random number from the set ({-5,-4,-3,-2,-1,0,1,2,3}\\backslash{a}). This can be used with matrices, to generate a matrix with non-zero entries for example. The unnamed function in this example ignores its arguments. matrixmap(lambda([ex],rand_with_prohib(-5,5,[0])),zeromatrix(5,5)); To create a matrix of a random size you can use Maxima's makelist function, e.g. M1:apply(matrix, makelist(makelist(2^n/3^m, n,1,4), m,1,3));","title":"rand_with_prohib(lower,upper,list)"},{"location":"CAS/Random/#rand_selectionex-n","text":"Returns a list containing a random selection of n different items from the list/set ex . If ex contains duplicates, then the result may also contain duplicates.","title":"rand_selection(ex, n)"},{"location":"CAS/Random/#rand_selection_with_replacementex-n","text":"Returns a list containing a random selection of n items from the list/set ex .","title":"rand_selection_with_replacement(ex, n)"},{"location":"CAS/Random/#generating-random-polynomials","text":"Here is an example which generates a random polynomial, of degree 5, with coefficients between 0 and 6. apply(\"+\",makelist(rand(7)*x^(k-1),k,6));","title":"Generating random polynomials"},{"location":"CAS/Random/#generating-random-expressions-which-needs-to-be-gathered-and-sorted","text":"It is relatively common to want to be able to generate random expressions which need to be \"gathered and sorted\". For example in (2y-y+3y+1) we need to collect together the (y) terms. simp:false; p:apply(\"+\",makelist(ev(rand_with_prohib(-5,5,[0])*y^rand(2),simp), ev(rand(6)+2,simp))); p:unary_minus_sort(p); Now, the output from the first expression will be a random expression in constants and (y) variables. The second line tidies up the unary minus. For more details of this, see simplification . 4*y+5*y+(-2*y) 4*y+5*y-2*y","title":"Generating random expressions which needs to be \"gathered and sorted\""},{"location":"CAS/Random/#random-objects-with-corresponding-information","text":"It is often necessary to generate a random object with a number of separate aspects to it. For example, if you have scientific data and you need to include this in a question. t:rand(5)+3; idx:rand(3)+1; /* Array indexes in Maxima start at 1, rand(n) returns 0,...,n-1. */ l1:[\"Mercury\",\"Earth\",\"Mars\"]; l2:[3.61,9.8,3.75]; p:l1[idx]; ta:t*l2[idx]/(4*%pi^2); The question text can then be A pendulum is located on {@p@}. What length should the pendulum have in order to have a period of {@t@}s? This indexing with the variable idx is quite robust. Note that indexes in Maxima start at (1), whereas rand(n) could return zero. Another option is to use rand() on a list of lists, allowing to group the information of an object in a slick way: t:rand(5)+3; [p, g] : rand([[\"Mercury\",3.61], [\"Earth\",9.81], [\"Mars\",3.75]]); ta:t*g/(4*%pi^2); Here, rand() will return one random list of the given lists, say [\"Earth\",9.81] . The assigment [p, g] : [\"Earth\",9.81] then works as one would expect, namely just as p : \"Earth\"; g : 9.81; would.","title":"Random objects with corresponding information"},{"location":"CAS/Random/#random-objects-satisfying-a-condition","text":"It is often necessary to create random objects which satisfy constraints. For example, if you want to randomly generate a \"small\" prime number, just select one from a list. p:rand([2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]); It is much better to (i) enumerate specific cases or (ii) reverse engineer the question to avoid conditional statements than randomly generate examples and \"hope\" one pops up eventually. The reason is that the pseudo-random number generator will repeat the process from a seed every time the question is generated! If you put in loops, this could risk delays and time-outs etc. The following is NOT RECOMMENDED, but enough people have insisted on doing it to document this approach. If you must (and you risk an infinite loop of course....) you can use Maxima's for command. A simple example is as follows. q:1; for k while not(is(primep(q))) do block(q:rand(98)+1);","title":"Random objects satisfying a condition"},{"location":"CAS/Random/#see-also","text":"Maxima reference topics","title":"See also"},{"location":"CAS/Real_Intervals/","text":"Real intervals and sets of real numbers STACK has a simple system for representing and dealing with real intervals and sets of real numbers. Simple real intervals may be represented by the inert functions oo(a,b) , oc(a,b) , co(a,b) , and cc(a,b) . Here the character o stands for open end point, and c for a closed end point. So oc(-1,3) is the interval ( { x\\in\\mathbb{R} | -1 < x \\mbox{ and } x\\leq 3.} ), and is displayed as ( (-1,3] ) with mismatching brackets in the tradition of UK mathematics. The Maxima function union requires its arguments to be sets, and intervals are not sets. You must use the %union function (from the package to_poly_solve ) to join simple intervals and combine them with discrete sets. E.g. %union(oo(-2,-1),oo(1,2)) Note that the %union function sorts its arguments (unless you have simp:false ), and sort puts simple intervals of the form oo(-inf,a) out of order at the right hand end. So, some sorting functions return lists of intervals, not %union as you might expect, to preserve the order. As arguments, the %union command can take both simple intervals and sets of discrete real numbers, e.g. %union(oo(-inf,0),{1},oo(2,3)); Similarly, STACK provides %intersection to represent an intersection of intervals (which the package to_poly_solve does not have). Predicate functions intervalp(ex) returns true if ex is a single simple interval. Does not check ex is variable free, so oo(a,b) is a simple interval. {} , none , all and singleton sets are not considered \"intervals\" by this predicate, use realsetp instead. The primary purpose of this predicate is to detect intervals oo , oc etc within code. inintervalp(x, I) returns true if x is an element of I and false otherwise. x must be a real number. I must be a set of numbers or a simple interval of the form oo(a,b) etc. trivialintervalp(ex) returns true if ex is a trivial interval such as ((a,a)). unionp(ex) is the operator a union? intersectionp(ex) is the operator an intersection? realsetp(ex) return true if ex represents a definite set of real numbers, e.g. a union of intervals. All end points and set elements must be real numbers, so oo(a,b) is not a realset . If you want to permit variables in sets and as endpoints use realset_soft_p instead. interval_disjointp(I1, I2) establishes if two simple intervals are disjoint. interval_subsetp(S1, S2) is the real set S1 contained within the real set S2 ? interval_containsp(I1, S2) is the simple interval I1 an explicit sub-interval within the real set S2 ? No proper subsets here, but this is useful for checking which intervals a student has. Basic manipulation of intervals. interval_simple_union(I1, I2) join two simple intervals. interval_sort(I) takes a list of intervals and sorts them into ascending order by their left hand ends. Returns a list. interval_connect(S) Given a %union of intervals, checks whether any intervals are connected, and if so, joins them up and returns the ammended union. interval_tidy(S) Given a union of sets, returns the \"canonical form\" of this union. interval_intersect(S1, S2) intersect two two simple intervals or two real sets, e.g. %union sets. interval_intersect_list(ex) intersect a list of real sets. interval_complement(ex) take a %union of intervals and return its complement. interval_set_complement(ex) Take a set of real numbers, and return the %union of intervals not containing these numbers. interval_count_components(ex) Take a set of real numbers, and return the number of separate connected components in the whole expression. Simple intervals count as one, and sets count as number number of distinct points in the set. Trivial intervals, such as the empty set, count for 0. No simplification is done, so you might need to use interval_tidy(ex) first if you don't want to count just the representation. Natural domains, and real sets with a variable. The function natural_domain(ex) returns the natural domain of a function represented by the expression ex , in the form of the inert function realset . For example natural_domain(1/x) gives realset(x,%union(oo(0,inf),oo(\u2212inf,0))); The inert function realset allows a variable to be passed with a set of numbers. This is mostly for displaying natural domains in a sensible way. For example, where the complement of the intervals is a discrete set, the realset is displayed as (x\\not\\in \\cdots) rather than (x \\in \\cdots) which is normally much easier to read and understand. realset(x,%union(oo(0,inf),oo(-inf,0))); is displayed as (x \\not\\in{0}). Validation of students' answers Students must simply type union (not %union ) etc. Validation of students' answer has a very loose sense of \"type\". When we are checking the \"type\" of answer, if the teacher's answer is a \"set\" then the student's answer should also be a \"set\" (see setp ). If the teacher's answer is acually a set in the context where an interval should be considered valid, then the teacher's answer should be the inert function %union , e.g. %union({1,2,3}) , to bump the type of the teacher's answer away from set and into realset . Validation does some simple checks, so that mal-formed intervals such as oo(1) and oo(4,3) are rejected as invalid. Assessment of students' answers The algebraic equivalence answer test will apply interval_tidy as needed and compare the results. Currently the feedback in this situation provided by this answer test is minimal.","title":"Real intervals and sets of real numbers"},{"location":"CAS/Real_Intervals/#real-intervals-and-sets-of-real-numbers","text":"STACK has a simple system for representing and dealing with real intervals and sets of real numbers. Simple real intervals may be represented by the inert functions oo(a,b) , oc(a,b) , co(a,b) , and cc(a,b) . Here the character o stands for open end point, and c for a closed end point. So oc(-1,3) is the interval ( { x\\in\\mathbb{R} | -1 < x \\mbox{ and } x\\leq 3.} ), and is displayed as ( (-1,3] ) with mismatching brackets in the tradition of UK mathematics. The Maxima function union requires its arguments to be sets, and intervals are not sets. You must use the %union function (from the package to_poly_solve ) to join simple intervals and combine them with discrete sets. E.g. %union(oo(-2,-1),oo(1,2)) Note that the %union function sorts its arguments (unless you have simp:false ), and sort puts simple intervals of the form oo(-inf,a) out of order at the right hand end. So, some sorting functions return lists of intervals, not %union as you might expect, to preserve the order. As arguments, the %union command can take both simple intervals and sets of discrete real numbers, e.g. %union(oo(-inf,0),{1},oo(2,3)); Similarly, STACK provides %intersection to represent an intersection of intervals (which the package to_poly_solve does not have). Predicate functions intervalp(ex) returns true if ex is a single simple interval. Does not check ex is variable free, so oo(a,b) is a simple interval. {} , none , all and singleton sets are not considered \"intervals\" by this predicate, use realsetp instead. The primary purpose of this predicate is to detect intervals oo , oc etc within code. inintervalp(x, I) returns true if x is an element of I and false otherwise. x must be a real number. I must be a set of numbers or a simple interval of the form oo(a,b) etc. trivialintervalp(ex) returns true if ex is a trivial interval such as ((a,a)). unionp(ex) is the operator a union? intersectionp(ex) is the operator an intersection? realsetp(ex) return true if ex represents a definite set of real numbers, e.g. a union of intervals. All end points and set elements must be real numbers, so oo(a,b) is not a realset . If you want to permit variables in sets and as endpoints use realset_soft_p instead. interval_disjointp(I1, I2) establishes if two simple intervals are disjoint. interval_subsetp(S1, S2) is the real set S1 contained within the real set S2 ? interval_containsp(I1, S2) is the simple interval I1 an explicit sub-interval within the real set S2 ? No proper subsets here, but this is useful for checking which intervals a student has. Basic manipulation of intervals. interval_simple_union(I1, I2) join two simple intervals. interval_sort(I) takes a list of intervals and sorts them into ascending order by their left hand ends. Returns a list. interval_connect(S) Given a %union of intervals, checks whether any intervals are connected, and if so, joins them up and returns the ammended union. interval_tidy(S) Given a union of sets, returns the \"canonical form\" of this union. interval_intersect(S1, S2) intersect two two simple intervals or two real sets, e.g. %union sets. interval_intersect_list(ex) intersect a list of real sets. interval_complement(ex) take a %union of intervals and return its complement. interval_set_complement(ex) Take a set of real numbers, and return the %union of intervals not containing these numbers. interval_count_components(ex) Take a set of real numbers, and return the number of separate connected components in the whole expression. Simple intervals count as one, and sets count as number number of distinct points in the set. Trivial intervals, such as the empty set, count for 0. No simplification is done, so you might need to use interval_tidy(ex) first if you don't want to count just the representation.","title":"Real intervals and sets of real numbers"},{"location":"CAS/Real_Intervals/#natural-domains-and-real-sets-with-a-variable","text":"The function natural_domain(ex) returns the natural domain of a function represented by the expression ex , in the form of the inert function realset . For example natural_domain(1/x) gives realset(x,%union(oo(0,inf),oo(\u2212inf,0))); The inert function realset allows a variable to be passed with a set of numbers. This is mostly for displaying natural domains in a sensible way. For example, where the complement of the intervals is a discrete set, the realset is displayed as (x\\not\\in \\cdots) rather than (x \\in \\cdots) which is normally much easier to read and understand. realset(x,%union(oo(0,inf),oo(-inf,0))); is displayed as (x \\not\\in{0}).","title":"Natural domains, and real sets with a variable."},{"location":"CAS/Real_Intervals/#validation-of-students-answers","text":"Students must simply type union (not %union ) etc. Validation of students' answer has a very loose sense of \"type\". When we are checking the \"type\" of answer, if the teacher's answer is a \"set\" then the student's answer should also be a \"set\" (see setp ). If the teacher's answer is acually a set in the context where an interval should be considered valid, then the teacher's answer should be the inert function %union , e.g. %union({1,2,3}) , to bump the type of the teacher's answer away from set and into realset . Validation does some simple checks, so that mal-formed intervals such as oo(1) and oo(4,3) are rejected as invalid.","title":"Validation of students' answers"},{"location":"CAS/Real_Intervals/#assessment-of-students-answers","text":"The algebraic equivalence answer test will apply interval_tidy as needed and compare the results. Currently the feedback in this situation provided by this answer test is minimal.","title":"Assessment of students' answers"},{"location":"CAS/STACK-Maxima_sandbox/","text":"STACK - Maxima Sandbox It is very useful when authoring questions to be able to test out Maxima code on your local machine in the same environment in which STACK uses Maxima on your server. That is to say, to run a desktop version of Maxima with the local settings and STACK specific functions loaded. You can copy the Maxima code from the question testing page into the sandbox for offline testing and debugging of a question. This is also used in reporting and analysis of students' responses. To do this you will need to load the libraries of Maxima functions specific to STACK. You may also want to copy some of your local settings from the server to your local machine to ensure an identical setup, but this is not strictly necessary for most purposes. The first step is to install wxMaxima on your local machine (http://maxima.sourceforge.net/). Getting the STACK libraries You will need to download the STACK files onto your local machine. Download all the STACK files from GitHub (git clone or as a .zip). E.g. try https://github.com/maths/moodle-qtype_stack/archive/master.zip The only files you need to run the sandbox are contained within the directory stack/maxima/ This directory also contains the wxMaxima file sandbox.wmx which is the \"sandbox\" interface file. Your goals are (i) to set Maxima's path so it can find all the files you have downloaded, and (ii) to load the file stack/maxima/stackmaxima.mac Copy sandbox.wmx somewhere you can find it later and edit this file to reflect the location of the above file on your local machine. On a Microsoft operating system, if you place the all the files (i.e. clone or unzip the download) into c:/tmp/stackroot the sandbox.wmx should work without further adjustment. Otherwise open sandbox.wmx with wxMaxima and follow the further instructions it contains to setup the path for Maxima. Note, the backslash character \\ is a control character so you will need to edit the path to replace the \\ with / in wxMaxima. Execute the sandbox file with wxMaxima when you have updated the settings with cell > Evaluate all cells . If you see something like the following you have set this up correctly (version numbers will vary). [ STACK-Maxima started, library version 2022022300 ] You can test this out by using, for example, the rand() function. rand(matrix([5,5],[5,5])); to create a pseudo-random matrix. If rand returns unevaluated, then you have not loaded the libraries correctly. An alternative approach on a Microsoft operating system is to copy the contents of (a working) sandbox.wmx file into a %USERPROFILE%/Maxima/stacklocal.mac Using load(\"stacklocal\") in any worksheet will load the STACK environement. Using the answer tests Please make sure you read the page on answer tests first. Informally, the answer tests have the following syntax [Errors, Result, FeedBack, Note] = AnswerTest(StudentAnswer, TeacherAnswer, Opt) actually the results returned in Maxima are [Valid, Result, FeedBack, Note] = AnswerTest(StudentAnswer, TeacherAnswer, Opt) Errors are echoed to the console, and are trapped by another mechanism. The valid field is used to render an attempt invalid, not wrong. To call an answer test directly from Maxima, you need to use the correct function name. For example, to call the algebraic equivalence (AlgEquiv) answer test you need to use ATAlgEquiv(x^2+2,x*(x+1)); The values returned are actually in the form [true,false,\"\",\"\"] Feedback is returned in the form of a language tag which is translated later. For example, (%i1) ATInt(x^2,x*(x+1),x); (%o1) [true,false,\"ATInt_generic. \", \"stack_trans('ATInt_generic' , !quot!\\\\[2\\\\,x+1\\\\]!quot! , !quot!\\\\(x\\\\)!quot! , !quot!\\\\[2\\\\,x\\\\]!quot! ); \"] If you just want to decide if two expressions are considered to be algebraically equivalent, then use algebraic_equivalence(ex1,ex2); This is the function the answer test ATAlgEquiv uses without all the wrapper of a full answer test. Useful tips STACK turns off the traditional two-dimensional display, which we can turn back on with the following command. display2d:true; Setting Maxima's Global Path (Microsoft) Setting the path in Maxima is a problem on a Microsoft platform. Maxima does not deal well with spaces in filenames, for example. The simplest solution is to create a directory C:/maxima and add this to Maxima's path. Place all Maxima files in this directory, so they will then be seen by Maxima. For Maxima 5.43.2, edit, or create, the file C:/Program Files/maxima-5.43.2/share/maxima/5.43.2/share/maxima-init.mac ensure it contains the following lines, possibly modified to reflect the directory you have chosen file_search_maxima:append([sconcat(\"C:/maxima/###.{mac,mc}\")],file_search_maxima)$ file_search_lisp:append([sconcat(\"C:/maxima/###.{lisp}\")],file_search_lisp)$ Other versions of Maxima are similar. Reflecting the settings on your server The healtcheck page (Moodle admin access only) displays the contents of the Maxima configuration file which is written to the sever. This contains Maxima commands to update the path (which you probably don't want to copy) and also the function STACK_SETUP(ex) which configures your particular version of STACK. You may want to replace STACK_SETUP(ex) in the sandbox with STACK_SETUP(ex) from the Moodle server. For most users this should not be needed, and is most useful for advanced debugging where significant differences between versions matters. It is more important to match the version of the STACK code you downloaded from github with the version you have on your server. The STACK documentation page on your server gives the version number of the STACK code at the bottom of the documentation front page. For example https://stack-demo.maths.ed.ac.uk/demo/question/type/stack/doc/doc.php/ shows the version of the STACK code the demo site is running.","title":"STACK - Maxima Sandbox"},{"location":"CAS/STACK-Maxima_sandbox/#stack-maxima-sandbox","text":"It is very useful when authoring questions to be able to test out Maxima code on your local machine in the same environment in which STACK uses Maxima on your server. That is to say, to run a desktop version of Maxima with the local settings and STACK specific functions loaded. You can copy the Maxima code from the question testing page into the sandbox for offline testing and debugging of a question. This is also used in reporting and analysis of students' responses. To do this you will need to load the libraries of Maxima functions specific to STACK. You may also want to copy some of your local settings from the server to your local machine to ensure an identical setup, but this is not strictly necessary for most purposes. The first step is to install wxMaxima on your local machine (http://maxima.sourceforge.net/).","title":"STACK - Maxima Sandbox"},{"location":"CAS/STACK-Maxima_sandbox/#getting-the-stack-libraries","text":"You will need to download the STACK files onto your local machine. Download all the STACK files from GitHub (git clone or as a .zip). E.g. try https://github.com/maths/moodle-qtype_stack/archive/master.zip The only files you need to run the sandbox are contained within the directory stack/maxima/ This directory also contains the wxMaxima file sandbox.wmx which is the \"sandbox\" interface file. Your goals are (i) to set Maxima's path so it can find all the files you have downloaded, and (ii) to load the file stack/maxima/stackmaxima.mac Copy sandbox.wmx somewhere you can find it later and edit this file to reflect the location of the above file on your local machine. On a Microsoft operating system, if you place the all the files (i.e. clone or unzip the download) into c:/tmp/stackroot the sandbox.wmx should work without further adjustment. Otherwise open sandbox.wmx with wxMaxima and follow the further instructions it contains to setup the path for Maxima. Note, the backslash character \\ is a control character so you will need to edit the path to replace the \\ with / in wxMaxima. Execute the sandbox file with wxMaxima when you have updated the settings with cell > Evaluate all cells . If you see something like the following you have set this up correctly (version numbers will vary). [ STACK-Maxima started, library version 2022022300 ] You can test this out by using, for example, the rand() function. rand(matrix([5,5],[5,5])); to create a pseudo-random matrix. If rand returns unevaluated, then you have not loaded the libraries correctly. An alternative approach on a Microsoft operating system is to copy the contents of (a working) sandbox.wmx file into a %USERPROFILE%/Maxima/stacklocal.mac Using load(\"stacklocal\") in any worksheet will load the STACK environement.","title":"Getting the STACK libraries"},{"location":"CAS/STACK-Maxima_sandbox/#using-the-answer-tests","text":"Please make sure you read the page on answer tests first. Informally, the answer tests have the following syntax [Errors, Result, FeedBack, Note] = AnswerTest(StudentAnswer, TeacherAnswer, Opt) actually the results returned in Maxima are [Valid, Result, FeedBack, Note] = AnswerTest(StudentAnswer, TeacherAnswer, Opt) Errors are echoed to the console, and are trapped by another mechanism. The valid field is used to render an attempt invalid, not wrong. To call an answer test directly from Maxima, you need to use the correct function name. For example, to call the algebraic equivalence (AlgEquiv) answer test you need to use ATAlgEquiv(x^2+2,x*(x+1)); The values returned are actually in the form [true,false,\"\",\"\"] Feedback is returned in the form of a language tag which is translated later. For example, (%i1) ATInt(x^2,x*(x+1),x); (%o1) [true,false,\"ATInt_generic. \", \"stack_trans('ATInt_generic' , !quot!\\\\[2\\\\,x+1\\\\]!quot! , !quot!\\\\(x\\\\)!quot! , !quot!\\\\[2\\\\,x\\\\]!quot! ); \"] If you just want to decide if two expressions are considered to be algebraically equivalent, then use algebraic_equivalence(ex1,ex2); This is the function the answer test ATAlgEquiv uses without all the wrapper of a full answer test.","title":"Using the answer tests"},{"location":"CAS/STACK-Maxima_sandbox/#useful-tips","text":"STACK turns off the traditional two-dimensional display, which we can turn back on with the following command. display2d:true;","title":"Useful tips"},{"location":"CAS/STACK-Maxima_sandbox/#setting-maximas-global-path-microsoft","text":"Setting the path in Maxima is a problem on a Microsoft platform. Maxima does not deal well with spaces in filenames, for example. The simplest solution is to create a directory C:/maxima and add this to Maxima's path. Place all Maxima files in this directory, so they will then be seen by Maxima. For Maxima 5.43.2, edit, or create, the file C:/Program Files/maxima-5.43.2/share/maxima/5.43.2/share/maxima-init.mac ensure it contains the following lines, possibly modified to reflect the directory you have chosen file_search_maxima:append([sconcat(\"C:/maxima/###.{mac,mc}\")],file_search_maxima)$ file_search_lisp:append([sconcat(\"C:/maxima/###.{lisp}\")],file_search_lisp)$ Other versions of Maxima are similar.","title":"Setting Maxima's Global Path (Microsoft)"},{"location":"CAS/STACK-Maxima_sandbox/#reflecting-the-settings-on-your-server","text":"The healtcheck page (Moodle admin access only) displays the contents of the Maxima configuration file which is written to the sever. This contains Maxima commands to update the path (which you probably don't want to copy) and also the function STACK_SETUP(ex) which configures your particular version of STACK. You may want to replace STACK_SETUP(ex) in the sandbox with STACK_SETUP(ex) from the Moodle server. For most users this should not be needed, and is most useful for advanced debugging where significant differences between versions matters. It is more important to match the version of the STACK code you downloaded from github with the version you have on your server. The STACK documentation page on your server gives the version number of the STACK code at the bottom of the documentation front page. For example https://stack-demo.maths.ed.ac.uk/demo/question/type/stack/doc/doc.php/ shows the version of the STACK code the demo site is running.","title":"Reflecting the settings on your server"},{"location":"CAS/Simplification/","text":"Simplification & ordering Algebraic equivalence Is ((a^x)^y \\equiv a^{x\\,y})? Well, it depends! In particular you can easily derive the contradiction [ -1 = (-1)^1 = (-1)^{2\\times \\frac{1}{2}} ] and using our rule ((a^x)^y \\equiv a^{x\\,y}) [ = \\left({(-1)^{2}}\\right)^{\\frac{1}{2}} = 1^{\\frac{1}{2}} = 1.] To avoid problems like this we therefore have decided that ATAlgEquiv((a^x)^y, a^(x*y)) = [0, \"\"] If you are teaching rules of indices to students for the first time this might come as a surprise! If you would like STACK to implement this rule, then you need to also assume(a>0) . This can be done in the feedback variables. This is a design decision and not a bug (and is recorded in the system unit tests)! Note the Maxima function rootscontract which converts products of roots into roots of products. Ordering terms Maxima chooses an order in which to write terms in an expression. By default, this will use reverse lexicographical order for simple sums, so that we have (b+a) instead of (a+b). In elementary mathematics this looks a little odd! One way to overcome this is to use simplification below but another way is to alter the order in which expressions are transformed. To alter the order in STACK you can use the Maxima commands orderless and ordergreat . To have (a+b) you can use ordergreat(a,b); See Maxima's documentation for more details. Only one orderless or ordergreat command can be issued in any session. The last one encountered will be used and the others ignored. No warnings or errors are issued if more than one is encountered. Logarithms to an arbitrary base By default, Maxima does not provide logarithms to an arbitrary base. To overcome this, STACK provides a function lg for student entry. lg(x) is log of (x) to the base 10. lg(x, a) is log of (x) to the base (a). STACK provides no simplification rules for these logarithms. To simplify you must transform back to natural logarithms. For example (with simp:true or simp:false ) p:lg(27, 3) q:ev(p, lg=logbasesimp) results in p=lg(27, 3) , and q=3 . The algebraic equivalence function algebraic_equivalence , and so anything upon which it depends, will automatically remove logarithms to other bases. This includes the answer tests as needed. Selective simplification {#selective-simplification} The level of simplification performed by Maxima can be controlled by changing Maxima's global variable simp , e.g. simp:true When simp is set to false , no simplification is performed and Maxima is quite happy to deal with an expression such as (1+4) without actually performing the addition. This is most useful for dealing with very elementary expressions, and for showing working . This variable can be set at the question level using the options or for each Potential response tree . When simp is set to false , you can evaluate an expression with simplification turned on by using ev(..., simp) , for example: simp:false; a:ev(1+1,simp); will give (a=2). Within CASText (question text, general feedback, etc.) Sometimes it is useful to control the level of simplification applied to expressions included within CASText using {@...@} . In particular, to show steps in working, it is often necessary to turn simplification off. To selectively control simplification within CASText (including the general feedback), you can use the following methods: Set simp:false in the question options, or at the end of your question variables. That way all expressions in the CASText will be unsimplified, but you can use {@ev(...,simp)@} to simplify selectively. Use evaluation flags to control the level of simplification for an individual CAS expression, for example: {@3/9,simp=false@} Use a define block to set the value of simp , e.g. [[define simp=\"false\"/]] \\({@3/9@} \\neq {@1+1@}\\) [[define simp=\"true\"/]] \\({@3/9@} \\neq {@1+1@}\\) will produce (\\frac{3}{9}\\neq1+1) followed by (\\frac{1}{3}\\neq2). 4. Switch simplification {@(simp:false,3/9)@} This command sets the value of simp for this expression, and all others which follow, much like the define block above. Unary minus and simplification There are still some problems with the unary minus, e.g. sometimes we get the display (4+(-3x)) when we would actually like to always display as (4-3x). This is a problem with the unary minus function -(x) as compared to binary infix subtraction a-b . To reproduce this problem type in the following into a Maxima session: simp:false; p:y^3-2*y^2-8*y; This displays the polynomial as follows. y^3-2*y^2+(-8)*y Notice the first subtraction is fine, but the second one is not. To understand this, we can view the internal tree structure of the expression by typing in ?print(p); ((MPLUS) ((MEXPT) $Y 3) ((MMINUS) ((MTIMES) 2 ((MEXPT) $Y 2))) ((MTIMES) ((MMINUS) 8) $Y)) In the structure of this expression the first negative coefficient is -(2*y^2) BUT the second is -(8)*y . This again is a crucial but subtle difference! To address this issue we have a function unary_minus_sort(p); which pulls \"-\" out the front in a specific situation: that of a product with a negative number at the front. The result here is the anticipated y^3-2*y^2-8*y . Note that STACK's display functions automatically apply unary_minus_sort(...) to any expression being displayed. Really insisting on printing the parentheses Why does STACK (i.e. Maxima) not print out the parentheses? For example, try the following. simp:false; p1:(a+b)+c; tex(p1); The result is (a+b+c). Where have the parentheses gone? On the other hand p2:a+(b+c) is displayed as (a+\\left(b+c\\right)). Why are these displayed differently? Assuming simp:false and using Maxima's ?print command we can see the internal structure. ?print(a+b+c) gives ((MPLUS) $A $B $C) . This means we have the flattened (nary) sum of the three variables. This will always not have brackets. ?print((a+b)+c) gives ((MPLUS) ((MPLUS) $A $B) $C) . This is not yet flattened to an nary sum, but Maxima's tex routines suppress the parentheses, even with simp:false . This is part of the problem. ?print(a+(b+c)) gives ((MPLUS) $A ((MPLUS) $B $C)) . This is not yet flattened to an nary sum, and in this case it displayed as (a+\\left(b+c\\right)) by Maxima's TeX function. Note, this display problem is not a bug. Experts would interpret (a+b+c) as ((a+b)+c) not as (a+(b+c)). This is only a problem in teaching when we want to display (arguably not needed) parentheses. To solve this display problem STACK has an inert disp_parens function. All this function does is print round brackets (parentheses) around its argument. For example, try the following. simp:false; p1:disp_parens(a+b)+c; tex(p1); The result is ({\\left( a+b \\right)+c}). Parentheses can also be added to other expressions which, strictly speaking, do not need them. For example int(disp_parens(x-2),x) is displayed as ({\\int {\\left( x-2 \\right)}{\\;\\mathrm{d}x}}). It may be necessary to remove the disp_parens from an expression. STACK provides the function remove_disp_parens(ex) to remove this inert display function. Actually, this function is remarkably simple. remove_disp_parens(ex) := ev(ex, disp_parens=lambda([ex2], ex2))$ The function disp_parens has no mathematical definition. It just changes the TeX output. The above function re-evaluates the expression, with this function equal to the identity function ( lambda([ex2], ex2)) ). Giving disp_parens this mathematical definition effectively removes it. Note that the answer tests do not remove the disp_parens function from a teacher's expression. Hence, a+b+c and `disp_parens(a+b)+c are not algebraically equivalent. Teachers who use these display functions must remove them before answer tests are applied. Students cannot use the disp_parens function. Indeed, currently a student's input of (a+b)+c is displayed as Maxima does without the brackets (yes, this might be considered a bug). Selecting, and highlighting part of an expression Like disp_parens , STACK provides a function disp_select which highlights part of an expression. All this function does is colour the argument red and underline it. For example 1+disp_select(x^2+2) is displayed as ({1+\\color{red}{\\underline{x^2+2}}}). Note, the combination of colour and the underline is because it is considered poor practice to use colour alone to convey meaning. STACK provides the function remove_disp_select(ex) to remove this inert display function. The function remove_disp(ex) removes all inert display functions. When creating feedback it is often useful to select, and highlight, part of an expression. STACK provides a function select(p1, ex) to do this. The select function traverses the expression tree for ex and when it encounters a sub-tree for which the predicate p1 is true it adds disp_select to the sub-tree and stops traversing any further down that sub-tree. While nested disp_select are possible (and will dispaly multiple underlines: another reason for having underline) this particular function stops once p1 is true. You will need to build nested display by hand. For example, to select all the integers in an expression you can use the predicate integerp and select(integerp, 1+x+0.5*x^2) gives (\\color{red}{\\underline{1}}+x+0.5\\cdot x^{\\color{red}{\\underline{2}}}). It is possible to use any of the existing predicate functions, or to define your own function in the question variables. The function select_apply(f1, ex) traverses the expression and when it encounters the disp_select function it applied the function f1 to that sub-tree of the expression. This allows for selective simplification/modification of highlighted sub-trees. For example, simp:false; p1:select(zeroMulp, (1-1)*x^2+0*x+1); p2:select_apply(simplify, p1); p3:select_apply(simplify, p1, false); generates the following displayed expressions. p1 displays as ({\\left(1-1\\right)\\cdot x^2+\\color{red}{\\underline{0\\cdot x}}+1}). We have selected all the parts for which the predicate zeroMulp is true. This is the predicate which checks if the rule (0 \\times x \\rightarrow 0 ) is applicable. While the coefficient of (x^2) is equivalent to zero, it is unsimplified and the predicate zeroMulp(1-1) is false. This sub-tree is not selected by this predicate. p2 displays as ({\\left(1-1\\right)\\cdot x^2+0+1}). The displayed expression is subjected to the function simplify , and the displayed part replaced. The rest of the expression is unchanged. By default the disp_select is removed and so the result is not coloured and underlined. p3 displays as ({\\left(1-1\\right)\\cdot x^2+\\color{red}{\\underline{0}}+1}). Notice the third, optional boolean, argument to select_apply in p3 . This argument will decide whether to continue to display the disp_select display or remove it (now the function has been applied). The default is true , so here the red underline is not removed. If you really insist on a kludge.... In some situations you may find you really do need to work at the display level, construct a string and display this to the student in Maxima. Please avoid doing this! a:sin(x^2); b:1+x^2; f:sconcat(\"\\\\frac{\",stack_disp(a,\"\"),\"}{\",stack_disp(b,\"\"),\"}\"); Then you can put in \\({@f@}\\) into one of the CASText fields. Note, you need to add LaTeX maths delimiters, because when the CAS returns a string the command {@f@} will just display the contents of the string without maths delimiters. Tips for manipulating expressions How do we do the following in Maxima? [ (1-x)^a \\times (x-1) \\rightarrow -(1-x)^{a+1}.] Try q:(1-x)^a*(x-1); q:ratsubst(z,1-x,q); q:subst(z=1-x ,q); How do we do the following in Maxima? [ (x-1)(k(x-1))^a \\rightarrow (x-1)^{a+1}k^a.] factor(radcan((x-1)*(k*(x-1))^a)) Maxima's internal representation of an expression sometimes does not correspond with what you expect -- in that case, dispform may help to bring it into the form you expect. For example, the output of solve in the following code shows the (b) in the denominator as (b^{-1}) which gives unnatural-looking output when a value is substituted in -- this is fixed by using dispform and substituting into that variants instead. simp:true; eqn:b = 1/(6*a+3); ta1: expand(rhs(solve(eqn,a)[1])); dispta1:dispform(ta1); simp:false; subst(2,b,ta1); subst(2,b,dispta1); Creating sequences and series One problem is that makelist needs simplification. To create sequences/series, try something like the following an:(-1)^n*2^n/n! N:8 S1:ev(makelist(k,k,1,N),simp) S2:maplist(lambda([ex],ev(an,n=ex)),S1) S3:ev(S2,simp) S4apply(\"+\",S3) Of course, to print out one line in the worked solution you can also apply(\"+\",S2) as well. To create the binomial coefficients simp:false; n:5; apply(\"+\",map(lambda([ex],binomial(n,ex)*x^ex), ev(makelist(k,k,0,5),simp))); Surds Imagine you would like the student to expand out ( (\\sqrt{5}-2)(\\sqrt{5}+4)=2\\sqrt{5}-3 ). There are two tests you probably want to apply to the student's answer. Algebraic equivalence with the correct answer: use ATAlgEquiv . That the expression is \"expanded\": use ATExpanded . You probably then want to make sure a student has \"gathered\" like terms. In particular you'd like to make sure a student has either [ 2\\sqrt{5}-3 \\mbox{ or } \\sqrt{20}-3] but not [ 5+4\\sqrt{2}-2\\sqrt{2}+6.] This causes a problem because ATComAss thinks that [ 2\\sqrt{5}-3 \\neq \\sqrt{20}-3.] So you can't use ATComAss here, and guarantee that all random variants will work by testing that we really have (5+4\\sqrt{2}) for example. What we really want is for the functions sqrt and + to appear precisely once in the student's answer, or that the answer is a sum of two things. Control of surds See also the Maxima documentation on radexpand . For example radexpand:false$ sqrt((2*x+10)/10); radexpand:true$ sqrt((2*x+10)/10); The first of these does not pull out a numerical denominator. The second does. Trig simplification Maxima does have the ability to make assumptions, e.g. to assume that (n) is an integer and then simplify (3\\cos(n\\pi/2)^2) to ( \\frac{3}{2}(1+(-1)^n)). Assume the student's answer is ans1 then then define the following feedback variables: declare(n,integer); sans1:ev(trigrat(ans1),simp); The variable sans1 can then be used in the PRT. Just note that trigrat writes powers of trig functions in terms of multiple angles. This can have an effect of \"expanding\" out an expression. E.g. trigrat(cos(n)^20) is probably still fine, but trigrat(cos(n)^2000) is probably not! For this reason trigrat is not part of the default routines to establish equivalence. Trig simplification, especially when we make assumptions on variables like (n), needs to be done on a question by question basis. Boolean functions See the page on propositional logic . Further examples Some further examples are given elsewhere: Matrix examples in showing working . An example of a question with simp:false is discussed in authoring quick start 7 . Generating random algebraic expressions which need to be \"gathered and sorted\". Note also that question tests do not simplify test inputs.","title":"Simplification & ordering"},{"location":"CAS/Simplification/#simplification-ordering","text":"","title":"Simplification &amp; ordering"},{"location":"CAS/Simplification/#algebraic-equivalence","text":"Is ((a^x)^y \\equiv a^{x\\,y})? Well, it depends! In particular you can easily derive the contradiction [ -1 = (-1)^1 = (-1)^{2\\times \\frac{1}{2}} ] and using our rule ((a^x)^y \\equiv a^{x\\,y}) [ = \\left({(-1)^{2}}\\right)^{\\frac{1}{2}} = 1^{\\frac{1}{2}} = 1.] To avoid problems like this we therefore have decided that ATAlgEquiv((a^x)^y, a^(x*y)) = [0, \"\"] If you are teaching rules of indices to students for the first time this might come as a surprise! If you would like STACK to implement this rule, then you need to also assume(a>0) . This can be done in the feedback variables. This is a design decision and not a bug (and is recorded in the system unit tests)! Note the Maxima function rootscontract which converts products of roots into roots of products.","title":"Algebraic equivalence"},{"location":"CAS/Simplification/#ordering-terms","text":"Maxima chooses an order in which to write terms in an expression. By default, this will use reverse lexicographical order for simple sums, so that we have (b+a) instead of (a+b). In elementary mathematics this looks a little odd! One way to overcome this is to use simplification below but another way is to alter the order in which expressions are transformed. To alter the order in STACK you can use the Maxima commands orderless and ordergreat . To have (a+b) you can use ordergreat(a,b); See Maxima's documentation for more details. Only one orderless or ordergreat command can be issued in any session. The last one encountered will be used and the others ignored. No warnings or errors are issued if more than one is encountered.","title":"Ordering terms"},{"location":"CAS/Simplification/#logarithms-to-an-arbitrary-base","text":"By default, Maxima does not provide logarithms to an arbitrary base. To overcome this, STACK provides a function lg for student entry. lg(x) is log of (x) to the base 10. lg(x, a) is log of (x) to the base (a). STACK provides no simplification rules for these logarithms. To simplify you must transform back to natural logarithms. For example (with simp:true or simp:false ) p:lg(27, 3) q:ev(p, lg=logbasesimp) results in p=lg(27, 3) , and q=3 . The algebraic equivalence function algebraic_equivalence , and so anything upon which it depends, will automatically remove logarithms to other bases. This includes the answer tests as needed.","title":"Logarithms to an arbitrary base"},{"location":"CAS/Simplification/#selective-simplification-selective-simplification","text":"The level of simplification performed by Maxima can be controlled by changing Maxima's global variable simp , e.g. simp:true When simp is set to false , no simplification is performed and Maxima is quite happy to deal with an expression such as (1+4) without actually performing the addition. This is most useful for dealing with very elementary expressions, and for showing working . This variable can be set at the question level using the options or for each Potential response tree . When simp is set to false , you can evaluate an expression with simplification turned on by using ev(..., simp) , for example: simp:false; a:ev(1+1,simp); will give (a=2).","title":"Selective simplification {#selective-simplification}"},{"location":"CAS/Simplification/#within-castext-question-text-general-feedback-etc","text":"Sometimes it is useful to control the level of simplification applied to expressions included within CASText using {@...@} . In particular, to show steps in working, it is often necessary to turn simplification off. To selectively control simplification within CASText (including the general feedback), you can use the following methods: Set simp:false in the question options, or at the end of your question variables. That way all expressions in the CASText will be unsimplified, but you can use {@ev(...,simp)@} to simplify selectively. Use evaluation flags to control the level of simplification for an individual CAS expression, for example: {@3/9,simp=false@} Use a define block to set the value of simp , e.g. [[define simp=\"false\"/]] \\({@3/9@} \\neq {@1+1@}\\) [[define simp=\"true\"/]] \\({@3/9@} \\neq {@1+1@}\\) will produce (\\frac{3}{9}\\neq1+1) followed by (\\frac{1}{3}\\neq2). 4. Switch simplification {@(simp:false,3/9)@} This command sets the value of simp for this expression, and all others which follow, much like the define block above.","title":"Within CASText (question text, general feedback, etc.)"},{"location":"CAS/Simplification/#unary-minus-and-simplification","text":"There are still some problems with the unary minus, e.g. sometimes we get the display (4+(-3x)) when we would actually like to always display as (4-3x). This is a problem with the unary minus function -(x) as compared to binary infix subtraction a-b . To reproduce this problem type in the following into a Maxima session: simp:false; p:y^3-2*y^2-8*y; This displays the polynomial as follows. y^3-2*y^2+(-8)*y Notice the first subtraction is fine, but the second one is not. To understand this, we can view the internal tree structure of the expression by typing in ?print(p); ((MPLUS) ((MEXPT) $Y 3) ((MMINUS) ((MTIMES) 2 ((MEXPT) $Y 2))) ((MTIMES) ((MMINUS) 8) $Y)) In the structure of this expression the first negative coefficient is -(2*y^2) BUT the second is -(8)*y . This again is a crucial but subtle difference! To address this issue we have a function unary_minus_sort(p); which pulls \"-\" out the front in a specific situation: that of a product with a negative number at the front. The result here is the anticipated y^3-2*y^2-8*y . Note that STACK's display functions automatically apply unary_minus_sort(...) to any expression being displayed.","title":"Unary minus and simplification"},{"location":"CAS/Simplification/#really-insisting-on-printing-the-parentheses","text":"Why does STACK (i.e. Maxima) not print out the parentheses? For example, try the following. simp:false; p1:(a+b)+c; tex(p1); The result is (a+b+c). Where have the parentheses gone? On the other hand p2:a+(b+c) is displayed as (a+\\left(b+c\\right)). Why are these displayed differently? Assuming simp:false and using Maxima's ?print command we can see the internal structure. ?print(a+b+c) gives ((MPLUS) $A $B $C) . This means we have the flattened (nary) sum of the three variables. This will always not have brackets. ?print((a+b)+c) gives ((MPLUS) ((MPLUS) $A $B) $C) . This is not yet flattened to an nary sum, but Maxima's tex routines suppress the parentheses, even with simp:false . This is part of the problem. ?print(a+(b+c)) gives ((MPLUS) $A ((MPLUS) $B $C)) . This is not yet flattened to an nary sum, and in this case it displayed as (a+\\left(b+c\\right)) by Maxima's TeX function. Note, this display problem is not a bug. Experts would interpret (a+b+c) as ((a+b)+c) not as (a+(b+c)). This is only a problem in teaching when we want to display (arguably not needed) parentheses. To solve this display problem STACK has an inert disp_parens function. All this function does is print round brackets (parentheses) around its argument. For example, try the following. simp:false; p1:disp_parens(a+b)+c; tex(p1); The result is ({\\left( a+b \\right)+c}). Parentheses can also be added to other expressions which, strictly speaking, do not need them. For example int(disp_parens(x-2),x) is displayed as ({\\int {\\left( x-2 \\right)}{\\;\\mathrm{d}x}}). It may be necessary to remove the disp_parens from an expression. STACK provides the function remove_disp_parens(ex) to remove this inert display function. Actually, this function is remarkably simple. remove_disp_parens(ex) := ev(ex, disp_parens=lambda([ex2], ex2))$ The function disp_parens has no mathematical definition. It just changes the TeX output. The above function re-evaluates the expression, with this function equal to the identity function ( lambda([ex2], ex2)) ). Giving disp_parens this mathematical definition effectively removes it. Note that the answer tests do not remove the disp_parens function from a teacher's expression. Hence, a+b+c and `disp_parens(a+b)+c are not algebraically equivalent. Teachers who use these display functions must remove them before answer tests are applied. Students cannot use the disp_parens function. Indeed, currently a student's input of (a+b)+c is displayed as Maxima does without the brackets (yes, this might be considered a bug).","title":"Really insisting on printing the parentheses"},{"location":"CAS/Simplification/#selecting-and-highlighting-part-of-an-expression","text":"Like disp_parens , STACK provides a function disp_select which highlights part of an expression. All this function does is colour the argument red and underline it. For example 1+disp_select(x^2+2) is displayed as ({1+\\color{red}{\\underline{x^2+2}}}). Note, the combination of colour and the underline is because it is considered poor practice to use colour alone to convey meaning. STACK provides the function remove_disp_select(ex) to remove this inert display function. The function remove_disp(ex) removes all inert display functions. When creating feedback it is often useful to select, and highlight, part of an expression. STACK provides a function select(p1, ex) to do this. The select function traverses the expression tree for ex and when it encounters a sub-tree for which the predicate p1 is true it adds disp_select to the sub-tree and stops traversing any further down that sub-tree. While nested disp_select are possible (and will dispaly multiple underlines: another reason for having underline) this particular function stops once p1 is true. You will need to build nested display by hand. For example, to select all the integers in an expression you can use the predicate integerp and select(integerp, 1+x+0.5*x^2) gives (\\color{red}{\\underline{1}}+x+0.5\\cdot x^{\\color{red}{\\underline{2}}}). It is possible to use any of the existing predicate functions, or to define your own function in the question variables. The function select_apply(f1, ex) traverses the expression and when it encounters the disp_select function it applied the function f1 to that sub-tree of the expression. This allows for selective simplification/modification of highlighted sub-trees. For example, simp:false; p1:select(zeroMulp, (1-1)*x^2+0*x+1); p2:select_apply(simplify, p1); p3:select_apply(simplify, p1, false); generates the following displayed expressions. p1 displays as ({\\left(1-1\\right)\\cdot x^2+\\color{red}{\\underline{0\\cdot x}}+1}). We have selected all the parts for which the predicate zeroMulp is true. This is the predicate which checks if the rule (0 \\times x \\rightarrow 0 ) is applicable. While the coefficient of (x^2) is equivalent to zero, it is unsimplified and the predicate zeroMulp(1-1) is false. This sub-tree is not selected by this predicate. p2 displays as ({\\left(1-1\\right)\\cdot x^2+0+1}). The displayed expression is subjected to the function simplify , and the displayed part replaced. The rest of the expression is unchanged. By default the disp_select is removed and so the result is not coloured and underlined. p3 displays as ({\\left(1-1\\right)\\cdot x^2+\\color{red}{\\underline{0}}+1}). Notice the third, optional boolean, argument to select_apply in p3 . This argument will decide whether to continue to display the disp_select display or remove it (now the function has been applied). The default is true , so here the red underline is not removed.","title":"Selecting, and highlighting part of an expression"},{"location":"CAS/Simplification/#if-you-really-insist-on-a-kludge","text":"In some situations you may find you really do need to work at the display level, construct a string and display this to the student in Maxima. Please avoid doing this! a:sin(x^2); b:1+x^2; f:sconcat(\"\\\\frac{\",stack_disp(a,\"\"),\"}{\",stack_disp(b,\"\"),\"}\"); Then you can put in \\({@f@}\\) into one of the CASText fields. Note, you need to add LaTeX maths delimiters, because when the CAS returns a string the command {@f@} will just display the contents of the string without maths delimiters.","title":"If you really insist on a kludge...."},{"location":"CAS/Simplification/#tips-for-manipulating-expressions","text":"How do we do the following in Maxima? [ (1-x)^a \\times (x-1) \\rightarrow -(1-x)^{a+1}.] Try q:(1-x)^a*(x-1); q:ratsubst(z,1-x,q); q:subst(z=1-x ,q); How do we do the following in Maxima? [ (x-1)(k(x-1))^a \\rightarrow (x-1)^{a+1}k^a.] factor(radcan((x-1)*(k*(x-1))^a)) Maxima's internal representation of an expression sometimes does not correspond with what you expect -- in that case, dispform may help to bring it into the form you expect. For example, the output of solve in the following code shows the (b) in the denominator as (b^{-1}) which gives unnatural-looking output when a value is substituted in -- this is fixed by using dispform and substituting into that variants instead. simp:true; eqn:b = 1/(6*a+3); ta1: expand(rhs(solve(eqn,a)[1])); dispta1:dispform(ta1); simp:false; subst(2,b,ta1); subst(2,b,dispta1);","title":"Tips for manipulating expressions"},{"location":"CAS/Simplification/#creating-sequences-and-series","text":"One problem is that makelist needs simplification. To create sequences/series, try something like the following an:(-1)^n*2^n/n! N:8 S1:ev(makelist(k,k,1,N),simp) S2:maplist(lambda([ex],ev(an,n=ex)),S1) S3:ev(S2,simp) S4apply(\"+\",S3) Of course, to print out one line in the worked solution you can also apply(\"+\",S2) as well. To create the binomial coefficients simp:false; n:5; apply(\"+\",map(lambda([ex],binomial(n,ex)*x^ex), ev(makelist(k,k,0,5),simp)));","title":"Creating sequences and series"},{"location":"CAS/Simplification/#surds","text":"Imagine you would like the student to expand out ( (\\sqrt{5}-2)(\\sqrt{5}+4)=2\\sqrt{5}-3 ). There are two tests you probably want to apply to the student's answer. Algebraic equivalence with the correct answer: use ATAlgEquiv . That the expression is \"expanded\": use ATExpanded . You probably then want to make sure a student has \"gathered\" like terms. In particular you'd like to make sure a student has either [ 2\\sqrt{5}-3 \\mbox{ or } \\sqrt{20}-3] but not [ 5+4\\sqrt{2}-2\\sqrt{2}+6.] This causes a problem because ATComAss thinks that [ 2\\sqrt{5}-3 \\neq \\sqrt{20}-3.] So you can't use ATComAss here, and guarantee that all random variants will work by testing that we really have (5+4\\sqrt{2}) for example. What we really want is for the functions sqrt and + to appear precisely once in the student's answer, or that the answer is a sum of two things.","title":"Surds"},{"location":"CAS/Simplification/#control-of-surds","text":"See also the Maxima documentation on radexpand . For example radexpand:false$ sqrt((2*x+10)/10); radexpand:true$ sqrt((2*x+10)/10); The first of these does not pull out a numerical denominator. The second does.","title":"Control of surds"},{"location":"CAS/Simplification/#trig-simplification","text":"Maxima does have the ability to make assumptions, e.g. to assume that (n) is an integer and then simplify (3\\cos(n\\pi/2)^2) to ( \\frac{3}{2}(1+(-1)^n)). Assume the student's answer is ans1 then then define the following feedback variables: declare(n,integer); sans1:ev(trigrat(ans1),simp); The variable sans1 can then be used in the PRT. Just note that trigrat writes powers of trig functions in terms of multiple angles. This can have an effect of \"expanding\" out an expression. E.g. trigrat(cos(n)^20) is probably still fine, but trigrat(cos(n)^2000) is probably not! For this reason trigrat is not part of the default routines to establish equivalence. Trig simplification, especially when we make assumptions on variables like (n), needs to be done on a question by question basis.","title":"Trig simplification"},{"location":"CAS/Simplification/#boolean-functions","text":"See the page on propositional logic .","title":"Boolean functions"},{"location":"CAS/Simplification/#further-examples","text":"Some further examples are given elsewhere: Matrix examples in showing working . An example of a question with simp:false is discussed in authoring quick start 7 . Generating random algebraic expressions which need to be \"gathered and sorted\". Note also that question tests do not simplify test inputs.","title":"Further examples"},{"location":"CAS/Statistics/","text":"Statistics support in STACK. The following optional packages provide statistics support in Maxima: load(\"stats\"); load(\"distrib\"); load(\"descriptive\"); Please see Maxima's documentation for information on the functions these packages contain. These packages are included by default. The Debian package manager currently has a release of Maxima (as of Nov 2015) without these packages and attempting to load them renders STACK unusable. For this reason, they may have been disabled by your system administrator and your server may not support inclusion of these packages. Package: descriptive Note that the \"descriptive\" package includes a number of functions to plotting graphs, such as boxplots and scatterplot. These are not supported by STACK. STACK functions STACK provides the mode function which returns the modal value in a list.","title":"Statistics support in STACK."},{"location":"CAS/Statistics/#statistics-support-in-stack","text":"The following optional packages provide statistics support in Maxima: load(\"stats\"); load(\"distrib\"); load(\"descriptive\"); Please see Maxima's documentation for information on the functions these packages contain. These packages are included by default. The Debian package manager currently has a release of Maxima (as of Nov 2015) without these packages and attempting to load them renders STACK unusable. For this reason, they may have been disabled by your system administrator and your server may not support inclusion of these packages.","title":"Statistics support in STACK."},{"location":"CAS/Statistics/#package-descriptive","text":"Note that the \"descriptive\" package includes a number of functions to plotting graphs, such as boxplots and scatterplot. These are not supported by STACK.","title":"Package: descriptive"},{"location":"CAS/Statistics/#stack-functions","text":"STACK provides the mode function which returns the modal value in a list.","title":"STACK functions"},{"location":"CAS/Strings/","text":"Strings in STACK questions If your answer is a language string, then please consider using the Damerau-Levenshtein distance rather than a string match. Strings are a basic data type in Maxima. The predicate function stringp(ex) determines whether an expression is a string. The function string(ex) takes a Maxima expression and returns a string representation. We do not support Maxima's parse_string function. There is no way to turn a string into a Maxima expression through STACK. For example, if you use the string input you cannot later parse the student's answer into a Maxima expression. Therefore, only use the string input if your answer is actually a string. The whole point of STACK is that teachers should seek to establish mathematical properties and the string match tests are provided for completeness (and because they are trivial to implement). Experienced question authors almost never use the string match tests. If you find yourself needing to use the string match tests for something mathematical please contact the developers. There are 4 string-related answer tests . String StringSloppy Levenshtein SRegExp","title":"Strings in STACK questions"},{"location":"CAS/Strings/#strings-in-stack-questions","text":"If your answer is a language string, then please consider using the Damerau-Levenshtein distance rather than a string match. Strings are a basic data type in Maxima. The predicate function stringp(ex) determines whether an expression is a string. The function string(ex) takes a Maxima expression and returns a string representation. We do not support Maxima's parse_string function. There is no way to turn a string into a Maxima expression through STACK. For example, if you use the string input you cannot later parse the student's answer into a Maxima expression. Therefore, only use the string input if your answer is actually a string. The whole point of STACK is that teachers should seek to establish mathematical properties and the string match tests are provided for completeness (and because they are trivial to implement). Experienced question authors almost never use the string match tests. If you find yourself needing to use the string match tests for something mathematical please contact the developers. There are 4 string-related answer tests . String StringSloppy Levenshtein SRegExp","title":"Strings in STACK questions"},{"location":"CAS/Subscripts/","text":"Atoms, subscripts and fine tuning the LaTeX display Everything in Maxima is either an atom or an expression . Atoms are either an integer number, float, string or a name. You can use the predicate atom() to decide if its argument is an atom. Expressions have an operator and a list of arguments . Note that the underscore symbol is not an operator. Thus a_1 is an atom in maxima. Hence, the atoms a1 and a_1 are not considered to be algebraically equivalent. If you would like to consolidate subscripts in students' input see the documentation on extra options . Also note that since the underscore is not an operator, an expression such as (a_b)_c is not valid Maxima syntax, but a_b_c is a valid name for an atom. You can change the TeX output for an atom with Maxima's texput command. E.g. texput(blob, \"\\\\diamond\") will display the atom blob as ( \\diamond ). If you place texput commands in the question variables, this affects the display everywhere in the question including the inputs. E.g. if a student types in blob then the validation feedback should say something like \"your last answer was: ( \\diamond )\". Display with subscripts is a subtle and potentially confusing issue because subscript notation in mathematics has many different uses. For example, Subscripts denote a function of the natural numbers, e.g. when defining terms in a sequence (a_1, a_2, a_3). That is the subscript denotes function application. (a_n = a(n)). Subscripts denote differentiation, e.g. ( x_t ) is the derivative of (x ) with respect to (t). Subscripts denote coordinates in a vector, in ( \\vec{v} = (v_1, v_2, \\cdots, v_n) ). There are many other possible uses for subscripts, especially in other subjects e.g. in physics or actuarial studies . Because Maxima considers subscripted expressions to be atoms, the default TeX output of an atom V_alpha from Maxima is ( {\\it V_alpha} ) (literally {\\it V\\_alpha} ) and not ( V_{\\alpha} ) as a user might expect. For this reason STACK intercepts and redefines how atoms with the underscore are displayed. In particular STACK (but not core Maxima) takes an atom A_B , applies the tex() command to A and B separately and concatenates the result using subscripts. For example, if you define texput(A, \"{\\\\mathcal A}\"); texput(B, \"\\\\diamond\"); then A_B is now displayed as ({{{\\mathcal A}}_{\\diamond}}). Below are some examples. Maxima code Maxima's tex() command (raw output and displayed) STACK (raw output and displayed) A_B {\\it A\\_B} ({\\it A_B}) {{A}_{B}} ( {{A}_{B}} ) A[1] A_{1} ( A_{1}) {A_{1}} ( {A_{1}} ) A1 A_{1} ( A_{1} ) {A_{1}} ( {A_{1}} ) A_1 A_{1} ( A_{1} ) {A_{1}} ( {A_{1}} ) A_x1 {\\it A\\_x}_{1} ( {\\it A_x}_{1} ) {{A}_{x_{1}}} ( {{A}_{x_1}} ) A_BC {\\it A\\_BC} ( {\\it A_BC} ) {{A}_{{\\it BC}}} ( {{A}_{{\\it BC}}} ) A_alpha {\\it A\\_alpha} ( {\\it A_alpha}) {{A}_{\\alpha}} ( {{A}_{\\alpha}} ) A_B_C {\\it A\\_B\\_C} ( {\\it A_B_C} ) {{{A}_{B}}_{C}} ( {A_B}_C ) x_t(1) {\\it x\\_t}\\left(1\\right) ( {\\it x_t}\\left(1\\right) ) {{\\it x\\_t}\\left(1\\right)} ( {{\\it x_t}\\left(1\\right)} ) A[1,2] A_{1,2} ( A_{1,2} ) {A_{1,2}} ( {A_{1,2}} ) Notes in the above examples three different expressions (atoms A1 , A_1 and the expression A[1] ) generate the same tex code A_{1} ( A_{1}), and so are indistinguishable at the display level. The expression x_t(1) refers to the function x_t which is not an atom, and hence STACK's logic for displaying atoms with underscores does not apply (by design). If you want to display a function name including a subscript you can explicitly use, e.g. texput(x_t, \"x_t\"); to control the display, this is just not done automatically. One situation where this design is not satisfactory is when you want to use both of the atoms F and F_1 but with different display. For example F should display as ({\\mathcal F}) but F_1 should display as ( F_1 ). Such a situation is not hard to imagine, as it is often considered good style to have things like ( F_1 \\in {\\mathcal F}). The above design always splits up the atom F_1 into F and 1 , so that the atom F_1 will display as ({\\mathcal F}_1). (This is actually what you normally expect, especially with the Greek letter subscripts.) To avoid this problem the logic which splits up atoms containing an underscore checks the texput properties list. If an entry has been made for a specific atom then STACK's display logic uses the entry, and does not split an atom over the underscore. In the above example, use the following texput commands. texput(F, \"{\\\\mathcal F}\"); texput(F_1, \"{F_1}\"); With this code F displays as ({\\mathcal F}), the atom F_1 displays as ( F_1 ), and every subscript will display with calligraphic, e.g. F_alpha displays as ({\\mathcal F}_{\\alpha}). There is no way to code the reverse logic, i.e. define a special display only for the unique atom F . Note that the scientific units code redefines and then assumes that symbols represent units. E.g. F is assumed to represent Farad, and all units are typeset in Roman type, e.g. ( \\mathrm{F} ) rather than the normal ( F ). This is typically the right thing to do, but it does restrict the number of letters which can be used for variable names in a particular question. To overcome this problem you will have to redefine some atoms with texput. For example, stack_unit_si_declare(true); texput(F_a, \"F_a\"); will display the atom F_a as (F_a), i.e. not in Roman. If you texput(F, \"F\") the symbol F is no longer written in Roman, as you would expect from units. This may be sensible if Farad could not possibly appear in context, but students might type a range of subscripted atoms involving F . The use of texput is global to a question. There is no way to display a particular atom differently in different places (except perhaps in the feedback variables, which is currently untested: assume texput is global). How would you generate the tex like ( A_{1,2} )? STACK's sequence command (see below) does output its arguments separated by a comma, so sequence(1,2) is displayed as ( {1,2} ), however the Maxima command A_sequence(1,2) refers to the function A_sequence , (since the underscore is not an operator). Hence STACK's logic for splitting up atoms containing the underscore does not apply. (In any case, even if the display logic did split up function names we would still have the issue of binding power to sort out, i.e. do we have the atom with parts A and sequence(1,2) or the function named A and sequence ?) To create an output like ( A_{1,2} ) you have no option but to work at the level of display. Teachers can create an inert function which displays using subscripts. texsub(a,b) is typeset as ({a}_{b}) i.e. {a}_{b} in LaTeX. For example, texsub(A, sequence(1,2)) will display as ({{A}_{1, 2}}), with simplification off, texsub(F,1-2) will be displayed as ({F}_{1-2}). Note that the process of converting theta_07 into the intermediate texsub form internally results in the texsub(theta,7) which removes the leading zero. This is a known issue, for which a work around is to directly use texput(theta_07, \"{{\\\\theta}_{07}}\") or texsub(theta,\"07\") . The second option does not produce optimal LaTeX, since it uses TeX mbox , e.g. {{\\theta}_{\\mbox{07}}} .","title":"Subscripts"},{"location":"CAS/Subscripts/#atoms-subscripts-and-fine-tuning-the-latex-display","text":"Everything in Maxima is either an atom or an expression . Atoms are either an integer number, float, string or a name. You can use the predicate atom() to decide if its argument is an atom. Expressions have an operator and a list of arguments . Note that the underscore symbol is not an operator. Thus a_1 is an atom in maxima. Hence, the atoms a1 and a_1 are not considered to be algebraically equivalent. If you would like to consolidate subscripts in students' input see the documentation on extra options . Also note that since the underscore is not an operator, an expression such as (a_b)_c is not valid Maxima syntax, but a_b_c is a valid name for an atom. You can change the TeX output for an atom with Maxima's texput command. E.g. texput(blob, \"\\\\diamond\") will display the atom blob as ( \\diamond ). If you place texput commands in the question variables, this affects the display everywhere in the question including the inputs. E.g. if a student types in blob then the validation feedback should say something like \"your last answer was: ( \\diamond )\". Display with subscripts is a subtle and potentially confusing issue because subscript notation in mathematics has many different uses. For example, Subscripts denote a function of the natural numbers, e.g. when defining terms in a sequence (a_1, a_2, a_3). That is the subscript denotes function application. (a_n = a(n)). Subscripts denote differentiation, e.g. ( x_t ) is the derivative of (x ) with respect to (t). Subscripts denote coordinates in a vector, in ( \\vec{v} = (v_1, v_2, \\cdots, v_n) ). There are many other possible uses for subscripts, especially in other subjects e.g. in physics or actuarial studies . Because Maxima considers subscripted expressions to be atoms, the default TeX output of an atom V_alpha from Maxima is ( {\\it V_alpha} ) (literally {\\it V\\_alpha} ) and not ( V_{\\alpha} ) as a user might expect. For this reason STACK intercepts and redefines how atoms with the underscore are displayed. In particular STACK (but not core Maxima) takes an atom A_B , applies the tex() command to A and B separately and concatenates the result using subscripts. For example, if you define texput(A, \"{\\\\mathcal A}\"); texput(B, \"\\\\diamond\"); then A_B is now displayed as ({{{\\mathcal A}}_{\\diamond}}). Below are some examples. Maxima code Maxima's tex() command (raw output and displayed) STACK (raw output and displayed) A_B {\\it A\\_B} ({\\it A_B}) {{A}_{B}} ( {{A}_{B}} ) A[1] A_{1} ( A_{1}) {A_{1}} ( {A_{1}} ) A1 A_{1} ( A_{1} ) {A_{1}} ( {A_{1}} ) A_1 A_{1} ( A_{1} ) {A_{1}} ( {A_{1}} ) A_x1 {\\it A\\_x}_{1} ( {\\it A_x}_{1} ) {{A}_{x_{1}}} ( {{A}_{x_1}} ) A_BC {\\it A\\_BC} ( {\\it A_BC} ) {{A}_{{\\it BC}}} ( {{A}_{{\\it BC}}} ) A_alpha {\\it A\\_alpha} ( {\\it A_alpha}) {{A}_{\\alpha}} ( {{A}_{\\alpha}} ) A_B_C {\\it A\\_B\\_C} ( {\\it A_B_C} ) {{{A}_{B}}_{C}} ( {A_B}_C ) x_t(1) {\\it x\\_t}\\left(1\\right) ( {\\it x_t}\\left(1\\right) ) {{\\it x\\_t}\\left(1\\right)} ( {{\\it x_t}\\left(1\\right)} ) A[1,2] A_{1,2} ( A_{1,2} ) {A_{1,2}} ( {A_{1,2}} ) Notes in the above examples three different expressions (atoms A1 , A_1 and the expression A[1] ) generate the same tex code A_{1} ( A_{1}), and so are indistinguishable at the display level. The expression x_t(1) refers to the function x_t which is not an atom, and hence STACK's logic for displaying atoms with underscores does not apply (by design). If you want to display a function name including a subscript you can explicitly use, e.g. texput(x_t, \"x_t\"); to control the display, this is just not done automatically. One situation where this design is not satisfactory is when you want to use both of the atoms F and F_1 but with different display. For example F should display as ({\\mathcal F}) but F_1 should display as ( F_1 ). Such a situation is not hard to imagine, as it is often considered good style to have things like ( F_1 \\in {\\mathcal F}). The above design always splits up the atom F_1 into F and 1 , so that the atom F_1 will display as ({\\mathcal F}_1). (This is actually what you normally expect, especially with the Greek letter subscripts.) To avoid this problem the logic which splits up atoms containing an underscore checks the texput properties list. If an entry has been made for a specific atom then STACK's display logic uses the entry, and does not split an atom over the underscore. In the above example, use the following texput commands. texput(F, \"{\\\\mathcal F}\"); texput(F_1, \"{F_1}\"); With this code F displays as ({\\mathcal F}), the atom F_1 displays as ( F_1 ), and every subscript will display with calligraphic, e.g. F_alpha displays as ({\\mathcal F}_{\\alpha}). There is no way to code the reverse logic, i.e. define a special display only for the unique atom F . Note that the scientific units code redefines and then assumes that symbols represent units. E.g. F is assumed to represent Farad, and all units are typeset in Roman type, e.g. ( \\mathrm{F} ) rather than the normal ( F ). This is typically the right thing to do, but it does restrict the number of letters which can be used for variable names in a particular question. To overcome this problem you will have to redefine some atoms with texput. For example, stack_unit_si_declare(true); texput(F_a, \"F_a\"); will display the atom F_a as (F_a), i.e. not in Roman. If you texput(F, \"F\") the symbol F is no longer written in Roman, as you would expect from units. This may be sensible if Farad could not possibly appear in context, but students might type a range of subscripted atoms involving F . The use of texput is global to a question. There is no way to display a particular atom differently in different places (except perhaps in the feedback variables, which is currently untested: assume texput is global). How would you generate the tex like ( A_{1,2} )? STACK's sequence command (see below) does output its arguments separated by a comma, so sequence(1,2) is displayed as ( {1,2} ), however the Maxima command A_sequence(1,2) refers to the function A_sequence , (since the underscore is not an operator). Hence STACK's logic for splitting up atoms containing the underscore does not apply. (In any case, even if the display logic did split up function names we would still have the issue of binding power to sort out, i.e. do we have the atom with parts A and sequence(1,2) or the function named A and sequence ?) To create an output like ( A_{1,2} ) you have no option but to work at the level of display. Teachers can create an inert function which displays using subscripts. texsub(a,b) is typeset as ({a}_{b}) i.e. {a}_{b} in LaTeX. For example, texsub(A, sequence(1,2)) will display as ({{A}_{1, 2}}), with simplification off, texsub(F,1-2) will be displayed as ({F}_{1-2}). Note that the process of converting theta_07 into the intermediate texsub form internally results in the texsub(theta,7) which removes the leading zero. This is a known issue, for which a work around is to directly use texput(theta_07, \"{{\\\\theta}_{07}}\") or texsub(theta,\"07\") . The second option does not produce optimal LaTeX, since it uses TeX mbox , e.g. {{\\theta}_{\\mbox{07}}} .","title":"Atoms, subscripts and fine tuning the LaTeX display"},{"location":"CAS/Validator/","text":"Bespoke validators This extra option validator to a particular input allows additional bespoke validation, based on a function defined by the question author. For example, you could require that the student's answer is a list of exactly three equations . Please check existing, supported, validation options before defining your own! For example, to check a list has at most three elements define the function named validate_listlength in the question variables, e.g. validate_listlength(ex) := block([l], if not(listp(ex)) then return(castext(\"Your answer must be a list\")), l:length(ex), if l < 3 then return(castext(\"Your list only has {#l#} elements, which is too few.\")), \"\" ); To use this feature put the following in the input extra options. validator:validate_listlength Notes: The validator must be a pure function of a single variable. There must be no reference to the input name within the validator function definition, indeed you cannot reference an input in the question variables. If the function returns a non-empty string, then the student's answer will be considered invalid, and the string displayed to the student as a validation error message as part of the input validation. If the function returns an empty string or true then the student's input is considered to be valid. The use of an empty string here for valid is designed to encourage teachers to write meaningful error messages to students! The function can reference other question variables, e.g. the teacher's answer. The function is always executed with simp:false regardless of the question settings. The function is called after the built-in validation checks, and only if the expression is already valid otherwise. So, you cannot replace basic validation (by design). This means you will/should have an expression which Maxima can evaluate if it gets as far as your validator function. E.g. no missing * or mismatched brackets. The student still cannot use any of the variable names defined in the question variables. Validators only operate on a single input, and there is no mechanism to validate a combination of inputs at once. The recommended style for naming validator functions is to begin the name with validate_ . A single validator function can be re-used on multiple inputs within a single question. If you regularly copy validator functions from question to question please consider contributing this as a function to the core of STACK (see below for details). We expect to collect and support regularly used validators in future. Combining validators If you wish to test for a number of separate properties then it is probably best to create separate functions for each poperty and combine them into a single validator. For example, imagine you would like the following: the answer must be a list; the list has three elements; each element is an equation. E.g. [x^2=1, y=1, x+z=1] is a valid answer. [x^2+5, y=1] is invalid (for two reasons). Functions which establish these properties are: /* Define validator fuctions separately. */ validate_islist(ex) := if listp(ex) then \"\" else \"Your answer must be a list.\"; validate_allequations(ex) := if all_listp(equationp, ex) then \"\" else \"All elements of your answer should be equations.\"; validate_checklen(ex) := if ev(is(length(ex)=3),simp) then \"\" else \"Your list must have 3 elements.\"; /* Combine the validator functions. */ validate_equationlist(ex) := stack_multi_validator(ex, [validate_islist, validate_allequations, validate_checklen]); The last line creates a single validator function using the convenience function stack_multi_validator supported by STACK. STACK supports two convenience functions stack_multi_validator executes all the validator functions and concatenates the result. stack_seq_validator executes the validator functions in list order until one fails. This means you can make assumptions in later validators about the form of the expression. If any validator throws an error then the student's answer is invalid. E.g. using any_listp on a non-list will throw a Maxima error. Supported validators The Maxima code is stored in the sourcecode in stack/maxima/validator.mac , e.g. on github . Contributing validators to the core of STACK {#contributing} When you regularly find yourself testing for particular properties, and copying code between questions, please consider contributing functions to the STACK core for longer term support. You can post your suggestion on the project's GitHub site or submit code directly as a pull request . Localisation and language support To localise your validation messages use the castext lang block. For example ta:phi^2-1; validate_vars(ex) := block( if ev(subsetp(setify(listofvars(ex)),setify(listofvars(ta))), simp) then return(\"\"), castext(\"[[lang code='fi']]Vastauksesi sis\u00e4lt\u00e4\u00e4 v\u00e4\u00e4ri\u00e4 muuttujia.[[/lang]][[lang code='en']]Your answer contains the wrong variables.[[/lang]]\") ); For the supported validator function, all language strings are drawn from the STACK language pack: STACK stores all language strings in the plugin source code , and these are then translated by volunteers using the online AMOS system . Individual language strings can then be referred to using STACK's [[commonstring ... /]] block. For example, the language pack contains the string $string['Illegal_strings'] = 'Your answer contains \"strings\" these are not allowed here.'; An example of how to use this in Maxima code is below. validate_listoftwo(ex):=block( if not(listp(ex)) then return(\"Your answer must be a list.\"), if not(is(length(ex)=2)) then return(\"Your list must have two elements.\"), if stringp(second(ex)) then return(castext(\"[[commonstring key='Illegal_strings' /]]\")), true ); In this example [\"Quadratic\",x^2-1] is valid. [x^2-1,\"Quadratic\"] is invalid because the second argument here is a string. In this case the error message comes from the common language pack. Many language examples have variables which need to be injected. In this example, the variable m0 needs to be injected. $string['ValidateVarsSpurious'] = 'These variables are not needed: {$a->m0}.'; To inject variables into a language string we define the value of m0 in the [[commonstring ... /]] block. validate_spuriousvar(ex):=block([%_tmp,simp], simp:false, %_tmp: listofvars(ex), simp:true, %_tmp: setdifference(setify(%_tmp), {x,y,z}), if cardinality(%_tmp) = 0 then return(\"\"), castext(\"[[commonstring key='ValidateVarsSpurious' m0='listify(%_tmp)'/]]\") ); Note, when injecting a value m0='X' the X must be a Maxima expression, not a displayed string. to inject the Maxima expression X with {@...@} injection (without wrapping like \\(...\\) ) to a named placeholder m0 use m0='X' . to inject the Maxima expression X with {#...#} injection, to get raw values, to a named placeholder m0 use raw_m0='X' . For other prefix options see the documentaiton for the commonstring block . Further examples To forbid the underscore character in a student's input. validate_underscore(ex) := if is(sposition(\"_\", string(ex)) = false) then \"\" else \"Underscore characters are not permitted in this input.\"; Sharing validators between questions It is common to want to share validators between questions. It would also be very helpful to contribute commonly used validator functions back to the STACK project. To include a validator in more than one question you could post your validator function publicly. Get the validator function working reliably in your question, locally. Add the maxima function to this file, https://github.com/maths/moodle-qtype_stack/blob/master/stack/maxima/contrib/validators.mac or another file, preferably contributing to the STACK project. Add documentation and comprehensive test cases (please!) to let other people know what the validator is intended to do, and to help ensure behaviour remains stable. Include the optional validators within the cas logic with either of the following stack_include(\"https://raw.githubusercontent.com/maths/moodle-qtype_stack/master/stack/maxima/contrib/validators.mac\"); stack_include_contrib(\"validators.mac\"); Note the url https://raw.githubusercontent.com/ is used to include the raw content of this file. Including external content always poses a minor additional security risk. In this case (1) the content is included and then subject to the same checks as if you had typed it yourself, and (2) the developers will take the same care in accepting contributions to the master branch as they do with the existing code base. Example: forbid underscores in an input Create a new question. Add the following to the question variables, which loads contributed validators. stack_include(\"https://raw.githubusercontent.com/maths/moodle-qtype_stack/master/stack/maxima/contrib/validators.mac\"); or add the following to the question variables stack_include_contrib(\"validators.mac\"); Use the extra option validator:validate_underscore in the input.","title":"Bespoke validators"},{"location":"CAS/Validator/#bespoke-validators","text":"This extra option validator to a particular input allows additional bespoke validation, based on a function defined by the question author. For example, you could require that the student's answer is a list of exactly three equations . Please check existing, supported, validation options before defining your own! For example, to check a list has at most three elements define the function named validate_listlength in the question variables, e.g. validate_listlength(ex) := block([l], if not(listp(ex)) then return(castext(\"Your answer must be a list\")), l:length(ex), if l < 3 then return(castext(\"Your list only has {#l#} elements, which is too few.\")), \"\" ); To use this feature put the following in the input extra options. validator:validate_listlength Notes: The validator must be a pure function of a single variable. There must be no reference to the input name within the validator function definition, indeed you cannot reference an input in the question variables. If the function returns a non-empty string, then the student's answer will be considered invalid, and the string displayed to the student as a validation error message as part of the input validation. If the function returns an empty string or true then the student's input is considered to be valid. The use of an empty string here for valid is designed to encourage teachers to write meaningful error messages to students! The function can reference other question variables, e.g. the teacher's answer. The function is always executed with simp:false regardless of the question settings. The function is called after the built-in validation checks, and only if the expression is already valid otherwise. So, you cannot replace basic validation (by design). This means you will/should have an expression which Maxima can evaluate if it gets as far as your validator function. E.g. no missing * or mismatched brackets. The student still cannot use any of the variable names defined in the question variables. Validators only operate on a single input, and there is no mechanism to validate a combination of inputs at once. The recommended style for naming validator functions is to begin the name with validate_ . A single validator function can be re-used on multiple inputs within a single question. If you regularly copy validator functions from question to question please consider contributing this as a function to the core of STACK (see below for details). We expect to collect and support regularly used validators in future.","title":"Bespoke validators"},{"location":"CAS/Validator/#combining-validators","text":"If you wish to test for a number of separate properties then it is probably best to create separate functions for each poperty and combine them into a single validator. For example, imagine you would like the following: the answer must be a list; the list has three elements; each element is an equation. E.g. [x^2=1, y=1, x+z=1] is a valid answer. [x^2+5, y=1] is invalid (for two reasons). Functions which establish these properties are: /* Define validator fuctions separately. */ validate_islist(ex) := if listp(ex) then \"\" else \"Your answer must be a list.\"; validate_allequations(ex) := if all_listp(equationp, ex) then \"\" else \"All elements of your answer should be equations.\"; validate_checklen(ex) := if ev(is(length(ex)=3),simp) then \"\" else \"Your list must have 3 elements.\"; /* Combine the validator functions. */ validate_equationlist(ex) := stack_multi_validator(ex, [validate_islist, validate_allequations, validate_checklen]); The last line creates a single validator function using the convenience function stack_multi_validator supported by STACK. STACK supports two convenience functions stack_multi_validator executes all the validator functions and concatenates the result. stack_seq_validator executes the validator functions in list order until one fails. This means you can make assumptions in later validators about the form of the expression. If any validator throws an error then the student's answer is invalid. E.g. using any_listp on a non-list will throw a Maxima error.","title":"Combining validators"},{"location":"CAS/Validator/#supported-validators","text":"The Maxima code is stored in the sourcecode in stack/maxima/validator.mac , e.g. on github .","title":"Supported validators"},{"location":"CAS/Validator/#contributing-validators-to-the-core-of-stack-contributing","text":"When you regularly find yourself testing for particular properties, and copying code between questions, please consider contributing functions to the STACK core for longer term support. You can post your suggestion on the project's GitHub site or submit code directly as a pull request .","title":"Contributing validators to the core of STACK {#contributing}"},{"location":"CAS/Validator/#localisation-and-language-support","text":"To localise your validation messages use the castext lang block. For example ta:phi^2-1; validate_vars(ex) := block( if ev(subsetp(setify(listofvars(ex)),setify(listofvars(ta))), simp) then return(\"\"), castext(\"[[lang code='fi']]Vastauksesi sis\u00e4lt\u00e4\u00e4 v\u00e4\u00e4ri\u00e4 muuttujia.[[/lang]][[lang code='en']]Your answer contains the wrong variables.[[/lang]]\") ); For the supported validator function, all language strings are drawn from the STACK language pack: STACK stores all language strings in the plugin source code , and these are then translated by volunteers using the online AMOS system . Individual language strings can then be referred to using STACK's [[commonstring ... /]] block. For example, the language pack contains the string $string['Illegal_strings'] = 'Your answer contains \"strings\" these are not allowed here.'; An example of how to use this in Maxima code is below. validate_listoftwo(ex):=block( if not(listp(ex)) then return(\"Your answer must be a list.\"), if not(is(length(ex)=2)) then return(\"Your list must have two elements.\"), if stringp(second(ex)) then return(castext(\"[[commonstring key='Illegal_strings' /]]\")), true ); In this example [\"Quadratic\",x^2-1] is valid. [x^2-1,\"Quadratic\"] is invalid because the second argument here is a string. In this case the error message comes from the common language pack. Many language examples have variables which need to be injected. In this example, the variable m0 needs to be injected. $string['ValidateVarsSpurious'] = 'These variables are not needed: {$a->m0}.'; To inject variables into a language string we define the value of m0 in the [[commonstring ... /]] block. validate_spuriousvar(ex):=block([%_tmp,simp], simp:false, %_tmp: listofvars(ex), simp:true, %_tmp: setdifference(setify(%_tmp), {x,y,z}), if cardinality(%_tmp) = 0 then return(\"\"), castext(\"[[commonstring key='ValidateVarsSpurious' m0='listify(%_tmp)'/]]\") ); Note, when injecting a value m0='X' the X must be a Maxima expression, not a displayed string. to inject the Maxima expression X with {@...@} injection (without wrapping like \\(...\\) ) to a named placeholder m0 use m0='X' . to inject the Maxima expression X with {#...#} injection, to get raw values, to a named placeholder m0 use raw_m0='X' . For other prefix options see the documentaiton for the commonstring block .","title":"Localisation and language support"},{"location":"CAS/Validator/#further-examples","text":"To forbid the underscore character in a student's input. validate_underscore(ex) := if is(sposition(\"_\", string(ex)) = false) then \"\" else \"Underscore characters are not permitted in this input.\";","title":"Further examples"},{"location":"CAS/Validator/#sharing-validators-between-questions","text":"It is common to want to share validators between questions. It would also be very helpful to contribute commonly used validator functions back to the STACK project. To include a validator in more than one question you could post your validator function publicly. Get the validator function working reliably in your question, locally. Add the maxima function to this file, https://github.com/maths/moodle-qtype_stack/blob/master/stack/maxima/contrib/validators.mac or another file, preferably contributing to the STACK project. Add documentation and comprehensive test cases (please!) to let other people know what the validator is intended to do, and to help ensure behaviour remains stable. Include the optional validators within the cas logic with either of the following stack_include(\"https://raw.githubusercontent.com/maths/moodle-qtype_stack/master/stack/maxima/contrib/validators.mac\"); stack_include_contrib(\"validators.mac\"); Note the url https://raw.githubusercontent.com/ is used to include the raw content of this file. Including external content always poses a minor additional security risk. In this case (1) the content is included and then subject to the same checks as if you had typed it yourself, and (2) the developers will take the same care in accepting contributions to the master branch as they do with the existing code base.","title":"Sharing validators between questions"},{"location":"CAS/Validator/#example-forbid-underscores-in-an-input","text":"Create a new question. Add the following to the question variables, which loads contributed validators. stack_include(\"https://raw.githubusercontent.com/maths/moodle-qtype_stack/master/stack/maxima/contrib/validators.mac\"); or add the following to the question variables stack_include_contrib(\"validators.mac\"); Use the extra option validator:validate_underscore in the input.","title":"Example: forbid underscores in an input"},{"location":"Developer/","text":"Developers The Developer documentations give information on STACK development, as well as instructions for developers who want to contribute to STACK. Contributing to STACK STACK is open source, and as such relies on users to make contributions. These documents describe some ways you may consider to contribute. You may want to learn about creating an input type . You could read about Installing language pack and translating STACK . There is also information on contributing to the documentation . Development history If you want to track the development of STACK or report bugs then you should visit GitHub . Work towards the next release of STACK is detailed on Development track . Plans looking futher into the future are described on Future plans . The past development history is documented on Development history . Advanced topics The following topics describe advanced topics for developers and site admins. You can read about running unit tests . There is information on clearing the cache . You can also read on adding support for Maxima packages . If you have recently upgraded from an older STACK version, you may need to upgrade question defaults . You may want to know how to run question tests on a development server before upgrading to a new version of STACK. You can read about the design of the PHP interface to the CAS .","title":"Desarrollador"},{"location":"Developer/#developers","text":"The Developer documentations give information on STACK development, as well as instructions for developers who want to contribute to STACK.","title":"Developers"},{"location":"Developer/#contributing-to-stack","text":"STACK is open source, and as such relies on users to make contributions. These documents describe some ways you may consider to contribute. You may want to learn about creating an input type . You could read about Installing language pack and translating STACK . There is also information on contributing to the documentation .","title":"Contributing to STACK"},{"location":"Developer/#development-history","text":"If you want to track the development of STACK or report bugs then you should visit GitHub . Work towards the next release of STACK is detailed on Development track . Plans looking futher into the future are described on Future plans . The past development history is documented on Development history .","title":"Development history"},{"location":"Developer/#advanced-topics","text":"The following topics describe advanced topics for developers and site admins. You can read about running unit tests . There is information on clearing the cache . You can also read on adding support for Maxima packages . If you have recently upgraded from an older STACK version, you may need to upgrade question defaults . You may want to know how to run question tests on a development server before upgrading to a new version of STACK. You can read about the design of the PHP interface to the CAS .","title":"Advanced topics"},{"location":"Developer/CASText2_lifecycle/","text":"CASText2 life-cycle This document describes the life-cycle of CASText2 evaluation. Use this when you need to decide what to do and when and want to use CASText to do it. Raw CASText In the first phase of the life-cycle CASText is just a string that may or may not contain CASText specific syntax, like blocks or injections. This is the format authors use when writing question-text or feedback or even inline CASText. If you are a developer of the STACK core you are probably only focused on turning this to the next forms, or maybe you are using inline CASText to build something and leave processing it further to tools that do it. Inline CASText Inline CASText is not actually a part of the life-cycle it is just a way of injecting raw CASText into places and it relies on compile time processing to turn it to usable compiled CASText. Compiled CASText The second phase of the life-cycle is the compiled form of the CASText, this is the result of raw CASText being parsed and then turned into a CAS statement. This happens by asking all the blocks present in the CASText to convert the parts of the parse tree related to them into statements and joining those together. Caching the compilation result is something we really want to do as recompiling is pointless and for large documents can take quite a lot of time, as the compilation result will always be the same for a given raw CASText in the same context (context variance does not yet exist, but may become a thing) i.e. same place in the question after same keyvals and so on, this caching does not depend on the question variant and can be shared by all variants. Simplification and other pre-processing The compiled CASText statement is then further processed as far as it can be without actually evaluating it in CAS. This processing can lead into a situation where the statement simplifies to a single string which essentially means that the value of evaluating that statement is going to be the same as the statement itself, in this special case it is unnecessary to send that statement to the CAS for evaluation. During this pre-processing it is also possible to extract long static string values that do not take part in the logic from the statement and replace them with shorter placeholders. These static strings are then stored separately and can be returned to their places after evaluation. Evaluated CASText By evaluating the compiled CASText statement in the CAS we get evaluated CASText which is essentially either a raw string value or a nested list describing which blocks need to post-process things and which parameter values they should use when doing that. This intermediate result is something that the CAS cache can hold onto as an usable value for the next step. Rendered CASText After the CASText has been evaluated and the evaluated CASText has had any static strings restored to their places we ask all the blocks that are declared in the evaluated value to do their post-processing. They turn the nested list structure into a flat string which we may then present to the user if need be. It is important to note that this post-processing may not be side effect free and some blocks may for example inject scripts into the page, so simply caching the end result of this rendering is not a viable solution as it might miss those side effects. In general, it is best to apply lazy evaluation to this and only post-process evaluated CASText into rendered CASText if the rendering actually needs to be displayed, while the rendering is often the cheapest operations of this whole life cycle it will always save some resources. Specific notes If you are not going to render something, why evaluate it at all? This might be something that comes to mind, especially related to PRTs, the primary reason being that the CAS-cache can efficiently hold onto those evaluated CASText segments and if the only difference between the evaluated CASSessions is it necessary to generate two different sessions to cache? Note that that caching would happen both at CAS-cache database table and in the parser cache for the result. Also note that at the point where you would need to know whether you are to actually render things to decide whether to evaluate them it might not be easily knowable whether to do so, and minimising branching is always a good idea. Some blocks need additional context information to be evaluated e.g. the [[lang]] -block needs a special variable to be set to the language selected for presentation. Do not forget to set such things if you use such blocks.","title":"CASText2 life-cycle"},{"location":"Developer/CASText2_lifecycle/#castext2-life-cycle","text":"This document describes the life-cycle of CASText2 evaluation. Use this when you need to decide what to do and when and want to use CASText to do it.","title":"CASText2 life-cycle"},{"location":"Developer/CASText2_lifecycle/#raw-castext","text":"In the first phase of the life-cycle CASText is just a string that may or may not contain CASText specific syntax, like blocks or injections. This is the format authors use when writing question-text or feedback or even inline CASText. If you are a developer of the STACK core you are probably only focused on turning this to the next forms, or maybe you are using inline CASText to build something and leave processing it further to tools that do it.","title":"Raw CASText"},{"location":"Developer/CASText2_lifecycle/#inline-castext","text":"Inline CASText is not actually a part of the life-cycle it is just a way of injecting raw CASText into places and it relies on compile time processing to turn it to usable compiled CASText.","title":"Inline CASText"},{"location":"Developer/CASText2_lifecycle/#compiled-castext","text":"The second phase of the life-cycle is the compiled form of the CASText, this is the result of raw CASText being parsed and then turned into a CAS statement. This happens by asking all the blocks present in the CASText to convert the parts of the parse tree related to them into statements and joining those together. Caching the compilation result is something we really want to do as recompiling is pointless and for large documents can take quite a lot of time, as the compilation result will always be the same for a given raw CASText in the same context (context variance does not yet exist, but may become a thing) i.e. same place in the question after same keyvals and so on, this caching does not depend on the question variant and can be shared by all variants.","title":"Compiled CASText"},{"location":"Developer/CASText2_lifecycle/#simplification-and-other-pre-processing","text":"The compiled CASText statement is then further processed as far as it can be without actually evaluating it in CAS. This processing can lead into a situation where the statement simplifies to a single string which essentially means that the value of evaluating that statement is going to be the same as the statement itself, in this special case it is unnecessary to send that statement to the CAS for evaluation. During this pre-processing it is also possible to extract long static string values that do not take part in the logic from the statement and replace them with shorter placeholders. These static strings are then stored separately and can be returned to their places after evaluation.","title":"Simplification and other pre-processing"},{"location":"Developer/CASText2_lifecycle/#evaluated-castext","text":"By evaluating the compiled CASText statement in the CAS we get evaluated CASText which is essentially either a raw string value or a nested list describing which blocks need to post-process things and which parameter values they should use when doing that. This intermediate result is something that the CAS cache can hold onto as an usable value for the next step.","title":"Evaluated CASText"},{"location":"Developer/CASText2_lifecycle/#rendered-castext","text":"After the CASText has been evaluated and the evaluated CASText has had any static strings restored to their places we ask all the blocks that are declared in the evaluated value to do their post-processing. They turn the nested list structure into a flat string which we may then present to the user if need be. It is important to note that this post-processing may not be side effect free and some blocks may for example inject scripts into the page, so simply caching the end result of this rendering is not a viable solution as it might miss those side effects. In general, it is best to apply lazy evaluation to this and only post-process evaluated CASText into rendered CASText if the rendering actually needs to be displayed, while the rendering is often the cheapest operations of this whole life cycle it will always save some resources.","title":"Rendered CASText"},{"location":"Developer/CASText2_lifecycle/#specific-notes","text":"If you are not going to render something, why evaluate it at all? This might be something that comes to mind, especially related to PRTs, the primary reason being that the CAS-cache can efficiently hold onto those evaluated CASText segments and if the only difference between the evaluated CASSessions is it necessary to generate two different sessions to cache? Note that that caching would happen both at CAS-cache database table and in the parser cache for the result. Also note that at the point where you would need to know whether you are to actually render things to decide whether to evaluate them it might not be easily knowable whether to do so, and minimising branching is always a good idea. Some blocks need additional context information to be evaluated e.g. the [[lang]] -block needs a special variable to be set to the language selected for presentation. Do not forget to set such things if you use such blocks.","title":"Specific notes"},{"location":"Developer/CAS_evaluatable/","text":"The family tree of cas_evaluatables. As of 4.3 the CAS evaluation engine has been replaced by a more modular version. Basically the old \"cassession\" class was replaced with a version that takes in objects that implement the cas_evaluatable interface, and evaluates them. However, it does not extract values from the CAS unless those objects implement additional interfaces that receive those values. The core interfaces cas_evaluatable Anything that can generate a CAS-statement string, responds to a question about its validity, can tell some backreference information to be displayed in potential error messages, and provides a function that receives information about the success or failure of the statement. In general if one is only loading values into the CAS and does not need to extract those particular values then something implementing cas_evaluatable is probably the thing to use. And one can always add additional items to the session and those can then extract values if need be. In the old terms keyvals are closest to collections of cas_evaluatables as they are rarely extracted on their own. cas_value_extractor and cas_latex_extractor These two expand the cas_evaluatable interface by requiring that the object provides means of receiving the value or its LaTeX representation. The obvious use for these are any items one needs to bring back from CAS, note that while one can easily push every statement to CAS in containers implementing these it is wasteful to do so unless you actually use those extracted values. What is wasted is bandwidth, processing power, and space in the cache all of which directly affect response time and the upkeep costs of the system. From the old model the things that best match these are CASText, getting the results of PRTs, and generating the LaTeX values for validation messages. The new class hierarchy of base level objects As we rarely create new classes that implement those interfaces it is better to list the existing ones so that one can seek for a ready made solution. Note that not all of these will be in active use as other parts of the system are brought forward. By source In general cas_evaluatables are backed with an AST that the statement parser has generated from question code or student input and has been processed by multiple AST-filters and validators. But things are not always so, one might have large blocks of code that have been prevalidated and cached as raw strings that one wants to directly load to the session, for example logic code that evaluates a whole PRT or a forest of them. For the latter task there exists a special class ( stack_secure_loader ) that does just that. When dealing with student sourced material one tends to use the stack_ast_container class which provides complex maker functions that ensure that a raw string gets parsed correctly and goes through key filters in addition to whatever filter you may want to apply in the context of a particular input. In some cases one may also use that class for teacher sourced material but in general stack_ast_container_silent is the better choice for such material as it does not generate return values and typically teacher sourced content is used in logic, and logic is not something that one needs to always show. Special cases The old system had the concept of conditional casstrings in the block system of CASText, as CASText is one of those things that will be redone, and in a way that it no longer needs conditional casstrings, we provide a separate type of cas_evaluatable for this task thus freeing others from having to check for conditions. The makers There exists three different static maker functions in classes stack_ast_container_silent and stack_ast_container . The logic is identical as they are only defined in former, but the result is different as they create objects of classes type. So call they through the class you wish to use.","title":"The family tree of cas_evaluatables."},{"location":"Developer/CAS_evaluatable/#the-family-tree-of-cas_evaluatables","text":"As of 4.3 the CAS evaluation engine has been replaced by a more modular version. Basically the old \"cassession\" class was replaced with a version that takes in objects that implement the cas_evaluatable interface, and evaluates them. However, it does not extract values from the CAS unless those objects implement additional interfaces that receive those values.","title":"The family tree of cas_evaluatables."},{"location":"Developer/CAS_evaluatable/#the-core-interfaces","text":"","title":"The core interfaces"},{"location":"Developer/CAS_evaluatable/#cas_evaluatable","text":"Anything that can generate a CAS-statement string, responds to a question about its validity, can tell some backreference information to be displayed in potential error messages, and provides a function that receives information about the success or failure of the statement. In general if one is only loading values into the CAS and does not need to extract those particular values then something implementing cas_evaluatable is probably the thing to use. And one can always add additional items to the session and those can then extract values if need be. In the old terms keyvals are closest to collections of cas_evaluatables as they are rarely extracted on their own.","title":"cas_evaluatable"},{"location":"Developer/CAS_evaluatable/#cas_value_extractor-and-cas_latex_extractor","text":"These two expand the cas_evaluatable interface by requiring that the object provides means of receiving the value or its LaTeX representation. The obvious use for these are any items one needs to bring back from CAS, note that while one can easily push every statement to CAS in containers implementing these it is wasteful to do so unless you actually use those extracted values. What is wasted is bandwidth, processing power, and space in the cache all of which directly affect response time and the upkeep costs of the system. From the old model the things that best match these are CASText, getting the results of PRTs, and generating the LaTeX values for validation messages.","title":"cas_value_extractor and cas_latex_extractor"},{"location":"Developer/CAS_evaluatable/#the-new-class-hierarchy-of-base-level-objects","text":"As we rarely create new classes that implement those interfaces it is better to list the existing ones so that one can seek for a ready made solution. Note that not all of these will be in active use as other parts of the system are brought forward.","title":"The new class hierarchy of base level objects"},{"location":"Developer/CAS_evaluatable/#by-source","text":"In general cas_evaluatables are backed with an AST that the statement parser has generated from question code or student input and has been processed by multiple AST-filters and validators. But things are not always so, one might have large blocks of code that have been prevalidated and cached as raw strings that one wants to directly load to the session, for example logic code that evaluates a whole PRT or a forest of them. For the latter task there exists a special class ( stack_secure_loader ) that does just that. When dealing with student sourced material one tends to use the stack_ast_container class which provides complex maker functions that ensure that a raw string gets parsed correctly and goes through key filters in addition to whatever filter you may want to apply in the context of a particular input. In some cases one may also use that class for teacher sourced material but in general stack_ast_container_silent is the better choice for such material as it does not generate return values and typically teacher sourced content is used in logic, and logic is not something that one needs to always show.","title":"By source"},{"location":"Developer/CAS_evaluatable/#special-cases","text":"The old system had the concept of conditional casstrings in the block system of CASText, as CASText is one of those things that will be redone, and in a way that it no longer needs conditional casstrings, we provide a separate type of cas_evaluatable for this task thus freeing others from having to check for conditions.","title":"Special cases"},{"location":"Developer/CAS_evaluatable/#the-makers","text":"There exists three different static maker functions in classes stack_ast_container_silent and stack_ast_container . The logic is identical as they are only defined in former, but the result is different as they create objects of classes type. So call they through the class you wish to use.","title":"The makers"},{"location":"Developer/Census/","text":"Maxima identifier census The Maxima identifier census is a new part of STACK starting from version 4.3 the point of this census is to keep track of new Maxima features and their presence in versions of Maxima. Basically, we can use some function and flag if and only if its present in a reasonable number of recent Maxima versions and we drop STACKs support of older versions. In addition to helping developers identify features that are not necessarily available in relevant Maxima versions the census data is also used to build the security-map i.e. a list of identifiers that should not be modified, accessed or called by students or teachers. The same list also describes safe identifiers so that we can identify situations where function names are used as variables or common constants are being redefined. The census and security files Currently, the data can be found from JSON files under /stack/cas/ the census in its raw form is in base-identifier-map.json and the security-map is In security-map.json . The census file lists identifiers and their usage types and the versions of Maxima those usages have been present in the documentation. The security file gives meta-data about selected identifiers, that meta-data typically consists of keys like function , operator , or variable that have values of s , f , and ? first one meaning that students can use that identifier in that way and the second one meaning that no one can use that in that way the last one signals that the identifier is not yet forbidden and that teachers may allow students to use it if they so wish. Other meta-data tends to focus on classification e.g. functions that can be used to apply or map other function on values have their own meta-data flag mapfunction . Updating the files The process of updating the census file is as follows: Acquire the source code of the new Maxima version you want to include in the census. For example 'maxima-5.42.0.tar.gz' and unpack it somewhere. cd /tmp/ mkdir maximatemp cd maximatemp tar xvf ~/Downloads/maxima-5.42.0.tar.gz Extract the identifiers from the documentation that comes with that source, and store them to a file. cd /tmp/maximatemp/maxima-5.42.0/doc/info grep '^ \\-\\- .*: .*' -shI * | grep -v 'an error. To debug' > /tmp/maximatemp/identifiers-5.42.0.txt Use STACKs update script to read in that file. Make sure that you give the correct version number. cd $MOODLE php question/type/stack/cli/maximaidentifierupdater.php --version=5.42.0 --data=/tmp/maximatemp/identifiers-5.42.0.txt Also call the update script for the security map. The script will read the data updated in the previous step and include any new identifiers to the security map. Calling, this script should also be done if you manually modify the security-map as the script ensure that the map is in alphabetical order and indented in the expected way. cd $MOODLE php question/type/stack/cli/maximasecuritymapupdater.php Remember to commit the changes to those JSON files to the GIT.","title":"Maxima identifier census"},{"location":"Developer/Census/#maxima-identifier-census","text":"The Maxima identifier census is a new part of STACK starting from version 4.3 the point of this census is to keep track of new Maxima features and their presence in versions of Maxima. Basically, we can use some function and flag if and only if its present in a reasonable number of recent Maxima versions and we drop STACKs support of older versions. In addition to helping developers identify features that are not necessarily available in relevant Maxima versions the census data is also used to build the security-map i.e. a list of identifiers that should not be modified, accessed or called by students or teachers. The same list also describes safe identifiers so that we can identify situations where function names are used as variables or common constants are being redefined.","title":"Maxima identifier census"},{"location":"Developer/Census/#the-census-and-security-files","text":"Currently, the data can be found from JSON files under /stack/cas/ the census in its raw form is in base-identifier-map.json and the security-map is In security-map.json . The census file lists identifiers and their usage types and the versions of Maxima those usages have been present in the documentation. The security file gives meta-data about selected identifiers, that meta-data typically consists of keys like function , operator , or variable that have values of s , f , and ? first one meaning that students can use that identifier in that way and the second one meaning that no one can use that in that way the last one signals that the identifier is not yet forbidden and that teachers may allow students to use it if they so wish. Other meta-data tends to focus on classification e.g. functions that can be used to apply or map other function on values have their own meta-data flag mapfunction .","title":"The census and security files"},{"location":"Developer/Census/#updating-the-files","text":"The process of updating the census file is as follows: Acquire the source code of the new Maxima version you want to include in the census. For example 'maxima-5.42.0.tar.gz' and unpack it somewhere. cd /tmp/ mkdir maximatemp cd maximatemp tar xvf ~/Downloads/maxima-5.42.0.tar.gz Extract the identifiers from the documentation that comes with that source, and store them to a file. cd /tmp/maximatemp/maxima-5.42.0/doc/info grep '^ \\-\\- .*: .*' -shI * | grep -v 'an error. To debug' > /tmp/maximatemp/identifiers-5.42.0.txt Use STACKs update script to read in that file. Make sure that you give the correct version number. cd $MOODLE php question/type/stack/cli/maximaidentifierupdater.php --version=5.42.0 --data=/tmp/maximatemp/identifiers-5.42.0.txt Also call the update script for the security map. The script will read the data updated in the previous step and include any new identifiers to the security map. Calling, this script should also be done if you manually modify the security-map as the script ensure that the map is in alphabetical order and indented in the expected way. cd $MOODLE php question/type/stack/cli/maximasecuritymapupdater.php Remember to commit the changes to those JSON files to the GIT.","title":"Updating the files"},{"location":"Developer/Creating_an_input_type/","text":"Creating a new Input type Background To allow questions to be as flexible as possible, the types of input that can be used to build questions are a type of plugin. You can make a new one and add it to STACK if you wish. This document explains how. File layout Your new input type will be a folder inside question/type/stack/stack/input/. For the purpose of this example, we will suppose we are making an input type called myinput. So, the folder will be question/type/stack/stack/input/myinput. Inside there, you should have two files: myinput.class.php tests/myinput_test.php - not strictly requried, but of course you want to write unit tests for your new code. myinput.class.php In this file, you need to define a subclass of stack_input called stack_myinput_input. The methods you need to implement are well described by the PHPdoc comments on the base class, so go and read those now. The key methods are: get_parameters_defaults - used by the question editing form. render - displays the input element as HTML. Finally The best way to see how all this works is to have a look at how the inputs that come with stack as standard are implemented. It should be easy to learn by example.","title":"Creating a new Input type"},{"location":"Developer/Creating_an_input_type/#creating-a-new-input-type","text":"","title":"Creating a new Input type"},{"location":"Developer/Creating_an_input_type/#background","text":"To allow questions to be as flexible as possible, the types of input that can be used to build questions are a type of plugin. You can make a new one and add it to STACK if you wish. This document explains how.","title":"Background"},{"location":"Developer/Creating_an_input_type/#file-layout","text":"Your new input type will be a folder inside question/type/stack/stack/input/. For the purpose of this example, we will suppose we are making an input type called myinput. So, the folder will be question/type/stack/stack/input/myinput. Inside there, you should have two files: myinput.class.php tests/myinput_test.php - not strictly requried, but of course you want to write unit tests for your new code.","title":"File layout"},{"location":"Developer/Creating_an_input_type/#myinputclassphp","text":"In this file, you need to define a subclass of stack_input called stack_myinput_input. The methods you need to implement are well described by the PHPdoc comments on the base class, so go and read those now. The key methods are: get_parameters_defaults - used by the question editing form. render - displays the input element as HTML.","title":"myinput.class.php"},{"location":"Developer/Creating_an_input_type/#finally","text":"The best way to see how all this works is to have a look at how the inputs that come with stack as standard are implemented. It should be easy to learn by example.","title":"Finally"},{"location":"Developer/Development_history/","text":"STACK Development History For current and future plans, see Development track and Future plans . Version 4.4.5 Released July 2023. Add in the s_assert function to allow teachers to unit-test individual question variable values. Add in the [[hint]] question block . Fixes issue #968, thanks to Michael Kallweit. Add in the stack_include_contrib() for easier inclusion of libraries. Add in the [[todo]] question block . Caschat page now saves question variables and general feedback back into the question. Fixes issue #984. Confirm support for Maxima 5.46.0 and 5.47.0. All inputs now \"allowempty\" and \"hideanswer\" as extra options. Fixes issue #997. Version 4.4.4 Released June 2023. This is a bug-fix release. Version 4.4.3 Released May 2023. Rename testing page as \"STACK question dashboard\" and make it much easier to add a test case based on the teacher's answer. Better cleaning of unicode from students' input strings. Add link to the dependency checker to the plugin page. Add in descriptions to the question (castext), the PRT nodes and the question tests. Add in the input extra option validator to allow user-defined validation functions. Reorganise the answer test documentation. Major re-working of Javascript in STACK. Specifically STACK-JS a VLE agnostic JavaScript system that moves all script execution into sandbox iframes and restricts the things those scripts can do outside that sandbox. Basically, replaces the [[jsxgraph]] -block and provides ways for doing other scripting. Initial implementation of the [[reveal]] -block (#570) using the STACK-JS system. Various related blocks like [[iframe]] , [[javascript]] , [[style] , [[script]] , and [[cors]] This version does not yet forbide all JavaScript outside STACK-JS, but do prepare future updates to do so and start migrating existing scripts into STACK-JS. Version 4.4.2 Released January 2023. This is mainly a bug fix version. Add in functionality to display Maxima expressions as trees with CSS using disptree . Load the diag package for better linear algebra support. Better layout on the question testing page. Question variables and feedback variables are now in monospace. Add in the onum option, i.e. make_multsgn(\"onum\") in the options . Version 4.4.1 Released August 2022. This is mainly a bug fix version. Version 4.4.0 has a number of major re-writes and also supports Moodle 4.0. Version 4.4.0 Released July 2022. Major rewrite of the PRT and CASText systems, focus on performance and limitations of the previous systems. This release has changed/tightened up some question authoring causing some problems with existing questions. For this reason we have written dedicated release notes for v4.4.0. Release documentation under CC-BY-SA. Caching validation. Compiled PRTs, which are now true if -statements in the CAS and issue #150 is now handled. The marks and penalty fields in the PRTs can be numbers, or other variables defined elsewhere in the question. 5 Change behaviour of UnitsAbsolute in response to discussion of issue #448. CASText2 is the new CASText-system and it supports mixed formats and provides new blocks for declaring formats. Markdown is now a supportted format and value injections into it will get correctly escaped. Use triple slashes for math-mode... There are now means of including external code and CASText fragments from an URL. One can now generate text-files for download with a special block in the question-text. CSV:s of student specific random data etc. Inline CASText is now a feature, it will become more relevant in the future input-system. For now you may use it in MCQ labels . A new CASText block [[jsstring]] for generating JavaScript strings to be used in scripting is now available. It should help when one wants to construct complex values. There now exists a built in language localisation system , that allows access to the language setting over at the CAS side. This mixes well with inline castext and allows localisation of MCQ labels. The number of CAS-evaluation sessions has been cut down significantly. Conversely, the amount of things happening in a single CAS-session has grown significantly. This may affect your Maxima load and the size of the CAS-cache. You may need to retune your operation if you have fine tuned it based on those details. This will also affect cache keys and values so tuning caching may also matter if one tunes everything. The security system now does runtime checks and no longer tries to catch evil things through static analysis in advance. Added checkvars option to inputs. Add in support for the Damerau-Levenshtein distance . Add in suppprt for the display of Complex Numbers . Add in basic solving of expressions with the not equals. E.g. x-1#0 is now considered equivalent to x#1 . Add in support for Moodle 4.0. Version 4.3.11 Released June 2022. This release contains an update of JSXGraph (in advance of the forthcoming 4.4 release) to facilitate immediate materials development. Adopt moodle-ci. Version 4.3.10 Released December 2021. Add in filter 420_consolidate_subscripts to consolidate students' input with subscripts from M_1 to M1 . Support variant matching . Add in the option arccos(x)/arcosh(x) for display of trig. This notation exists becase arcsin gives the arc length on the unit circle for a given y-coordinate. arsinh gives an area enclosed by a hyperbola and two rays from the origin for a given y-coordinate. Allow students to type arccos etc. and treat these as synonyms of the trig functions. Substantially improve the basic question usage report. Version 4.3.9 Released July 2021. Mostly minor bug fixes. Add in additional cache compiledcache to reduce validation overheads by compiling questions. Improve checking of teacher's code for better security, this requires a new admin setting caspreparse for back compatibility. Add in local.mac for site specific code. Move STACK admin UI scripts to adminui . Add in ATEqualComAssRules Filter student's input so groups are turned into ntuple inert functions. At last students can type in coordinates as (x,y) as input! Add in warnings of language mismatch in parts of a question. Add in warnings where the answer test needs a raw input but appears to get a calculated value. Expand rand to accept sets and make a random selection from sets. Add rand_selection_with_replacement . Version 4.3.8 Released December 2020. Introduce \"context variables\" which propagate throughout a question, enabling texput to operate in inputs as well as general castext. Autoload trigtools to provide better simplification options for trig expressions and fix long-standing bug with trigrat . Make it much easier for colleagues to construct a test case using the \"teacher's answer\" input values as test case inputs. Allow users to modify the notanswered message in dropdown and radio inputs. Move all answer tests to Maxima. Separate out Maxima commands in the install process. Version 4.3.7 Released October 2020. Bug fixes and minor improvements. Version 4.3.6 Released October 2020. Bug fixes and minor improvements. Version 4.3.5 Add in the HELM styles. Version 4.3.5 Released August 2020. Bug fixes and minor improvements. Remove all strictSyntax functionality (DB, import/export functions remain). Add in further styles for proof with numbered lists. Version 4.3.4 Released June 2020. Bug fixes and minor improvements to units. Version 4.3.3 Released May 2020. Bug fixes and documentation. Version 4.3.2 Released May 2020. Document and support for simple manipulation of real intervals which Maxima does not have a library for. Document and support for simple manipulation of propositional logic based on Maxima's logic package. Document and support for simple manipulation of tables mainly to support easy display of truth tables in logic.. Better support for semi-automatic marking . Add in the resizable matrix input type (varmatrix). Fixed bug with javascript on pages with more than one matrix. Version 4.3.1 Released April 2020. Bug fixes and features which require DB changes. Add in STACK option \"logicsymbol\" to control how logical symbols are displayed. Add in formative potential response trees. Add in option feedbackstyle to potential response trees. Add in a new answer test AlgEquivNouns. Version 4.3 Released April 2020. This has been tested successfully during the spring semester, at three insitutions with large groups. STACK 4.3 is, because of the new parser, slightly slower than previous releases. Version 4.3 requires the PHP package mbstring (which will be required from Moodle 3.9 anyway). Do not attempt to upgrade without checking you have mbstring on your server. Navigate to this page on Moodle to confirm. /admin/environment.php Version 4.3 represents a major internal re-engineering of STACK, with a new dedicated parser and an updated mechanism for connecting to Maxima. This is a significant improvement, refactoring some of the oldest code and unblocking progress to a wide range of requested features. There have been a number of changes: In the forbidden words we now match whole words not substrings. Removed the RegExp answer test. Added the SRegExp answer test using Maxima's regex_match function. Use of units is now reflected throughout a question. This reduces the need to declare units in all contexts. Internally, the \"+-\" operator has been replaced with a new infix operation \"#pm#\". Instead of a+-b teachers now must type a#pm#b . This change was necessary to deal with differences between versions of Maxima when dealing with expresions. New features in v4.3: Add in full parser, to address issue #324. Add in input option 'align'. Add in input option 'nounits'. Add in input option 'compact' to input \"Show the validation\" parameter. Add in a basic question use report page, linked from the question testing page. Add in house styles to help typeset proof . Add cache to help reduce parsing overhead. Version 4.2.3 Released January 2020. This release is a marker before the release of STACK v4.3. Version 4.2.2 Released September 2019. Removed the Maxima MathML code (which wasn't connected or used). Add in metadata system to the documentation (Thanks to Malthe Sporring for this suggestion). Add in extra option simp to inputs. Add in extra options in the input allowempty and hideanswer . Review and updated documentation (thanks to Malthe Sporring). Version 4.2.1 Released August 2018. Add in privacy subsystem classes for GDPR compliance. Version 4.2 Released July 2018. Note: newer versions of Maxima require that a variable has been initialised as a list/array before you can assign values to its indices. For this reason some older questions may stop working when you upgrade to a new version of Maxima. Please use the bulk test script after each upgrade! See issue #343. Note: the behaviour of the Maxima addrow function has changed. Use the bulk test script to identify questions which are affected. Note, once you save a question you will update the version number, and this will prevent questions using addrow from being identified. Add support for using JSXGraph http://jsxgraph.org for better support of interactive graphics, and as part of an input type. See JSXGraph Add in a version number to STACK questions. Update reasoning by equivalence. This includes the following. Equating coefficients as a step in reasoning by equivalence. E.g. ( a x^2+b x+c=r x^2+s x+t \\leftrightarrow a=r \\mbox{ and } b=s \\mbox{ and } c=t). See poly_equate_coeffs in assessment.mac Solving simple simultaneous equations. (Interface) Include simple calculus operations (but constant of integration needs some further thought.) Refactor internal question validation away from Moodle editing, and into the question type. Add in a \"warning\" system. Add in native multi-language support, to separate out languages in the question text. This is needed so as not to create spurious validation errors, such as \"input cannot occur twice\". Output results of PRTs in the summarise_response method of question.php . Gives more information for reporting. Sort out the \"addrow\" problem. (See issue #333). This is changed to \"rowadd\". Add in check for \"mul\" (see issue #339) and better checking of input options. Refactor equiv_input and MCQ to make use of the new extra options mechanism. Add in support for the Maxima simplex package. Add an answer test to check if decimal separator is in the wrong place (See issue #314). Add an answer test to check sets and provide better feedback. Significant improvements to the bulk testing, returning runtime errors and identifying all questions without tests or worked solutions. Better CSS. (See issue #380) STACK 4.1 Released December 2017. Numerous minor bug fixes and improvements. Add in support for the syntaxHint in the matrix input. On the questiontestrun page, have options to (a) delete all question variants. Add in a size option to set the size of a plot. Add in an answer test which accepts \"at least\" n significant figures. (See issue #313) Add in the \"string\" input type. Add test which checks if there are any rational expressions in the denominator of a fraction. (Functionality added to LowestTerms test, which looks at the form of rational expressions). Add an option to remove hard-coded \"not answered\" option from Radio input type. (See issue #304) Add in a \"numerical\" input type which requires a student to type in a number. This has various options, see the docs . Specify numerical precision for validation in numerical and units input types. Refactor the inputs so that extra options can be added more easily, and shared between inputs. STACK 4.0.1 Released August 2017. This is a bug-fix release, mostly associated with the upgrade process from version 3.X to 4.X. Fix a bug in the upgrade script. Fix a bug in the testing procedure in the \"question test\" script, and improve the way deployed variants are tested. Make SVG the default image format for pictures created by Maxima. (Old .png code left in place in this release, but no user option to access this functionality.) STACK 4.0 Released August 2017. STACK 4.0 represents a major release of STACK and is a non-reversible change, with important differences which break back-compatibility. Note that much of the underlying code in this development have been used at Aalto for many years, with complex questions. We believe these are battle tested improvements in the functionality. STACK 4.0 includes the block features and other important changes in CASText. To generate the LaTeX displayed form of a CAS variable in CASText you must use {@...@} . Note the curly braces which now must be used. We have an upgrade script for existing questions. To generate the Maxima value of a CAS variable in CASText you can use {#...#} . This is useful when interfacing with other software, or showing examples to students. CASText now supports conditional statements and adaptive blocks. See question blocks . Other changes. The question note is no longer limited in size. Mathematics in LaTeX can no longer be supported with $..$ or $$..$$ . This usage has been discouraged for many years, and we have a long-standing \"fix\" script to convert from dollars to the forms \\(..\\) and \\[..\\] . Remove the artificial limit on the size of CASText. We now rely on surrounding limits, like POST requests and database limits. This may result in ugly errors, but we need larger limits to accommodate interactive elements embedded into text fields. STACK 3.6 Released July 2017. This release developed the first version of an input to assess line by line \"reasoning by equivalence\" input. See the documentation on equivalence reasoning . Other new features and enhancements in this release. Modify the text area input so that each line is validated separately. Add a \"scratch working\" input type in which students can record their thinking etc. alongside the final answer. Support for intervals in STACK, using the Maxima syntax oo(a,b) for an open interval ((a,b)), cc(a,b) for an open interval ([a,b]) and oc(a,b) , co(a,b) for the half open intervals. Much better support for solving and dealing with single variable inequalities. Version 3.5.7 Released June 2017. Numerous minor bug fixes and improvements. Version 3.5.6 Released December 2016. Numerous minor bug fixes and improvements, particularly with numerical tests and scientific units. Change the display so that the underscore in atoms is displayed using subscripts. Added support for logarithms to an arbitrary base. Added SigFigsStrict answer test. Better support for floating point numbers, including the preservation and display of trailing zeros in numerical tests. Note, many of these changes have resulted in stricter rules on the acceptability of strings and stricter validation rules. 1 You can no longer have a feedback variable, or a question variable, with a name that is the same as an input. 2. log10 function and log_b functions are now handled by STACK, by manipulating the CAS string before it is sent to Maxima. Therefore, if your question previously defined a function with names like that, it will now break. 3. Variable names with a digit in the middle eqn1gen no longer work. (They should never have been used, but used not to break questions.) 4. Previously, unnecessary \\ in CAS text were ignored. E.g. if you have a question variable called vangle2 then {@\\vangle2@} used to work, it does not any more. Version 3.5.5 Released August 2016. Numerous minor bug fixes and improvements, particularly with numerical tests and scientific units. Expose functionality of printf to better control the display of integers and floats. Expand the \"units\" answer test to allow authors to use other numerical answer tests, see units . Add a mechanism to allow spaces in inputs. Trial functionality, which might change. Improve the mechanism to create a Maxima image and update the options in one go. Numerous options for units and the display of fractions. Added an xMaxima file to give more direct access to the sandbox. Version 3.5 Numerous minor bug fixes and improvements. Added an export mechanism for single stack questions through a link on the \"Question tests & deployed variant\" page. Modify the text area input so that each line is validated separately. Support for plot2d \"label\" command. Added support for grid2d for plot in newer versions of Maxima only. Add the NOCONST option to the ATInt answertest. Added support for optional Maxima packages through the config settings. Added the dropdown, radio and checkbox input types. Added basic support for scientific units , including a new input type and science answer tests. Version 3.4 Released September 2015. This contains numerous minor bug fixes and improvements. Expand the capability of ATInt options to accept the integrand to improve feedback. When validating a student's expression, add the option to show a list of variables alongside the displayed expression. The install process now attempts to auto-generate a Maxima image. Support for the stats package added. Change in the behaviour of the CASEqual answer test. Now we always assume simp:false . Add support for more AMS mathematics environments, including \\begin{align}...\\end{align} , \\begin{align*}...\\end{align*} etc. STACK tried to automatically write an optimised image for Linux. Version 3.3 Released September 2014. This contains numerous minor bug fixes and improvements. Added in the Question blocks Changes to validation of casstrings. We now allow syntax such as 3e2 to represent floating point numbers. The strict syntax settings still flag 3e2 as \"missing stars\". Improvements to catching common syntax errors with trig functions, e.g. sin^-1(x) or cos[x] Refactored the numerical tests. This means they are now standard Maxima tests, not using PHP. Allow the use of the Maxima orderless and ordergreat in cassessions. This helps with display, without turning off simplification. Expanding CASText features. Enable a function as an answer type, e.g. improve validation. Refactor answer test unit testing to distinguish \"test fail\" from \"zero\". Reject things like sin*(x) and sin^2(x) as invalid Provide a new option on how parentheses are displayed for matrices Provide an extra syntax checking option to enable stars to be inserted between single characters, e.g. xy -> x*y. Add the input parameter allowwords to enable the teacher to specify some permitted words of more than 2 symbols length. Reinstate the STACK 2 feature called \"Hints\". This has been done as a \"Fact sheet\" to avoid ambiguity with other Moodle features. See Fact sheet documentation. Better install (auto OS detection), healthcheck and testing. When using the Maxima Pool servlet, it is now possible to use any type of HTTP authentication (e.g. basic or digest), and there is a separate configuration option, so that you don't need to put the username and password in the URL. Version 3.2 Released January 2014. This is mainly a bugfix release, and is updated to work with more recent versions of Moodle and Maxima 5.31.3. Changes since 3.1: Better support for inequalities Better support for reporting, e.g. more consistent tagging of errors, validation notes etc. Support for \"discrete\" and \"parametric\" plots. Support for plot Alt text. Refactor the Maxima plot command to include \"discrete\" and \"parametric plots\" Refactor the Maxima plot command to include options, e.g., xlabel, ylabel, legend, color, style, point_type. Enable the student's answer to be a function. Minor accessibility improvements to underline all terms generated by Maxima in red, in addition to just using colour. Removal of the \"MaximaPool\" and \"MaximaPool (optimised)\" options for the platform type. We just now have the \"server\" type. Version 3.1 Released July 2013. This includes all the bugs found and fixed during the first year of use at Birmingham, and the first six months at the OU. Changes since 3.0: STACK custom reports Split up the answer notes to report back for each PRT separately. Introduce \"validation notes\". This should work at the PHP level, recording reasons for invalidity. Since we already connect to the CAS, this should also record whether the student's input is equivalent to the teacher's, in what sense, and what form their answer is in. Maybe too slow? Useful perhaps for learning analytics. Expanding CASText features Add in support for strings within CASText. These are currently supported only when the contents is a valid casstring, which is overly restrictive. Improvements to the editing form A way to set defaults for many of the options on the question edit form. There are two ways we could do it. We could make it a system-wide setting, controlled by the admin, just like admins can set defaults for all the quiz settings. Alternatively, we could use user_preferences, so the next time you create a STACK question, it uses the same settings as the previous STACK question you created. Display inputs and PRTs in the order they are mentioned in the question text + specific feedback. Allow an arbitrary PRT node to be the root node, rather than assuming it is the lowest numbered one. Display a graphical representation of each PRT, that can be clicked to jump to that Node on the editing form. When cloning a question with the 'Make copy' button, also clone the question tests. Other improvements Create a \"tidy question\" script that can be used to rename Inputs, PRTs and/or Nodes everywhere in a question. Add CASText-enabled ALT tags to the automatically generated images. For example, adding a final, optional, string argument to the \"plot\" command that the system uses as the ALT text of the image. That way, we can say the function that the graph is of. New option for how inverse trig functions are displayed. A script to run question tests in bulk. Add a new answer test to deal with decimal places. STACK questions with no inputs, and/or no PRTs now work properly. Bug fixes Fix instant validation for text-area inputs. With \"Check the type of the response\" set to \"Yes\", if an expression is given and an equation is entered, the error generated is: \"Your answer is an equation, but the expression to which it is being compared is not. You may have typed something like \"y=2 x+1\" when you only needed to type \"2 x+1\".\" This might confuse students. They don't know what \" the expression to which it is being compared\" is! Perhaps this warning could be reworded something like: \"You have entered an equation, but an equation is not expected here. You may have typed something like \"y=2 x+1\" when you only needed to type \"2 x+1\".\" We should have more messages for each type of failed situation.... Alt tags in images generated by plots has changed. The default value now includes a string representation of the function plotted. See plots for more details. Assorted other accessibility fixes. Standard PRT feedback options are now processed as CAS text. There was a bug where clearing the CAS cache broke images in the question text. Now fixed. Version 3.0 Released January 2013. This has been tested successfully for two semesters, with groups of up to 250 university students and a variety of topics. Major re-engineering of the code by the Open University, The University of Birmingham and the University of Helsinki. Documentation added by Ben Holmes. The most important change is the decision to re-work STACK as a question type for the Moodle quiz. There is no longer a separate front end for STACK, or (currently) a mechanism to include STACK questions into other websites via a SOAP webservice. This round of development does not plan to introduce major new features, or to make major changes to the core functionality. An explicit aim is that \"old questions will still work\". Key features Major difference: Integration into the quiz of Moodle 2.3 as a question type. Support for Maxima up to 5.28.0. Documentation moved from the wiki to within the code base. Move from CVS to GIT. Changes in features between STACK 2 and STACK 3. Key-val pairs, i.e. Question variables and feedback variables, now use Maxima's assignment syntax, e.g. n:5 not the oldstyle n=5 . The importer automatically converts old questions to this new style. Interaction elements, now called inputs, are indicated in questions as [[input:ans1]] to match the existing style in Moodle. Existing questions will be converted when imported. A number of other terminology changes have brought STACK's use into line with Moodle's, e.g. Worked solution has changed to \"general feedback\". Change in the internal name of one answer test Equal_Com_ASS changed to EqualComASS . Feature \"allowed words\" dropped from inputs (i.e. interaction elements). JSMath is no longer under development, and hence we are no longer providing an option for this in STACK. However, in STACK 2 we modified JSMath to enable inputs within equations. Display now assumes the use of a Moodle filter and we recommend (and test with) MathJax, which does not currently support this feature. If it is important for you to use this feature you will need to copy and modify the load.js file from STACK 2 and use JSMath. Worked solution on demand feature has been removed. This was a hack in STACK 2, and the use of Moodle quiz has made this unnecessary. Some options are no longer needed. This functionality is now handled by the \"behaviours\", so are unnecessary in STACK 3. The \"Feedback used\". The \"Mark modification\". We have lost some of the nice styling on the editing form, compared to Stack 2. Answer tests no longer return a numerical mark, hence the \"+AT\" option for mark modification method has been dropped. The STACK Maxima function filter has been removed. It should be replaced by the internal Maxima function sublist . Note, the order of the arguments is reversed! STACK can now work with either MathJax, the Moodle TeX filter, or the OU's maths rendering filter. The Maxima libraries powers and format have been removed. We now strongly discourage the use of dollar symbols for denoting LaTeX mathematics environments. See the pages on MathJax for more information on this change. The expressions supplied by the question author as question tests are no longer simplified at all. See the entry on question tests . Full development log Milestone 0 Get STACK in Moodle to connect to Maxima, and clean-up CAS code. Moodle-style settings page for STACK's options. Re-implement caschat script in Moodle. Re-implement healthcheck script in Moodle. Make all the answer-tests work in Moodle. Make the answer-tests self-test script work in Moodle. Make all the input elements work in Moodle. Make the input elements self-test script work in Moodle. Add all the docs files within the Moodle question type. Clean up the PRT code, and make it work within Moodle. Code to generate the standard test- n question definitions within Moodle, to help with unit testing. Basic Moodle question type that ties all the components together in a basically working form. Milestone 1 Caching of Maxima results, for performance reasons. Database tables to store all aspects of the question definitions. Question editing form that can handle multi-input and multi-PRT questions, with validation. Re-implement question tests in Moodle. Except that the test input need to be evaluated expressions, not just strings. Get deploying, and a fixed number of variants working in Moodle. Make multi-part STACK questions work exactly right in Adaptive behaviour. Evaluate some PRTs if possible, even if not all inputs have been filled in. Correct computation of penalty for each PRT, and hence overall final grade. Problem with expressions in feedback CAS-text not being simplified. Milestone 2 Make sure that STACK questions work as well as possible in the standard Moodle reports. Implement the Moodle backup/restore code for stack questions. Implement Moodle XML format import and export. Investigate ways of running Maxima on a separate server. Implement random seed control like for varnumeric. At this point STACK will be \"ready\" for use with students, although not all features will be available. Milestone 3 Finish STACK 2 importer: ensure all fields are imported correctly by the question importer. Make STACK respect all Moodle behaviours. Deferred feedback Interactive Deferred feedback with CBM Immediate feedback Immediate feedback with CBM - no unit tests, but if the others work, this one must. Add sample_questions, and update question banks for STACK 3.0. Improve the way questions are deployed. Only deploy new variants. Editing form: a way to remove a given PRT node. Fix bug: penalties and other fields being changed from NULL to 0 when being stored in the database. Add back Matrix input type. In adaptive mode, display the scoring information for each PRT when it has been evaluated. Once completed we are ready for the Beta release! Beta testing period Do lots of testing, report and fix bugs. Eliminate as many TODOs from the code as possible. Add back other translations from STACK 2.0, preserving as many of the existing strings as possible. NOTE: the new format of the language strings containing parameters. In particular, strings {$a[0]} need to be changed to {$a->m0}, etc. Add back all questions from the diagnostic quiz project as further examples. Deploy many variants at once. Editing form Form validation should reject a PRT where Node x next -> Node x. Actually, it should validate that we have a connected DAG. Add back the help for editing PRT nodes. When validating the editing form, actually evaluate the Maxima code. When validating the editing form, ensure there are no @ and $ in the fields that expect Maxima code. Ensure links from the editing form end up at the STACK docs. This is now work in progress, but relies on http://tracker.moodle.org/browse/MDL-34035 getting accepted into Moodle core. In which case we can use this commit: https://github.com/timhunt/moodle-qtype_stack/compare/helplinks. Hide dropdown input type in the editing form until there is a way to set the list of choices. Testing questions DOES NOT HAPPEN ANY MORE With a question like test-3, if all the inputs were valid, and then you change the value for some inputs, the corresponding PRTs output the 'Standard feedback for incorrect' when showing the new inputs for the purpose of validation. Images added to prt node true or false feedback do not get displayed. There is a missing call to format_text. A button on the create test-case form, to fill in the expected results to automatically make a passing test-case. Singlechar input should validate that the input is a single char. (There is a TODO in the code for this.) Dropdown input should make sure that only allowed values are submitted. (There is a TODO in the code for this.) Dropdown input element needs some unit tests. (There is a TODO in the code for this.) We need to check for and handle CAS errors in get_prt_result and grade_parts_that_can_be_graded. (There is a TODO in the code for this.) Un-comment the throw in the matrix input. Unit tests for adaptive mode score display - and to verify nothing like that appears for other behaviours. Duplicate response detection for PRTs should consider all previous responses. It appears as if the phrase \"This submission attracted a penalty of ...\" isn't working. It looks like this is the old penalty, not the current . PRT node feedback was briefly not being treated as CAS text. Improve editing UI for test-cases https://github.com/maths/moodle-qtype_stack/issues/15 Optimising Maxima Since I have optimized Maxima, I removed write permissions to /moodledata/stack/maximalocal.mac. This makes the healthcheck script unrunnable, and hence I cannot clear the STACK cache. Finish off the system for running Maxima on another server (https://github.com/maths/moodle-qtype_stack/pull/8) Documentation system fix maintenance.php . Version 2.2 Released: October 2010 session. Enhanced reporting features. Enhanced question management features in Moodle. E.g. import multiple questions from AiM/Maple TA at once, assign multiple questions to Moodle question banks. Slider interaction elements. Version 2.1 Developed by Chris Sangwin and Simon Hammond at the University of Birmingham. Released: Easter 2010 session. Key features Precision answer test added to allow significant to be checked. Form answer test added to test if an expression is in completed square form. List interaction element expanded to include checkboxes. See List . Move to Maxima's random() function, rather than generate our own pseudo random numbers Conditionals in CASText Support for Maxima 5.20.1 New option added: OptWorkedSol. This allows the teacher to decide whether the tick box to request the worked solution is available. Sample resources included as part of the FETLAR project. Version 2.0 Released, September 2007. Developed by Jonathan Hart and Chris Sangwin at the University of Birmingham. Key features Display of mathematics taken care of by JSMath. Integrated into the Moodle quiz using the \"remote question protocol\" . The RQP was designed with STACK, and similar systems, in mind. Variety of interaction elements. Multi-part questions. Cache. Item tests. Version 1.0 Released, 2005. Developed by Chris Sangwin at the University of Birmingham. Pre-history STACK is a direct development of the CABLE project which ran at the University of Birmingham. CABLE was a development of the design of the AiM computer aided assessment system.","title":"STACK Development History"},{"location":"Developer/Development_history/#stack-development-history","text":"For current and future plans, see Development track and Future plans .","title":"STACK Development History"},{"location":"Developer/Development_history/#version-445","text":"Released July 2023. Add in the s_assert function to allow teachers to unit-test individual question variable values. Add in the [[hint]] question block . Fixes issue #968, thanks to Michael Kallweit. Add in the stack_include_contrib() for easier inclusion of libraries. Add in the [[todo]] question block . Caschat page now saves question variables and general feedback back into the question. Fixes issue #984. Confirm support for Maxima 5.46.0 and 5.47.0. All inputs now \"allowempty\" and \"hideanswer\" as extra options. Fixes issue #997.","title":"Version 4.4.5"},{"location":"Developer/Development_history/#version-444","text":"Released June 2023. This is a bug-fix release.","title":"Version 4.4.4"},{"location":"Developer/Development_history/#version-443","text":"Released May 2023. Rename testing page as \"STACK question dashboard\" and make it much easier to add a test case based on the teacher's answer. Better cleaning of unicode from students' input strings. Add link to the dependency checker to the plugin page. Add in descriptions to the question (castext), the PRT nodes and the question tests. Add in the input extra option validator to allow user-defined validation functions. Reorganise the answer test documentation. Major re-working of Javascript in STACK. Specifically STACK-JS a VLE agnostic JavaScript system that moves all script execution into sandbox iframes and restricts the things those scripts can do outside that sandbox. Basically, replaces the [[jsxgraph]] -block and provides ways for doing other scripting. Initial implementation of the [[reveal]] -block (#570) using the STACK-JS system. Various related blocks like [[iframe]] , [[javascript]] , [[style] , [[script]] , and [[cors]] This version does not yet forbide all JavaScript outside STACK-JS, but do prepare future updates to do so and start migrating existing scripts into STACK-JS.","title":"Version 4.4.3"},{"location":"Developer/Development_history/#version-442","text":"Released January 2023. This is mainly a bug fix version. Add in functionality to display Maxima expressions as trees with CSS using disptree . Load the diag package for better linear algebra support. Better layout on the question testing page. Question variables and feedback variables are now in monospace. Add in the onum option, i.e. make_multsgn(\"onum\") in the options .","title":"Version 4.4.2"},{"location":"Developer/Development_history/#version-441","text":"Released August 2022. This is mainly a bug fix version. Version 4.4.0 has a number of major re-writes and also supports Moodle 4.0.","title":"Version 4.4.1"},{"location":"Developer/Development_history/#version-440","text":"Released July 2022. Major rewrite of the PRT and CASText systems, focus on performance and limitations of the previous systems. This release has changed/tightened up some question authoring causing some problems with existing questions. For this reason we have written dedicated release notes for v4.4.0. Release documentation under CC-BY-SA. Caching validation. Compiled PRTs, which are now true if -statements in the CAS and issue #150 is now handled. The marks and penalty fields in the PRTs can be numbers, or other variables defined elsewhere in the question. 5 Change behaviour of UnitsAbsolute in response to discussion of issue #448. CASText2 is the new CASText-system and it supports mixed formats and provides new blocks for declaring formats. Markdown is now a supportted format and value injections into it will get correctly escaped. Use triple slashes for math-mode... There are now means of including external code and CASText fragments from an URL. One can now generate text-files for download with a special block in the question-text. CSV:s of student specific random data etc. Inline CASText is now a feature, it will become more relevant in the future input-system. For now you may use it in MCQ labels . A new CASText block [[jsstring]] for generating JavaScript strings to be used in scripting is now available. It should help when one wants to construct complex values. There now exists a built in language localisation system , that allows access to the language setting over at the CAS side. This mixes well with inline castext and allows localisation of MCQ labels. The number of CAS-evaluation sessions has been cut down significantly. Conversely, the amount of things happening in a single CAS-session has grown significantly. This may affect your Maxima load and the size of the CAS-cache. You may need to retune your operation if you have fine tuned it based on those details. This will also affect cache keys and values so tuning caching may also matter if one tunes everything. The security system now does runtime checks and no longer tries to catch evil things through static analysis in advance. Added checkvars option to inputs. Add in support for the Damerau-Levenshtein distance . Add in suppprt for the display of Complex Numbers . Add in basic solving of expressions with the not equals. E.g. x-1#0 is now considered equivalent to x#1 . Add in support for Moodle 4.0.","title":"Version 4.4.0"},{"location":"Developer/Development_history/#version-4311","text":"Released June 2022. This release contains an update of JSXGraph (in advance of the forthcoming 4.4 release) to facilitate immediate materials development. Adopt moodle-ci.","title":"Version 4.3.11"},{"location":"Developer/Development_history/#version-4310","text":"Released December 2021. Add in filter 420_consolidate_subscripts to consolidate students' input with subscripts from M_1 to M1 . Support variant matching . Add in the option arccos(x)/arcosh(x) for display of trig. This notation exists becase arcsin gives the arc length on the unit circle for a given y-coordinate. arsinh gives an area enclosed by a hyperbola and two rays from the origin for a given y-coordinate. Allow students to type arccos etc. and treat these as synonyms of the trig functions. Substantially improve the basic question usage report.","title":"Version 4.3.10"},{"location":"Developer/Development_history/#version-439","text":"Released July 2021. Mostly minor bug fixes. Add in additional cache compiledcache to reduce validation overheads by compiling questions. Improve checking of teacher's code for better security, this requires a new admin setting caspreparse for back compatibility. Add in local.mac for site specific code. Move STACK admin UI scripts to adminui . Add in ATEqualComAssRules Filter student's input so groups are turned into ntuple inert functions. At last students can type in coordinates as (x,y) as input! Add in warnings of language mismatch in parts of a question. Add in warnings where the answer test needs a raw input but appears to get a calculated value. Expand rand to accept sets and make a random selection from sets. Add rand_selection_with_replacement .","title":"Version 4.3.9"},{"location":"Developer/Development_history/#version-438","text":"Released December 2020. Introduce \"context variables\" which propagate throughout a question, enabling texput to operate in inputs as well as general castext. Autoload trigtools to provide better simplification options for trig expressions and fix long-standing bug with trigrat . Make it much easier for colleagues to construct a test case using the \"teacher's answer\" input values as test case inputs. Allow users to modify the notanswered message in dropdown and radio inputs. Move all answer tests to Maxima. Separate out Maxima commands in the install process.","title":"Version 4.3.8"},{"location":"Developer/Development_history/#version-437","text":"Released October 2020. Bug fixes and minor improvements.","title":"Version 4.3.7"},{"location":"Developer/Development_history/#version-436","text":"Released October 2020. Bug fixes and minor improvements.","title":"Version 4.3.6"},{"location":"Developer/Development_history/#version-435","text":"Add in the HELM styles.","title":"Version 4.3.5"},{"location":"Developer/Development_history/#version-435_1","text":"Released August 2020. Bug fixes and minor improvements. Remove all strictSyntax functionality (DB, import/export functions remain). Add in further styles for proof with numbered lists.","title":"Version 4.3.5"},{"location":"Developer/Development_history/#version-434","text":"Released June 2020. Bug fixes and minor improvements to units.","title":"Version 4.3.4"},{"location":"Developer/Development_history/#version-433","text":"Released May 2020. Bug fixes and documentation.","title":"Version 4.3.3"},{"location":"Developer/Development_history/#version-432","text":"Released May 2020. Document and support for simple manipulation of real intervals which Maxima does not have a library for. Document and support for simple manipulation of propositional logic based on Maxima's logic package. Document and support for simple manipulation of tables mainly to support easy display of truth tables in logic.. Better support for semi-automatic marking . Add in the resizable matrix input type (varmatrix). Fixed bug with javascript on pages with more than one matrix.","title":"Version 4.3.2"},{"location":"Developer/Development_history/#version-431","text":"Released April 2020. Bug fixes and features which require DB changes. Add in STACK option \"logicsymbol\" to control how logical symbols are displayed. Add in formative potential response trees. Add in option feedbackstyle to potential response trees. Add in a new answer test AlgEquivNouns.","title":"Version 4.3.1"},{"location":"Developer/Development_history/#version-43","text":"Released April 2020. This has been tested successfully during the spring semester, at three insitutions with large groups. STACK 4.3 is, because of the new parser, slightly slower than previous releases. Version 4.3 requires the PHP package mbstring (which will be required from Moodle 3.9 anyway). Do not attempt to upgrade without checking you have mbstring on your server. Navigate to this page on Moodle to confirm. /admin/environment.php Version 4.3 represents a major internal re-engineering of STACK, with a new dedicated parser and an updated mechanism for connecting to Maxima. This is a significant improvement, refactoring some of the oldest code and unblocking progress to a wide range of requested features. There have been a number of changes: In the forbidden words we now match whole words not substrings. Removed the RegExp answer test. Added the SRegExp answer test using Maxima's regex_match function. Use of units is now reflected throughout a question. This reduces the need to declare units in all contexts. Internally, the \"+-\" operator has been replaced with a new infix operation \"#pm#\". Instead of a+-b teachers now must type a#pm#b . This change was necessary to deal with differences between versions of Maxima when dealing with expresions. New features in v4.3: Add in full parser, to address issue #324. Add in input option 'align'. Add in input option 'nounits'. Add in input option 'compact' to input \"Show the validation\" parameter. Add in a basic question use report page, linked from the question testing page. Add in house styles to help typeset proof . Add cache to help reduce parsing overhead.","title":"Version 4.3"},{"location":"Developer/Development_history/#version-423","text":"Released January 2020. This release is a marker before the release of STACK v4.3.","title":"Version 4.2.3"},{"location":"Developer/Development_history/#version-422","text":"Released September 2019. Removed the Maxima MathML code (which wasn't connected or used). Add in metadata system to the documentation (Thanks to Malthe Sporring for this suggestion). Add in extra option simp to inputs. Add in extra options in the input allowempty and hideanswer . Review and updated documentation (thanks to Malthe Sporring).","title":"Version 4.2.2"},{"location":"Developer/Development_history/#version-421","text":"Released August 2018. Add in privacy subsystem classes for GDPR compliance.","title":"Version 4.2.1"},{"location":"Developer/Development_history/#version-42","text":"Released July 2018. Note: newer versions of Maxima require that a variable has been initialised as a list/array before you can assign values to its indices. For this reason some older questions may stop working when you upgrade to a new version of Maxima. Please use the bulk test script after each upgrade! See issue #343. Note: the behaviour of the Maxima addrow function has changed. Use the bulk test script to identify questions which are affected. Note, once you save a question you will update the version number, and this will prevent questions using addrow from being identified. Add support for using JSXGraph http://jsxgraph.org for better support of interactive graphics, and as part of an input type. See JSXGraph Add in a version number to STACK questions. Update reasoning by equivalence. This includes the following. Equating coefficients as a step in reasoning by equivalence. E.g. ( a x^2+b x+c=r x^2+s x+t \\leftrightarrow a=r \\mbox{ and } b=s \\mbox{ and } c=t). See poly_equate_coeffs in assessment.mac Solving simple simultaneous equations. (Interface) Include simple calculus operations (but constant of integration needs some further thought.) Refactor internal question validation away from Moodle editing, and into the question type. Add in a \"warning\" system. Add in native multi-language support, to separate out languages in the question text. This is needed so as not to create spurious validation errors, such as \"input cannot occur twice\". Output results of PRTs in the summarise_response method of question.php . Gives more information for reporting. Sort out the \"addrow\" problem. (See issue #333). This is changed to \"rowadd\". Add in check for \"mul\" (see issue #339) and better checking of input options. Refactor equiv_input and MCQ to make use of the new extra options mechanism. Add in support for the Maxima simplex package. Add an answer test to check if decimal separator is in the wrong place (See issue #314). Add an answer test to check sets and provide better feedback. Significant improvements to the bulk testing, returning runtime errors and identifying all questions without tests or worked solutions. Better CSS. (See issue #380)","title":"Version 4.2"},{"location":"Developer/Development_history/#stack-41","text":"Released December 2017. Numerous minor bug fixes and improvements. Add in support for the syntaxHint in the matrix input. On the questiontestrun page, have options to (a) delete all question variants. Add in a size option to set the size of a plot. Add in an answer test which accepts \"at least\" n significant figures. (See issue #313) Add in the \"string\" input type. Add test which checks if there are any rational expressions in the denominator of a fraction. (Functionality added to LowestTerms test, which looks at the form of rational expressions). Add an option to remove hard-coded \"not answered\" option from Radio input type. (See issue #304) Add in a \"numerical\" input type which requires a student to type in a number. This has various options, see the docs . Specify numerical precision for validation in numerical and units input types. Refactor the inputs so that extra options can be added more easily, and shared between inputs.","title":"STACK 4.1"},{"location":"Developer/Development_history/#stack-401","text":"Released August 2017. This is a bug-fix release, mostly associated with the upgrade process from version 3.X to 4.X. Fix a bug in the upgrade script. Fix a bug in the testing procedure in the \"question test\" script, and improve the way deployed variants are tested. Make SVG the default image format for pictures created by Maxima. (Old .png code left in place in this release, but no user option to access this functionality.)","title":"STACK 4.0.1"},{"location":"Developer/Development_history/#stack-40","text":"Released August 2017. STACK 4.0 represents a major release of STACK and is a non-reversible change, with important differences which break back-compatibility. Note that much of the underlying code in this development have been used at Aalto for many years, with complex questions. We believe these are battle tested improvements in the functionality. STACK 4.0 includes the block features and other important changes in CASText. To generate the LaTeX displayed form of a CAS variable in CASText you must use {@...@} . Note the curly braces which now must be used. We have an upgrade script for existing questions. To generate the Maxima value of a CAS variable in CASText you can use {#...#} . This is useful when interfacing with other software, or showing examples to students. CASText now supports conditional statements and adaptive blocks. See question blocks . Other changes. The question note is no longer limited in size. Mathematics in LaTeX can no longer be supported with $..$ or $$..$$ . This usage has been discouraged for many years, and we have a long-standing \"fix\" script to convert from dollars to the forms \\(..\\) and \\[..\\] . Remove the artificial limit on the size of CASText. We now rely on surrounding limits, like POST requests and database limits. This may result in ugly errors, but we need larger limits to accommodate interactive elements embedded into text fields.","title":"STACK 4.0"},{"location":"Developer/Development_history/#stack-36","text":"Released July 2017. This release developed the first version of an input to assess line by line \"reasoning by equivalence\" input. See the documentation on equivalence reasoning . Other new features and enhancements in this release. Modify the text area input so that each line is validated separately. Add a \"scratch working\" input type in which students can record their thinking etc. alongside the final answer. Support for intervals in STACK, using the Maxima syntax oo(a,b) for an open interval ((a,b)), cc(a,b) for an open interval ([a,b]) and oc(a,b) , co(a,b) for the half open intervals. Much better support for solving and dealing with single variable inequalities.","title":"STACK 3.6"},{"location":"Developer/Development_history/#version-357","text":"Released June 2017. Numerous minor bug fixes and improvements.","title":"Version 3.5.7"},{"location":"Developer/Development_history/#version-356","text":"Released December 2016. Numerous minor bug fixes and improvements, particularly with numerical tests and scientific units. Change the display so that the underscore in atoms is displayed using subscripts. Added support for logarithms to an arbitrary base. Added SigFigsStrict answer test. Better support for floating point numbers, including the preservation and display of trailing zeros in numerical tests. Note, many of these changes have resulted in stricter rules on the acceptability of strings and stricter validation rules. 1 You can no longer have a feedback variable, or a question variable, with a name that is the same as an input. 2. log10 function and log_b functions are now handled by STACK, by manipulating the CAS string before it is sent to Maxima. Therefore, if your question previously defined a function with names like that, it will now break. 3. Variable names with a digit in the middle eqn1gen no longer work. (They should never have been used, but used not to break questions.) 4. Previously, unnecessary \\ in CAS text were ignored. E.g. if you have a question variable called vangle2 then {@\\vangle2@} used to work, it does not any more.","title":"Version 3.5.6"},{"location":"Developer/Development_history/#version-355","text":"Released August 2016. Numerous minor bug fixes and improvements, particularly with numerical tests and scientific units. Expose functionality of printf to better control the display of integers and floats. Expand the \"units\" answer test to allow authors to use other numerical answer tests, see units . Add a mechanism to allow spaces in inputs. Trial functionality, which might change. Improve the mechanism to create a Maxima image and update the options in one go. Numerous options for units and the display of fractions. Added an xMaxima file to give more direct access to the sandbox.","title":"Version 3.5.5"},{"location":"Developer/Development_history/#version-35","text":"Numerous minor bug fixes and improvements. Added an export mechanism for single stack questions through a link on the \"Question tests & deployed variant\" page. Modify the text area input so that each line is validated separately. Support for plot2d \"label\" command. Added support for grid2d for plot in newer versions of Maxima only. Add the NOCONST option to the ATInt answertest. Added support for optional Maxima packages through the config settings. Added the dropdown, radio and checkbox input types. Added basic support for scientific units , including a new input type and science answer tests.","title":"Version 3.5"},{"location":"Developer/Development_history/#version-34","text":"Released September 2015. This contains numerous minor bug fixes and improvements. Expand the capability of ATInt options to accept the integrand to improve feedback. When validating a student's expression, add the option to show a list of variables alongside the displayed expression. The install process now attempts to auto-generate a Maxima image. Support for the stats package added. Change in the behaviour of the CASEqual answer test. Now we always assume simp:false . Add support for more AMS mathematics environments, including \\begin{align}...\\end{align} , \\begin{align*}...\\end{align*} etc. STACK tried to automatically write an optimised image for Linux.","title":"Version 3.4"},{"location":"Developer/Development_history/#version-33","text":"Released September 2014. This contains numerous minor bug fixes and improvements. Added in the Question blocks Changes to validation of casstrings. We now allow syntax such as 3e2 to represent floating point numbers. The strict syntax settings still flag 3e2 as \"missing stars\". Improvements to catching common syntax errors with trig functions, e.g. sin^-1(x) or cos[x] Refactored the numerical tests. This means they are now standard Maxima tests, not using PHP. Allow the use of the Maxima orderless and ordergreat in cassessions. This helps with display, without turning off simplification. Expanding CASText features. Enable a function as an answer type, e.g. improve validation. Refactor answer test unit testing to distinguish \"test fail\" from \"zero\". Reject things like sin*(x) and sin^2(x) as invalid Provide a new option on how parentheses are displayed for matrices Provide an extra syntax checking option to enable stars to be inserted between single characters, e.g. xy -> x*y. Add the input parameter allowwords to enable the teacher to specify some permitted words of more than 2 symbols length. Reinstate the STACK 2 feature called \"Hints\". This has been done as a \"Fact sheet\" to avoid ambiguity with other Moodle features. See Fact sheet documentation. Better install (auto OS detection), healthcheck and testing. When using the Maxima Pool servlet, it is now possible to use any type of HTTP authentication (e.g. basic or digest), and there is a separate configuration option, so that you don't need to put the username and password in the URL.","title":"Version 3.3"},{"location":"Developer/Development_history/#version-32","text":"Released January 2014. This is mainly a bugfix release, and is updated to work with more recent versions of Moodle and Maxima 5.31.3. Changes since 3.1: Better support for inequalities Better support for reporting, e.g. more consistent tagging of errors, validation notes etc. Support for \"discrete\" and \"parametric\" plots. Support for plot Alt text. Refactor the Maxima plot command to include \"discrete\" and \"parametric plots\" Refactor the Maxima plot command to include options, e.g., xlabel, ylabel, legend, color, style, point_type. Enable the student's answer to be a function. Minor accessibility improvements to underline all terms generated by Maxima in red, in addition to just using colour. Removal of the \"MaximaPool\" and \"MaximaPool (optimised)\" options for the platform type. We just now have the \"server\" type.","title":"Version 3.2"},{"location":"Developer/Development_history/#version-31","text":"Released July 2013. This includes all the bugs found and fixed during the first year of use at Birmingham, and the first six months at the OU. Changes since 3.0:","title":"Version 3.1"},{"location":"Developer/Development_history/#stack-custom-reports","text":"Split up the answer notes to report back for each PRT separately. Introduce \"validation notes\". This should work at the PHP level, recording reasons for invalidity. Since we already connect to the CAS, this should also record whether the student's input is equivalent to the teacher's, in what sense, and what form their answer is in. Maybe too slow? Useful perhaps for learning analytics.","title":"STACK custom reports"},{"location":"Developer/Development_history/#expanding-castext-features","text":"Add in support for strings within CASText. These are currently supported only when the contents is a valid casstring, which is overly restrictive.","title":"Expanding CASText features"},{"location":"Developer/Development_history/#improvements-to-the-editing-form","text":"A way to set defaults for many of the options on the question edit form. There are two ways we could do it. We could make it a system-wide setting, controlled by the admin, just like admins can set defaults for all the quiz settings. Alternatively, we could use user_preferences, so the next time you create a STACK question, it uses the same settings as the previous STACK question you created. Display inputs and PRTs in the order they are mentioned in the question text + specific feedback. Allow an arbitrary PRT node to be the root node, rather than assuming it is the lowest numbered one. Display a graphical representation of each PRT, that can be clicked to jump to that Node on the editing form. When cloning a question with the 'Make copy' button, also clone the question tests.","title":"Improvements to the editing form"},{"location":"Developer/Development_history/#other-improvements","text":"Create a \"tidy question\" script that can be used to rename Inputs, PRTs and/or Nodes everywhere in a question. Add CASText-enabled ALT tags to the automatically generated images. For example, adding a final, optional, string argument to the \"plot\" command that the system uses as the ALT text of the image. That way, we can say the function that the graph is of. New option for how inverse trig functions are displayed. A script to run question tests in bulk. Add a new answer test to deal with decimal places. STACK questions with no inputs, and/or no PRTs now work properly.","title":"Other improvements"},{"location":"Developer/Development_history/#bug-fixes","text":"Fix instant validation for text-area inputs. With \"Check the type of the response\" set to \"Yes\", if an expression is given and an equation is entered, the error generated is: \"Your answer is an equation, but the expression to which it is being compared is not. You may have typed something like \"y=2 x+1\" when you only needed to type \"2 x+1\".\" This might confuse students. They don't know what \" the expression to which it is being compared\" is! Perhaps this warning could be reworded something like: \"You have entered an equation, but an equation is not expected here. You may have typed something like \"y=2 x+1\" when you only needed to type \"2 x+1\".\" We should have more messages for each type of failed situation.... Alt tags in images generated by plots has changed. The default value now includes a string representation of the function plotted. See plots for more details. Assorted other accessibility fixes. Standard PRT feedback options are now processed as CAS text. There was a bug where clearing the CAS cache broke images in the question text. Now fixed.","title":"Bug fixes"},{"location":"Developer/Development_history/#version-30","text":"Released January 2013. This has been tested successfully for two semesters, with groups of up to 250 university students and a variety of topics. Major re-engineering of the code by the Open University, The University of Birmingham and the University of Helsinki. Documentation added by Ben Holmes. The most important change is the decision to re-work STACK as a question type for the Moodle quiz. There is no longer a separate front end for STACK, or (currently) a mechanism to include STACK questions into other websites via a SOAP webservice. This round of development does not plan to introduce major new features, or to make major changes to the core functionality. An explicit aim is that \"old questions will still work\". Key features Major difference: Integration into the quiz of Moodle 2.3 as a question type. Support for Maxima up to 5.28.0. Documentation moved from the wiki to within the code base. Move from CVS to GIT.","title":"Version 3.0"},{"location":"Developer/Development_history/#changes-in-features-between-stack-2-and-stack-3","text":"Key-val pairs, i.e. Question variables and feedback variables, now use Maxima's assignment syntax, e.g. n:5 not the oldstyle n=5 . The importer automatically converts old questions to this new style. Interaction elements, now called inputs, are indicated in questions as [[input:ans1]] to match the existing style in Moodle. Existing questions will be converted when imported. A number of other terminology changes have brought STACK's use into line with Moodle's, e.g. Worked solution has changed to \"general feedback\". Change in the internal name of one answer test Equal_Com_ASS changed to EqualComASS . Feature \"allowed words\" dropped from inputs (i.e. interaction elements). JSMath is no longer under development, and hence we are no longer providing an option for this in STACK. However, in STACK 2 we modified JSMath to enable inputs within equations. Display now assumes the use of a Moodle filter and we recommend (and test with) MathJax, which does not currently support this feature. If it is important for you to use this feature you will need to copy and modify the load.js file from STACK 2 and use JSMath. Worked solution on demand feature has been removed. This was a hack in STACK 2, and the use of Moodle quiz has made this unnecessary. Some options are no longer needed. This functionality is now handled by the \"behaviours\", so are unnecessary in STACK 3. The \"Feedback used\". The \"Mark modification\". We have lost some of the nice styling on the editing form, compared to Stack 2. Answer tests no longer return a numerical mark, hence the \"+AT\" option for mark modification method has been dropped. The STACK Maxima function filter has been removed. It should be replaced by the internal Maxima function sublist . Note, the order of the arguments is reversed! STACK can now work with either MathJax, the Moodle TeX filter, or the OU's maths rendering filter. The Maxima libraries powers and format have been removed. We now strongly discourage the use of dollar symbols for denoting LaTeX mathematics environments. See the pages on MathJax for more information on this change. The expressions supplied by the question author as question tests are no longer simplified at all. See the entry on question tests .","title":"Changes in features between STACK 2 and STACK 3."},{"location":"Developer/Development_history/#full-development-log","text":"","title":"Full development log"},{"location":"Developer/Development_history/#milestone-0","text":"Get STACK in Moodle to connect to Maxima, and clean-up CAS code. Moodle-style settings page for STACK's options. Re-implement caschat script in Moodle. Re-implement healthcheck script in Moodle. Make all the answer-tests work in Moodle. Make the answer-tests self-test script work in Moodle. Make all the input elements work in Moodle. Make the input elements self-test script work in Moodle. Add all the docs files within the Moodle question type. Clean up the PRT code, and make it work within Moodle. Code to generate the standard test- n question definitions within Moodle, to help with unit testing. Basic Moodle question type that ties all the components together in a basically working form.","title":"Milestone 0"},{"location":"Developer/Development_history/#milestone-1","text":"Caching of Maxima results, for performance reasons. Database tables to store all aspects of the question definitions. Question editing form that can handle multi-input and multi-PRT questions, with validation. Re-implement question tests in Moodle. Except that the test input need to be evaluated expressions, not just strings. Get deploying, and a fixed number of variants working in Moodle. Make multi-part STACK questions work exactly right in Adaptive behaviour. Evaluate some PRTs if possible, even if not all inputs have been filled in. Correct computation of penalty for each PRT, and hence overall final grade. Problem with expressions in feedback CAS-text not being simplified.","title":"Milestone 1"},{"location":"Developer/Development_history/#milestone-2","text":"Make sure that STACK questions work as well as possible in the standard Moodle reports. Implement the Moodle backup/restore code for stack questions. Implement Moodle XML format import and export. Investigate ways of running Maxima on a separate server. Implement random seed control like for varnumeric. At this point STACK will be \"ready\" for use with students, although not all features will be available.","title":"Milestone 2"},{"location":"Developer/Development_history/#milestone-3","text":"Finish STACK 2 importer: ensure all fields are imported correctly by the question importer. Make STACK respect all Moodle behaviours. Deferred feedback Interactive Deferred feedback with CBM Immediate feedback Immediate feedback with CBM - no unit tests, but if the others work, this one must. Add sample_questions, and update question banks for STACK 3.0. Improve the way questions are deployed. Only deploy new variants. Editing form: a way to remove a given PRT node. Fix bug: penalties and other fields being changed from NULL to 0 when being stored in the database. Add back Matrix input type. In adaptive mode, display the scoring information for each PRT when it has been evaluated. Once completed we are ready for the Beta release!","title":"Milestone 3"},{"location":"Developer/Development_history/#beta-testing-period","text":"Do lots of testing, report and fix bugs. Eliminate as many TODOs from the code as possible. Add back other translations from STACK 2.0, preserving as many of the existing strings as possible. NOTE: the new format of the language strings containing parameters. In particular, strings {$a[0]} need to be changed to {$a->m0}, etc. Add back all questions from the diagnostic quiz project as further examples. Deploy many variants at once.","title":"Beta testing period"},{"location":"Developer/Development_history/#editing-form","text":"Form validation should reject a PRT where Node x next -> Node x. Actually, it should validate that we have a connected DAG. Add back the help for editing PRT nodes. When validating the editing form, actually evaluate the Maxima code. When validating the editing form, ensure there are no @ and $ in the fields that expect Maxima code. Ensure links from the editing form end up at the STACK docs. This is now work in progress, but relies on http://tracker.moodle.org/browse/MDL-34035 getting accepted into Moodle core. In which case we can use this commit: https://github.com/timhunt/moodle-qtype_stack/compare/helplinks. Hide dropdown input type in the editing form until there is a way to set the list of choices.","title":"Editing form"},{"location":"Developer/Development_history/#testing-questions","text":"DOES NOT HAPPEN ANY MORE With a question like test-3, if all the inputs were valid, and then you change the value for some inputs, the corresponding PRTs output the 'Standard feedback for incorrect' when showing the new inputs for the purpose of validation. Images added to prt node true or false feedback do not get displayed. There is a missing call to format_text. A button on the create test-case form, to fill in the expected results to automatically make a passing test-case. Singlechar input should validate that the input is a single char. (There is a TODO in the code for this.) Dropdown input should make sure that only allowed values are submitted. (There is a TODO in the code for this.) Dropdown input element needs some unit tests. (There is a TODO in the code for this.) We need to check for and handle CAS errors in get_prt_result and grade_parts_that_can_be_graded. (There is a TODO in the code for this.) Un-comment the throw in the matrix input. Unit tests for adaptive mode score display - and to verify nothing like that appears for other behaviours. Duplicate response detection for PRTs should consider all previous responses. It appears as if the phrase \"This submission attracted a penalty of ...\" isn't working. It looks like this is the old penalty, not the current . PRT node feedback was briefly not being treated as CAS text. Improve editing UI for test-cases https://github.com/maths/moodle-qtype_stack/issues/15","title":"Testing questions"},{"location":"Developer/Development_history/#optimising-maxima","text":"Since I have optimized Maxima, I removed write permissions to /moodledata/stack/maximalocal.mac. This makes the healthcheck script unrunnable, and hence I cannot clear the STACK cache. Finish off the system for running Maxima on another server (https://github.com/maths/moodle-qtype_stack/pull/8)","title":"Optimising Maxima"},{"location":"Developer/Development_history/#documentation-system","text":"fix maintenance.php .","title":"Documentation system"},{"location":"Developer/Development_history/#version-22","text":"Released: October 2010 session. Enhanced reporting features. Enhanced question management features in Moodle. E.g. import multiple questions from AiM/Maple TA at once, assign multiple questions to Moodle question banks. Slider interaction elements.","title":"Version 2.2"},{"location":"Developer/Development_history/#version-21","text":"Developed by Chris Sangwin and Simon Hammond at the University of Birmingham. Released: Easter 2010 session. Key features Precision answer test added to allow significant to be checked. Form answer test added to test if an expression is in completed square form. List interaction element expanded to include checkboxes. See List . Move to Maxima's random() function, rather than generate our own pseudo random numbers Conditionals in CASText Support for Maxima 5.20.1 New option added: OptWorkedSol. This allows the teacher to decide whether the tick box to request the worked solution is available. Sample resources included as part of the FETLAR project.","title":"Version 2.1"},{"location":"Developer/Development_history/#version-20","text":"Released, September 2007. Developed by Jonathan Hart and Chris Sangwin at the University of Birmingham. Key features Display of mathematics taken care of by JSMath. Integrated into the Moodle quiz using the \"remote question protocol\" . The RQP was designed with STACK, and similar systems, in mind. Variety of interaction elements. Multi-part questions. Cache. Item tests.","title":"Version 2.0"},{"location":"Developer/Development_history/#version-10","text":"Released, 2005. Developed by Chris Sangwin at the University of Birmingham.","title":"Version 1.0"},{"location":"Developer/Development_history/#pre-history","text":"STACK is a direct development of the CABLE project which ran at the University of Birmingham. CABLE was a development of the design of the AiM computer aided assessment system.","title":"Pre-history"},{"location":"Developer/Development_track/","text":"Development track for STACK Requests for features and ideas for developing STACK are all recorded in Future plans . The past development history is documented on Development history . Version 4.4.6 TODO: Support for PHP 8.2. See issue #986. Fix markdown problems. See issue #420. Error messages: use caserror.class more fully to use user information to target error messages. Remove all \"cte\" code from Maxima - mostly install. For \"inputs 2\"? Better CSS, including \"tool tips\". May need to refactor JavaScript. (See issue #380) Add support for matrices with floating point entries, and testing numerical accuracy. Expand support for input validation options to matrices (e.g. floatnum, rationalize etc.) Update MCQ to accept units. Add a base N check to the numeric input. Refactor DB of 'insterStars' and remove stack_input_factory::convert_legacy_insert_stars. Really use new values throughout. See Future plans for syntax of answers and STACK Other Better install code (see #332). Move find_units_synonyms into the parser more fully? 1st version of API. Enable individual questions to load Maxima libraries. (See issue #305) Markdown support?","title":"Development track for STACK"},{"location":"Developer/Development_track/#development-track-for-stack","text":"Requests for features and ideas for developing STACK are all recorded in Future plans . The past development history is documented on Development history .","title":"Development track for STACK"},{"location":"Developer/Development_track/#version-446","text":"TODO: Support for PHP 8.2. See issue #986. Fix markdown problems. See issue #420. Error messages: use caserror.class more fully to use user information to target error messages. Remove all \"cte\" code from Maxima - mostly install.","title":"Version 4.4.6"},{"location":"Developer/Development_track/#for-inputs-2","text":"Better CSS, including \"tool tips\". May need to refactor JavaScript. (See issue #380) Add support for matrices with floating point entries, and testing numerical accuracy. Expand support for input validation options to matrices (e.g. floatnum, rationalize etc.) Update MCQ to accept units. Add a base N check to the numeric input. Refactor DB of 'insterStars' and remove stack_input_factory::convert_legacy_insert_stars. Really use new values throughout. See Future plans for syntax of answers and STACK","title":"For \"inputs 2\"?"},{"location":"Developer/Development_track/#other","text":"Better install code (see #332). Move find_units_synonyms into the parser more fully? 1st version of API. Enable individual questions to load Maxima libraries. (See issue #305) Markdown support?","title":"Other"},{"location":"Developer/Documentation/","text":"STACK User Documentation User documentation is written in an extended implementation of the markup language MarkDown . This page is intended for people wishing to write, edit and translate the documentation. Markdown language The markdown project external site. A cheat sheet is available for quick reference. Warning: markdown uses whitespace and formatting to give meaning. The number of spaces at the beginning and the ends of lines convey specific meaning in markdown. An example is the way code blocks are included, which is useful for including fragments of Maxima code. STACK's markdown documentation system STACK stores all documentation within language subdirectories. For example, English is within /doc/en/ . The directory structure forms the structure of the documentation. Files must use the .md extension. Links to files must use the .md extension. File and directory names should be safe for urls and will be used as the document's title. Spaces can be encoded as underscore _ , e.g. Question state caching should be named Question_state_caching.md When accessing a directory, the file index.md in that directory will be displayed, hence this file should be created for new directories. Note index.md will never be displayed in a directory listing, it can be accessed by navigating to the directory itself. Directories may be nested. A directory listing will be appended to the site map when rendered. Metadata about the files is stored in meta_en.json . Every page should have metadata. How relative links work in STACK's documentation Note Links in the documentation are relative. You can use the following standard notation, for: a document in the current directory simply use the filename e.g. [Link to Article](Article.md) the current directory use ./ e.g. ./Article.md refers to Article in this directory ./#reference refers to the index of the current directory scrolled to the heading with id reference the parent directory use ../ e.g. ../ refers to the docs homepage (if currently only one tier deep) ../Category/Article.md refers to Article.md in the Category in the parent directory. Conventions in authoring pages Markdown does not have categories in the way that MediaWiki does. Instead, we strongly encourage authors to include a # See also section at the end of each STACK documentation page. This should be part of the markdown page. Adding images and files to the documentation The directory /doc/content/ is for static content which is served by the documentation. If you want to serve content from the docs please place it in this directory. When writing links use direct relative links to $CFG->wwwroot . \"/question/type/stack/doc/content\"; E.g. in About/Logo.md use ![STACK Logo](../../content/logo.png) The text in square brackets is the alt text, which is important for visually impaired users reading the documentation. There are many great guides for writing good alt text . Adding a link to video in the documentation To embed video into the documentation first find the unique video key, VIDEO-KEY , then then modify [![IMAGE ALT TEXT](http://img.youtube.com/vi/VIDEO-KEY/0.jpg)](https://www.youtube.com/watch?v=VIDEO-KEY \"Video title\") For example, cpwo-D6EUgA , gives [![IMAGE ALT TEXT](http://img.youtube.com/vi/cpwo-D6EUgA/0.jpg)](https://www.youtube.com/watch?v=cpwo-D6EUgA \"Your First STACK Question\") The following rendered markdown: Embed video in the documentation Using an iframe such as <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/cpwo-D6EUgA\" frameborder=\"0\" allowfullscreen></iframe> Gives Mathematics For the purpose of rendering mathematical equations, an extended version of PHP Markdown Extra is used. It uses LaTeX style notation \\( and \\[ to write inline and display maths respectively. Fortunately GitHub documentation uses the same notation :D. An example: \\[ \\frac{\\int_a^b f(t) \\textrm{d} t }{b - a} \\] [ \\frac{\\int_a^b f(t) \\textrm{d} t}{b - a} ] Compatibility with the online docs {#Website} The STACK docs are made available online on docs.stack-assessment.org . For more information on how this is achieved, see the Website documentation . However this places certain limitations on the sort of elements that can be included in the documentation: You can only have relative links to files within the doc directory. This means you should not link relatively to, for example, one of the stack .php files. If you want to demonstrate a behaviour of one of STACKs files, it is better to do a direct link to that file on GitHub or on the STACK demo. You cannot use HTML text areas to display LaTeX Math, as that will display poorly. Please use multiline code blocks instead. Examples {#Examples} Paragraphs and formatting Paragraphs are made with two new line characters, a single new line will not be rendered: This is in a paragraph, so is this This is a new paragraph This is a **bold** word and this is an *italicised* word. This is in a paragraph, so is this This is a new paragraph This is a bold word and this is an italicised word. Headings Headings are indicated by the # symbol # Huge ## Quite huge ### Not so huge #### Barely huge Huge Quite huge Not so huge Barely huge Lists Ordered (numbered) and unordered lists are very intuitive, and nesting is easy 1. first point 2. second point, which is so long it needs two lines 3. third point will demonstrate nesting 1. Nested 2. Lists * Unordered lists made my stars * You can nest with different styles 1. See? first point second point, which is so long it needs two lines third point will demonstrate nesting Nested Lists Unordered lists made my stars You can nest with different styles See? Code (monospace) Code can be displayed inline using back ticks `content` to display content . Code can be displayed in a block by indenting: Block style code Will display Block style code Links Links are written [text](Documentation.md) to give text . They must end with the .md extension. External links are easily generated using <http://sesamestreet.com> gives http://sesamestreet.com , email address work similarly <count@sesamestreet.com> gives count@sesamestreet.com . Other cool features Definition lists : Are one of the many cool features available They are useful for : Dictionary style entries Definition lists : Are one of the many cool features available They are useful for : Dictionary style entries To force block style code write ~~~~ above and below, good for after a list when indentation will be interpreted as part of the list ~~~~~~~~~~ Like this ~~~~~~~~~~ > When quoting the syntax is like in emails. When quoting the syntax is like in emails. Tables | are also ------------ | -------- an extremely | useful feature | ! Tables are also an extremely useful feature ! See also MarkDown PHP Markdown Extra PHP Markdown Extra Math","title":"STACK User Documentation"},{"location":"Developer/Documentation/#stack-user-documentation","text":"User documentation is written in an extended implementation of the markup language MarkDown . This page is intended for people wishing to write, edit and translate the documentation.","title":"STACK User Documentation"},{"location":"Developer/Documentation/#markdown-language","text":"The markdown project external site. A cheat sheet is available for quick reference. Warning: markdown uses whitespace and formatting to give meaning. The number of spaces at the beginning and the ends of lines convey specific meaning in markdown. An example is the way code blocks are included, which is useful for including fragments of Maxima code.","title":"Markdown language"},{"location":"Developer/Documentation/#stacks-markdown-documentation-system","text":"STACK stores all documentation within language subdirectories. For example, English is within /doc/en/ . The directory structure forms the structure of the documentation. Files must use the .md extension. Links to files must use the .md extension. File and directory names should be safe for urls and will be used as the document's title. Spaces can be encoded as underscore _ , e.g. Question state caching should be named Question_state_caching.md When accessing a directory, the file index.md in that directory will be displayed, hence this file should be created for new directories. Note index.md will never be displayed in a directory listing, it can be accessed by navigating to the directory itself. Directories may be nested. A directory listing will be appended to the site map when rendered. Metadata about the files is stored in meta_en.json . Every page should have metadata.","title":"STACK's markdown documentation system"},{"location":"Developer/Documentation/#how-relative-links-work-in-stacks-documentation","text":"Note Links in the documentation are relative. You can use the following standard notation, for: a document in the current directory simply use the filename e.g. [Link to Article](Article.md) the current directory use ./ e.g. ./Article.md refers to Article in this directory ./#reference refers to the index of the current directory scrolled to the heading with id reference the parent directory use ../ e.g. ../ refers to the docs homepage (if currently only one tier deep) ../Category/Article.md refers to Article.md in the Category in the parent directory.","title":"How relative links work in STACK's documentation"},{"location":"Developer/Documentation/#conventions-in-authoring-pages","text":"Markdown does not have categories in the way that MediaWiki does. Instead, we strongly encourage authors to include a # See also section at the end of each STACK documentation page. This should be part of the markdown page.","title":"Conventions in authoring pages"},{"location":"Developer/Documentation/#adding-images-and-files-to-the-documentation","text":"The directory /doc/content/ is for static content which is served by the documentation. If you want to serve content from the docs please place it in this directory. When writing links use direct relative links to $CFG->wwwroot . \"/question/type/stack/doc/content\"; E.g. in About/Logo.md use ![STACK Logo](../../content/logo.png) The text in square brackets is the alt text, which is important for visually impaired users reading the documentation. There are many great guides for writing good alt text .","title":"Adding images and files to the documentation"},{"location":"Developer/Documentation/#adding-a-link-to-video-in-the-documentation","text":"To embed video into the documentation first find the unique video key, VIDEO-KEY , then then modify [![IMAGE ALT TEXT](http://img.youtube.com/vi/VIDEO-KEY/0.jpg)](https://www.youtube.com/watch?v=VIDEO-KEY \"Video title\") For example, cpwo-D6EUgA , gives [![IMAGE ALT TEXT](http://img.youtube.com/vi/cpwo-D6EUgA/0.jpg)](https://www.youtube.com/watch?v=cpwo-D6EUgA \"Your First STACK Question\") The following rendered markdown:","title":"Adding a link to video in the documentation"},{"location":"Developer/Documentation/#embed-video-in-the-documentation","text":"Using an iframe such as <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/cpwo-D6EUgA\" frameborder=\"0\" allowfullscreen></iframe> Gives","title":"Embed video in the documentation"},{"location":"Developer/Documentation/#mathematics","text":"For the purpose of rendering mathematical equations, an extended version of PHP Markdown Extra is used. It uses LaTeX style notation \\( and \\[ to write inline and display maths respectively. Fortunately GitHub documentation uses the same notation :D. An example: \\[ \\frac{\\int_a^b f(t) \\textrm{d} t }{b - a} \\] [ \\frac{\\int_a^b f(t) \\textrm{d} t}{b - a} ]","title":"Mathematics"},{"location":"Developer/Documentation/#compatibility-with-the-online-docs-website","text":"The STACK docs are made available online on docs.stack-assessment.org . For more information on how this is achieved, see the Website documentation . However this places certain limitations on the sort of elements that can be included in the documentation: You can only have relative links to files within the doc directory. This means you should not link relatively to, for example, one of the stack .php files. If you want to demonstrate a behaviour of one of STACKs files, it is better to do a direct link to that file on GitHub or on the STACK demo. You cannot use HTML text areas to display LaTeX Math, as that will display poorly. Please use multiline code blocks instead.","title":"Compatibility with the online docs {#Website}"},{"location":"Developer/Documentation/#examples-examples","text":"","title":"Examples {#Examples}"},{"location":"Developer/Documentation/#paragraphs-and-formatting","text":"Paragraphs are made with two new line characters, a single new line will not be rendered: This is in a paragraph, so is this This is a new paragraph This is a **bold** word and this is an *italicised* word. This is in a paragraph, so is this This is a new paragraph This is a bold word and this is an italicised word.","title":"Paragraphs and formatting"},{"location":"Developer/Documentation/#headings","text":"Headings are indicated by the # symbol # Huge ## Quite huge ### Not so huge #### Barely huge","title":"Headings"},{"location":"Developer/Documentation/#huge","text":"","title":"Huge"},{"location":"Developer/Documentation/#quite-huge","text":"","title":"Quite huge"},{"location":"Developer/Documentation/#not-so-huge","text":"","title":"Not so huge"},{"location":"Developer/Documentation/#barely-huge","text":"","title":"Barely huge"},{"location":"Developer/Documentation/#lists","text":"Ordered (numbered) and unordered lists are very intuitive, and nesting is easy 1. first point 2. second point, which is so long it needs two lines 3. third point will demonstrate nesting 1. Nested 2. Lists * Unordered lists made my stars * You can nest with different styles 1. See? first point second point, which is so long it needs two lines third point will demonstrate nesting Nested Lists Unordered lists made my stars You can nest with different styles See?","title":"Lists"},{"location":"Developer/Documentation/#code-monospace","text":"Code can be displayed inline using back ticks `content` to display content . Code can be displayed in a block by indenting: Block style code Will display Block style code","title":"Code (monospace)"},{"location":"Developer/Documentation/#links","text":"Links are written [text](Documentation.md) to give text . They must end with the .md extension. External links are easily generated using <http://sesamestreet.com> gives http://sesamestreet.com , email address work similarly <count@sesamestreet.com> gives count@sesamestreet.com .","title":"Links"},{"location":"Developer/Documentation/#other-cool-features","text":"Definition lists : Are one of the many cool features available They are useful for : Dictionary style entries Definition lists : Are one of the many cool features available They are useful for : Dictionary style entries To force block style code write ~~~~ above and below, good for after a list when indentation will be interpreted as part of the list ~~~~~~~~~~ Like this ~~~~~~~~~~ > When quoting the syntax is like in emails. When quoting the syntax is like in emails. Tables | are also ------------ | -------- an extremely | useful feature | ! Tables are also an extremely useful feature !","title":"Other cool features"},{"location":"Developer/Documentation/#see-also","text":"MarkDown PHP Markdown Extra PHP Markdown Extra Math","title":"See also"},{"location":"Developer/Future_input_processing/","text":"Description of one possible future input processing pipeline In the recent (documentation)[../Authoring/Syntax.md] there has been described how input processing starts to have too many options to fit the original \"insert stars\" model and how things could be expanded in the short term as we now are getting an overhaul of the casstring processing in the form of Maxima-statement parsing in 4.3. This is however something that should be thought of in larger scale and this document present one way of trying to deal with the complexity of the whole issue. The problem Various inputs have various rules about what kind of input is being expected. The rules vary from forbidding floats and requiring the responses type to match the type of the teacher's answer, to actually fixing the input syntax in the form of insertion of missing stars and conversion of spaces to stars. In addition to this some inputs may even declare additional syntax e.g. the way the line by line reasoning works. There are also some complex CAS-evaluation based requirements that some inputs may ask for like representing the answer in lowest terms when working with fractions. Those are the kinds of things inputs declare for student input processing and most of those are not trivial and have interactions with certain other features we have in our validation chain. The CAS-statement processing pipeline also includes some amount of syntactic candy in the form logarithms of various bases being representted in complex ways from the statements, for example log_x+y(z) => lg(z, x+y) . In addition to that kind of syntax expansions there also exists various rules that check for typical errors like sin^2(x) which will need to be dealt in the correct place of the processing pipeline, typically before input level insert stars rules get applied. That latter example will break down quite badly if someone applies a rule that splits all multiletter variable names to multiplications of single letter names, before we identify that sin in this case is actually a badly written function-call that needs to be specially pointted out to the student. The current pre 4.3 situation is complex because most of such rules are mixed in various processing steps and much of the logic that the inputs themselves should handle is actually built into the complex casstring-class making it difficult to easily separate features and/or place new features into the mix. One way of looking at the casstring processing For teacher/code sourced casstrings the logic is relatively simple: Direct parsing of the statement without any corrective pre-processing. Generates an AST style representation of the statement. That AST will be piped through syntactic candy filtters to allow use of various features like the logarithm logic. In the end that AST will be explored for security issues. For the pipeline of student sourced things is more complex: The parsing will go through a corrective parser that tries to add missing stars into places where they would make the input syntactically valid. In addition to this the parsing may apply additional syntax specific to the input type. Those inserted stars will be tagged in the resulting AST. Syntactic candy filters will be applied to the AST. Early phase feature detection will be applied to the AST, without modification of the AST, sin^2(x) detection and similar pattern matching. This detection may lead to processing marking a whole subtree of the AST as invalid so that insert stars of other remaining steps do not modify it further. Additional star insertion, based on the input's preferences, will be applied to the AST. Again added stars will be tagged in the AST. common variable/constant identification xpi => x*pi common function identification xsin(x) => x*sin(x) elimination of all or just undefined function calls sqrt(x) => sqrt*(x) and sqrt(f(x)) => sqrt(f*(x)) splitting of multi char variables xy => x*y and x1 => x*1 with protection of known identifiers pialpha => pi*alpha as opposed to pi*alpha => p*i*a*l*p*h*a splitting by number/letter boundaries x1y => x1*y float splitting 0.2e-3 => 0.2*e*-3 if wished Syntactic validity check, if the input requires that all the stars are correct this step will check that the are no tagged added stars in the AST nor any invalid subtrees for that matter. Is such exist error messages will be generated and they will mark those stars. Security check. If fails things stop here. Note that part of the security check rules are based on options to the input and part to the the whole question. Simple feature checks, things that the input may require and that can be easily checked from the AST: if floats are forbidden then the AST should have none. if we have some form of type constraint then the AST should fit it. if significant figures or decimal places matter they should be checked from the AST. Complex feature checks, things like lowest terms need to be sent to CAS to be checked only after these (if they exist) have been checked can we say wether the input is valid. These checks should not be tied to the AST they should happen using it but through separate CAS-statements One way to look at this is that inputs should have means of doing much of the low level parsing themselves, and there must be ways of them to select ready made AST-filters to be added to the process. The other point from this is that casstrings should not do parsing themselves they should just receive ready ASTs and the parsing and insert stars logic are not part of validation of the casstring the only validation the casstring does is the validation of security, insert stars and other tricks are part of input validation. In some sense this makes casstrings just the containers of the AST and probably the results of its evaluation, it however makes sense for those containers to contain the most important bit of all i.e. the security checking. It also makes sense to use the casstring object as a wrapper of the AST and the store of the error messages, which leads to the conclusion that casstrings get created from the results of step 2 in those processes and need to have interfaces into which various AST filtters get pushed into to update the AST before the final validation. It also makes sense to collect step 8 related statements from multiple inputs together for validation and that those statements also include whatever is needed to represent the validity to the student. Likewise step 7 probably bases its behaviour on the teachers answer or other parameters of the input and should also be collected from multiple inputs for single pass validation. Class structure Based on the presented we need the following classes with at least the following methods, stack_cas_cassecurity is the very same it is in 4.3: class stack_cas_casstring { /** * Executes an AST filter on the AST defining this casstring. */ public function filter_ast(stack_cas_astfilter $filter) {} /** * Validation is now based only on the security settings and the current AST. */ public function validate(string $security_level, stack_cas_cassecurity $rules): bool {} } class stack_cas_astfilter { /** * Does whatever it needs to the AST and may append to the errors or notes * might receive stack_cas_casstring directly, but better to keep these * separate. */ public function filter(MP_Node $ast, array &$errors, array &$answernotes): MP_Node {} } The idea here is that once the code is in this form whenever one wants to build syntactic candy or error checks one builds a new stack_cas_astfilter and if it is something central it will probably go to step 2 of the processing otherwise it will be a part of the student input pipeline and under the control of inputs. In any case one can write tests for it separate from everything else, but one will need to also define its place in the processing order and test the whole chain as some other filter might appear in that chain and eat up the things. To keep the order in order I would recommend that the files containing filter code are prefixed with something like '012_' and that we leave plenty of empty room if at all possible in that range, for future filters to be plugged into the sequence. Ideally, those numbers should also be present in the classnames, but obviously not as prefixes there.","title":"Description of one possible future input processing pipeline"},{"location":"Developer/Future_input_processing/#description-of-one-possible-future-input-processing-pipeline","text":"In the recent (documentation)[../Authoring/Syntax.md] there has been described how input processing starts to have too many options to fit the original \"insert stars\" model and how things could be expanded in the short term as we now are getting an overhaul of the casstring processing in the form of Maxima-statement parsing in 4.3. This is however something that should be thought of in larger scale and this document present one way of trying to deal with the complexity of the whole issue.","title":"Description of one possible future input processing pipeline"},{"location":"Developer/Future_input_processing/#the-problem","text":"Various inputs have various rules about what kind of input is being expected. The rules vary from forbidding floats and requiring the responses type to match the type of the teacher's answer, to actually fixing the input syntax in the form of insertion of missing stars and conversion of spaces to stars. In addition to this some inputs may even declare additional syntax e.g. the way the line by line reasoning works. There are also some complex CAS-evaluation based requirements that some inputs may ask for like representing the answer in lowest terms when working with fractions. Those are the kinds of things inputs declare for student input processing and most of those are not trivial and have interactions with certain other features we have in our validation chain. The CAS-statement processing pipeline also includes some amount of syntactic candy in the form logarithms of various bases being representted in complex ways from the statements, for example log_x+y(z) => lg(z, x+y) . In addition to that kind of syntax expansions there also exists various rules that check for typical errors like sin^2(x) which will need to be dealt in the correct place of the processing pipeline, typically before input level insert stars rules get applied. That latter example will break down quite badly if someone applies a rule that splits all multiletter variable names to multiplications of single letter names, before we identify that sin in this case is actually a badly written function-call that needs to be specially pointted out to the student. The current pre 4.3 situation is complex because most of such rules are mixed in various processing steps and much of the logic that the inputs themselves should handle is actually built into the complex casstring-class making it difficult to easily separate features and/or place new features into the mix.","title":"The problem"},{"location":"Developer/Future_input_processing/#one-way-of-looking-at-the-casstring-processing","text":"For teacher/code sourced casstrings the logic is relatively simple: Direct parsing of the statement without any corrective pre-processing. Generates an AST style representation of the statement. That AST will be piped through syntactic candy filtters to allow use of various features like the logarithm logic. In the end that AST will be explored for security issues. For the pipeline of student sourced things is more complex: The parsing will go through a corrective parser that tries to add missing stars into places where they would make the input syntactically valid. In addition to this the parsing may apply additional syntax specific to the input type. Those inserted stars will be tagged in the resulting AST. Syntactic candy filters will be applied to the AST. Early phase feature detection will be applied to the AST, without modification of the AST, sin^2(x) detection and similar pattern matching. This detection may lead to processing marking a whole subtree of the AST as invalid so that insert stars of other remaining steps do not modify it further. Additional star insertion, based on the input's preferences, will be applied to the AST. Again added stars will be tagged in the AST. common variable/constant identification xpi => x*pi common function identification xsin(x) => x*sin(x) elimination of all or just undefined function calls sqrt(x) => sqrt*(x) and sqrt(f(x)) => sqrt(f*(x)) splitting of multi char variables xy => x*y and x1 => x*1 with protection of known identifiers pialpha => pi*alpha as opposed to pi*alpha => p*i*a*l*p*h*a splitting by number/letter boundaries x1y => x1*y float splitting 0.2e-3 => 0.2*e*-3 if wished Syntactic validity check, if the input requires that all the stars are correct this step will check that the are no tagged added stars in the AST nor any invalid subtrees for that matter. Is such exist error messages will be generated and they will mark those stars. Security check. If fails things stop here. Note that part of the security check rules are based on options to the input and part to the the whole question. Simple feature checks, things that the input may require and that can be easily checked from the AST: if floats are forbidden then the AST should have none. if we have some form of type constraint then the AST should fit it. if significant figures or decimal places matter they should be checked from the AST. Complex feature checks, things like lowest terms need to be sent to CAS to be checked only after these (if they exist) have been checked can we say wether the input is valid. These checks should not be tied to the AST they should happen using it but through separate CAS-statements One way to look at this is that inputs should have means of doing much of the low level parsing themselves, and there must be ways of them to select ready made AST-filters to be added to the process. The other point from this is that casstrings should not do parsing themselves they should just receive ready ASTs and the parsing and insert stars logic are not part of validation of the casstring the only validation the casstring does is the validation of security, insert stars and other tricks are part of input validation. In some sense this makes casstrings just the containers of the AST and probably the results of its evaluation, it however makes sense for those containers to contain the most important bit of all i.e. the security checking. It also makes sense to use the casstring object as a wrapper of the AST and the store of the error messages, which leads to the conclusion that casstrings get created from the results of step 2 in those processes and need to have interfaces into which various AST filtters get pushed into to update the AST before the final validation. It also makes sense to collect step 8 related statements from multiple inputs together for validation and that those statements also include whatever is needed to represent the validity to the student. Likewise step 7 probably bases its behaviour on the teachers answer or other parameters of the input and should also be collected from multiple inputs for single pass validation.","title":"One way of looking at the casstring processing"},{"location":"Developer/Future_input_processing/#class-structure","text":"Based on the presented we need the following classes with at least the following methods, stack_cas_cassecurity is the very same it is in 4.3: class stack_cas_casstring { /** * Executes an AST filter on the AST defining this casstring. */ public function filter_ast(stack_cas_astfilter $filter) {} /** * Validation is now based only on the security settings and the current AST. */ public function validate(string $security_level, stack_cas_cassecurity $rules): bool {} } class stack_cas_astfilter { /** * Does whatever it needs to the AST and may append to the errors or notes * might receive stack_cas_casstring directly, but better to keep these * separate. */ public function filter(MP_Node $ast, array &$errors, array &$answernotes): MP_Node {} } The idea here is that once the code is in this form whenever one wants to build syntactic candy or error checks one builds a new stack_cas_astfilter and if it is something central it will probably go to step 2 of the processing otherwise it will be a part of the student input pipeline and under the control of inputs. In any case one can write tests for it separate from everything else, but one will need to also define its place in the processing order and test the whole chain as some other filter might appear in that chain and eat up the things. To keep the order in order I would recommend that the files containing filter code are prefixed with something like '012_' and that we leave plenty of empty room if at all possible in that range, for future filters to be plugged into the sequence. Ideally, those numbers should also be present in the classnames, but obviously not as prefixes there.","title":"Class structure"},{"location":"Developer/Future_plans/","text":"Future plans Note, where the feature is listed as \"(done)\" means we have prototype code in the testing phase. Features to add for STACK 4.5 or later Units inputs Conversion from Celsius to Kelvin? What units to choose for degrees Celsius which don't conflict with Coulomb? Support for United States customary units? (Parser can do this) Add an option to validation to require compatible units with the teacher's answer, not just some units. Create a mechanism to distinguish between m/s and m*s^-1 , both at validation and answer test levels. Create a mechanism to distinguish between m/s/s and m/s^2 , both at validation and answer test levels. Add support for testing for error bounds in units. E.g. 9.81+-0.01m/s^2 . There is already CAS code for this, and the error bounds are an optional 3rd argument to stackunits . This is currently only used to reject students' answers as invalid. Inputs Add new input types DragMath (actually, probably use JavaScript from NUMBAS instead here, or the MathDox editor). Sliders - do this via JSXGraph. It is very useful to be able to embed input elements in equations, and this was working in STACK 2.0. However is it possible with MathJax or other Moodle maths filters? This might offer one option: http://stackoverflow.com/questions/23818478/html-input-field-within-a-mathjax-tex-equation In the MCQ input type: Add choose N (correct) from M feature (used at Aalto). A new MCQ input type with a \"none of these\" option which uses JavaScript to degrade to an algebraic input: https://community.articulate.com/articles/how-to-use-an-other-please-specify-answer-option (Parser can do this) Add an option for \"no functions\" which will always insert stars and transform \"x(\" -> \"x*(\" even when x occurs as both a function and a variable. Make the syntax hint CAS text, to depend on the question variables. Improve the editing form A button to remove a given PRT or input, without having to guess that the way to do it is to delete the placeholders from the question text. A button to add a new PRT or input, without having to guess that the way to do it is to add the placeholders to the question text. A button to save the current definition and continue editing. This would be a Moodle core change. See https://tracker.moodle.org/browse/MDL-33653. Add functionality to add a \"warning\" to the castext class. Warnings should not prevent execution of the code but will stop editing. Other ideas Document ways of using JSXGraph http://jsxgraph.org for better support of graphics. Better options for automatically generated plots. (Aalto use of tikzpicture?) (Draw package?) 3D Graphics. Can we use: https://threejs.org/ Expand support for context variables, so variables and other functions will be considered as context variables as well. This will expand the utility of texput . Implement \"Banker's rounding\" option which applies over a whole question, and for all answer tests. (Parser can do this) Implement \"CommaError\" checking for CAS strings. Make comma an option for the decimal separator. (Parser can do this) Implement \"BracketError\" option for inputs. This allows the student's answer to have only those types of parentheses which occur in the teacher's answer. Types are ( , [ and { . So, if a teacher's answer doesn't have any { then a student's answer with any { or } will be invalid. It would be very useful to have finer control over the validation feedback. For example, if we have a polynomial with answer boxes for the coefficients, then we should be able to echo back \"Your last answer was...\" with the whole polynomial, not just the numbers. Decimal separator, both input and output. Check CAS/maxima literature on -inf=minf. add in support for pdf_binomial, in particular add in these test cases to studentinput_test.php . array('pdf_binomial(n,m,p)', 'php_true', 'pdf_binomial(n,m,p)', 'cas_true', '{{m}\\choose{n}}\\cdot p^{n}\\cdot {\\left(1-p\\right)}^{m-n}', '', \"\"), array('pdf_binomial(2,6,0.07)', 'php_true', 'pdf_binomial(6,2,0.07)', 'cas_true', '{{6}\\choose{2}}\\cdot 0.07^{2}\\cdot {\\left(1-0.07\\right)}^{6-2}', '', \"\"), (Done in Stateful) Introduce a variable so the maxima code \"knows the attempt number\". [Note to self: check how this changes reporting]. This is now being done with the \"state\" code in the abacus branch. Answer tests Answer tests should be like inputs. We should return an answer test object, not a controller object. at->get_at_mark() really ought to be at->matches(), since that is how it is used. Features that might be attempted in the future - possible self-contained projects Read other file formats into STACK. In particular AIM WeBWorK, including the Open Problem Library: http://webwork.maa.org/wiki/Open_Problem_Library Maple T.A. (underway: see https://github.com/maths/moodle-qformat_mapleta) WIRIS Possible Maxima packages: Better support for rational expressions, in particular really firm up the PartFrac and SingleFrac functions with better support. Auto deploy. E.g. if the first variable in the question variables is a single a:rand(n), then loop a=0..(n-1). When validating the editing form, also evaluate the Maxima code in the PRTs, using the teacher's model answers. \"Reveal block\" The functionality we want to develop is a block in which the contents is revealed or hidden by JavaScript, depending on the value of a separate input. [[ reveal input=\"ans1\" value=\"true\" ]] This will be shown if the value of \"ans1\" is true. [[ else if value=\"false\" ]] [[ else ]] This will be shown otherwise. (optional) Perhaps? [[/ reveal ]] This implements a JavaScript listener on input \"ans1\", which reveals or hides the appropriate content. These blocks can be nested. Inputs can be inside reveal blocks (that is sort of the whole point!). This works well with the new EMPTYANSWER functionality, allowing an input to expect not to be used in a correct response. What do we do about values of inputs inside the block, when the reveal condition fails and the block is hidden. Is this deleted with warning, or retained? (Option to block?) Only implement for true/false, or MCQ inputs to start with. What do we do about two reveal blocks listening to the same input? On page load, we need the JS to \"do the right thing\", i.e. interrogate each input and hide/reveal the content. An example question is included as samplequestions/reveal_block_example.xml In this example, we have only revealed the first level, which should be linked to ans1. If this functionality were available and nested then we would add an MCQ checkbox input within the second reveal block, which is linked to reveal further inputs. Improvements to the \"equiv\" input type Improve spacing of comments, e.g. \\intertext{...}? Auto identify what the student has done in a particular step. Model solutions. Follow a \"model solution\", and give feedback based on the steps used. E.g. identify where in the students' solution a student deviates from the model solution. Develop a metric to measure the distance between expressions. Use this as a measure of \"step size\" when working with expressions. Add mathematical support in the following order. Logarithms and simple logarithmic equations. Allow students to create and use functions of their own (currently forbidden). Add a \"Not equals\" operator. For example: infix(\"<>\"); p:x<>y; texput(\"<>\",\"{\\neq}\", infix); tex(p); STACK custom reports Basic reports now work. Really ensure \"attempts\" list those with meaningful histories. I.e. if possible filter out navigation to and from the page etc. Add better maxima support functions for off-line analysis. Suggestions from STACK Professionals Network, 9th Dec 2022 Text based potential response trees (would allow for easier copying of complicated trees, etc). Changes to preset feedback to certain answer tests which might be more appropriate for different audiences. Could a 'simplified' English language pack allow for this (future changes might allow this to be done on a question-by-question basis). Check for potential issues with default correct/incorrect feedback for different languages (defaults can already be set on the server level by a Moodle administrator). Metadata on language for questions. Tools for languge integrity (e.g. making it easier to identify what languages are in each question). Making sure Maxima knows the intended language (will allow for Maxima code to choose from the available languages). May want to have further discussions on how scores and penalties are handled (there is already a new feature in the latest version of STACK so that you can include functions in the \"score\" field. DONE: Compile some more detailed release notes for new version containing common issues with questions. MathJax sometimes stops rendering -- this is usually an issue with the html in the question text or something being added to the editor, but sometimes this is an intermittent issue, but this is probably not directly a STACK issue. Accessing Moodle via an LTI connection sometimes prompts students on Macs and old PCs to login with a password (which they don't have) when they click on a quiz. This isn't a direct STACK issue, but it would be a good idea to raise this on Moodle support forums. DONE: Improve the question tests page (now \"STACK question dashboard\") -- make sure most useful features are highlighted. For example, make it more clear when a specific variant is being considered, and when all variants are being looked at. After an individual variant is undeployed, it still shows test information for this seed on the page, requiring a few extra clicks to switch to a different seed (though that makes it easier to restore that seed if you accidently undeploy it). Forcing editor choice to prevent errors caused by editors which add in html tags (make sure it is clear to users why we do this). Consider prioritising the STACK API? Documentation on this definately needs to be improved. Volunteers are probably needed to help out on this. We should probably have a discussion for which individual questions are best to promote STACK. Good to document know-how and communicate this to avoid problems on updates, and to generate new suggestions. New folders can be added in doc/en -- small suggestions can go straight into master, more complete changes should be discussed with the group.","title":"Future plans"},{"location":"Developer/Future_plans/#future-plans","text":"Note, where the feature is listed as \"(done)\" means we have prototype code in the testing phase.","title":"Future plans"},{"location":"Developer/Future_plans/#features-to-add-for-stack-45-or-later","text":"","title":"Features to add for STACK 4.5 or later"},{"location":"Developer/Future_plans/#units-inputs","text":"Conversion from Celsius to Kelvin? What units to choose for degrees Celsius which don't conflict with Coulomb? Support for United States customary units? (Parser can do this) Add an option to validation to require compatible units with the teacher's answer, not just some units. Create a mechanism to distinguish between m/s and m*s^-1 , both at validation and answer test levels. Create a mechanism to distinguish between m/s/s and m/s^2 , both at validation and answer test levels. Add support for testing for error bounds in units. E.g. 9.81+-0.01m/s^2 . There is already CAS code for this, and the error bounds are an optional 3rd argument to stackunits . This is currently only used to reject students' answers as invalid.","title":"Units inputs"},{"location":"Developer/Future_plans/#inputs","text":"Add new input types DragMath (actually, probably use JavaScript from NUMBAS instead here, or the MathDox editor). Sliders - do this via JSXGraph. It is very useful to be able to embed input elements in equations, and this was working in STACK 2.0. However is it possible with MathJax or other Moodle maths filters? This might offer one option: http://stackoverflow.com/questions/23818478/html-input-field-within-a-mathjax-tex-equation In the MCQ input type: Add choose N (correct) from M feature (used at Aalto). A new MCQ input type with a \"none of these\" option which uses JavaScript to degrade to an algebraic input: https://community.articulate.com/articles/how-to-use-an-other-please-specify-answer-option (Parser can do this) Add an option for \"no functions\" which will always insert stars and transform \"x(\" -> \"x*(\" even when x occurs as both a function and a variable. Make the syntax hint CAS text, to depend on the question variables.","title":"Inputs"},{"location":"Developer/Future_plans/#improve-the-editing-form","text":"A button to remove a given PRT or input, without having to guess that the way to do it is to delete the placeholders from the question text. A button to add a new PRT or input, without having to guess that the way to do it is to add the placeholders to the question text. A button to save the current definition and continue editing. This would be a Moodle core change. See https://tracker.moodle.org/browse/MDL-33653. Add functionality to add a \"warning\" to the castext class. Warnings should not prevent execution of the code but will stop editing.","title":"Improve the editing form"},{"location":"Developer/Future_plans/#other-ideas","text":"Document ways of using JSXGraph http://jsxgraph.org for better support of graphics. Better options for automatically generated plots. (Aalto use of tikzpicture?) (Draw package?) 3D Graphics. Can we use: https://threejs.org/ Expand support for context variables, so variables and other functions will be considered as context variables as well. This will expand the utility of texput . Implement \"Banker's rounding\" option which applies over a whole question, and for all answer tests. (Parser can do this) Implement \"CommaError\" checking for CAS strings. Make comma an option for the decimal separator. (Parser can do this) Implement \"BracketError\" option for inputs. This allows the student's answer to have only those types of parentheses which occur in the teacher's answer. Types are ( , [ and { . So, if a teacher's answer doesn't have any { then a student's answer with any { or } will be invalid. It would be very useful to have finer control over the validation feedback. For example, if we have a polynomial with answer boxes for the coefficients, then we should be able to echo back \"Your last answer was...\" with the whole polynomial, not just the numbers. Decimal separator, both input and output. Check CAS/maxima literature on -inf=minf. add in support for pdf_binomial, in particular add in these test cases to studentinput_test.php . array('pdf_binomial(n,m,p)', 'php_true', 'pdf_binomial(n,m,p)', 'cas_true', '{{m}\\choose{n}}\\cdot p^{n}\\cdot {\\left(1-p\\right)}^{m-n}', '', \"\"), array('pdf_binomial(2,6,0.07)', 'php_true', 'pdf_binomial(6,2,0.07)', 'cas_true', '{{6}\\choose{2}}\\cdot 0.07^{2}\\cdot {\\left(1-0.07\\right)}^{6-2}', '', \"\"), (Done in Stateful) Introduce a variable so the maxima code \"knows the attempt number\". [Note to self: check how this changes reporting]. This is now being done with the \"state\" code in the abacus branch.","title":"Other ideas"},{"location":"Developer/Future_plans/#answer-tests","text":"Answer tests should be like inputs. We should return an answer test object, not a controller object. at->get_at_mark() really ought to be at->matches(), since that is how it is used.","title":"Answer tests"},{"location":"Developer/Future_plans/#features-that-might-be-attempted-in-the-future-possible-self-contained-projects","text":"Read other file formats into STACK. In particular AIM WeBWorK, including the Open Problem Library: http://webwork.maa.org/wiki/Open_Problem_Library Maple T.A. (underway: see https://github.com/maths/moodle-qformat_mapleta) WIRIS Possible Maxima packages: Better support for rational expressions, in particular really firm up the PartFrac and SingleFrac functions with better support. Auto deploy. E.g. if the first variable in the question variables is a single a:rand(n), then loop a=0..(n-1). When validating the editing form, also evaluate the Maxima code in the PRTs, using the teacher's model answers.","title":"Features that might be attempted in the future - possible self-contained projects"},{"location":"Developer/Future_plans/#reveal-block","text":"The functionality we want to develop is a block in which the contents is revealed or hidden by JavaScript, depending on the value of a separate input. [[ reveal input=\"ans1\" value=\"true\" ]] This will be shown if the value of \"ans1\" is true. [[ else if value=\"false\" ]] [[ else ]] This will be shown otherwise. (optional) Perhaps? [[/ reveal ]] This implements a JavaScript listener on input \"ans1\", which reveals or hides the appropriate content. These blocks can be nested. Inputs can be inside reveal blocks (that is sort of the whole point!). This works well with the new EMPTYANSWER functionality, allowing an input to expect not to be used in a correct response. What do we do about values of inputs inside the block, when the reveal condition fails and the block is hidden. Is this deleted with warning, or retained? (Option to block?) Only implement for true/false, or MCQ inputs to start with. What do we do about two reveal blocks listening to the same input? On page load, we need the JS to \"do the right thing\", i.e. interrogate each input and hide/reveal the content. An example question is included as samplequestions/reveal_block_example.xml In this example, we have only revealed the first level, which should be linked to ans1. If this functionality were available and nested then we would add an MCQ checkbox input within the second reveal block, which is linked to reveal further inputs.","title":"\"Reveal block\""},{"location":"Developer/Future_plans/#improvements-to-the-equiv-input-type","text":"Improve spacing of comments, e.g. \\intertext{...}? Auto identify what the student has done in a particular step. Model solutions. Follow a \"model solution\", and give feedback based on the steps used. E.g. identify where in the students' solution a student deviates from the model solution. Develop a metric to measure the distance between expressions. Use this as a measure of \"step size\" when working with expressions. Add mathematical support in the following order. Logarithms and simple logarithmic equations. Allow students to create and use functions of their own (currently forbidden). Add a \"Not equals\" operator. For example: infix(\"<>\"); p:x<>y; texput(\"<>\",\"{\\neq}\", infix); tex(p);","title":"Improvements to the \"equiv\" input type"},{"location":"Developer/Future_plans/#stack-custom-reports","text":"Basic reports now work. Really ensure \"attempts\" list those with meaningful histories. I.e. if possible filter out navigation to and from the page etc. Add better maxima support functions for off-line analysis.","title":"STACK custom reports"},{"location":"Developer/Future_plans/#suggestions-from-stack-professionals-network-9th-dec-2022","text":"Text based potential response trees (would allow for easier copying of complicated trees, etc). Changes to preset feedback to certain answer tests which might be more appropriate for different audiences. Could a 'simplified' English language pack allow for this (future changes might allow this to be done on a question-by-question basis). Check for potential issues with default correct/incorrect feedback for different languages (defaults can already be set on the server level by a Moodle administrator). Metadata on language for questions. Tools for languge integrity (e.g. making it easier to identify what languages are in each question). Making sure Maxima knows the intended language (will allow for Maxima code to choose from the available languages). May want to have further discussions on how scores and penalties are handled (there is already a new feature in the latest version of STACK so that you can include functions in the \"score\" field. DONE: Compile some more detailed release notes for new version containing common issues with questions. MathJax sometimes stops rendering -- this is usually an issue with the html in the question text or something being added to the editor, but sometimes this is an intermittent issue, but this is probably not directly a STACK issue. Accessing Moodle via an LTI connection sometimes prompts students on Macs and old PCs to login with a password (which they don't have) when they click on a quiz. This isn't a direct STACK issue, but it would be a good idea to raise this on Moodle support forums. DONE: Improve the question tests page (now \"STACK question dashboard\") -- make sure most useful features are highlighted. For example, make it more clear when a specific variant is being considered, and when all variants are being looked at. After an individual variant is undeployed, it still shows test information for this seed on the page, requiring a few extra clicks to switch to a different seed (though that makes it easier to restore that seed if you accidently undeploy it). Forcing editor choice to prevent errors caused by editors which add in html tags (make sure it is clear to users why we do this). Consider prioritising the STACK API? Documentation on this definately needs to be improved. Volunteers are probably needed to help out on this. We should probably have a discussion for which individual questions are best to promote STACK. Good to document know-how and communicate this to avoid problems on updates, and to generate new suggestions. New folders can be added in doc/en -- small suggestions can go straight into master, more complete changes should be discussed with the group.","title":"Suggestions from STACK Professionals Network, 9th Dec 2022"},{"location":"Developer/Language_packs/","text":"Translation of the STACK Project Translation of questions This page will deal with translations of the STACK interface. Individual question text can also be translated. See this page in the multi-language question authoring section. STACK 4 is released and being used with the following languages STACK is designed to support the straightforward addition of other language packs. If you have translated STACK into other languages - or would be interested in doing so - please let us know . As of May 2023, substantial translations exist for the following languages. Afrikaans [af] Arabic [ar] Catalan [ca] Chinese (simplified) [zh_cn] Dansk [da] Dutch [nl] Estonian [et] English [en] Finnish [fi] French [fr] Galego [gl] German [de] Greek [el] Hebrew [he] Italian [it] Japanese [ja] Polish [pl] Portuguese - Brazil [pt_br] Romanian [ro] Romanian for workplace [ro_wp] Silesian [szl] Slovak [sk] Slovenian [sl] Spanish (international) [es] Spanish - Mexico [es_mx] Swedish [sv] Swedish - Finland [sv_fi] Details of some colleagues who translated STACK are given under credits . If you need these languages please contact the developers for more details of the status of this work. Installing a language pack To allow users of your server to see interface in a certain language, the language pack has to be installed on your server. In Moodle, to install a language pack on your server, goo to Site adminstration , Language , Language pakcs . Here you can see a list of installed language packs, as well as a list of available languages. This is a list of all translations of Moodle, but note only some of them correspond to translations of STACK as well (see list above). To install a language pack, click on it and click Install selected language pack . Once a language pack is installed, a user can change the preferred language for Moodle and STACK by clicking on their profile, and then going to Preferences , Preferred language and selecting the language. How to translate STACK STACK is part of Moodle. Hence, we have used the Moodle translation management system. Please check if STACK has already been translated into your language. We are using Moodle's AMOS system to do this. ALL strings which appear to the user should be found in the single file You need to translate the strings for the Components qtype_stack , qbehaviour_adaptivemultipart , qbehaviour_dfcbmexplicitvaildate , qbehaviour_dfexplicitvaildate and qformat_stack . It is convenient to translate the strings online. To translate STACK into another language please use Moodle's AMOS system. See Moodle online documentation for specific details. Apologies to those people who have translated STACK through AMOS, but who do not appear in the credits . Please contact Chris Sangwin to add your name. Finding language packs for an API setup Create a new full Moodle server and install the language pack you want. Look on your server in $CFG->langlocalroot.'/'.$lang; Find the file \"qtype_stack.php\". This contains all the language strings. Further reading Applying a language pack will change the language on the Moodle and STACK interface. It will not change question text unless this has been translated by the question author. For information on writing multilingual question text, see the page on multilingual question authoring in authoring section.","title":"Translation of the STACK Project"},{"location":"Developer/Language_packs/#translation-of-the-stack-project","text":"","title":"Translation of the STACK Project"},{"location":"Developer/Language_packs/#translation-of-questions","text":"This page will deal with translations of the STACK interface. Individual question text can also be translated. See this page in the multi-language question authoring section.","title":"Translation of questions"},{"location":"Developer/Language_packs/#stack-4-is-released-and-being-used-with-the-following-languages","text":"STACK is designed to support the straightforward addition of other language packs. If you have translated STACK into other languages - or would be interested in doing so - please let us know . As of May 2023, substantial translations exist for the following languages. Afrikaans [af] Arabic [ar] Catalan [ca] Chinese (simplified) [zh_cn] Dansk [da] Dutch [nl] Estonian [et] English [en] Finnish [fi] French [fr] Galego [gl] German [de] Greek [el] Hebrew [he] Italian [it] Japanese [ja] Polish [pl] Portuguese - Brazil [pt_br] Romanian [ro] Romanian for workplace [ro_wp] Silesian [szl] Slovak [sk] Slovenian [sl] Spanish (international) [es] Spanish - Mexico [es_mx] Swedish [sv] Swedish - Finland [sv_fi] Details of some colleagues who translated STACK are given under credits . If you need these languages please contact the developers for more details of the status of this work.","title":"STACK 4 is released and being used with the following languages"},{"location":"Developer/Language_packs/#installing-a-language-pack","text":"To allow users of your server to see interface in a certain language, the language pack has to be installed on your server. In Moodle, to install a language pack on your server, goo to Site adminstration , Language , Language pakcs . Here you can see a list of installed language packs, as well as a list of available languages. This is a list of all translations of Moodle, but note only some of them correspond to translations of STACK as well (see list above). To install a language pack, click on it and click Install selected language pack . Once a language pack is installed, a user can change the preferred language for Moodle and STACK by clicking on their profile, and then going to Preferences , Preferred language and selecting the language.","title":"Installing a language pack"},{"location":"Developer/Language_packs/#how-to-translate-stack","text":"STACK is part of Moodle. Hence, we have used the Moodle translation management system. Please check if STACK has already been translated into your language. We are using Moodle's AMOS system to do this. ALL strings which appear to the user should be found in the single file You need to translate the strings for the Components qtype_stack , qbehaviour_adaptivemultipart , qbehaviour_dfcbmexplicitvaildate , qbehaviour_dfexplicitvaildate and qformat_stack . It is convenient to translate the strings online. To translate STACK into another language please use Moodle's AMOS system. See Moodle online documentation for specific details. Apologies to those people who have translated STACK through AMOS, but who do not appear in the credits . Please contact Chris Sangwin to add your name.","title":"How to translate STACK"},{"location":"Developer/Language_packs/#finding-language-packs-for-an-api-setup","text":"Create a new full Moodle server and install the language pack you want. Look on your server in $CFG->langlocalroot.'/'.$lang; Find the file \"qtype_stack.php\". This contains all the language strings.","title":"Finding language packs for an API setup"},{"location":"Developer/Language_packs/#further-reading","text":"Applying a language pack will change the language on the Moodle and STACK interface. It will not change question text unless this has been translated by the question author. For information on writing multilingual question text, see the page on multilingual question authoring in authoring section.","title":"Further reading"},{"location":"Developer/Local_Usage/","text":"Local Usage There are a number of reporting options which are built-in and supported. To use the features on this page requires moodle admin permission. It is often useful to know numbers about STACK usage on your local server. To do this we need to work in the Moodle database. E.g. How many STACK questions were initialised for students during the last time interval? How many attempts those students made to those question during that time on average? Which courses had most attempts and which courses had the most STACK questions in use? Question bank status by course, how many questions were in use, which questions have not been used for a long time? Quiz/activity usage, i.e. in what context are the questions being used and for example how many questions are present in a quiz by average? Duplicate questions, how many copies of the same questions are present in the question banks? Do get this kind of data you will need the custom sql report . The number of questions that students have interacted with That is the number of questions that students have interacted with. SELECT COUNT(1) FROM {question_attempts} qa JOIN {question} q ON q.id = qa.questionid JOIN {quiz_attempts} quiza ON quiza.uniqueid = qa.questionusageid WHERE quiza.preview = 0 AND q.qtype = 'stack' AND qa.timemodified BETWEEN %%STARTTIME%% AND %%ENDTIME%% And, here is a query that does number of questions attempted (ever) by course SELECT c.shortname AS Website, COUNT(1) AS Number_of_STACK_questions_attempted FROM {question_attempts} qa JOIN {question} q ON q.id = qa.questionid JOIN {quiz_attempts} quiza ON quiza.uniqueid = qa.questionusageid JOIN {quiz} quiz ON quiz.id = quiza.quiz JOIN {course} c ON c.id = quiz.course WHERE q.qtype = 'stack' AND quiza.preview = 0 GROUP BY c.shortname ORDER BY COUNT(1) DESC, c.shortname Moodle has a built-in report that will count the number of questions of any type in the question bank (report/questioninstances) but I think this is a less useful statistic. Closing date of quizzes which use STACK Another useful report, which we use for planning the time of upgrades, is this one, which lists the close date of quizzes uses STACK (including ones that use STACK questions via Moodle's 'Random question' feature: SELECT DISTINCT c.shortname AS Website, quiz.name AS iCMA, quiz.timeopen AS Open_date, quiz.timeclose AS Close_date FROM {quiz} quiz JOIN {course} c ON c.id = quiz.course WHERE to_timestamp(quiz.timeclose) > 'now'::timestamp - '1 month'::interval AND EXISTS ( SELECT 1 FROM {quiz_slots} slot JOIN {question} q ON q.id = slot.questionid WHERE slot.quizid = quiz.id AND ( q.qtype = 'stack' OR q.qtype = 'random' AND EXISTS ( SELECT 1 FROM {question_categories} qc JOIN {question} rq ON rq.category = qc.id WHERE qc.id = q.category AND rq.qtype = 'stack' ) ) ) ORDER BY Close_date, Website, iCMA List all the people who have created STACK questions in your site One final query, which lists all the people who have created STACK questions in your site (useful if you need to email them about something: SELECT u.firstname, u.lastname, u.username, u.email, number_created, number_modified FROM ( SELECT COALESCE(createdby, modifiedby) AS userid, COALESCE(number_created, 0) AS number_created, COALESCE(number_modified, 0) AS number_modified FROM ( SELECT createdby, COUNT(1) AS number_created FROM {question} WHERE qtype = 'stack' GROUP BY createdby ) qscreated FULL JOIN ( SELECT modifiedby, COUNT(1) AS number_modified FROM {question} WHERE qtype = 'stack' GROUP BY modifiedby ) qsmodified ON createdby = modifiedby ) comined_counts JOIN {user} u ON u.id = userid ORDER BY number_created DESC, number_modified DESC Further queries These queries were last updated in April 2020 (and are not actively maintained as a core part of STACK). Please contribute related queries to the developers.","title":"Local Usage"},{"location":"Developer/Local_Usage/#local-usage","text":"There are a number of reporting options which are built-in and supported. To use the features on this page requires moodle admin permission. It is often useful to know numbers about STACK usage on your local server. To do this we need to work in the Moodle database. E.g. How many STACK questions were initialised for students during the last time interval? How many attempts those students made to those question during that time on average? Which courses had most attempts and which courses had the most STACK questions in use? Question bank status by course, how many questions were in use, which questions have not been used for a long time? Quiz/activity usage, i.e. in what context are the questions being used and for example how many questions are present in a quiz by average? Duplicate questions, how many copies of the same questions are present in the question banks? Do get this kind of data you will need the custom sql report .","title":"Local Usage"},{"location":"Developer/Local_Usage/#the-number-of-questions-that-students-have-interacted-with","text":"That is the number of questions that students have interacted with. SELECT COUNT(1) FROM {question_attempts} qa JOIN {question} q ON q.id = qa.questionid JOIN {quiz_attempts} quiza ON quiza.uniqueid = qa.questionusageid WHERE quiza.preview = 0 AND q.qtype = 'stack' AND qa.timemodified BETWEEN %%STARTTIME%% AND %%ENDTIME%% And, here is a query that does number of questions attempted (ever) by course SELECT c.shortname AS Website, COUNT(1) AS Number_of_STACK_questions_attempted FROM {question_attempts} qa JOIN {question} q ON q.id = qa.questionid JOIN {quiz_attempts} quiza ON quiza.uniqueid = qa.questionusageid JOIN {quiz} quiz ON quiz.id = quiza.quiz JOIN {course} c ON c.id = quiz.course WHERE q.qtype = 'stack' AND quiza.preview = 0 GROUP BY c.shortname ORDER BY COUNT(1) DESC, c.shortname Moodle has a built-in report that will count the number of questions of any type in the question bank (report/questioninstances) but I think this is a less useful statistic.","title":"The number of questions that students have interacted with"},{"location":"Developer/Local_Usage/#closing-date-of-quizzes-which-use-stack","text":"Another useful report, which we use for planning the time of upgrades, is this one, which lists the close date of quizzes uses STACK (including ones that use STACK questions via Moodle's 'Random question' feature: SELECT DISTINCT c.shortname AS Website, quiz.name AS iCMA, quiz.timeopen AS Open_date, quiz.timeclose AS Close_date FROM {quiz} quiz JOIN {course} c ON c.id = quiz.course WHERE to_timestamp(quiz.timeclose) > 'now'::timestamp - '1 month'::interval AND EXISTS ( SELECT 1 FROM {quiz_slots} slot JOIN {question} q ON q.id = slot.questionid WHERE slot.quizid = quiz.id AND ( q.qtype = 'stack' OR q.qtype = 'random' AND EXISTS ( SELECT 1 FROM {question_categories} qc JOIN {question} rq ON rq.category = qc.id WHERE qc.id = q.category AND rq.qtype = 'stack' ) ) ) ORDER BY Close_date, Website, iCMA","title":"Closing date of quizzes which use STACK"},{"location":"Developer/Local_Usage/#list-all-the-people-who-have-created-stack-questions-in-your-site","text":"One final query, which lists all the people who have created STACK questions in your site (useful if you need to email them about something: SELECT u.firstname, u.lastname, u.username, u.email, number_created, number_modified FROM ( SELECT COALESCE(createdby, modifiedby) AS userid, COALESCE(number_created, 0) AS number_created, COALESCE(number_modified, 0) AS number_modified FROM ( SELECT createdby, COUNT(1) AS number_created FROM {question} WHERE qtype = 'stack' GROUP BY createdby ) qscreated FULL JOIN ( SELECT modifiedby, COUNT(1) AS number_modified FROM {question} WHERE qtype = 'stack' GROUP BY modifiedby ) qsmodified ON createdby = modifiedby ) comined_counts JOIN {user} u ON u.id = userid ORDER BY number_created DESC, number_modified DESC","title":"List all the people who have created STACK questions in your site"},{"location":"Developer/Local_Usage/#further-queries","text":"These queries were last updated in April 2020 (and are not actively maintained as a core part of STACK). Please contribute related queries to the developers.","title":"Further queries"},{"location":"Developer/Maxima_packages/","text":"Adding support for Maxima packages Local code, or links to local libraries, can be placed in maxima\\local.mac . Maxima has a very wide range of optional packages. Some of these write to the server file system, and so we do not permit question authors to load arbitrary packages into Maxima. Instead the developers maintain a \"whitelist\" of packages. There is currently no support for a question by question loading of packages. This may be included in the future, subject to demand/need. Currently there is a site-wide option to load packages. Adding in support for additional Maxima packages needs to be done by a developer on the server. The list of supported packages is defined stack/cas/installhelper.class.php in the setting public static $maximalibraries = '...'; The default settings are defined in qtype_stack | maximalibraries It is probably sensible to make the default to load all the available packages, so new installations can see what is supported. Just because the package is loaded into Maxima does not mean that STACK users will be permitted to use the function names in questions. STACK only allows student users to input a certain restricted list of commands. STACK allows teachers to use a much wider list of commands, and to define functions of their own. However unless a function has been checked, it is likely the teacher will not be permitted to use this. We periodically work through all the function names in all maxima packages and add these to the variable security-map.json . Some notes. The developers welcome proposals for support of packages. Mostly we haven't needed them ourselves, and so didn't add them yet! Where individual functions are needed, it is sometimes better just to always load the package anyway rather than adding it as a site-wide option. One historic reason for having site-wide options was to ensure back compatibility with older versions of Maxima. Some packages do make Maxima significantly slower to load and run. We will check this before allowing a particular package. (This is a good reason to allow question to load packages of course...) Beware of new global variables, changes/side effects in other functions. Maxima graph theory package For use with STACK, Maxima needs to connect to the web server (PHP scripts) and this is actually done by passing text files back and forward. So every expression to the CAS, and every result back, must have a simple string format. Some of the contributed packages, including the very nice graph theory package, have developed their own internal representation for mathematical objects. For example, gf_set_data(2,x^4+x+1); returns \"Structure [GF-DATA]\" As of Nov 2020, the STACK developers have not investigated what a \"Structure [GF-DATA]\" is or how that could be communicated between PHP and Maxima! By way of contrast a simple polynomial x^4+x+1 has an internal (LISP) tree structure of ((MPLUS SIMP) 1 $X ((MEXPT SIMP) $X 4)) which you can read this as ((+) 1 x ((^) x 4) We must have some kind of string like that to communicate and STACK basically uses the Maxima string command to do this. It is very likely that without re-writing the internals of the graph theory package it is not compatible with the way we connect to Maxima.","title":"Adding support for Maxima packages"},{"location":"Developer/Maxima_packages/#adding-support-for-maxima-packages","text":"Local code, or links to local libraries, can be placed in maxima\\local.mac . Maxima has a very wide range of optional packages. Some of these write to the server file system, and so we do not permit question authors to load arbitrary packages into Maxima. Instead the developers maintain a \"whitelist\" of packages. There is currently no support for a question by question loading of packages. This may be included in the future, subject to demand/need. Currently there is a site-wide option to load packages. Adding in support for additional Maxima packages needs to be done by a developer on the server. The list of supported packages is defined stack/cas/installhelper.class.php in the setting public static $maximalibraries = '...'; The default settings are defined in qtype_stack | maximalibraries It is probably sensible to make the default to load all the available packages, so new installations can see what is supported. Just because the package is loaded into Maxima does not mean that STACK users will be permitted to use the function names in questions. STACK only allows student users to input a certain restricted list of commands. STACK allows teachers to use a much wider list of commands, and to define functions of their own. However unless a function has been checked, it is likely the teacher will not be permitted to use this. We periodically work through all the function names in all maxima packages and add these to the variable security-map.json . Some notes. The developers welcome proposals for support of packages. Mostly we haven't needed them ourselves, and so didn't add them yet! Where individual functions are needed, it is sometimes better just to always load the package anyway rather than adding it as a site-wide option. One historic reason for having site-wide options was to ensure back compatibility with older versions of Maxima. Some packages do make Maxima significantly slower to load and run. We will check this before allowing a particular package. (This is a good reason to allow question to load packages of course...) Beware of new global variables, changes/side effects in other functions.","title":"Adding support for Maxima packages"},{"location":"Developer/Maxima_packages/#maxima-graph-theory-package","text":"For use with STACK, Maxima needs to connect to the web server (PHP scripts) and this is actually done by passing text files back and forward. So every expression to the CAS, and every result back, must have a simple string format. Some of the contributed packages, including the very nice graph theory package, have developed their own internal representation for mathematical objects. For example, gf_set_data(2,x^4+x+1); returns \"Structure [GF-DATA]\" As of Nov 2020, the STACK developers have not investigated what a \"Structure [GF-DATA]\" is or how that could be communicated between PHP and Maxima! By way of contrast a simple polynomial x^4+x+1 has an internal (LISP) tree structure of ((MPLUS SIMP) 1 $X ((MEXPT SIMP) $X 4)) which you can read this as ((+) 1 x ((^) x 4) We must have some kind of string like that to communicate and STACK basically uses the Maxima string command to do this. It is very likely that without re-writing the internals of the graph theory package it is not compatible with the way we connect to Maxima.","title":"Maxima graph theory package"},{"location":"Developer/PHP-CAS/","text":"PHP interface with the CAS This document describes the design of the PHP interface to the CAS. This interface was developed specifically to connect STACK to Maxima. High level objects CAS text CAS text is literally \"computer algebra active text\". This is documented here . Note, that when constructing CAS text it must be able to take a CAS session as an argument to the constructor. In this way we can use lists of variables, such as question variables to provide values. E.g. we might have : n:rand(5)+2; in the question variables field. The question is instantiated, and then later we need to create some CAS text, e.g. feedback, in which we have : You were asked to find the integral of \\((x+2)^{@n@}\\) with respect to \\(x\\). In fact .... Here, we need the CAS text to be able to construct the text, with the previously evaluated value of n . This need is also why the CAS session returns the value of the variables as well as a displayed form. It is used here. CAS session This class actually calls the CAS itself. The basic ideas is to take a list of maxima commands, including assignments of the form. key:rawvalue and executes this list in a single Maxima session. The results of this are then captures and fed back into the CAS strings so we essentially have data in the form: key => value display error An important point here is that expressions (values) can refer to previous keys. This is one reason why we can't tie teachers down to a list of allowed functions. They will be defining variable and function names. We have implemented a lazy approach where the connection to the CAS is only made, and automatically made, when we ask for the values, display form or error terms for a variable. And we don't generate display and value unless they are needed later. E.g. intermediate values do not create LaTeX. Answer tests The answer tests essentially compare two expressions. These may accept an option, e.g. the number of significant figures. Details of the current answer tests are available elsewhere . The result of an answer test should be Boolean outcome, true or false, errors, feedback, note. Other concepts Validity There are a number of reasons why a CAS expression needs to be \"valid\". These are security, stability, error trapping, pedagogic reasons, specific to a particular question. Single call PRTs and simplification As of STACK 4.4 we make a single Maxima call to exectue an entire PRT. This reduces significantly the number of separate calls to maxima, which is a significant efficienty boost for more complex questions. Some answer tests rely on \"unsimplified\" expressions with a \"what you see is what you get\" approach. This example illustrates the issue. The teacher computes the answer to their question, e.g. find (\\int_{0}^{1} {\\frac{{\\left(1-x\\right)}^4\\cdot x^4}{x^2+1}} \\mathrm{d}x), with the Maxima code p1:int(x^4*(1-x)^4/(1+x^2),x,0,1); using simplification (obviously) at the start of the quetion variables, and this simplified expression is used by the PRT. The answer, (\\frac{22}{7}-\\pi), is held internally in \"simplified\" form. The Maxima string output is 22/7-%pi but internally the answer is actually the following ((MPLUS SIMP) ((RAT SIMP) 22 7) ((MTIMES SIMP) -1 $%PI)) You can see the internal tree structure of a Maxima expression with the following code. (simp:true, p1:22/7-%pi, ?print(p1)); Rather than 22/7-%pi the internal structure is really closer to this: rat(22,7)+ (-1*%pi) . On the other hand, a student types in the expression 22/7-%pi and we deal with this without simplification. The internal Maxima expression is now (simp:false, p1:22/7-%pi, ?print(p1)); which gives a different internal structure ((MPLUS) ((MQUOTIENT) 22 7) ((MMINUS) $%PI)) which might best be thought of as 22/7+-(%pi) where - is now a function of a single argument. In this example, the unsimplified MQUOTIENT and simplified RAT SIMP are not particularly problematic. However, the difference between -%pi and -1*%pi is seriouly problematic. Indeed, this kind of distinction is exactly what some answer tests, e.g. EqualComAss and CasEqual , are designed to establish. These tests will not work with a mix of simplified and unsimplified expressions, even if to the user they look completely identical! The solution to this problem is to \"rinse\" away any maxima internal simplification by using the Maxima string function to return the expression to the top level which a user would expect to type. This process corresponds to what happend in older versions of Maxima in which expressions were routinely passed between Maxima and PHP, with the string representation being used. Some expressions (lists, matrices) are passed by reference in Maxima, so even if the teacher's answer is created without simplification in the first instance, when it is evaluated by the answer tests there is a risk of it becoming simplified when it is later compared by an answer test function.","title":"PHP interface with the CAS"},{"location":"Developer/PHP-CAS/#php-interface-with-the-cas","text":"This document describes the design of the PHP interface to the CAS. This interface was developed specifically to connect STACK to Maxima.","title":"PHP interface with the CAS"},{"location":"Developer/PHP-CAS/#high-level-objects","text":"","title":"High level objects"},{"location":"Developer/PHP-CAS/#cas-text","text":"CAS text is literally \"computer algebra active text\". This is documented here . Note, that when constructing CAS text it must be able to take a CAS session as an argument to the constructor. In this way we can use lists of variables, such as question variables to provide values. E.g. we might have : n:rand(5)+2; in the question variables field. The question is instantiated, and then later we need to create some CAS text, e.g. feedback, in which we have : You were asked to find the integral of \\((x+2)^{@n@}\\) with respect to \\(x\\). In fact .... Here, we need the CAS text to be able to construct the text, with the previously evaluated value of n . This need is also why the CAS session returns the value of the variables as well as a displayed form. It is used here.","title":"CAS text"},{"location":"Developer/PHP-CAS/#cas-session","text":"This class actually calls the CAS itself. The basic ideas is to take a list of maxima commands, including assignments of the form. key:rawvalue and executes this list in a single Maxima session. The results of this are then captures and fed back into the CAS strings so we essentially have data in the form: key => value display error An important point here is that expressions (values) can refer to previous keys. This is one reason why we can't tie teachers down to a list of allowed functions. They will be defining variable and function names. We have implemented a lazy approach where the connection to the CAS is only made, and automatically made, when we ask for the values, display form or error terms for a variable. And we don't generate display and value unless they are needed later. E.g. intermediate values do not create LaTeX.","title":"CAS session"},{"location":"Developer/PHP-CAS/#answer-tests","text":"The answer tests essentially compare two expressions. These may accept an option, e.g. the number of significant figures. Details of the current answer tests are available elsewhere . The result of an answer test should be Boolean outcome, true or false, errors, feedback, note.","title":"Answer tests"},{"location":"Developer/PHP-CAS/#other-concepts","text":"","title":"Other concepts"},{"location":"Developer/PHP-CAS/#validity","text":"There are a number of reasons why a CAS expression needs to be \"valid\". These are security, stability, error trapping, pedagogic reasons, specific to a particular question.","title":"Validity"},{"location":"Developer/PHP-CAS/#single-call-prts-and-simplification","text":"As of STACK 4.4 we make a single Maxima call to exectue an entire PRT. This reduces significantly the number of separate calls to maxima, which is a significant efficienty boost for more complex questions. Some answer tests rely on \"unsimplified\" expressions with a \"what you see is what you get\" approach. This example illustrates the issue. The teacher computes the answer to their question, e.g. find (\\int_{0}^{1} {\\frac{{\\left(1-x\\right)}^4\\cdot x^4}{x^2+1}} \\mathrm{d}x), with the Maxima code p1:int(x^4*(1-x)^4/(1+x^2),x,0,1); using simplification (obviously) at the start of the quetion variables, and this simplified expression is used by the PRT. The answer, (\\frac{22}{7}-\\pi), is held internally in \"simplified\" form. The Maxima string output is 22/7-%pi but internally the answer is actually the following ((MPLUS SIMP) ((RAT SIMP) 22 7) ((MTIMES SIMP) -1 $%PI)) You can see the internal tree structure of a Maxima expression with the following code. (simp:true, p1:22/7-%pi, ?print(p1)); Rather than 22/7-%pi the internal structure is really closer to this: rat(22,7)+ (-1*%pi) . On the other hand, a student types in the expression 22/7-%pi and we deal with this without simplification. The internal Maxima expression is now (simp:false, p1:22/7-%pi, ?print(p1)); which gives a different internal structure ((MPLUS) ((MQUOTIENT) 22 7) ((MMINUS) $%PI)) which might best be thought of as 22/7+-(%pi) where - is now a function of a single argument. In this example, the unsimplified MQUOTIENT and simplified RAT SIMP are not particularly problematic. However, the difference between -%pi and -1*%pi is seriouly problematic. Indeed, this kind of distinction is exactly what some answer tests, e.g. EqualComAss and CasEqual , are designed to establish. These tests will not work with a mix of simplified and unsimplified expressions, even if to the user they look completely identical! The solution to this problem is to \"rinse\" away any maxima internal simplification by using the Maxima string function to return the expression to the top level which a user would expect to type. This process corresponds to what happend in older versions of Maxima in which expressions were routinely passed between Maxima and PHP, with the string representation being used. Some expressions (lists, matrices) are passed by reference in Maxima, so even if the teacher's answer is created without simplification in the first instance, when it is evaluated by the answer tests there is a risk of it becoming simplified when it is later compared by an answer test function.","title":"Single call PRTs and simplification"},{"location":"Developer/Parser/","text":"Building the parser Install node We need to use node: apt-get install node npm Inside stack/stack/maximaparser (or anywhere else), and not as root npm install pegjs npm install phpegjs ts-pegjs Compile the parser To compile the parser node gen.js This should return null null null and create new parsers for STACK. Adding rules to the parser Identical changes need to be made in both stack/maximaparser/MP_classes.php stack/maximaparser/autogen/parser-grammar.pegjs Naming parser rules We give each parser rule a name, numbered in the approximate appropriate order in which they need to be applied. 0-10 the mandatory stars for \"f(x)(y) => f(x)*(y)\" and syntactical candy like the logarithms 10-20 rules forbidding certain usages. 20-30 identification of typical syntax mistakes like \"sin^2(x)\". 30-40 rules forbidding certain usages, like calling functions at all. 40-50 various rules adding stars, insert stars in function calls and split variables and whatnot. 60-70 rules forbidding certain usages, e.g. forbid floats. 80-90 logic to check for things that have been done and deciding whether what was done was ok i.e. stars were inserted but not allowed in \"syntax=true\". Debugging the parser rules echo \"\\n\" . $ast->debugPrint($ast->toString() . ' ') . \"\\n\"; while ($ast->callbackRecurse($process, true) !== true) { echo \"\\n\" . $ast->debugPrint($ast->toString() . ' ') . \"\\n\"; } echo \"\\n\" . $ast->debugPrint($ast->toString() . ' ') . \"\\n\"; Nouns There are two separate classes of expressions which need to be protected as \"nouns\". The Maxima Boolean functions do not respect simp:false . So, we have parallel operators such as A nounand B . These should always be used when connecting to Maxima. Evaluation/simplification of Boolean expressions such as true and false is done on the Maxima side. Teachers and students should use and , etc. and these are always translated into an evaluation form. With simp:false we still have evaluation of expressions such as diff(x^3,x) to 3*x^2 . To protect student's answers (\"Your last answer was..\") we have parallel noun forms such as noundiff and nounint . Note, some of these also change the display of expressions. Maxima uses the apostophie to create noun forms, e.g. 'diff(x^3,x) . From STACK 4.3, teachers are able to use this.","title":"Building the parser"},{"location":"Developer/Parser/#building-the-parser","text":"","title":"Building the parser"},{"location":"Developer/Parser/#install-node","text":"We need to use node: apt-get install node npm Inside stack/stack/maximaparser (or anywhere else), and not as root npm install pegjs npm install phpegjs ts-pegjs","title":"Install node"},{"location":"Developer/Parser/#compile-the-parser","text":"To compile the parser node gen.js This should return null null null and create new parsers for STACK.","title":"Compile the parser"},{"location":"Developer/Parser/#adding-rules-to-the-parser","text":"Identical changes need to be made in both stack/maximaparser/MP_classes.php stack/maximaparser/autogen/parser-grammar.pegjs","title":"Adding rules to the parser"},{"location":"Developer/Parser/#naming-parser-rules","text":"We give each parser rule a name, numbered in the approximate appropriate order in which they need to be applied. 0-10 the mandatory stars for \"f(x)(y) => f(x)*(y)\" and syntactical candy like the logarithms 10-20 rules forbidding certain usages. 20-30 identification of typical syntax mistakes like \"sin^2(x)\". 30-40 rules forbidding certain usages, like calling functions at all. 40-50 various rules adding stars, insert stars in function calls and split variables and whatnot. 60-70 rules forbidding certain usages, e.g. forbid floats. 80-90 logic to check for things that have been done and deciding whether what was done was ok i.e. stars were inserted but not allowed in \"syntax=true\".","title":"Naming parser rules"},{"location":"Developer/Parser/#debugging-the-parser-rules","text":"echo \"\\n\" . $ast->debugPrint($ast->toString() . ' ') . \"\\n\"; while ($ast->callbackRecurse($process, true) !== true) { echo \"\\n\" . $ast->debugPrint($ast->toString() . ' ') . \"\\n\"; } echo \"\\n\" . $ast->debugPrint($ast->toString() . ' ') . \"\\n\";","title":"Debugging the parser rules"},{"location":"Developer/Parser/#nouns","text":"There are two separate classes of expressions which need to be protected as \"nouns\". The Maxima Boolean functions do not respect simp:false . So, we have parallel operators such as A nounand B . These should always be used when connecting to Maxima. Evaluation/simplification of Boolean expressions such as true and false is done on the Maxima side. Teachers and students should use and , etc. and these are always translated into an evaluation form. With simp:false we still have evaluation of expressions such as diff(x^3,x) to 3*x^2 . To protect student's answers (\"Your last answer was..\") we have parallel noun forms such as noundiff and nounint . Note, some of these also change the display of expressions. Maxima uses the apostophie to create noun forms, e.g. 'diff(x^3,x) . From STACK 4.3, teachers are able to use this.","title":"Nouns"},{"location":"Developer/Question_state_caching/","text":"Question state caching The current cache is very close indeed to the CAS. Indeed, it is actually calls to the CAS itself which are cached. This gives a dramatic increase in performance when the result already exists. We recommend using the cache on a production server. Note, the cache needs to be cleared manually, perhaps on an annual cycle. The cache is automatically cleared if you upgrade the plugin. Clearing the cache This can be done through Moodle. Navigate to Home > Site administration > Plugins > Question types > STACK Choose to view the healthcheck page. At the bottom of this is a button to clear the cache.","title":"Question state caching"},{"location":"Developer/Question_state_caching/#question-state-caching","text":"The current cache is very close indeed to the CAS. Indeed, it is actually calls to the CAS itself which are cached. This gives a dramatic increase in performance when the result already exists. We recommend using the cache on a production server. Note, the cache needs to be cleared manually, perhaps on an annual cycle. The cache is automatically cleared if you upgrade the plugin.","title":"Question state caching"},{"location":"Developer/Question_state_caching/#clearing-the-cache","text":"This can be done through Moodle. Navigate to Home > Site administration > Plugins > Question types > STACK Choose to view the healthcheck page. At the bottom of this is a button to clear the cache.","title":"Clearing the cache"},{"location":"Developer/Release_notes_4_4_x/","text":"Release notes for STACK 4.4.x STACK version 4.4.0 was released in July 2022. This was a major rewrite of the PRT and CASText systems, with a focus on performance and limitations of the previous systems. This release has changed/tightened up some question authoring causing some problems with existing questions. For this reason we have written these dedicated release notes. Issue: [[ foreach ]] blocks over zero length lists. [[ foreach ]] blocks over a list that happens to have length zero causes \"text rendering error\" if reference to the non-existent element is made, even though the loop is not run: e.g. [[ foreach item=\"[]\" ]] {@item@} [[/ foreach ]]. (Note without the {@item@} it runs fine.) Solution Protect loop with an [[ if ]] block on the length of the list. Issue: Bad interaction between ordergreat and exdowncase This is a more serious problem, see https://github.com/maths/moodle-qtype_stack/issues/887 for updates. One solution is to test for exdowncase(sans)=exdowncase(tans) [not just tans ]. Issue: Automatically calculated numerical teachers answer might now include brackets Automatically calculated numerical teachers answer might now include brackets: ( -(3/8)), which is a problem if the input forbade brackets!, causing Question Test failure. Solution: Don't forbid input of brackets! Issue: when selecting function names from a list. When using something like func:rand([sin,cos,exp,ln]); is(equal(func,ln)); now returns unknown. Used to return true/false. Solution: First generate a random integer. Set func based on that, and test the value of the integer. (Not as neat!) Issue: MathJax Mathjax no longer likes \\begin{pmatrix}{@xx@}\\\\{@yy@}\\end{pmatrix} in castext. Solution: make sure there is a space between \\\\ and {@yy@} . (Better!) Define the vector to be a maxima object and display that instead. Issue: CAS text comments delineated with / ... / are rendered Solution: Use [[ comment ]] ... [ [/ comment ]] Issue: Fatal error causing an exception and then displaying nothing. Solution: \"tans\" PRT node entry ended with semicolon: Delete the semi-colon! We now have error trapping for this problem. Issue: taylor now returns a maxima taylor series object taylor now returns a maxima taylor series object (as it should!) rather than a normal algebraic expression (as it did!) Solution use expand(taylor( ... ) ) to get a normal algebraic object. (May then also need to set powerdisp:true to get the usual ordering of terms) This is one consequence of the single call to Maxima. Previously there was some string input/output which lost the data type information. Issue: rounding of numerical quantities. The answer test AlgEquiv now does not think floats are equivalent, even though they look identical when displayed in decimal. Solution: don't use the answer test AlgEquiv for floats, use a numerical answertest instead. This is one consequence of the single call to Maxima. Previously there was some string input/output which created numerical rounding. This rounding no longer happens, causing the apparent problem. Examples are given in the documentation on numbers instead.","title":"Release notes for STACK 4.4.x"},{"location":"Developer/Release_notes_4_4_x/#release-notes-for-stack-44x","text":"STACK version 4.4.0 was released in July 2022. This was a major rewrite of the PRT and CASText systems, with a focus on performance and limitations of the previous systems. This release has changed/tightened up some question authoring causing some problems with existing questions. For this reason we have written these dedicated release notes.","title":"Release notes for STACK 4.4.x"},{"location":"Developer/Release_notes_4_4_x/#issue-foreach-blocks-over-zero-length-lists","text":"[[ foreach ]] blocks over a list that happens to have length zero causes \"text rendering error\" if reference to the non-existent element is made, even though the loop is not run: e.g. [[ foreach item=\"[]\" ]] {@item@} [[/ foreach ]]. (Note without the {@item@} it runs fine.) Solution Protect loop with an [[ if ]] block on the length of the list.","title":"Issue: [[ foreach ]] blocks over zero length lists."},{"location":"Developer/Release_notes_4_4_x/#issue-bad-interaction-between-ordergreat-and-exdowncase","text":"This is a more serious problem, see https://github.com/maths/moodle-qtype_stack/issues/887 for updates. One solution is to test for exdowncase(sans)=exdowncase(tans) [not just tans ].","title":"Issue: Bad interaction between ordergreat and exdowncase"},{"location":"Developer/Release_notes_4_4_x/#issue-automatically-calculated-numerical-teachers-answer-might-now-include-brackets","text":"Automatically calculated numerical teachers answer might now include brackets: ( -(3/8)), which is a problem if the input forbade brackets!, causing Question Test failure. Solution: Don't forbid input of brackets!","title":"Issue: Automatically calculated numerical teachers answer might now include brackets"},{"location":"Developer/Release_notes_4_4_x/#issue-when-selecting-function-names-from-a-list","text":"When using something like func:rand([sin,cos,exp,ln]); is(equal(func,ln)); now returns unknown. Used to return true/false. Solution: First generate a random integer. Set func based on that, and test the value of the integer. (Not as neat!)","title":"Issue: when selecting function names from a list."},{"location":"Developer/Release_notes_4_4_x/#issue-mathjax","text":"Mathjax no longer likes \\begin{pmatrix}{@xx@}\\\\{@yy@}\\end{pmatrix} in castext. Solution: make sure there is a space between \\\\ and {@yy@} . (Better!) Define the vector to be a maxima object and display that instead.","title":"Issue: MathJax"},{"location":"Developer/Release_notes_4_4_x/#issue-cas-text-comments-delineated-with-are-rendered","text":"Solution: Use [[ comment ]] ... [ [/ comment ]]","title":"Issue: CAS text comments delineated with / ... / are rendered"},{"location":"Developer/Release_notes_4_4_x/#issue-fatal-error-causing-an-exception-and-then-displaying-nothing","text":"Solution: \"tans\" PRT node entry ended with semicolon: Delete the semi-colon! We now have error trapping for this problem.","title":"Issue: Fatal error causing an exception and then displaying nothing."},{"location":"Developer/Release_notes_4_4_x/#issue-taylor-now-returns-a-maxima-taylor-series-object","text":"taylor now returns a maxima taylor series object (as it should!) rather than a normal algebraic expression (as it did!) Solution use expand(taylor( ... ) ) to get a normal algebraic object. (May then also need to set powerdisp:true to get the usual ordering of terms) This is one consequence of the single call to Maxima. Previously there was some string input/output which lost the data type information.","title":"Issue: taylor now returns a maxima taylor series object"},{"location":"Developer/Release_notes_4_4_x/#issue-rounding-of-numerical-quantities","text":"The answer test AlgEquiv now does not think floats are equivalent, even though they look identical when displayed in decimal. Solution: don't use the answer test AlgEquiv for floats, use a numerical answertest instead. This is one consequence of the single call to Maxima. Previously there was some string input/output which created numerical rounding. This rounding no longer happens, causing the apparent problem. Examples are given in the documentation on numbers instead.","title":"Issue: rounding of numerical quantities."},{"location":"Developer/Releasing/","text":"STACK release process notes Note, these notes are designed for developers releasing a new version through the Moodle plugin database. They are probably not useful for anyone else. Release needs to be done for the whole \"set\". Do we increment the numbers of all components, e.g. behaviours, or just the qtype_stack? for key releases, we do them all. for bug fixes just the question type. 0. Code on github The STACK code is stored on github, e.g. in https://github.com/maths/moodle-qtype_stack . In general the code branches are arranged as follows. The master branch should always be either (i) an official release, (ii) contain minor but critical bug fixes, or (iii) contain updates to the docs. The STACK documentation on https://docs.stack-assessment.org/ auto-builds from the master branch, and so it is normal to update the docs between official releases. The dev branch normally contains features which will in the next release. The dev branch should normally work out of the box, but expect unfinished features and bugs! Development of new features often takes place in a specific branch named to correspond to an issue in the github issue tracker , normally forked from dev . E.g. if you raise issue 802 then code related to this can start life in a branch iss802 . If you put #802 in the commit message then github will pick this up in the issue discussion. New features can be merged back into dev before they are completely finished, but please do add documentation, unit tests etc. first and make sure we at least have consensus on the design! Unless you want to discuss something confidential with the developers, please do raise issues on github! 1. Pre-release checks Check Readme.md Check docs development history and development track history/track . Execute php cli/answertests_docs.php to update the static docs about answertests. Execute doc/maintenance.php to search for broken links etc. Run php cli/unicode_data_process.php to update unicode mappings. Run php cli/ast_test_generator.php to confirm if auto-generated tests have not changed. Run Maxima unit tests of contributed packages by re-defining stacklocation and running s_test_case.mac in the sandbox. E.g. stacklocation:\"/var/www/html/m40/question/type/stack\"$ load(\"s_test_case.mac\"); Run PHP unit tests . Run code checker. Version numbers version.php stackmaxima.mac MATURITY_STABLE ? Check both the Moodle versions, and the required number. (https://moodledev.io/general/releases) Commit all changes to git, e.g. \"Update version number for the 4.4.3 release.\" 2. Create new tag with version name E.g. \"v4.4.3\". Push to GitHub. Push tags to GitHub Tortoise git: pulldown from push Linux: git tag -a v4.4.3 -m \"Update version number for the 4.4.3 release.\" Linux: git push Linux: git push --tags 3. Moodle plugins database entry for the plugin Add a new version to the Moodle plugins database entry for the plugin. If version number does not appear in the dropdown, then upload it from GitHub. Version information Upload zipfile GitHub Username = maths Choose appropriate plugin Choose tags Choose tag number Rename root directory + Fix README filename + Choose supported Moodle. Then check updated information on the form. (don't add \"master\" to branch info)","title":"STACK release process notes"},{"location":"Developer/Releasing/#stack-release-process-notes","text":"Note, these notes are designed for developers releasing a new version through the Moodle plugin database. They are probably not useful for anyone else. Release needs to be done for the whole \"set\". Do we increment the numbers of all components, e.g. behaviours, or just the qtype_stack? for key releases, we do them all. for bug fixes just the question type.","title":"STACK release process notes"},{"location":"Developer/Releasing/#0-code-on-github","text":"The STACK code is stored on github, e.g. in https://github.com/maths/moodle-qtype_stack . In general the code branches are arranged as follows. The master branch should always be either (i) an official release, (ii) contain minor but critical bug fixes, or (iii) contain updates to the docs. The STACK documentation on https://docs.stack-assessment.org/ auto-builds from the master branch, and so it is normal to update the docs between official releases. The dev branch normally contains features which will in the next release. The dev branch should normally work out of the box, but expect unfinished features and bugs! Development of new features often takes place in a specific branch named to correspond to an issue in the github issue tracker , normally forked from dev . E.g. if you raise issue 802 then code related to this can start life in a branch iss802 . If you put #802 in the commit message then github will pick this up in the issue discussion. New features can be merged back into dev before they are completely finished, but please do add documentation, unit tests etc. first and make sure we at least have consensus on the design! Unless you want to discuss something confidential with the developers, please do raise issues on github!","title":"0. Code on github"},{"location":"Developer/Releasing/#1-pre-release-checks","text":"Check Readme.md Check docs development history and development track history/track . Execute php cli/answertests_docs.php to update the static docs about answertests. Execute doc/maintenance.php to search for broken links etc. Run php cli/unicode_data_process.php to update unicode mappings. Run php cli/ast_test_generator.php to confirm if auto-generated tests have not changed. Run Maxima unit tests of contributed packages by re-defining stacklocation and running s_test_case.mac in the sandbox. E.g. stacklocation:\"/var/www/html/m40/question/type/stack\"$ load(\"s_test_case.mac\"); Run PHP unit tests . Run code checker. Version numbers version.php stackmaxima.mac MATURITY_STABLE ? Check both the Moodle versions, and the required number. (https://moodledev.io/general/releases) Commit all changes to git, e.g. \"Update version number for the 4.4.3 release.\"","title":"1. Pre-release checks"},{"location":"Developer/Releasing/#2-create-new-tag-with-version-name","text":"E.g. \"v4.4.3\". Push to GitHub. Push tags to GitHub Tortoise git: pulldown from push Linux: git tag -a v4.4.3 -m \"Update version number for the 4.4.3 release.\" Linux: git push Linux: git push --tags","title":"2. Create new tag with version name"},{"location":"Developer/Releasing/#3-moodle-plugins-database-entry-for-the-plugin","text":"Add a new version to the Moodle plugins database entry for the plugin. If version number does not appear in the dropdown, then upload it from GitHub. Version information Upload zipfile GitHub Username = maths Choose appropriate plugin Choose tags Choose tag number Rename root directory + Fix README filename + Choose supported Moodle. Then check updated information on the form. (don't add \"master\" to branch info)","title":"3. Moodle plugins database entry for the plugin"},{"location":"Developer/Releasing_ILIAS/","text":"Releasing new ILIAS version This page records the steps needed to take qtype_stack (originally designed for Moodle) and create an updated working ILIAS plugin. All code needed for the ILIAS plugin should be available in the stack directory (from the top level). TODO: how to get updated language packs? TOTO: How to map Moodle specific functions (e.g. stack_string ) to the ILIAS version?","title":"Releasing new ILIAS version"},{"location":"Developer/Releasing_ILIAS/#releasing-new-ilias-version","text":"This page records the steps needed to take qtype_stack (originally designed for Moodle) and create an updated working ILIAS plugin. All code needed for the ILIAS plugin should be available in the stack directory (from the top level). TODO: how to get updated language packs? TOTO: How to map Moodle specific functions (e.g. stack_string ) to the ILIAS version?","title":"Releasing new ILIAS version"},{"location":"Developer/Running_question_tests_other_site/","text":"Bulk testing on your site You can bulk test all question tests on all variants of all question by using the bulk-test script. This is available from the quetion setting page or from the \"adminui\" page [...]/question/type/stack/adminui/index.php User require capability qtype/stack:usediagnostictools . Running question tests for questions on other sites (command line) You can bulk test all question tests on all variants of all question by using the command line bulk-test script contained in the cli directory as follows: php bulktestall.php Since you have command line access to the development server you will need to edit this line $DB->connect('live.database.host.name', 'read_only_user', 'pa55w0rd', 'live_database_name', 'mdl_', $CFG->dboptions); to specify the remote database. Then run the command line script (perhaps using something like screen to allow this to run in the background while you logout) with the remote option. php bulktestall.php --remote Running question tests for questions on other sites (web) When you upgrade to a new version of STACK, it would be reassuring to know beforehand whether there is any change in behaviour in STACK which will affect your existing questions. After you have done the upgrade, it is easy to run the question tests in bulk, using the link on the STACK plugin admin screen. However, with a bit of hackery, it is possible to run the code from the new STACK release (with a few modifications) on your development server, but have it open a read-only connection to your live database, in order to load the questions and their corresponding tests. The following patch is provided as-is. It will probably require tinkering with to work in any given situation. diff --git a/bulktest.php b/bulktest.php index 7974af2..a6614f2 100644 --- a/bulktest.php +++ b/bulktest.php @@ -29,13 +29,14 @@ require_once($CFG->libdir . '/questionlib.php'); require_once(__DIR__ . '/locallib.php'); require_once(__DIR__ . '/stack/utils.class.php'); require_once(__DIR__ . '/stack/bulktester.class.php'); +require_once(__DIR__ . '/stack/cas/connectorhelper.class.php'); // Get the parameters from the URL. $contextid = required_param('contextid', PARAM_INT); // Login and check permissions. -$context = context::instance_by_id($contextid); +$context = context_system::instance(); require_login(); require_capability('qtype/stack:usediagnostictools', $context); $PAGE->set_url('/question/type/stack/bulktest.php', array('contextid' => $context->id)); @@ -50,8 +51,8 @@ if ($context->contextlevel == CONTEXT_MODULE) { $PAGE->set_cm($cm, $DB->get_record('course', array('id' => $cm->course), '*', MUST_EXIST)); } -// Create the helper class. -$bulktester = new stack_bulk_tester(); +// Cache the connection settings. +stack_connection_helper::make(); // Release the session, so the user can do other things while this runs. \\core\\session\\manager::write_close(); @@ -60,9 +61,25 @@ $bulktester = new stack_bulk_tester(); echo $OUTPUT->header(); echo $OUTPUT->heading($title); +// Connect to other database. +$bulktestrealdb = $DB; +if (!$DB = moodle_database::get_driver_instance($CFG->dbtype, $CFG->dblibrary)) { + throw new dml_exception('dbdriverproblem', \"Unknown driver $CFG->dblibrary/$CFG->dbtype\"); +} +$DB->connect('live.database.host.name', 'read_only_user', 'pa55w0rd', 'live_database_name', 'mdl_', $CFG->dboptions); + +$context = context::instance_by_id($contextid); + +// Create the helper class. +$bulktester = new stack_bulk_tester(); + // Run the tests. list($allpassed, $failing) = $bulktester->run_all_tests_for_context($context); // Display the final summary. $bulktester->print_overall_result($allpassed, $failing); + +// Switch back to the read DB. +$DB = $bulktestrealdb; + echo $OUTPUT->footer(); diff --git a/bulktestindex.php b/bulktestindex.php index 3d5eafa..f84b4bd 100644 --- a/bulktestindex.php +++ b/bulktestindex.php @@ -38,13 +38,20 @@ $PAGE->set_url('/question/type/stack/adminui/bulktestindex.php'); $PAGE->set_context($context); $PAGE->set_title(stack_string('bulktestindextitle')); -// Create the helper class. -$bulktester = new stack_bulk_tester(); - // Display. echo $OUTPUT->header(); echo $OUTPUT->heading(stack_string('replacedollarsindex')); +// Connect to other database. +$realdb = $DB; +if (!$DB = moodle_database::get_driver_instance($CFG->dbtype, $CFG->dblibrary)) { + throw new dml_exception('dbdriverproblem', \"Unknown driver $CFG->dblibrary/$CFG->dbtype\"); +} +$DB->connect('live.database.host.name', 'read_only_user', 'pa55w0rd', 'live_database_name', 'mdl_', $CFG->dboptions); + +// Create the helper class. +$bulktester = new stack_bulk_tester(); + echo html_writer::start_tag('ul'); foreach ($bulktester->get_stack_questions_by_context() as $contextid => $numstackquestions) { echo html_writer::tag('li', html_writer::link( @@ -53,6 +60,9 @@ foreach ($bulktester->get_stack_questions_by_context() as $contextid => $numstac } echo html_writer::end_tag('ul'); +// Switch back to the read DB. +$DB = $realdb; + if (has_capability('moodle/site:config', context_system::instance())) { echo html_writer::tag('p', html_writer::link( new moodle_url('/question/type/stack/bulktestall.php'), stack_string('bulktestrun'))); diff --git a/stack/cas/connectorhelper.class.php b/stack/cas/connectorhelper.class.php index 40ef26e..d8ba3e1 100644 --- a/stack/cas/connectorhelper.class.php +++ b/stack/cas/connectorhelper.class.php @@ -78,6 +78,11 @@ abstract class stack_connection_helper { throw new stack_exception('stack_cas_connection: Unknown platform ' . self::$config->platform); } + global $bulktestrealdb; + if (!empty(($bulktestrealdb))) { + // Use the real db as the cache for performance. + return new stack_cas_connection_db_cache($connection, $debuglog, $bulktestrealdb); + } switch (self::$config->casresultscache) { case 'db': global $DB; As an example of the kind of tinkering that might be required, and the time I devised this patch, the new version of STACK had a database change, which had not yet been applied to our live database. Therefore, I had to tweak the question loading code as follows: diff --git a/questiontype.php b/questiontype.php index 6dcc96d..02c4354 100644 --- a/questiontype.php +++ b/questiontype.php @@ -348,7 +348,7 @@ class qtype_stack extends question_type { $question->inputs = $DB->get_records('qtype_stack_inputs', array('questionid' => $question->id), 'name', 'name, id, questionid, type, tans, boxsize, strictsyntax, insertstars, ' . - 'syntaxhint, syntaxattribute, forbidwords, allowwords, forbidfloat, requirelowestterms, ' . + 'syntaxhint, 0 AS syntaxattribute, forbidwords, allowwords, forbidfloat, requirelowestterms, ' . 'checkanswertype, mustverify, showvalidation, options'); $question->prts = $DB->get_records('qtype_stack_prts', @@ -403,7 +403,7 @@ class qtype_stack extends question_type { 'strictSyntax' => (bool) $inputdata->strictsyntax, 'insertStars' => (int) $inputdata->insertstars, 'syntaxHint' => $inputdata->syntaxhint, - 'syntaxAttribute' => $inputdata->syntaxattribute, + 'syntaxAttribute' => '0', 'forbidWords' => $inputdata->forbidwords, 'allowWords' => $inputdata->allowwords, 'forbidFloats' => (bool) $inputdata->forbidfloat,","title":"Bulk testing on your site"},{"location":"Developer/Running_question_tests_other_site/#bulk-testing-on-your-site","text":"You can bulk test all question tests on all variants of all question by using the bulk-test script. This is available from the quetion setting page or from the \"adminui\" page [...]/question/type/stack/adminui/index.php User require capability qtype/stack:usediagnostictools .","title":"Bulk testing on your site"},{"location":"Developer/Running_question_tests_other_site/#running-question-tests-for-questions-on-other-sites-command-line","text":"You can bulk test all question tests on all variants of all question by using the command line bulk-test script contained in the cli directory as follows: php bulktestall.php Since you have command line access to the development server you will need to edit this line $DB->connect('live.database.host.name', 'read_only_user', 'pa55w0rd', 'live_database_name', 'mdl_', $CFG->dboptions); to specify the remote database. Then run the command line script (perhaps using something like screen to allow this to run in the background while you logout) with the remote option. php bulktestall.php --remote","title":"Running question tests for questions on other sites (command line)"},{"location":"Developer/Running_question_tests_other_site/#running-question-tests-for-questions-on-other-sites-web","text":"When you upgrade to a new version of STACK, it would be reassuring to know beforehand whether there is any change in behaviour in STACK which will affect your existing questions. After you have done the upgrade, it is easy to run the question tests in bulk, using the link on the STACK plugin admin screen. However, with a bit of hackery, it is possible to run the code from the new STACK release (with a few modifications) on your development server, but have it open a read-only connection to your live database, in order to load the questions and their corresponding tests. The following patch is provided as-is. It will probably require tinkering with to work in any given situation. diff --git a/bulktest.php b/bulktest.php index 7974af2..a6614f2 100644 --- a/bulktest.php +++ b/bulktest.php @@ -29,13 +29,14 @@ require_once($CFG->libdir . '/questionlib.php'); require_once(__DIR__ . '/locallib.php'); require_once(__DIR__ . '/stack/utils.class.php'); require_once(__DIR__ . '/stack/bulktester.class.php'); +require_once(__DIR__ . '/stack/cas/connectorhelper.class.php'); // Get the parameters from the URL. $contextid = required_param('contextid', PARAM_INT); // Login and check permissions. -$context = context::instance_by_id($contextid); +$context = context_system::instance(); require_login(); require_capability('qtype/stack:usediagnostictools', $context); $PAGE->set_url('/question/type/stack/bulktest.php', array('contextid' => $context->id)); @@ -50,8 +51,8 @@ if ($context->contextlevel == CONTEXT_MODULE) { $PAGE->set_cm($cm, $DB->get_record('course', array('id' => $cm->course), '*', MUST_EXIST)); } -// Create the helper class. -$bulktester = new stack_bulk_tester(); +// Cache the connection settings. +stack_connection_helper::make(); // Release the session, so the user can do other things while this runs. \\core\\session\\manager::write_close(); @@ -60,9 +61,25 @@ $bulktester = new stack_bulk_tester(); echo $OUTPUT->header(); echo $OUTPUT->heading($title); +// Connect to other database. +$bulktestrealdb = $DB; +if (!$DB = moodle_database::get_driver_instance($CFG->dbtype, $CFG->dblibrary)) { + throw new dml_exception('dbdriverproblem', \"Unknown driver $CFG->dblibrary/$CFG->dbtype\"); +} +$DB->connect('live.database.host.name', 'read_only_user', 'pa55w0rd', 'live_database_name', 'mdl_', $CFG->dboptions); + +$context = context::instance_by_id($contextid); + +// Create the helper class. +$bulktester = new stack_bulk_tester(); + // Run the tests. list($allpassed, $failing) = $bulktester->run_all_tests_for_context($context); // Display the final summary. $bulktester->print_overall_result($allpassed, $failing); + +// Switch back to the read DB. +$DB = $bulktestrealdb; + echo $OUTPUT->footer(); diff --git a/bulktestindex.php b/bulktestindex.php index 3d5eafa..f84b4bd 100644 --- a/bulktestindex.php +++ b/bulktestindex.php @@ -38,13 +38,20 @@ $PAGE->set_url('/question/type/stack/adminui/bulktestindex.php'); $PAGE->set_context($context); $PAGE->set_title(stack_string('bulktestindextitle')); -// Create the helper class. -$bulktester = new stack_bulk_tester(); - // Display. echo $OUTPUT->header(); echo $OUTPUT->heading(stack_string('replacedollarsindex')); +// Connect to other database. +$realdb = $DB; +if (!$DB = moodle_database::get_driver_instance($CFG->dbtype, $CFG->dblibrary)) { + throw new dml_exception('dbdriverproblem', \"Unknown driver $CFG->dblibrary/$CFG->dbtype\"); +} +$DB->connect('live.database.host.name', 'read_only_user', 'pa55w0rd', 'live_database_name', 'mdl_', $CFG->dboptions); + +// Create the helper class. +$bulktester = new stack_bulk_tester(); + echo html_writer::start_tag('ul'); foreach ($bulktester->get_stack_questions_by_context() as $contextid => $numstackquestions) { echo html_writer::tag('li', html_writer::link( @@ -53,6 +60,9 @@ foreach ($bulktester->get_stack_questions_by_context() as $contextid => $numstac } echo html_writer::end_tag('ul'); +// Switch back to the read DB. +$DB = $realdb; + if (has_capability('moodle/site:config', context_system::instance())) { echo html_writer::tag('p', html_writer::link( new moodle_url('/question/type/stack/bulktestall.php'), stack_string('bulktestrun'))); diff --git a/stack/cas/connectorhelper.class.php b/stack/cas/connectorhelper.class.php index 40ef26e..d8ba3e1 100644 --- a/stack/cas/connectorhelper.class.php +++ b/stack/cas/connectorhelper.class.php @@ -78,6 +78,11 @@ abstract class stack_connection_helper { throw new stack_exception('stack_cas_connection: Unknown platform ' . self::$config->platform); } + global $bulktestrealdb; + if (!empty(($bulktestrealdb))) { + // Use the real db as the cache for performance. + return new stack_cas_connection_db_cache($connection, $debuglog, $bulktestrealdb); + } switch (self::$config->casresultscache) { case 'db': global $DB; As an example of the kind of tinkering that might be required, and the time I devised this patch, the new version of STACK had a database change, which had not yet been applied to our live database. Therefore, I had to tweak the question loading code as follows: diff --git a/questiontype.php b/questiontype.php index 6dcc96d..02c4354 100644 --- a/questiontype.php +++ b/questiontype.php @@ -348,7 +348,7 @@ class qtype_stack extends question_type { $question->inputs = $DB->get_records('qtype_stack_inputs', array('questionid' => $question->id), 'name', 'name, id, questionid, type, tans, boxsize, strictsyntax, insertstars, ' . - 'syntaxhint, syntaxattribute, forbidwords, allowwords, forbidfloat, requirelowestterms, ' . + 'syntaxhint, 0 AS syntaxattribute, forbidwords, allowwords, forbidfloat, requirelowestterms, ' . 'checkanswertype, mustverify, showvalidation, options'); $question->prts = $DB->get_records('qtype_stack_prts', @@ -403,7 +403,7 @@ class qtype_stack extends question_type { 'strictSyntax' => (bool) $inputdata->strictsyntax, 'insertStars' => (int) $inputdata->insertstars, 'syntaxHint' => $inputdata->syntaxhint, - 'syntaxAttribute' => $inputdata->syntaxattribute, + 'syntaxAttribute' => '0', 'forbidWords' => $inputdata->forbidwords, 'allowWords' => $inputdata->allowwords, 'forbidFloats' => (bool) $inputdata->forbidfloat,","title":"Running question tests for questions on other sites (web)"},{"location":"Developer/STACK-JS/","text":"STACK-JS Including JavaScript in questions has always been a bit suspicious as it essentially executes with the user's rights in the browser. For this reason it is necessary to somehow separate that scripting from the VLE context. It is also good to separate the scripting from the VLE to ease portability of materials to other VLEs. STACK-JS is a sandbox IFRAME based solution where the potentially dangerous bits of code exist inside an IFRAME and communicate with the VLE through a limited set of messages. The idea is to restrict the script from directly seeing the VLE, and restrict interaction with the VLE. Basics The solution consist of two parts: The VLE side beachhead script which needs to adapt to the VLE while at the same time maintain the STACK-JS features. For Moodle this script is in the amd/src/stackjsvle.js file and it has been designed so that the VLE-specific parts are separated into functions name vle_ porting this to other VLEs should not be difficult. The IFRAME side script is currently stored at corsscripts/stackjsiframe.js and provides automated promise-based APIs for doing basic actions through the messaging system. This script should never be changed and it should always be the same on all VLEs. It includes logic for synchronisation that may not be necessary with the default Moodle implementation, but should still be kept there for possible other uses. The VLE side has more control here, as it can decide what it allows and to whom it listens. In general, the IFRAMEs are constructed through the VLE side scripts and those scripts only listen to the IFRAMEs they constructed. The primary security feature of the VLE side is to limit the access to inputs to just those inputs present within questions. The access is also limited to listening for input changes and setting their values so no DOM modification is possible. However, there are messages that allow toggling the visibility and changing the contents of elements by ID, however again the VLE can limit those elements to just those elements within the questions and also apply whatever cleaning (strip all scripts and so on) to any content received. Promises for the content The content going into those IFRAMEs can be anything and it can do whatever it wants in those IFRAMEs. The STACK-JS logic will promise that no filtering for the content will ever be done. Other than Markdown etc. if requested. No VLE level filters will affect it nor will we tidy it. Content can also rest assured that it is not within the same origin as the VLE and thus cannot leak authorisation or other sensitive details from that side. Inconveniences As the IFRAME is in its own \"origin\" it cannot load scripts from just any source. And as it is important to be able to load some scripts, especially that stackjsiframe.js , we need a source that is suitable. That source needs to set a particular header, and as we do not want to add extra install requirements for different web-servers we now have a special script that modifies headers at corsscripts/cors.php . We could also serve that script from external source through some CDN, but we probably want to maintain the ability to run the whole system in a closed network so that is why we provide our own header modification script. If one needs to serve anything to those IFRAMEs from the local system one can either drop that thing into that corsscripts/ directory or config ones own headers elsewhere. Currently, works with .css and .js files. Loading external scripts Do note that loading external scripts into the IFRAME is possible as long as the following two conditions are met: You are not loading from http:// sources into https:// context. Things work the other way around but mixing HTTP into HTTPS does not, as most sane VLEs are going to be running over HTTPS and the IFRAME will inherit some security assumptions from the surroundings, you should always write any references to external libraries using https://... urls. The server serving that library has the correct CORS header so that the script allows itself to be loaded into different origin context. Basically, public usage CDN:s have this header. But most servers do not by default serve scripts for others to use. The header is this: Access-Control-Allow-Origin: * . Do note that the server could also serve other headers that might affect your ability to load scripts into sandbox IFRAMEs so if things do not work check those headers. Do note that use of external resources will always make your materials sensitive to external changes. Therefore, if you do build materials that rely on external libraries do consider self hosting fixed copies of those libraries for your own use. The general security reason While no attacks using the scripting are currently known, securing this border is necessary in a world where material sharing is more common. If your STACK installation is not new enough to use this security feature then do pay extra attention to materials received from random sources, as they might contain scripting that would execute with your rights. Such execution could, for example: Exfiltrate information from the system that is likely to house student details. Modify information in the system, for example, points, quiz settings, or access rights. Do arbitrary actions \"as you\", e.g., post messages onto course forums. Do note that similar risks are related to any materials that allow arbitrary scripts to be included either by the student or by whoever authored the material and these types of attacks are always just one spoofed e-mail away. While unlikely, it is worth being careful until STACK has completed the migration to secured JavaScript. The current plan is to first provide means for doing things in a secure way and then forbid insecure methods in a following release. Until that following release, keep your eyes open. Minimal example for access to an input Given a STACK question with an input named ans1 you can create an IFRAME that executes arbitrary code that can refrence that input like this: [[iframe]] [[script type=\"module\"]] import {stack_js} from '[[cors src=\"stackjsiframe.js\"/]]'; var promiseforaninput = stack_js.request_access_to_input(\"ans1\", true); promiseforaninput.then((id) => { document.getElementById(id).type = 'input'; }); [[/script]] [[/iframe]] The first two lines first open up an [[iframe]] which generates an XHTML document and an IFRAME to contain it, and then we use the [[script]] block to generate a script-tag in that documents head. With the type=\"module\" we make it possible to use the import syntax to bring in libraries and in this case we bring in the stack_js library from an URL provided by the [[cors]] block so that we do not need to write hard coded references to the full URL. Once we have the library, we then ask it for access to the input named ans1 , we also add that true to signal the we would want to see input events being synchronised in addition to normal change events, to make this demo more interactive. As the connection process is asynchronous we will receive a promise that will resolve into the identifier of an hidden input that will be constructed inside the IFRAME, in this example we simply make that input visible so that we can try interacting with it directly. If you modify that IFRAME side inputs value through code or other means it will only get synchronised to the VLE side once a change event is emitted, so do dispatch some events if things do not otherwise work. Also if your only purpose is to run JavaScript you might want to hide the IFRAME, you can simply place it inside something that is not being displayed or use hidden=\"true\" as an argument to the [[iframe]] -block. If it needs to be visible, all the dimension options of [[jsxgraph]] also work here.","title":"STACK-JS"},{"location":"Developer/STACK-JS/#stack-js","text":"Including JavaScript in questions has always been a bit suspicious as it essentially executes with the user's rights in the browser. For this reason it is necessary to somehow separate that scripting from the VLE context. It is also good to separate the scripting from the VLE to ease portability of materials to other VLEs. STACK-JS is a sandbox IFRAME based solution where the potentially dangerous bits of code exist inside an IFRAME and communicate with the VLE through a limited set of messages. The idea is to restrict the script from directly seeing the VLE, and restrict interaction with the VLE.","title":"STACK-JS"},{"location":"Developer/STACK-JS/#basics","text":"The solution consist of two parts: The VLE side beachhead script which needs to adapt to the VLE while at the same time maintain the STACK-JS features. For Moodle this script is in the amd/src/stackjsvle.js file and it has been designed so that the VLE-specific parts are separated into functions name vle_ porting this to other VLEs should not be difficult. The IFRAME side script is currently stored at corsscripts/stackjsiframe.js and provides automated promise-based APIs for doing basic actions through the messaging system. This script should never be changed and it should always be the same on all VLEs. It includes logic for synchronisation that may not be necessary with the default Moodle implementation, but should still be kept there for possible other uses. The VLE side has more control here, as it can decide what it allows and to whom it listens. In general, the IFRAMEs are constructed through the VLE side scripts and those scripts only listen to the IFRAMEs they constructed. The primary security feature of the VLE side is to limit the access to inputs to just those inputs present within questions. The access is also limited to listening for input changes and setting their values so no DOM modification is possible. However, there are messages that allow toggling the visibility and changing the contents of elements by ID, however again the VLE can limit those elements to just those elements within the questions and also apply whatever cleaning (strip all scripts and so on) to any content received.","title":"Basics"},{"location":"Developer/STACK-JS/#promises-for-the-content","text":"The content going into those IFRAMEs can be anything and it can do whatever it wants in those IFRAMEs. The STACK-JS logic will promise that no filtering for the content will ever be done. Other than Markdown etc. if requested. No VLE level filters will affect it nor will we tidy it. Content can also rest assured that it is not within the same origin as the VLE and thus cannot leak authorisation or other sensitive details from that side.","title":"Promises for the content"},{"location":"Developer/STACK-JS/#inconveniences","text":"As the IFRAME is in its own \"origin\" it cannot load scripts from just any source. And as it is important to be able to load some scripts, especially that stackjsiframe.js , we need a source that is suitable. That source needs to set a particular header, and as we do not want to add extra install requirements for different web-servers we now have a special script that modifies headers at corsscripts/cors.php . We could also serve that script from external source through some CDN, but we probably want to maintain the ability to run the whole system in a closed network so that is why we provide our own header modification script. If one needs to serve anything to those IFRAMEs from the local system one can either drop that thing into that corsscripts/ directory or config ones own headers elsewhere. Currently, works with .css and .js files.","title":"Inconveniences"},{"location":"Developer/STACK-JS/#loading-external-scripts","text":"Do note that loading external scripts into the IFRAME is possible as long as the following two conditions are met: You are not loading from http:// sources into https:// context. Things work the other way around but mixing HTTP into HTTPS does not, as most sane VLEs are going to be running over HTTPS and the IFRAME will inherit some security assumptions from the surroundings, you should always write any references to external libraries using https://... urls. The server serving that library has the correct CORS header so that the script allows itself to be loaded into different origin context. Basically, public usage CDN:s have this header. But most servers do not by default serve scripts for others to use. The header is this: Access-Control-Allow-Origin: * . Do note that the server could also serve other headers that might affect your ability to load scripts into sandbox IFRAMEs so if things do not work check those headers. Do note that use of external resources will always make your materials sensitive to external changes. Therefore, if you do build materials that rely on external libraries do consider self hosting fixed copies of those libraries for your own use.","title":"Loading external scripts"},{"location":"Developer/STACK-JS/#the-general-security-reason","text":"While no attacks using the scripting are currently known, securing this border is necessary in a world where material sharing is more common. If your STACK installation is not new enough to use this security feature then do pay extra attention to materials received from random sources, as they might contain scripting that would execute with your rights. Such execution could, for example: Exfiltrate information from the system that is likely to house student details. Modify information in the system, for example, points, quiz settings, or access rights. Do arbitrary actions \"as you\", e.g., post messages onto course forums. Do note that similar risks are related to any materials that allow arbitrary scripts to be included either by the student or by whoever authored the material and these types of attacks are always just one spoofed e-mail away. While unlikely, it is worth being careful until STACK has completed the migration to secured JavaScript. The current plan is to first provide means for doing things in a secure way and then forbid insecure methods in a following release. Until that following release, keep your eyes open.","title":"The general security reason"},{"location":"Developer/STACK-JS/#minimal-example-for-access-to-an-input","text":"Given a STACK question with an input named ans1 you can create an IFRAME that executes arbitrary code that can refrence that input like this: [[iframe]] [[script type=\"module\"]] import {stack_js} from '[[cors src=\"stackjsiframe.js\"/]]'; var promiseforaninput = stack_js.request_access_to_input(\"ans1\", true); promiseforaninput.then((id) => { document.getElementById(id).type = 'input'; }); [[/script]] [[/iframe]] The first two lines first open up an [[iframe]] which generates an XHTML document and an IFRAME to contain it, and then we use the [[script]] block to generate a script-tag in that documents head. With the type=\"module\" we make it possible to use the import syntax to bring in libraries and in this case we bring in the stack_js library from an URL provided by the [[cors]] block so that we do not need to write hard coded references to the full URL. Once we have the library, we then ask it for access to the input named ans1 , we also add that true to signal the we would want to see input events being synchronised in addition to normal change events, to make this demo more interactive. As the connection process is asynchronous we will receive a promise that will resolve into the identifier of an hidden input that will be constructed inside the IFRAME, in this example we simply make that input visible so that we can try interacting with it directly. If you modify that IFRAME side inputs value through code or other means it will only get synchronised to the VLE side once a change event is emitted, so do dispatch some events if things do not otherwise work. Also if your only purpose is to run JavaScript you might want to hide the IFRAME, you can simply place it inside something that is not being displayed or use hidden=\"true\" as an argument to the [[iframe]] -block. If it needs to be visible, all the dimension options of [[jsxgraph]] also work here.","title":"Minimal example for access to an input"},{"location":"Developer/Security_map/","text":"Security-map It is important that students do not evaluate expressions such as the following with the CAS : system(\"rm /*\"); for somewhat obvious reasons! Hence, we need to restrict the availability of certain functions to users. STACK \"trusts\" the teacher. Therefore there are three levels of Maxima functions. Forbidden. No string containing anything which might look like this should ever get near the CAS. Teacher. Teacher's answers cannot contain these, but they are not a security risk. Usually these have side effects within the Maxima code, e.g. setting a global variable which might cause problems later/elsewhere. Student. Student's expressions can only contain these. Since STACK 4.3 the Maxima statement parser infrastruture uses a JSON file describing all identifiers of functions, variables, constants, and operators and features we attach to them. The catalogue is stored in stack/cas/security-map.json This JSON file is being updated manually and through the data collected by the census and can be extended freely to track new features as things progress. This documentation section describes what is currently being contained in that map. If a function from a maxima library is not in the security map then it is most likley that we have not reviewed it. Please contact the developers. Units Note that the security-map does not define identifiers that are units and based on the current design you should not declare them there. In the current form if we are in units mode an overlay will be placed on top of the security-map and that overlay will declare are identifers that are units mg , K ,... as constant: 's' meaning that they are constants that the student may use in their inputs as long as they are not declared forbidden through the forbidden words mechanism. Features currently tracked Security In security features we typically use values \"s\" , \"t\" , and \"f\" . \"s\" declares that students may use this identifier in the specified way unless specifically forbidden with the forbidden words mechanism. \"t\" means that by default only the author may use it but can specially allow it using the allowed words mechanism. \"f\" means that for whatever reason not even the author may use it. constant is a feature declaring the security level at which a given identifier is to be considered as a constant and can thus be only red and never written to. This makes it so that you cannot write %pi:4 but can use %pi otherwise. evflag is a feature declaring the security level at which a given identifier is to be considered as an evaluation flag. Basically, wether it can be used as a suffix to a statement sqrt(3),numer or as a paramter to ev(sqrt(3),numer=true) and similar functions. function is a feature declaring the security level at which a given identifier is to be considered as a function name and can thus be called. keyword is a feature declaring the security level at which a given identifier is to be considered as a keyword that can be used one could use it to declare that students may not use specific types of loops or other flow control features. operator is a feature declaring the security level at which a given operator is usable at. By operator we mean anything from ^ and and to various brackets. variable is a feature declaring the security level at which a given identifier is to be considered as a variable and can thus be both written and red. In addition to those we also declare certain identifiers with globalyforbiddenfunction or globalyforbiddenvariable in the cases where we might want to handle attempts to use them in a more serious manner. Nouns In the old system certain functions and operators were nounified to stop the CAS from evaluating them and thus allow simpler assessment of the original input form. For this we define features nounfunction and nounoperator that have the name of the matching nounified identifier. When processing student input functions and operators that have noun variants are nounified unless specially requested to be kept as is. In addition to the nounifying one may need to denounify and then we define nounoperatorfor or nounfunctionfor at the noun end. Aliases int(foo,x) is equivalent to integrate(foo,x) which leads to issues when using forbidden words and only forbidding integrate to deal with this we now declare aliases as features for various identifiers so that if you forbid one the others are also forbidden. We also use those aliases to map similar statements to use the same alias thus increasing the likelihood of cache hits. Aliases like nouns are defined by usage type e.g. aliasfunction feature tells that if some one uses a function with this name it should be interpreted as a function call with the name of this feature. aliasvariable does the same for both constants and variables. As it is often necessary to find all the aliases that point to a given identifier we also define features aliasfunctions and aliasvariables that contain lists of such identifiers. Updating such lists should be left to tools that make sure they are correct. Aliases often do not match the logical aliases present in the CAS instead they tend to map things so that they point to the version that is shortest to minimise space usage, e.g. while some might think int => integrate here we rather have integrate => int . The base alias is sent to the CAS. This enables support for some unicode, e.g. pi, which does not break the CAS.","title":"Security map"},{"location":"Developer/Security_map/#security-map","text":"It is important that students do not evaluate expressions such as the following with the CAS : system(\"rm /*\"); for somewhat obvious reasons! Hence, we need to restrict the availability of certain functions to users. STACK \"trusts\" the teacher. Therefore there are three levels of Maxima functions. Forbidden. No string containing anything which might look like this should ever get near the CAS. Teacher. Teacher's answers cannot contain these, but they are not a security risk. Usually these have side effects within the Maxima code, e.g. setting a global variable which might cause problems later/elsewhere. Student. Student's expressions can only contain these. Since STACK 4.3 the Maxima statement parser infrastruture uses a JSON file describing all identifiers of functions, variables, constants, and operators and features we attach to them. The catalogue is stored in stack/cas/security-map.json This JSON file is being updated manually and through the data collected by the census and can be extended freely to track new features as things progress. This documentation section describes what is currently being contained in that map. If a function from a maxima library is not in the security map then it is most likley that we have not reviewed it. Please contact the developers.","title":"Security-map"},{"location":"Developer/Security_map/#units","text":"Note that the security-map does not define identifiers that are units and based on the current design you should not declare them there. In the current form if we are in units mode an overlay will be placed on top of the security-map and that overlay will declare are identifers that are units mg , K ,... as constant: 's' meaning that they are constants that the student may use in their inputs as long as they are not declared forbidden through the forbidden words mechanism.","title":"Units"},{"location":"Developer/Security_map/#features-currently-tracked","text":"","title":"Features currently tracked"},{"location":"Developer/Security_map/#security","text":"In security features we typically use values \"s\" , \"t\" , and \"f\" . \"s\" declares that students may use this identifier in the specified way unless specifically forbidden with the forbidden words mechanism. \"t\" means that by default only the author may use it but can specially allow it using the allowed words mechanism. \"f\" means that for whatever reason not even the author may use it. constant is a feature declaring the security level at which a given identifier is to be considered as a constant and can thus be only red and never written to. This makes it so that you cannot write %pi:4 but can use %pi otherwise. evflag is a feature declaring the security level at which a given identifier is to be considered as an evaluation flag. Basically, wether it can be used as a suffix to a statement sqrt(3),numer or as a paramter to ev(sqrt(3),numer=true) and similar functions. function is a feature declaring the security level at which a given identifier is to be considered as a function name and can thus be called. keyword is a feature declaring the security level at which a given identifier is to be considered as a keyword that can be used one could use it to declare that students may not use specific types of loops or other flow control features. operator is a feature declaring the security level at which a given operator is usable at. By operator we mean anything from ^ and and to various brackets. variable is a feature declaring the security level at which a given identifier is to be considered as a variable and can thus be both written and red. In addition to those we also declare certain identifiers with globalyforbiddenfunction or globalyforbiddenvariable in the cases where we might want to handle attempts to use them in a more serious manner.","title":"Security"},{"location":"Developer/Security_map/#nouns","text":"In the old system certain functions and operators were nounified to stop the CAS from evaluating them and thus allow simpler assessment of the original input form. For this we define features nounfunction and nounoperator that have the name of the matching nounified identifier. When processing student input functions and operators that have noun variants are nounified unless specially requested to be kept as is. In addition to the nounifying one may need to denounify and then we define nounoperatorfor or nounfunctionfor at the noun end.","title":"Nouns"},{"location":"Developer/Security_map/#aliases","text":"int(foo,x) is equivalent to integrate(foo,x) which leads to issues when using forbidden words and only forbidding integrate to deal with this we now declare aliases as features for various identifiers so that if you forbid one the others are also forbidden. We also use those aliases to map similar statements to use the same alias thus increasing the likelihood of cache hits. Aliases like nouns are defined by usage type e.g. aliasfunction feature tells that if some one uses a function with this name it should be interpreted as a function call with the name of this feature. aliasvariable does the same for both constants and variables. As it is often necessary to find all the aliases that point to a given identifier we also define features aliasfunctions and aliasvariables that contain lists of such identifiers. Updating such lists should be left to tools that make sure they are correct. Aliases often do not match the logical aliases present in the CAS instead they tend to map things so that they point to the version that is shortest to minimise space usage, e.g. while some might think int => integrate here we rather have integrate => int . The base alias is sent to the CAS. This enables support for some unicode, e.g. pi, which does not break the CAS.","title":"Aliases"},{"location":"Developer/Syntax_Future/","text":"Future plans for syntax of answers and STACK. Problem we are trying to solve : students don't use the correct syntax. We want, as much as possible, to spot common problems and either (1) tell students what they have done wrong, or (2) just condone the problem and fix it quietly. Goal : be as helpful to students as possible. Separate \"spotting problems/setting a context\" from \"Fixing/condoning problems\". Teachers are expected to always use correct Maxima syntax, and use inert functions such as stackunits . Use the \"Insert stars\" option to set the pattern/context for checking expresions. Use the \"Strict syntax\" option to decide if we can fix/condone a problem for students. \"yes\" we don't condone any problem, but we do report back error messages such as \"you seem to be missing *s\", etc. \"no\" we just interpret and use the expression. It may still be \"invalid\". E.g. if we have \"Insert stars\" looking for implied multiplication, and \"Strict syntax\" is \"no\" then a student's answer 2x will be changed to 2*x and used without comment. Some patterns must always be wrong. Always check for these, even with teachers (who also need helpful error messages!). )( must be missing a star. Some implied multiplication patterns such as 2x , or space patterns 2 x . Atoms which appear as both function names and variable names. E.g. x(x+1) . The issues are as follows: Implied multiplication. 2x must be 2*x . x2 could be the atom x2 , x*2 , or x[2] . Only if we look for \"implied multiplication\" do we suggest x2->x*2 . Use of spaces as implied multiplication. 2 x must be 2*x . Assume single variable character names. In many situations we know that a student will only have single character variable names. Identify variables in the student's answer made up of more than one character then replace these with the product of the letters. We identify variables and known functions are now protected, e.g. sin(ax) will not end up as s*i*n*(a*x) but as sin(a*x) . Greek letters are always protected. (This might not work, e.g. pi might be p*i , but this is why we have validation!) in is a keyword in Maxima, but we treat this as a special case in->i*n . asin(x) is a problem, because asin is a function. This is not transformed to a*sin(x) . Prevent the use of any user-defined functions? E.g. f(x+1) is function application in default Maxima, but f us not defined. \"Insert stars\" option. The value of this option is an integer. Sum the numbers for each issue you want to include. I.e. written in binary, each bit acts as a flag for each of the issues above. This is extensible, as we identify new issues. 0 : Expect strict Maxima syntax. I.e. don't insert *s for implied multiplication, or in place of any spaces. 1 : Insert * s for implied multiplication. If any patterns are identified as needing * s then they will automatically be inserted into the expression quietly. 2 : Allow spaces for implied multiplication. 4 : Assume single character variable names. 8 : Assume single character variable nemes, and assume no Maxima constants. E.g. pi is now p*i and not (\\pi). 16 : Assume no user-defined functions. (If 1 is set the insert stars...) Therefore, a value of 3 both inserts * s for implied multiplication and allow spaces to imply multiplication, but we do not assume single character variable names, and we do not prevent user-defined functions. Other proposals. Use the \"forbid floats\" option to deal with patterns like scientific notation. If \"forbid floats\" is true we add patterns so that 3E2 or 3e2 (which Maxima interprets as 300.0 ) are added to any for insert *s. Future developments Support other issues in context, at the parsing stage. Base M numbers Allow entry of unicode? Spot order of precedence problems: x = 1 or 2 (normally used to mean x=1 or x=2 ). Bespoke grammers, e.g. add in support for intervals. x in (-2,-1] or [1,2) . Student use of control structures, e.g. if then... ? Legacy mapping. For old questions (those with stackversion < 2019041600 ) we automatically perform the following mapping for the value of the insert stars option. old -> new (Old phrase). 0 -> 0 (Don't insert stars) 1 -> 1 (Insert stars for implied multiplication only) 2 -> 4 (Insert stars assuming single-character variable names) 3 -> 2 (Insert stars for spaces only) 4 -> 3 (Insert stars for implied multiplication and for spaces) 5 -> 7 (Insert stars assuming single-character variables, implied and for spaces)","title":"Future plans for syntax of answers and STACK."},{"location":"Developer/Syntax_Future/#future-plans-for-syntax-of-answers-and-stack","text":"Problem we are trying to solve : students don't use the correct syntax. We want, as much as possible, to spot common problems and either (1) tell students what they have done wrong, or (2) just condone the problem and fix it quietly. Goal : be as helpful to students as possible. Separate \"spotting problems/setting a context\" from \"Fixing/condoning problems\". Teachers are expected to always use correct Maxima syntax, and use inert functions such as stackunits . Use the \"Insert stars\" option to set the pattern/context for checking expresions. Use the \"Strict syntax\" option to decide if we can fix/condone a problem for students. \"yes\" we don't condone any problem, but we do report back error messages such as \"you seem to be missing *s\", etc. \"no\" we just interpret and use the expression. It may still be \"invalid\". E.g. if we have \"Insert stars\" looking for implied multiplication, and \"Strict syntax\" is \"no\" then a student's answer 2x will be changed to 2*x and used without comment. Some patterns must always be wrong. Always check for these, even with teachers (who also need helpful error messages!). )( must be missing a star. Some implied multiplication patterns such as 2x , or space patterns 2 x . Atoms which appear as both function names and variable names. E.g. x(x+1) . The issues are as follows: Implied multiplication. 2x must be 2*x . x2 could be the atom x2 , x*2 , or x[2] . Only if we look for \"implied multiplication\" do we suggest x2->x*2 . Use of spaces as implied multiplication. 2 x must be 2*x . Assume single variable character names. In many situations we know that a student will only have single character variable names. Identify variables in the student's answer made up of more than one character then replace these with the product of the letters. We identify variables and known functions are now protected, e.g. sin(ax) will not end up as s*i*n*(a*x) but as sin(a*x) . Greek letters are always protected. (This might not work, e.g. pi might be p*i , but this is why we have validation!) in is a keyword in Maxima, but we treat this as a special case in->i*n . asin(x) is a problem, because asin is a function. This is not transformed to a*sin(x) . Prevent the use of any user-defined functions? E.g. f(x+1) is function application in default Maxima, but f us not defined.","title":"Future plans for syntax of answers and STACK."},{"location":"Developer/Syntax_Future/#insert-stars-option","text":"The value of this option is an integer. Sum the numbers for each issue you want to include. I.e. written in binary, each bit acts as a flag for each of the issues above. This is extensible, as we identify new issues. 0 : Expect strict Maxima syntax. I.e. don't insert *s for implied multiplication, or in place of any spaces. 1 : Insert * s for implied multiplication. If any patterns are identified as needing * s then they will automatically be inserted into the expression quietly. 2 : Allow spaces for implied multiplication. 4 : Assume single character variable names. 8 : Assume single character variable nemes, and assume no Maxima constants. E.g. pi is now p*i and not (\\pi). 16 : Assume no user-defined functions. (If 1 is set the insert stars...) Therefore, a value of 3 both inserts * s for implied multiplication and allow spaces to imply multiplication, but we do not assume single character variable names, and we do not prevent user-defined functions.","title":"\"Insert stars\" option."},{"location":"Developer/Syntax_Future/#other-proposals","text":"Use the \"forbid floats\" option to deal with patterns like scientific notation. If \"forbid floats\" is true we add patterns so that 3E2 or 3e2 (which Maxima interprets as 300.0 ) are added to any for insert *s.","title":"Other proposals."},{"location":"Developer/Syntax_Future/#future-developments","text":"Support other issues in context, at the parsing stage. Base M numbers Allow entry of unicode? Spot order of precedence problems: x = 1 or 2 (normally used to mean x=1 or x=2 ). Bespoke grammers, e.g. add in support for intervals. x in (-2,-1] or [1,2) . Student use of control structures, e.g. if then... ?","title":"Future developments"},{"location":"Developer/Syntax_Future/#legacy-mapping","text":"For old questions (those with stackversion < 2019041600 ) we automatically perform the following mapping for the value of the insert stars option. old -> new (Old phrase). 0 -> 0 (Don't insert stars) 1 -> 1 (Insert stars for implied multiplication only) 2 -> 4 (Insert stars assuming single-character variable names) 3 -> 2 (Insert stars for spaces only) 4 -> 3 (Insert stars for implied multiplication and for spaces) 5 -> 7 (Insert stars assuming single-character variables, implied and for spaces)","title":"Legacy mapping."},{"location":"Developer/Unit_tests/","text":"Unit tests Unit testing for STACK comes in the following three parts. PHP Unit tests, Maxima unit tests, Test scripts exposed to the question author. These three mechanisms aim to provide comprehensive testing of STACK. The last category are a compromise, and are designed to expose the results of unit tests to question authors in a reasonably attractive manner to inform them of what each answer test is actually supposed to do. Links to these tests are in the healthcheck page. STACK uses the moodle-ci continuous integration mechanism via github actions so that all unit tests are triggered when a commit is pushed to github. PHP Unit tests Moodle uses PHPUnit for its unit tests. Setting this up and getting it working is a bit of a pain, but you only have to follow the instructions in the Moodle PHPUnit documentation once to get it working. STACK-specific set-up steps Once you have executed php admin/tool/phpunit/cli/init.php you need to edit the config.php file to add the following configuration information near the end, but before the require_once(dirname(__FILE__) . '/lib/setup.php'); . Other options for the platform are linux and linux-optimised . define('QTYPE_STACK_TEST_CONFIG_PLATFORM', 'linux'); /* It is essential that the MAXIMAVERSION and MAXIMACOMMAND match. That is, you must check that the command executed here really loads the version specified in MAXIMAVERSION. Some unit tests are version dependent. Do not use default. */ define('QTYPE_STACK_TEST_CONFIG_MAXIMAVERSION', '5.42.0'); define('QTYPE_STACK_TEST_CONFIG_MAXIMACOMMAND', 'maxima --use-version=5.42.0'); define('QTYPE_STACK_TEST_CONFIG_MAXIMACOMMANDOPT', ''); define('QTYPE_STACK_TEST_CONFIG_MAXIMACOMMANDSERVER', 'http://pool.home:8080/MaximaPool/MaximaPool'); define('QTYPE_STACK_TEST_CONFIG_CASTIMEOUT', '20'); define('QTYPE_STACK_TEST_CONFIG_MAXIMALIBRARIES', 'stats, distrib, descriptive, simplex'); define('QTYPE_STACK_TEST_CONFIG_CASDEBUGGING', '0'); define('QTYPE_STACK_TEST_CONFIG_PLOTCOMMAND', ''); define('QTYPE_STACK_TEST_CONFIG_CASRESULTSCACHE', 'db'); define('QTYPE_STACK_TEST_CONFIG_CASPREPARSE', 'true'); You should probably copy the settings from Admin -> Plugins -> Question types -> STACK. However, you can use the flexibility to have different configurations of STACK for testing in order to test a new release of Maxima, for example. If you want to run just the unit tests for STACK, you can use the command vendor/bin/phpunit --group qtype_stack To make sure this keeps working, please annotate all test classes with /** * @group qtype_stack * @covers class_name */ To generate coverage reports you need to install xdebug. Then modify php.ini configuration file to include xdebug.mode=coverage. Commands are vendor/bin/phpunit --testsuite qtype_stack_testsuite --coverage-html folder-name vendor/bin/phpunit question/type/stack/tests/test.php --coverage-html folder-name (where folder-name is the folder that you want to contains the report) If, for some reason, you have the STACK code in your codebase, and you want to run other unit tests on a server without Maxima installed, then you will get an error when you try to install the PHPunit site. You can avoid that by putting define('QTYPE_STACK_TEST_CONFIG_PLATFORM', 'none'); in your config.php file. This will prevent the install from trying to create maxima-optimised. It will also cause most of the STACK unit tests to be skipped. Stop resetting the dataroot directory. In [...]/moodle/lib/phpunit/classes/util.php public static function reset_all_data() { Comment out the line (currently 253). self::reset_dataroot(); This stops the unit tests from deleting the Maxima image files at each step. Making the tests faster The tests will be very slow, because the Moodle PHPUnit integration keeps resetting the database state between each test, so you get no benefit from the cache. To get around that problem, you can use the option to connect to a different database server for the cache. Modify the following to suit your system and put this near the end of your config.php file: Note you need to make sure the QTYPE_STACK_TEST_CONFIG_CASRESULTSCACHE variable is only defined once. define('QTYPE_STACK_TEST_CONFIG_CASRESULTSCACHE', 'otherdb'); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBTYPE', $CFG->dbtype); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBLIBRARY', $CFG->dblibrary); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBHOST', $CFG->dbhost); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBNAME', $CFG->dbname); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBUSER', $CFG->dbuser); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBPASS', $CFG->dbpass); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBPREFIX', $CFG->prefix); To make sure the CAS cache is cleared after each unit test, revert back to the db settings for QTYPE_STACK_TEST_CONFIG_CASRESULTSCACHE as described above. This will be slow... Other configuration issues Moodle overrides the PHP debug message settings. To see errors and warnings, go to Site administration -> Development -> Debugging and set the Debug messages option. Maxima unit tests Maxima has a unit testing framework called \"rtest\". One complication is that we need to run tests with and without simplification . To help with this, a batch file is provided to run the unit tests. \\moodle\\question\\type\\stack\\stack\\maxima\\unittests_load.mac To run this set up the STACK-maxima-sandbox and load STACK's libraries. Then type load(\"unittests_load.mac\"); The output from these tests is written to .ERR files in \\moodle\\question\\type\\stack\\stack\\maxima\\ . Please note that currently, with simplification false, there are a number of false negative results. That is tests appear to fail, but do not. This is because rtest is not designed to run with simp:false, and so does not correctly decide whether things are really the \"same\" or \"different\". Timing the code. Maxima has a range of functions for code profiling. Put the following at the start of the file. timer(all)$ This adds all user-defined functions to the timer list. To time a single command ev(timer_info(abs_replace), simp); To profile all user-defined commands execute. simp:true$ T:timer_info()$ Find those commands actually called (based on T being the matrix above). S:sublist(rest(args(T)),lambda([a], not(is(third(a)=0)))); Sort by functions called most often. S:sort(S, lambda([a,b],third(a)>third(b))); Sort by the time/call float_time(a):= if a=0 then 0 else first(args(a))$ S:sort(S, lambda([a,b],float_time(second(a))>float_time(second(b)))); Testing ajax specific problems. You need to output values to the file system, as the display can't manage this. For example, file_put_contents(\"/tmp/log.txt\", print_r($result, true)); Testing the updated parser in STACK 4.3 In the STACK directory php cli/casstringtester.php --string=\"0..1\"","title":"Unit tests"},{"location":"Developer/Unit_tests/#unit-tests","text":"Unit testing for STACK comes in the following three parts. PHP Unit tests, Maxima unit tests, Test scripts exposed to the question author. These three mechanisms aim to provide comprehensive testing of STACK. The last category are a compromise, and are designed to expose the results of unit tests to question authors in a reasonably attractive manner to inform them of what each answer test is actually supposed to do. Links to these tests are in the healthcheck page. STACK uses the moodle-ci continuous integration mechanism via github actions so that all unit tests are triggered when a commit is pushed to github.","title":"Unit tests"},{"location":"Developer/Unit_tests/#php-unit-tests","text":"Moodle uses PHPUnit for its unit tests. Setting this up and getting it working is a bit of a pain, but you only have to follow the instructions in the Moodle PHPUnit documentation once to get it working.","title":"PHP Unit tests"},{"location":"Developer/Unit_tests/#stack-specific-set-up-steps","text":"Once you have executed php admin/tool/phpunit/cli/init.php you need to edit the config.php file to add the following configuration information near the end, but before the require_once(dirname(__FILE__) . '/lib/setup.php'); . Other options for the platform are linux and linux-optimised . define('QTYPE_STACK_TEST_CONFIG_PLATFORM', 'linux'); /* It is essential that the MAXIMAVERSION and MAXIMACOMMAND match. That is, you must check that the command executed here really loads the version specified in MAXIMAVERSION. Some unit tests are version dependent. Do not use default. */ define('QTYPE_STACK_TEST_CONFIG_MAXIMAVERSION', '5.42.0'); define('QTYPE_STACK_TEST_CONFIG_MAXIMACOMMAND', 'maxima --use-version=5.42.0'); define('QTYPE_STACK_TEST_CONFIG_MAXIMACOMMANDOPT', ''); define('QTYPE_STACK_TEST_CONFIG_MAXIMACOMMANDSERVER', 'http://pool.home:8080/MaximaPool/MaximaPool'); define('QTYPE_STACK_TEST_CONFIG_CASTIMEOUT', '20'); define('QTYPE_STACK_TEST_CONFIG_MAXIMALIBRARIES', 'stats, distrib, descriptive, simplex'); define('QTYPE_STACK_TEST_CONFIG_CASDEBUGGING', '0'); define('QTYPE_STACK_TEST_CONFIG_PLOTCOMMAND', ''); define('QTYPE_STACK_TEST_CONFIG_CASRESULTSCACHE', 'db'); define('QTYPE_STACK_TEST_CONFIG_CASPREPARSE', 'true'); You should probably copy the settings from Admin -> Plugins -> Question types -> STACK. However, you can use the flexibility to have different configurations of STACK for testing in order to test a new release of Maxima, for example. If you want to run just the unit tests for STACK, you can use the command vendor/bin/phpunit --group qtype_stack To make sure this keeps working, please annotate all test classes with /** * @group qtype_stack * @covers class_name */ To generate coverage reports you need to install xdebug. Then modify php.ini configuration file to include xdebug.mode=coverage. Commands are vendor/bin/phpunit --testsuite qtype_stack_testsuite --coverage-html folder-name vendor/bin/phpunit question/type/stack/tests/test.php --coverage-html folder-name (where folder-name is the folder that you want to contains the report) If, for some reason, you have the STACK code in your codebase, and you want to run other unit tests on a server without Maxima installed, then you will get an error when you try to install the PHPunit site. You can avoid that by putting define('QTYPE_STACK_TEST_CONFIG_PLATFORM', 'none'); in your config.php file. This will prevent the install from trying to create maxima-optimised. It will also cause most of the STACK unit tests to be skipped.","title":"STACK-specific set-up steps"},{"location":"Developer/Unit_tests/#stop-resetting-the-dataroot-directory","text":"In [...]/moodle/lib/phpunit/classes/util.php public static function reset_all_data() { Comment out the line (currently 253). self::reset_dataroot(); This stops the unit tests from deleting the Maxima image files at each step.","title":"Stop resetting the dataroot directory."},{"location":"Developer/Unit_tests/#making-the-tests-faster","text":"The tests will be very slow, because the Moodle PHPUnit integration keeps resetting the database state between each test, so you get no benefit from the cache. To get around that problem, you can use the option to connect to a different database server for the cache. Modify the following to suit your system and put this near the end of your config.php file: Note you need to make sure the QTYPE_STACK_TEST_CONFIG_CASRESULTSCACHE variable is only defined once. define('QTYPE_STACK_TEST_CONFIG_CASRESULTSCACHE', 'otherdb'); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBTYPE', $CFG->dbtype); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBLIBRARY', $CFG->dblibrary); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBHOST', $CFG->dbhost); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBNAME', $CFG->dbname); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBUSER', $CFG->dbuser); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBPASS', $CFG->dbpass); define('QTYPE_STACK_TEST_CONFIG_CASCACHEDBPREFIX', $CFG->prefix); To make sure the CAS cache is cleared after each unit test, revert back to the db settings for QTYPE_STACK_TEST_CONFIG_CASRESULTSCACHE as described above. This will be slow...","title":"Making the tests faster"},{"location":"Developer/Unit_tests/#other-configuration-issues","text":"Moodle overrides the PHP debug message settings. To see errors and warnings, go to Site administration -> Development -> Debugging and set the Debug messages option.","title":"Other configuration issues"},{"location":"Developer/Unit_tests/#maxima-unit-tests","text":"Maxima has a unit testing framework called \"rtest\". One complication is that we need to run tests with and without simplification . To help with this, a batch file is provided to run the unit tests. \\moodle\\question\\type\\stack\\stack\\maxima\\unittests_load.mac To run this set up the STACK-maxima-sandbox and load STACK's libraries. Then type load(\"unittests_load.mac\"); The output from these tests is written to .ERR files in \\moodle\\question\\type\\stack\\stack\\maxima\\ . Please note that currently, with simplification false, there are a number of false negative results. That is tests appear to fail, but do not. This is because rtest is not designed to run with simp:false, and so does not correctly decide whether things are really the \"same\" or \"different\".","title":"Maxima unit tests"},{"location":"Developer/Unit_tests/#timing-the-code","text":"Maxima has a range of functions for code profiling. Put the following at the start of the file. timer(all)$ This adds all user-defined functions to the timer list. To time a single command ev(timer_info(abs_replace), simp); To profile all user-defined commands execute. simp:true$ T:timer_info()$ Find those commands actually called (based on T being the matrix above). S:sublist(rest(args(T)),lambda([a], not(is(third(a)=0)))); Sort by functions called most often. S:sort(S, lambda([a,b],third(a)>third(b))); Sort by the time/call float_time(a):= if a=0 then 0 else first(args(a))$ S:sort(S, lambda([a,b],float_time(second(a))>float_time(second(b))));","title":"Timing the code."},{"location":"Developer/Unit_tests/#testing-ajax-specific-problems","text":"You need to output values to the file system, as the display can't manage this. For example, file_put_contents(\"/tmp/log.txt\", print_r($result, true));","title":"Testing ajax specific problems."},{"location":"Developer/Unit_tests/#testing-the-updated-parser-in-stack-43","text":"In the STACK directory php cli/casstringtester.php --string=\"0..1\"","title":"Testing the updated parser in STACK 4.3"},{"location":"Developer/Updating_JSXGraph/","text":"Updating JSXGraph Since the stack-js update, we have been able to use JSXGraph in its released form. The files related to it are now stored under corsscripts/ . Download JSXGraph from here: https://github.com/jsxgraph/jsxgraph . The files one needs to copy over are jsxgraph.min.css and jsxgraphcore.min.js , there is no need to copy the non minified versions. The old STACK side jsxgraph.js that provided the stack_jxg features is now called stackjsxgraph.js and is being served from that same CORS-header tuning directory with that specific script. We do not apply Moodles or any other systems JavaScript processing on these, no need to run grunt or any such tool. NOTE! We really want to have a local JSXGraph copy instead of relying on a CDN version. We want to make it easy to run STACK in a closed network with no external requirements and having a local JSXGraph is one of the things we do to remove an external requirement.","title":"Updating JSXGraph"},{"location":"Developer/Updating_JSXGraph/#updating-jsxgraph","text":"Since the stack-js update, we have been able to use JSXGraph in its released form. The files related to it are now stored under corsscripts/ . Download JSXGraph from here: https://github.com/jsxgraph/jsxgraph . The files one needs to copy over are jsxgraph.min.css and jsxgraphcore.min.js , there is no need to copy the non minified versions. The old STACK side jsxgraph.js that provided the stack_jxg features is now called stackjsxgraph.js and is being served from that same CORS-header tuning directory with that specific script. We do not apply Moodles or any other systems JavaScript processing on these, no need to run grunt or any such tool.","title":"Updating JSXGraph"},{"location":"Developer/Updating_JSXGraph/#note","text":"We really want to have a local JSXGraph copy instead of relying on a CDN version. We want to make it easy to run STACK in a closed network with no external requirements and having a local JSXGraph is one of the things we do to remove an external requirement.","title":"NOTE!"},{"location":"Developer/UpgradeDefaults/","text":"Upgrading question defaults A number of default settings have been changed in recent versions of STACK. There is no Moodle-based mechanism to change these settings in all current questions. One user-level way to change all the questions is to export and edit the resulting .xml. For example, the following are useful find/replace pairs. <text>Correct answer, well done.</text> <text><![CDATA[<span style=\"font-size: 1.5em; color:green;\"><i class=\"fa fa-check\"></i></span> Correct answer, well done.]]></text> <text>Your answer is partially correct.</text> <text><![CDATA[<span style=\"font-size: 1.5em; color:orange;\"><i class=\"fa fa-adjust\"></i></span> Your answer is partially correct.]]></text> <text>Incorrect answer.</text> <text><![CDATA[<span style=\"font-size: 1.5em; color:red;\"><i class=\"fa fa-times\"></i></span> Incorrect answer.]]></text> The API/YAML format will make this kind of maintenance much easier.","title":"Upgrading question defaults"},{"location":"Developer/UpgradeDefaults/#upgrading-question-defaults","text":"A number of default settings have been changed in recent versions of STACK. There is no Moodle-based mechanism to change these settings in all current questions. One user-level way to change all the questions is to export and edit the resulting .xml. For example, the following are useful find/replace pairs. <text>Correct answer, well done.</text> <text><![CDATA[<span style=\"font-size: 1.5em; color:green;\"><i class=\"fa fa-check\"></i></span> Correct answer, well done.]]></text> <text>Your answer is partially correct.</text> <text><![CDATA[<span style=\"font-size: 1.5em; color:orange;\"><i class=\"fa fa-adjust\"></i></span> Your answer is partially correct.]]></text> <text>Incorrect answer.</text> <text><![CDATA[<span style=\"font-size: 1.5em; color:red;\"><i class=\"fa fa-times\"></i></span> Incorrect answer.]]></text> The API/YAML format will make this kind of maintenance much easier.","title":"Upgrading question defaults"},{"location":"Developer/Website/","text":"Updating the Online Docs The STACK documentation is available online on docs.stack-assessment.org . The docs are automatically built whenever this repository is pushed to. This documentation details how to update the styling of the online docs. What is not covered in this document Instructions for updating the main website www.stack-assessment.org . The main website is built in the stack-web repository, and has its own documentation . Framework The website is built using MkDocs , a static site generator which converts STACK documentation, within the /doc directory, into HTML files and pushes them to the gh-pages branch. The website structure mirrors the file structure: the file doc/en/Authoring/Answer_Tests/index.md will be available on docs.stack-assessment.org/en/Authoring/Answer_tests/ . Every sub-folder has an index.md file that will take that folder's name on the website: doc/en/Authoring/index.md will be available on docs.stack-assessment.org/en/Authoring/ . MkDocs is configured in the mkdocs.yml file. MkDocs has a full list of available configuration options . MkDocs can either generate the navigation bar automatically, or accept a custom navigation configuration in the nav variable. The online docs uses the first option. The advantage is that new files are automatically added to the navigation bar when they are added to the repository. The disadvantage is that we cannot tweak the navigation bar manually. The online docs get around this with a number of workarounds. MkDocs cannot display MathJax out-of-the-box, so we use the markdown extension mdx_math , specified in mkdocs.yml , with the variable extra_javascript set to include MathJax. MkDocs can accept a third-party theme, and the main STACK website uses the Material Theme , mainly for its better search display and adaptive structure. The site is hosted by GitHub Pages from the gh-pages branch. A workflow under .github ensures that MkDocs runs its command mkdocs gh-deploy every time the repository is pushed to, which rebuilds the website and pushes the built HTML piles to the gh-pages branch. This overrides all the files currently in the gh-pages branch, so you must never edit files directly in the gh-pages branch . STACK-specific Workarounds The online docs use a number of workarounds to make MkDocs compatible with the STACK docs. Dealing with the structure of the docs MkDocs expects a single folder to contain all the website files, starting with an index.md file that is to be the landing page. However, STACK's docs have a different structure: doc contains the content folder, and the two language folders where the documentation is provided. The landing page is under en/index.md . To work around this, we set doc to be the location of the docs, and use the plugin mkdocs-exclude to unwanted files from the navigation, such as /de and en/Site_map.md . We then use the plugin mkdocs-redirects to redirect the non-existing index.md file to the true landing page en/index.md . The effect of this is that docs.stack-assessment.org will always redirect to docs.stack-assessment.org/en/ . We also update the sidebar navigation, such that it does not show the en directory. This is done by overriding Material's nav-item partial in the site_overrides/partials/ directory. Dealing with the theme The online docs make a number of custom changes to the Material theme. We use the basic MkDocs search algorithm, by including a script in the {% block config %} block under site_overrides/main.html In site_overrides/partials/logo.html we customise how the STACK logo is shown. This is necessary, since the STACK logo is not square. We add a custom footer in the {% block footer %} block under site_overrides/main.html . In here we copy Material's primary and secondary sidebar classes, such that the footer collapses when the sidebar navigation and search bar does. It was necessary to make an identical copy of the md-sidebar--primary class called md-sidebar--primary_footer , to avoid the sidebar breaking when zoomed. Updating the documentation When you change the documentation, the website automatically updates as well. This introduces some new limitations to the sort of elements that can be included in the documentation. This is documented in the Documentation file. Updating the style The online docs uses a custom CSS stylesheet which you can edit. This stylesheet builds upon the stylesheets of MkDocs and Material. You can also edit the theme directly. Any file in the site_overrides folder will override files of the same name in Material's directory . The main.html file is designed to make it easy to override some predetermined blocks , but sometimes it is necessary to override files directly. Notice we directly override some of Material's partials . Testing the website locally Before adding major style changes to the online docs, you are encouraged to test your changes locally. For this, you will need to install MkDocs and all the required extensions. Install MkDocs , including its requirements. Install Material with pip install mkdocs-material Install the markdown extension with pip install https://github.com/mitya57/python-markdown-math/archive/master.zip Install the exclude plugin with pip install mkdocs-exclude Install the redirect plugin with pip install mkdocs-redirects You can run a local version of the website with the command mkdocs serve . This will make your local version available on the IP http://127.0.0.1:8000/ . Please test that your changes work on: The following browsers: Chrome, Firefox, Safari, Edge. The following sizes: Computer, tablet, mobile. Chrome's \"inspect\" tool works well for this.","title":"Updating the Online Docs"},{"location":"Developer/Website/#updating-the-online-docs","text":"The STACK documentation is available online on docs.stack-assessment.org . The docs are automatically built whenever this repository is pushed to. This documentation details how to update the styling of the online docs.","title":"Updating the Online Docs"},{"location":"Developer/Website/#what-is-not-covered-in-this-document","text":"Instructions for updating the main website www.stack-assessment.org . The main website is built in the stack-web repository, and has its own documentation .","title":"What is not covered in this document"},{"location":"Developer/Website/#framework","text":"The website is built using MkDocs , a static site generator which converts STACK documentation, within the /doc directory, into HTML files and pushes them to the gh-pages branch. The website structure mirrors the file structure: the file doc/en/Authoring/Answer_Tests/index.md will be available on docs.stack-assessment.org/en/Authoring/Answer_tests/ . Every sub-folder has an index.md file that will take that folder's name on the website: doc/en/Authoring/index.md will be available on docs.stack-assessment.org/en/Authoring/ . MkDocs is configured in the mkdocs.yml file. MkDocs has a full list of available configuration options . MkDocs can either generate the navigation bar automatically, or accept a custom navigation configuration in the nav variable. The online docs uses the first option. The advantage is that new files are automatically added to the navigation bar when they are added to the repository. The disadvantage is that we cannot tweak the navigation bar manually. The online docs get around this with a number of workarounds. MkDocs cannot display MathJax out-of-the-box, so we use the markdown extension mdx_math , specified in mkdocs.yml , with the variable extra_javascript set to include MathJax. MkDocs can accept a third-party theme, and the main STACK website uses the Material Theme , mainly for its better search display and adaptive structure. The site is hosted by GitHub Pages from the gh-pages branch. A workflow under .github ensures that MkDocs runs its command mkdocs gh-deploy every time the repository is pushed to, which rebuilds the website and pushes the built HTML piles to the gh-pages branch. This overrides all the files currently in the gh-pages branch, so you must never edit files directly in the gh-pages branch .","title":"Framework"},{"location":"Developer/Website/#stack-specific-workarounds","text":"The online docs use a number of workarounds to make MkDocs compatible with the STACK docs.","title":"STACK-specific Workarounds"},{"location":"Developer/Website/#dealing-with-the-structure-of-the-docs","text":"MkDocs expects a single folder to contain all the website files, starting with an index.md file that is to be the landing page. However, STACK's docs have a different structure: doc contains the content folder, and the two language folders where the documentation is provided. The landing page is under en/index.md . To work around this, we set doc to be the location of the docs, and use the plugin mkdocs-exclude to unwanted files from the navigation, such as /de and en/Site_map.md . We then use the plugin mkdocs-redirects to redirect the non-existing index.md file to the true landing page en/index.md . The effect of this is that docs.stack-assessment.org will always redirect to docs.stack-assessment.org/en/ . We also update the sidebar navigation, such that it does not show the en directory. This is done by overriding Material's nav-item partial in the site_overrides/partials/ directory.","title":"Dealing with the structure of the docs"},{"location":"Developer/Website/#dealing-with-the-theme","text":"The online docs make a number of custom changes to the Material theme. We use the basic MkDocs search algorithm, by including a script in the {% block config %} block under site_overrides/main.html In site_overrides/partials/logo.html we customise how the STACK logo is shown. This is necessary, since the STACK logo is not square. We add a custom footer in the {% block footer %} block under site_overrides/main.html . In here we copy Material's primary and secondary sidebar classes, such that the footer collapses when the sidebar navigation and search bar does. It was necessary to make an identical copy of the md-sidebar--primary class called md-sidebar--primary_footer , to avoid the sidebar breaking when zoomed.","title":"Dealing with the theme"},{"location":"Developer/Website/#updating-the-documentation","text":"When you change the documentation, the website automatically updates as well. This introduces some new limitations to the sort of elements that can be included in the documentation. This is documented in the Documentation file.","title":"Updating the documentation"},{"location":"Developer/Website/#updating-the-style","text":"The online docs uses a custom CSS stylesheet which you can edit. This stylesheet builds upon the stylesheets of MkDocs and Material. You can also edit the theme directly. Any file in the site_overrides folder will override files of the same name in Material's directory . The main.html file is designed to make it easy to override some predetermined blocks , but sometimes it is necessary to override files directly. Notice we directly override some of Material's partials .","title":"Updating the style"},{"location":"Developer/Website/#testing-the-website-locally","text":"Before adding major style changes to the online docs, you are encouraged to test your changes locally. For this, you will need to install MkDocs and all the required extensions. Install MkDocs , including its requirements. Install Material with pip install mkdocs-material Install the markdown extension with pip install https://github.com/mitya57/python-markdown-math/archive/master.zip Install the exclude plugin with pip install mkdocs-exclude Install the redirect plugin with pip install mkdocs-redirects You can run a local version of the website with the command mkdocs serve . This will make your local version available on the IP http://127.0.0.1:8000/ . Please test that your changes work on: The following browsers: Chrome, Firefox, Safari, Edge. The following sizes: Computer, tablet, mobile. Chrome's \"inspect\" tool works well for this.","title":"Testing the website locally"},{"location":"Installation/","text":"Installation instructions. STACK is being used live at many institutions, including the University of Edinburgh, the UK Open University, Aalto, Loughborough University, and the University of Birmingham in the UK. We appreciate some people perfer hosted services as an alterntaive to running their own server. We are pleased to work with EDINA at the University of Edinburgh as a recommended hosting partner . STACK is designed to be used on a Linux-based server. The Windows/MS option exists to help teachers author questions offline, and for demonstration and development. However, for demonstration, development and offline use we strongly recommend using VirtualBox instead of the Windows port. Note also that support for the optimized Maxima image is not available on Windows platforms, which is a substantial performance improvement. 0. Set up PHP with mbstring STACK v4.3 and later require the PHP mbstring library. While this is included in many distros, it is not yet included by default in all. On an existing Moodle site navigate to /admin/environment.php to confirm before adding this plug-in. On some Linux distros, you simply need to apt-get install php-mbstring and then re-start the web server. 1. Set up Moodle. Please ensure you have installed Moodle . STACK has been tested on Moodle 3.9 to Moodle 4.0 inclusive. (STACK is untested on versions before Moodle 3.9.) We intend to support STACK within the normal Moodle release cycle . We intend to support all future Moodle releases. If your version of Moodle is not listed here please contact the developers: we probably simply have not done the testing of future versions yet. For longer support of older versions of Moodle please contact us, otherwise will will drop them from our list. Please ensure LaTeX can be displayed. We currently support MathJax through the Moodle MathJax filter. Consider updating the MathJax settings to wrap long equations. In particular, add CommonHTML: { linebreaks: { automatic: true } }, \"HTML-CSS\": { linebreaks: { automatic: true } }, SVG: { linebreaks: { automatic: true } } to filter_mathjaxloader | mathjaxconfig in the filter settings: Dashboard > Site administration > Plugins > Filters > MathJax 2. Install gnuplot and Maxima Ensure gcc, gnuplot and Maxima are installed on your server. Currently Maxima 5.38.1 to 5.47.0 are supported. Please contact the developers to request support for other versions. (Newer versions will be supported, and prompts to test them are welcome.) We currently recommend that you use any version of Maxima after 5.43.0. Maxima can be installed via a package manager on most Linux distributions (e.g. sudo apt-get install maxima on Debian/Ubuntu), downloaded as a self-contained installer program for Windows, or compiled from source . To check your version of maxima, run maxima --version . If Moodle is set up using Apache, STACK will run maxima through the Apache user ( www-data/apache2 ). To check that this works, run maxima as the apache user (e.g. sudo -u www-data maxima ). Later versions of maxima create a cache and thus the executing user needs to have write access to a temporary folder, see #731 for more details and troubleshooting. Alternatively, Maxima can also be run on a separate server via GoeMaxima or MaximaPool . Please note Please avoid versions 5.37.x which are known to have a minor bug which affects STACK. In particular with simp:false , (s^{-1}) is transformed into (1/s). This apparently minor change makes it impossible to distinguish between the two forms. This causes all sorts of problems. Do not use Maxima 5.37.1 to 5.37.3. Older versions of Maxima: in particular, Maxima 5.23.2 has some differences which result in (1/\\sqrt{x} \\neq \\sqrt{1/x}), and similar problems. This means that we have an inconsistency between questions between versions of maxima. Of course, we can argue about which values of (x) make (1/\\sqrt{x} = \\sqrt{1/x}), but currently the unit tests and assumption is that these expressions should be considered to be algebraically equivalent! So, older versions of Maxima are not supported for a reason. Please test thoroughly if you try to use an older version, and expect some errors in the mathematical parts of the code. If you install more than one version of Maxima then you will need to tell STACK which version to use. Otherwise just use the \"default\" option. Instructions for installing a more recent version of Maxima on CentOS 6 are available on the Moodle forum (Oct 2014). 3. Add some additional question behaviours STACK requires these. Obtain Deferred feedback with explicit validation behaviour code. You can download the zip file , unzip it, and place it in the directory moodle/question/behaviour/dfexplicitvaildate . (You will need to rename the directory moodle-qbehaviour_dfexplicitvaildate -> dfexplicitvaildate .) Alternatively, get the code using git by running the following command in the top level folder of your Moodle install: git clone https://github.com/maths/moodle-qbehaviour_dfexplicitvaildate.git question/behaviour/dfexplicitvaildate Obtain Deferred feedback with CBM and explicit validation behaviour code. You can download the zip file , unzip it, and place it in the directory moodle/question/behaviour/dfcbmexplicitvaildate . (You will need to rename the directory moodle-qbehaviour_dfcbmexplicitvaildate -> dfcbmexplicitvaildate .) Alternatively, get the code using git by running the following command in the top level folder of your Moodle install: git clone https://github.com/maths/moodle-qbehaviour_dfcbmexplicitvaildate.git question/behaviour/dfcbmexplicitvaildate Obtain adaptivemutlipart behaviour code. You can download the zip file , unzip it, and place it in the directory moodle/question/behaviour/adaptivemultipart . (You will need to rename the directory moodle-qbehaviour_adaptivemultipart -> adaptivemultipart .) Alternatively, get the code using git by running the following command in the top level folder of your Moodle install: git clone https://github.com/maths/moodle-qbehaviour_adaptivemultipart.git question/behaviour/adaptivemultipart Login to Moodle as the admin user and click on Notifications in the Site Administration panel. 4. Add the STACK question type STACK is a question type for the Moodle quiz. Obtain the code. You can download the zip file , unzip it, and place it in the directory moodle/question/type/stack . (You will need to rename the directory moodle-qtype_stack -> stack .) Alternatively, get the code using git by running the following command in the top level folder of your Moodle install: git clone https://github.com/maths/moodle-qtype_stack.git question/type/stack Login to Moodle as the admin user and click on Notifications in the Site Administration panel. As the admin user, navigate to Home > Site administration > Plugins > Question types > STACK . Please choose and save the appropriate options. On the same page, click on the link to the healthcheck script. This writes local configuration files and then helps you verify that all aspects of STACK are working properly. You must be able to connect to the CAS, and for the CAS to successfully create plots, before you can use STACK. You might want to try optimising Maxima access times. You should now have a question type available to the Moodle quiz. 5. Multi-language support STACK questions can be localised into multiple languages . Your site administrator must enable the Moodle multi-language content filter . The multi-language content filter must be applied before the MathJax filter, otherwise strange results will occur. 6. Post-install confirmation. It is essential to confirm that the PHP scripts are connecting to the CAS. We have special scripts which provide confirmation and trouble-shooting data to test the installation . 7. Optional (but recommended): Fix DB case sensitivity issue. Using a database with a case insensitive collation can cause issues; for example MySQL with utf8mb4_unicode_ci. This is a general problem of Moodle, not specific to this plugin. See Database collation issue . If your DB uses case insensitive collations you must change them to case sensitive ones for the following columns: qtype_stacks_inputs -> name Example command for MySQL 8.0: ALTER TABLE mdl_qtype_stack_inputs CHANGE name name VARCHAR(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT ''; STACK will work without this fix, but input names will not be case sensitive (!) as far as Moodle's database is concerned. This will throw errors for some questions. Updating to new versions of STACK 4.X If STACK is already installed, as described above, it can be updated via git, like this: Go into your moodle-dir and execute: cd question/type/stack git pull cd .. cd .. cd behaviour/dfcbmexplicitvaildate/ git pull cd .. cd dfcbmexplicitvaildate/ git pull cd .. cd adaptivemultipart/ git pull Then login as admin in your moodle and update the database. As admin user, navigate to yourmoodle/admin/settings.php?section=qtypesettingstack Check for the correct maxima version. Click on the link to the healthcheck script. This writes local configuration files and then helps you verify that all aspects of STACK are working properly. On the same site, you might need to create a new maxima image, by using the button at the end of the page. It is a good idea to bulk test your materials with the new version. If you are upgrading from much older versions please look at the migrations page .","title":"Instalaci\u00f3n"},{"location":"Installation/#installation-instructions","text":"STACK is being used live at many institutions, including the University of Edinburgh, the UK Open University, Aalto, Loughborough University, and the University of Birmingham in the UK. We appreciate some people perfer hosted services as an alterntaive to running their own server. We are pleased to work with EDINA at the University of Edinburgh as a recommended hosting partner . STACK is designed to be used on a Linux-based server. The Windows/MS option exists to help teachers author questions offline, and for demonstration and development. However, for demonstration, development and offline use we strongly recommend using VirtualBox instead of the Windows port. Note also that support for the optimized Maxima image is not available on Windows platforms, which is a substantial performance improvement.","title":"Installation instructions."},{"location":"Installation/#0-set-up-php-with-mbstring","text":"STACK v4.3 and later require the PHP mbstring library. While this is included in many distros, it is not yet included by default in all. On an existing Moodle site navigate to /admin/environment.php to confirm before adding this plug-in. On some Linux distros, you simply need to apt-get install php-mbstring and then re-start the web server.","title":"0. Set up PHP with mbstring"},{"location":"Installation/#1-set-up-moodle","text":"Please ensure you have installed Moodle . STACK has been tested on Moodle 3.9 to Moodle 4.0 inclusive. (STACK is untested on versions before Moodle 3.9.) We intend to support STACK within the normal Moodle release cycle . We intend to support all future Moodle releases. If your version of Moodle is not listed here please contact the developers: we probably simply have not done the testing of future versions yet. For longer support of older versions of Moodle please contact us, otherwise will will drop them from our list. Please ensure LaTeX can be displayed. We currently support MathJax through the Moodle MathJax filter. Consider updating the MathJax settings to wrap long equations. In particular, add CommonHTML: { linebreaks: { automatic: true } }, \"HTML-CSS\": { linebreaks: { automatic: true } }, SVG: { linebreaks: { automatic: true } } to filter_mathjaxloader | mathjaxconfig in the filter settings: Dashboard > Site administration > Plugins > Filters > MathJax","title":"1. Set up Moodle."},{"location":"Installation/#2-install-gnuplot-and-maxima","text":"Ensure gcc, gnuplot and Maxima are installed on your server. Currently Maxima 5.38.1 to 5.47.0 are supported. Please contact the developers to request support for other versions. (Newer versions will be supported, and prompts to test them are welcome.) We currently recommend that you use any version of Maxima after 5.43.0. Maxima can be installed via a package manager on most Linux distributions (e.g. sudo apt-get install maxima on Debian/Ubuntu), downloaded as a self-contained installer program for Windows, or compiled from source . To check your version of maxima, run maxima --version . If Moodle is set up using Apache, STACK will run maxima through the Apache user ( www-data/apache2 ). To check that this works, run maxima as the apache user (e.g. sudo -u www-data maxima ). Later versions of maxima create a cache and thus the executing user needs to have write access to a temporary folder, see #731 for more details and troubleshooting. Alternatively, Maxima can also be run on a separate server via GoeMaxima or MaximaPool . Please note Please avoid versions 5.37.x which are known to have a minor bug which affects STACK. In particular with simp:false , (s^{-1}) is transformed into (1/s). This apparently minor change makes it impossible to distinguish between the two forms. This causes all sorts of problems. Do not use Maxima 5.37.1 to 5.37.3. Older versions of Maxima: in particular, Maxima 5.23.2 has some differences which result in (1/\\sqrt{x} \\neq \\sqrt{1/x}), and similar problems. This means that we have an inconsistency between questions between versions of maxima. Of course, we can argue about which values of (x) make (1/\\sqrt{x} = \\sqrt{1/x}), but currently the unit tests and assumption is that these expressions should be considered to be algebraically equivalent! So, older versions of Maxima are not supported for a reason. Please test thoroughly if you try to use an older version, and expect some errors in the mathematical parts of the code. If you install more than one version of Maxima then you will need to tell STACK which version to use. Otherwise just use the \"default\" option. Instructions for installing a more recent version of Maxima on CentOS 6 are available on the Moodle forum (Oct 2014).","title":"2. Install gnuplot and Maxima"},{"location":"Installation/#3-add-some-additional-question-behaviours","text":"STACK requires these. Obtain Deferred feedback with explicit validation behaviour code. You can download the zip file , unzip it, and place it in the directory moodle/question/behaviour/dfexplicitvaildate . (You will need to rename the directory moodle-qbehaviour_dfexplicitvaildate -> dfexplicitvaildate .) Alternatively, get the code using git by running the following command in the top level folder of your Moodle install: git clone https://github.com/maths/moodle-qbehaviour_dfexplicitvaildate.git question/behaviour/dfexplicitvaildate Obtain Deferred feedback with CBM and explicit validation behaviour code. You can download the zip file , unzip it, and place it in the directory moodle/question/behaviour/dfcbmexplicitvaildate . (You will need to rename the directory moodle-qbehaviour_dfcbmexplicitvaildate -> dfcbmexplicitvaildate .) Alternatively, get the code using git by running the following command in the top level folder of your Moodle install: git clone https://github.com/maths/moodle-qbehaviour_dfcbmexplicitvaildate.git question/behaviour/dfcbmexplicitvaildate Obtain adaptivemutlipart behaviour code. You can download the zip file , unzip it, and place it in the directory moodle/question/behaviour/adaptivemultipart . (You will need to rename the directory moodle-qbehaviour_adaptivemultipart -> adaptivemultipart .) Alternatively, get the code using git by running the following command in the top level folder of your Moodle install: git clone https://github.com/maths/moodle-qbehaviour_adaptivemultipart.git question/behaviour/adaptivemultipart Login to Moodle as the admin user and click on Notifications in the Site Administration panel.","title":"3. Add some additional question behaviours"},{"location":"Installation/#4-add-the-stack-question-type","text":"STACK is a question type for the Moodle quiz. Obtain the code. You can download the zip file , unzip it, and place it in the directory moodle/question/type/stack . (You will need to rename the directory moodle-qtype_stack -> stack .) Alternatively, get the code using git by running the following command in the top level folder of your Moodle install: git clone https://github.com/maths/moodle-qtype_stack.git question/type/stack Login to Moodle as the admin user and click on Notifications in the Site Administration panel. As the admin user, navigate to Home > Site administration > Plugins > Question types > STACK . Please choose and save the appropriate options. On the same page, click on the link to the healthcheck script. This writes local configuration files and then helps you verify that all aspects of STACK are working properly. You must be able to connect to the CAS, and for the CAS to successfully create plots, before you can use STACK. You might want to try optimising Maxima access times. You should now have a question type available to the Moodle quiz.","title":"4. Add the STACK question type"},{"location":"Installation/#5-multi-language-support","text":"STACK questions can be localised into multiple languages . Your site administrator must enable the Moodle multi-language content filter . The multi-language content filter must be applied before the MathJax filter, otherwise strange results will occur.","title":"5. Multi-language support"},{"location":"Installation/#6-post-install-confirmation","text":"It is essential to confirm that the PHP scripts are connecting to the CAS. We have special scripts which provide confirmation and trouble-shooting data to test the installation .","title":"6. Post-install confirmation."},{"location":"Installation/#7-optional-but-recommended-fix-db-case-sensitivity-issue","text":"Using a database with a case insensitive collation can cause issues; for example MySQL with utf8mb4_unicode_ci. This is a general problem of Moodle, not specific to this plugin. See Database collation issue . If your DB uses case insensitive collations you must change them to case sensitive ones for the following columns: qtype_stacks_inputs -> name Example command for MySQL 8.0: ALTER TABLE mdl_qtype_stack_inputs CHANGE name name VARCHAR(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT ''; STACK will work without this fix, but input names will not be case sensitive (!) as far as Moodle's database is concerned. This will throw errors for some questions.","title":"7. Optional (but recommended): Fix DB case sensitivity issue."},{"location":"Installation/#updating-to-new-versions-of-stack-4x","text":"If STACK is already installed, as described above, it can be updated via git, like this: Go into your moodle-dir and execute: cd question/type/stack git pull cd .. cd .. cd behaviour/dfcbmexplicitvaildate/ git pull cd .. cd dfcbmexplicitvaildate/ git pull cd .. cd adaptivemultipart/ git pull Then login as admin in your moodle and update the database. As admin user, navigate to yourmoodle/admin/settings.php?section=qtypesettingstack Check for the correct maxima version. Click on the link to the healthcheck script. This writes local configuration files and then helps you verify that all aspects of STACK are working properly. On the same site, you might need to create a new maxima image, by using the button at the end of the page. It is a good idea to bulk test your materials with the new version. If you are upgrading from much older versions please look at the migrations page .","title":"Updating to new versions of STACK 4.X"},{"location":"Installation/LTI/","text":"About LTI Learning Tools Interoperability (LTI) is a web services protocol which allows online learning systems to exchange information and interconnect. It can be used to provide quizzes (containing STACK questions or not) to other learning systems, or to include quizzes within a Moodle system on which STACK is not installed. LTI is entirely separate from STACK, and the details of the protocol are available from the IMS Global website. LTI can be used to provide/consume a wide range of functionality beyond STACK quizzes. Installing LTI There are two sides to LTI: the provider and consumer. If you haven't installed STACK on your server, or use another learning management system, you will need to consume a service with STACK. Moodle has an LTI consumer by default. You don't need to add anything to Moodle to consume LTI. The LTI provider local_ltiprovider is an optional plugin . If you intend to provide STACK questions as an LTI service you will need to install this. Providing STACK quizzes This section describes how to use LTI to provide Moodle quizzes (e.g. containing STACK questions). We assume you have written your quizzes as part of a Moodle course. Setting up a Moodle course as a service for Learn The Moodle LTI provider enables a wide range of possibilities. A single course is provided which contains a number of quizzes. The provided course is (normally) consumed by a single course in Learn. A single grade is provided to Learn. All marks are recorded in the Moodle gradebook separately, and students should be able to access these. Students and teachers follow a single link from Learn. The LTI protocol ensures this connection respects their respective level of permissions. If you would like more than one grade in Learn, then consider having more than one course on Moodle. Students will be able to see their individual grades in Moodle (unless you disable access to the gradebook!), so it is likely to be sufficient for most purposes to return a single grade to Learn. The difficulty with this is the lack of shared question banks. Login to the provider (STACK) directly with Moodle admin privileges and create a course as follows. Site administration -> Courses -> Manage courses and categories. Then choose \"Create new course\". 2. Create the course with appropriate Course full name and Course short name. These should be identical to those on Learn. Course format -> Format -> Topics format Number of sections -> 0 This creates the simplest possible course, with no section breakup. All the quizzes will then appear as a list in this. Other options are, of course, possible. (If you just really want a single quiz, consider the \"Single activity format\"). 3. Delete all unnecessary elements, e.g. News. 4. Add quizzes, etc., as required. This does not need to be complete before the next step, but the course should be non-empty when it is exposed to avoid confusion. 5. Now expose the course using the LTI provider. Course administration -> LTI Provider -> Add Tool to be provided -> Course Layout and CSS -> Hide page header, footer, left, right blocks. Save changes. 6. The \"List of tools provided\" will give the 'Tool name', 'Shared secret' and 'Launch URL'. These will be needed by the LTI consumer. It is possible to expose an individual quiz, but then you need to consume the quiz. It is easier to make one connection at the course level, than many LTI connections at the quiz level. Providing clones of Moodle courses The University of Edinburgh uses a learning management system called \"Learn\". We need to connect Learn up to Moodle to allow a wide variety of courses (on Learn) to use quizzes containing STACK (and other) questions. We want each (Learn) course to have a private area on the Moodle server parallel to the course on Learn. We have developed an enrolement plugin , enrol_lticoursetemplate , which provides an LTI service which enables users to clone a course template from a remote connection, automatically giving each teacher the ability to create a new clean course tied to their consumer content system. This plugin removes the need to set up parallel courses in Moodle by hand. Documention on how to set up this plugin is available.","title":"About LTI"},{"location":"Installation/LTI/#about-lti","text":"Learning Tools Interoperability (LTI) is a web services protocol which allows online learning systems to exchange information and interconnect. It can be used to provide quizzes (containing STACK questions or not) to other learning systems, or to include quizzes within a Moodle system on which STACK is not installed. LTI is entirely separate from STACK, and the details of the protocol are available from the IMS Global website. LTI can be used to provide/consume a wide range of functionality beyond STACK quizzes.","title":"About LTI"},{"location":"Installation/LTI/#installing-lti","text":"There are two sides to LTI: the provider and consumer. If you haven't installed STACK on your server, or use another learning management system, you will need to consume a service with STACK. Moodle has an LTI consumer by default. You don't need to add anything to Moodle to consume LTI. The LTI provider local_ltiprovider is an optional plugin . If you intend to provide STACK questions as an LTI service you will need to install this.","title":"Installing LTI"},{"location":"Installation/LTI/#providing-stack-quizzes","text":"This section describes how to use LTI to provide Moodle quizzes (e.g. containing STACK questions). We assume you have written your quizzes as part of a Moodle course.","title":"Providing STACK quizzes"},{"location":"Installation/LTI/#setting-up-a-moodle-course-as-a-service-for-learn","text":"The Moodle LTI provider enables a wide range of possibilities. A single course is provided which contains a number of quizzes. The provided course is (normally) consumed by a single course in Learn. A single grade is provided to Learn. All marks are recorded in the Moodle gradebook separately, and students should be able to access these. Students and teachers follow a single link from Learn. The LTI protocol ensures this connection respects their respective level of permissions. If you would like more than one grade in Learn, then consider having more than one course on Moodle. Students will be able to see their individual grades in Moodle (unless you disable access to the gradebook!), so it is likely to be sufficient for most purposes to return a single grade to Learn. The difficulty with this is the lack of shared question banks. Login to the provider (STACK) directly with Moodle admin privileges and create a course as follows. Site administration -> Courses -> Manage courses and categories. Then choose \"Create new course\". 2. Create the course with appropriate Course full name and Course short name. These should be identical to those on Learn. Course format -> Format -> Topics format Number of sections -> 0 This creates the simplest possible course, with no section breakup. All the quizzes will then appear as a list in this. Other options are, of course, possible. (If you just really want a single quiz, consider the \"Single activity format\"). 3. Delete all unnecessary elements, e.g. News. 4. Add quizzes, etc., as required. This does not need to be complete before the next step, but the course should be non-empty when it is exposed to avoid confusion. 5. Now expose the course using the LTI provider. Course administration -> LTI Provider -> Add Tool to be provided -> Course Layout and CSS -> Hide page header, footer, left, right blocks. Save changes. 6. The \"List of tools provided\" will give the 'Tool name', 'Shared secret' and 'Launch URL'. These will be needed by the LTI consumer. It is possible to expose an individual quiz, but then you need to consume the quiz. It is easier to make one connection at the course level, than many LTI connections at the quiz level.","title":"Setting up a Moodle course as a service for Learn"},{"location":"Installation/LTI/#providing-clones-of-moodle-courses","text":"The University of Edinburgh uses a learning management system called \"Learn\". We need to connect Learn up to Moodle to allow a wide variety of courses (on Learn) to use quizzes containing STACK (and other) questions. We want each (Learn) course to have a private area on the Moodle server parallel to the course on Learn. We have developed an enrolement plugin , enrol_lticoursetemplate , which provides an LTI service which enables users to clone a course template from a remote connection, automatically giving each teacher the ability to create a new clean course tied to their consumer content system. This plugin removes the need to set up parallel courses in Moodle by hand. Documention on how to set up this plugin is available.","title":"Providing clones of Moodle courses"},{"location":"Installation/Mathjax/","text":"Displaying mathematics for STACK in Moodle STACK generates LaTeX code on the fly and expects to use a Moodle filter to convert this into something the user's browser will display. For Moodle 2.7 or later, MathJax is distributed as a filter. We strongly recommend using the Moodle MathJax filter. One reason for adopting MathJax is that it aids accessibility . Using the MathJax filter These are notes on configuring the MathJax filter options for use with STACK. Do not use \"TeX filter compatibility\" unless you want all equations to appear inline! To add support for actuarial notation you need to add the option 'enclose.js' to the extensions. I.e. within the \"MathJax configuration\" text we need the following. TeX: { extensions: ['enclose.js'] } Accessibility The accessibility features supported by MathJax are given detailed here . Adding MathJax to additional HTML If the MathJax filter is not available then you can include it in the head of every page by adding additional HTML to every page. We don't recommend you do this, but have retained this information in the documentation for completeness. Option 1: install MathJax locally A local installation may be preferable, e.g., if you want your STACK-equipped Moodle to work off-line, or if you want to try to speed up LaTeX rendering. Download MathJax Unpack the archive and rename folder to \"mathjax\". Place the mathjax folder in .../moodle/lib and set appropriate ownership, e.g., chown -R root.root mathjax . Carry out the procedure in Option 1, editing the script above to reflect your path to MathJax. The last line can resemble the following: Option 2: link to external MathJax setup As of August 2017, you can use an external CDN at cdnjs.cloudflare.com . Admin -> Appearance -> Additional HTML -> Within HEAD Put the following script in it and save MathJax.Hub.Config({ MMLorHTML: { prefer: \"HTML\" }, tex2jax: { displayMath: [['\\[', '\\]']], inlineMath: [['\\(', '\\)']], processEscapes: true }, TeX: { extensions: ['enclose.js'], Macros: { pounds: '{\\it\\unicode{xA3}}', euro: '\\unicode{x20AC}' } } }); Please note the following. These settings enable only the strict LaTeX maths environments, and does not support the use of dollars; The processEscapes flag enables you to include a dollar symbol in mathematics environments with \\$ . The line extensions: ['enclose.js'], enables support for actuarial notation . The line Macros: { pounds: '{\\\\it\\\\unicode{xA3}}', euro: '\\\\unicode{x20AC}' } enables support for the UK pounds sign and the Euro symbol in LaTeX using \\pounds and \\euro macros respectively. E.g. (\\pounds) and (\\euro). What about dollar mathematics delimiters? ### {#delimiters} Please note that we strongly discourage the use of dollar symbols for denoting LaTeX mathematics environments such as $...$ and $$...$$ for inline and displayed mathematics respectively. As of STACK 4.0 use of dollars are officially unsupported. The reasons are (1) they do not match, which makes parsing more difficult, and (2) many courses use currency which needs this symbol and protecting it is always problematic. If you have extensive existing materials using these delimiters then we have scripts which will automatically convert them for you. All fields within existing questions can be converted with the automatic scripts available from Home > Site administration > Plugins > Question types > STACK If you have ad-hoc text to convert then the CAS chat script always converts dollars into the forms \\( .... \\) and \\[ .... \\] . You can test and edit the display of text in this window to see the conversion. If you really want to use dollars, MathJax can display them with the code displayMath: [['$$', '$$'], ['\\\\[', '\\\\]']], inlineMath: [['$', '$' ], ['\\\\(', '\\\\)']], Before deciding to support the use of dollars for mathematics on your site, please see the notes on the use of dollars for currency .","title":"Displaying mathematics for STACK in Moodle"},{"location":"Installation/Mathjax/#displaying-mathematics-for-stack-in-moodle","text":"STACK generates LaTeX code on the fly and expects to use a Moodle filter to convert this into something the user's browser will display. For Moodle 2.7 or later, MathJax is distributed as a filter. We strongly recommend using the Moodle MathJax filter. One reason for adopting MathJax is that it aids accessibility .","title":"Displaying mathematics for STACK in Moodle"},{"location":"Installation/Mathjax/#using-the-mathjax-filter","text":"These are notes on configuring the MathJax filter options for use with STACK. Do not use \"TeX filter compatibility\" unless you want all equations to appear inline! To add support for actuarial notation you need to add the option 'enclose.js' to the extensions. I.e. within the \"MathJax configuration\" text we need the following. TeX: { extensions: ['enclose.js'] }","title":"Using the MathJax filter"},{"location":"Installation/Mathjax/#accessibility","text":"The accessibility features supported by MathJax are given detailed here .","title":"Accessibility"},{"location":"Installation/Mathjax/#adding-mathjax-to-additional-html","text":"If the MathJax filter is not available then you can include it in the head of every page by adding additional HTML to every page. We don't recommend you do this, but have retained this information in the documentation for completeness.","title":"Adding MathJax to additional HTML"},{"location":"Installation/Mathjax/#option-1-install-mathjax-locally","text":"A local installation may be preferable, e.g., if you want your STACK-equipped Moodle to work off-line, or if you want to try to speed up LaTeX rendering. Download MathJax Unpack the archive and rename folder to \"mathjax\". Place the mathjax folder in .../moodle/lib and set appropriate ownership, e.g., chown -R root.root mathjax . Carry out the procedure in Option 1, editing the script above to reflect your path to MathJax. The last line can resemble the following:","title":"Option 1: install MathJax locally"},{"location":"Installation/Mathjax/#option-2-link-to-external-mathjax-setup","text":"As of August 2017, you can use an external CDN at cdnjs.cloudflare.com . Admin -> Appearance -> Additional HTML -> Within HEAD Put the following script in it and save MathJax.Hub.Config({ MMLorHTML: { prefer: \"HTML\" }, tex2jax: { displayMath: [['\\[', '\\]']], inlineMath: [['\\(', '\\)']], processEscapes: true }, TeX: { extensions: ['enclose.js'], Macros: { pounds: '{\\it\\unicode{xA3}}', euro: '\\unicode{x20AC}' } } }); Please note the following. These settings enable only the strict LaTeX maths environments, and does not support the use of dollars; The processEscapes flag enables you to include a dollar symbol in mathematics environments with \\$ . The line extensions: ['enclose.js'], enables support for actuarial notation . The line Macros: { pounds: '{\\\\it\\\\unicode{xA3}}', euro: '\\\\unicode{x20AC}' } enables support for the UK pounds sign and the Euro symbol in LaTeX using \\pounds and \\euro macros respectively. E.g. (\\pounds) and (\\euro).","title":"Option 2: link to external MathJax setup"},{"location":"Installation/Mathjax/#what-about-dollar-mathematics-delimiters-delimiters","text":"Please note that we strongly discourage the use of dollar symbols for denoting LaTeX mathematics environments such as $...$ and $$...$$ for inline and displayed mathematics respectively. As of STACK 4.0 use of dollars are officially unsupported. The reasons are (1) they do not match, which makes parsing more difficult, and (2) many courses use currency which needs this symbol and protecting it is always problematic. If you have extensive existing materials using these delimiters then we have scripts which will automatically convert them for you. All fields within existing questions can be converted with the automatic scripts available from Home > Site administration > Plugins > Question types > STACK If you have ad-hoc text to convert then the CAS chat script always converts dollars into the forms \\( .... \\) and \\[ .... \\] . You can test and edit the display of text in this window to see the conversion. If you really want to use dollars, MathJax can display them with the code displayMath: [['$$', '$$'], ['\\\\[', '\\\\]']], inlineMath: [['$', '$' ], ['\\\\(', '\\\\)']], Before deciding to support the use of dollars for mathematics on your site, please see the notes on the use of dollars for currency .","title":"What about dollar mathematics delimiters? ###  {#delimiters}"},{"location":"Installation/Maxima/","text":"Compiling Maxima from source. You are strongly advised to read the installation instructions for the various components you need! As of 21st Dec 2015 the following has been used to compile Maxima from source. You will need the following, and GNU autotools sudo apt-get install texinfo Download and compile SBCL (Lisp) cd /home/sangwinc/src wget http://downloads.sourceforge.net/project/sbcl/sbcl/1.3.1/sbcl-1.3.1-source.tar.bz2 tar -xf sbcl-1.3.1-source.tar.bz2 cd sbcl-1.3.1/ ./make-config.sh ./make.sh sudo ./install.sh Download and compile Maxima cd /home/sangwinc/src wget http://kent.dl.sourceforge.net/project/maxima/Maxima-source/5.36.1-source/maxima-5.36.1.tar.gz tar -zxf maxima-5.36.1.tar.gz cd maxima-5.36.1/ ./configure --with-sbcl make sudo make install","title":"Compiling Maxima from source."},{"location":"Installation/Maxima/#compiling-maxima-from-source","text":"You are strongly advised to read the installation instructions for the various components you need! As of 21st Dec 2015 the following has been used to compile Maxima from source.","title":"Compiling Maxima from source."},{"location":"Installation/Maxima/#you-will-need-the-following-and-gnu-autotools","text":"sudo apt-get install texinfo","title":"You will need the following, and GNU autotools"},{"location":"Installation/Maxima/#download-and-compile-sbcl-lisp","text":"cd /home/sangwinc/src wget http://downloads.sourceforge.net/project/sbcl/sbcl/1.3.1/sbcl-1.3.1-source.tar.bz2 tar -xf sbcl-1.3.1-source.tar.bz2 cd sbcl-1.3.1/ ./make-config.sh ./make.sh sudo ./install.sh","title":"Download and compile SBCL (Lisp)"},{"location":"Installation/Maxima/#download-and-compile-maxima","text":"cd /home/sangwinc/src wget http://kent.dl.sourceforge.net/project/maxima/Maxima-source/5.36.1-source/maxima-5.36.1.tar.gz tar -zxf maxima-5.36.1.tar.gz cd maxima-5.36.1/ ./configure --with-sbcl make sudo make install","title":"Download and compile Maxima"},{"location":"Installation/Migration/","text":"Migration from STACK 3.X to STACK 4.0 STACK 4.0 has one important change in the question authoring. CAS text now uses {@...@} in include mathematics in the text. The change from @...@ to {@...@} gives us matching parentheses to parse, which is much better. The {..} will not break LaTeX. You will need to update all your existing questions which include CAS calculations. This includes all fields, e.g. in the feedback as well. To help with this process we have an automatic conversion script. As an admin user navigate to Site administration -> Plugins -> Question Types -> STACK Then choose the link \"The fix maths delimiters script\". If you have any difficulties with this process please contact the developers. Migration from STACK 2.X to STACK 3.0 If you wish to import STACK 2 questions into STACK 3 you will need to install the STACK question format separately. This is distributed as qformat_stack . It provides a different question format for the Moodle quiz importer. Obtain the code. You can download the zip file , unzip it, and place it in the directory moodle/question/format/stack . (You will need to rename the directory moodle-qformat_stack -> stack .) Alternatively, get the code using git by running the following command in the top level folder of your Moodle install: git clone https://github.com/maths/moodle-qformat_stack.git question/format/stack Login to Moodle as the admin user and click on Notifications in the Site Administration panel. There have been a number of changes between STACK 2 and STACK 3. This feature has not been tested since STACK 4.0. If you need to use this please contact the developers. Also, see the notes on the importer before using it.","title":"Migration from STACK 3.X to STACK 4.0"},{"location":"Installation/Migration/#migration-from-stack-3x-to-stack-40","text":"STACK 4.0 has one important change in the question authoring. CAS text now uses {@...@} in include mathematics in the text. The change from @...@ to {@...@} gives us matching parentheses to parse, which is much better. The {..} will not break LaTeX. You will need to update all your existing questions which include CAS calculations. This includes all fields, e.g. in the feedback as well. To help with this process we have an automatic conversion script. As an admin user navigate to Site administration -> Plugins -> Question Types -> STACK Then choose the link \"The fix maths delimiters script\". If you have any difficulties with this process please contact the developers.","title":"Migration from STACK 3.X to STACK 4.0"},{"location":"Installation/Migration/#migration-from-stack-2x-to-stack-30","text":"If you wish to import STACK 2 questions into STACK 3 you will need to install the STACK question format separately. This is distributed as qformat_stack . It provides a different question format for the Moodle quiz importer. Obtain the code. You can download the zip file , unzip it, and place it in the directory moodle/question/format/stack . (You will need to rename the directory moodle-qformat_stack -> stack .) Alternatively, get the code using git by running the following command in the top level folder of your Moodle install: git clone https://github.com/maths/moodle-qformat_stack.git question/format/stack Login to Moodle as the admin user and click on Notifications in the Site Administration panel. There have been a number of changes between STACK 2 and STACK 3. This feature has not been tested since STACK 4.0. If you need to use this please contact the developers. Also, see the notes on the importer before using it.","title":"Migration from STACK 2.X to STACK 3.0"},{"location":"Installation/Optimising_Maxima/","text":"Optimising Maxima There are several ways to reduce the access and execution time of this CAS which can prove useful for scaling. They have the potential to greatly speed up STACK, and are required on a production server. It is particularly important on a Linux system to compile the Maxima code. The instructions for both CLISP and SBCL have been tested and work in STACK 3. As of November 2020, these are working with all versions between Maxima 5.36.1 and Maxima 5.44.0. The procees of creating an optimised Maxima image is now automated. This should be built automatically when installing STACK, and on upgrade. However, you should use the plugin healthcheck script to confirm you have a fully working system. For developers the code to automatically generate the LISP images is described below. Terminating runaway LISPS It is relatively easy for students to inadvertently generate an answer which takes Maxima a very long time to evaluate. Typically this arises from where Maxima needs to expand out the brackets by comparing (x-a)^59999 with a similar expression. It is very hard to ensure this kind of calculation is impossible so in general this situation will arise from time to time. The PHP scripts have a timeout, but on Linux systems you can also ensure the underlying LISP process is killed off using timeout command in Linux. This is particularly valuable for production systems where stability is essential. Check that your Linux has the timeout command. Because this is not standard we have not included this mechanism by default. Make sure STACK is working. Set the CAS connection timeout variable as normal in the STACK settings. E.g. you might choose 5 seconds Use the following Maxima command timeout --kill-after=6s 6s maxima It is important that the timeout time is longer than the CAS connection timeout. That way, PHP gives up first and degrades gracefully. The OS then kills the process later. If you choose the timeout to be the same or less, PHP may not have gathered enough data to degrade gracefully. The above can be used with either a direct Maxima connection, or with the image created as described below. Compiled Lisp Maxima can be run with a number of different Lisp implementations . Although CLISP is the most portable - due to being interpreted - other Lisps can give faster execution. Create Maxima Image Lisp is able to save a snapshot of its current state to a file. This file can then be used to restart Lisp, and hence Maxima, in exactly that state. This optimization involves creating a snapshot of Lisp with Maxima and all the STACK code loaded, which can speed up launch times by an order of magnitude on Linux. This tip was originally provided Niels Walet. The principle is to save an image of Maxima running with STACK libraries already loaded then run this directly. The healthcheck page contains a link at the bottom \"Create Maxima Image\". We strongly recommend you use the automated option to create a Maxima image. Create Maxima Image by hand These steps should not be needed. Our goal is to do this automatically. If your OS and Maxima version do not work, please contact the developers with details and we will try to automate this process. For reference: Check your Maxima Lisp with maxima --list-avail to see what versions of Maxima and which Lisp you have. This information is available through the healthcheck page. Load Maxima, using switches for the particular version you want, e.g. maxima -l CLISP -u 5.19.2 or maxima --use-version=5.40.1 . GCL This is the default Lisp used by most of the binary distributions, and therefore the Lisp which you are most likely to have. Get STACK working with Platform type set to 'Linux'. Run the health-check. It is important to do this every time you upgrade your version. load(\"<path>/maximalocal.mac\"); :lisp (si::save-system \"/path/to/moodledata/stack/maxima-optimised\") quit(); Go into the STACK settings and set Platform type to 'Linux (Optimised)'. Set Maxima command to. /path/to/moodledata/stack/maxima-optimised -eval '(cl-user::run)' CLISP Save an image in CLISP . Get STACK working with Platform type set to 'Linux'. Run the health-check. It is important to do this every time you upgrade your version. We assume you have CLISP. Type locate lisp.run to find the path(s) for the next step. You might need to run the command as root, and if you get no results try doing a sudo updatedb . Within Maxima, type the following lines to create an image and exit. load(\"<path>/maximalocal.mac\"); load(\"<path>/stackmaxima.mac\"); :lisp (ext:saveinitmem \"/path/to/moodledata/stack/maxima-optimised.mem\" :init-function #'user::run) quit(); Go into the STACK settings and set Platform type to 'Linux (Optimised)'. Set Maxima command to. <path>/lisp.run -q -M <path>/maxima-optimised.mem Click Save changes at the bottom of the settings page. Visit the healthcheck page, and clear the cache (if applicable), to make sure everything is still working. Access speed increases of between 2 and 9.5 times have been reported over the standard CLISP configurations. SBCL If you are using STACK with SBCL (if you are using CentOS/SL5/RHEL with Maxima from EPEL), use the following to generate a standalone executable: Get STACK working with Platform type set to 'Linux'. Run the healthcheck. It is important to do this every time you upgrade your version. Go into your moodledata/stack folder as the current directory, and run Maxima. In Maxima, type the commands: load(\"maximalocal.mac\"); :lisp (sb-ext:save-lisp-and-die \"maxima-optimised\" :toplevel #'run :executable t) Go into the STACK settings and set the Platform to 'Linux (Optimised)'. You should be able to leave Maxima command blank. Click save changes at the bottom of the settings page. Visit the healthcheck page, and clear the cache (if applicable), to make sure everything is still working. Other Lisps The following web pages have more information for a few types of Lisp: http://stackoverflow.com/questions/25046/lisp-executable and http://code.google.com/p/lispbuilder/wiki/StandAloneExecutables#Defining_a_Startup_Function Putting Maxima on other servers Running Maxima on a separate server dedicated to the task is more secure. We believe it also improves performance because the server can start up Maxima processes in advance so they are all ready and waiting to compute some CAS with zero delay. See a Maxima pool has been implemented to do this. See https://github.com/maths/stack_util_maximapool/blob/master/README.md Optimisation results The following data was gathered by CJS on 23/9/2012 using Maxima 5.28.0 with CLISP 2.49 (2010-07-07) on a Linux server. Running the PHP testing suites we have the following data, where all times are in seconds. The second line, in italics, is time per test. CAS setting Answertest (460 tests) Inputs (257 tests) Linux 517.8672 1.1258 208.85655 0.81267 Mature cache (with Linux) 0.92644 0.00201 13.9798 0.0544 Linux (optimised) 95.16954 0.20689 20.89807 0.08132 Mature cache (when optimised) 0.90839 0.00197 1.48648 0.00578 However, not all tests result in a CAS call. So, to estimate this we subtract the overhead time for a mature cache (which is essentially time for database/PHP processing) from the raw time and divide by the number of CAS calls. We have the following time per CAS call estimates. CAS setting Answertest (438 calls) Inputs (204 calls) Linux 1.180 0.955 Linux (optimised) 0.215 0.095 The optimised version saves a considerable amount of time, representing a significant performance improvement in the critical step of just under a second per call. Well worth the effort (& maintenance) to reward ratio. It is likely that using a compiled version of LISP would result in further considerable savings. However, it isn't entirely clear to me at this point why the input tests with a mature cache using the default Linux connection takes over 13 seconds. This seems anomalous. The following data was gathered by CJS on 10/10/2012 using Maxima 5.28.0 with CLISP 2.49 and SBCL 1.0.58-1.el6, both on the same Linux server. The table gives time in seconds to run the answer tests (462 tests). Maxima version Linux Linux optimised CLISP 2.49 652.3 117.76314 SBCL 1.0.58-1.el6 1570.6 118.39215 With both lisp versions, the optimisation gives a significant performance gain and there is very little difference between the times of the optimised versions. CAS on Linux The tests above use Maxima through the PHP interface. To gauge the overhead from the CAS itself we ran the following tests on the same server using Maxima 5.28.0 with CLISP 2.49. model name: Intel(R) Xeon(R) CPU, E3113 @ 3.00GHz Linux Time for 100 cycles (s) Start Maxima and quit 43 Start STACK and quit 124 Process AtAlgEquiv 133 Without optimising Linux, compared to processing one AtAlgEquiv, there is approximately 93% overhead in starting the maxima process. Optimised Linux Time for 100 cycles (s) Start STACK and quit 12 Process AtAlgEquiv 16 Process 100 AtAlgEquiv 104 Process 100 plot 117 The PHP processing time is almost insignificant against the time it takes to initiate and use the CAS. With the optimised Linux we have reduced the loading time, and the loading overhead considerably. A single ATAlgEquiv request takes about 0.04s. Asking for 100 ATAlgEquiv requests in a single session take 0.0092s per request. Asking for 100 plot commands takes 1.05s per plot - which is rather slow (plots undertake a large number of floating point calculations). The overhead times for loading Maxima might be reduced, and smoothed out by using the Maxima pool, see http://github.com/maths/stack_util_maximapool for an implementation of this. The computation times are difficult to reduce. Memory appears to be modest: the optimised Linux takes about 15Mb of memory per process. Compiling a Maxima image The following was tested in March 2016 on CENTOS. It is for compiling a Maxima image. Really this is mostly for developers. sudo yum install sbcl texinfo rpm-build cd ~ wget http://dl.fedoraproject.org/pub/fedora/linux/updates/22/SRPMS/m/maxima-5.36.1-2.fc22.src.rpm rpm -i maxima-5.36.1-2.fc22.src.rpm cd rpmbuild rpmbuild -ba SPECS/maxima.spec cd RPMS/x86_64 sudo yum remove maxima sudo yum install maxima-runtime-sbcl-5.36.1-2.el6.x86_64.rpm maxima-5.36.1-2.el6.x86_64.rpm The following was tested in March 2016 on Ubuntu 14.04.4 LTS (GNU/Linux 3.13.0-79-generic x86_64) (Trusty). Install dependencies: sudo apt-get -y install clisp texinfo Then run: cd ~ wget -O maxima_source.tar.gz http://sourceforge.net/projects/maxima/files/Maxima-source/5.36.1-source/maxima-5.36.1.tar.gz/download tar zxvf maxima_source.tar.gz cd maxima-5.36.1 ./configure --with-clisp make --silent sudo make install --silent maxima --list-avail","title":"Optimising Maxima"},{"location":"Installation/Optimising_Maxima/#optimising-maxima","text":"There are several ways to reduce the access and execution time of this CAS which can prove useful for scaling. They have the potential to greatly speed up STACK, and are required on a production server. It is particularly important on a Linux system to compile the Maxima code. The instructions for both CLISP and SBCL have been tested and work in STACK 3. As of November 2020, these are working with all versions between Maxima 5.36.1 and Maxima 5.44.0. The procees of creating an optimised Maxima image is now automated. This should be built automatically when installing STACK, and on upgrade. However, you should use the plugin healthcheck script to confirm you have a fully working system. For developers the code to automatically generate the LISP images is described below.","title":"Optimising Maxima"},{"location":"Installation/Optimising_Maxima/#terminating-runaway-lisps","text":"It is relatively easy for students to inadvertently generate an answer which takes Maxima a very long time to evaluate. Typically this arises from where Maxima needs to expand out the brackets by comparing (x-a)^59999 with a similar expression. It is very hard to ensure this kind of calculation is impossible so in general this situation will arise from time to time. The PHP scripts have a timeout, but on Linux systems you can also ensure the underlying LISP process is killed off using timeout command in Linux. This is particularly valuable for production systems where stability is essential. Check that your Linux has the timeout command. Because this is not standard we have not included this mechanism by default. Make sure STACK is working. Set the CAS connection timeout variable as normal in the STACK settings. E.g. you might choose 5 seconds Use the following Maxima command timeout --kill-after=6s 6s maxima It is important that the timeout time is longer than the CAS connection timeout. That way, PHP gives up first and degrades gracefully. The OS then kills the process later. If you choose the timeout to be the same or less, PHP may not have gathered enough data to degrade gracefully. The above can be used with either a direct Maxima connection, or with the image created as described below.","title":"Terminating runaway LISPS"},{"location":"Installation/Optimising_Maxima/#compiled-lisp","text":"Maxima can be run with a number of different Lisp implementations . Although CLISP is the most portable - due to being interpreted - other Lisps can give faster execution.","title":"Compiled Lisp"},{"location":"Installation/Optimising_Maxima/#create-maxima-image","text":"Lisp is able to save a snapshot of its current state to a file. This file can then be used to restart Lisp, and hence Maxima, in exactly that state. This optimization involves creating a snapshot of Lisp with Maxima and all the STACK code loaded, which can speed up launch times by an order of magnitude on Linux. This tip was originally provided Niels Walet. The principle is to save an image of Maxima running with STACK libraries already loaded then run this directly. The healthcheck page contains a link at the bottom \"Create Maxima Image\". We strongly recommend you use the automated option to create a Maxima image.","title":"Create Maxima Image"},{"location":"Installation/Optimising_Maxima/#create-maxima-image-by-hand","text":"These steps should not be needed. Our goal is to do this automatically. If your OS and Maxima version do not work, please contact the developers with details and we will try to automate this process. For reference: Check your Maxima Lisp with maxima --list-avail to see what versions of Maxima and which Lisp you have. This information is available through the healthcheck page. Load Maxima, using switches for the particular version you want, e.g. maxima -l CLISP -u 5.19.2 or maxima --use-version=5.40.1 .","title":"Create Maxima Image by hand"},{"location":"Installation/Optimising_Maxima/#gcl","text":"This is the default Lisp used by most of the binary distributions, and therefore the Lisp which you are most likely to have. Get STACK working with Platform type set to 'Linux'. Run the health-check. It is important to do this every time you upgrade your version. load(\"<path>/maximalocal.mac\"); :lisp (si::save-system \"/path/to/moodledata/stack/maxima-optimised\") quit(); Go into the STACK settings and set Platform type to 'Linux (Optimised)'. Set Maxima command to. /path/to/moodledata/stack/maxima-optimised -eval '(cl-user::run)'","title":"GCL"},{"location":"Installation/Optimising_Maxima/#clisp","text":"Save an image in CLISP . Get STACK working with Platform type set to 'Linux'. Run the health-check. It is important to do this every time you upgrade your version. We assume you have CLISP. Type locate lisp.run to find the path(s) for the next step. You might need to run the command as root, and if you get no results try doing a sudo updatedb . Within Maxima, type the following lines to create an image and exit. load(\"<path>/maximalocal.mac\"); load(\"<path>/stackmaxima.mac\"); :lisp (ext:saveinitmem \"/path/to/moodledata/stack/maxima-optimised.mem\" :init-function #'user::run) quit(); Go into the STACK settings and set Platform type to 'Linux (Optimised)'. Set Maxima command to. <path>/lisp.run -q -M <path>/maxima-optimised.mem Click Save changes at the bottom of the settings page. Visit the healthcheck page, and clear the cache (if applicable), to make sure everything is still working. Access speed increases of between 2 and 9.5 times have been reported over the standard CLISP configurations.","title":"CLISP"},{"location":"Installation/Optimising_Maxima/#sbcl","text":"If you are using STACK with SBCL (if you are using CentOS/SL5/RHEL with Maxima from EPEL), use the following to generate a standalone executable: Get STACK working with Platform type set to 'Linux'. Run the healthcheck. It is important to do this every time you upgrade your version. Go into your moodledata/stack folder as the current directory, and run Maxima. In Maxima, type the commands: load(\"maximalocal.mac\"); :lisp (sb-ext:save-lisp-and-die \"maxima-optimised\" :toplevel #'run :executable t) Go into the STACK settings and set the Platform to 'Linux (Optimised)'. You should be able to leave Maxima command blank. Click save changes at the bottom of the settings page. Visit the healthcheck page, and clear the cache (if applicable), to make sure everything is still working.","title":"SBCL"},{"location":"Installation/Optimising_Maxima/#other-lisps","text":"The following web pages have more information for a few types of Lisp: http://stackoverflow.com/questions/25046/lisp-executable and http://code.google.com/p/lispbuilder/wiki/StandAloneExecutables#Defining_a_Startup_Function","title":"Other Lisps"},{"location":"Installation/Optimising_Maxima/#putting-maxima-on-other-servers","text":"Running Maxima on a separate server dedicated to the task is more secure. We believe it also improves performance because the server can start up Maxima processes in advance so they are all ready and waiting to compute some CAS with zero delay. See a Maxima pool has been implemented to do this. See https://github.com/maths/stack_util_maximapool/blob/master/README.md","title":"Putting Maxima on other servers"},{"location":"Installation/Optimising_Maxima/#optimisation-results","text":"The following data was gathered by CJS on 23/9/2012 using Maxima 5.28.0 with CLISP 2.49 (2010-07-07) on a Linux server. Running the PHP testing suites we have the following data, where all times are in seconds. The second line, in italics, is time per test. CAS setting Answertest (460 tests) Inputs (257 tests) Linux 517.8672 1.1258 208.85655 0.81267 Mature cache (with Linux) 0.92644 0.00201 13.9798 0.0544 Linux (optimised) 95.16954 0.20689 20.89807 0.08132 Mature cache (when optimised) 0.90839 0.00197 1.48648 0.00578 However, not all tests result in a CAS call. So, to estimate this we subtract the overhead time for a mature cache (which is essentially time for database/PHP processing) from the raw time and divide by the number of CAS calls. We have the following time per CAS call estimates. CAS setting Answertest (438 calls) Inputs (204 calls) Linux 1.180 0.955 Linux (optimised) 0.215 0.095 The optimised version saves a considerable amount of time, representing a significant performance improvement in the critical step of just under a second per call. Well worth the effort (& maintenance) to reward ratio. It is likely that using a compiled version of LISP would result in further considerable savings. However, it isn't entirely clear to me at this point why the input tests with a mature cache using the default Linux connection takes over 13 seconds. This seems anomalous. The following data was gathered by CJS on 10/10/2012 using Maxima 5.28.0 with CLISP 2.49 and SBCL 1.0.58-1.el6, both on the same Linux server. The table gives time in seconds to run the answer tests (462 tests). Maxima version Linux Linux optimised CLISP 2.49 652.3 117.76314 SBCL 1.0.58-1.el6 1570.6 118.39215 With both lisp versions, the optimisation gives a significant performance gain and there is very little difference between the times of the optimised versions.","title":"Optimisation results"},{"location":"Installation/Optimising_Maxima/#cas-on-linux","text":"The tests above use Maxima through the PHP interface. To gauge the overhead from the CAS itself we ran the following tests on the same server using Maxima 5.28.0 with CLISP 2.49. model name: Intel(R) Xeon(R) CPU, E3113 @ 3.00GHz Linux Time for 100 cycles (s) Start Maxima and quit 43 Start STACK and quit 124 Process AtAlgEquiv 133 Without optimising Linux, compared to processing one AtAlgEquiv, there is approximately 93% overhead in starting the maxima process. Optimised Linux Time for 100 cycles (s) Start STACK and quit 12 Process AtAlgEquiv 16 Process 100 AtAlgEquiv 104 Process 100 plot 117 The PHP processing time is almost insignificant against the time it takes to initiate and use the CAS. With the optimised Linux we have reduced the loading time, and the loading overhead considerably. A single ATAlgEquiv request takes about 0.04s. Asking for 100 ATAlgEquiv requests in a single session take 0.0092s per request. Asking for 100 plot commands takes 1.05s per plot - which is rather slow (plots undertake a large number of floating point calculations). The overhead times for loading Maxima might be reduced, and smoothed out by using the Maxima pool, see http://github.com/maths/stack_util_maximapool for an implementation of this. The computation times are difficult to reduce. Memory appears to be modest: the optimised Linux takes about 15Mb of memory per process.","title":"CAS on Linux"},{"location":"Installation/Optimising_Maxima/#compiling-a-maxima-image","text":"The following was tested in March 2016 on CENTOS. It is for compiling a Maxima image. Really this is mostly for developers. sudo yum install sbcl texinfo rpm-build cd ~ wget http://dl.fedoraproject.org/pub/fedora/linux/updates/22/SRPMS/m/maxima-5.36.1-2.fc22.src.rpm rpm -i maxima-5.36.1-2.fc22.src.rpm cd rpmbuild rpmbuild -ba SPECS/maxima.spec cd RPMS/x86_64 sudo yum remove maxima sudo yum install maxima-runtime-sbcl-5.36.1-2.el6.x86_64.rpm maxima-5.36.1-2.el6.x86_64.rpm The following was tested in March 2016 on Ubuntu 14.04.4 LTS (GNU/Linux 3.13.0-79-generic x86_64) (Trusty). Install dependencies: sudo apt-get -y install clisp texinfo Then run: cd ~ wget -O maxima_source.tar.gz http://sourceforge.net/projects/maxima/files/Maxima-source/5.36.1-source/maxima-5.36.1.tar.gz/download tar zxvf maxima_source.tar.gz cd maxima-5.36.1 ./configure --with-clisp make --silent sudo make install --silent maxima --list-avail","title":"Compiling a Maxima image"},{"location":"Installation/Testing_installation/","text":"Testing Installation It is important to confirm that STACK has been installed correctly, and that it is connecting to the CAS. STACK configuration page STACK provides a number of options. To set these you must login as the Moodle site Administrator. Navigate to Site administration -> Plugins -> Question Types -> STACK Healthcheck script To confirm if the PHP scripts are connecting to Maxima navigate to the STACK configuration page (see above). Choose the link to the \"healthcheck script\". The healthcheck script checks the following. Check LaTeX is being converted correctly? Check MathJax or another LaTeX converter. Can PHP call external applications? No, then change PHP settings. Can PHP call Maxima? No, then see below. Graph plotting. Are auto-generated plots being created correctly? There should be two different graphs. If not, check the gnuplot settings, and directory permissions. The CAS-debug option in the STACK settings will provide a very verbose output which is indispensable at this stage. Turn this off for production servers, as it is wasteful of storage, particularly when caching results. If PHP does not connect to Maxima then please see the \"Troubleshooting\" section below. Maxima optional packages Maxima has a wide range of optional libraries. Which are loaded on your server is set with the option qtype_stack | maximalibraries from the STACK question type settings page. Currently the default setting is to load the following optional Maxima packages whenever Maxima is used. stats, distrib, descriptive We need to support STACK in a wide range of situations. In production environments system admins have asked us to check packages do not write files to the server, or have other server-side effects. E.g. the plot2d command executes a gnuplot process on the server for example. For this reason only some optional packages can be loaded into STACK. Currently the only supported packages are stats, distrib, descriptive If you wish to subvert this process you will need to alter the source code of STACK. If you have authority on your server to modify the source code you already have some level of responsibility and trust on the server! In the file /stack/cas/installhelper.class.php , there is a static class $maximalibraries which contains the list of permitted libraries. Caching CAS output By default, the interactions with the CAS are cached. You can connect freshly to the CAS each time, which is useful for debugging, and this option is available on the STACK configuration page. To clear the cache, click the button on the bottom of the healthcheck script. Optimizing Maxima Maxima is the rate-determining step in performance to STACK. Once you have the STACK question type working with a direct connection to the CAS, then you should consider optimizing the performance of Maxima. See the page dedicated to optimizing Maxima CAS Chat At any stage you can evaluate a fragment of CASText by using the CASChat script. There is a link from the STACK configuration page. Testing your questions when you upgrade Whenever you upgrade to a new version of the STACK plugin, it is a really good idea to run all of the question tests to be sure that the behaviour of STACK has not changed in a way that breaks any of your questions. To do this, go to Site administration -> Plugins -> Question types -> STACK and follow the \"run the question tests in bulk script\" link. It is even possible, with a bit of hacking, to execute the question tests from one Moodle site on a different Moodle site . For example you may be evaluating the latest release of STACK on a test server, and you would like to know if the upgrade will break any of your existing questions. (And you don't want to do a lot of exporting and importing.) Troubleshooting an upgrade When you upgrade, the STACK plugin will try to automatically recreate the optimised Maxima image. Occasionally this will not work and you will need to troubleshoot why. 1. GOAL: maxima works on the server Check Maxima is installed and working. E.g. type maxima on the command line, and try a non-trivial calculation such as diff(sin(x^2),x); to confirm Maxima is working. Use quit(); to exit. 2. GOAL: STACK works! Next, check STACK is working without the optimised image, and without caching. The STACK settings are defined on the plugin page. Site administration -> Plugins -> Question Types -> STACK To set these you must login as the Moodle site Administrator. Take note of your old settings and save the following settings. qtype_stack | platform = Linux qtype_stack | maximaversion = default qtype_stack | casresultscache = Do not cache qtype_stack | castimeout = 100 qtype_stack | maximacommand = qtype_stack | maximacommandopt = qtype_stack | maximalibraries = Note that the maximacommand , maximacommandopt and maximalibraries should be empty boxes. The castimeout of 100s is excessive. However, the very first time Maxima is called on a server it internally compiles a lot of LISP sourcecode. This can take a surprisingly long time! 3. GOAL: Reduce timeout and check Maxima libraies. Now we need to back away gently from the above raw confuration, back towards the defaults/production settings. qtype_stack | castimeout = 10 qtype_stack | maximalibraries = stats, distrib, descriptive, simplex Not all versions of Maxima have the stats libraries, but if you do have them add them back now. You can check whether you have each library individually on the command line by typing load(\"stats\"); (etc.) Save these settings and run the healthcheck script. 4. GOAL: choose a specific maxima version (optional). If you want to choose a specific version of Maxima now is the time to do so by selecting qtype_stack | maximaversion from the dropdown. Part of the healthcheck script will tell you which version you have on your server or use maxima --list-avail on the command line. If your version does not appear on the dropdown (and it won't if you compiled Maxima from source) then set maximacommand to be the command you need to type. E.g. if you use maxima --use-version=5.42.1 on the command line then qtype_stack | maximacommand = maxima --use-version=5.42.1 Save these settings and run the healtcheck script. 5. Goal: check libraries in Maxima The setting qtype_stack | maximalibraries tries to load some optional Maxima libraries. Not all versions of Maxima have these libraries, which can be confusing. Only supported library names can be used. For example try the following. qtype_stack | maximalibraries = stats, distrib, descriptive, simplex Save these settings and run the healtcheck script. Note, internally in Maxima this is equivalent to typing load(stats); in at the Maxima command line for each library in the list. You can try this in step 1 above to check each library you want to load by hand. If you get the following error loadfile: failed to load /usr/share/maxima/5.32.1/share/draw/draw.lisp then remove the optional libraries from qtype_stack | maximalibraries . I.e. set this to blank and re-try the healthcheck. (One of the stats libraries also tries to load the draw library.) 6. Goal: create optimised image. Now press the \"Create Maxima Image\" button at the bottom of the healthcheck script page to create the optimised image, and read the output of the refreshed healthcheck page. Note, this page updates some of your settings in the plugin page. In particular, it changes qtype_stack | platform to optimised and fills in the value of qtype_stack | maximacommandopt . Reload the plugin page (but don't save over the top). The maxima image is stored in a sub-directory of moodle's dataroot directory, specifically in dataroot/stack . This is defined in Moodle's config.php as, for example, $CFG->dataroot = '/var/data/moodle311'; The optimised image will therefore be something like /var/data/moodle311/stack/maxima_opt_auto' and the command to execute this (with a timeout) will be timeout --kill-after=10s 10s /var/data/moodle311/stack/maxima_opt_auto -eval '(cl-user::run)' The PHP process must have permission to write to this directory. If your optimised image was not created please check the file permissions, check the file exists and try to run the command maximacommandopt from the server command line. If the current optimised image was created by a different user (e.g. during command-line install) you may not have permission to replace it. (The precise name of the Maxima image depends on the LISP version, e.g. maxima_opt_auto is generated by GCL.) 7. Goal: use the CAS cache. The very last step is to use the CAS cache. qtype_stack | casresultscache = Cache in the database This should be a working server, using the optimised image. Please consider using the Maxima Pool for production sites, putting Maxima onto another server competely.","title":"Testing Installation"},{"location":"Installation/Testing_installation/#testing-installation","text":"It is important to confirm that STACK has been installed correctly, and that it is connecting to the CAS.","title":"Testing Installation"},{"location":"Installation/Testing_installation/#stack-configuration-page","text":"STACK provides a number of options. To set these you must login as the Moodle site Administrator. Navigate to Site administration -> Plugins -> Question Types -> STACK","title":"STACK configuration page"},{"location":"Installation/Testing_installation/#healthcheck-script","text":"To confirm if the PHP scripts are connecting to Maxima navigate to the STACK configuration page (see above). Choose the link to the \"healthcheck script\". The healthcheck script checks the following. Check LaTeX is being converted correctly? Check MathJax or another LaTeX converter. Can PHP call external applications? No, then change PHP settings. Can PHP call Maxima? No, then see below. Graph plotting. Are auto-generated plots being created correctly? There should be two different graphs. If not, check the gnuplot settings, and directory permissions. The CAS-debug option in the STACK settings will provide a very verbose output which is indispensable at this stage. Turn this off for production servers, as it is wasteful of storage, particularly when caching results. If PHP does not connect to Maxima then please see the \"Troubleshooting\" section below.","title":"Healthcheck script"},{"location":"Installation/Testing_installation/#maxima-optional-packages","text":"Maxima has a wide range of optional libraries. Which are loaded on your server is set with the option qtype_stack | maximalibraries from the STACK question type settings page. Currently the default setting is to load the following optional Maxima packages whenever Maxima is used. stats, distrib, descriptive We need to support STACK in a wide range of situations. In production environments system admins have asked us to check packages do not write files to the server, or have other server-side effects. E.g. the plot2d command executes a gnuplot process on the server for example. For this reason only some optional packages can be loaded into STACK. Currently the only supported packages are stats, distrib, descriptive If you wish to subvert this process you will need to alter the source code of STACK. If you have authority on your server to modify the source code you already have some level of responsibility and trust on the server! In the file /stack/cas/installhelper.class.php , there is a static class $maximalibraries which contains the list of permitted libraries.","title":"Maxima optional packages"},{"location":"Installation/Testing_installation/#caching-cas-output","text":"By default, the interactions with the CAS are cached. You can connect freshly to the CAS each time, which is useful for debugging, and this option is available on the STACK configuration page. To clear the cache, click the button on the bottom of the healthcheck script.","title":"Caching CAS output"},{"location":"Installation/Testing_installation/#optimizing-maxima","text":"Maxima is the rate-determining step in performance to STACK. Once you have the STACK question type working with a direct connection to the CAS, then you should consider optimizing the performance of Maxima. See the page dedicated to optimizing Maxima","title":"Optimizing Maxima"},{"location":"Installation/Testing_installation/#cas-chat","text":"At any stage you can evaluate a fragment of CASText by using the CASChat script. There is a link from the STACK configuration page.","title":"CAS Chat"},{"location":"Installation/Testing_installation/#testing-your-questions-when-you-upgrade","text":"Whenever you upgrade to a new version of the STACK plugin, it is a really good idea to run all of the question tests to be sure that the behaviour of STACK has not changed in a way that breaks any of your questions. To do this, go to Site administration -> Plugins -> Question types -> STACK and follow the \"run the question tests in bulk script\" link. It is even possible, with a bit of hacking, to execute the question tests from one Moodle site on a different Moodle site . For example you may be evaluating the latest release of STACK on a test server, and you would like to know if the upgrade will break any of your existing questions. (And you don't want to do a lot of exporting and importing.)","title":"Testing your questions when you upgrade"},{"location":"Installation/Testing_installation/#troubleshooting-an-upgrade","text":"When you upgrade, the STACK plugin will try to automatically recreate the optimised Maxima image. Occasionally this will not work and you will need to troubleshoot why.","title":"Troubleshooting an upgrade"},{"location":"Installation/Testing_installation/#1-goal-maxima-works-on-the-server","text":"Check Maxima is installed and working. E.g. type maxima on the command line, and try a non-trivial calculation such as diff(sin(x^2),x); to confirm Maxima is working. Use quit(); to exit.","title":"1. GOAL: maxima works on the server"},{"location":"Installation/Testing_installation/#2-goal-stack-works","text":"Next, check STACK is working without the optimised image, and without caching. The STACK settings are defined on the plugin page. Site administration -> Plugins -> Question Types -> STACK To set these you must login as the Moodle site Administrator. Take note of your old settings and save the following settings. qtype_stack | platform = Linux qtype_stack | maximaversion = default qtype_stack | casresultscache = Do not cache qtype_stack | castimeout = 100 qtype_stack | maximacommand = qtype_stack | maximacommandopt = qtype_stack | maximalibraries = Note that the maximacommand , maximacommandopt and maximalibraries should be empty boxes. The castimeout of 100s is excessive. However, the very first time Maxima is called on a server it internally compiles a lot of LISP sourcecode. This can take a surprisingly long time!","title":"2. GOAL: STACK works!"},{"location":"Installation/Testing_installation/#3-goal-reduce-timeout-and-check-maxima-libraies","text":"Now we need to back away gently from the above raw confuration, back towards the defaults/production settings. qtype_stack | castimeout = 10 qtype_stack | maximalibraries = stats, distrib, descriptive, simplex Not all versions of Maxima have the stats libraries, but if you do have them add them back now. You can check whether you have each library individually on the command line by typing load(\"stats\"); (etc.) Save these settings and run the healthcheck script.","title":"3. GOAL: Reduce timeout and check Maxima libraies."},{"location":"Installation/Testing_installation/#4-goal-choose-a-specific-maxima-version-optional","text":"If you want to choose a specific version of Maxima now is the time to do so by selecting qtype_stack | maximaversion from the dropdown. Part of the healthcheck script will tell you which version you have on your server or use maxima --list-avail on the command line. If your version does not appear on the dropdown (and it won't if you compiled Maxima from source) then set maximacommand to be the command you need to type. E.g. if you use maxima --use-version=5.42.1 on the command line then qtype_stack | maximacommand = maxima --use-version=5.42.1 Save these settings and run the healtcheck script.","title":"4. GOAL: choose a specific maxima version (optional)."},{"location":"Installation/Testing_installation/#5-goal-check-libraries-in-maxima","text":"The setting qtype_stack | maximalibraries tries to load some optional Maxima libraries. Not all versions of Maxima have these libraries, which can be confusing. Only supported library names can be used. For example try the following. qtype_stack | maximalibraries = stats, distrib, descriptive, simplex Save these settings and run the healtcheck script. Note, internally in Maxima this is equivalent to typing load(stats); in at the Maxima command line for each library in the list. You can try this in step 1 above to check each library you want to load by hand. If you get the following error loadfile: failed to load /usr/share/maxima/5.32.1/share/draw/draw.lisp then remove the optional libraries from qtype_stack | maximalibraries . I.e. set this to blank and re-try the healthcheck. (One of the stats libraries also tries to load the draw library.)","title":"5. Goal: check libraries in Maxima"},{"location":"Installation/Testing_installation/#6-goal-create-optimised-image","text":"Now press the \"Create Maxima Image\" button at the bottom of the healthcheck script page to create the optimised image, and read the output of the refreshed healthcheck page. Note, this page updates some of your settings in the plugin page. In particular, it changes qtype_stack | platform to optimised and fills in the value of qtype_stack | maximacommandopt . Reload the plugin page (but don't save over the top). The maxima image is stored in a sub-directory of moodle's dataroot directory, specifically in dataroot/stack . This is defined in Moodle's config.php as, for example, $CFG->dataroot = '/var/data/moodle311'; The optimised image will therefore be something like /var/data/moodle311/stack/maxima_opt_auto' and the command to execute this (with a timeout) will be timeout --kill-after=10s 10s /var/data/moodle311/stack/maxima_opt_auto -eval '(cl-user::run)' The PHP process must have permission to write to this directory. If your optimised image was not created please check the file permissions, check the file exists and try to run the command maximacommandopt from the server command line. If the current optimised image was created by a different user (e.g. during command-line install) you may not have permission to replace it. (The precise name of the Maxima image depends on the LISP version, e.g. maxima_opt_auto is generated by GCL.)","title":"6. Goal: create optimised image."},{"location":"Installation/Testing_installation/#7-goal-use-the-cas-cache","text":"The very last step is to use the CAS cache. qtype_stack | casresultscache = Cache in the database This should be a working server, using the optimised image. Please consider using the Maxima Pool for production sites, putting Maxima onto another server competely.","title":"7. Goal: use the CAS cache."},{"location":"Moodle/","text":"STACK within the Moodle VLE. This page contains useful information about using STACK within the Moodle VLE. Finding the question bank , Creating a quiz , Importing and exporting .","title":"Moodle"},{"location":"Moodle/#stack-within-the-moodle-vle","text":"This page contains useful information about using STACK within the Moodle VLE. Finding the question bank , Creating a quiz , Importing and exporting .","title":"STACK within the Moodle VLE."},{"location":"Moodle/Import_Export/","text":"Import and Export of STACK questions STACK questions use the \"Moodle XML format\" to import and export. Importing STACK questions Go to Question bank => Import Choose \"Moodle XML format\" and the question bank category you wish to import your questions to. Then select files to import. Some sample questions are supplied with STACK in this format. Exporting STACK questions There are two ways to export STACK questions. The normal Moodle procedure is to export whole category of questions at one time through the Moodle question bank. To export a selection of questions, you need to move them into a separate category. This can be any mix of STACK and other Moodle questions. You must choose \"Moodle XML format\" as the file format. To export a single STACK question as \"Moodle XML format\". Preview the question. Follow the link to \"Question tests & deployed variants\". Export this question. This export mechanism is only available to STACK questions and no other question types in Moodle. Migrating STACK 3 questions to STACK 4 STACK 4.0 has one important change in the question authoring. CASText now uses {@...@} in include mathematics in the text. The change from @...@ to {@...@} gives us matching parentheses to parse, which is much better. The {..} will not break LaTeX. You will need to update all your existing questions which include CAS calculations. This includes all fields, e.g. in the feedback as well. To help with this process we have an automatic conversion script. As an admin user navigate to Site administration -> Plugins -> Question Types -> STACK Then choose the link \"The fix maths delimiters script\". Importing STACK 2 questions You will need to install the qformat_stack importer before you can import STACK 2 questions. Go to Question bank => Import Choose \"STACK2.0 format\" and the question bank category you wish to import your questions to. The importer enables STACK 2 questions which have been exported in STACK's \"xml\" format to be imported into STACK 3. Both individual questions and lists of questions can be imported. There have been a number of changes between STACK 2 and STACK 3. These are detailed in the development track . The following question level options are now ignored by the importer Display (Reason: this should not be set at the question level anyway). Worked Solution on Demand (Reason: the quiz behaviours are the right place to deal with this. Providing this option was always a hack in the first place...). Feedback shown (Reason: again, the quiz behaviours are the right place to deal with this.) From the old MetaData only the name is preserved. All other MetaData is lost on import. STACK 2 exporter does not seem to export some of the interaction element options correctly, in particular the options which ask the student to verify and to show validation feedback. question level penalty option. Questions with a single potential response tree import with the PRT feedback in the specific feedback slot, not in the question text. We envisage this will enable single part questions to respect a wider variety of Moodle question behaviours. When importing question tests, the new testing mechanism in STACK 3 enables the teacher to specify a score and penalty, not just an answer note. Since we have to set defaults on import, most question tests now fail and this information will need to be added by hand. A good opportunity to confirm questions have imported correctly.....","title":"Import and Export of STACK questions"},{"location":"Moodle/Import_Export/#import-and-export-of-stack-questions","text":"STACK questions use the \"Moodle XML format\" to import and export.","title":"Import and Export of STACK questions"},{"location":"Moodle/Import_Export/#importing-stack-questions","text":"Go to Question bank => Import Choose \"Moodle XML format\" and the question bank category you wish to import your questions to. Then select files to import. Some sample questions are supplied with STACK in this format.","title":"Importing STACK questions"},{"location":"Moodle/Import_Export/#exporting-stack-questions","text":"There are two ways to export STACK questions. The normal Moodle procedure is to export whole category of questions at one time through the Moodle question bank. To export a selection of questions, you need to move them into a separate category. This can be any mix of STACK and other Moodle questions. You must choose \"Moodle XML format\" as the file format. To export a single STACK question as \"Moodle XML format\". Preview the question. Follow the link to \"Question tests & deployed variants\". Export this question. This export mechanism is only available to STACK questions and no other question types in Moodle.","title":"Exporting STACK questions"},{"location":"Moodle/Import_Export/#migrating-stack-3-questions-to-stack-4","text":"STACK 4.0 has one important change in the question authoring. CASText now uses {@...@} in include mathematics in the text. The change from @...@ to {@...@} gives us matching parentheses to parse, which is much better. The {..} will not break LaTeX. You will need to update all your existing questions which include CAS calculations. This includes all fields, e.g. in the feedback as well. To help with this process we have an automatic conversion script. As an admin user navigate to Site administration -> Plugins -> Question Types -> STACK Then choose the link \"The fix maths delimiters script\".","title":"Migrating STACK 3 questions to STACK 4"},{"location":"Moodle/Import_Export/#importing-stack-2-questions","text":"You will need to install the qformat_stack importer before you can import STACK 2 questions. Go to Question bank => Import Choose \"STACK2.0 format\" and the question bank category you wish to import your questions to. The importer enables STACK 2 questions which have been exported in STACK's \"xml\" format to be imported into STACK 3. Both individual questions and lists of questions can be imported. There have been a number of changes between STACK 2 and STACK 3. These are detailed in the development track . The following question level options are now ignored by the importer Display (Reason: this should not be set at the question level anyway). Worked Solution on Demand (Reason: the quiz behaviours are the right place to deal with this. Providing this option was always a hack in the first place...). Feedback shown (Reason: again, the quiz behaviours are the right place to deal with this.) From the old MetaData only the name is preserved. All other MetaData is lost on import. STACK 2 exporter does not seem to export some of the interaction element options correctly, in particular the options which ask the student to verify and to show validation feedback. question level penalty option. Questions with a single potential response tree import with the PRT feedback in the specific feedback slot, not in the question text. We envisage this will enable single part questions to respect a wider variety of Moodle question behaviours. When importing question tests, the new testing mechanism in STACK 3 enables the teacher to specify a score and penalty, not just an answer note. Since we have to set defaults on import, most question tests now fail and this information will need to be added by hand. A good opportunity to confirm questions have imported correctly.....","title":"Importing STACK 2 questions"},{"location":"Moodle/Question_bank/","text":"How do I find the Moodle question bank? To find the STACK questions login as a teacher. To begin, go to Moodle and navigate to your course's Course administration page and, from the Question bank section, click on Questions : On the Question Bank page, press the 'Create new question' button: From the 'Choose a question type to add' dialog select 'STACK' and press 'Add': The 'Editing a STACK question' page is displayed. Now we can begin to create the actual question. Don't be put off by the amount of configuration options as, in order to get started, there are only a few we need to worry about.","title":"How do I find the Moodle question bank?"},{"location":"Moodle/Question_bank/#how-do-i-find-the-moodle-question-bank","text":"To find the STACK questions login as a teacher. To begin, go to Moodle and navigate to your course's Course administration page and, from the Question bank section, click on Questions : On the Question Bank page, press the 'Create new question' button: From the 'Choose a question type to add' dialog select 'STACK' and press 'Add': The 'Editing a STACK question' page is displayed. Now we can begin to create the actual question. Don't be put off by the amount of configuration options as, in order to get started, there are only a few we need to worry about.","title":"How do I find the Moodle question bank?"},{"location":"Moodle/Semi-automatic_Marking/","text":"Semi-automatic Marking The primary goal of STACK is automatic marking of students' answers. However, there are many situations where we want students to justify their answer, or provide a response which cannot be marked automatically. It is certainly possible to have students answer one of the other question types. E.g. Moodle provides an \"essay\" question type in which students can type in their answer (essay?), or the teacher can permit students to upload a file, e.g. a picture of their written response. The teacher can then mark this by hand. Another option is to automatically mark students' short answers using a question type such as the pattern match question type in Moodle. STACK provides the \"notes\" input type . There are some advantages to using the notes input, rather than an essay. It is part of a STACK question, so students' answers can be between other parts of a multi-part question. When students \"validate\" their answer, any maths types in using LaTeX is displayed. If the teacher shows validation then students get a preview of their answer, and LaTeX will be displayed. Manual grading. The notes input has a special extra option manualgraded , and the default option value is manualgraded:false . If you specify manualgraded:true then the whole STACK quesion will require manual grading! There really is no way to mix automatic and manually graded parts of a question. Therefore, if you want automatic and manual marking you must have separate questions.","title":"Semi-automatic Marking"},{"location":"Moodle/Semi-automatic_Marking/#semi-automatic-marking","text":"The primary goal of STACK is automatic marking of students' answers. However, there are many situations where we want students to justify their answer, or provide a response which cannot be marked automatically. It is certainly possible to have students answer one of the other question types. E.g. Moodle provides an \"essay\" question type in which students can type in their answer (essay?), or the teacher can permit students to upload a file, e.g. a picture of their written response. The teacher can then mark this by hand. Another option is to automatically mark students' short answers using a question type such as the pattern match question type in Moodle. STACK provides the \"notes\" input type . There are some advantages to using the notes input, rather than an essay. It is part of a STACK question, so students' answers can be between other parts of a multi-part question. When students \"validate\" their answer, any maths types in using LaTeX is displayed. If the teacher shows validation then students get a preview of their answer, and LaTeX will be displayed.","title":"Semi-automatic Marking"},{"location":"Moodle/Semi-automatic_Marking/#manual-grading","text":"The notes input has a special extra option manualgraded , and the default option value is manualgraded:false . If you specify manualgraded:true then the whole STACK quesion will require manual grading! There really is no way to mix automatic and manually graded parts of a question. Therefore, if you want automatic and manual marking you must have separate questions.","title":"Manual grading."},{"location":"Moodle/Variant_matching/","text":"Variant matching This is a relatively advanced feature which links together random variables between questions in the Moodle quiz. Some teachers regularly want to create \"random groups\" with questions based on each other in which students might be presented with a set of questions that are all based on some common question variables. This can be achieved with multi-input questions or variant matching. Multi-input questions keep all the information inside one STACK question. This encapsulation is ideal for clarity of the relationship between parts/questions and sharing a single \"STACK question\", but questions quickly become complex to maintain. When questions are only weakly linked this can also look strange. Variant matching allows separate questions to synchronise random variables. However, the question author is now responsible for making sure their questions actually match! There is currently no way to formally record that two or more questions enjoy variant matching within the questions. In particular, there is no way two questions can share a fragment of question variables, question notes, or a pool of seeds! This makes variant matching currently rather fragile for long-term support. To create matched variants, create two or more STACK questions in the normal way. Random variable generation must be identical for all questions. The complete question variables need not be identical, but anything which affects randomisation must. E.g. any randomisation can be in a block at the start of the question variables which can be copied between all questions. The \"Random Group\" field in each question must be non-empty and identical for all questions in each group sharing randomisation. Formally, question notes need not be identical for all questions. We recommend they at least have one common element uniquely identifying all random variables which contribute to the random group! Deploy variants of one question in the normal way. This should ensure question notes not being deployed more than once (see point 2 above). Copy the list of seeds from one deployed questions to deploy all the other questions in the random group. If question notes are duplicated in a subsequent question this will not stop students using the question. Preventing duplicate question notes normally ensures statistics are grouped correctly. Statistics are grouped by variant , which a teacher will actually want since the underlying variant will be a single member of the random group. Developer notes Internally a \"variant\" is matched to the integer seed. get_variants_selection_seed is a Moodle-side feature syncing the seed we get from Moodle based on the group names we have in the questions.","title":"Variant matching"},{"location":"Moodle/Variant_matching/#variant-matching","text":"This is a relatively advanced feature which links together random variables between questions in the Moodle quiz. Some teachers regularly want to create \"random groups\" with questions based on each other in which students might be presented with a set of questions that are all based on some common question variables. This can be achieved with multi-input questions or variant matching. Multi-input questions keep all the information inside one STACK question. This encapsulation is ideal for clarity of the relationship between parts/questions and sharing a single \"STACK question\", but questions quickly become complex to maintain. When questions are only weakly linked this can also look strange. Variant matching allows separate questions to synchronise random variables. However, the question author is now responsible for making sure their questions actually match! There is currently no way to formally record that two or more questions enjoy variant matching within the questions. In particular, there is no way two questions can share a fragment of question variables, question notes, or a pool of seeds! This makes variant matching currently rather fragile for long-term support. To create matched variants, create two or more STACK questions in the normal way. Random variable generation must be identical for all questions. The complete question variables need not be identical, but anything which affects randomisation must. E.g. any randomisation can be in a block at the start of the question variables which can be copied between all questions. The \"Random Group\" field in each question must be non-empty and identical for all questions in each group sharing randomisation. Formally, question notes need not be identical for all questions. We recommend they at least have one common element uniquely identifying all random variables which contribute to the random group! Deploy variants of one question in the normal way. This should ensure question notes not being deployed more than once (see point 2 above). Copy the list of seeds from one deployed questions to deploy all the other questions in the random group. If question notes are duplicated in a subsequent question this will not stop students using the question. Preventing duplicate question notes normally ensures statistics are grouped correctly. Statistics are grouped by variant , which a teacher will actually want since the underlying variant will be a single member of the random group.","title":"Variant matching"},{"location":"Moodle/Variant_matching/#developer-notes","text":"Internally a \"variant\" is matched to the integer seed. get_variants_selection_seed is a Moodle-side feature syncing the seed we get from Moodle based on the group names we have in the questions.","title":"Developer notes"},{"location":"Reference/","text":"Reference materials This section contains reference materials which are useful, but generally not part of the STACK project. Actuarial notation The HELM project. Using LaTeX and HTML in questions.","title":"Referencias"},{"location":"Reference/#reference-materials","text":"This section contains reference materials which are useful, but generally not part of the STACK project. Actuarial notation The HELM project. Using LaTeX and HTML in questions.","title":"Reference materials"},{"location":"Reference/Actuarial/","text":"Notation used in actuarial work There are a number of special notations particular to actuarial work. For example, [\\require{enclose} EPV = a _{[25]+5:\\enclose{actuarial}{30}} ^ {\\space 1},] which is typeset using \\[\\require{enclose} EPV = a _{[25]+5:\\enclose{actuarial}{30}} ^ {\\space 1}\\] . Further examples are given below. Life Contingencies' Symbols Inline Code (without LaTeX delimiters) ( a ) a ( \\require{enclose} a_{\\enclose{actuarial}{K}} ) \\require{enclose} a_{\\enclose{actuarial}{K}} ( \\require{enclose} \\bar{a}_{\\enclose{actuarial}{T}} ) \\require{enclose} \\bar{a}_{\\enclose{actuarial}{T}} ( \\require{enclose} \\ddot{a}_x ) \\require{enclose} \\ddot{a}_x ( \\require{enclose} \\bar{a}_{h}^{r} ) \\require{enclose} \\bar{a}_{h}^{r} ( \\require{enclose} \\ddot{a}_{x}^{{m}} ) \\require{enclose} \\ddot{a}_{x}^{\\{m\\}} ( \\require{enclose} a_{x:\\enclose{actuarial}{n}} ) \\require{enclose} a_{x:\\enclose{actuarial}{n}} ( \\require{enclose} \\bar{a}_{x:\\enclose{actuarial}{n}} ) \\require{enclose} \\bar{a}_{x:\\enclose{actuarial}{n}} ( \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}} ) \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}} ( \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}}^{(m)} ) \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}}^{(m)} ( \\require{enclose} \\mathring{a}_{x:\\enclose{actuarial}{n}}^{(m)} ) \\require{enclose} \\mathring{a}_{x:\\enclose{actuarial}{n}}^{(m)} ( \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}}^{{m}} ) \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}}^{\\{m\\}} ( \\require{enclose} \\bar{a}_{\\overline{x:\\enclose{actuarial}{n}}} ) \\require{enclose} \\bar{a}_{\\overline{x:\\enclose{actuarial}{n}}} ( \\require{enclose} {}^{2}\\bar{a}_{x:\\enclose{actuarial}{n}} ) \\require{enclose} {}^{2}\\bar{a}_{x:\\enclose{actuarial}{n}} ( \\require{enclose} {}^{2}\\ddot{a}_{xy:\\enclose{actuarial}{n}} ) \\require{enclose} {}^{2}\\ddot{a}_{xy:\\enclose{actuarial}{n}} STACK provides some support for statistical functions via optional Maxima packages. See specific pages on statistics .","title":"Notation used in actuarial work"},{"location":"Reference/Actuarial/#notation-used-in-actuarial-work","text":"There are a number of special notations particular to actuarial work. For example, [\\require{enclose} EPV = a _{[25]+5:\\enclose{actuarial}{30}} ^ {\\space 1},] which is typeset using \\[\\require{enclose} EPV = a _{[25]+5:\\enclose{actuarial}{30}} ^ {\\space 1}\\] . Further examples are given below.","title":"Notation used in actuarial work"},{"location":"Reference/Actuarial/#life-contingencies-symbols","text":"Inline Code (without LaTeX delimiters) ( a ) a ( \\require{enclose} a_{\\enclose{actuarial}{K}} ) \\require{enclose} a_{\\enclose{actuarial}{K}} ( \\require{enclose} \\bar{a}_{\\enclose{actuarial}{T}} ) \\require{enclose} \\bar{a}_{\\enclose{actuarial}{T}} ( \\require{enclose} \\ddot{a}_x ) \\require{enclose} \\ddot{a}_x ( \\require{enclose} \\bar{a}_{h}^{r} ) \\require{enclose} \\bar{a}_{h}^{r} ( \\require{enclose} \\ddot{a}_{x}^{{m}} ) \\require{enclose} \\ddot{a}_{x}^{\\{m\\}} ( \\require{enclose} a_{x:\\enclose{actuarial}{n}} ) \\require{enclose} a_{x:\\enclose{actuarial}{n}} ( \\require{enclose} \\bar{a}_{x:\\enclose{actuarial}{n}} ) \\require{enclose} \\bar{a}_{x:\\enclose{actuarial}{n}} ( \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}} ) \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}} ( \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}}^{(m)} ) \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}}^{(m)} ( \\require{enclose} \\mathring{a}_{x:\\enclose{actuarial}{n}}^{(m)} ) \\require{enclose} \\mathring{a}_{x:\\enclose{actuarial}{n}}^{(m)} ( \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}}^{{m}} ) \\require{enclose} \\ddot{a}_{x:\\enclose{actuarial}{n}}^{\\{m\\}} ( \\require{enclose} \\bar{a}_{\\overline{x:\\enclose{actuarial}{n}}} ) \\require{enclose} \\bar{a}_{\\overline{x:\\enclose{actuarial}{n}}} ( \\require{enclose} {}^{2}\\bar{a}_{x:\\enclose{actuarial}{n}} ) \\require{enclose} {}^{2}\\bar{a}_{x:\\enclose{actuarial}{n}} ( \\require{enclose} {}^{2}\\ddot{a}_{xy:\\enclose{actuarial}{n}} ) \\require{enclose} {}^{2}\\ddot{a}_{xy:\\enclose{actuarial}{n}} STACK provides some support for statistical functions via optional Maxima packages. See specific pages on statistics .","title":"Life Contingencies' Symbols"},{"location":"Reference/HELM/","text":"HELM During the summer of 2020, we started to convert the HELM workbooks into STACK quizzes. The ultimate goal is to create and release one quiz for each of the .pdf workbooks. To help question authors work in parallel and yet achieve a consistent style we introduced the following style conventions which are now available to any STACK question. Key points These appear in boxes in the original HELM workbooks. Do not include the numbers that appear in the PDFs (i.e. use \"Key Point\" rather than \"Key Point 1\") Example Code A generalisation of the third law of indices states: Key Point For all ... . <p>A generalisation of the third law of indices states:</p> <div class=\"HELM_keypoint\"> <h4>Key Point</h4> <p>For all ... .</p> </div> Examples Have a horizontal rule before them. They also have a horizontal rule after them, unless they are last in the text. Do not include the numbers that appear in the PDFs (i.e. use \"Example\" rather than \"Example 1\") The headings are <h4> with a special class applied to them for styling. Use the HELM_parts and HELM_parts_inline styles to label lists of parts (a), (b), (c), etc. Example Code Example Use a calculator to evaluate ... . Solution Using the ... button on the calculator check that you obtain ... . <hr> <h4 class=\"HELM_example\">Example</h4> <p>Use a calculator to evaluate ... .</p> <h4 class=\"HELM_solution\">Solution</h4> <p>Using the ... button on the calculator check that you obtain ... .</p> Example Identify the index and base in the following expressions. Ex 1. Ex 2. Ex 3. Solution In the expression ..., 8 is the base and 11 is the index. In the expression ..., -2 is the base and 5 is the index. In the expression ..., p is the base and -q is the index. The interpretation of a negative index will be given in sub-section 4 which starts on page 31. <hr> <h4 class=\"HELM_example\">Example</h4> <p>Identify the index and base in the following expressions. </p> <ol class=\"HELM_parts_inline\"> <li> Ex 1. </li> <li> Ex 2. </li> <li> Ex 3. </li> </ol> <h4 class=\"HELM_solution\">Solution</h4> <ol class=\"HELM_parts\"> <li>In the expression ..., 8 is the base and 11 is the index.</li> <li>In the expression ..., -2 is the base and 5 is the index.</li> <li>In the expression ..., p is the base and -q is the index.<p> </p><p>The interpretation of a negative index will be given in sub-section 4 which starts on page 31.</p></li> </ol> Hint: If <hr> doesn't work try preceding it with <p>&nbsp;</p>. Questions Start with heading \"Exercise\" - see below for styling. Note that these are numbered in the PDFs but do not copy the numbers. The Moodle quiz will take care of numbering the questions. Example Code Exercise <p class=\"HELM_exercise\">Exercise</p>","title":"HELM"},{"location":"Reference/HELM/#helm","text":"During the summer of 2020, we started to convert the HELM workbooks into STACK quizzes. The ultimate goal is to create and release one quiz for each of the .pdf workbooks. To help question authors work in parallel and yet achieve a consistent style we introduced the following style conventions which are now available to any STACK question.","title":"HELM"},{"location":"Reference/HELM/#key-points","text":"These appear in boxes in the original HELM workbooks. Do not include the numbers that appear in the PDFs (i.e. use \"Key Point\" rather than \"Key Point 1\") Example Code A generalisation of the third law of indices states:","title":"Key points"},{"location":"Reference/HELM/#examples","text":"Have a horizontal rule before them. They also have a horizontal rule after them, unless they are last in the text. Do not include the numbers that appear in the PDFs (i.e. use \"Example\" rather than \"Example 1\") The headings are <h4> with a special class applied to them for styling. Use the HELM_parts and HELM_parts_inline styles to label lists of parts (a), (b), (c), etc. Example Code","title":"Examples"},{"location":"Reference/HELM/#questions","text":"Start with heading \"Exercise\" - see below for styling. Note that these are numbered in the PDFs but do not copy the numbers. The Moodle quiz will take care of numbering the questions. Example Code Exercise <p class=\"HELM_exercise\">Exercise</p>","title":"Questions"},{"location":"Reference/HTML/","text":"Most useful HTML HTML Paragraphs (don't forget the end tag!) <p>This is a paragraph</p> <p>This is another paragraph</p> HTML Line Breaks Use the <br /> tag if you want a line break (a new line) without starting a new paragraph: <p>This is<br />a para<br />graph with line breaks</p> Some formatting <em>This is emphasis</em> <b>This text is bold</b> <big>This text is big</big> <i>This text is italic</i> <code>This is computer output</code> This is <sub>subscript</sub> and <sup>superscript</sup>","title":"Most useful HTML"},{"location":"Reference/HTML/#most-useful-html","text":"HTML Paragraphs (don't forget the end tag!) <p>This is a paragraph</p> <p>This is another paragraph</p> HTML Line Breaks Use the <br /> tag if you want a line break (a new line) without starting a new paragraph: <p>This is<br />a para<br />graph with line breaks</p> Some formatting <em>This is emphasis</em> <b>This text is bold</b> <big>This text is big</big> <i>This text is italic</i> <code>This is computer output</code> This is <sub>subscript</sub> and <sup>superscript</sup>","title":"Most useful HTML"},{"location":"Reference/Latex/","text":"Useful LaTeX LaTeX notation can specify inline or display mode for maths by delimiting with \\( or \\[ respectively. Here are some simple examples: x^2 gives (x^2) x_n gives (x_n) x^{2x} gives (x^{2x}) \\alpha\\beta gives (\\alpha\\beta) \\sin(3\\pi x) gives (\\sin(3\\pi x)) \\frac{1}{1-n^2} gives (\\frac{1}{1-n^2}) when inline. In display mode it gives: [ \\frac{1}{1-n^2} ] \\int_a^b x^2\\ dx gives (\\int_a^b x^2\\ dx) when inline. In display mode it gives: [ \\int_a^b x^2\\ dx ]","title":"Useful LaTeX"},{"location":"Reference/Latex/#useful-latex","text":"LaTeX notation can specify inline or display mode for maths by delimiting with \\( or \\[ respectively. Here are some simple examples: x^2 gives (x^2) x_n gives (x_n) x^{2x} gives (x^{2x}) \\alpha\\beta gives (\\alpha\\beta) \\sin(3\\pi x) gives (\\sin(3\\pi x)) \\frac{1}{1-n^2} gives (\\frac{1}{1-n^2}) when inline. In display mode it gives: [ \\frac{1}{1-n^2} ] \\int_a^b x^2\\ dx gives (\\int_a^b x^2\\ dx) when inline. In display mode it gives: [ \\int_a^b x^2\\ dx ]","title":"Useful LaTeX"},{"location":"Students/","text":"Information for students STACK is software for setting and automatically marking mathematical questions as part of a Moodle quiz. You are normally expected to type in your answer using a simple linear syntax, details of which are given on the Answer input page. Then you submit your answer and it is assessed . STACK establishes that your answer is valid . Next it decides if you are correct , and assigns feedback . Multiple attempts at a question are usually encouraged. You will often be given randomly generated questions, so you may be able to practice similar questions. You can also read about accessibility features and how to use the equivalence reasoning input. There is also page for frequently asked questions, FAQ .","title":"Estudiantes"},{"location":"Students/#information-for-students","text":"STACK is software for setting and automatically marking mathematical questions as part of a Moodle quiz. You are normally expected to type in your answer using a simple linear syntax, details of which are given on the Answer input page. Then you submit your answer and it is assessed . STACK establishes that your answer is valid . Next it decides if you are correct , and assigns feedback . Multiple attempts at a question are usually encouraged. You will often be given randomly generated questions, so you may be able to practice similar questions. You can also read about accessibility features and how to use the equivalence reasoning input. There is also page for frequently asked questions, FAQ .","title":"Information for students"},{"location":"Students/Accessibility/","text":"Accessibility How do I make the fonts bigger? Warning: do not change the size of the font while taking a quiz. Navigate away from the quiz page first. Sometimes the browser will \"reload\" the page when you change the font size, and this may cause your work to be submitted or lost! The fonts which STACK uses should be able to scale. Use the normal options on the browser to change the sizes of the fonts. This changes all the fonts on the page, including the mathematics. Other accessibility features As part of Moodle, we are able to take advantage of the work done by that community, detailed here . The preferred route to displaying mathematics in STACK is to use MathJax. Details of what accessibility features this support are given here . STACK itself uses very simple CSS and HTML form fields, which present very low barriers to accessibility software.","title":"Accessibility"},{"location":"Students/Accessibility/#accessibility","text":"","title":"Accessibility"},{"location":"Students/Accessibility/#how-do-i-make-the-fonts-bigger","text":"Warning: do not change the size of the font while taking a quiz. Navigate away from the quiz page first. Sometimes the browser will \"reload\" the page when you change the font size, and this may cause your work to be submitted or lost! The fonts which STACK uses should be able to scale. Use the normal options on the browser to change the sizes of the fonts. This changes all the fonts on the page, including the mathematics.","title":"How do I make the fonts bigger?"},{"location":"Students/Accessibility/#other-accessibility-features","text":"As part of Moodle, we are able to take advantage of the work done by that community, detailed here . The preferred route to displaying mathematics in STACK is to use MathJax. Details of what accessibility features this support are given here . STACK itself uses very simple CSS and HTML form fields, which present very low barriers to accessibility software.","title":"Other accessibility features"},{"location":"Students/Answer_assessment/","text":"Answer assessment How are my answers assessed? A STACK question may have one or more parts . Each part may have one or more inputs , such as typing in a mathematical expression as your answer. An individual mathematical expression you type might be used in more than one part. This sounds complicated, but since there are many possibilities it is difficult to make general statements. The question should be clear. If not, please ask your teacher. If you need to answer a part but have not then you will be told to do so. You should normally answer all the parts! Your answers are assessed in a two-stage process. Your answer must be valid . Once all answers relevant to a part are valid the mathematical properties will be established. What properties are required depends on the question being asked! Sometimes these processes are done in one step, sometimes you will need to submit a page twice. Therefore you should answer parts of a question and press check to validate your answer. If all parts are valid, then you should press check again to ask for your answer to be assessed. You may change your answer. Just press check to validate and then check again to assess. The system keeps track of any changes you make. You will never lose marks for making a syntax error, e.g. missing a closing bracket. However, you may type in a valid expression which is not what you meant and which is wrong. You need to learn how to express yourself using an unambiguous syntax. This is simple and comes to most students easily with practice. If you make a mathematical mistake you should try to do the question again! If you have asked for a worked solution then you may not change any of your answers. Mathematical expressions are normally entered using a typed linear syntax. For more details, see input . Repeated attempts STACK encourages repeated attempts if you do not get the correct answer first time. Normally, a small percentage (e.g. 10%) of the marks available for the question are deducted for each valid but incorrect attempt. However, your final mark will be the maximum mark you achieve over all attempts. You are never worse off trying a partially correct question again. Why is my answer invalid? Only when all the interaction elements for a question part are valid do we consider assessing your answer to the question. The validation process is designed to help you express your mathematics in the correct form and in an unambiguous way. On paper we might \"know what you meant\" but with the computer you have to \"say what you mean\". You do not lose marks if one of your interaction elements is invalid so do not be afraid of typing in your answer. Feedback is always provided. There are a number of reasons why your answer could be considered to be invalid. You may have a syntax error in your answer, such as mismatched brackets. Variables in your answers should be single letters only. The range of Maxima functions you are permitted to type in is limited to mathematical ones, not programming, plotting, and so on. Sometimes the teacher may insist your answer is of the correct type. There are lots of types of mathematical objects, such as equations: 3*x=x^2-1 . These need an equals sign! inequalities: x<=1 . sets: {1,2,3} . Sets must be in curly brackets. lists: [1,1,2,3] . List must be in square brackets. matrices. matrix([1,2],[3,3]) . Think about the form your answer should have before you type it in. Sometimes the teacher may not let you type in certain strings for educational reasons. Sometimes the teacher may not permit you to use floating point numbers, e.g. (0.33). In this case you should give an exact answer as, e.g. a fraction: 1/2 or a surd: sqrt(2) . Some expressions make no mathematical sense at all, e.g. one divided by zero. These are also invalid. What are mathematical properties ? When your answers are all valid you submit them again. This time they are assessed. The outcomes are a mark, and sometimes some written feedback. If you did not obtain full marks then you should try the question again. Assessing your answer is not often a simple case of correct or incorrect . Often we might want your answer to satisfy a number of different mathematical properties. For example: If your expression algebraically equivalent to the correct expression? Is your expression fully simplified (e.g. have you gathered all like terms or factored your expression)? does your expression satisfy the equation ? Is every element of your set a solution? Does your set of solutions contain them all? Answering the question is all about thinking about what properties your answer should have! If you are unsure then you need to ask the teacher.","title":"Answer assessment"},{"location":"Students/Answer_assessment/#answer-assessment","text":"","title":"Answer assessment"},{"location":"Students/Answer_assessment/#how-are-my-answers-assessed","text":"A STACK question may have one or more parts . Each part may have one or more inputs , such as typing in a mathematical expression as your answer. An individual mathematical expression you type might be used in more than one part. This sounds complicated, but since there are many possibilities it is difficult to make general statements. The question should be clear. If not, please ask your teacher. If you need to answer a part but have not then you will be told to do so. You should normally answer all the parts! Your answers are assessed in a two-stage process. Your answer must be valid . Once all answers relevant to a part are valid the mathematical properties will be established. What properties are required depends on the question being asked! Sometimes these processes are done in one step, sometimes you will need to submit a page twice. Therefore you should answer parts of a question and press check to validate your answer. If all parts are valid, then you should press check again to ask for your answer to be assessed. You may change your answer. Just press check to validate and then check again to assess. The system keeps track of any changes you make. You will never lose marks for making a syntax error, e.g. missing a closing bracket. However, you may type in a valid expression which is not what you meant and which is wrong. You need to learn how to express yourself using an unambiguous syntax. This is simple and comes to most students easily with practice. If you make a mathematical mistake you should try to do the question again! If you have asked for a worked solution then you may not change any of your answers. Mathematical expressions are normally entered using a typed linear syntax. For more details, see input .","title":"How are my answers assessed?"},{"location":"Students/Answer_assessment/#repeated-attempts","text":"STACK encourages repeated attempts if you do not get the correct answer first time. Normally, a small percentage (e.g. 10%) of the marks available for the question are deducted for each valid but incorrect attempt. However, your final mark will be the maximum mark you achieve over all attempts. You are never worse off trying a partially correct question again.","title":"Repeated attempts"},{"location":"Students/Answer_assessment/#why-is-my-answer-invalid","text":"Only when all the interaction elements for a question part are valid do we consider assessing your answer to the question. The validation process is designed to help you express your mathematics in the correct form and in an unambiguous way. On paper we might \"know what you meant\" but with the computer you have to \"say what you mean\". You do not lose marks if one of your interaction elements is invalid so do not be afraid of typing in your answer. Feedback is always provided. There are a number of reasons why your answer could be considered to be invalid. You may have a syntax error in your answer, such as mismatched brackets. Variables in your answers should be single letters only. The range of Maxima functions you are permitted to type in is limited to mathematical ones, not programming, plotting, and so on. Sometimes the teacher may insist your answer is of the correct type. There are lots of types of mathematical objects, such as equations: 3*x=x^2-1 . These need an equals sign! inequalities: x<=1 . sets: {1,2,3} . Sets must be in curly brackets. lists: [1,1,2,3] . List must be in square brackets. matrices. matrix([1,2],[3,3]) . Think about the form your answer should have before you type it in. Sometimes the teacher may not let you type in certain strings for educational reasons. Sometimes the teacher may not permit you to use floating point numbers, e.g. (0.33). In this case you should give an exact answer as, e.g. a fraction: 1/2 or a surd: sqrt(2) . Some expressions make no mathematical sense at all, e.g. one divided by zero. These are also invalid.","title":"Why is my answer invalid?"},{"location":"Students/Answer_assessment/#what-are-mathematical-properties","text":"When your answers are all valid you submit them again. This time they are assessed. The outcomes are a mark, and sometimes some written feedback. If you did not obtain full marks then you should try the question again. Assessing your answer is not often a simple case of correct or incorrect . Often we might want your answer to satisfy a number of different mathematical properties. For example: If your expression algebraically equivalent to the correct expression? Is your expression fully simplified (e.g. have you gathered all like terms or factored your expression)? does your expression satisfy the equation ? Is every element of your set a solution? Does your set of solutions contain them all? Answering the question is all about thinking about what properties your answer should have! If you are unsure then you need to ask the teacher.","title":"What are mathematical properties?"},{"location":"Students/Answer_input/","text":"Answer input In STACK you often need to enter an answer which is an algebraic expression. You should type in your answers using the same syntax as that used in the symbolic mathematics package Maxima. The syntax is broadly similar to the syntax used for mathematical formulae in graphical calculators; general programming languages such as Java, C and Basic; and in spreadsheet programs. You will find it useful to master it. For example, to enter ( e^{-t}\\sin(3t)) you need to type in e^(-t)*sin(3*t) STACK tries quite hard to give helpful information about any syntax errors. It might also forgive some errors you make. Basic Notation Numbers You should type in numbers without spaces, and use fractions rather than decimals where possible. For example, (1/4) should be entered as 1/4 , not as 0.25 . Also, (\\pi) is entered as either pi or %pi , (e), the base of the natural logarithms, is entered as either e or %e , (i) is entered as either i or %i . (i) is also sometimes entered as j if you are an engineer. If in doubt ask your teacher. You could also use sqrt(-1) , or (-1)^(1/2) , being careful with the brackets. STACK modifies Maxima's normal input rules so that you don't get caught out with a variable i when you meant %i . You can also use scientific notation for large numbers, e.g. (1000) can be entered as 1E+3 . Note, however, that in many situations floating point numbers are forbidden. Multiplication Use a star for multiplication. Forgetting this is by far the most common source of syntax errors. For example, (3x) should be entered as 3*x . (x(ax+1)(x-1)) should be entered as x*(a*x+1)*(x-1) . STACK does sometimes try to insert stars for you where there is no ambiguity, 2x or (x+1)(x-1) . This guessing cannot be perfect since traditional mathematical notation is sometimes ambiguous! Compare (f(x+1)) and (x(t+1)). Powers Use a caret (^) for raising something to a power: for example, (x^2) should be entered as x^2 . You can get a caret by holding down the SHIFT key and pressing the 6 key on most keyboards. Negative or fractional powers need brackets: (x^{-2}) should be entered as x^(-2) . (x^{1/3}) should be entered as x^(1/3) . The function root(x,n) can be used for x^(1/n) . If you omit the second argument you get root(x)=sqrt(x) . Brackets Brackets are important to group terms in an expression. This is particularly the case in STACK since we use a one-dimensional input rather than traditional written mathematics. Try to consciously develop a sense of when you need brackets and avoid putting in too many. For example, [\\frac{a+b}{c+d}] should be entered as (a+b)/(c+d) . If you type a+b/(c+d) , then STACK will think that you mean [a+\\frac{b}{c+d}.] If you type (a+b)/c+d , then STACK will think that you mean [\\frac{a+b}{c}+d.] If you type a+b/c+d , then STACK will think that you mean [a+\\frac{b}{c}+d.] Think carefully about the expression a/b/c . What do you think this means? There are two options [\\frac{a}{b}\\cdot\\frac{1}{c} = \\frac{a}{bc}\\quad\\mbox{or}\\quad\\frac{a}{\\frac{b}{c}}=\\frac{ac}{b}.] Maxima interprets this as (\\frac{a}{bc}). If in doubt use brackets. Note that in this context you should always use ordinary round bracket (like (a+b)), not square or curly ones (like [a+b] or {a+b}). {a+b} means a set, [a+b] means a list. Scientific units You may be asked to answer a question in which the answer has units. E.g. ( 9.81\\mbox{m}\\mbox{s}^{-2} ). To enter units you must use multiplication, so this is entered as either 9.81*m/s^2 or 9.81*m*s^(-2) . Don't use a space, or another symbol such as + . Subscripts Use the underscore character to denote a subscript. For example, (a_b) should be entered as a_b . More examples (2^{a+b}) should be entered as 2^(a+b) (2 \\cos 3x) should be entered as 2*cos(3*x) (e^{ax}\\sin(bx)) should be entered as exp(a*x)*sin(b*x) ( (ax^2 + b x + c)^{-1}) should be entered as (a*x^2 + b*x + c)^(-1) . Functions Standard functions : Functions, such as (\\sin), (\\cos), (\\tan), (\\exp), (\\log) and so on can be entered using their usual names. However, the argument must always be enclosed in brackets: (\\sin x) should be entered as sin(x) , (\\ln 3) should be entered as ln(3) and so on. Modulus function : The modulus function, sometimes called the absolute value of x , is written as | x | in traditional notation. This must be entered as abs(x) . Trigonometrical functions Things to remember: STACK uses radians for the angles not degrees! The function (1/\\sin(x)) should be typed in as csc(x) rather than cosec(x) . You can type cosec(x) or just call it 1/sin(x) if you prefer. (\\sin^2x) must be entered as sin(x)^2 (which is what it really means, after all). Similarly for (\\tan^2(x)), (\\sinh^2(x)) and so on. Recall that (\\sin^{-1}(x)) traditionally means the number (t) such that (\\sin(t) = x), which is completely different from the number (\\sin(x)^{-1} = 1/\\sin(x)). This traditional notation is really rather unfortunate and is not used by the CAS; instead, (\\sin^{-1}(x)) should be entered as asin(x) . Similarly, (\\tan^{-1}(x)) should be entered as atan(x) and so on. Exponentials and Logarithms To enter the exponential function type exp(x) . Typing e^x should work in STACK, but gets you into bad habits when using a CAS later! Type ln(x) or log(x) to enter the natural logarithm of (x) with base (e\\approx 2.71\\cdots). Note that both of these start with a lower case l for logarithm, not a capital I ( i ). The logarithm of (x) to base (10) is entered as lg(x) . The logarithm of (x) to base (a) is entered as lg(x,a) , sometimes written (\\log_{a}(x)). Matrices You may be given a grid of boxes to fill in. If not, the teacher may provide a hint as to the correct syntax. Otherwise you will need to use Maxima's notation for entering the matrix. The matrix: [ \\left( \\begin{array}{ccc} 1 & 2 & 3 \\ 4 & 5 & 6 \\end{array} \\right)] must be entered as matrix([1,2,3],[4,5,6]) . Each row is entered as a list, and these should be the same length. The function matrix is used to indicate this is a matrix and not a \"list of lists\". Equations and Inequalities Equations can be entered using the equals sign. For example, to enter the equation (y=x^2-2x+1) type y=x^2-2*x+1 . Inequalities can be entered using the greater than and less than signs on the keyboard. Notice that there are four possibilities for you to choose from: < or > or <= or >= . Note there is no space between these symbols, and the equality must come second when it is used, i.e. you cannot use =< . You can enter \"not equals to\" using the # symbol. E.g. x#1 is interpreted as (x\\neq 1). Sometimes you will need to connect inequalities together as x>1 and x<=5 . You must use the logical connectives and and or . \"Chained inequalities\" such as (1<x<5) are not permitted as input syntax. You should enter this as 1<x and x<5 . Reasoning line by line Sometimes you will be asked to reason line by line. This is called reasoning by equivalence . Other notes Greek letters can be entered using their English names. For example, enter (\\alpha+\\beta) as alpha+beta , and (2\\pi) as 2*pi . Sets : To enter a set such as ({1,2,3}) in Maxima you could use the function set(1,2,3) , or use curly brackets and type {1,2,3} . Lists : can be entered using square brackets. For example, to enter the list 1,2,2,3 type [1,2,2,3] . Note that you do not need a semicolon at the end, unlike when you are using a CAS directly. You can also learn about the right syntax by doing tests in practice mode and asking for the solutions; as well as displaying the right answers in ordinary mathematical notation, STACK will tell you how they could be entered. However, there are often several possible ways, and STACK will not always suggest the easiest one. If you have difficulties in entering your answer into STACK you should contact your teacher.","title":"Answer input"},{"location":"Students/Answer_input/#answer-input","text":"In STACK you often need to enter an answer which is an algebraic expression. You should type in your answers using the same syntax as that used in the symbolic mathematics package Maxima. The syntax is broadly similar to the syntax used for mathematical formulae in graphical calculators; general programming languages such as Java, C and Basic; and in spreadsheet programs. You will find it useful to master it. For example, to enter ( e^{-t}\\sin(3t)) you need to type in e^(-t)*sin(3*t) STACK tries quite hard to give helpful information about any syntax errors. It might also forgive some errors you make.","title":"Answer input"},{"location":"Students/Answer_input/#basic-notation","text":"","title":"Basic Notation"},{"location":"Students/Answer_input/#numbers","text":"You should type in numbers without spaces, and use fractions rather than decimals where possible. For example, (1/4) should be entered as 1/4 , not as 0.25 . Also, (\\pi) is entered as either pi or %pi , (e), the base of the natural logarithms, is entered as either e or %e , (i) is entered as either i or %i . (i) is also sometimes entered as j if you are an engineer. If in doubt ask your teacher. You could also use sqrt(-1) , or (-1)^(1/2) , being careful with the brackets. STACK modifies Maxima's normal input rules so that you don't get caught out with a variable i when you meant %i . You can also use scientific notation for large numbers, e.g. (1000) can be entered as 1E+3 . Note, however, that in many situations floating point numbers are forbidden.","title":"Numbers"},{"location":"Students/Answer_input/#multiplication","text":"Use a star for multiplication. Forgetting this is by far the most common source of syntax errors. For example, (3x) should be entered as 3*x . (x(ax+1)(x-1)) should be entered as x*(a*x+1)*(x-1) . STACK does sometimes try to insert stars for you where there is no ambiguity, 2x or (x+1)(x-1) . This guessing cannot be perfect since traditional mathematical notation is sometimes ambiguous! Compare (f(x+1)) and (x(t+1)).","title":"Multiplication"},{"location":"Students/Answer_input/#powers","text":"Use a caret (^) for raising something to a power: for example, (x^2) should be entered as x^2 . You can get a caret by holding down the SHIFT key and pressing the 6 key on most keyboards. Negative or fractional powers need brackets: (x^{-2}) should be entered as x^(-2) . (x^{1/3}) should be entered as x^(1/3) . The function root(x,n) can be used for x^(1/n) . If you omit the second argument you get root(x)=sqrt(x) .","title":"Powers"},{"location":"Students/Answer_input/#brackets","text":"Brackets are important to group terms in an expression. This is particularly the case in STACK since we use a one-dimensional input rather than traditional written mathematics. Try to consciously develop a sense of when you need brackets and avoid putting in too many. For example, [\\frac{a+b}{c+d}] should be entered as (a+b)/(c+d) . If you type a+b/(c+d) , then STACK will think that you mean [a+\\frac{b}{c+d}.] If you type (a+b)/c+d , then STACK will think that you mean [\\frac{a+b}{c}+d.] If you type a+b/c+d , then STACK will think that you mean [a+\\frac{b}{c}+d.] Think carefully about the expression a/b/c . What do you think this means? There are two options [\\frac{a}{b}\\cdot\\frac{1}{c} = \\frac{a}{bc}\\quad\\mbox{or}\\quad\\frac{a}{\\frac{b}{c}}=\\frac{ac}{b}.] Maxima interprets this as (\\frac{a}{bc}). If in doubt use brackets. Note that in this context you should always use ordinary round bracket (like (a+b)), not square or curly ones (like [a+b] or {a+b}). {a+b} means a set, [a+b] means a list.","title":"Brackets"},{"location":"Students/Answer_input/#scientific-units","text":"You may be asked to answer a question in which the answer has units. E.g. ( 9.81\\mbox{m}\\mbox{s}^{-2} ). To enter units you must use multiplication, so this is entered as either 9.81*m/s^2 or 9.81*m*s^(-2) . Don't use a space, or another symbol such as + .","title":"Scientific units"},{"location":"Students/Answer_input/#subscripts","text":"Use the underscore character to denote a subscript. For example, (a_b) should be entered as a_b .","title":"Subscripts"},{"location":"Students/Answer_input/#more-examples","text":"(2^{a+b}) should be entered as 2^(a+b) (2 \\cos 3x) should be entered as 2*cos(3*x) (e^{ax}\\sin(bx)) should be entered as exp(a*x)*sin(b*x) ( (ax^2 + b x + c)^{-1}) should be entered as (a*x^2 + b*x + c)^(-1) .","title":"More examples"},{"location":"Students/Answer_input/#functions","text":"Standard functions : Functions, such as (\\sin), (\\cos), (\\tan), (\\exp), (\\log) and so on can be entered using their usual names. However, the argument must always be enclosed in brackets: (\\sin x) should be entered as sin(x) , (\\ln 3) should be entered as ln(3) and so on. Modulus function : The modulus function, sometimes called the absolute value of x , is written as | x | in traditional notation. This must be entered as abs(x) .","title":"Functions"},{"location":"Students/Answer_input/#trigonometrical-functions","text":"Things to remember: STACK uses radians for the angles not degrees! The function (1/\\sin(x)) should be typed in as csc(x) rather than cosec(x) . You can type cosec(x) or just call it 1/sin(x) if you prefer. (\\sin^2x) must be entered as sin(x)^2 (which is what it really means, after all). Similarly for (\\tan^2(x)), (\\sinh^2(x)) and so on. Recall that (\\sin^{-1}(x)) traditionally means the number (t) such that (\\sin(t) = x), which is completely different from the number (\\sin(x)^{-1} = 1/\\sin(x)). This traditional notation is really rather unfortunate and is not used by the CAS; instead, (\\sin^{-1}(x)) should be entered as asin(x) . Similarly, (\\tan^{-1}(x)) should be entered as atan(x) and so on.","title":"Trigonometrical functions"},{"location":"Students/Answer_input/#exponentials-and-logarithms","text":"To enter the exponential function type exp(x) . Typing e^x should work in STACK, but gets you into bad habits when using a CAS later! Type ln(x) or log(x) to enter the natural logarithm of (x) with base (e\\approx 2.71\\cdots). Note that both of these start with a lower case l for logarithm, not a capital I ( i ). The logarithm of (x) to base (10) is entered as lg(x) . The logarithm of (x) to base (a) is entered as lg(x,a) , sometimes written (\\log_{a}(x)).","title":"Exponentials and Logarithms"},{"location":"Students/Answer_input/#matrices","text":"You may be given a grid of boxes to fill in. If not, the teacher may provide a hint as to the correct syntax. Otherwise you will need to use Maxima's notation for entering the matrix. The matrix: [ \\left( \\begin{array}{ccc} 1 & 2 & 3 \\ 4 & 5 & 6 \\end{array} \\right)] must be entered as matrix([1,2,3],[4,5,6]) . Each row is entered as a list, and these should be the same length. The function matrix is used to indicate this is a matrix and not a \"list of lists\".","title":"Matrices"},{"location":"Students/Answer_input/#equations-and-inequalities","text":"Equations can be entered using the equals sign. For example, to enter the equation (y=x^2-2x+1) type y=x^2-2*x+1 . Inequalities can be entered using the greater than and less than signs on the keyboard. Notice that there are four possibilities for you to choose from: < or > or <= or >= . Note there is no space between these symbols, and the equality must come second when it is used, i.e. you cannot use =< . You can enter \"not equals to\" using the # symbol. E.g. x#1 is interpreted as (x\\neq 1). Sometimes you will need to connect inequalities together as x>1 and x<=5 . You must use the logical connectives and and or . \"Chained inequalities\" such as (1<x<5) are not permitted as input syntax. You should enter this as 1<x and x<5 .","title":"Equations and Inequalities"},{"location":"Students/Answer_input/#reasoning-line-by-line","text":"Sometimes you will be asked to reason line by line. This is called reasoning by equivalence .","title":"Reasoning line by line"},{"location":"Students/Answer_input/#other-notes","text":"Greek letters can be entered using their English names. For example, enter (\\alpha+\\beta) as alpha+beta , and (2\\pi) as 2*pi . Sets : To enter a set such as ({1,2,3}) in Maxima you could use the function set(1,2,3) , or use curly brackets and type {1,2,3} . Lists : can be entered using square brackets. For example, to enter the list 1,2,2,3 type [1,2,2,3] . Note that you do not need a semicolon at the end, unlike when you are using a CAS directly. You can also learn about the right syntax by doing tests in practice mode and asking for the solutions; as well as displaying the right answers in ordinary mathematical notation, STACK will tell you how they could be entered. However, there are often several possible ways, and STACK will not always suggest the easiest one. If you have difficulties in entering your answer into STACK you should contact your teacher.","title":"Other notes"},{"location":"Students/Equivalence_reasoning/","text":"Reasoning by Equivalence Sometimes STACK allows you to work line by line to solve an equation or inequality. You must work in such a way that adjacent lines are equivalent to each other. Start by typing in the equation in the question. Then work line by line in the text area until you have solved the problem. Normally some feedback will be available as you type. For example, to solve the quadratic equation ( x^2-4x-5=0) you might reason in the following way. x^2-4*x-5=0 (x+1)*(x-5)=0 x=-1 or x=5 You can copy and paste from one line to the next and modify the line if this helps. This might be displayed as follows [ \\begin{array}{ccc} \\ & x^2-4 x-5=0 & \\mbox{ } \\ \\color{green}{\\Leftrightarrow} & \\left(x+1\\right) \\left(x-5\\right)=0 & \\mbox{ } \\ \\color{green}{\\Leftrightarrow} & x=-1\\lor x=5 & \\mbox{ } \\end{array} ] Whether this feedback is available to you or not immediately depends on your question. This feedback indicates that STACK considers that each line is equivalent to the previous line. The last line of working is your final answer, although the whole argument is considered as well. You should use the normal syntax for answer input in STACK, including brackets and * symbols for multiplication. Sets, lists and matrices are not permitted when reasoning by equivalence. Do not enter your answer as a list or set of numbers, use logical notation such as x=-1 or x=5 . You can also work line by line with expressions, not equations. For example, to expand out ( (x-1)(x+4) ) you might reason in the following way. (x-1)*(x+4) =x^2-x+4*x-4 =x^2+3*x-4 This might be displayed as follows [\\begin{array}{ll}\\ &\\left(x-1\\right) \\left(x+4\\right) \\cr \\color{green}{\\checkmark}&=x^2-x+4 x-4 \\cr \\color{green}{\\checkmark}&=x^2+3 x-4\\end{array}] Here, each new line must start with an equals sign = . What is \"equivalence\"? Two equations are equivalent if they have the same solutions with the same multiplicities. Two expressions are equivalent if they have the same value when the variables are evaluated. Some general advice for solving equations when reasoning by equivalence is Factorise expressions, then use ( AB=0 \\color{green}{\\Leftrightarrow} A=0 \\lor B=0). Use the difference of two squares, (a^2-b^2=(a-b)(a+b)). Complete the square: e.g. ( (x-a)^2+b=0). Avoid taking roots. Do not take the square root of both sides of an equation. [ \\mbox{ If } a=b \\mbox{ then } a^2=b^2.] However, [ \\mbox{ if } a^2=b^2 \\mbox{ then } a=b \\mbox{ or } a=-b.] So, if you take the square root of both sides of an equation to transform (a^2=b^2) into (a=b) you might miss a root! To avoid this problem use the difference of two squares in the following way. a^2=b^2 a^2-b^2=0 (a-b)*(a+b)=0 a=b or a=-b [ \\begin{array}{ccc} \\ & a^2=b^2 & \\mbox{ } \\ \\color{green}{\\Leftrightarrow} & a^2-b^2=0 & \\mbox{ } \\ \\color{green}{\\Leftrightarrow} & \\left(a-b\\right) \\left(a+b\\right)=0 & \\mbox{ } \\ \\color{green}{\\Leftrightarrow} & a=b\\lor a=-b & \\mbox{ } \\end{array} ] Edge cases Sometimes you will have an equation with no solutions. You can express the fact there are no solutions in the following ways false . This is because sometimes you end up with a contradiction such as (1=2), since this equation is false you can type that as the final line in your argument. none . The special keyword none is used to signify that no values of the variables satisfy the equation. {} . The empty set indicates there are no solutions. Sometimes you will have an equation in which every number is a solution, such as (x=x). You can express the fact every number is a solution in the following ways true . This is because sometimes you end up with an equation such as (x=x), and since this equation is true you can type that as the final line in your argument. all . The special keyword all is used to signify that any values of the variables satisfy the equation.","title":"Reasoning by Equivalence"},{"location":"Students/Equivalence_reasoning/#reasoning-by-equivalence","text":"Sometimes STACK allows you to work line by line to solve an equation or inequality. You must work in such a way that adjacent lines are equivalent to each other. Start by typing in the equation in the question. Then work line by line in the text area until you have solved the problem. Normally some feedback will be available as you type. For example, to solve the quadratic equation ( x^2-4x-5=0) you might reason in the following way. x^2-4*x-5=0 (x+1)*(x-5)=0 x=-1 or x=5 You can copy and paste from one line to the next and modify the line if this helps. This might be displayed as follows [ \\begin{array}{ccc} \\ & x^2-4 x-5=0 & \\mbox{ } \\ \\color{green}{\\Leftrightarrow} & \\left(x+1\\right) \\left(x-5\\right)=0 & \\mbox{ } \\ \\color{green}{\\Leftrightarrow} & x=-1\\lor x=5 & \\mbox{ } \\end{array} ] Whether this feedback is available to you or not immediately depends on your question. This feedback indicates that STACK considers that each line is equivalent to the previous line. The last line of working is your final answer, although the whole argument is considered as well. You should use the normal syntax for answer input in STACK, including brackets and * symbols for multiplication. Sets, lists and matrices are not permitted when reasoning by equivalence. Do not enter your answer as a list or set of numbers, use logical notation such as x=-1 or x=5 . You can also work line by line with expressions, not equations. For example, to expand out ( (x-1)(x+4) ) you might reason in the following way. (x-1)*(x+4) =x^2-x+4*x-4 =x^2+3*x-4 This might be displayed as follows [\\begin{array}{ll}\\ &\\left(x-1\\right) \\left(x+4\\right) \\cr \\color{green}{\\checkmark}&=x^2-x+4 x-4 \\cr \\color{green}{\\checkmark}&=x^2+3 x-4\\end{array}] Here, each new line must start with an equals sign = .","title":"Reasoning by Equivalence"},{"location":"Students/Equivalence_reasoning/#what-is-equivalence","text":"Two equations are equivalent if they have the same solutions with the same multiplicities. Two expressions are equivalent if they have the same value when the variables are evaluated. Some general advice for solving equations when reasoning by equivalence is Factorise expressions, then use ( AB=0 \\color{green}{\\Leftrightarrow} A=0 \\lor B=0). Use the difference of two squares, (a^2-b^2=(a-b)(a+b)). Complete the square: e.g. ( (x-a)^2+b=0).","title":"What is \"equivalence\"?"},{"location":"Students/Equivalence_reasoning/#avoid-taking-roots","text":"Do not take the square root of both sides of an equation. [ \\mbox{ If } a=b \\mbox{ then } a^2=b^2.] However, [ \\mbox{ if } a^2=b^2 \\mbox{ then } a=b \\mbox{ or } a=-b.] So, if you take the square root of both sides of an equation to transform (a^2=b^2) into (a=b) you might miss a root! To avoid this problem use the difference of two squares in the following way. a^2=b^2 a^2-b^2=0 (a-b)*(a+b)=0 a=b or a=-b [ \\begin{array}{ccc} \\ & a^2=b^2 & \\mbox{ } \\ \\color{green}{\\Leftrightarrow} & a^2-b^2=0 & \\mbox{ } \\ \\color{green}{\\Leftrightarrow} & \\left(a-b\\right) \\left(a+b\\right)=0 & \\mbox{ } \\ \\color{green}{\\Leftrightarrow} & a=b\\lor a=-b & \\mbox{ } \\end{array} ]","title":"Avoid taking roots."},{"location":"Students/Equivalence_reasoning/#edge-cases","text":"Sometimes you will have an equation with no solutions. You can express the fact there are no solutions in the following ways false . This is because sometimes you end up with a contradiction such as (1=2), since this equation is false you can type that as the final line in your argument. none . The special keyword none is used to signify that no values of the variables satisfy the equation. {} . The empty set indicates there are no solutions. Sometimes you will have an equation in which every number is a solution, such as (x=x). You can express the fact every number is a solution in the following ways true . This is because sometimes you end up with an equation such as (x=x), and since this equation is true you can type that as the final line in your argument. all . The special keyword all is used to signify that any values of the variables satisfy the equation.","title":"Edge cases"},{"location":"Students/FAQ/","text":"Frequently asked questions This page is designed to help student users of STACK, rather than question authors. How do I enter my answers? You often need to enter an answer which is an algebraic expression. Details and examples are given on the answer input page. The short answer to this question is that you should type in your answers using the same syntax as that used in the symbolic mathematics package Maxima (this page is written for teachers, but you may find it interesting). Why is my answer \"invalid\"? STACK validates students' answers before they are graded, checking if the answers are in an acceptable syntax and giving the student a chance to confirm their answer is correct. By default, answers not explicitly specifying multiplication (fx. (2x) instead of (2*x)) are not accepted. This is linked to a core philosophy of STACK ; students should not be penalized for poor computer syntax. It is better to bug students until their answer is unambiguous, than to risk students being marking wrong for typic in \"sinx\" instead of \"sin(x)\" and having the computer interpret it as \"s*i*n*x\". That being said, there are options in STACK to be less strict with student syntax, so that the system may accept \"2x\" as a valid input. The question author has to activate this function, so contact your teacher if you think they should choose this option. There may be other reasons your answer is not allowed. By default, STACK does not allow variables that are longer than two characters, and your teacher may also have forbidden names and functions they do not want you to use in your answer. Why is my quiz acting differently? Different quizzes can have different question behaviours . Some quizzes may only accept one answer, others may accept an unlimited amount. Some quizzes may allow you to \"check\" if each question is correct before moving on to the next, others may not include this. Some quizzes may give you feedback immediately, other only after a while. Your teacher may have picked different question behaviours for your different quizzes. How do I change the language? Click on your profile, and go to Preferences , Preferred language and then select the language. Here is a direct link to this page (for sites using Moodle). If your language is not available, contact your site administrator - it is likely that they have not installed the relevant language package. Currently, only some languages are supported by STACK. See Language packages for a full list. If the interface is translated, but the question text and feedback is not, it is because your teacher has not added support for multilingual questions when authoring the question. Where can I report bugs? Depends. Is it an issue in the question authoring? Fx. The feedback contains strange symbols, like \"@nn@\". My answer was marked \"wrong\", but I think it should be marked \"correct\". My quiz is not open, but I think it should be. There is a spelling error in the question text. In this case, it is likely your teacher has made an error when authoring the question, so you should contact them first. In general, if you are unsure what is responsible for your bug, the safest option is to contact your teacher, as they are likely to have a better idea of how to categorize the issue. If you think you have found a genuine STACK bug, you should report it in the STACK GitHub . If the bug seems to concern something outside of the question, for example the quiz or the website, you may have found a bug in the learning management system your institution uses. This should be reported to their respective bug report system, for example the one for Moodle . How do I make the fonts bigger? See the information on Accessibility .","title":"Frequently asked questions"},{"location":"Students/FAQ/#frequently-asked-questions","text":"This page is designed to help student users of STACK, rather than question authors.","title":"Frequently asked questions"},{"location":"Students/FAQ/#how-do-i-enter-my-answers","text":"You often need to enter an answer which is an algebraic expression. Details and examples are given on the answer input page. The short answer to this question is that you should type in your answers using the same syntax as that used in the symbolic mathematics package Maxima (this page is written for teachers, but you may find it interesting).","title":"How do I enter my answers?"},{"location":"Students/FAQ/#why-is-my-answer-invalid","text":"STACK validates students' answers before they are graded, checking if the answers are in an acceptable syntax and giving the student a chance to confirm their answer is correct. By default, answers not explicitly specifying multiplication (fx. (2x) instead of (2*x)) are not accepted. This is linked to a core philosophy of STACK ; students should not be penalized for poor computer syntax. It is better to bug students until their answer is unambiguous, than to risk students being marking wrong for typic in \"sinx\" instead of \"sin(x)\" and having the computer interpret it as \"s*i*n*x\". That being said, there are options in STACK to be less strict with student syntax, so that the system may accept \"2x\" as a valid input. The question author has to activate this function, so contact your teacher if you think they should choose this option. There may be other reasons your answer is not allowed. By default, STACK does not allow variables that are longer than two characters, and your teacher may also have forbidden names and functions they do not want you to use in your answer.","title":"Why is my answer \"invalid\"?"},{"location":"Students/FAQ/#why-is-my-quiz-acting-differently","text":"Different quizzes can have different question behaviours . Some quizzes may only accept one answer, others may accept an unlimited amount. Some quizzes may allow you to \"check\" if each question is correct before moving on to the next, others may not include this. Some quizzes may give you feedback immediately, other only after a while. Your teacher may have picked different question behaviours for your different quizzes.","title":"Why is my quiz acting differently?"},{"location":"Students/FAQ/#how-do-i-change-the-language","text":"Click on your profile, and go to Preferences , Preferred language and then select the language. Here is a direct link to this page (for sites using Moodle). If your language is not available, contact your site administrator - it is likely that they have not installed the relevant language package. Currently, only some languages are supported by STACK. See Language packages for a full list. If the interface is translated, but the question text and feedback is not, it is because your teacher has not added support for multilingual questions when authoring the question.","title":"How do I change the language?"},{"location":"Students/FAQ/#where-can-i-report-bugs","text":"Depends. Is it an issue in the question authoring? Fx. The feedback contains strange symbols, like \"@nn@\". My answer was marked \"wrong\", but I think it should be marked \"correct\". My quiz is not open, but I think it should be. There is a spelling error in the question text. In this case, it is likely your teacher has made an error when authoring the question, so you should contact them first. In general, if you are unsure what is responsible for your bug, the safest option is to contact your teacher, as they are likely to have a better idea of how to categorize the issue. If you think you have found a genuine STACK bug, you should report it in the STACK GitHub . If the bug seems to concern something outside of the question, for example the quiz or the website, you may have found a bug in the learning management system your institution uses. This should be reported to their respective bug report system, for example the one for Moodle .","title":"Where can I report bugs?"},{"location":"Students/FAQ/#how-do-i-make-the-fonts-bigger","text":"See the information on Accessibility .","title":"How do I make the fonts bigger?"},{"location":"Topics/","text":"Mathematical topics This section of the STACK documentation contains information on how to author questions in particular mathematics topics. Many topics have differente requirements, e.g. physics needs support for scientific units. These pages contain know-how on linking together features such as inputs , answer tests and options to write questions in particular subject areas. Current topics include: Curve sketching Differential equations Discrete mathematics String similarity via the Levenshtein distance Linear algebra Mathematical Proof Propositional Logic Scientific Units Vector Calculus Unsorted multi-input questions","title":"Temas"},{"location":"Topics/#mathematical-topics","text":"This section of the STACK documentation contains information on how to author questions in particular mathematics topics. Many topics have differente requirements, e.g. physics needs support for scientific units. These pages contain know-how on linking together features such as inputs , answer tests and options to write questions in particular subject areas. Current topics include: Curve sketching Differential equations Discrete mathematics String similarity via the Levenshtein distance Linear algebra Mathematical Proof Propositional Logic Scientific Units Vector Calculus Unsorted multi-input questions","title":"Mathematical topics"},{"location":"Topics/Curve_sketching/","text":"Curve sketching At its core, STACK is built to take algebraic input from students. This makes assessing skills regarding curve sketching difficult to implement. This page will take a look at how people have assessed curve sketching in STACK, including some promising projects and alternatives. GeoGebra GeoGebra is a flexible tool for creating a large number of interactive math applets. Applets like this one (by pirsquared) show that GeoGebra is capable of creating applets that assess at least some competencies of curve sketching (in this case, finding axis intersects). GeoGebra has a strong user base and there is a large number of user-created resources that can be used in a course. These can then easily be embedded in a STACK question with an <iframe> environment. Please note that the GeoGebra's license does not match the STACK licence . JSXGraph STACK has native support for the mathematics visualisation system JSXGraph . Recently, there have been attempts to use JSXGraph to assess curve sketching in STACK. In particular, see the work done by Tobias Mai and Alexander Meyer in developing a JSXGraph applet that lets students sketch curves by a trace of points. The applet can determine how accurate the sketch is and provide specific feedback. Future developments include support for randomisation and interface improvements. More information, including contact information, can be found in their paper \"Sketching functions as a digital task with automated feedback\" . Alternatives to curve sketching What are the competencies that teachers are looking for when they want to test curve sketching? The answer is not clear. When teaching students about polynomials, let's say you want to give a student a function and ensure they can identify x and y-intercepts, stationary points and the general shapes of its curve. There are ways to assess these competencies without using curve sketching, for example by a multiple choice question like the one below, from \"Fundamentals of Algebra and Calculus\". However, note the limitations of MCQ's as discussed in Philosophy of STACK . Contributing We are eager to find a solid way of assessing this competency in STACK. We would appreciate any contributions that help solve this problem. Please contact the developers .","title":"Curve sketching"},{"location":"Topics/Curve_sketching/#curve-sketching","text":"At its core, STACK is built to take algebraic input from students. This makes assessing skills regarding curve sketching difficult to implement. This page will take a look at how people have assessed curve sketching in STACK, including some promising projects and alternatives.","title":"Curve sketching"},{"location":"Topics/Curve_sketching/#geogebra","text":"GeoGebra is a flexible tool for creating a large number of interactive math applets. Applets like this one (by pirsquared) show that GeoGebra is capable of creating applets that assess at least some competencies of curve sketching (in this case, finding axis intersects). GeoGebra has a strong user base and there is a large number of user-created resources that can be used in a course. These can then easily be embedded in a STACK question with an <iframe> environment. Please note that the GeoGebra's license does not match the STACK licence .","title":"GeoGebra"},{"location":"Topics/Curve_sketching/#jsxgraph","text":"STACK has native support for the mathematics visualisation system JSXGraph . Recently, there have been attempts to use JSXGraph to assess curve sketching in STACK. In particular, see the work done by Tobias Mai and Alexander Meyer in developing a JSXGraph applet that lets students sketch curves by a trace of points. The applet can determine how accurate the sketch is and provide specific feedback. Future developments include support for randomisation and interface improvements. More information, including contact information, can be found in their paper \"Sketching functions as a digital task with automated feedback\" .","title":"JSXGraph"},{"location":"Topics/Curve_sketching/#alternatives-to-curve-sketching","text":"What are the competencies that teachers are looking for when they want to test curve sketching? The answer is not clear. When teaching students about polynomials, let's say you want to give a student a function and ensure they can identify x and y-intercepts, stationary points and the general shapes of its curve. There are ways to assess these competencies without using curve sketching, for example by a multiple choice question like the one below, from \"Fundamentals of Algebra and Calculus\". However, note the limitations of MCQ's as discussed in Philosophy of STACK .","title":"Alternatives to curve sketching"},{"location":"Topics/Curve_sketching/#contributing","text":"We are eager to find a solid way of assessing this competency in STACK. We would appreciate any contributions that help solve this problem. Please contact the developers .","title":"Contributing"},{"location":"Topics/Differential_equations/","text":"Differential Equations This page provides examples of how to represent and manipulate ordinary differential equations (ODEs) in Maxima when writing STACK questions. Representing ODEs In a Maxima session we can represent an ODE as ODE: x^2*'diff(y,x) + 3*y*x = sin(x)/x; Notice the use of the ' character in front of the diff function to prevent evaluation. Applied to a function call, such as diff , the single quote prevents evaluation of the function call, although the arguments of the function are still evaluated (if evaluation is not otherwise prevented). The result is the noun form of the function call. Entering DEs The syntax to enter a derivative in Maxima is diff(y,x,n) . Teachers need to use an apostrophe ' character in front of the diff function to prevent evaluation in question variables (etc). E.g. to type in ( \\frac{\\mathrm{d}^2y}{\\mathrm{d}x^2}) you need to use 'diff(y,x,2) . Students' answers always have noun forms added. If a student types in diff(y,x) then this is protected by a special function noundiff(y,x) (etc), and ends up being sent to answer test as 'diff(y,x,1) . If a student types in (literally) diff(y,x)+1 = 0 this will end up being sent to answer test as 'diff(y,x,1)+1 = 0 . The answer test AlgEquiv evaluates all nouns. This has a (perhaps) unexpected side-effect that noundiff(y,x) will be equivalent to 0 , and noundiff(y(x),x) is not. For this reason we have an alternative answer test AlgEquivNouns which does not evaluate all the nouns. The ATEqualComAss also evaluates its arguments but does not \"simplify\" them. So, counter-intuatively perhaps, we currently do have ATEqualComAss(diff(x^2,x), 2*x); as true. Students might expect to enter expressions like ( y' ), ( \\dot{y} ) or ( y_x ) (especially if you are using derivabbrev:true , see below). The use by Maxima of the apostrophe which affects evaluation also has a side-effect that we can't accept y' as valid student input. Input y_x is an atom. Individual questions could interpet this as 'diff(y,x) but there is no systematic mechanism for intepreting subscripts as derivatives. Input dy/dx is the division of one atom dy by another dx and so will commute with other multiplication and division in the expression as normal. There is no way to protect input dy/dx as ( \\frac{\\mathrm{d}y}{\\mathrm{d}x}). The only input which is interpreted by STACK as a derivative is Maxima's diff function, and students must type this as input. The exprssion diff(y(x),x) is not the same as diff(y,x) . In Maxima diff(y(x),x) is not evaluated further. Getting students to type diff(y(x),x) and not diff(y,x) will be a challange. Hence, if you want to condone the difference, it is probably best to evaluate the student's answer in the feedback variables as follows to ensure all occurances of y become y(x) . ans1:'diff(y(x),x)+1 = 0; ansyx:subst(y,y(x),ans1); Trying to substitute y(x) for y will throw an error. Don't use the following, as if the student has used y(x) then it will become y(x)(x) ! ans1:'diff(y,x)+1 = 0; ansyx:ev(ans1,y=y(x)); Further work is needed to better support partial derivatives (input, display and evaluation). Displaying ODEs Maxima has two notations to display ODEs. If derivabbrev:false then 'diff(y,x) is displayed in STACK as ( \\frac{\\mathrm{d}y}{\\mathrm{d}x}). Note this differs from Maxima's normal notation of ( \\frac{\\mathrm{d}}{\\mathrm{d}x}y). If derivabbrev:true then 'diff(y,x) is displayed in STACK and Maxima as ( y_x ). Extra brackets are sometimes produced around the differential. You must have simp:true otherwise the display routines will not work. Manipulating ODEs in Maxima This can be solved with Maxima's ode2 command and initial conditions specified. Below is an example of Maxima's output. (%i1) ODE: x^2*'diff(y,x) + 3*y*x = sin(x)/x; 2 dy sin(x) (%o1) x -- + 3 x y = ------ dx x (%i2) ode2(ODE,y,x); %c - cos(x) (%o2) y = ----------- 3 x (%i3) ic1(%o2,x=%pi,y=0); cos(x) + 1 (%o3) y = - ---------- 3 x Further examples and documentation are given in the Maxima manual Note that by default STACK changes the value of Maxima's logabs variable. This changes the way (1/x) is integrated. If you want the default behaviour of Maxima you will need to restore logabs:false in the question variables. Randomly generating ODE problems When randomly generating questions we could easily generate an ODE which cannot be solved in closed form, so that in particular using ode2 may be problematic. It is much better when setting any kind of STACK question to start with the method and work backwards to generate the question. This ensures the question remains valid over a whole range of parameters. It also provides many intermediate steps which are useful for a worked solution. % characters from solve and ode2 {#Solve_and_ode2} Maxima functions such as solve and ode2 add arbitrary constants, such as constants of integration. In Maxima these are indicated adding constants which begin with percentage characters. For example, assume(x>0); eq1:x^2*'diff(y,x) + 3*y*x = sin(x)/x; sol:ode2(eq1,y,x); results in y = (%c-cos(x))/x^3; Notice the %c in this example. We need a function to strip out the variables starting with % , especially as these are sometimes numbered and we want to use a definite letter, or sequence for the constants. The function stack_strip_percent(ex,var) replaces all variable names starting with % with those in var . There are two ways to use this. if var is a list then take the variables in the list in order. if var is a variable name, then Maxima returns unevaluated list entries, For example stack_strip_percent(y = (%c-cos(x))/x^3,k); returns y = (k[1]-cos(x))/x^3; This is displayed in STACK using subscripts, which is natural. The unevaluated list method also does not need to know how many % signs appear in the expression. The other usage is to provide explicit names for each variable, but the list must be longer than the number of constants in ex , e.g. stack_strip_percent(y = (%c-cos(x))/x^3,[c1,c2]); which returns y = (c1-cos(x))/x^3; The following example question variables can be used within STACK. assume(x>0); ode : x^2*'diff(y,x) + 3*y*x = sin(x)/x; sol : stack_strip_percent(ode2(ode,y,x),[k]); ta : rhs(ev(sol,nouns)); Note, you may need to use the Option \"assume positive\" to get ODE to evaluate the integrals formally and hence \"solve correctly\". If you need to create a list of numbered variables use vars0:stack_var_makelist(k, 5); vars1:rest(stack_var_makelist(k, 6)); Assessing answers ODEs provide a good example of the principle that we should articulate the properties we are looking for in ordinary differential equations. These properties are The answer satisfies the differential equation. The answer satisfies any initial/boundary conditions. The answer is general. The answer is in the required form. Hence, for ODE questions we need a potential response tree which establishes a number of separate properties. On the basis of the properties satisfied, we then need to generate outcomes. Satisfying the differential equation When marking this kind of question, it is probably best to take the student's answer and substitute this into the ODE. The student's answer should satisfy the equation. Just \"looking like the model answer\" isn't as robust. How else does the teacher avoid the problem of knowing which letter the student used to represent an arbitrary constant? E.g. in Maxima code ode:x^2*'diff(y,x) + 3*y*x = sin(x)/x; ans: (c - cos(x))/x^3; /* The student's (correct) answer */ sa1:subst(y=ans,ode); sa2:ev(sa1,nouns); sa3:fullratsimp(expand(sa2)); sa1 , sa2 and sa2 can be used as part of the feedback when a student doesn't get the right answer. Satisfying any initial/boundary conditions If the student's answer is ans then we can check initial/boundary conditions at a point x=x0 simply by using ev(ans,x=x0); block([ds],ds:diff(ans,x),ev(ds,x=x0)); Notice in the second example the need to calculate the derivative of the student's answer before it is evaluated at the point x=x0 . These values can be compared with answer tests in the usual way. Arbitrary constants Further tests are needed to ensure the student's solution is non-trivial, satisfies any initial conditions, or is suitably general. To find which constants are present in an expression use Maxima's listofvars command. In particular, to find if c appears in an expression ans we can use the predicate member member(c,listofvars(ans)) However, it is unusual to want to specify the name of a constant. A student may choose another name. The example below may be helpful here. Sometimes students use the (\\pm) operator, e.g. instead of typing in ( Ae^{\\lambda t} ) they type in ( \\pm Ae^{\\lambda_1 t} ) as +-A*e^(lambda*t) . The (\\pm) has a somewhat ambiguous status in mathematics, but it is likely that many people will want to condone its use here. Internally, the (\\pm) operator is represented with an infix (or prefix) operation #pm# , which is part of STACK but not core Maxima. Instead of a+-b teachers must type a#pm#b . Students' answers get translated into this format. Mostly when dealing with expressions you need to remove the (\\pm) operator. To remove the (\\pm) operator STACK provides the function pm_replace(ex) which performs the re-write rules [ a\\pm b \\rightarrow (a+b) \\vee (a-b) ] [ \\pm a \\rightarrow a \\vee -a ] (actually using STACK's nounor operator to prevent evaluation). If you simply want to implement the re-write rule ( a\\pm b \\rightarrow a+b, ) i.e. ignore the (\\pm) operator, then you can use subst( \"+\",\"#pm#\", ex) . For example, this substitution can be done in the feebdack variables on a student's answer. If you would like to test code offline with #pm# then you will need to make use of the Maxima sandbox . Second order linear differential equations with constant coefficients One important class of ODEs are the second order linear differential equations with constant coefficients. Generating these kinds of problems is relatively simple: we just need to create a quadratic with the correct sort of roots. Let us assume we have two real roots. We might expect an answer ( Ae^{\\lambda_1 t}+Be^{\\lambda_2 t} ). We might have an unusual, but correct, answer such as ( Ae^{\\lambda_1 t}\\left(1+Be^{\\lambda_2 t}\\right) ). Hence, we can't just \"look at the answer\". A sample question of this type is provided by STACK, in which we have the following question variables. sa1 : subst(y(t)=ans1,ode); sa2 : ev(sa1,nouns); sa3 : fullratsimp(expand(sa2)); l : delete(t,listofvars(ans1)); lv : length(l); b1 : ev(ans1,t=0,fullratsimp); b2 : ev(ans1,t=1,fullratsimp); m : float(if b2#0 then fullratsimp(b1/b2) else 0); Here sa1 , sa2 and sa3 are used to ensure the answer satisfies the ODE and if not to provide feedback. To ensure we have two constants we count the number of variables using listofvars , not including t . We are looking for two constants. To ensure the solution is suitably general, we confirm (y(1)\\neq 0) and calculate (y(0)/y(1)). If this simplifies to a number then the constants have cancelled out and we don't have a general solution consisting of two linearly independent parts. These are the properties a correct answer should have. If the teacher has a preference for the form, then a separate test is required to enforce it. For example, you might like the top operation to be a (+), i.e. sum. This can be confirmed by aop : is(equal(op(ans1),\"+\")); Then test aop is true with another answer test. Note that the arguments to answer tests cannot contain double quotes, so a question variable is needed here. Next, let us assume we have complex root, e.g. in the equation [ \\ddot{y}+2\\dot{y}+5=0 ] we have (\\lambda = -1 \\pm 2i). We potentially have quite a variety of solutions. [ y=e^{-t}(A\\sin(2t)+B\\cos(2t))] [ y=Ae^{-t}\\sin(2t+B)] [ y=Ae^{(-1+2i)t}+Be^{(-1-2i)t}] The advantage is that the same code correctly assesses all these forms of the answer. Separating the general from particular solution. Consider the differential equation [ \\ddot{y}+4\\dot{y}=8\\tan(t) ] with corresponding general solution ode:'diff(y,t,2)+4*y-8*tan(t); ans1:-2*sin(2*t)-4*t*cos(2*t)+4*log(cos(t))*sin(2*t)+c_1*cos(2*t)+c_2*sin(2*t); The solution of such an equation consists of the sum (y(t) = c_1\\ y_1(t)+c_2\\ y_2(t)+y_p(t)). The general solution is the term (c_1\\ y_1(t)+c_2\\ y_2(t)) and the particular solution is the part (y_p(t)). It is useful to separate these. Run the above code, which should work. Then we execute the following, which checks the general solution part is made up of two linearly independent parts. /* Calculate the \"Particular integral\", (by setting both constants to zero) and then separate out the \"general solution\".*/ ansPI:ev(ans1,maplist(lambda([ex],ex=0), l)); ansGS:ans1-ansPI; g1 : ev(ansGS,t=0,fullratsimp); g2 : ev(ansGS,t=1,fullratsimp); m : float(if g2#0 then fullratsimp(g1/g2) else 0); Notice to calculate (y_p(t)) we set the constants (c_1=c_2=0), but using the variables in the list l which is defined above as the list of constants without (t). First order exact differential equations An important class of differential equations are the so-called first order exact differential equations of the form [ p(x,y)\\cdot \\dot{y}(x) + q(x,y) =0.] Assume that (h(x,y)=c) gives an implicit function, which satisfies this equation. Then [ \\frac{\\mathrm{d}h}{\\mathrm{d}x}=\\frac{\\partial h}{\\partial y}\\cdot \\frac{\\mathrm{d}y}{\\mathrm{d}x}+\\frac{\\partial h}{\\partial x}=0] and so [ \\frac{\\partial h}{\\partial y} = p(x,y), \\quad \\frac{\\partial h}{\\partial x}=q(x,y).] Differentiating once further (and assuming sufficient regularity of (h)) we have [ \\frac{\\partial p}{\\partial x} = \\frac{\\partial^2 h}{\\partial x\\partial y}=\\frac{\\partial q}{\\partial y}.] Note that this condition on (p) and (q) is necessary and sufficient for the ODE to be exact. In search of such a function (h(x,y)) we may define [ h_1 = \\int q(x,y)\\mathrm{d}x + c_1(y),] [ h_2 = \\int p(x,y)\\mathrm{d}y + c_2(x).] Notice here that (c_1) and (c_2) are arbitrary functions of integration. To evaluate these we differentiate again, for example taking the first of these we find [ \\frac{\\mathrm{d}h_1}{\\mathrm{d}y}=\\frac{\\mathrm{d}}{\\mathrm{d}y}\\left(\\int q(x,y)\\mathrm{d}x \\right) + \\frac{\\mathrm{d}c_1}{\\mathrm{d}y} = p(x,y)] where this last equality arises from the differential equation. Rearranging this and solving we have [ c_1(y) = \\int\\left( p(x,y)- \\frac{\\mathrm{d}}{\\mathrm{d}y}\\left(\\int q(x,y)\\mathrm{d}x \\right)\\right) \\mathrm{d}y.] Similarly we may solve for [ c_2(x) = \\int\\left( q(x,y)- \\frac{\\mathrm{d}}{\\mathrm{d}x}\\left(\\int p(x,y)\\mathrm{d}y \\right)\\right) \\mathrm{d}x.] If (h_1=h_2) then we have an exact differential equation, and (h=h_1=h_2) given the integral of our ODE. Example (x\\dot{y}+y+4=0) As an example consider [ x\\dot{y}+y+4=0.] Then (p=x) and (q=y+4). [ c_1(y) = \\int\\left( p(x,y)- \\frac{\\mathrm{d}}{\\mathrm{d}y}\\left(\\int q(x,y)\\mathrm{d}x \\right)\\right) \\mathrm{d}y = \\int\\left( x- \\frac{\\mathrm{d}}{\\mathrm{d}y}\\left(\\int y+4\\mathrm{d}x \\right)\\right) \\mathrm{d}y] [ = \\int\\left( x- \\frac{\\mathrm{d}}{\\mathrm{d}y}\\left(xy+4x\\right)\\right) \\mathrm{d}y=0] And so [ h_1 = \\int q(x,y)\\mathrm{d}x + c_1(y) = \\int y+4 \\mathrm{d}x = x(y+4)+c.] Now, [ c_2(x) = \\int\\left( q(x,y)- \\frac{\\mathrm{d}}{\\mathrm{d}x}\\left(\\int p(x,y)\\mathrm{d}y \\right)\\right) \\mathrm{d}x = \\int (y+4) - \\frac{\\mathrm{d}}{\\mathrm{d}x}\\left(\\int x\\mathrm{d}y \\right) \\mathrm{d}x ] [ = \\int (y+4) - y \\mathrm{d}x = 4x.] And so, [ h_2 = \\int p(x,y)\\mathrm{d}y + c_2(x) = \\int x \\mathrm{d}y +4x = xy+4x+c] In both cases we obtain the same answer for (h(x,y)=xy+4x). Maxima code The following Maxima code implements this method, and provides further examples of how to manipulate ODEs. /* Solving exact differential equations in Maxima */ (kill(all),load(\"format\"))$ ODE:x*'diff(y,x)+y+4$ /* Ensure we have an expression, not an equation */ if op(ODE)=\"=\" then ODE:lhs(ODE)-rhs(ODE); /* This should write the ODE in the form p*'diff(y,x)+q which we can then sort out to get the coefficients*/ ODE:format(ODE,%poly('diff(y,x)))$ ODEc:coeffs(ODE,'diff(y,x)); q:ODEc[2][1]; p:ODEc[3][1]; /* Check our condition for an exact ODE */ if fullratsimp(diff(p,x)-diff(q,y))=0 then print(\"EXACT\") else print(\"NOT EXACT\")$ /* Next we need to solve [diff(h,x)=q,diff(h,y)=p] to find the integral of our ODE */ h1:integrate(q,x); h2:integrate(p,y); H1:h1+integrate(p-diff(h1,y),y); H2:h2+integrate(q-diff(h2,x),x); /* Note, H1 and H2 should be the same! */ /* Hence the solution is, in terms of y=...+c*/ solve(H1=c,y); Further examples are / Non-exact equations / ODE:y=x*'diff(y,x); /* Exact equations */ ODE:2*y*x*'diff(y,x)+y^2-2*x=0$ ODE:sin(x)*cosh(y)-'diff(y,x)*cos(x)*sinh(y)=0$ ODE:(3*x^2*cos(3*y)+2*y)*'diff(y,x)=-2*x*sin(3*y)$ ODE:x*'diff(y,x)+y+4$ See also Maxima reference topics","title":"Differential Equations"},{"location":"Topics/Differential_equations/#differential-equations","text":"This page provides examples of how to represent and manipulate ordinary differential equations (ODEs) in Maxima when writing STACK questions.","title":"Differential Equations"},{"location":"Topics/Differential_equations/#representing-odes","text":"In a Maxima session we can represent an ODE as ODE: x^2*'diff(y,x) + 3*y*x = sin(x)/x; Notice the use of the ' character in front of the diff function to prevent evaluation. Applied to a function call, such as diff , the single quote prevents evaluation of the function call, although the arguments of the function are still evaluated (if evaluation is not otherwise prevented). The result is the noun form of the function call.","title":"Representing ODEs"},{"location":"Topics/Differential_equations/#entering-des","text":"The syntax to enter a derivative in Maxima is diff(y,x,n) . Teachers need to use an apostrophe ' character in front of the diff function to prevent evaluation in question variables (etc). E.g. to type in ( \\frac{\\mathrm{d}^2y}{\\mathrm{d}x^2}) you need to use 'diff(y,x,2) . Students' answers always have noun forms added. If a student types in diff(y,x) then this is protected by a special function noundiff(y,x) (etc), and ends up being sent to answer test as 'diff(y,x,1) . If a student types in (literally) diff(y,x)+1 = 0 this will end up being sent to answer test as 'diff(y,x,1)+1 = 0 . The answer test AlgEquiv evaluates all nouns. This has a (perhaps) unexpected side-effect that noundiff(y,x) will be equivalent to 0 , and noundiff(y(x),x) is not. For this reason we have an alternative answer test AlgEquivNouns which does not evaluate all the nouns. The ATEqualComAss also evaluates its arguments but does not \"simplify\" them. So, counter-intuatively perhaps, we currently do have ATEqualComAss(diff(x^2,x), 2*x); as true. Students might expect to enter expressions like ( y' ), ( \\dot{y} ) or ( y_x ) (especially if you are using derivabbrev:true , see below). The use by Maxima of the apostrophe which affects evaluation also has a side-effect that we can't accept y' as valid student input. Input y_x is an atom. Individual questions could interpet this as 'diff(y,x) but there is no systematic mechanism for intepreting subscripts as derivatives. Input dy/dx is the division of one atom dy by another dx and so will commute with other multiplication and division in the expression as normal. There is no way to protect input dy/dx as ( \\frac{\\mathrm{d}y}{\\mathrm{d}x}). The only input which is interpreted by STACK as a derivative is Maxima's diff function, and students must type this as input. The exprssion diff(y(x),x) is not the same as diff(y,x) . In Maxima diff(y(x),x) is not evaluated further. Getting students to type diff(y(x),x) and not diff(y,x) will be a challange. Hence, if you want to condone the difference, it is probably best to evaluate the student's answer in the feedback variables as follows to ensure all occurances of y become y(x) . ans1:'diff(y(x),x)+1 = 0; ansyx:subst(y,y(x),ans1); Trying to substitute y(x) for y will throw an error. Don't use the following, as if the student has used y(x) then it will become y(x)(x) ! ans1:'diff(y,x)+1 = 0; ansyx:ev(ans1,y=y(x)); Further work is needed to better support partial derivatives (input, display and evaluation).","title":"Entering DEs"},{"location":"Topics/Differential_equations/#displaying-odes","text":"Maxima has two notations to display ODEs. If derivabbrev:false then 'diff(y,x) is displayed in STACK as ( \\frac{\\mathrm{d}y}{\\mathrm{d}x}). Note this differs from Maxima's normal notation of ( \\frac{\\mathrm{d}}{\\mathrm{d}x}y). If derivabbrev:true then 'diff(y,x) is displayed in STACK and Maxima as ( y_x ). Extra brackets are sometimes produced around the differential. You must have simp:true otherwise the display routines will not work.","title":"Displaying ODEs"},{"location":"Topics/Differential_equations/#manipulating-odes-in-maxima","text":"This can be solved with Maxima's ode2 command and initial conditions specified. Below is an example of Maxima's output. (%i1) ODE: x^2*'diff(y,x) + 3*y*x = sin(x)/x; 2 dy sin(x) (%o1) x -- + 3 x y = ------ dx x (%i2) ode2(ODE,y,x); %c - cos(x) (%o2) y = ----------- 3 x (%i3) ic1(%o2,x=%pi,y=0); cos(x) + 1 (%o3) y = - ---------- 3 x Further examples and documentation are given in the Maxima manual Note that by default STACK changes the value of Maxima's logabs variable. This changes the way (1/x) is integrated. If you want the default behaviour of Maxima you will need to restore logabs:false in the question variables.","title":"Manipulating ODEs in Maxima"},{"location":"Topics/Differential_equations/#randomly-generating-ode-problems","text":"When randomly generating questions we could easily generate an ODE which cannot be solved in closed form, so that in particular using ode2 may be problematic. It is much better when setting any kind of STACK question to start with the method and work backwards to generate the question. This ensures the question remains valid over a whole range of parameters. It also provides many intermediate steps which are useful for a worked solution.","title":"Randomly generating ODE problems"},{"location":"Topics/Differential_equations/#characters-from-solve-and-ode2-solve_and_ode2","text":"Maxima functions such as solve and ode2 add arbitrary constants, such as constants of integration. In Maxima these are indicated adding constants which begin with percentage characters. For example, assume(x>0); eq1:x^2*'diff(y,x) + 3*y*x = sin(x)/x; sol:ode2(eq1,y,x); results in y = (%c-cos(x))/x^3; Notice the %c in this example. We need a function to strip out the variables starting with % , especially as these are sometimes numbered and we want to use a definite letter, or sequence for the constants. The function stack_strip_percent(ex,var) replaces all variable names starting with % with those in var . There are two ways to use this. if var is a list then take the variables in the list in order. if var is a variable name, then Maxima returns unevaluated list entries, For example stack_strip_percent(y = (%c-cos(x))/x^3,k); returns y = (k[1]-cos(x))/x^3; This is displayed in STACK using subscripts, which is natural. The unevaluated list method also does not need to know how many % signs appear in the expression. The other usage is to provide explicit names for each variable, but the list must be longer than the number of constants in ex , e.g. stack_strip_percent(y = (%c-cos(x))/x^3,[c1,c2]); which returns y = (c1-cos(x))/x^3; The following example question variables can be used within STACK. assume(x>0); ode : x^2*'diff(y,x) + 3*y*x = sin(x)/x; sol : stack_strip_percent(ode2(ode,y,x),[k]); ta : rhs(ev(sol,nouns)); Note, you may need to use the Option \"assume positive\" to get ODE to evaluate the integrals formally and hence \"solve correctly\". If you need to create a list of numbered variables use vars0:stack_var_makelist(k, 5); vars1:rest(stack_var_makelist(k, 6));","title":"% characters from solve and ode2 {#Solve_and_ode2}"},{"location":"Topics/Differential_equations/#assessing-answers","text":"ODEs provide a good example of the principle that we should articulate the properties we are looking for in ordinary differential equations. These properties are The answer satisfies the differential equation. The answer satisfies any initial/boundary conditions. The answer is general. The answer is in the required form. Hence, for ODE questions we need a potential response tree which establishes a number of separate properties. On the basis of the properties satisfied, we then need to generate outcomes.","title":"Assessing answers"},{"location":"Topics/Differential_equations/#satisfying-the-differential-equation","text":"When marking this kind of question, it is probably best to take the student's answer and substitute this into the ODE. The student's answer should satisfy the equation. Just \"looking like the model answer\" isn't as robust. How else does the teacher avoid the problem of knowing which letter the student used to represent an arbitrary constant? E.g. in Maxima code ode:x^2*'diff(y,x) + 3*y*x = sin(x)/x; ans: (c - cos(x))/x^3; /* The student's (correct) answer */ sa1:subst(y=ans,ode); sa2:ev(sa1,nouns); sa3:fullratsimp(expand(sa2)); sa1 , sa2 and sa2 can be used as part of the feedback when a student doesn't get the right answer.","title":"Satisfying the differential equation"},{"location":"Topics/Differential_equations/#satisfying-any-initialboundary-conditions","text":"If the student's answer is ans then we can check initial/boundary conditions at a point x=x0 simply by using ev(ans,x=x0); block([ds],ds:diff(ans,x),ev(ds,x=x0)); Notice in the second example the need to calculate the derivative of the student's answer before it is evaluated at the point x=x0 . These values can be compared with answer tests in the usual way.","title":"Satisfying any initial/boundary conditions"},{"location":"Topics/Differential_equations/#arbitrary-constants","text":"Further tests are needed to ensure the student's solution is non-trivial, satisfies any initial conditions, or is suitably general. To find which constants are present in an expression use Maxima's listofvars command. In particular, to find if c appears in an expression ans we can use the predicate member member(c,listofvars(ans)) However, it is unusual to want to specify the name of a constant. A student may choose another name. The example below may be helpful here. Sometimes students use the (\\pm) operator, e.g. instead of typing in ( Ae^{\\lambda t} ) they type in ( \\pm Ae^{\\lambda_1 t} ) as +-A*e^(lambda*t) . The (\\pm) has a somewhat ambiguous status in mathematics, but it is likely that many people will want to condone its use here. Internally, the (\\pm) operator is represented with an infix (or prefix) operation #pm# , which is part of STACK but not core Maxima. Instead of a+-b teachers must type a#pm#b . Students' answers get translated into this format. Mostly when dealing with expressions you need to remove the (\\pm) operator. To remove the (\\pm) operator STACK provides the function pm_replace(ex) which performs the re-write rules [ a\\pm b \\rightarrow (a+b) \\vee (a-b) ] [ \\pm a \\rightarrow a \\vee -a ] (actually using STACK's nounor operator to prevent evaluation). If you simply want to implement the re-write rule ( a\\pm b \\rightarrow a+b, ) i.e. ignore the (\\pm) operator, then you can use subst( \"+\",\"#pm#\", ex) . For example, this substitution can be done in the feebdack variables on a student's answer. If you would like to test code offline with #pm# then you will need to make use of the Maxima sandbox .","title":"Arbitrary constants"},{"location":"Topics/Differential_equations/#second-order-linear-differential-equations-with-constant-coefficients","text":"One important class of ODEs are the second order linear differential equations with constant coefficients. Generating these kinds of problems is relatively simple: we just need to create a quadratic with the correct sort of roots. Let us assume we have two real roots. We might expect an answer ( Ae^{\\lambda_1 t}+Be^{\\lambda_2 t} ). We might have an unusual, but correct, answer such as ( Ae^{\\lambda_1 t}\\left(1+Be^{\\lambda_2 t}\\right) ). Hence, we can't just \"look at the answer\". A sample question of this type is provided by STACK, in which we have the following question variables. sa1 : subst(y(t)=ans1,ode); sa2 : ev(sa1,nouns); sa3 : fullratsimp(expand(sa2)); l : delete(t,listofvars(ans1)); lv : length(l); b1 : ev(ans1,t=0,fullratsimp); b2 : ev(ans1,t=1,fullratsimp); m : float(if b2#0 then fullratsimp(b1/b2) else 0); Here sa1 , sa2 and sa3 are used to ensure the answer satisfies the ODE and if not to provide feedback. To ensure we have two constants we count the number of variables using listofvars , not including t . We are looking for two constants. To ensure the solution is suitably general, we confirm (y(1)\\neq 0) and calculate (y(0)/y(1)). If this simplifies to a number then the constants have cancelled out and we don't have a general solution consisting of two linearly independent parts. These are the properties a correct answer should have. If the teacher has a preference for the form, then a separate test is required to enforce it. For example, you might like the top operation to be a (+), i.e. sum. This can be confirmed by aop : is(equal(op(ans1),\"+\")); Then test aop is true with another answer test. Note that the arguments to answer tests cannot contain double quotes, so a question variable is needed here. Next, let us assume we have complex root, e.g. in the equation [ \\ddot{y}+2\\dot{y}+5=0 ] we have (\\lambda = -1 \\pm 2i). We potentially have quite a variety of solutions. [ y=e^{-t}(A\\sin(2t)+B\\cos(2t))] [ y=Ae^{-t}\\sin(2t+B)] [ y=Ae^{(-1+2i)t}+Be^{(-1-2i)t}] The advantage is that the same code correctly assesses all these forms of the answer.","title":"Second order linear differential equations with constant coefficients"},{"location":"Topics/Differential_equations/#separating-the-general-from-particular-solution","text":"Consider the differential equation [ \\ddot{y}+4\\dot{y}=8\\tan(t) ] with corresponding general solution ode:'diff(y,t,2)+4*y-8*tan(t); ans1:-2*sin(2*t)-4*t*cos(2*t)+4*log(cos(t))*sin(2*t)+c_1*cos(2*t)+c_2*sin(2*t); The solution of such an equation consists of the sum (y(t) = c_1\\ y_1(t)+c_2\\ y_2(t)+y_p(t)). The general solution is the term (c_1\\ y_1(t)+c_2\\ y_2(t)) and the particular solution is the part (y_p(t)). It is useful to separate these. Run the above code, which should work. Then we execute the following, which checks the general solution part is made up of two linearly independent parts. /* Calculate the \"Particular integral\", (by setting both constants to zero) and then separate out the \"general solution\".*/ ansPI:ev(ans1,maplist(lambda([ex],ex=0), l)); ansGS:ans1-ansPI; g1 : ev(ansGS,t=0,fullratsimp); g2 : ev(ansGS,t=1,fullratsimp); m : float(if g2#0 then fullratsimp(g1/g2) else 0); Notice to calculate (y_p(t)) we set the constants (c_1=c_2=0), but using the variables in the list l which is defined above as the list of constants without (t).","title":"Separating the general from particular solution."},{"location":"Topics/Differential_equations/#first-order-exact-differential-equations","text":"An important class of differential equations are the so-called first order exact differential equations of the form [ p(x,y)\\cdot \\dot{y}(x) + q(x,y) =0.] Assume that (h(x,y)=c) gives an implicit function, which satisfies this equation. Then [ \\frac{\\mathrm{d}h}{\\mathrm{d}x}=\\frac{\\partial h}{\\partial y}\\cdot \\frac{\\mathrm{d}y}{\\mathrm{d}x}+\\frac{\\partial h}{\\partial x}=0] and so [ \\frac{\\partial h}{\\partial y} = p(x,y), \\quad \\frac{\\partial h}{\\partial x}=q(x,y).] Differentiating once further (and assuming sufficient regularity of (h)) we have [ \\frac{\\partial p}{\\partial x} = \\frac{\\partial^2 h}{\\partial x\\partial y}=\\frac{\\partial q}{\\partial y}.] Note that this condition on (p) and (q) is necessary and sufficient for the ODE to be exact. In search of such a function (h(x,y)) we may define [ h_1 = \\int q(x,y)\\mathrm{d}x + c_1(y),] [ h_2 = \\int p(x,y)\\mathrm{d}y + c_2(x).] Notice here that (c_1) and (c_2) are arbitrary functions of integration. To evaluate these we differentiate again, for example taking the first of these we find [ \\frac{\\mathrm{d}h_1}{\\mathrm{d}y}=\\frac{\\mathrm{d}}{\\mathrm{d}y}\\left(\\int q(x,y)\\mathrm{d}x \\right) + \\frac{\\mathrm{d}c_1}{\\mathrm{d}y} = p(x,y)] where this last equality arises from the differential equation. Rearranging this and solving we have [ c_1(y) = \\int\\left( p(x,y)- \\frac{\\mathrm{d}}{\\mathrm{d}y}\\left(\\int q(x,y)\\mathrm{d}x \\right)\\right) \\mathrm{d}y.] Similarly we may solve for [ c_2(x) = \\int\\left( q(x,y)- \\frac{\\mathrm{d}}{\\mathrm{d}x}\\left(\\int p(x,y)\\mathrm{d}y \\right)\\right) \\mathrm{d}x.] If (h_1=h_2) then we have an exact differential equation, and (h=h_1=h_2) given the integral of our ODE.","title":"First order exact differential equations"},{"location":"Topics/Differential_equations/#example-xdotyy40","text":"As an example consider [ x\\dot{y}+y+4=0.] Then (p=x) and (q=y+4). [ c_1(y) = \\int\\left( p(x,y)- \\frac{\\mathrm{d}}{\\mathrm{d}y}\\left(\\int q(x,y)\\mathrm{d}x \\right)\\right) \\mathrm{d}y = \\int\\left( x- \\frac{\\mathrm{d}}{\\mathrm{d}y}\\left(\\int y+4\\mathrm{d}x \\right)\\right) \\mathrm{d}y] [ = \\int\\left( x- \\frac{\\mathrm{d}}{\\mathrm{d}y}\\left(xy+4x\\right)\\right) \\mathrm{d}y=0] And so [ h_1 = \\int q(x,y)\\mathrm{d}x + c_1(y) = \\int y+4 \\mathrm{d}x = x(y+4)+c.] Now, [ c_2(x) = \\int\\left( q(x,y)- \\frac{\\mathrm{d}}{\\mathrm{d}x}\\left(\\int p(x,y)\\mathrm{d}y \\right)\\right) \\mathrm{d}x = \\int (y+4) - \\frac{\\mathrm{d}}{\\mathrm{d}x}\\left(\\int x\\mathrm{d}y \\right) \\mathrm{d}x ] [ = \\int (y+4) - y \\mathrm{d}x = 4x.] And so, [ h_2 = \\int p(x,y)\\mathrm{d}y + c_2(x) = \\int x \\mathrm{d}y +4x = xy+4x+c] In both cases we obtain the same answer for (h(x,y)=xy+4x).","title":"Example (x\\dot{y}+y+4=0)"},{"location":"Topics/Differential_equations/#maxima-code","text":"The following Maxima code implements this method, and provides further examples of how to manipulate ODEs. /* Solving exact differential equations in Maxima */ (kill(all),load(\"format\"))$ ODE:x*'diff(y,x)+y+4$ /* Ensure we have an expression, not an equation */ if op(ODE)=\"=\" then ODE:lhs(ODE)-rhs(ODE); /* This should write the ODE in the form p*'diff(y,x)+q which we can then sort out to get the coefficients*/ ODE:format(ODE,%poly('diff(y,x)))$ ODEc:coeffs(ODE,'diff(y,x)); q:ODEc[2][1]; p:ODEc[3][1]; /* Check our condition for an exact ODE */ if fullratsimp(diff(p,x)-diff(q,y))=0 then print(\"EXACT\") else print(\"NOT EXACT\")$ /* Next we need to solve [diff(h,x)=q,diff(h,y)=p] to find the integral of our ODE */ h1:integrate(q,x); h2:integrate(p,y); H1:h1+integrate(p-diff(h1,y),y); H2:h2+integrate(q-diff(h2,x),x); /* Note, H1 and H2 should be the same! */ /* Hence the solution is, in terms of y=...+c*/ solve(H1=c,y); Further examples are / Non-exact equations / ODE:y=x*'diff(y,x); /* Exact equations */ ODE:2*y*x*'diff(y,x)+y^2-2*x=0$ ODE:sin(x)*cosh(y)-'diff(y,x)*cos(x)*sinh(y)=0$ ODE:(3*x^2*cos(3*y)+2*y)*'diff(y,x)=-2*x*sin(3*y)$ ODE:x*'diff(y,x)+y+4$","title":"Maxima code"},{"location":"Topics/Differential_equations/#see-also","text":"Maxima reference topics","title":"See also"},{"location":"Topics/Discrete_mathematics/","text":"Discrete mathematics and graph theory. A graph in discrete mathematics is a set of edges and vertices. Maxima has a \"graphs\" package, which we do not currently support (see github issue #572 for a discussion of why). Generating points for a graph The following question variables produce the complete graph on m vertices. /* Choose the number of points. */ m:7; /* Distribute the points around a circle. */ pts:makelist([decimalplaces(float(cos(2*%pi*k/m)),4),decimalplaces(float(sin(2*%pi*k/m)),4)],k,0,m-1); /* Create the complete graph of m elements. */ every_pair(ex):=block( if length(ex)<2 then return([]), if length(ex)=2 then return([ex]), append(maplist(lambda([ex2],[first(ex),ex2]),rest(ex)), every_pair(rest(ex))) ); edges:every_pair(makelist(k,k,0,m-1)); Displaying graphs with plot() It is possible to plot simple discrete graphs directly using STACK's plot command by building a combination of discrete and line plots. If you want to do this, we strongly recommend you work offline first in Maxima using plot2d to ensure your Maxima code works. In general it is better to (1) separate connections of points from the coordinates of points, and (2) deal with lists of coordinates. That way we can pass a connection, or the coordinates of a point into a function more easily. Create a list of coordinates, where each coordinate is a point [x,y]. nk:5; /* Position nk coordinates evenly round the unit circle. */ pc1:float(makelist([cos(%pi/(2*nk)+2*k*%pi/nk), sin(%pi/(2*nk)+2*k*%pi/nk)], k, 0, nk)); /* Extract individual coordinates. */ x1:maplist(first, pc1); y1:maplist(second, pc1); p1:[discrete,x1,y1]; Plot must have floating point numbers to deal with. Now use the CASText: {@plot([p1,p1],[x,-1,1],[y,-1,1],[style,points,lines],[box,false],[axes,false])@} Notice we plot a list, containing p1 twice, once with style points and once with lines . The following takes a list of edge connections, [a,b] , and a list of co-ordinate points of the form [x,y] and produces the discrete plots of the edge connections. Note the two stage process. Turn the list of edge connections ( edgel ) into lists of points to connect. (The inner maplist ) Turn two points to connect into a discrete plot of the form [discrete [x1, x2], [y1, y2]] . The following code could be combined, but two separate maplist applications separate out the processes with more clarity. pedges(edgel, pts):= maplist(lambda([ex], [discrete, maplist(first, ex), maplist(second, ex)]), maplist(lambda([ex], [pts[first(ex)], pts[second(ex)]]), edgel)); As an example we will create a simple (disconnected) graph as follows. g1:[[2,3], [3,4], [4,2], [1,5]]; /* Plot this graph, using points in positions pc1. */ p2:pedges(g1, pc1); /* Set colours. */ pcols2:makelist(red, k, 1, length(p2)); /* Set Style */ pstyle2:makelist(lines, k, 1, length(p2)); /* Add in points, as before. */ p2:append([p1], p2); pstyle2:append([points], pstyle2); pcols2:append([blue], pcols2); /* Create a single plot. */ pcols2:append([color], pcols2); pstyle2:append([style], pstyle2); And add in the castext {@plot(p2,[x,-1,1],[y,-1,1], pstyle2, pcols2, [box,false], [axes,false])@} To create a complete graph, we need code to create every pair of edges [a,b], as follows. /* Return a list of edge pairs n1 to a list of points. */ pedgesto(n1, nl) := maplist(lambda([ex], [n1, ex]), nl); /* Return every pair of points in nl. */ palledges(nl) := if is(length(nl)=1) then [] else append(pedgesto(first(nl), rest(nl)), palledges(rest(nl))); /* The complete graph on nk edges. */ knk:palledges(makelist(k,k,1,nk)); /* Plot this graph, using points in positions pc1. */ p3:pedges(knk, pc1); /* Set colours. */ pcols3:makelist(red, k, 1, length(p3)); /* Set Style */ pstyle3:makelist(lines, k, 1, length(p3)); /* Add in points, as before. */ p3:append([p1], p3); pstyle3:append([points], pstyle3); pcols3:append([blue], pcols3); /* Create a single plot. */ pcols3:append([color], pcols3); pstyle3:append([style], pstyle3); And add in the castext {@plot(p3,[x,-1,1],[y,-1,1], pstyle3, pcols3, [box,false], [axes,false])@} In the above code I have tried to separate out all the issues into individual steps. Clearly there is significant scope here for utility/convenience functions. Displaying graphs with JSXGraph JSXGraph can be used to display discrete graphs. In the question variables define your points and edges. /* A list of points, which are lists of coordinates.*/ pts:[[1.0,0.0],[0.623,0.782],[-0.223,0.975],[-0.901,0.434],[-0.901,-0.434],[-0.223,-0.975],[0.623,-0.782]]; /* A list of edge connections. */ edges:[[0,1],[0,2],[0,3],[4,5],[4,6],[4,0]]; Then, you can use this JSXGraph block to create your vertices and edges. Note, this code uses board.create('arrow', [...]) , but you could as well use segment not arrow for an un-directed graph. [[jsxgraph]] /* boundingbox:[left, top, right, bottom] */ var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-1.2, 1.2, 1.2, -1.2], axis: false, showCopyright: false}); /* Notice the syntax STACK uses for putting the _value_ of a variable into the text before display. */ var pts = {#pts#}; var boardpts = new Array(); var arrayLength = pts.length; for (var i = 0; i < arrayLength; i++) { boardpts.push(board.create('point', pts[i])); } var edges = {#edges#}; var boardedges = new Array(); var arrayLength = edges.length; for (var i = 0; i < arrayLength; i++) { boardedges.push(board.create('arrow', [boardpts[edges[i][0]], boardpts[edges[i][1]]])); } [[/jsxgraph]]","title":"Discrete mathematics and graph theory."},{"location":"Topics/Discrete_mathematics/#discrete-mathematics-and-graph-theory","text":"A graph in discrete mathematics is a set of edges and vertices. Maxima has a \"graphs\" package, which we do not currently support (see github issue #572 for a discussion of why).","title":"Discrete mathematics and graph theory."},{"location":"Topics/Discrete_mathematics/#generating-points-for-a-graph","text":"The following question variables produce the complete graph on m vertices. /* Choose the number of points. */ m:7; /* Distribute the points around a circle. */ pts:makelist([decimalplaces(float(cos(2*%pi*k/m)),4),decimalplaces(float(sin(2*%pi*k/m)),4)],k,0,m-1); /* Create the complete graph of m elements. */ every_pair(ex):=block( if length(ex)<2 then return([]), if length(ex)=2 then return([ex]), append(maplist(lambda([ex2],[first(ex),ex2]),rest(ex)), every_pair(rest(ex))) ); edges:every_pair(makelist(k,k,0,m-1));","title":"Generating points for a graph"},{"location":"Topics/Discrete_mathematics/#displaying-graphs-with-plot","text":"It is possible to plot simple discrete graphs directly using STACK's plot command by building a combination of discrete and line plots. If you want to do this, we strongly recommend you work offline first in Maxima using plot2d to ensure your Maxima code works. In general it is better to (1) separate connections of points from the coordinates of points, and (2) deal with lists of coordinates. That way we can pass a connection, or the coordinates of a point into a function more easily. Create a list of coordinates, where each coordinate is a point [x,y]. nk:5; /* Position nk coordinates evenly round the unit circle. */ pc1:float(makelist([cos(%pi/(2*nk)+2*k*%pi/nk), sin(%pi/(2*nk)+2*k*%pi/nk)], k, 0, nk)); /* Extract individual coordinates. */ x1:maplist(first, pc1); y1:maplist(second, pc1); p1:[discrete,x1,y1]; Plot must have floating point numbers to deal with. Now use the CASText: {@plot([p1,p1],[x,-1,1],[y,-1,1],[style,points,lines],[box,false],[axes,false])@} Notice we plot a list, containing p1 twice, once with style points and once with lines . The following takes a list of edge connections, [a,b] , and a list of co-ordinate points of the form [x,y] and produces the discrete plots of the edge connections. Note the two stage process. Turn the list of edge connections ( edgel ) into lists of points to connect. (The inner maplist ) Turn two points to connect into a discrete plot of the form [discrete [x1, x2], [y1, y2]] . The following code could be combined, but two separate maplist applications separate out the processes with more clarity. pedges(edgel, pts):= maplist(lambda([ex], [discrete, maplist(first, ex), maplist(second, ex)]), maplist(lambda([ex], [pts[first(ex)], pts[second(ex)]]), edgel)); As an example we will create a simple (disconnected) graph as follows. g1:[[2,3], [3,4], [4,2], [1,5]]; /* Plot this graph, using points in positions pc1. */ p2:pedges(g1, pc1); /* Set colours. */ pcols2:makelist(red, k, 1, length(p2)); /* Set Style */ pstyle2:makelist(lines, k, 1, length(p2)); /* Add in points, as before. */ p2:append([p1], p2); pstyle2:append([points], pstyle2); pcols2:append([blue], pcols2); /* Create a single plot. */ pcols2:append([color], pcols2); pstyle2:append([style], pstyle2); And add in the castext {@plot(p2,[x,-1,1],[y,-1,1], pstyle2, pcols2, [box,false], [axes,false])@} To create a complete graph, we need code to create every pair of edges [a,b], as follows. /* Return a list of edge pairs n1 to a list of points. */ pedgesto(n1, nl) := maplist(lambda([ex], [n1, ex]), nl); /* Return every pair of points in nl. */ palledges(nl) := if is(length(nl)=1) then [] else append(pedgesto(first(nl), rest(nl)), palledges(rest(nl))); /* The complete graph on nk edges. */ knk:palledges(makelist(k,k,1,nk)); /* Plot this graph, using points in positions pc1. */ p3:pedges(knk, pc1); /* Set colours. */ pcols3:makelist(red, k, 1, length(p3)); /* Set Style */ pstyle3:makelist(lines, k, 1, length(p3)); /* Add in points, as before. */ p3:append([p1], p3); pstyle3:append([points], pstyle3); pcols3:append([blue], pcols3); /* Create a single plot. */ pcols3:append([color], pcols3); pstyle3:append([style], pstyle3); And add in the castext {@plot(p3,[x,-1,1],[y,-1,1], pstyle3, pcols3, [box,false], [axes,false])@} In the above code I have tried to separate out all the issues into individual steps. Clearly there is significant scope here for utility/convenience functions.","title":"Displaying graphs with plot()"},{"location":"Topics/Discrete_mathematics/#displaying-graphs-with-jsxgraph","text":"JSXGraph can be used to display discrete graphs. In the question variables define your points and edges. /* A list of points, which are lists of coordinates.*/ pts:[[1.0,0.0],[0.623,0.782],[-0.223,0.975],[-0.901,0.434],[-0.901,-0.434],[-0.223,-0.975],[0.623,-0.782]]; /* A list of edge connections. */ edges:[[0,1],[0,2],[0,3],[4,5],[4,6],[4,0]]; Then, you can use this JSXGraph block to create your vertices and edges. Note, this code uses board.create('arrow', [...]) , but you could as well use segment not arrow for an un-directed graph. [[jsxgraph]] /* boundingbox:[left, top, right, bottom] */ var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-1.2, 1.2, 1.2, -1.2], axis: false, showCopyright: false}); /* Notice the syntax STACK uses for putting the _value_ of a variable into the text before display. */ var pts = {#pts#}; var boardpts = new Array(); var arrayLength = pts.length; for (var i = 0; i < arrayLength; i++) { boardpts.push(board.create('point', pts[i])); } var edges = {#edges#}; var boardedges = new Array(); var arrayLength = edges.length; for (var i = 0; i < arrayLength; i++) { boardedges.push(board.create('arrow', [boardpts[edges[i][0]], boardpts[edges[i][1]]])); } [[/jsxgraph]]","title":"Displaying graphs with JSXGraph"},{"location":"Topics/Levenshtein_distance/","text":"Damerau-Levenshtein distance and strings The Damerau-Levenshtein (Levenshtein for short) distance is a metric, or edit distance, for measuring the difference between two strings. Informally, the Levenshtein distance is the minimum number of single-character edits (insertions, deletions, transition or substitutions) required to change one string into the other. It is named after Vladimir Levenshtein . Support for Levenshtein distance was added to STACK in 2022 by Achim Eichhorn and Andreas Helfrich-Schkarbanenko. The use of this distance automatically includes an element of spell checking, which is one of its significant advantages. Indeed, the Levenshtein distance is widely used for spell checking and auto-complete. (See, e.g., F. J. Damerau, A technique for computer detection and correction of spelling errors , Communications of the ACM (7)3, March 1964 pp 171\u2013176. https://doi.org/10.1145/363958.363994 ) Basic usage example In STACK levenshtein(s, t) takes strings s , t to compare and returns an integer, the Levensthein distance between s and t . This is basically the number of single-character edits. For example levenshtein(\"Add\", \"And\") gives 1, since one letter needs to be changed. levenshtein(\"Add\", \"and\") gives 2, since two leters need to be changed. Adding or removing letters are each a single edit, so that levenshtein(\"Subtract\", \"Subtraction\"); gives 3. Rather than using this \"distance\" a tolerance is defined by the normalised \"Levenshtein similarity\" between 0 (totally different) and 1 (identical). The Maxima code for this function is simple enough to list here explicitly. levenshtein_plv(s, t) := 1.0-levenshtein(s, t)/max(slength(s), slength(t)); For example \"Add\" and \"Addition\" have a distance of 5, and the longest string is 8, so levenshtein_plv(\"Add\", \"Addition\") gives similarity of 0.375. These functions are part of STACK, not core Maxima, and so to use them you will need to make use of the Maxima sandbox . In a practical situation a teacher will likely have to specify a range of acceptable strings to ensure the student is sufficiently similar to something acceptable. Answer test STACK provides an answer test based on the Levenshtein distance/similarity. This test seeks to match the student's answer (a string) with two lists of strings and a numerical tolerance option. The first list ( allow ) is the list of acceptable strings. The second list ( deny ) is the list of unacceptable strings. By default, the test is case insensitive. When you test the student's answer the test finds the most similar string in allow and the most similar string in deny and the corresponding values of the normalised Levenshtein similarity. The test seeks to ensure that the most similar string is within the allow list, and then that the similarity of the student's string to the most similar allow string is better than the specified tolerance. Notes on using the answer test in STACK. The first argument to the test (the \"student's answer\") must be a string. The second argument to the test (the \"teacher's answer\") must be a list in the form [allow, deny] where both allow and deny are themselves lists of strings. The allow list must be non-empty, but the deny list could be empty. The option must be used. Either give the numerical tolerance as a number, or a list of options. The numerical tolerance must be the first element of the options list. By default the test is case-insensitive. If you include the atom CASE in the list of options then the matching is case sensitive, potentially increasing the Levenshtein distance between strings. E.g. use answer test option [0.9, CASE] for a case-senstive test with a tolerance of 0.9. By default this test consolidates whitespace, e.g. replaces tab and newline characters with a single space, trims whitespace from each end and separates with at most one space character. If you include the atom WHITESPACE in the list of options then whitesapace is not consolidated. The current answer test provides feedback indicating which of the allow strings was most similar. The test does not provide feedback indicating which of the deny strings was most similar, but if you can find a use-case which needs deny based feedback please contact the developers and we will add an option. The answernote records the most similar allow string, the most similar deny string and the corresoding tolerance values. It is likley that a teacher will need to examine students' answers in the fist use cycle and fine tune the allow , deny and tolerance values (perhaps with a regrade) to reach an acceptable level of test reliability: the use of the tolerance means this test is not as objective as some other STACK assessments. It is likely this test will benefit from a wide range of text pre-processing options prior to the test being executed, e.g. using functions from Maxima's stringproc library. For example remove (ignore) accents and diacritical marks At this point we do not propose to add these as options to the test itself as the pre-processing can be done in the feedback variables as required. However, pre-processing does affect the feedback given by the test and so test options might be very useful. If you create such processing functions and have compelling use-cases we would appreciate an opportinity to document, and support them as core functionality: please contact the developers. Advice on processing strings in this context. To trim whitespace and full stops from each end of a string, you can define sans1:strim(\" .\",ans1); in the feedback variables. STACK provides a function sremove_chars(rem, st) which removes all occurances of each character in the string rem from the string st . For example to remove all selected punctuation characters use sremove_chars(\".,!?\", ans1) . STACK provides a function ssquish which changes tabs and newlines to spaces; trips whitespace at the ends; and replaces multiple whitespaces with a single whitespace. Writing a STACK question Here is a very simple question using the Damerau-Levenshtein distance. Define the question variables as follows. allow1:[\"Completing the square\", \"Complete the square\"]; deny1:[\"Factoring\", \"Factorising\", \"Expanding\", \"Square\"]; p1:(x-1)^2-3; p0:expand(p1); ta:first(allow1); Define the question text as <p>What is the following transformation called? \\[ {@p0@} \\quad{\\color{blue}\\rightarrow}\\quad {@p1@}\\]</p> <p>[[input:ans1]] [[validation:ans1]]</p> Then: The input ans1 should be a string input, with ta as the teacher's answer. Decide if the students should validate and whether you want validation feedback (probably not). The PRT uses a single node and single answer test: Levenshtein(ans1, [allow1,deny1], 0.8) here 0.8 is the (somewhat arbitrary) similarity. Add in question tests, but remember the test cases should be entered as strings, e.g. \"complete square\" . With this set of allow strings we have ans1:\"complete square\" gives the following answer note from the potential response tree ATLevenshtein_far: [[0.78947,\"Complete the square\"],[0.4,\"Square\"]]. The note ATLevenshtein_far means the closest string was in the allow list, but it was too far away. The rest of the note means that the closest string found in allow1 was \"Complete the square\" with similarity 0.78947. The closest string found in deny1 was \"Square\" with similarity 0.4. If you want to accept \"complete square\" as a correct answer you have two choices: (i) add it to allow1 , or (ii) reduce the required similarity below 0.789. STACK functions You can test in other ways using the feedback variables and the following functions. levenshtein(s, t) takes strings s , t to compare and returns an integer, the Levensthein distance between s and t . This is basically the number of single-character edits. levenshtein_plv(s, t) weights the levenshtein most similar between 0 (totally different) and 1 (identical). In Maxima code this function is defined as levenshtein_plv(s, t) := 1.0-levenshtein(s, t)/max(slength(s), slength(t)); levenshtein_compare_strings(needle, haystack) looks for the string needle in the list of stings haystack . It returns [maxscore, index_haystack_found] where maxscore is the value of the closest match and index_haystack_found is the index to the string found. The maxscore is rounded to five decimal places to help with comparison of floats later.","title":"Damerau-Levenshtein distance and strings"},{"location":"Topics/Levenshtein_distance/#damerau-levenshtein-distance-and-strings","text":"The Damerau-Levenshtein (Levenshtein for short) distance is a metric, or edit distance, for measuring the difference between two strings. Informally, the Levenshtein distance is the minimum number of single-character edits (insertions, deletions, transition or substitutions) required to change one string into the other. It is named after Vladimir Levenshtein . Support for Levenshtein distance was added to STACK in 2022 by Achim Eichhorn and Andreas Helfrich-Schkarbanenko. The use of this distance automatically includes an element of spell checking, which is one of its significant advantages. Indeed, the Levenshtein distance is widely used for spell checking and auto-complete. (See, e.g., F. J. Damerau, A technique for computer detection and correction of spelling errors , Communications of the ACM (7)3, March 1964 pp 171\u2013176. https://doi.org/10.1145/363958.363994 )","title":"Damerau-Levenshtein distance and strings"},{"location":"Topics/Levenshtein_distance/#basic-usage-example","text":"In STACK levenshtein(s, t) takes strings s , t to compare and returns an integer, the Levensthein distance between s and t . This is basically the number of single-character edits. For example levenshtein(\"Add\", \"And\") gives 1, since one letter needs to be changed. levenshtein(\"Add\", \"and\") gives 2, since two leters need to be changed. Adding or removing letters are each a single edit, so that levenshtein(\"Subtract\", \"Subtraction\"); gives 3. Rather than using this \"distance\" a tolerance is defined by the normalised \"Levenshtein similarity\" between 0 (totally different) and 1 (identical). The Maxima code for this function is simple enough to list here explicitly. levenshtein_plv(s, t) := 1.0-levenshtein(s, t)/max(slength(s), slength(t)); For example \"Add\" and \"Addition\" have a distance of 5, and the longest string is 8, so levenshtein_plv(\"Add\", \"Addition\") gives similarity of 0.375. These functions are part of STACK, not core Maxima, and so to use them you will need to make use of the Maxima sandbox . In a practical situation a teacher will likely have to specify a range of acceptable strings to ensure the student is sufficiently similar to something acceptable.","title":"Basic usage example"},{"location":"Topics/Levenshtein_distance/#answer-test","text":"STACK provides an answer test based on the Levenshtein distance/similarity. This test seeks to match the student's answer (a string) with two lists of strings and a numerical tolerance option. The first list ( allow ) is the list of acceptable strings. The second list ( deny ) is the list of unacceptable strings. By default, the test is case insensitive. When you test the student's answer the test finds the most similar string in allow and the most similar string in deny and the corresponding values of the normalised Levenshtein similarity. The test seeks to ensure that the most similar string is within the allow list, and then that the similarity of the student's string to the most similar allow string is better than the specified tolerance. Notes on using the answer test in STACK. The first argument to the test (the \"student's answer\") must be a string. The second argument to the test (the \"teacher's answer\") must be a list in the form [allow, deny] where both allow and deny are themselves lists of strings. The allow list must be non-empty, but the deny list could be empty. The option must be used. Either give the numerical tolerance as a number, or a list of options. The numerical tolerance must be the first element of the options list. By default the test is case-insensitive. If you include the atom CASE in the list of options then the matching is case sensitive, potentially increasing the Levenshtein distance between strings. E.g. use answer test option [0.9, CASE] for a case-senstive test with a tolerance of 0.9. By default this test consolidates whitespace, e.g. replaces tab and newline characters with a single space, trims whitespace from each end and separates with at most one space character. If you include the atom WHITESPACE in the list of options then whitesapace is not consolidated. The current answer test provides feedback indicating which of the allow strings was most similar. The test does not provide feedback indicating which of the deny strings was most similar, but if you can find a use-case which needs deny based feedback please contact the developers and we will add an option. The answernote records the most similar allow string, the most similar deny string and the corresoding tolerance values. It is likley that a teacher will need to examine students' answers in the fist use cycle and fine tune the allow , deny and tolerance values (perhaps with a regrade) to reach an acceptable level of test reliability: the use of the tolerance means this test is not as objective as some other STACK assessments. It is likely this test will benefit from a wide range of text pre-processing options prior to the test being executed, e.g. using functions from Maxima's stringproc library. For example remove (ignore) accents and diacritical marks At this point we do not propose to add these as options to the test itself as the pre-processing can be done in the feedback variables as required. However, pre-processing does affect the feedback given by the test and so test options might be very useful. If you create such processing functions and have compelling use-cases we would appreciate an opportinity to document, and support them as core functionality: please contact the developers.","title":"Answer test"},{"location":"Topics/Levenshtein_distance/#advice-on-processing-strings-in-this-context","text":"To trim whitespace and full stops from each end of a string, you can define sans1:strim(\" .\",ans1); in the feedback variables. STACK provides a function sremove_chars(rem, st) which removes all occurances of each character in the string rem from the string st . For example to remove all selected punctuation characters use sremove_chars(\".,!?\", ans1) . STACK provides a function ssquish which changes tabs and newlines to spaces; trips whitespace at the ends; and replaces multiple whitespaces with a single whitespace.","title":"Advice on processing strings in this context."},{"location":"Topics/Levenshtein_distance/#writing-a-stack-question","text":"Here is a very simple question using the Damerau-Levenshtein distance. Define the question variables as follows. allow1:[\"Completing the square\", \"Complete the square\"]; deny1:[\"Factoring\", \"Factorising\", \"Expanding\", \"Square\"]; p1:(x-1)^2-3; p0:expand(p1); ta:first(allow1); Define the question text as <p>What is the following transformation called? \\[ {@p0@} \\quad{\\color{blue}\\rightarrow}\\quad {@p1@}\\]</p> <p>[[input:ans1]] [[validation:ans1]]</p> Then: The input ans1 should be a string input, with ta as the teacher's answer. Decide if the students should validate and whether you want validation feedback (probably not). The PRT uses a single node and single answer test: Levenshtein(ans1, [allow1,deny1], 0.8) here 0.8 is the (somewhat arbitrary) similarity. Add in question tests, but remember the test cases should be entered as strings, e.g. \"complete square\" . With this set of allow strings we have ans1:\"complete square\" gives the following answer note from the potential response tree ATLevenshtein_far: [[0.78947,\"Complete the square\"],[0.4,\"Square\"]]. The note ATLevenshtein_far means the closest string was in the allow list, but it was too far away. The rest of the note means that the closest string found in allow1 was \"Complete the square\" with similarity 0.78947. The closest string found in deny1 was \"Square\" with similarity 0.4. If you want to accept \"complete square\" as a correct answer you have two choices: (i) add it to allow1 , or (ii) reduce the required similarity below 0.789.","title":"Writing a STACK question"},{"location":"Topics/Levenshtein_distance/#stack-functions","text":"You can test in other ways using the feedback variables and the following functions. levenshtein(s, t) takes strings s , t to compare and returns an integer, the Levensthein distance between s and t . This is basically the number of single-character edits. levenshtein_plv(s, t) weights the levenshtein most similar between 0 (totally different) and 1 (identical). In Maxima code this function is defined as levenshtein_plv(s, t) := 1.0-levenshtein(s, t)/max(slength(s), slength(t)); levenshtein_compare_strings(needle, haystack) looks for the string needle in the list of stings haystack . It returns [maxscore, index_haystack_found] where maxscore is the value of the closest match and index_haystack_found is the index to the string found. The maxscore is rounded to five decimal places to help with comparison of floats later.","title":"STACK functions"},{"location":"Topics/Linear_algebra/","text":"Setting linear algebra questions in STACK Linear algebra, next to calculus, is one of the pillars of modern mathematics and an important application in STACK is testing linear algebra questions. Often there will be many equivalent answers, especially when asking for students to find the basis for a subspace, etc. This document provides some tips and hints for writing STACK questions. Please see also the file on matrix manipulations . Random questions The paper Setting linear algebra problems by John Steele (2003) is very useful. Lines and planes Problem: the student has been asked to represent a subspace in parametric form; we want to decide if these spaces are equivalent. Converting from parametric form to vector form Let us start with an answer such as ta:transpose(matrix([s+2*t,3+t,w])); ta:expand(ta); lv:listofvars(ta); /* Sanity check: make sure the student's answer is linear in its parameters. */ deg:apply(max, maplist(lambda([ex], hipow(ta, ex)), lv)); The first thing is to note Maxima's cm:coefmatrix(flatten(args(ta)), lv); am:augcoefmatrix(flatten(args(ta)), lv); We will turn this into vector form explicitly as follows. /* Remove any constant vectors (setting all parameters to zero). */ cv:ev(ta, maplist(lambda([ex], ex=0), lv), simp); /* Calculate the direction vectors. */ dvs:maplist(lambda([ex], col(cm,ex)), makelist(k,k,1,length(lv))); /* Create vector form. */ simp:false; vf:apply(\"+\", zip_with(\"*\", lv, dvs))+cv; Note, this last line assumes simp:false (otherwise we simplify back to the original ta !), and uses STACK's zip_with function which is not a core part of Maxima. Now we have the direction vectors we can answer a number of questions. Turn the direction vectors into a single matrix. simp:true; cm:transpose(apply(matrix, maplist(lambda([ex], first(transpose(ex))), dvs))); /* Takes us back to ta.... */ cm.transpose(matrix(lv))+cv; Does ta pass through the origin? This amounts to solving solve(flatten(args(ta)), lv); But, solve can throw errors when we have dependent equations (as we might well do...). Solving systems of linear equations Using solve can throw errors, so use linsolve instead. For example. /* Decide if a vector is in W */ point_in_space(W, wx):= linsolve(flatten(args(W))-first(args(transpose(wx))), listofvars(W)); If the above is the empty list, there is no solution. Otherwise a solution is returned. /* Calculate the canonical form of a column space of a system. */ cspace(ex):= block([M], M: coefmatrix(flatten(args(ex)), listofvars(ex)), ev(transpose(rref(transpose(M))), simp) );","title":"Setting linear algebra questions in STACK"},{"location":"Topics/Linear_algebra/#setting-linear-algebra-questions-in-stack","text":"Linear algebra, next to calculus, is one of the pillars of modern mathematics and an important application in STACK is testing linear algebra questions. Often there will be many equivalent answers, especially when asking for students to find the basis for a subspace, etc. This document provides some tips and hints for writing STACK questions. Please see also the file on matrix manipulations .","title":"Setting linear algebra questions in STACK"},{"location":"Topics/Linear_algebra/#random-questions","text":"The paper Setting linear algebra problems by John Steele (2003) is very useful.","title":"Random questions"},{"location":"Topics/Linear_algebra/#lines-and-planes","text":"Problem: the student has been asked to represent a subspace in parametric form; we want to decide if these spaces are equivalent.","title":"Lines and planes"},{"location":"Topics/Linear_algebra/#converting-from-parametric-form-to-vector-form","text":"Let us start with an answer such as ta:transpose(matrix([s+2*t,3+t,w])); ta:expand(ta); lv:listofvars(ta); /* Sanity check: make sure the student's answer is linear in its parameters. */ deg:apply(max, maplist(lambda([ex], hipow(ta, ex)), lv)); The first thing is to note Maxima's cm:coefmatrix(flatten(args(ta)), lv); am:augcoefmatrix(flatten(args(ta)), lv); We will turn this into vector form explicitly as follows. /* Remove any constant vectors (setting all parameters to zero). */ cv:ev(ta, maplist(lambda([ex], ex=0), lv), simp); /* Calculate the direction vectors. */ dvs:maplist(lambda([ex], col(cm,ex)), makelist(k,k,1,length(lv))); /* Create vector form. */ simp:false; vf:apply(\"+\", zip_with(\"*\", lv, dvs))+cv; Note, this last line assumes simp:false (otherwise we simplify back to the original ta !), and uses STACK's zip_with function which is not a core part of Maxima. Now we have the direction vectors we can answer a number of questions. Turn the direction vectors into a single matrix. simp:true; cm:transpose(apply(matrix, maplist(lambda([ex], first(transpose(ex))), dvs))); /* Takes us back to ta.... */ cm.transpose(matrix(lv))+cv; Does ta pass through the origin? This amounts to solving solve(flatten(args(ta)), lv); But, solve can throw errors when we have dependent equations (as we might well do...).","title":"Converting from parametric form to vector form"},{"location":"Topics/Linear_algebra/#solving-systems-of-linear-equations","text":"Using solve can throw errors, so use linsolve instead. For example. /* Decide if a vector is in W */ point_in_space(W, wx):= linsolve(flatten(args(W))-first(args(transpose(wx))), listofvars(W)); If the above is the empty list, there is no solution. Otherwise a solution is returned. /* Calculate the canonical form of a column space of a system. */ cspace(ex):= block([M], M: coefmatrix(flatten(args(ex)), listofvars(ex)), ev(transpose(rref(transpose(M))), simp) );","title":"Solving systems of linear equations"},{"location":"Topics/Proof/","text":"Assessment of proof In STACK the basic assumption is that a student's answer will be a mathematical expression, e.g. a polynomial or an equation. The facilities for assessing a student's free-form proof is limited. A discussion of Practical Online Assessment of Mathematical Proof was given by Sangwin, C.J. and Bickerton, R. (2023), International Journal of Mathematical Education in Science and Technology}, 53(10) doi:10.1080/0020739X.2021.1896813. This included more structured questions making use of faded worked examples and, reading comprehension questions. Colleagues assessing proof might also consider semi-automatic marking . Styles From STACK 4.3 we support the following CSS styles to enable consistent display of mathematical proof, and arguments in general. General style was also introduced with the HELM materials. <div class=\"proof\"> This class is a general high level container. This is typical question style, from the Moodle theme, containing the following proof. Let P(n) be the statement [...] From which we see that. Back to the typical Moodle style. Note, the proof container is minimal, and subtle and does not intrude too much but contains a proof as a distinct entity. <div class=\"proof-block\"> This class allows the teacher to highlight sub-components of a proof. It is intended to be a nested sub-proof block of a main proof. This is typical question style, from the Moodle theme, containing the following proof. This proof has two cases. If n is odd then we have [...] and so ... If n is even then we have a. even more subcases. b. even more subcases. and so ... From which we see that in all cases the proof holds. Back to the typical Moodle style. <div class=\"proof-line\"> , <div class=\"proof-num\"> , <div class=\"proof-step\"> , <div class=\"proof-comment\"> Greater typeset structure can be gained by marking up the proof in more detail, if so desired. A typical proof consists of individual lines. Each line is numbered, so we can refer to them later. The main \"meat\" of the line is the \"proof step\" and there is an optional comment. The proof comment is designed for a comment, to allow an input to ask a question or to act as the second column in a two column proof. Consider the following proof by induction. \\(P(n)\\) 1. Let P(n) be the statement The first block of an induction proof must be a clear statement of the \"induction hypothesis\". 2. .... some maths .... Notice, in this case, we have a purely algebraic induction hypothesis. 3. Since This block is known as the \"base case\". 4. Something profound and something else 5. it follows that P(1) is true. 6. Assume that P(n) is true. This block is known as the \"induction step\". 7. .... lots of complex working .... We just consider the sum which occurs in P(n+1) and start to rearrange this. 8. More working We are assuming P(n) is true, and here we use this fact. 9. More working. 10. Which gives us what we want Notice we have rearranged the algebra to give us the right hand side of P(n+1). 11. Hence P(n+1) is true. This block is the conclusion of the proof. 12. Since P(1) and P(n) implies P(n+1) it follows that P(n) is true for all n by the principal of mathematical induction. <div class=\"proof-column\"> , <div class=\"proof-column-2\"> Alternatively, you can use columns, which are fixed at a width of 48%. The design assumes two columns and line numbers. Additionally, proof-column-2 has a different visual style for emphasis. Here is a proof of the great and wonderful theorem. The proof has two cases. 1. The proof itself is in the first column. The second column can contain comments, here in proof-column-2 style. 2. The proof continues. With further comments. 3. The second case of the proof. The second column can contain comments, here in proof-column style. 4. The proof continues. With further comments. 5. The proof continues. With further comments. 6. The proof continues, without comment. <div class=\"proof-column\"> Lines don't need to have proof-num or proof-block With further comments. The proof continues. With further comments. This concludes the proof. It is possible to use proof-column-2 style in the first column, but this looks odd and is not recommended. The proof-column-2 style is intended for only the second column. The proof-column style is intended to be used in both columns. Here is a proof by induction. Consider the following proof by induction. \\(P(n)\\) 1. Let P(n) be the statement The first block of an induction proof must be a clear statement of the \"induction hypothesis\". 2. .... some maths .... Notice, in this case, we have a purely algebraic induction hypothesis. 3. Since This block is known as the \"base case\". 4. Something profound and something else 5. it follows that P(1) is true. 6. Assume that P(n) is true. This block is known as the \"induction step\". 7. .... lots of complex working .... We just consider the sum which occurs in P(n+1) and start to rearrange this. 8. More working We are assuming P(n) is true, and here we use this fact. 9. More working. 10. Which gives us what we want Notice we have rearranged the algebra to give us the right hand side of P(n+1). 11. Hence P(n+1) is true. This block is the conclusion of the proof. 12. Since P(1) and P(n) implies P(n+1) it follows that P(n) is true for all n by the principal of mathematical induction. <ol class=\"proof-steps\"> This class enables ordered lists to have connected numbered statements. Let A be an n by n matrix and let R be the reduced row echelon form of A. We will show first that det(A) is not zero if and only if det(R) is not zero. Let E1, E2, ... Er be the elementary matrices corresponding to the elementary row operations that reduce A to R. Then Er ... E1 A = [[input:ans1]]] Taking determinants of both sides, we obtain: det(Er) ... det(E_1) det(A) = det(R). The determinants of all the elementary matrices are all [[input:ansdropdown]]] We conclude that det(A) is not zero if and only if det(R) is not zero. Now suppose that A is invertible. Then R = [[input:ans4]] Thus, det(R) = [[input:ans3]] and hence det(A) is not zero. Conversely, if det(A) is not zero then det(R) is not zero, so R cannot have a zero row. Thus R = I and A is invertible as required.","title":"Assessment of proof"},{"location":"Topics/Proof/#assessment-of-proof","text":"In STACK the basic assumption is that a student's answer will be a mathematical expression, e.g. a polynomial or an equation. The facilities for assessing a student's free-form proof is limited. A discussion of Practical Online Assessment of Mathematical Proof was given by Sangwin, C.J. and Bickerton, R. (2023), International Journal of Mathematical Education in Science and Technology}, 53(10) doi:10.1080/0020739X.2021.1896813. This included more structured questions making use of faded worked examples and, reading comprehension questions. Colleagues assessing proof might also consider semi-automatic marking .","title":"Assessment of proof"},{"location":"Topics/Proof/#styles","text":"From STACK 4.3 we support the following CSS styles to enable consistent display of mathematical proof, and arguments in general. General style was also introduced with the HELM materials.","title":"Styles"},{"location":"Topics/Proof/#div-classproof","text":"This class is a general high level container. This is typical question style, from the Moodle theme, containing the following proof. Let P(n) be the statement [...] From which we see that. Back to the typical Moodle style. Note, the proof container is minimal, and subtle and does not intrude too much but contains a proof as a distinct entity.","title":"&lt;div class=\"proof\"&gt;"},{"location":"Topics/Proof/#div-classproof-block","text":"This class allows the teacher to highlight sub-components of a proof. It is intended to be a nested sub-proof block of a main proof. This is typical question style, from the Moodle theme, containing the following proof. This proof has two cases. If n is odd then we have [...] and so ... If n is even then we have a. even more subcases. b. even more subcases. and so ... From which we see that in all cases the proof holds. Back to the typical Moodle style.","title":"&lt;div class=\"proof-block\"&gt;"},{"location":"Topics/Proof/#div-classproof-line-div-classproof-num-div-classproof-step-div-classproof-comment","text":"Greater typeset structure can be gained by marking up the proof in more detail, if so desired. A typical proof consists of individual lines. Each line is numbered, so we can refer to them later. The main \"meat\" of the line is the \"proof step\" and there is an optional comment. The proof comment is designed for a comment, to allow an input to ask a question or to act as the second column in a two column proof. Consider the following proof by induction. \\(P(n)\\) 1. Let P(n) be the statement The first block of an induction proof must be a clear statement of the \"induction hypothesis\". 2. .... some maths .... Notice, in this case, we have a purely algebraic induction hypothesis. 3. Since This block is known as the \"base case\". 4. Something profound and something else 5. it follows that P(1) is true. 6. Assume that P(n) is true. This block is known as the \"induction step\". 7. .... lots of complex working .... We just consider the sum which occurs in P(n+1) and start to rearrange this. 8. More working We are assuming P(n) is true, and here we use this fact. 9. More working. 10. Which gives us what we want Notice we have rearranged the algebra to give us the right hand side of P(n+1). 11. Hence P(n+1) is true. This block is the conclusion of the proof. 12. Since P(1) and P(n) implies P(n+1) it follows that P(n) is true for all n by the principal of mathematical induction.","title":"&lt;div class=\"proof-line\"&gt;, &lt;div class=\"proof-num\"&gt;, &lt;div class=\"proof-step\"&gt;, &lt;div class=\"proof-comment\"&gt;"},{"location":"Topics/Proof/#div-classproof-column-div-classproof-column-2","text":"Alternatively, you can use columns, which are fixed at a width of 48%. The design assumes two columns and line numbers. Additionally, proof-column-2 has a different visual style for emphasis. Here is a proof of the great and wonderful theorem. The proof has two cases. 1. The proof itself is in the first column. The second column can contain comments, here in proof-column-2 style. 2. The proof continues. With further comments. 3. The second case of the proof. The second column can contain comments, here in proof-column style. 4. The proof continues. With further comments. 5. The proof continues. With further comments. 6. The proof continues, without comment.","title":"&lt;div class=\"proof-column\"&gt;, &lt;div class=\"proof-column-2\"&gt;"},{"location":"Topics/Proof/#div-classproof-column","text":"Lines don't need to have proof-num or proof-block With further comments. The proof continues. With further comments. This concludes the proof. It is possible to use proof-column-2 style in the first column, but this looks odd and is not recommended. The proof-column-2 style is intended for only the second column. The proof-column style is intended to be used in both columns. Here is a proof by induction. Consider the following proof by induction. \\(P(n)\\) 1. Let P(n) be the statement The first block of an induction proof must be a clear statement of the \"induction hypothesis\". 2. .... some maths .... Notice, in this case, we have a purely algebraic induction hypothesis. 3. Since This block is known as the \"base case\". 4. Something profound and something else 5. it follows that P(1) is true. 6. Assume that P(n) is true. This block is known as the \"induction step\". 7. .... lots of complex working .... We just consider the sum which occurs in P(n+1) and start to rearrange this. 8. More working We are assuming P(n) is true, and here we use this fact. 9. More working. 10. Which gives us what we want Notice we have rearranged the algebra to give us the right hand side of P(n+1). 11. Hence P(n+1) is true. This block is the conclusion of the proof. 12. Since P(1) and P(n) implies P(n+1) it follows that P(n) is true for all n by the principal of mathematical induction.","title":"&lt;div class=\"proof-column\"&gt;"},{"location":"Topics/Proof/#ol-classproof-steps","text":"This class enables ordered lists to have connected numbered statements. Let A be an n by n matrix and let R be the reduced row echelon form of A. We will show first that det(A) is not zero if and only if det(R) is not zero. Let E1, E2, ... Er be the elementary matrices corresponding to the elementary row operations that reduce A to R. Then Er ... E1 A = [[input:ans1]]] Taking determinants of both sides, we obtain: det(Er) ... det(E_1) det(A) = det(R). The determinants of all the elementary matrices are all [[input:ansdropdown]]] We conclude that det(A) is not zero if and only if det(R) is not zero. Now suppose that A is invertible. Then R = [[input:ans4]] Thus, det(R) = [[input:ans3]] and hence det(A) is not zero. Conversely, if det(A) is not zero then det(R) is not zero, so R cannot have a zero row. Thus R = I and A is invertible as required.","title":"&lt;ol class=\"proof-steps\"&gt;"},{"location":"Topics/Propositional_Logic/","text":"Propositional Logic STACK loads the \"logic\" package from Maxima. Boolean functions Maxima has Boolean operators and , or , and not . These rely on the underlying LISP implementation and as a result the simp:false is ignored. To illustrate the problem, try the following. simp:false$ true and true; x=1 or x=2; The results respectively (of the second two) are true; false; Note, there is no mechanism in Maxima to represent a list of assignments such as x=1 or x=2 , which would be a natural way to express the solution to a quadratic equation. To solve this problem STACK has introduced nounand and nounor which are commutative and associative operators. Students do not need to use nounand and nounor in answers. Any and and or operators occurring in their answers are always automatically converted into these noun forms. Teachers always need to use nounand and nounor in CAS expressions when they want to write non-simplifying expressions. For example, when defining the \"teacher's answer\" they should use the noun forms as appropriate. Teachers often need to use Boolean logic, and so need to consciously separate the difference between these operators and concepts. Note, the answer tests do not convert noun forms to the Maxima forms. Otherwise both x=1 or x=2 and x=1 or x=3 would be evaluated to false and a teacher could not tell that they are different! To replace all nounand (etc) operators and replace them with the Maxima equivalent, use noun_logic_remove(ex) . Operators and notes and This is a lisp function. Teachers should use nounand to prevent evaluation of x=1 and x=0 to false even without simplification. Students type and and this is always converted internally to nounand . or This is a lisp function. Teachers should use nounor to prevent evaluation of x=1 or x=0 to false even without simplification. Students type or and this is always converted internally to nounor . not This is a lisp function. Teachers should use nounnot to prevent evaluation. Students type not and this is always converted internally to nounnot . nand is provided by the logic package, which respects the value of simp . nor is provided by the logic package, which respects the value of simp . xor is provided by the logic package, which respects the value of simp . eq is provided by the logic package, but this input syntax is not supported in STACK. Instead we provide an xnor function. implies is provided by the logic package, which respects the value of simp . Notes There is no support for symbolic logic symbol input currently and students cannot type & , * for and , and similarly students cannot type + for or . There is no existential operator (not that this is propositional logic, but for the record) or an interpretation of '?' as there exits, and there is no universal operator (which some people type in as ! ). To change between language or symbols for logic, use the Logic symbols option . The default behaviour is to use language. The function verb_logic(ex) will remove the noun forms such as nounand and substitute in the lisp versions which will enable evaluation of expressions. The function noun_logic(ex) will replace any remaining lisp but beware that any evaluation (even with simp:false ) will evaluate lisp logical expressions. It is best to use noun forms at the outset, e.g. in the question variables, and only use the lisp forms when calculating, e.g. to evaluate in the PRT. Answer tests The answer tests protect the logical operators. This behaviour is to prevent evaluation of expressions such as x=1 as a boolean predicate fuction. I.e. the default behaviour is to give priority to the assumption an arbitary expression is an algebraic expression, or a set of equations, inequalities etc. The answer test PropLogic replaces all noun logical expressions with the Maxima versions, and then tests two expressions using the function logic_equiv from Maxima's logic package. This answer test does not support sets, lists, etc. The value of the student's answer will always have nounand etc. inserted. Before you manipulate the student's answer, e.g. with the logic package functions, you will need to apply noun_logic_remove(ex) . Truth tables STACK provides various functions for creating and dealing with tables . truth_table(ex) returns the true table of the expression ex . The function will throw an error if the number of variables exceeds 5. The first row of the table is the headings, consisting of a list of variables, and the expression itself. See the documentation on tables for more functionality.","title":"Propositional Logic"},{"location":"Topics/Propositional_Logic/#propositional-logic","text":"STACK loads the \"logic\" package from Maxima.","title":"Propositional Logic"},{"location":"Topics/Propositional_Logic/#boolean-functions","text":"Maxima has Boolean operators and , or , and not . These rely on the underlying LISP implementation and as a result the simp:false is ignored. To illustrate the problem, try the following. simp:false$ true and true; x=1 or x=2; The results respectively (of the second two) are true; false; Note, there is no mechanism in Maxima to represent a list of assignments such as x=1 or x=2 , which would be a natural way to express the solution to a quadratic equation. To solve this problem STACK has introduced nounand and nounor which are commutative and associative operators. Students do not need to use nounand and nounor in answers. Any and and or operators occurring in their answers are always automatically converted into these noun forms. Teachers always need to use nounand and nounor in CAS expressions when they want to write non-simplifying expressions. For example, when defining the \"teacher's answer\" they should use the noun forms as appropriate. Teachers often need to use Boolean logic, and so need to consciously separate the difference between these operators and concepts. Note, the answer tests do not convert noun forms to the Maxima forms. Otherwise both x=1 or x=2 and x=1 or x=3 would be evaluated to false and a teacher could not tell that they are different! To replace all nounand (etc) operators and replace them with the Maxima equivalent, use noun_logic_remove(ex) .","title":"Boolean functions"},{"location":"Topics/Propositional_Logic/#operators-and-notes","text":"and This is a lisp function. Teachers should use nounand to prevent evaluation of x=1 and x=0 to false even without simplification. Students type and and this is always converted internally to nounand . or This is a lisp function. Teachers should use nounor to prevent evaluation of x=1 or x=0 to false even without simplification. Students type or and this is always converted internally to nounor . not This is a lisp function. Teachers should use nounnot to prevent evaluation. Students type not and this is always converted internally to nounnot . nand is provided by the logic package, which respects the value of simp . nor is provided by the logic package, which respects the value of simp . xor is provided by the logic package, which respects the value of simp . eq is provided by the logic package, but this input syntax is not supported in STACK. Instead we provide an xnor function. implies is provided by the logic package, which respects the value of simp . Notes There is no support for symbolic logic symbol input currently and students cannot type & , * for and , and similarly students cannot type + for or . There is no existential operator (not that this is propositional logic, but for the record) or an interpretation of '?' as there exits, and there is no universal operator (which some people type in as ! ). To change between language or symbols for logic, use the Logic symbols option . The default behaviour is to use language. The function verb_logic(ex) will remove the noun forms such as nounand and substitute in the lisp versions which will enable evaluation of expressions. The function noun_logic(ex) will replace any remaining lisp but beware that any evaluation (even with simp:false ) will evaluate lisp logical expressions. It is best to use noun forms at the outset, e.g. in the question variables, and only use the lisp forms when calculating, e.g. to evaluate in the PRT.","title":"Operators and notes"},{"location":"Topics/Propositional_Logic/#answer-tests","text":"The answer tests protect the logical operators. This behaviour is to prevent evaluation of expressions such as x=1 as a boolean predicate fuction. I.e. the default behaviour is to give priority to the assumption an arbitary expression is an algebraic expression, or a set of equations, inequalities etc. The answer test PropLogic replaces all noun logical expressions with the Maxima versions, and then tests two expressions using the function logic_equiv from Maxima's logic package. This answer test does not support sets, lists, etc. The value of the student's answer will always have nounand etc. inserted. Before you manipulate the student's answer, e.g. with the logic package functions, you will need to apply noun_logic_remove(ex) .","title":"Answer tests"},{"location":"Topics/Propositional_Logic/#truth-tables","text":"STACK provides various functions for creating and dealing with tables . truth_table(ex) returns the true table of the expression ex . The function will throw an error if the number of variables exceeds 5. The first row of the table is the headings, consisting of a list of variables, and the expression itself. See the documentation on tables for more functionality.","title":"Truth tables"},{"location":"Topics/Units/","text":"Scientific Units It is quite common in science subjects to need to accept an answer which has units , for example using (m/s). Currently STACK only support SI units. See International Bureau of Weights and Measures (2006), (The International System of Units (SI)) PDF (8th ed.), ISBN 92-822-2213-6. Maxima packages for the support of scientific units In Maxima there are a number of separate packages which enable a user to manipulate physical units. load(unit); the code is in ...\\share\\contrib\\unit\\unit.mac load(units); the code is in ...\\share\\physics\\units.mac load(ezunits); the code is in ...\\share\\ezunits\\ezunits.mac WE DO NOT USE THESE PACKAGES as they are too slow to load and have a variety of side effects. Instead we have a lightweight package of our own. By default in Maxima, letters such as k are unbound variables. If you would like to give these prefix values (10^3) so that km literally means 10^3*m then you will need to add the following to the question variables field. stack_unit_si_declare(true); The units input and units answer test automatically execute this command. More details are given below. Internally numbers can be separated from units using the following inert Maxima function. stackunits(num, units) where num is the part interpreted to be the numerical portion, and units is the portion considered to be the units. For example, in the expression 10*m/s the internal value from this input will be stackunits(10,m/s) . Essentially the function stackunits is inert, but does subtly modify the display. However, having STACK split the student's answer this way is more reliable than teachers trying to find the \"numerical part\" themselves on a question by question basis. It essentially creates a single object representing a dimensional numerical quantity. If you are using the units answer tests then you need not worry about these internals. Examples Example 1 Let us assume that the correct answer is 12.1*m/s^2 . Students type this value into STACK exactly as it is above. Note the multiplication sign between the number and units. There are options to condone a missing star, or to accept a space. In entry, the numerical part is bound to the units part with multiplication. Using multiplication in this way is ambiguous. To create, and to disambiguate, a dimensional numerical quantity from a number multiplied by units (a subtle distinction at best) STACK has a mostly inert function stackunits(12.1,m/s^2) . Students do not need to use this, but teachers can use it in question variables etc. STACK converts the student's answer to SI base units only. This function also handles the number coefficients automatically (e.g. 1*km = 1000*m etc.). STACK has answer tests which compare dimensional numbers. These tests use (share code with) one of the existing numerical answer tests, such as NumSigFigs . Input type ## {#Input_type} Stack provides an input type to enable teachers to support students in entering answers with scientific units. The goal of this input is to validate against the pattern number * units . The input type will check both the teacher's answer and the student's answer for units. The input will require the student's answer to have units if and only if the teacher's answer also has units. This normally forces the student to use units. Also, students sometimes add units to dimensionless quantities (such as pH) and this input type will also enable a teacher to reject such input as invalid when the teacher does not use units. In validating against the pattern number * units we do not accept complex expressions which might simplify to this with some additional calculations. For example, an answer such as 9.4*m-53*cm is not considered valid by this input. This input type always accepts floating-point numbers , regardless of the option set on the edit form. The input type should display the same number of significant figures as typed in by the student. Note that all other input types truncate the display of unnecessary trailing zeros in floating point numbers, loosing information about significant figures. If you want to specifically test for significant figures, use this input type, with the teacher's answer having no units. The student must type a number of some kind. Entering units on their own will be invalid. If you want to ask a student for units, then use the algebraic input type. Units on their own are a not valid expression for this input. If the teacher shows the validation, \"with variable list\" this will be displayed as \"the units found in your answer are\"... The student is permitted to use variable names in this input type. The \"insert stars\" option is unchanged. You may or may not want your students to type a * or space between the numbers and units for implied multiplication. You may want the single letter variable names options here. Note that since km literally means k*m=1000*m this is not a problem with most units. The input type checks for units in a case sensitive way. If there is more than one option then STACK suggests a list. E.g. if the student types mhz then STACK suggests MHz or mHz . You can require numerical accuracy at validation by using the mindp , maxdp , minsf and maxsf extra options, as documented in the numerical input . There are surprisingly few ambiguities in the units set up, but there will be some that the developers have missed (correctly dealing with ambiguous input is by definition an impossible problem!). Please contact us with suggestions for improvements. Note, the input does not currently support a situation where you want to accept as valid a purely numerical quantity and then use the PRT to deduct marks for failing to use units, rather than rejecting it as invalid. Extra Options The extra options to the input should be a comma separated list of tags. This input type makes use of the additional options in two ways: Units can be displayed using inline fractions (m/s) or negative powers (m\\,s^{-1}). Add negpow to the Extra Options field to use negative powers. Answer tests STACK provides a number of answer tests for dealing with units. These are designed to accept an answer which is a dimensional numerical quantity, that is a floating-point number with units such as 12.3*m/s . This will not work with sets, lists, matrices, equations, etc. The answer tests require the teacher's answer (second argument to the function) to have units. If the teacher does not specify units then the test will fail. This decision is to help question authors write robust questions e.g. just specifying a number would be problematic. The input will accept an answer as valid if and only if the teacher's answer has units, so you should know in advance if you have units. If you want to compare numbers (i.e. no units), just use the numerical test. The units answer tests will happily accept a stackunits expression. Otherwise, the answer test splits up both arguments into this form first. There are three decisions to be made: Does the written precision matter? I.e. should the student use certain significant figures? If so, should we take a strict interpretation of significant figures ((100) has 1 sig fig, (1.00e2) has 3) or not ((100) has somewhere between 1 and 3 sig figs)? See the NumSigFigs and SigFigsStrict answer tests. How does numerical precision matter? A number might be written using significant figures, but is it the right number? See the NumSigFigs , NumRelative and NumAbsolute answer tests. Do we convert to compatible units, or require strict units which match those given by the teacher exactly? Essentially, the teacher has to make three decisions. These could always be done in a potential response tree with three nodes, but this is a common task. For legacy reasons, some of the answer tests (e.g. NumSigFigs , UnitsSigFigs ) combine answering two or more of these questions in one answer test. For scientific units (Q3.) there are two families of answer tests. Units[...] gives feedback if the student has the wrong units, but number is equivalent on conversion, UnitsStrict[...] expects the student's answer to use exactly the units which appear in the teacher's answer. There is no conversion here. However, answer notes will record whether the conversion would have worked. The two issues related to the numerical part are tested with one of the numerical answer tests which are documented elsewhere. Units answer tests share code with these functions. Use the appropriate options for the chosen test. Notes All variables are considered to be units. The numerical part is compared using the one of the three numerical answer tests. Each requires various options, e.g. the number of significant figures, or the numerical accuracy. These answer tests use identical options to the numerical tests. The units system accepts both l and L for litres, and the display respects the way they are typed in. Only abbreviations are accepted, not full names. I.e. students may not use meter , instead they must use m . Currently there is no localisation (i.e. language support) for unit names/spellings. The letter u is the prefix for micro, and is displayed as (\\mu) when the student validates. The string xi is the Greek letter (\\xi). If you assume single variable letter names this might clash with x*i which is a relatively common pattern. Conversion to base units and numerical accuracy This only applies to the \"non-strict\" versions of the tests. If the units in the student's answer do not match those of the teacher, then both the student's and teacher's answer is converted to base scientific units and the numerical test applied again. Note, the student's answer is not converted to the units used by the teacher. For example, in order to make a numerical comparison between 1.1*Mg/10^6 and 1.2*kN*ns/(mm*Hz) both expressions are converted to base units of kg . The numerical test is then applied. For the NumRelative test the option gives the required percentage tolerance within which a student's answer should be. Literally we test the following |sa-ta| < |ta*tol| . Here sa and ta are the numerical value of the student's and teacher's answer respectively. The same tol is used both when the units match and once they have been converted to base units . Similarly, for NumAbsolute the option is an absolute difference, (expressed in units). Literally we test |sa-ta| < |tol| . Here sa and ta are the numerical value of the student's and teacher's answer respectively once they have been converted to base units . If tol has no units, then STACK will use the units supplied by the teacher. If the teacher uses units in the option then the option units must be identical to the units in the teacher's answer. Dealing with units in Maxima functions, e.g. question variables and PRTs STACK uses an inert function to represent dimensional numerical quantities. stackunits(num, units) In particular, if we just represented scientific units as a product there would be no way to distinguish between stackunits(0, m) and stackunits(0, s) . As a product both would evaluate to 0 , which would appear dimensionless. A teacher is still likely to want to make comments on units when the numerical part is zero. The function stack_unit_si_declare(true) declares variables as units. (Note the argument to this function is not used.) For example, this changes the TeX output of m to Roman (\\mathrm{m}) and not the normal (m). (That units are displayed in Roman is lost to most students!). Note that the symbols are only declared to be units by using stack_unit_si_declare(true) first somewhere else in the question, or feedback variables. unitsp(ex) is a predicate which decides if STACK considers the expression to represent a dimensional numerical quantity stackunits . listofnonunits(ex) lists all variables in the expression ex considered not to be units however they appear. Use of this function auto-loads stack_unit_si_declare(true) . listofunits(ex) lists all variables in the expression ex considered to be units however they appear. Use of this function auto-loads stack_unit_si_declare(true) . If you do not declare stack_unit_si_declare(true) in the question variables you may need to do so in the feedback text itself. If you are manipulating two expressions and you want to ensure they both use the same units use stack_unit_si_to_si_base(ex) on each. This ensures only the base units of SI are used. E.g. stack_unit_si_to_si_base(stackunits(12.1,km)) gives stackunits(12100.0,m) . This function declares all units in one go, and there is no way to declare only a subset. Indeed, using only a subset would disrupt the conversion logic. Defining all the units restricts the number of variable names available in a particular question, e.g. (F) is assumed to represent Farad, and all units are typeset in Roman type, e.g. ( \\mathrm{F} ) rather than the normal ( F ). If you need to fine-tune the display how do to so if explained in the atoms and subscripts section of the more general Maxima documentation. The function stackunits_make(ex) takes the expression ex and, if this is a product of numbers and units, it returns an inert function stackunits with arguments stackunits(numbers, symbols) . Note, symbols will include a mix of variables, and symbols which are considered to be units. Use of this function autoloads stack_unit_si_declare(true) . The function stackunits_to_product(ex) turns a stackunits object into a product of number and units. It might be helpful in the feedback variables field to separate units from numerical parts prior to building your own potential response tree. However, do not do the following. n:float(100+rand(300)/10); u:m/s ta:stackunits_make(n*u) Instead just call stackunits directly n:float(100+rand(300)/10); u:m/s ta:stackunits(n,u) If you regularly find yourself building a particular tree to test for some property please contact the developers who will consider adding this functionality to the core. The functions stack_units_units(ex); stack_units_nums(ex); try to split the expression into units and numbers, and the return the units and numbers found. If there are no numbers, stack_units_nums(ex) returns NULLNUM . If there are no numbers, stack_units_units(ex) returns NULLUNITS . These are special tags, but note they are displayed by LaTeX as empty strings. (You could also use first(args(ans1)) or second(args(ans1)) respectively to access the numerical and units parts.) The function stack_units_split is deprecated. DO NOT USE. Custom units The teacher may want to use their own units. For example, the core unit package in Maxima does not include mm (millimetre), it is defined there as a word millimetre . This is one reason for creating our own custom units package. For advanced users and developers only Currently there is no way to create custom sets of units. This feature may be added in the future. The following may be helpful for now, but this does not fully work and the mechanism will change in the future when proper support is added for custom units. Add the following to the question variables and feedback variables. stack_unit_si_declare(true); declare(diamonds, units); texput(diamonds, \"\\\\diamond\"); The symbol diamonds will then be treated as units in code such as unitsp(ex) and displayed with the TeX (\\diamond) symbol. You will need to put diamonds in the allow words of the input in the question. Tips for dealing with units in STACK CAS variables are tricky. When creating worked solutions etc. try 12.3m*s^(-1) not 12.3m/s . The display is better. The answer test accepts either as equivalent. Which units are supported? It is probably best to look at the code. This is contained in qtype_stack\\stack\\cas\\casstring_units_class.php . Comments and additions are welcome.","title":"Scientific Units"},{"location":"Topics/Units/#scientific-units","text":"It is quite common in science subjects to need to accept an answer which has units , for example using (m/s). Currently STACK only support SI units. See International Bureau of Weights and Measures (2006), (The International System of Units (SI)) PDF (8th ed.), ISBN 92-822-2213-6.","title":"Scientific Units"},{"location":"Topics/Units/#maxima-packages-for-the-support-of-scientific-units","text":"In Maxima there are a number of separate packages which enable a user to manipulate physical units. load(unit); the code is in ...\\share\\contrib\\unit\\unit.mac load(units); the code is in ...\\share\\physics\\units.mac load(ezunits); the code is in ...\\share\\ezunits\\ezunits.mac WE DO NOT USE THESE PACKAGES as they are too slow to load and have a variety of side effects. Instead we have a lightweight package of our own. By default in Maxima, letters such as k are unbound variables. If you would like to give these prefix values (10^3) so that km literally means 10^3*m then you will need to add the following to the question variables field. stack_unit_si_declare(true); The units input and units answer test automatically execute this command. More details are given below. Internally numbers can be separated from units using the following inert Maxima function. stackunits(num, units) where num is the part interpreted to be the numerical portion, and units is the portion considered to be the units. For example, in the expression 10*m/s the internal value from this input will be stackunits(10,m/s) . Essentially the function stackunits is inert, but does subtly modify the display. However, having STACK split the student's answer this way is more reliable than teachers trying to find the \"numerical part\" themselves on a question by question basis. It essentially creates a single object representing a dimensional numerical quantity. If you are using the units answer tests then you need not worry about these internals.","title":"Maxima packages for the support of scientific units"},{"location":"Topics/Units/#examples","text":"","title":"Examples"},{"location":"Topics/Units/#example-1","text":"Let us assume that the correct answer is 12.1*m/s^2 . Students type this value into STACK exactly as it is above. Note the multiplication sign between the number and units. There are options to condone a missing star, or to accept a space. In entry, the numerical part is bound to the units part with multiplication. Using multiplication in this way is ambiguous. To create, and to disambiguate, a dimensional numerical quantity from a number multiplied by units (a subtle distinction at best) STACK has a mostly inert function stackunits(12.1,m/s^2) . Students do not need to use this, but teachers can use it in question variables etc. STACK converts the student's answer to SI base units only. This function also handles the number coefficients automatically (e.g. 1*km = 1000*m etc.). STACK has answer tests which compare dimensional numbers. These tests use (share code with) one of the existing numerical answer tests, such as NumSigFigs .","title":"Example 1"},{"location":"Topics/Units/#input-type-input_type","text":"Stack provides an input type to enable teachers to support students in entering answers with scientific units. The goal of this input is to validate against the pattern number * units . The input type will check both the teacher's answer and the student's answer for units. The input will require the student's answer to have units if and only if the teacher's answer also has units. This normally forces the student to use units. Also, students sometimes add units to dimensionless quantities (such as pH) and this input type will also enable a teacher to reject such input as invalid when the teacher does not use units. In validating against the pattern number * units we do not accept complex expressions which might simplify to this with some additional calculations. For example, an answer such as 9.4*m-53*cm is not considered valid by this input. This input type always accepts floating-point numbers , regardless of the option set on the edit form. The input type should display the same number of significant figures as typed in by the student. Note that all other input types truncate the display of unnecessary trailing zeros in floating point numbers, loosing information about significant figures. If you want to specifically test for significant figures, use this input type, with the teacher's answer having no units. The student must type a number of some kind. Entering units on their own will be invalid. If you want to ask a student for units, then use the algebraic input type. Units on their own are a not valid expression for this input. If the teacher shows the validation, \"with variable list\" this will be displayed as \"the units found in your answer are\"... The student is permitted to use variable names in this input type. The \"insert stars\" option is unchanged. You may or may not want your students to type a * or space between the numbers and units for implied multiplication. You may want the single letter variable names options here. Note that since km literally means k*m=1000*m this is not a problem with most units. The input type checks for units in a case sensitive way. If there is more than one option then STACK suggests a list. E.g. if the student types mhz then STACK suggests MHz or mHz . You can require numerical accuracy at validation by using the mindp , maxdp , minsf and maxsf extra options, as documented in the numerical input . There are surprisingly few ambiguities in the units set up, but there will be some that the developers have missed (correctly dealing with ambiguous input is by definition an impossible problem!). Please contact us with suggestions for improvements. Note, the input does not currently support a situation where you want to accept as valid a purely numerical quantity and then use the PRT to deduct marks for failing to use units, rather than rejecting it as invalid.","title":"Input type ## {#Input_type}"},{"location":"Topics/Units/#extra-options","text":"The extra options to the input should be a comma separated list of tags. This input type makes use of the additional options in two ways: Units can be displayed using inline fractions (m/s) or negative powers (m\\,s^{-1}). Add negpow to the Extra Options field to use negative powers.","title":"Extra Options"},{"location":"Topics/Units/#answer-tests","text":"STACK provides a number of answer tests for dealing with units. These are designed to accept an answer which is a dimensional numerical quantity, that is a floating-point number with units such as 12.3*m/s . This will not work with sets, lists, matrices, equations, etc. The answer tests require the teacher's answer (second argument to the function) to have units. If the teacher does not specify units then the test will fail. This decision is to help question authors write robust questions e.g. just specifying a number would be problematic. The input will accept an answer as valid if and only if the teacher's answer has units, so you should know in advance if you have units. If you want to compare numbers (i.e. no units), just use the numerical test. The units answer tests will happily accept a stackunits expression. Otherwise, the answer test splits up both arguments into this form first. There are three decisions to be made: Does the written precision matter? I.e. should the student use certain significant figures? If so, should we take a strict interpretation of significant figures ((100) has 1 sig fig, (1.00e2) has 3) or not ((100) has somewhere between 1 and 3 sig figs)? See the NumSigFigs and SigFigsStrict answer tests. How does numerical precision matter? A number might be written using significant figures, but is it the right number? See the NumSigFigs , NumRelative and NumAbsolute answer tests. Do we convert to compatible units, or require strict units which match those given by the teacher exactly? Essentially, the teacher has to make three decisions. These could always be done in a potential response tree with three nodes, but this is a common task. For legacy reasons, some of the answer tests (e.g. NumSigFigs , UnitsSigFigs ) combine answering two or more of these questions in one answer test. For scientific units (Q3.) there are two families of answer tests. Units[...] gives feedback if the student has the wrong units, but number is equivalent on conversion, UnitsStrict[...] expects the student's answer to use exactly the units which appear in the teacher's answer. There is no conversion here. However, answer notes will record whether the conversion would have worked. The two issues related to the numerical part are tested with one of the numerical answer tests which are documented elsewhere. Units answer tests share code with these functions. Use the appropriate options for the chosen test. Notes All variables are considered to be units. The numerical part is compared using the one of the three numerical answer tests. Each requires various options, e.g. the number of significant figures, or the numerical accuracy. These answer tests use identical options to the numerical tests. The units system accepts both l and L for litres, and the display respects the way they are typed in. Only abbreviations are accepted, not full names. I.e. students may not use meter , instead they must use m . Currently there is no localisation (i.e. language support) for unit names/spellings. The letter u is the prefix for micro, and is displayed as (\\mu) when the student validates. The string xi is the Greek letter (\\xi). If you assume single variable letter names this might clash with x*i which is a relatively common pattern.","title":"Answer tests"},{"location":"Topics/Units/#conversion-to-base-units-and-numerical-accuracy","text":"This only applies to the \"non-strict\" versions of the tests. If the units in the student's answer do not match those of the teacher, then both the student's and teacher's answer is converted to base scientific units and the numerical test applied again. Note, the student's answer is not converted to the units used by the teacher. For example, in order to make a numerical comparison between 1.1*Mg/10^6 and 1.2*kN*ns/(mm*Hz) both expressions are converted to base units of kg . The numerical test is then applied. For the NumRelative test the option gives the required percentage tolerance within which a student's answer should be. Literally we test the following |sa-ta| < |ta*tol| . Here sa and ta are the numerical value of the student's and teacher's answer respectively. The same tol is used both when the units match and once they have been converted to base units . Similarly, for NumAbsolute the option is an absolute difference, (expressed in units). Literally we test |sa-ta| < |tol| . Here sa and ta are the numerical value of the student's and teacher's answer respectively once they have been converted to base units . If tol has no units, then STACK will use the units supplied by the teacher. If the teacher uses units in the option then the option units must be identical to the units in the teacher's answer.","title":"Conversion to base units and numerical accuracy"},{"location":"Topics/Units/#dealing-with-units-in-maxima-functions-eg-question-variables-and-prts","text":"STACK uses an inert function to represent dimensional numerical quantities. stackunits(num, units) In particular, if we just represented scientific units as a product there would be no way to distinguish between stackunits(0, m) and stackunits(0, s) . As a product both would evaluate to 0 , which would appear dimensionless. A teacher is still likely to want to make comments on units when the numerical part is zero. The function stack_unit_si_declare(true) declares variables as units. (Note the argument to this function is not used.) For example, this changes the TeX output of m to Roman (\\mathrm{m}) and not the normal (m). (That units are displayed in Roman is lost to most students!). Note that the symbols are only declared to be units by using stack_unit_si_declare(true) first somewhere else in the question, or feedback variables. unitsp(ex) is a predicate which decides if STACK considers the expression to represent a dimensional numerical quantity stackunits . listofnonunits(ex) lists all variables in the expression ex considered not to be units however they appear. Use of this function auto-loads stack_unit_si_declare(true) . listofunits(ex) lists all variables in the expression ex considered to be units however they appear. Use of this function auto-loads stack_unit_si_declare(true) . If you do not declare stack_unit_si_declare(true) in the question variables you may need to do so in the feedback text itself. If you are manipulating two expressions and you want to ensure they both use the same units use stack_unit_si_to_si_base(ex) on each. This ensures only the base units of SI are used. E.g. stack_unit_si_to_si_base(stackunits(12.1,km)) gives stackunits(12100.0,m) . This function declares all units in one go, and there is no way to declare only a subset. Indeed, using only a subset would disrupt the conversion logic. Defining all the units restricts the number of variable names available in a particular question, e.g. (F) is assumed to represent Farad, and all units are typeset in Roman type, e.g. ( \\mathrm{F} ) rather than the normal ( F ). If you need to fine-tune the display how do to so if explained in the atoms and subscripts section of the more general Maxima documentation. The function stackunits_make(ex) takes the expression ex and, if this is a product of numbers and units, it returns an inert function stackunits with arguments stackunits(numbers, symbols) . Note, symbols will include a mix of variables, and symbols which are considered to be units. Use of this function autoloads stack_unit_si_declare(true) . The function stackunits_to_product(ex) turns a stackunits object into a product of number and units. It might be helpful in the feedback variables field to separate units from numerical parts prior to building your own potential response tree. However, do not do the following. n:float(100+rand(300)/10); u:m/s ta:stackunits_make(n*u) Instead just call stackunits directly n:float(100+rand(300)/10); u:m/s ta:stackunits(n,u) If you regularly find yourself building a particular tree to test for some property please contact the developers who will consider adding this functionality to the core. The functions stack_units_units(ex); stack_units_nums(ex); try to split the expression into units and numbers, and the return the units and numbers found. If there are no numbers, stack_units_nums(ex) returns NULLNUM . If there are no numbers, stack_units_units(ex) returns NULLUNITS . These are special tags, but note they are displayed by LaTeX as empty strings. (You could also use first(args(ans1)) or second(args(ans1)) respectively to access the numerical and units parts.) The function stack_units_split is deprecated. DO NOT USE.","title":"Dealing with units in Maxima functions, e.g. question variables and PRTs"},{"location":"Topics/Units/#custom-units","text":"The teacher may want to use their own units. For example, the core unit package in Maxima does not include mm (millimetre), it is defined there as a word millimetre . This is one reason for creating our own custom units package. For advanced users and developers only Currently there is no way to create custom sets of units. This feature may be added in the future. The following may be helpful for now, but this does not fully work and the mechanism will change in the future when proper support is added for custom units. Add the following to the question variables and feedback variables. stack_unit_si_declare(true); declare(diamonds, units); texput(diamonds, \"\\\\diamond\"); The symbol diamonds will then be treated as units in code such as unitsp(ex) and displayed with the TeX (\\diamond) symbol. You will need to put diamonds in the allow words of the input in the question.","title":"Custom units"},{"location":"Topics/Units/#tips-for-dealing-with-units-in-stack","text":"CAS variables are tricky. When creating worked solutions etc. try 12.3m*s^(-1) not 12.3m/s . The display is better. The answer test accepts either as equivalent. Which units are supported? It is probably best to look at the code. This is contained in qtype_stack\\stack\\cas\\casstring_units_class.php . Comments and additions are welcome.","title":"Tips for dealing with units in STACK"},{"location":"Topics/Unsorted_multi_input/","text":"Unsorted multi-input answers Quite often we have a number of separate inputs, but we don't know which order the student will choose to enter. Let's assume we ask a student to break down integration using linearity for example we have [ \\int x^2+\\sin(x) \\mathrm{d} x = \\int {\\color{red}?} \\mathrm{d} x + \\int {\\color{red}?} \\mathrm{d} x] where the ? are inputs ans1 and ans2 . We might expect ans1=x^2 but of course we could also have ans1=sin(x) . Use the feedback variables One option is to define sans:ans1+ans2 in the feedback variables. Then the PRT can check sans is equivalent to the integrand up to commutativity and associativity (or something else if you perefer). The problem with this is the difficulty in awarding partial credit. Partial credit for some correct answers We want to provide some partial credit when student have some, but not all, the inputs correct. Let's assume we are looking for (n) different inputs. We define (m) to be the number of missing, (w) to be the number of \"not wanted\" inputs, then we choose the score to be [ s = \\max\\left(1-\\frac{m+w}{2n}, 0\\right)] E.g., here if a student gets all (n) wrong so that (m=w=n) then the score is zero. If the student types in all the required expressions, (n=0) and (n) wrong ones in addition, then (s=\\frac{1}{2}). This function is, of course, a choice of the teacher. In the above example, put the following in the question variables ta1:x^2; ta2:sin(x); tas:{ta1, ta2}; p:ta1+ta2; In the feedback variables put sans:{ans1, ans2}; missing:setdifference(tas, sans); notwanted:setdifference(sans, tas); score:max(1-(length(missing)+length(notwanted))/(2*length(tas)),0); Continuing the above example, in the PRT use The answer test sets perhaps with the quiet option. sans is {ans1,ans2} . tans is tas . Assign the score in both prt branches to be score . Dealing with duplicate entries How do we decide partial credit when there may be duplicates, e.g. eignevalues with repetion? If the teacher's answer is [1,1,2] then we can't use the above example based on sets. STACK provides a maxima function list_cancel(l1,l2) which removes any common elements from [l1,l2] , with duplication. E.g. use the following in the quesion variables. sans:{ans1, ans2}; [missing, notwanted]:list_cancel([sans, tas]); score:max(1-(length(missing)+length(notwanted))/(2*length(tas)),0); Note that list_cancel will not establish algebraic equialence and within this function two expressions are considered the same using maxima's is(ex1=ex2)) . Hence, some pre-processing of the lists might be needed, depending on the situation and what you consider is the \"same\". For example if we have l1:[x^2,x^3,x^2-1,x+x]; l2:[x^2,x^4,(x-1)*(x+1),2*x]; list_cancel([l1,l2]); will return [\\left[ \\left[ x^3 , x^2-1 \\right] , \\left[ x^4 , \\left(x-1\\right) \\,\\left(x+1\\right) \\right] \\right] ] Notice the last elements are remove because default simplification takes place but (x^2-1) and ((x-1)(x+1)) are not considered the same by is . In this case ratsimp can be applied to the lists first. In other situations functions like trigsimp or trigrat might be needed.","title":"Unsorted multi-input answers"},{"location":"Topics/Unsorted_multi_input/#unsorted-multi-input-answers","text":"Quite often we have a number of separate inputs, but we don't know which order the student will choose to enter. Let's assume we ask a student to break down integration using linearity for example we have [ \\int x^2+\\sin(x) \\mathrm{d} x = \\int {\\color{red}?} \\mathrm{d} x + \\int {\\color{red}?} \\mathrm{d} x] where the ? are inputs ans1 and ans2 . We might expect ans1=x^2 but of course we could also have ans1=sin(x) .","title":"Unsorted multi-input answers"},{"location":"Topics/Unsorted_multi_input/#use-the-feedback-variables","text":"One option is to define sans:ans1+ans2 in the feedback variables. Then the PRT can check sans is equivalent to the integrand up to commutativity and associativity (or something else if you perefer). The problem with this is the difficulty in awarding partial credit.","title":"Use the feedback variables"},{"location":"Topics/Unsorted_multi_input/#partial-credit-for-some-correct-answers","text":"We want to provide some partial credit when student have some, but not all, the inputs correct. Let's assume we are looking for (n) different inputs. We define (m) to be the number of missing, (w) to be the number of \"not wanted\" inputs, then we choose the score to be [ s = \\max\\left(1-\\frac{m+w}{2n}, 0\\right)] E.g., here if a student gets all (n) wrong so that (m=w=n) then the score is zero. If the student types in all the required expressions, (n=0) and (n) wrong ones in addition, then (s=\\frac{1}{2}). This function is, of course, a choice of the teacher. In the above example, put the following in the question variables ta1:x^2; ta2:sin(x); tas:{ta1, ta2}; p:ta1+ta2; In the feedback variables put sans:{ans1, ans2}; missing:setdifference(tas, sans); notwanted:setdifference(sans, tas); score:max(1-(length(missing)+length(notwanted))/(2*length(tas)),0); Continuing the above example, in the PRT use The answer test sets perhaps with the quiet option. sans is {ans1,ans2} . tans is tas . Assign the score in both prt branches to be score .","title":"Partial credit for some correct answers"},{"location":"Topics/Unsorted_multi_input/#dealing-with-duplicate-entries","text":"How do we decide partial credit when there may be duplicates, e.g. eignevalues with repetion? If the teacher's answer is [1,1,2] then we can't use the above example based on sets. STACK provides a maxima function list_cancel(l1,l2) which removes any common elements from [l1,l2] , with duplication. E.g. use the following in the quesion variables. sans:{ans1, ans2}; [missing, notwanted]:list_cancel([sans, tas]); score:max(1-(length(missing)+length(notwanted))/(2*length(tas)),0); Note that list_cancel will not establish algebraic equialence and within this function two expressions are considered the same using maxima's is(ex1=ex2)) . Hence, some pre-processing of the lists might be needed, depending on the situation and what you consider is the \"same\". For example if we have l1:[x^2,x^3,x^2-1,x+x]; l2:[x^2,x^4,(x-1)*(x+1),2*x]; list_cancel([l1,l2]); will return [\\left[ \\left[ x^3 , x^2-1 \\right] , \\left[ x^4 , \\left(x-1\\right) \\,\\left(x+1\\right) \\right] \\right] ] Notice the last elements are remove because default simplification takes place but (x^2-1) and ((x-1)(x+1)) are not considered the same by is . In this case ratsimp can be applied to the lists first. In other situations functions like trigsimp or trigrat might be needed.","title":"Dealing with duplicate entries"},{"location":"Topics/Vector_Calculus/","text":"Vector Calculus in STACK Setting vector calculus problems using STACK does not require too much more thinking than setting regular calculus or linear algebra problems. There are a few extra additions, but a passing familiarity with Maxima's notation for derivatives, integrals and vectors will usually suffice. Calculus with more than one variable To find derivatives of functions of more than one variable you can use the normal diff(f,x) function, which returns the partial derivative of (f) with respect to (x). To find the gradient vector, you might choose to put all the partial derivatives in a list or matrix using something like grad(f,vars):= block( grad_vec: map(lambda([ex], 'diff(f,vars[ex])), ev(makelist(ii,ii,1,length(vars)), simp)), return(transpose(matrix(grad_vec))) ); Then grad(f,[x,y,z]) would return [ \\left[\\begin{array}{c} \\frac{\\mathrm{d} f}{\\mathrm{d} x} \\ \\frac{\\mathrm{d} f}{\\mathrm{d} y} \\ \\frac{\\mathrm{d} f}{\\mathrm{d} z} \\end{array}\\right] ] Setting Maxima's derivabbrev:true changes the display of derivatives to subscripts. Now grad(f,[x,y,z]) would return [ \\left[\\begin{array}{c} f_{x} \\ f_{y} \\ f_{z} \\end{array}\\right] ] If you would like to work with differentials, using diff(f) without specifying a variable will return del(f) . For example, (%i1) f: x*y*z; (%o1) x y z; (%i2) diff(f); (%o2) x y del(z) + x z del(y) + y z del(x) The Maxima differentials will display as (d(x)). If you prefer notation such as (\\mathrm{d}x) you might like to redfine the tex function associated with del e.g. texput(del,lambda([ex],sconcat(\"\\\\mathrm{d}\",tex1(first(ex))))); If you need to assert that one or more variables are constant, you can use declare([a,b,c],constant) means that, using the previous example, diff(f*c) would return c x y del(z) + c x z del(y) + c y z del(x) rather than c x y del(z) + c x z del(y) + c y z del(x) + x y z del(c) . If you want to assert that one variable depends on the other, you can use depends([f,g],[x,y]) to mean that (f) and (g) both depend on (x) and (y). If you just want to note that (y) depends on (x), then depends(y,x) is sufficient. This is useful when asking students to perform implicit partial differentiation and solve for the given derivative. Here is an example that wants students to find a partial derivative of one variable with respect to another, holding another variable constant: declare([a,b,c,d],constant); eqn1: x*y = a*t^b*z; eqn2: c*z*y^d*t = sin(x); [eqn1, eqn2]: random_permutation([eqn1, eqn2]); [dep1,dep2,indep,const]: random_permutation([x, y, z, t]); depends([dep1,dep2],indep); eqn1d: diff(eqn1,indep); eqn2d: diff(eqn2,indep); ta: rhs(flatten(solve([eqn1d,eqn2d],['diff(dep1,indep),'diff(dep2,indep)]))[1]); This example generates two equations in (x), (y), (z) and (t), assigns each variable a role as either a dependent variable, independent variable, or a variable being held constant (also independent, but behaving differently in this context), differentiates both equations implicitly with respect to the independent variable, and then solves the equations simultaneously for the desired derivative. The original question had values assigned to (a), (b), (c) and (d), but it is interesting to declare them constant here. Note that these questions can be a bit volatile, as Maxima simply cannot establish equality when various substitutions are made. It may be prudent to make rearrangement difficult, and/or tell students to not substitute values in their answer. Using vectors Maxima does not distinguish between vectors and matrices, with both being defined using the matrix command. You can put whatever you like in a matrix, so like the example above with a gradient vector, you can easily define a vector function as a matrix with expressions as elements. Some key points: Lists are treated very similarly to row vectors (which means that things like the dot product operator work on them). It also means that it is sufficient to use transpose([a,b,c]) to get a column vector. * is used for element-wise multiplication of lists and matrices, whereas . is used as both a dot product and matrix product. This leads to slightly confusing behaviour for vectors, where [x,y] . [z,t] , [x,y] . transpose([z,t]) and transpose([x,y]) . transpose([z,t]) will all return x*z + y*t , but transpose([x,y]) . [z,t] will return the outer product matrix matrix([x*z, t*x], [y*z, t*y]) . Matrices are indexed as A[i,j] , which means that when dealing with vectors you must be careful to index both the row and the column. For example, matrix([1],[2],[3])[1] will return the list [1] rather than the value 1 , and matrix([1,2,3])[1] will return the whole row [1,2,3] . One way around this is to use the list_matrix_entries function to return the list of all matrix entries, which is often easier to work with when considering vectors. Note that this function returns an error when given a list. The function crossproduct(a,b) is defined in STACK (not core Maxima), but must take two (3) by (1) column vectors as the input, not lists or row vectors. The function jacobian([f1,f2],[x,y]) is defined, and takes two lists as arguments. The first is the vector function, and the second is the list of variables. Some useful functions that are not defined in core Maxima are defined in STACK's contributed vectorcalculus.mac file in the contrib directory. divergence div(u, vars) . Accepts (u) as either a matrix or a list. curl curl(u, vars) . Accepts (u) as either a matrix or a list. These functions can be included with stack_include . Lagrange Multipliers Finding critical points using the method of Lagrange multipliers is as simple as finding the stationary points to the system of equations given by (f - \\lambda c) where (f) is the multivariable function you are investigating and (c) is a constraint curve. There are a few new considerations that come along with questions like this, such as what input type to use and how to account for a variable number of solutions. Here is some example code that shows how you might procedurally generate solutions to a problem like this, where func is our function (f) and cons is our constraint curve (c) given as a single algebraic expression to be set to zero. equations: [diff(func, x) = L*diff(cons, x), diff(func, y) = L*diff(cons, y), cons = 0]; solns: map(lambda([ex],map(rhs,firstn(radcan(ex),2))),solve(equations, [x, y, L])); ta: sublist(solns,lambda([ex],real_numberp(first(ex)) and real_numberp(second(ex)))); This code will generate all correct solutions, trim out the value of (\\lambda) which typically does not concern us, removes any complex solutions, and returns the final answer as a list of ordered pairs. This is useful because it allows us to use the TextArea input type. To enter their answers, students can give as many or as ordered pairs as they like. To mark this question, we could use some code like the following: ans1_set: setify(map(simplify, ans1)); ta_set: setify(map(simplify, ta)); num_correct: length(intersection(ans1_set, ta_set)); prop_correct: num_correct/length(ta); Now we can compare the two sets directly in the PRT using AlgEquiv or Sets. If this test fails, we might like to award prop_correct marks as the score (so that if a student found 3 out of 4 critical points they would be awarded 0.75 marks). We might also find it prudent to award a flat penalty for any superfluous answers in this case too, or perhaps only if the student gives more answers than expected (to avoid double-penalising typos), though this is now a discussion of grading. Vector Plots Newer versions of JSXGraph provide support for vector plots natively, but STACK currently does not use this version of JSXGraph. However, it is not too difficult to create a bespoke vector plot function that can be adapted to a variety of circumstances. There are several considerations when creating a vector plot: 1) How densely packed should the vectors be? 2) How long should the vectors be, and how much variation in length should there be? 3) What aesthetic choices are important to aid readability? 4) How should function information be passed from Maxima to JSXGraph? There is no single answer to these, and your answer will likely differ per question. Below is one approach to creating a vector plot question. Note that it assumes you are working with a plaintext editor and so < , > , and && are all viable options. If you work in a different editor (such as a the Moodle default) you may like to define your own functions to prevent conversion to &lt; , &gt; or &amp; upon saving. Let us first assume a general vector function, called F . In the question variables, we could define fx and fy and then define F: [fx,fy] . If we were wanting to instead plot a gradient, we could define a function f and then define its gradient as F: [diff(f,x),diff(f,y)] . We will also need a version of F that uses valid JavaScript syntax. You might like to convert manually using something like fx_jsx: ssubst(\"**\",\"^\",string(fx)) , though this relies on you knowing the form of the function and can cause problems with the unary minus. A better option could be to use JXG.JessieCode . Lastly, we want a JavaScript function to output the direction at a given point. Something like the the following suffices. var F = function(x,y) { return [{@fx_jsx@},{@fy_jsx@}] }; Next, we want to know where we are plotting. Keeping everything in terms of the plotting axes and number of vectors will prove convenient. If we choose the number of vectors in the x-direction to be num_x and similarly for y to be num_y , we can set up the following: var xi = -2, yf = 2, xf = 2, yi = -2 var axes = [xi, yf, xf, yi] var num_x = 20, num_y = 20 var dx = 1/num_x*(xf - xi) var dy = 1/num_y*(yf - yi) Our goal will be to plot vectors at every grid point defined by these steps in x and y called dx and dy . Before we iterate through this, we need to define the function that will actually plot the vectors. var createVector = function(px, py) { var vec = F(px,py) /* Compute the value of the function here */ var vecScaler = 1/Math.sqrt(vec[0]**2 + vec[1]**2) var plotVec = [dx*vec[0]*vecScaler, dy*vec[1]*vecScaler] var tip = [px + plotVec[0], py + plotVec[1]] board.create('arrow',[[px,py],tip],{ color: \"#1f77b4\", opacity: 0.66, lastArrow: {type: 2, size: 4}, fixed: true, highlight: false }); board.create('point',[px,py],{ color: \"#1f77b4\", size: 0.1, strokeOpacity: 0.66, fillOpacity: 0.75, highlight: false, fixed: true, withLabel: false }); } A couple of things to note: Firstly, the variable vecScaler is always equal to the reciprocal of the length of the vector, which means that in this example it will always plot a \"unit\" vector (where a unit here is the grid size). This can (and perhaps should) be changed unless you wish to use colour to denote different vector length (which is poor accessibility practice on its own). Secondly, these vectors are eminating from the grid point, which is plotted itself with a transparent dot. In fact, everything is partially transparent to avoid excessive busyness in the plot. You could easily set this up to instead plot with the centre of the arrow being the location, or could tweak any of the other visual settings. In general, it is good to indicate where the vector originates for clarity. Now we can finally plot the vectors. var i, j; for (i = xi/dx - 1; i <= xf/dx + 1; i++) { for (j = yi/dy - 1; j <= yf/dy + 1; j++) { createArrow(i*dx,j*dy); } } Note that the vectors are being plotted from just outside the desired area so that they can enter the plot from outside if needed. Now we have a vector plot! The scaling factor vecScaler is the last thing to consider seriously. It is often important to distinguish between different vector lengths, but just setting vecScaler = 1 will usually render the plot illegible with huge vectors shooting all over the place. There is no shortage of ways to scale, but one way the author has found helpful is to use a sigmoidal curve like (\\tan^{-1}(x)). Here is one option: var myScaler = function(vec,a,b) { return a*(Math.PI/2 - Math.atan(a/b*Math.sqrt(vec[0]**2 + vec[1]**2))) } for some tuning constants a and b. Note that this function produces a multiplying factor, not the desired length directly. b is the maximum length of the vector relative to the grid size, which is often set to either 1 or 1.414 (the former being good for vectors that tend to point along gridlines and the latter being good for vectors that tend to point in the direction of the diagonals, or if you like a little bit of overlap). a is a measure of how fast the vector reaches the maximum length. You could tweak the values of a and b for each question, or you could pair up functions and scaling factors in the question variables when randomising. Regardless, it might be a good idea to copy-paste the graphing code into the question note so that you can check the scaling when deploying variants.","title":"Vector Calculus in STACK"},{"location":"Topics/Vector_Calculus/#vector-calculus-in-stack","text":"Setting vector calculus problems using STACK does not require too much more thinking than setting regular calculus or linear algebra problems. There are a few extra additions, but a passing familiarity with Maxima's notation for derivatives, integrals and vectors will usually suffice.","title":"Vector Calculus in STACK"},{"location":"Topics/Vector_Calculus/#calculus-with-more-than-one-variable","text":"To find derivatives of functions of more than one variable you can use the normal diff(f,x) function, which returns the partial derivative of (f) with respect to (x). To find the gradient vector, you might choose to put all the partial derivatives in a list or matrix using something like grad(f,vars):= block( grad_vec: map(lambda([ex], 'diff(f,vars[ex])), ev(makelist(ii,ii,1,length(vars)), simp)), return(transpose(matrix(grad_vec))) ); Then grad(f,[x,y,z]) would return [ \\left[\\begin{array}{c} \\frac{\\mathrm{d} f}{\\mathrm{d} x} \\ \\frac{\\mathrm{d} f}{\\mathrm{d} y} \\ \\frac{\\mathrm{d} f}{\\mathrm{d} z} \\end{array}\\right] ] Setting Maxima's derivabbrev:true changes the display of derivatives to subscripts. Now grad(f,[x,y,z]) would return [ \\left[\\begin{array}{c} f_{x} \\ f_{y} \\ f_{z} \\end{array}\\right] ] If you would like to work with differentials, using diff(f) without specifying a variable will return del(f) . For example, (%i1) f: x*y*z; (%o1) x y z; (%i2) diff(f); (%o2) x y del(z) + x z del(y) + y z del(x) The Maxima differentials will display as (d(x)). If you prefer notation such as (\\mathrm{d}x) you might like to redfine the tex function associated with del e.g. texput(del,lambda([ex],sconcat(\"\\\\mathrm{d}\",tex1(first(ex))))); If you need to assert that one or more variables are constant, you can use declare([a,b,c],constant) means that, using the previous example, diff(f*c) would return c x y del(z) + c x z del(y) + c y z del(x) rather than c x y del(z) + c x z del(y) + c y z del(x) + x y z del(c) . If you want to assert that one variable depends on the other, you can use depends([f,g],[x,y]) to mean that (f) and (g) both depend on (x) and (y). If you just want to note that (y) depends on (x), then depends(y,x) is sufficient. This is useful when asking students to perform implicit partial differentiation and solve for the given derivative. Here is an example that wants students to find a partial derivative of one variable with respect to another, holding another variable constant: declare([a,b,c,d],constant); eqn1: x*y = a*t^b*z; eqn2: c*z*y^d*t = sin(x); [eqn1, eqn2]: random_permutation([eqn1, eqn2]); [dep1,dep2,indep,const]: random_permutation([x, y, z, t]); depends([dep1,dep2],indep); eqn1d: diff(eqn1,indep); eqn2d: diff(eqn2,indep); ta: rhs(flatten(solve([eqn1d,eqn2d],['diff(dep1,indep),'diff(dep2,indep)]))[1]); This example generates two equations in (x), (y), (z) and (t), assigns each variable a role as either a dependent variable, independent variable, or a variable being held constant (also independent, but behaving differently in this context), differentiates both equations implicitly with respect to the independent variable, and then solves the equations simultaneously for the desired derivative. The original question had values assigned to (a), (b), (c) and (d), but it is interesting to declare them constant here. Note that these questions can be a bit volatile, as Maxima simply cannot establish equality when various substitutions are made. It may be prudent to make rearrangement difficult, and/or tell students to not substitute values in their answer.","title":"Calculus with more than one variable"},{"location":"Topics/Vector_Calculus/#using-vectors","text":"Maxima does not distinguish between vectors and matrices, with both being defined using the matrix command. You can put whatever you like in a matrix, so like the example above with a gradient vector, you can easily define a vector function as a matrix with expressions as elements. Some key points: Lists are treated very similarly to row vectors (which means that things like the dot product operator work on them). It also means that it is sufficient to use transpose([a,b,c]) to get a column vector. * is used for element-wise multiplication of lists and matrices, whereas . is used as both a dot product and matrix product. This leads to slightly confusing behaviour for vectors, where [x,y] . [z,t] , [x,y] . transpose([z,t]) and transpose([x,y]) . transpose([z,t]) will all return x*z + y*t , but transpose([x,y]) . [z,t] will return the outer product matrix matrix([x*z, t*x], [y*z, t*y]) . Matrices are indexed as A[i,j] , which means that when dealing with vectors you must be careful to index both the row and the column. For example, matrix([1],[2],[3])[1] will return the list [1] rather than the value 1 , and matrix([1,2,3])[1] will return the whole row [1,2,3] . One way around this is to use the list_matrix_entries function to return the list of all matrix entries, which is often easier to work with when considering vectors. Note that this function returns an error when given a list. The function crossproduct(a,b) is defined in STACK (not core Maxima), but must take two (3) by (1) column vectors as the input, not lists or row vectors. The function jacobian([f1,f2],[x,y]) is defined, and takes two lists as arguments. The first is the vector function, and the second is the list of variables. Some useful functions that are not defined in core Maxima are defined in STACK's contributed vectorcalculus.mac file in the contrib directory. divergence div(u, vars) . Accepts (u) as either a matrix or a list. curl curl(u, vars) . Accepts (u) as either a matrix or a list. These functions can be included with stack_include .","title":"Using vectors"},{"location":"Topics/Vector_Calculus/#lagrange-multipliers","text":"Finding critical points using the method of Lagrange multipliers is as simple as finding the stationary points to the system of equations given by (f - \\lambda c) where (f) is the multivariable function you are investigating and (c) is a constraint curve. There are a few new considerations that come along with questions like this, such as what input type to use and how to account for a variable number of solutions. Here is some example code that shows how you might procedurally generate solutions to a problem like this, where func is our function (f) and cons is our constraint curve (c) given as a single algebraic expression to be set to zero. equations: [diff(func, x) = L*diff(cons, x), diff(func, y) = L*diff(cons, y), cons = 0]; solns: map(lambda([ex],map(rhs,firstn(radcan(ex),2))),solve(equations, [x, y, L])); ta: sublist(solns,lambda([ex],real_numberp(first(ex)) and real_numberp(second(ex)))); This code will generate all correct solutions, trim out the value of (\\lambda) which typically does not concern us, removes any complex solutions, and returns the final answer as a list of ordered pairs. This is useful because it allows us to use the TextArea input type. To enter their answers, students can give as many or as ordered pairs as they like. To mark this question, we could use some code like the following: ans1_set: setify(map(simplify, ans1)); ta_set: setify(map(simplify, ta)); num_correct: length(intersection(ans1_set, ta_set)); prop_correct: num_correct/length(ta); Now we can compare the two sets directly in the PRT using AlgEquiv or Sets. If this test fails, we might like to award prop_correct marks as the score (so that if a student found 3 out of 4 critical points they would be awarded 0.75 marks). We might also find it prudent to award a flat penalty for any superfluous answers in this case too, or perhaps only if the student gives more answers than expected (to avoid double-penalising typos), though this is now a discussion of grading.","title":"Lagrange Multipliers"},{"location":"Topics/Vector_Calculus/#vector-plots","text":"Newer versions of JSXGraph provide support for vector plots natively, but STACK currently does not use this version of JSXGraph. However, it is not too difficult to create a bespoke vector plot function that can be adapted to a variety of circumstances. There are several considerations when creating a vector plot: 1) How densely packed should the vectors be? 2) How long should the vectors be, and how much variation in length should there be? 3) What aesthetic choices are important to aid readability? 4) How should function information be passed from Maxima to JSXGraph? There is no single answer to these, and your answer will likely differ per question. Below is one approach to creating a vector plot question. Note that it assumes you are working with a plaintext editor and so < , > , and && are all viable options. If you work in a different editor (such as a the Moodle default) you may like to define your own functions to prevent conversion to &lt; , &gt; or &amp; upon saving. Let us first assume a general vector function, called F . In the question variables, we could define fx and fy and then define F: [fx,fy] . If we were wanting to instead plot a gradient, we could define a function f and then define its gradient as F: [diff(f,x),diff(f,y)] . We will also need a version of F that uses valid JavaScript syntax. You might like to convert manually using something like fx_jsx: ssubst(\"**\",\"^\",string(fx)) , though this relies on you knowing the form of the function and can cause problems with the unary minus. A better option could be to use JXG.JessieCode . Lastly, we want a JavaScript function to output the direction at a given point. Something like the the following suffices. var F = function(x,y) { return [{@fx_jsx@},{@fy_jsx@}] }; Next, we want to know where we are plotting. Keeping everything in terms of the plotting axes and number of vectors will prove convenient. If we choose the number of vectors in the x-direction to be num_x and similarly for y to be num_y , we can set up the following: var xi = -2, yf = 2, xf = 2, yi = -2 var axes = [xi, yf, xf, yi] var num_x = 20, num_y = 20 var dx = 1/num_x*(xf - xi) var dy = 1/num_y*(yf - yi) Our goal will be to plot vectors at every grid point defined by these steps in x and y called dx and dy . Before we iterate through this, we need to define the function that will actually plot the vectors. var createVector = function(px, py) { var vec = F(px,py) /* Compute the value of the function here */ var vecScaler = 1/Math.sqrt(vec[0]**2 + vec[1]**2) var plotVec = [dx*vec[0]*vecScaler, dy*vec[1]*vecScaler] var tip = [px + plotVec[0], py + plotVec[1]] board.create('arrow',[[px,py],tip],{ color: \"#1f77b4\", opacity: 0.66, lastArrow: {type: 2, size: 4}, fixed: true, highlight: false }); board.create('point',[px,py],{ color: \"#1f77b4\", size: 0.1, strokeOpacity: 0.66, fillOpacity: 0.75, highlight: false, fixed: true, withLabel: false }); } A couple of things to note: Firstly, the variable vecScaler is always equal to the reciprocal of the length of the vector, which means that in this example it will always plot a \"unit\" vector (where a unit here is the grid size). This can (and perhaps should) be changed unless you wish to use colour to denote different vector length (which is poor accessibility practice on its own). Secondly, these vectors are eminating from the grid point, which is plotted itself with a transparent dot. In fact, everything is partially transparent to avoid excessive busyness in the plot. You could easily set this up to instead plot with the centre of the arrow being the location, or could tweak any of the other visual settings. In general, it is good to indicate where the vector originates for clarity. Now we can finally plot the vectors. var i, j; for (i = xi/dx - 1; i <= xf/dx + 1; i++) { for (j = yi/dy - 1; j <= yf/dy + 1; j++) { createArrow(i*dx,j*dy); } } Note that the vectors are being plotted from just outside the desired area so that they can enter the plot from outside if needed. Now we have a vector plot! The scaling factor vecScaler is the last thing to consider seriously. It is often important to distinguish between different vector lengths, but just setting vecScaler = 1 will usually render the plot illegible with huge vectors shooting all over the place. There is no shortage of ways to scale, but one way the author has found helpful is to use a sigmoidal curve like (\\tan^{-1}(x)). Here is one option: var myScaler = function(vec,a,b) { return a*(Math.PI/2 - Math.atan(a/b*Math.sqrt(vec[0]**2 + vec[1]**2))) } for some tuning constants a and b. Note that this function produces a multiplying factor, not the desired length directly. b is the maximum length of the vector relative to the grid size, which is often set to either 1 or 1.414 (the former being good for vectors that tend to point along gridlines and the latter being good for vectors that tend to point in the direction of the diagonals, or if you like a little bit of overlap). a is a measure of how fast the vector reaches the maximum length. You could tweak the values of a and b for each question, or you could pair up functions and scaling factors in the question variables when randomising. Regardless, it might be a good idea to copy-paste the graphing code into the question note so that you can check the scaling when deploying variants.","title":"Vector Plots"}]}