<!DOCTYPE html>
<html class="writer-html5" lang="es" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="http://rilarfer.stack-moodle.com/Authoring/Variables/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Defining variables - STACK</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Defining variables";
        var mkdocs_page_input_path = "Authoring\\Variables.md";
        var mkdocs_page_url = "/Authoring/Variables/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> STACK
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" title="Escriba el término de búsqueda aquí" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Menu de navegación">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Inicio</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../AbInitio/">Guía Autoría inicio rápido</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../About/">About</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../">Autoría</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../CAS/">CAS</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../Installation/">Instalación</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../Moodle/">Moodle</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../Reference/">Referencias</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../Students/">Estudiantes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../Topics/">Temas</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Menú de navegación en móvil">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">STACK</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Documentos"></a></li>
      <li class="breadcrumb-item active">Defining variables</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="defining-variables">Defining variables</h1>
<p>There are two fields which allow you to define and manipulate computer algebra system variables.
These are called the Question Variables and Feedback variables.</p>
<p>The field is a string which contains a list of assignments of the form</p>
<pre><code>key : value;
</code></pre>
<p>for example</p>
<pre><code>p : (x-1)^3;
</code></pre>
<p>Each <code>key</code> is the name of a variable local to the question, and <code>value</code> is an expression in <a href="../../CAS/Maxima/">Maxima's</a> language.
When evaluated, this list is passed to the CAS, and evaluated in order. The value obtained for each key will be stored and used later, for example in the question marking routines.
The keys need not be unique, although only the last value will be available for use later.</p>
<p>These fields are known as <em>KeyVal</em> fields.</p>
<h2 id="maximas-assignments-a3">Maxima's assignments <code>a:3</code></h2>
<p>Computer algebra systems each use a different syntax to denote the assignment of a value to a variable.
For example, Maple and Derive use <code>:=</code>. Mathematica uses <code>=</code> or <code>:=</code>, depending on when the assignment is to take place.
Maxima uses the form <code>key:value</code>, which is unusual and not intuitive.
Maxima reserves <code>:=</code> to denote function definition, e.g. <code>f(x):=x^2</code>.
STACK uses Maxima's assignment rules.</p>
<h2 id="notes">Notes</h2>
<ul>
<li>Items are separated by either a newline or <code>;</code>.</li>
<li>Adding <code>;</code> at the end of each statement is optional, but makes it easier to cut and paste into a Maxima session.  Please add these.</li>
<li>If you type a string not in the form <code>key : value</code>, a variable name such as <code>dumvar3</code> will be assigned automatically to keep track of the command in the list of question variables.</li>
<li>The <code>key</code> must be a simple variable name.  It must start with letters, and can contain numbers and underscore characters.</li>
<li>If a student uses a variable which has been assigned a value in the question variables then the attempt will be rejected as invalid.  You can use the "allowed words" to enable students' expressions with question variables to be considered valid.
    Hence, it is a sensible idea to use variable names which are not used as parameters in the question, or likely to occur in the student's answer. For example if you set an integration question then you should avoid using the variable <code>c</code>, otherwise students won't be able to write <code>+c</code> in the normal way to indicate a constant of integration.</li>
<li>You can include C-style block comments for increased clarity, and these may appear on separate lines
    e.g. <code>dice : rand(6) + 1; /* roll it! */</code></li>
<li>Do not define a feedback variable with the same name as an input.  For example, if your input is <code>ans1</code> then you cannot define a feedback variable <code>ans1:exdowncase(ans1)</code>.  Choose something different, e.g. <code>ansmod1:exdowncase(ans1)</code></li>
</ul>
<h2 id="variables-de-pregunta-question_variables">Variables de Pregunta {#Question_variables}</h2>
<p>The question variables are evaluated when a variant of a question is created.   The displayed forms are available to all other <a href="../CASText/">CASText</a> fields and the values to other parts of the question, e.g.</p>
<ul>
<li>Teacher's answers in <a href="../Inputs/">inputs</a> are defined in terms of question variables.</li>
<li><a href="../Question_note/">Question note</a>.</li>
<li>General feedback (also known as the worked solution).</li>
<li>All fields in each of the <a href="../Potential_response_trees/">potential response tree</a>.</li>
<li>Each input when testing the item.</li>
<li>Question variables are not available to inputs when a student is validating their answer, unless special ``context variables'' are defined.</li>
</ul>
<h3 id="context-variables">Context variables</h3>
<p>If the following commands appear within the question variables they will be available in every part of the question, in particular these commands will affect how students' input is validated.  This enables teachers to affect the display of the student's answer validation, and add assumptions to PRTs.</p>
<ul>
<li><code>orderless</code> and <code>ordergreat</code>.  These commands may only appear once each in any question.</li>
<li><code>assume</code> and <code>declare</code>.</li>
<li><code>texput</code>, see notes directly below.</li>
</ul>
<p>This collection of special variables are called "context variables".</p>
<p>Only single texput commands are gathered into the context variables.  You cannot use other variables or other functions defined in the question variables.  So, <code>texput(blob, "\\diamond")</code> is fine, but passing a function to texput to display more complex output is not currently supported.</p>
<p>For example, to redefine how the logarithm is displayed, use <code>texput(log, "\\log ", prefix);</code>.</p>
<p>It is possible to use an unnamed <code>lambda</code> function.  E.g. if you have a function <code>tup</code> then</p>
<pre><code>texput(tup,  lambda([z], block([a,b], [a,b]:args(z), sconcat("\\left[",tex1(a),",",tex1(b),"\\right)"))));
</code></pre>
<p>will display <code>tup(a,b)</code> as <script type="math/tex"> \left[a,b\right) </script>.</p>
<p>As a more complicated example, to typeset <code>u(A_k,k,1,inf)</code> as <script type="math/tex">{\bigcup_{k = 1}^{\infty } {A}_{k}}</script> you can use the following:</p>
<pre><code>texput(u,lambda([ex],if length(ex)&lt;4 then return("\\bigcup_{?=?}^{?} ? ") else
    sconcat("\\bigcup_{" ,tex1(second(ex)), " = ", tex1(third(ex)), "}^{", tex1(fourth(ex)), "} ", tex1(first(ex)))));
</code></pre>
<p>Notice in this example how we check the length of the arguments supplied to the (inert) function <code>u</code>.  If there are fewer than the required number of arguments then this texput function returns something sensible.  Without this clause you get errors, which would be unhelpful to a student trying to type this in.</p>
<h2 id="feedback-variables-feedback_variables">Feedback variables {#Feedback_variables}</h2>
<p>The feedback variables form one field in the <a href="../Potential_response_trees/">potential response tree</a>.</p>
<p>When using the <a href="../Potential_response_trees/">potential response tree</a> it is often very useful
to manipulate the student's answer <em>before</em> applying any of the <a href="../Answer_Tests/">Answer tests</a>.
This gives the opportunity to perform sophisticated mathematical operations.</p>
<p>Before each answer test is applied the following list of variables is assembled and evaluated</p>
<ol>
<li>The values of the question variables.</li>
<li>The values of each <a href="../Inputs/">inputs</a>.</li>
<li>The feedback variables.</li>
</ol>
<p>The values of the evaluated feedback variables can be used as expressions in the answer tests and in the feedback.</p>
<p>Note, you cannot redefine the value of an input as a key in the feedback variables.  e.g. you cannot have something like <code>ans1:ans1+1</code>. You must use a new variable name.  When an answer test is evaluated, if the SA or TA field is exactly the name of an input then the raw student's value is used, and not the value from the feedback variables. This is because some of the answer tests require exactly what is typed (e.g. trailing zeros) and not the value through the CAS.  To avoid this problem authors must use new variable names to distinguish between the actual input typed by the student and any calculated value.</p>
<h2 id="creating-variable-names">Creating variable names</h2>
<p>Teachers may not use the Maxima 'concat' command, so you cannot create variable names of your own using code of the following form.</p>
<pre><code>vars:makelist(concat(x,k),k,1,5);
</code></pre>
<p>Instead use</p>
<pre><code>vars0:stack_var_makelist(k, 5);
</code></pre>
<p>If you want to start numbering at 1 instead of 0, use</p>
<pre><code>vars1:rest(stack_var_makelist(k, 6));
</code></pre>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Construído con <a href="https://www.mkdocs.org/">MkDocs</a> usando <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provisto por <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versiones">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../../javascripts/removeCredits.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
