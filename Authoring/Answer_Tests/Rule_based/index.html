<!DOCTYPE html>
<html class="writer-html5" lang="es" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="http://rilarfer.stack-moodle.com/Authoring/Answer_Tests/Rule_based/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Rules-based answer tests - STACK</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Rules-based answer tests";
        var mkdocs_page_input_path = "Authoring\\Answer_Tests\\Rule_based.md";
        var mkdocs_page_url = "/Authoring/Answer_Tests/Rule_based/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> STACK
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" title="Escriba el término de búsqueda aquí" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Menu de navegación">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Inicio</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../About/">About</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../AbInitio/">Guía Autoría inicio rápido</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../AbInitio/Authoring_quick_start_1/">1 Una pregunta básica</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../AbInitio/Authoring_quick_start_2/">2 Variables de la pregunta</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../AbInitio/Authoring_quick_start_3/">3 Mejorando la retroalimentación</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../AbInitio/Authoring_quick_start_4/">4 Aleatorización</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../AbInitio/Authoring_quick_start_5/">5 Test de Preguntas</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../AbInitio/Authoring_quick_start_6/">6 Preguntas matemáticas de varias partes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../AbInitio/Authoring_quick_start_7/">7 Desactivar la simplificación</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../AbInitio/Authoring_quick_start_8/">8 Importación y cuestionarios</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../">Autoría</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../CAS/">CAS</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../Installation/">Instalación</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../Developer/">Desarrolladores</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../Moodle/">Moodle</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../Reference/">Referencias</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../Students/">Estudiantes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../Topics/">Temas</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Menú de navegación en móvil">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">STACK</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Documentos"></a></li>
      <li class="breadcrumb-item active">Rules-based answer tests</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="rules-based-answer-tests">Rules-based answer tests</h1>
<p>Rules-based answer tests are a special kind of mathematical <a href="../">answer test</a>.</p>
<h3 id="equality-up-to-associativity-and-commutativity-equalcomass">Equality up to associativity and commutativity ### {#EqualComAss}</h3>
<p>The <code>EqualComAss</code> test establishes that two expressions are equal up to commutativity and associativity of addition and multiplication, together with their inverses minus and division.</p>
<p>For example <script type="math/tex; mode=display">a+b=b+a\mbox{,}</script> but <script type="math/tex; mode=display">x+x\neq 2x\mbox{.}</script> This is very useful in elementary algebra, where we want the form of the answer exactly. This test seeks to establish whether two expressions are the same when the basic operations of arithmetic addition/multiplication and Boolean and/or are assumed to be nouns but are commutative and associative.  Hence, <script type="math/tex">2x+y=y+2x</script> but <script type="math/tex">x+x+y\neq 2x+y</script>.  The unary minus commutes with multiplication in a way natural to establishing the required form of equivalence.</p>
<p>This is a particularly useful test for checking that an answer is written in a particular form, e.g. "simplified".</p>
<p>Notes </p>
<ol>
<li>This test does not include laws of indices, so <script type="math/tex">x\times x \neq x^2</script>. Since we are dealing only with nouns <script type="math/tex">-\times -</script> does not simplify to <script type="math/tex">1</script>. E.g. <script type="math/tex">-x\times -x \neq x\times x \neq x^2</script>.  This also means that <script type="math/tex">\sqrt{x}</script> is not considered to be equivalent to <script type="math/tex">x^{\frac{1}{2}}</script> under this test.  In many situations this notation is taken to mean the same thing, but internally in Maxima they are represented by different functions and are not converted to a canonical form by the test.</li>
<li>By design, addition commutes with subtraction, so <script type="math/tex"> -1+2\equiv 2-1</script> and multiplication commutes with division, so <script type="math/tex"> (ab)/c\equiv a(b/c) </script>.</li>
<li>By design <script type="math/tex">-1/4x \neq -x/4</script> since we do not have the rule <script type="math/tex"> 1\times x \rightarrow x</script>.  To establish this equivalence we would need a different answer test.</li>
<li>This test can also be used to establish <script type="math/tex">\{4,4\} \neq \{4\}</script>, but <script type="math/tex">\{1,2\} = \{2,1\}</script> since the arguments of the set constructor function are commutative.  Sets are not associative, so <script type="math/tex">\{1,2\} \neq \{\{1\},2\}</script>.  (See Maxima's <code>flatten</code> command.)</li>
<li>Simplification is automatically switched off when this test is applied, otherwise it makes no sense. </li>
</ol>
<h3 id="unary-minus-and-division">Unary minus and division</h3>
<p>In order to understand how the tests work it is essential to understand how we represent unary minus and division internally.</p>
<p>Without simplification, Maxima has a unary minus function.  Litterally <code>minus(x)</code>.  This is transformed into <code>UNARY_MINUS nounmul ex</code>  The use of multiplication here allows <code>-</code> to commute with other multiplication, so we can spot things like <script type="math/tex">-x \times -y = --xy</script> using associativity and commutativity.</p>
<p>Similarly, we replace division <script type="math/tex">a/b</script> with <code>a nounmul UNARY_RECIP(b)</code>.  This means that <code>UNARY_RECIP(b)</code> is not automatically the same as <code>1 nounmul UNARY_RECIP(b)</code>, without an additional rule.</p>
<h3 id="equalcomassrules">EqualComAssRules</h3>
<p>This is an advanced test.</p>
<p>This test allows question authors to create equivalence classes based on equality up to associativity and commutativity with the addition of optional rules. For example, the teacher can include the identity operations of addition and multiplication: <script type="math/tex">0+ x\rightarrow x</script> and <script type="math/tex">1\times x\rightarrow x</script>.  This makes it much easier to establish things like <script type="math/tex">0-1\times i</script> is equivalent to <script type="math/tex">-i</script>.  However, more general integer arithmatic is still not automatically included so <script type="math/tex">2\times 3 \neq 6</script>.</p>
<p>This test always assumes associativity and commutativity of addition and multiplication.  Essentially this test extends the <code>EqualComAss</code> test by adding in additional rules. Without assumptions of commutativity and associativity we would need all sorts of additional rules, such as <script type="math/tex">x+0 \rightarrow x</script>, since without commutativity this would not be captured by the rule <code>zeroAdd</code>, i.e. <script type="math/tex">0+x \rightarrow x</script>.  Furthermore, the way <code>EqualComAss</code> deals with unary minus and division make associativity and commutativity difficult to add in their pure form.</p>
<p>Each rule is a named function in Maxima, and each rule has an associated predicate function to decide if the rule is applicable at the top level of an expression.   E.g. <code>zeroAddp(0+x)</code> would return <code>true</code> and <code>zeroAdd(0+x)</code> would return <code>x</code>.</p>
<p>The teacher must supply an option consisting of a list of the following rule names.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Rule</th>
</tr>
</thead>
<tbody>
<tr>
<td>(<code>ALG_TRANS</code>)</td>
<td><em>Always included</em></td>
</tr>
<tr>
<td><code>assAdd</code></td>
<td>Associativity of addition</td>
</tr>
<tr>
<td><code>assMul</code></td>
<td>Associativity of multiplication</td>
</tr>
<tr>
<td><code>comAdd</code></td>
<td>Commutativity of addition</td>
</tr>
<tr>
<td><code>comMul</code></td>
<td>Commutativity of multiplication</td>
</tr>
<tr>
<td>(<code>ID_TRANS</code>)</td>
<td></td>
</tr>
<tr>
<td><code>zeroAdd</code></td>
<td>
<script type="math/tex">0+x \rightarrow x</script>
</td>
</tr>
<tr>
<td><code>zeroMul</code></td>
<td>
<script type="math/tex">0\times x \rightarrow 0</script>
</td>
</tr>
<tr>
<td><code>oneMul</code></td>
<td>
<script type="math/tex">1\times x \rightarrow x</script>
</td>
</tr>
<tr>
<td><code>oneDiv</code></td>
<td>
<script type="math/tex">\frac{x}{1} \rightarrow x</script>
</td>
</tr>
<tr>
<td><code>onePow</code></td>
<td>
<script type="math/tex">1^x \rightarrow 1</script>
</td>
</tr>
<tr>
<td><code>idPow</code></td>
<td>
<script type="math/tex">x^1 \rightarrow x</script>
</td>
</tr>
<tr>
<td><code>zeroPow</code></td>
<td>
<script type="math/tex">0^x \rightarrow 0</script> if <script type="math/tex">x \neq 0</script>
</td>
</tr>
<tr>
<td><code>zPow</code></td>
<td>
<script type="math/tex">x^0 \rightarrow 1</script>  if <script type="math/tex">x \neq 0</script>
</td>
</tr>
<tr>
<td>(<code>NEG_TRANS</code>)</td>
<td></td>
</tr>
<tr>
<td><code>negNeg</code></td>
<td>
<script type="math/tex">-(-x) \rightarrow x</script>
</td>
</tr>
<tr>
<td><code>negDiv</code></td>
<td>
<script type="math/tex"> y/(-x) \rightarrow -y/x </script>  (Note, this assumes <code>UNARY_RECIP</code> and <code>UNARY_MINUS</code>)</td>
</tr>
<tr>
<td><code>negOrd</code></td>
<td>Order summands so that the leading coefficient is not negative (see notes below).</td>
</tr>
<tr>
<td>(<code>DIV_TRANS</code>)</td>
<td></td>
</tr>
<tr>
<td><code>recipMul</code></td>
<td>
<script type="math/tex"> x/a\times y/b \rightarrow (x\,y)/(a\,b) </script>
</td>
</tr>
<tr>
<td><code>divDiv</code></td>
<td>
<script type="math/tex"> a/(b/c) \rightarrow a\,c/b </script>
</td>
</tr>
<tr>
<td></td>
<td>Note <script type="math/tex"> a/b/c </script> is interpreted as  <script type="math/tex"> (a/b)/c=a/(b\,c) </script> in Maxima.</td>
</tr>
<tr>
<td><code>divCancel</code></td>
<td>Cancel common factors in numerator and denominator.</td>
</tr>
<tr>
<td>(<code>INT_ARITH</code>)</td>
<td></td>
</tr>
<tr>
<td><code>intAdd</code></td>
<td>Perform addition on integers</td>
</tr>
<tr>
<td><code>intMul</code></td>
<td>Perform multiplication on integers</td>
</tr>
<tr>
<td><code>intPow</code></td>
<td>Perform exponentiation when both arguments are integers</td>
</tr>
<tr>
<td>Other</td>
<td></td>
</tr>
<tr>
<td><code>intFac</code></td>
<td>Factor integers (incompatible with <code>intMul</code>)</td>
</tr>
<tr>
<td><code>negDist</code></td>
<td>Distribute only <code>UNARY_MINUS</code> over a sum (incompatible with <code>negOrd</code>)</td>
</tr>
<tr>
<td><code>sqrtRem</code></td>
<td>Remove the <code>sqrt</code> function and replace with <code>^(1/2)</code></td>
</tr>
</tbody>
</table>
<p>The rule <code>negOrd</code> deserves comment.  Ultimately we only compare parse trees exactly, and so we need to order terms in sums and products (commutativity).
However <script type="math/tex">y-x</script> is never ordered as <script type="math/tex">-x+y</script>.  Furthermore, <script type="math/tex">-(x-y) \neq -x+y</script>.  We need to factor out the unary minus and ensure that the coefficient of the leading term is not negative.
Factoring out is better than distributing here, since in a produce such as <script type="math/tex">-(x-y)(x-z)</script> it is not clear which term in the product the inital minus sign will end up in.
Since <code>negOrd</code> is a factor command, it is incompatible with <code>negDist</code>.</p>
<p>For convenience sets of rules can be specificed.  E.g. you can use the name <code>ID_TRANS</code> in place of the list <code>[zeroAdd,zeroMul,oneMul,oneDiv,onePow,idPow,zeroPow,zPow]</code> to include all of the basic identity operators.</p>
<p>If you want to remove tests from a list you can use code such as <code>delete(zeroAdd, ID_TRANS)</code>.</p>
<p>The test takes the student's answer and teacher's answer and repeatedly applies the rules in turn until the expressions remain the same.  The rules are designed to always shorten the expression, so the process is guranteed to terminate.  Once the expression is written in final form, the test compares the two expression trees.</p>
<p>Note that we do not gurantee the simplification is mathematically correct!  E.g. if you are unlucky enough to try the rule <code>zeroPow</code> on the expression <code>0^(1-1)</code> then since <code>1-1</code> is not equal to zero (taken literally) then the rule applies and you have failed to spot a potential <code>0^0</code> error.</p>
<p>If you add the rule <code>testdebug</code> then you will see both expressions in the answer note.  This is useful for debugging, but would clutter up things in a production setting.</p>
<h2 id="examples-of-use">Examples of use</h2>
<h3 id="unique-prime-factorisation">Unique prime factorisation</h3>
<p>Imagine we have asked students to find the prime decomposition of <script type="math/tex">1617 = 3^1\cdot 7^2\cdot 11^1</script>.  This is the answer we are aiming at, but we also want to condone the answer
<script type="math/tex">3\cdot 7^2\cdot 11</script>.   We can do this with the rule <code>[idPow]</code>.  We might also (being generous perhaps) want to also accept <script type="math/tex"> 2^0\cdot 3^1\cdot 5^0\cdot 7^2\cdot 11^1 </script>.  We can do this with the three rules <code>[oneMul,idPow,zPow]</code>.  You can try this code in the sandbox.</p>
<pre><code>ATEqualComAssRules(2^0*3^1*5^0*7^2*11^1, 3^1*7^2*11^1, [oneMul,idPow,zPow]);
</code></pre>
<p>Note, this test always assumes commutativity so you can't (currently) enforce the order of writing the prime factors.</p>
<h2 id="developer-notes">Developer notes</h2>
<p>This functionality was introduced in April 2021.  It is essential that the rules, and any combination of the rules, can only proceed in a single direction and that no infinite loops are created.  So, <code>intAdd</code> is fine because adding together two integers will make an expression <em>simpler</em> which in this case is shorter.  For this reason we do not have expanding out (i.e. distribution) rules in the above set, and no rules of indices (which readily lead to mathemtical errors).  Use Maxima's simplifier if you want to include such rules.</p>
<p>The rules names are Maxima functions, but they assume <code>simp:false</code> and that the expression has noun forms e.g. <code>nounadd</code> instead of <code>+</code>.  You can use <code>equals_commute_prepare(ex)</code> to change an expression into this noun form.  The goal of this code is to create reliable equivalence classes of expressions, not perform algebraic manipulation as we traditionally know it. In particular the way unary minus is transformed into multiplication with a special tag <code>UNARY_MINUS</code> is likely to cause confusion to students if an expression is manipulated using these rules and then shown to a student.  The transoformation is designed to go in one direction only, and we do not support displaying the resulting manipulated expressions in traditional form.</p>
<p><strong>As of May 2023, these rules are not intended as an end-user simplifier and we do not currently support user-defined rules (sorry!).</strong></p>
<h1 id="see-also">See also</h1>
<ul>
<li><a href="../">Answer tests</a></li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2023 Ricardo Largaespada</p>
  </div>

  Construído con <a href="https://www.mkdocs.org/">MkDocs</a> usando <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provisto por <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versiones">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../../../javascripts/removeCredits.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
