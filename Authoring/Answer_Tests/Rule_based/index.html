
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://rilarfer.stack-moodle.com/Authoring/Answer_Tests/Rule_based/">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.6">
    
    
      
        <title>Rules-based answer tests - STACK</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rules-based-answer-tests" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../../.." title="STACK" class="md-header__button md-logo" aria-label="STACK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            STACK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Rules-based answer tests
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="STACK" class="md-nav__button md-logo" aria-label="STACK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    STACK
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../About/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acerca de STACK
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../AbInitio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guía Autoría inicio rápido
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../AbInitio/Authoring_quick_start_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Una pregunta básica
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../AbInitio/Authoring_quick_start_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Variables de la pregunta
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../AbInitio/Authoring_quick_start_3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Mejorando la retroalimentación
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../AbInitio/Authoring_quick_start_4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Aleatorización
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../AbInitio/Authoring_quick_start_5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 Test de Preguntas
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../AbInitio/Authoring_quick_start_6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 Preguntas matemáticas de varias partes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../AbInitio/Authoring_quick_start_7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7 Desactivar la simplificación
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../AbInitio/Authoring_quick_start_8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8 Importación y cuestionarios
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autoría
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../CAS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CAS
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../Installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instalación
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../Developer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Desarrolladores
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../Moodle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Moodle
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../Reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Referencias
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../Students/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Estudiantes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../Topics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Temas
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#equality-up-to-associativity-and-commutativity-equalcomass" class="md-nav__link">
    Equality up to associativity and commutativity ### {#EqualComAss}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unary-minus-and-division" class="md-nav__link">
    Unary minus and division
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#equalcomassrules" class="md-nav__link">
    EqualComAssRules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples-of-use" class="md-nav__link">
    Examples of use
  </a>
  
    <nav class="md-nav" aria-label="Examples of use">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unique-prime-factorisation" class="md-nav__link">
    Unique prime factorisation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-notes" class="md-nav__link">
    Developer notes
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="rules-based-answer-tests">Rules-based answer tests</h1>
<p>Rules-based answer tests are a special kind of mathematical <a href="../">answer test</a>.</p>
<h3 id="equality-up-to-associativity-and-commutativity-equalcomass">Equality up to associativity and commutativity ### {#EqualComAss}</h3>
<p>The <code>EqualComAss</code> test establishes that two expressions are equal up to commutativity and associativity of addition and multiplication, together with their inverses minus and division.</p>
<p>For example <script type="math/tex; mode=display">a+b=b+a\mbox{,}</script> but <script type="math/tex; mode=display">x+x\neq 2x\mbox{.}</script> This is very useful in elementary algebra, where we want the form of the answer exactly. This test seeks to establish whether two expressions are the same when the basic operations of arithmetic addition/multiplication and Boolean and/or are assumed to be nouns but are commutative and associative.  Hence, <script type="math/tex">2x+y=y+2x</script> but <script type="math/tex">x+x+y\neq 2x+y</script>.  The unary minus commutes with multiplication in a way natural to establishing the required form of equivalence.</p>
<p>This is a particularly useful test for checking that an answer is written in a particular form, e.g. "simplified".</p>
<p>Notes </p>
<ol>
<li>This test does not include laws of indices, so <script type="math/tex">x\times x \neq x^2</script>. Since we are dealing only with nouns <script type="math/tex">-\times -</script> does not simplify to <script type="math/tex">1</script>. E.g. <script type="math/tex">-x\times -x \neq x\times x \neq x^2</script>.  This also means that <script type="math/tex">\sqrt{x}</script> is not considered to be equivalent to <script type="math/tex">x^{\frac{1}{2}}</script> under this test.  In many situations this notation is taken to mean the same thing, but internally in Maxima they are represented by different functions and are not converted to a canonical form by the test.</li>
<li>By design, addition commutes with subtraction, so <script type="math/tex"> -1+2\equiv 2-1</script> and multiplication commutes with division, so <script type="math/tex"> (ab)/c\equiv a(b/c) </script>.</li>
<li>By design <script type="math/tex">-1/4x \neq -x/4</script> since we do not have the rule <script type="math/tex"> 1\times x \rightarrow x</script>.  To establish this equivalence we would need a different answer test.</li>
<li>This test can also be used to establish <script type="math/tex">\{4,4\} \neq \{4\}</script>, but <script type="math/tex">\{1,2\} = \{2,1\}</script> since the arguments of the set constructor function are commutative.  Sets are not associative, so <script type="math/tex">\{1,2\} \neq \{\{1\},2\}</script>.  (See Maxima's <code>flatten</code> command.)</li>
<li>Simplification is automatically switched off when this test is applied, otherwise it makes no sense. </li>
</ol>
<h3 id="unary-minus-and-division">Unary minus and division</h3>
<p>In order to understand how the tests work it is essential to understand how we represent unary minus and division internally.</p>
<p>Without simplification, Maxima has a unary minus function.  Litterally <code>minus(x)</code>.  This is transformed into <code>UNARY_MINUS nounmul ex</code>  The use of multiplication here allows <code>-</code> to commute with other multiplication, so we can spot things like <script type="math/tex">-x \times -y = --xy</script> using associativity and commutativity.</p>
<p>Similarly, we replace division <script type="math/tex">a/b</script> with <code>a nounmul UNARY_RECIP(b)</code>.  This means that <code>UNARY_RECIP(b)</code> is not automatically the same as <code>1 nounmul UNARY_RECIP(b)</code>, without an additional rule.</p>
<h3 id="equalcomassrules">EqualComAssRules</h3>
<p>This is an advanced test.</p>
<p>This test allows question authors to create equivalence classes based on equality up to associativity and commutativity with the addition of optional rules. For example, the teacher can include the identity operations of addition and multiplication: <script type="math/tex">0+ x\rightarrow x</script> and <script type="math/tex">1\times x\rightarrow x</script>.  This makes it much easier to establish things like <script type="math/tex">0-1\times i</script> is equivalent to <script type="math/tex">-i</script>.  However, more general integer arithmatic is still not automatically included so <script type="math/tex">2\times 3 \neq 6</script>.</p>
<p>This test always assumes associativity and commutativity of addition and multiplication.  Essentially this test extends the <code>EqualComAss</code> test by adding in additional rules. Without assumptions of commutativity and associativity we would need all sorts of additional rules, such as <script type="math/tex">x+0 \rightarrow x</script>, since without commutativity this would not be captured by the rule <code>zeroAdd</code>, i.e. <script type="math/tex">0+x \rightarrow x</script>.  Furthermore, the way <code>EqualComAss</code> deals with unary minus and division make associativity and commutativity difficult to add in their pure form.</p>
<p>Each rule is a named function in Maxima, and each rule has an associated predicate function to decide if the rule is applicable at the top level of an expression.   E.g. <code>zeroAddp(0+x)</code> would return <code>true</code> and <code>zeroAdd(0+x)</code> would return <code>x</code>.</p>
<p>The teacher must supply an option consisting of a list of the following rule names.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Rule</th>
</tr>
</thead>
<tbody>
<tr>
<td>(<code>ALG_TRANS</code>)</td>
<td><em>Always included</em></td>
</tr>
<tr>
<td><code>assAdd</code></td>
<td>Associativity of addition</td>
</tr>
<tr>
<td><code>assMul</code></td>
<td>Associativity of multiplication</td>
</tr>
<tr>
<td><code>comAdd</code></td>
<td>Commutativity of addition</td>
</tr>
<tr>
<td><code>comMul</code></td>
<td>Commutativity of multiplication</td>
</tr>
<tr>
<td>(<code>ID_TRANS</code>)</td>
<td></td>
</tr>
<tr>
<td><code>zeroAdd</code></td>
<td>
<script type="math/tex">0+x \rightarrow x</script>
</td>
</tr>
<tr>
<td><code>zeroMul</code></td>
<td>
<script type="math/tex">0\times x \rightarrow 0</script>
</td>
</tr>
<tr>
<td><code>oneMul</code></td>
<td>
<script type="math/tex">1\times x \rightarrow x</script>
</td>
</tr>
<tr>
<td><code>oneDiv</code></td>
<td>
<script type="math/tex">\frac{x}{1} \rightarrow x</script>
</td>
</tr>
<tr>
<td><code>onePow</code></td>
<td>
<script type="math/tex">1^x \rightarrow 1</script>
</td>
</tr>
<tr>
<td><code>idPow</code></td>
<td>
<script type="math/tex">x^1 \rightarrow x</script>
</td>
</tr>
<tr>
<td><code>zeroPow</code></td>
<td>
<script type="math/tex">0^x \rightarrow 0</script> if <script type="math/tex">x \neq 0</script>
</td>
</tr>
<tr>
<td><code>zPow</code></td>
<td>
<script type="math/tex">x^0 \rightarrow 1</script>  if <script type="math/tex">x \neq 0</script>
</td>
</tr>
<tr>
<td>(<code>NEG_TRANS</code>)</td>
<td></td>
</tr>
<tr>
<td><code>negNeg</code></td>
<td>
<script type="math/tex">-(-x) \rightarrow x</script>
</td>
</tr>
<tr>
<td><code>negDiv</code></td>
<td>
<script type="math/tex"> y/(-x) \rightarrow -y/x </script>  (Note, this assumes <code>UNARY_RECIP</code> and <code>UNARY_MINUS</code>)</td>
</tr>
<tr>
<td><code>negOrd</code></td>
<td>Order summands so that the leading coefficient is not negative (see notes below).</td>
</tr>
<tr>
<td>(<code>DIV_TRANS</code>)</td>
<td></td>
</tr>
<tr>
<td><code>recipMul</code></td>
<td>
<script type="math/tex"> x/a\times y/b \rightarrow (x\,y)/(a\,b) </script>
</td>
</tr>
<tr>
<td><code>divDiv</code></td>
<td>
<script type="math/tex"> a/(b/c) \rightarrow a\,c/b </script>
</td>
</tr>
<tr>
<td></td>
<td>Note <script type="math/tex"> a/b/c </script> is interpreted as  <script type="math/tex"> (a/b)/c=a/(b\,c) </script> in Maxima.</td>
</tr>
<tr>
<td><code>divCancel</code></td>
<td>Cancel common factors in numerator and denominator.</td>
</tr>
<tr>
<td>(<code>INT_ARITH</code>)</td>
<td></td>
</tr>
<tr>
<td><code>intAdd</code></td>
<td>Perform addition on integers</td>
</tr>
<tr>
<td><code>intMul</code></td>
<td>Perform multiplication on integers</td>
</tr>
<tr>
<td><code>intPow</code></td>
<td>Perform exponentiation when both arguments are integers</td>
</tr>
<tr>
<td>Other</td>
<td></td>
</tr>
<tr>
<td><code>intFac</code></td>
<td>Factor integers (incompatible with <code>intMul</code>)</td>
</tr>
<tr>
<td><code>negDist</code></td>
<td>Distribute only <code>UNARY_MINUS</code> over a sum (incompatible with <code>negOrd</code>)</td>
</tr>
<tr>
<td><code>sqrtRem</code></td>
<td>Remove the <code>sqrt</code> function and replace with <code>^(1/2)</code></td>
</tr>
</tbody>
</table>
<p>The rule <code>negOrd</code> deserves comment.  Ultimately we only compare parse trees exactly, and so we need to order terms in sums and products (commutativity).
However <script type="math/tex">y-x</script> is never ordered as <script type="math/tex">-x+y</script>.  Furthermore, <script type="math/tex">-(x-y) \neq -x+y</script>.  We need to factor out the unary minus and ensure that the coefficient of the leading term is not negative.
Factoring out is better than distributing here, since in a produce such as <script type="math/tex">-(x-y)(x-z)</script> it is not clear which term in the product the inital minus sign will end up in.
Since <code>negOrd</code> is a factor command, it is incompatible with <code>negDist</code>.</p>
<p>For convenience sets of rules can be specificed.  E.g. you can use the name <code>ID_TRANS</code> in place of the list <code>[zeroAdd,zeroMul,oneMul,oneDiv,onePow,idPow,zeroPow,zPow]</code> to include all of the basic identity operators.</p>
<p>If you want to remove tests from a list you can use code such as <code>delete(zeroAdd, ID_TRANS)</code>.</p>
<p>The test takes the student's answer and teacher's answer and repeatedly applies the rules in turn until the expressions remain the same.  The rules are designed to always shorten the expression, so the process is guranteed to terminate.  Once the expression is written in final form, the test compares the two expression trees.</p>
<p>Note that we do not gurantee the simplification is mathematically correct!  E.g. if you are unlucky enough to try the rule <code>zeroPow</code> on the expression <code>0^(1-1)</code> then since <code>1-1</code> is not equal to zero (taken literally) then the rule applies and you have failed to spot a potential <code>0^0</code> error.</p>
<p>If you add the rule <code>testdebug</code> then you will see both expressions in the answer note.  This is useful for debugging, but would clutter up things in a production setting.</p>
<h2 id="examples-of-use">Examples of use</h2>
<h3 id="unique-prime-factorisation">Unique prime factorisation</h3>
<p>Imagine we have asked students to find the prime decomposition of <script type="math/tex">1617 = 3^1\cdot 7^2\cdot 11^1</script>.  This is the answer we are aiming at, but we also want to condone the answer
<script type="math/tex">3\cdot 7^2\cdot 11</script>.   We can do this with the rule <code>[idPow]</code>.  We might also (being generous perhaps) want to also accept <script type="math/tex"> 2^0\cdot 3^1\cdot 5^0\cdot 7^2\cdot 11^1 </script>.  We can do this with the three rules <code>[oneMul,idPow,zPow]</code>.  You can try this code in the sandbox.</p>
<pre><code>ATEqualComAssRules(2^0*3^1*5^0*7^2*11^1, 3^1*7^2*11^1, [oneMul,idPow,zPow]);
</code></pre>
<p>Note, this test always assumes commutativity so you can't (currently) enforce the order of writing the prime factors.</p>
<h2 id="developer-notes">Developer notes</h2>
<p>This functionality was introduced in April 2021.  It is essential that the rules, and any combination of the rules, can only proceed in a single direction and that no infinite loops are created.  So, <code>intAdd</code> is fine because adding together two integers will make an expression <em>simpler</em> which in this case is shorter.  For this reason we do not have expanding out (i.e. distribution) rules in the above set, and no rules of indices (which readily lead to mathemtical errors).  Use Maxima's simplifier if you want to include such rules.</p>
<p>The rules names are Maxima functions, but they assume <code>simp:false</code> and that the expression has noun forms e.g. <code>nounadd</code> instead of <code>+</code>.  You can use <code>equals_commute_prepare(ex)</code> to change an expression into this noun form.  The goal of this code is to create reliable equivalence classes of expressions, not perform algebraic manipulation as we traditionally know it. In particular the way unary minus is transformed into multiplication with a special tag <code>UNARY_MINUS</code> is likely to cause confusion to students if an expression is manipulated using these rules and then shown to a student.  The transoformation is designed to go in one direction only, and we do not support displaying the resulting manipulated expressions in traditional form.</p>
<p><strong>As of May 2023, these rules are not intended as an end-user simplifier and we do not currently support user-defined rules (sorry!).</strong></p>
<h1 id="see-also">See also</h1>
<ul>
<li><a href="../">Answer tests</a></li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <center> Copyright &copy; 2023 Ricardo Largaespada </center>
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/rilarfer" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="../../../javascripts/removeCredits.js"></script>
      
    
  </body>
</html>