
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://rilarfer.stack-moodle.com/Authoring/JSXGraph/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.6">
    
    
      
        <title>JSXGraph - STACK</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#jsxgraph" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="STACK" class="md-header__button md-logo" aria-label="STACK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            STACK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              JSXGraph
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="STACK" class="md-nav__button md-logo" aria-label="STACK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    STACK
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../About/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acerca de STACK
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guía Autoría inicio rápido
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Una pregunta básica
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Variables de la pregunta
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Mejorando la retroalimentación
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Aleatorización
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 Test de Preguntas
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 Preguntas matemáticas de varias partes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7 Desactivar la simplificación
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8 Importación y cuestionarios
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autoría
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../CAS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CAS
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instalación
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Developer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Desarrolladores
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Moodle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Moodle
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Referencias
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Students/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Estudiantes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Topics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Temas
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#include-basic-plots" class="md-nav__link">
    Include basic plots
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#block-options" class="md-nav__link">
    Block options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-identifier-for-the-div-element" class="md-nav__link">
    Automatic identifier for the div-element
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactive-elements" class="md-nav__link">
    Interactive elements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-example-with-a-slider" class="md-nav__link">
    An example with a slider
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-considerations-when-building-interactive-graphs" class="md-nav__link">
    General considerations when building interactive graphs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#convenience-tools-for-building-graphs" class="md-nav__link">
    Convenience tools for building graphs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#convenience-tools-for-generating-lists-of-values" class="md-nav__link">
    Convenience tools for generating lists of values.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discrete-mathematics-and-graph-theory" class="md-nav__link">
    Discrete mathematics and graph theory.
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="jsxgraph">JSXGraph</h1>
<p>This page documents use of JSXGraph to display visuals. This is a somewhat advanced topic. For basic plots and visuals you may prefer to <a href="../../CAS/Plots/">use Maxima to plot graphs</a>. </p>
<p>STACK supports inclusion of dynamic graphs using JSXGraph: <a href="http://jsxgraph.uni-bayreuth.de/wiki/">http://jsxgraph.uni-bayreuth.de/wiki/</a>.</p>
<p>Note, we strongly recommend you do not use an HTML-aware editor when using JSXGraph questions.  Instead turn off the editor within Moodle and edit the raw HTML.</p>
<pre><code>Site administration &gt; Plugins &gt; Text editors &gt; Manage editors
</code></pre>
<p>Individual users can also set their editor preferences:</p>
<pre><code>User Dashboard &gt; Preferences &gt; Editor preferences &gt; Manage editors
</code></pre>
<h2 id="include-basic-plots">Include basic plots</h2>
<p>This example is based on the documentation for <a href="http://jsxgraph.uni-bayreuth.de/wiki/index.php/Curve">curve</a> and the <a href="http://jsxgraph.uni-bayreuth.de/wiki/index.php/Even_simpler_function_plotter">even simpler function plotter</a> example.</p>
<p>To include a basic dynamically-generated sketch into a STACK question, first define the expression of the graph to be plotted in the question variables.  For example</p>
<pre><code>a:rand(6)-3;
fx:sin(x)+a;
</code></pre>
<p>Then include the following question text, which includes a simple <code>[[jsxgraph]]</code> <a href="../Question_blocks/Dynamic_blocks/">block</a>.  In particular note the lack of <code>&lt;script&gt;</code> tags which you might expect to include.</p>
<pre><code>&lt;p&gt;Type in an algebraic expression which has the graph shown below.&lt;/p&gt;
[[jsxgraph]]
  // boundingbox:[left, top, right, bottom]
  var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-10, 5, 10, -5], axis: true, showCopyright: false});
  var f = board.jc.snippet('{#fx#}', true, 'x', true);
  board.create('functiongraph', [f,-10,10]);
[[/jsxgraph]]
&lt;p&gt;\(f(x)=\) [[input:ans1]] [[validation:ans1]]&lt;/p&gt;
</code></pre>
<p>Note the code <code>board.jc.snippet('{#fx#}', true, 'x', true);</code> which turns a reasonable expression for a function into the JavaScript function.  You cannot just plot the <code>functiongraph</code> on its own.</p>
<p>To make a working question, you will then need to add in <code>fx</code> as the model answer to input <code>ans1</code>, a question note (e.g. <code>\({@fx@}\)</code>) and an appropriate potential response tree.</p>
<h2 id="block-options">Block options</h2>
<p>You can control the size of the JSXGraph board with the <code>width</code> and <code>height</code> options.  E.g. </p>
<pre><code>[[jsxgraph width="200px" height="200px"]]
</code></pre>
<p>The option <code>aspect-ratio</code> combinet with the ability to use relative dimensions allows for graphs to resize and maintain its shape if the viewport changes. When using <code>aspect-ratio</code> it is necessary to define one and only one of the above lengths.</p>
<pre><code>[[jsxgraph width="80%" aspect-ratio="3/2"]]
</code></pre>
<p>If no size is defined the default is to have <code>width="500px" height="400px"</code> and these are also the dimensions used if values are missing and no <code>aspect-ratio</code> has been defined.</p>
<h2 id="automatic-identifier-for-the-div-element">Automatic identifier for the div-element</h2>
<p>As initialisation of the JSXGraph board requires you to give it a reference to the div-element that will contain the graph you will need to know what that id is. With the JSXGraph-block that identifier is present in a variable named <code>divid</code>. Since, 4.3.3 we also provide that same identifier in a variable named <code>BOARDID</code> to match the behaviour of the JSXGraph Moodle filter. We generate that identifier automatically to allow one to have multiple plots even multiple copies of the same question on the same page without anyone having to worry about accidental identifier clashing.</p>
<h2 id="interactive-elements">Interactive elements</h2>
<p>In this example define the question variables as</p>
<pre><code>fx:int(expand((x-1)*(x+1)*(x-2)),x);
</code></pre>
<p>This question contains an interactive sliding element.</p>
<pre><code>&lt;p&gt;A graph, together with the tangent line and its slope, are shown below.  Find an algebraic expression for the graph shown below.&lt;/p&gt;
[[jsxgraph]]
  // boundingbox:[left, top, right, bottom]
  var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-5, 10, 5, -10], axis: true, showCopyright: false});
  var f = board.jc.snippet('{#fx#}', true, 'x', true);
  var curve = board.create('functiongraph', [f,-10,10], {strokeWidth:2});
  var dcurve = board.create('functiongraph', [JXG.Math.Numerics.D(f),-10,10], {strokeColor:'#ff0000', strokeWidth:1, dash:2});
  var p = board.create('glider',[1,0,curve], {name:'Drag me'});
  board.create('tangent',[p], {name:'Drag me'});
  var q = board.create('point', [function(){return p.X();}, function(){return JXG.Math.Numerics.D(f)(p.X());} ], {withLabel:false});
  board.unsuspendUpdate();
[[/jsxgraph]]
&lt;p&gt;\(f(x)=\) [[input:ans1]] [[validation:ans1]]&lt;/p&gt;
</code></pre>
<p>In this example the student can interact with a dynamic diagram to help them understand what is going on.</p>
<h2 id="an-example-with-a-slider">An example with a slider</h2>
<p>In this example we provide a simple slider.  Notice in this example we use the JavaScript notation <code>a**x</code> for <script type="math/tex">a^x</script> and not Maxima's <code>a^x</code>.</p>
<pre><code>[[jsxgraph]]
  // boundingbox:[left, top, right, bottom]
  var board = JXG.JSXGraph.initBoard(divid, {boundingbox: [-5, 10, 5, -10], axis: true, showCopyright: false});
  var a = board.create('slider',[[-3,6],[2,6],[0,2,6]],{name:'a'}); 
  var curve = board.create('functiongraph', [function(x) {return a.Value()**x}], {strokeWidth:2});
  board.unsuspendUpdate();
[[/jsxgraph]]
</code></pre>
<h2 id="general-considerations-when-building-interactive-graphs">General considerations when building interactive graphs</h2>
<p>In general you should pay attention on how your graph reacts to the student returning to the page/question later. For example, will your graph 
reset to display the original situation or will it at least move all movable things to the positions the student last left them? If 
the student can do things that are not actually considered as part of the answer, e.g. zoom out or pan the view, do you also remember 
those actions? If your graph is not used for inputting answers then this is not a major issue but if it is then you will need to solve 
this issue. Basically, storing the state of the interactive graph is a key thing that the author of that graph needs to deal with.</p>
<p>The basic structure of such graph logic is as follows:</p>
<ol>
<li>Load existing state or if not found initialise with defaults.</li>
<li>Draw the graph based on that state.</li>
<li>Attach listeners to everything that can be changed in the graph and store those changes into the state in those listeners.</li>
</ol>
<p>The simplest solution for storing state is to add a <code>string</code> type input field to the question. </p>
<ol>
<li>Create and hide an input with CSS, e.g. <code>&lt;p style="display:none"&gt;[[input:stateStore]] [[validation:stateStore]]&lt;/p&gt;</code> (but probably not while you develop the question!)</li>
<li>Make the input a "string" type.</li>
<li>Turn off the validation and verification of the field. </li>
<li>Use the extra option <code>hideanswer</code> to make sure the teacher's answer is not shown to students.</li>
<li>That input field should not be connected to any PRTs.</li>
<li>You can use the syntax hint feature to pass in a default value but only if that is not parametric (currently the syntax hint is not CASText: see the todo list).</li>
</ol>
<p>You can use that input field to store the state of the graph as a string, for example as a JSON-encoded structure. For example, assuming the name of the String input is named <code>stateStore</code>, we can store the position of a point as follows:</p>
<pre><code>[[jsxgraph input-ref-stateStore="stateRef"]]
  // Note that the input-ref-X attribute above will store the element identifier of the input X in 
  // a variable named in the attribute, you can have multiple references to multiple inputs.

  // Create a normal board.
  var board = JXG.JSXGraph.initBoard(divid, {axis: true, showCopyright: false});

  // State represented as a JS-object, first define default then try loading the stored values.
  var state = {'x':4, 'y':3};
  var stateInput = document.getElementById(stateRef);
  if (stateInput.value &amp;&amp; stateInput.value != '') {
    state = JSON.parse(stateInput.value);
  }

  // Then make the graph represent the state
  var p = board.create('point',[state['x'],state['y']]);

  // And finally the most important thing, update the stored state when things change.
  p.on('drag', function() {
    var newState = {'x':p.X(), 'y':p.Y()};
    // Encode the state as JSON for storage and store it
    stateInput.value = JSON.stringify(newState);
    // Since the STACK-JS system one needs to also remember to tell others
    // about the changed value. Do this by dispatching an event.
    stateInput.dispatchEvent(new Event('change'));
  });

  // As a side note, you typically do not want the state storing input to be directly visible to the user
  // although it may be handy during development to see what happens in it. You might hide it like this:
  stateInput.style.display = 'none';
[[/jsxgraph]]
</code></pre>
<p>Note, in the above example in <code>[[jsxgraph input-ref-stateStore="stateRef"]]</code> the <code>stateStore</code> part of this tag directly relates to, and must match, the name of the input.</p>
<p>In that trivial example you only have one point that you can drag around but the position of that point will be stored and it will be where 
you left it when you return to the page. However, the position has been stored in a String encoded in JSON format and cannot directly be 
used in STACK-side logic. The JSON format is however very handy if you create objects to store dynamically and want to represent things 
of more complex nature, but in this example we could have just as well have had two separate Numeric inputs storing just the raw 'x' 
and 'y' coordinates separately as raw numbers and in that case we could have used them directly in STACK's grading logic.</p>
<p>If needed, JSON is not impossible to parse in STACK, but it is not easy (as in JavaScript) because Maxima has no map 
data-structures and is not object oriented. In any case, the JSON string generated in the previous example would look like this:</p>
<pre><code>stateStore:"{\"x\":4,\"y\":3}";
</code></pre>
<p>To parse and manipulate it you can use STACK's custom JSON parsing functions:</p>
<pre><code>tmp:stackjson_parse(stateStore); /* This returns a STACK-map: ["stack_map", ["x", 4], ["y", 3]] */
x:stackmap_get(tmp,"x");         /* 4 */
y:stackmap_get(tmp,"y");         /* 3 */
tmp:stackmap_set(tmp,"z",x*y);   /* ["stack_map", ["x", 4], ["y", 3], ["z", 12]] */
json:stackjson_stringify(tmp);   /* "{\"x\":4,\"y\":3,\"z\":12}" */
</code></pre>
<h2 id="convenience-tools-for-building-graphs">Convenience tools for building graphs</h2>
<p>The previous section covered the general case of storing the state of the graph and acting on it. Typically, you only need to handle a few points and maybe some sliders and for this task we provide ready-made functions that bind those primitive objects to STACK input fields. As these binding functions only deal with singular sliders and points they will also use simpler forms of passing around the values.</p>
<p>The example in the previous section about moving the point around and storing the points position as an JSON object can be redone with the convenience functions in much simpler form. The only major differences being that the value is stored as a raw list of float values, and the input field should not be of the String type instead we can store it as Algebraic input and directly access the values, just make sure you allow float values in that input.</p>
<pre><code>[[jsxgraph input-ref-stateStore="stateRef"]]
  // Create a board like normal.
  var board = JXG.JSXGraph.initBoard(divid, {axis: true, showCopyright: false});

  // Create a point, its initial position will be the default position if no state is present.
  var p = board.create('point', [4, 3]);

  // Bind it to the input and state stored in it.
  stack_jxg.bind_point(stateRef, p);

  // As a side note, you typically do not want the state storing input to be directly visible to the user
  // although it may be handy during development to see what happens in it. You might hide it like this:
  var stateInput = document.getElementById(stateRef);
  stateInput.style.display = 'none';
[[/jsxgraph]]
</code></pre>
<p>For sliders you use the function <code>stack_jxg.bind_slider(inputRef, slider)</code> and it stores the sliders value as a raw float. Sliders will however require that you call <code>board.update()</code> after binding to them, otherwise the graph may not display the stored state after reload.</p>
<p>You should check the sample questions about JSXGraph binding for examples of these functions in action.</p>
<p>Starting from version 4.3 there are three functions for dealing with pairs of points. Basically, if you want to represent vectors, lines or circles or anything that can be defined with just two points. <code>stack_jxg.bind_point_dual(inputRef, point1, point2)</code> will store the positions of the points into a single input as a list of lists, <code>stack_jxg.bind_point_relative(inputRef, point1, point2)</code> will also generate a list but in it the second point is represented relative to the first, and finally <code>stack_jxg.bind_point_direction(inputRef, point1, point2)</code> will provide the first point as coordinates and the second point as an angle and distance from the first.</p>
<p>Starting from 4.4 there is only one new bind function <code>stack_jxg.bind_list_of(inputRef, list)</code> which takes a list of points and/or sliders and stores it into a single input. It only works if he size or order of the list does not change during page loads, however the list can change its shape for variants of the question. The primary use target for this are the vertices of polygons, but one can probably come up with something else as well, it does work as a quick and dirty way of storing the whole graph state if the graph can be defined just by points and sliders.</p>
<p>There are also two new functions realted to dealing with groups of objects and matching inputs. For situations where the answer consists of multiple elements and it is possible that not all get moved one can use <code>stack_jxg.define_group(list)</code> which takes a list of points and/or sliders and makes it so that touching any one of them will trigger them all to be considered as touched and thus generates inputs. There is also <code>stack_jxg.starts_moved(object)</code> which takes a point or a slider and marks it as touched from the start, this may be of use if the graph is an optional part and the actual grading depends of other parts or if one wants to use PRT feedback as a way for describing the status of the graph and needs the objects to be transferred onto the CAS side without interaction from the student.</p>
<h2 id="convenience-tools-for-generating-lists-of-values">Convenience tools for generating lists of values.</h2>
<p>If you want to output a list of values without Maxima's normal bracket symbols you can use</p>
<pre><code>stack_disp_comma_separate([a,b,sin(pi)]);
</code></pre>
<p>This function turns a list into a string representation of its arguments, without braces.
Internally, it applies <code>string</code> to the list of values (not TeX!).  However, you might still get things like <code>%pi</code> in the output.</p>
<p>You can use this with mathematical input: <code>{@stack_disp_comma_separate([a,b,sin(pi)])@}</code> and you will get the result <code>a, b, sin(%pi/7)</code> (without the string quotes) because when a Maxima variable is a string we strip off the outside quotes and don't typeset this in maths mode.</p>
<h2 id="discrete-mathematics-and-graph-theory">Discrete mathematics and graph theory.</h2>
<p>A graph can be displayed with JSXGraph, see <a href="../../Topics/Discrete_mathematics/">discrete mathematics</a> for examples.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <center> Copyright &copy; 2023 Ricardo Largaespada </center>
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/rilarfer" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="../../javascripts/removeCredits.js"></script>
      
    
  </body>
</html>