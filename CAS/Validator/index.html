
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://rilarfer.stack-moodle.com/CAS/Validator/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.6">
    
    
      
        <title>Bespoke validators - STACK</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bespoke-validators" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="STACK" class="md-header__button md-logo" aria-label="STACK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            STACK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Bespoke validators
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="STACK" class="md-nav__button md-logo" aria-label="STACK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    STACK
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../About/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acerca de STACK
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guía Autoría inicio rápido
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Una pregunta básica
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Variables de la pregunta
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Mejorando la retroalimentación
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Aleatorización
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 Test de Preguntas
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 Preguntas matemáticas de varias partes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7 Desactivar la simplificación
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../AbInitio/Authoring_quick_start_8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8 Importación y cuestionarios
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Authoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autoría
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CAS
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instalación
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Developer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Desarrolladores
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Moodle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Moodle
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Referencias
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Students/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Estudiantes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../Topics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Temas
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#combining-validators" class="md-nav__link">
    Combining validators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-validators" class="md-nav__link">
    Supported validators
  </a>
  
    <nav class="md-nav" aria-label="Supported validators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#contributing-validators-to-the-core-of-stack-contributing" class="md-nav__link">
    Contributing validators to the core of STACK {#contributing}
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localisation-and-language-support" class="md-nav__link">
    Localisation and language support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-examples" class="md-nav__link">
    Further examples
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="bespoke-validators">Bespoke validators</h1>
<p>This extra option <code>validator</code> to a particular <a href="../../Authoring/Inputs/">input</a> allows additional bespoke validation, based on a function defined by the question author.  For example, you could require that the student's answer is a <em>list of exactly three equations</em>.</p>
<p>Please check <a href="../../Authoring/Inputs/#options">existing, supported, validation options</a> before defining your own!</p>
<p>For example, to check a list has at most three elements define the function named <code>validate_listlength</code> in the question variables, e.g.</p>
<pre><code>validate_listlength(ex) := block([l],
  if not(listp(ex)) then return(castext("Your answer must be a list")),
  l:length(ex),
  if l &lt; 3 then return(castext("Your list only has {#l#} elements, which is too few.")),
  ""
);
</code></pre>
<p>To use this feature put the following in the input extra options.</p>
<pre><code>validator:validate_listlength
</code></pre>
<p>Notes:</p>
<ol>
<li>The validator must be a pure function of a single variable. There must be no reference to the input name within the validator function definition, indeed you cannot reference an input in the question variables.</li>
<li>If the function returns a non-empty string, then the student's answer will be considered invalid, and the string displayed to the student as a validation error message as part of the input validation.</li>
<li>If the function returns an empty string or <code>true</code> then the student's input is considered to be valid.  The use of an empty string here for valid is designed to encourage teachers to write meaningful error messages to students!</li>
<li>The function can reference other question variables, e.g. the teacher's answer.</li>
<li>The function is always executed with <code>simp:false</code> regardless of the question settings.</li>
<li>The function is called after the built-in validation checks, and only if the expression is already valid otherwise.  So, you cannot replace basic validation (by design).  This means you will/should have an expression which Maxima can evaluate if it gets as far as your validator function.  E.g. no missing <code>*</code> or mismatched brackets.</li>
<li>The student still cannot use any of the variable names defined in the question variables.</li>
<li>Validators only operate on a single input, and there is no mechanism to validate a combination of inputs at once.</li>
<li>The recommended style for naming validator functions is to begin the name with <code>validate_</code>.</li>
</ol>
<p>A single validator function can be re-used on multiple inputs within a single question. If you regularly copy validator functions from question to question please consider contributing this as a function to the core of STACK (see below for details). We expect to collect and support regularly used validators in future.</p>
<h2 id="combining-validators">Combining validators</h2>
<p>If you wish to test for a number of separate properties then it is probably best to create separate functions for each poperty and combine them into a single validator.</p>
<p>For example, imagine you would like the following:</p>
<ol>
<li>the answer must be a list;</li>
<li>the list has three elements;</li>
<li>each element is an equation.</li>
</ol>
<p>E.g. <code>[x^2=1, y=1, x+z=1]</code> is a valid answer.  <code>[x^2+5, y=1]</code> is invalid (for two reasons).</p>
<p>Functions which establish these properties are:</p>
<pre><code>/* Define validator fuctions separately. */
validate_islist(ex) := if listp(ex) then "" else "Your answer must be a list.";
validate_allequations(ex) := if all_listp(equationp, ex) then "" else "All elements of your answer should be equations.";
validate_checklen(ex) :=  if ev(is(length(ex)=3),simp) then "" else "Your list must have 3 elements.";
/* Combine the validator functions. */
validate_equationlist(ex) := stack_multi_validator(ex, [validate_islist, validate_allequations, validate_checklen]);
</code></pre>
<p>The last line creates a single validator function using the convenience function <code>stack_multi_validator</code> supported by STACK.</p>
<p>STACK supports two convenience functions</p>
<ol>
<li><code>stack_multi_validator</code> executes <em>all</em> the validator functions and concatenates the result.</li>
<li><code>stack_seq_validator</code> executes the validator functions in list order until one fails.  This means you can make assumptions in later validators about the <em>form</em> of the expression.</li>
</ol>
<p>If any validator throws an error then the student's answer is invalid.  E.g. using <code>any_listp</code> on a non-list will throw a Maxima error.</p>
<h2 id="supported-validators">Supported validators</h2>
<p>The Maxima code is stored in the sourcecode in <code>stack/maxima/validator.mac</code>, e.g. on <a href="https://github.com/maths/moodle-qtype_stack/blob/master/stack/maxima/validator.mac">github</a>.</p>
<h3 id="contributing-validators-to-the-core-of-stack-contributing">Contributing validators to the core of STACK {#contributing}</h3>
<p>When you regularly find yourself testing for particular properties, and copying code between questions, please consider contributing functions to the STACK core for longer term support.</p>
<p>You can <a href="https://github.com/maths/moodle-qtype_stack/issues">post your suggestion on the project's GitHub site</a> or <a href="https://github.com/maths/moodle-qtype_stack/pulls">submit code directly as a pull request</a>.</p>
<h2 id="localisation-and-language-support">Localisation and language support</h2>
<p>To localise your validation messages use the castext <code>lang</code> block. For example</p>
<pre><code>ta:phi^2-1;
validate_vars(ex) := block(
    if ev(subsetp(setify(listofvars(ex)),setify(listofvars(ta))), simp) then return(""),
    castext("[[lang code='fi']]Vastauksesi sisältää vääriä muuttujia.[[/lang]][[lang code='en']]Your answer contains the wrong variables.[[/lang]]")
);
</code></pre>
<p>For the supported validator function, all language strings are drawn from the STACK language pack: STACK stores all language strings in the <a href="https://github.com/maths/moodle-qtype_stack/blob/master/lang/en/qtype_stack.php">plugin source code</a>, and these are then translated by volunteers using the online <a href="https://lang.moodle.org/">AMOS system</a>.</p>
<p>Individual language strings can then be referred to using STACK's <code>[[commonstring ... /]]</code> block.  For example, the language pack contains the string</p>
<pre><code>$string['Illegal_strings'] = 'Your answer contains "strings" these are not allowed here.';
</code></pre>
<p>An example of how to use this in Maxima code is below.</p>
<pre><code>validate_listoftwo(ex):=block(
    if not(listp(ex)) then return("Your answer must be a list."),
    if not(is(length(ex)=2)) then return("Your list must have two elements."),
    if stringp(second(ex)) then return(castext("[[commonstring key='Illegal_strings' /]]")),
    true
);
</code></pre>
<p>In this example</p>
<ol>
<li><code>["Quadratic",x^2-1]</code> is valid.</li>
<li><code>[x^2-1,"Quadratic"]</code> is invalid because the second argument here is a string. In this case the error message comes from the common language pack.</li>
</ol>
<p>Many language examples have variables which need to be injected.  In this example, the variable <code>m0</code> needs to be injected.</p>
<pre><code>$string['ValidateVarsSpurious']   = 'These variables are not needed: {$a-&gt;m0}.';
</code></pre>
<p>To inject variables into a language string we define the value of <code>m0</code> in the <code>[[commonstring ... /]]</code> block.</p>
<pre><code>validate_spuriousvar(ex):=block([%_tmp,simp],
    simp:false,
    %_tmp: listofvars(ex),
    simp:true,
    %_tmp: setdifference(setify(%_tmp), {x,y,z}),
    if cardinality(%_tmp) = 0 then return(""),
    castext("[[commonstring key='ValidateVarsSpurious' m0='listify(%_tmp)'/]]")
);
</code></pre>
<p>Note, when injecting a value <code>m0='X'</code> the <code>X</code> must be a Maxima expression, not a displayed string.</p>
<ol>
<li>to inject the Maxima expression <code>X</code> with <code>{@...@}</code> injection (without wrapping like <code>\(...\)</code>) to a named placeholder <code>m0</code> use <code>m0='X'</code>.</li>
<li>to inject the Maxima expression <code>X</code> with <code>{#...#}</code> injection, to get raw values, to a named placeholder <code>m0</code> use <code>raw_m0='X'</code>.</li>
</ol>
<p>For other prefix options see the <a href="../../Authoring/Question_blocks/Static_blocks/#commonstring-block">documentaiton for the commonstring block</a>.</p>
<h2 id="further-examples">Further examples</h2>
<p>To forbid the underscore character in a student's input.</p>
<pre><code>validate_underscore(ex) := if is(sposition("_", string(ex)) = false) then ""
           else "Underscore characters are not permitted in this input.";
</code></pre>
<h1 id="sharing-validators-between-questions">Sharing validators between questions</h1>
<p>It is common to want to share validators between questions.  It would also be very helpful to contribute commonly used validator functions back to the STACK project.  To include a validator in more than one question you could post your validator function publicly.</p>
<ol>
<li>Get the validator function working reliably in your question, locally.</li>
<li>Add the maxima function to this file, <a href="https://github.com/maths/moodle-qtype_stack/blob/master/stack/maxima/contrib/validators.mac"><code>https://github.com/maths/moodle-qtype_stack/blob/master/stack/maxima/contrib/validators.mac</code></a> or another file, preferably contributing to the STACK project.</li>
<li>Add documentation and comprehensive test cases (please!) to let other people know what the validator is intended to do, and to help ensure behaviour remains stable.</li>
<li>
<p>Include the <a href="../../Authoring/Inclusions/#inclusions-within-cas-logic">optional validators within the cas logic</a> with either of the following</p>
<p>stack_include("https://raw.githubusercontent.com/maths/moodle-qtype_stack/master/stack/maxima/contrib/validators.mac");
stack_include_contrib("validators.mac");</p>
</li>
</ol>
<p>Note the url <code>https://raw.githubusercontent.com/</code> is used to include the raw content of this file.</p>
<p>Including external content always poses a minor additional security risk.  In this case (1) the content is included and then subject to the same checks as if you had typed it yourself, and (2) the developers will take the same care in accepting contributions to the master branch as they do with the existing code base.</p>
<h3 id="example-forbid-underscores-in-an-input">Example: forbid underscores in an input</h3>
<p>Create a new question.</p>
<ol>
<li>
<p>Add the following to the question variables, which loads contributed validators.</p>
<p>stack_include("https://raw.githubusercontent.com/maths/moodle-qtype_stack/master/stack/maxima/contrib/validators.mac");</p>
</li>
</ol>
<p>or add the following to the question variables</p>
<pre><code>stack_include_contrib("validators.mac");
</code></pre>
<ol>
<li>Use the extra option <code>validator:validate_underscore</code> in the input.</li>
</ol>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <center> Copyright &copy; 2023 Ricardo Largaespada </center>
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/rilarfer" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="../../javascripts/removeCredits.js"></script>
      
    
  </body>
</html>